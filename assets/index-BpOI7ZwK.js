(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Vd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var lp={exports:{}},ol={},cp={exports:{}},Ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yb;function Vk(){if(Yb)return Ve;Yb=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function m(F){return F===null||typeof F!="object"?null:(F=p&&F[p]||F["@@iterator"],typeof F=="function"?F:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,_={};function w(F,G,ne){this.props=F,this.context=G,this.refs=_,this.updater=ne||v}w.prototype.isReactComponent={},w.prototype.setState=function(F,G){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,G,"setState")},w.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function x(){}x.prototype=w.prototype;function C(F,G,ne){this.props=F,this.context=G,this.refs=_,this.updater=ne||v}var k=C.prototype=new x;k.constructor=C,b(k,w.prototype),k.isPureReactComponent=!0;var R=Array.isArray,A=Object.prototype.hasOwnProperty,M={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function O(F,G,ne){var le,ue={},ce=null,Ee=null;if(G!=null)for(le in G.ref!==void 0&&(Ee=G.ref),G.key!==void 0&&(ce=""+G.key),G)A.call(G,le)&&!P.hasOwnProperty(le)&&(ue[le]=G[le]);var se=arguments.length-2;if(se===1)ue.children=ne;else if(1<se){for(var Me=Array(se),ze=0;ze<se;ze++)Me[ze]=arguments[ze+2];ue.children=Me}if(F&&F.defaultProps)for(le in se=F.defaultProps,se)ue[le]===void 0&&(ue[le]=se[le]);return{$$typeof:t,type:F,key:ce,ref:Ee,props:ue,_owner:M.current}}function z(F,G){return{$$typeof:t,type:F.type,key:G,ref:F.ref,props:F.props,_owner:F._owner}}function B(F){return typeof F=="object"&&F!==null&&F.$$typeof===t}function $(F){var G={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(ne){return G[ne]})}var ee=/\/+/g;function re(F,G){return typeof F=="object"&&F!==null&&F.key!=null?$(""+F.key):G.toString(36)}function he(F,G,ne,le,ue){var ce=typeof F;(ce==="undefined"||ce==="boolean")&&(F=null);var Ee=!1;if(F===null)Ee=!0;else switch(ce){case"string":case"number":Ee=!0;break;case"object":switch(F.$$typeof){case t:case e:Ee=!0}}if(Ee)return Ee=F,ue=ue(Ee),F=le===""?"."+re(Ee,0):le,R(ue)?(ne="",F!=null&&(ne=F.replace(ee,"$&/")+"/"),he(ue,G,ne,"",function(ze){return ze})):ue!=null&&(B(ue)&&(ue=z(ue,ne+(!ue.key||Ee&&Ee.key===ue.key?"":(""+ue.key).replace(ee,"$&/")+"/")+F)),G.push(ue)),1;if(Ee=0,le=le===""?".":le+":",R(F))for(var se=0;se<F.length;se++){ce=F[se];var Me=le+re(ce,se);Ee+=he(ce,G,ne,Me,ue)}else if(Me=m(F),typeof Me=="function")for(F=Me.call(F),se=0;!(ce=F.next()).done;)ce=ce.value,Me=le+re(ce,se++),Ee+=he(ce,G,ne,Me,ue);else if(ce==="object")throw G=String(F),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return Ee}function pe(F,G,ne){if(F==null)return F;var le=[],ue=0;return he(F,le,"","",function(ce){return G.call(ne,ce,ue++)}),le}function ie(F){if(F._status===-1){var G=F._result;G=G(),G.then(function(ne){(F._status===0||F._status===-1)&&(F._status=1,F._result=ne)},function(ne){(F._status===0||F._status===-1)&&(F._status=2,F._result=ne)}),F._status===-1&&(F._status=0,F._result=G)}if(F._status===1)return F._result.default;throw F._result}var oe={current:null},K={transition:null},q={ReactCurrentDispatcher:oe,ReactCurrentBatchConfig:K,ReactCurrentOwner:M};function Y(){throw Error("act(...) is not supported in production builds of React.")}return Ve.Children={map:pe,forEach:function(F,G,ne){pe(F,function(){G.apply(this,arguments)},ne)},count:function(F){var G=0;return pe(F,function(){G++}),G},toArray:function(F){return pe(F,function(G){return G})||[]},only:function(F){if(!B(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},Ve.Component=w,Ve.Fragment=n,Ve.Profiler=i,Ve.PureComponent=C,Ve.StrictMode=r,Ve.Suspense=u,Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q,Ve.act=Y,Ve.cloneElement=function(F,G,ne){if(F==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var le=b({},F.props),ue=F.key,ce=F.ref,Ee=F._owner;if(G!=null){if(G.ref!==void 0&&(ce=G.ref,Ee=M.current),G.key!==void 0&&(ue=""+G.key),F.type&&F.type.defaultProps)var se=F.type.defaultProps;for(Me in G)A.call(G,Me)&&!P.hasOwnProperty(Me)&&(le[Me]=G[Me]===void 0&&se!==void 0?se[Me]:G[Me])}var Me=arguments.length-2;if(Me===1)le.children=ne;else if(1<Me){se=Array(Me);for(var ze=0;ze<Me;ze++)se[ze]=arguments[ze+2];le.children=se}return{$$typeof:t,type:F.type,key:ue,ref:ce,props:le,_owner:Ee}},Ve.createContext=function(F){return F={$$typeof:a,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},F.Provider={$$typeof:s,_context:F},F.Consumer=F},Ve.createElement=O,Ve.createFactory=function(F){var G=O.bind(null,F);return G.type=F,G},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(F){return{$$typeof:l,render:F}},Ve.isValidElement=B,Ve.lazy=function(F){return{$$typeof:f,_payload:{_status:-1,_result:F},_init:ie}},Ve.memo=function(F,G){return{$$typeof:d,type:F,compare:G===void 0?null:G}},Ve.startTransition=function(F){var G=K.transition;K.transition={};try{F()}finally{K.transition=G}},Ve.unstable_act=Y,Ve.useCallback=function(F,G){return oe.current.useCallback(F,G)},Ve.useContext=function(F){return oe.current.useContext(F)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(F){return oe.current.useDeferredValue(F)},Ve.useEffect=function(F,G){return oe.current.useEffect(F,G)},Ve.useId=function(){return oe.current.useId()},Ve.useImperativeHandle=function(F,G,ne){return oe.current.useImperativeHandle(F,G,ne)},Ve.useInsertionEffect=function(F,G){return oe.current.useInsertionEffect(F,G)},Ve.useLayoutEffect=function(F,G){return oe.current.useLayoutEffect(F,G)},Ve.useMemo=function(F,G){return oe.current.useMemo(F,G)},Ve.useReducer=function(F,G,ne){return oe.current.useReducer(F,G,ne)},Ve.useRef=function(F){return oe.current.useRef(F)},Ve.useState=function(F){return oe.current.useState(F)},Ve.useSyncExternalStore=function(F,G,ne){return oe.current.useSyncExternalStore(F,G,ne)},Ve.useTransition=function(){return oe.current.useTransition()},Ve.version="18.3.1",Ve}var Qb;function Gg(){return Qb||(Qb=1,cp.exports=Vk()),cp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kb;function $k(){if(Kb)return ol;Kb=1;var t=Gg(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(l,u,d){var f,p={},m=null,v=null;d!==void 0&&(m=""+d),u.key!==void 0&&(m=""+u.key),u.ref!==void 0&&(v=u.ref);for(f in u)r.call(u,f)&&!s.hasOwnProperty(f)&&(p[f]=u[f]);if(l&&l.defaultProps)for(f in u=l.defaultProps,u)p[f]===void 0&&(p[f]=u[f]);return{$$typeof:e,type:l,key:m,ref:v,props:p,_owner:i.current}}return ol.Fragment=n,ol.jsx=a,ol.jsxs=a,ol}var Zb;function qk(){return Zb||(Zb=1,lp.exports=$k()),lp.exports}var E=qk(),T=Gg();const Q=Vd(T);var vu={},up={exports:{}},Yn={},dp={exports:{}},fp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xb;function Gk(){return Xb||(Xb=1,(function(t){function e(K,q){var Y=K.length;K.push(q);e:for(;0<Y;){var F=Y-1>>>1,G=K[F];if(0<i(G,q))K[F]=q,K[Y]=G,Y=F;else break e}}function n(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var q=K[0],Y=K.pop();if(Y!==q){K[0]=Y;e:for(var F=0,G=K.length,ne=G>>>1;F<ne;){var le=2*(F+1)-1,ue=K[le],ce=le+1,Ee=K[ce];if(0>i(ue,Y))ce<G&&0>i(Ee,ue)?(K[F]=Ee,K[ce]=Y,F=ce):(K[F]=ue,K[le]=Y,F=le);else if(ce<G&&0>i(Ee,Y))K[F]=Ee,K[ce]=Y,F=ce;else break e}}return q}function i(K,q){var Y=K.sortIndex-q.sortIndex;return Y!==0?Y:K.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],d=[],f=1,p=null,m=3,v=!1,b=!1,_=!1,w=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(K){for(var q=n(d);q!==null;){if(q.callback===null)r(d);else if(q.startTime<=K)r(d),q.sortIndex=q.expirationTime,e(u,q);else break;q=n(d)}}function R(K){if(_=!1,k(K),!b)if(n(u)!==null)b=!0,ie(A);else{var q=n(d);q!==null&&oe(R,q.startTime-K)}}function A(K,q){b=!1,_&&(_=!1,x(O),O=-1),v=!0;var Y=m;try{for(k(q),p=n(u);p!==null&&(!(p.expirationTime>q)||K&&!$());){var F=p.callback;if(typeof F=="function"){p.callback=null,m=p.priorityLevel;var G=F(p.expirationTime<=q);q=t.unstable_now(),typeof G=="function"?p.callback=G:p===n(u)&&r(u),k(q)}else r(u);p=n(u)}if(p!==null)var ne=!0;else{var le=n(d);le!==null&&oe(R,le.startTime-q),ne=!1}return ne}finally{p=null,m=Y,v=!1}}var M=!1,P=null,O=-1,z=5,B=-1;function $(){return!(t.unstable_now()-B<z)}function ee(){if(P!==null){var K=t.unstable_now();B=K;var q=!0;try{q=P(!0,K)}finally{q?re():(M=!1,P=null)}}else M=!1}var re;if(typeof C=="function")re=function(){C(ee)};else if(typeof MessageChannel<"u"){var he=new MessageChannel,pe=he.port2;he.port1.onmessage=ee,re=function(){pe.postMessage(null)}}else re=function(){w(ee,0)};function ie(K){P=K,M||(M=!0,re())}function oe(K,q){O=w(function(){K(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(K){K.callback=null},t.unstable_continueExecution=function(){b||v||(b=!0,ie(A))},t.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<K?Math.floor(1e3/K):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(K){switch(m){case 1:case 2:case 3:var q=3;break;default:q=m}var Y=m;m=q;try{return K()}finally{m=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(K,q){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var Y=m;m=K;try{return q()}finally{m=Y}},t.unstable_scheduleCallback=function(K,q,Y){var F=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?F+Y:F):Y=F,K){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=Y+G,K={id:f++,callback:q,priorityLevel:K,startTime:Y,expirationTime:G,sortIndex:-1},Y>F?(K.sortIndex=Y,e(d,K),n(u)===null&&K===n(d)&&(_?(x(O),O=-1):_=!0,oe(R,Y-F))):(K.sortIndex=G,e(u,K),b||v||(b=!0,ie(A))),K},t.unstable_shouldYield=$,t.unstable_wrapCallback=function(K){var q=m;return function(){var Y=m;m=q;try{return K.apply(this,arguments)}finally{m=Y}}}})(fp)),fp}var Jb;function Yk(){return Jb||(Jb=1,dp.exports=Gk()),dp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e0;function Qk(){if(e0)return Yn;e0=1;var t=Gg(),e=Yk();function n(o){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+o,h=1;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(o,c){a(o,c),a(o+"Capture",c)}function a(o,c){for(i[o]=c,o=0;o<c.length;o++)r.add(c[o])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(o){return u.call(p,o)?!0:u.call(f,o)?!1:d.test(o)?p[o]=!0:(f[o]=!0,!1)}function v(o,c,h,g){if(h!==null&&h.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return g?!1:h!==null?!h.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function b(o,c,h,g){if(c===null||typeof c>"u"||v(o,c,h,g))return!0;if(g)return!1;if(h!==null)switch(h.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function _(o,c,h,g,y,S,D){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=g,this.attributeNamespace=y,this.mustUseProperty=h,this.propertyName=o,this.type=c,this.sanitizeURL=S,this.removeEmptyString=D}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){w[o]=new _(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var c=o[0];w[c]=new _(c,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){w[o]=new _(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){w[o]=new _(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){w[o]=new _(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){w[o]=new _(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){w[o]=new _(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){w[o]=new _(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){w[o]=new _(o,5,!1,o.toLowerCase(),null,!1,!1)});var x=/[\-:]([a-z])/g;function C(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var c=o.replace(x,C);w[c]=new _(c,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var c=o.replace(x,C);w[c]=new _(c,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var c=o.replace(x,C);w[c]=new _(c,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){w[o]=new _(o,1,!1,o.toLowerCase(),null,!1,!1)}),w.xlinkHref=new _("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){w[o]=new _(o,1,!1,o.toLowerCase(),null,!0,!0)});function k(o,c,h,g){var y=w.hasOwnProperty(c)?w[c]:null;(y!==null?y.type!==0:g||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(b(c,h,y,g)&&(h=null),g||y===null?m(c)&&(h===null?o.removeAttribute(c):o.setAttribute(c,""+h)):y.mustUseProperty?o[y.propertyName]=h===null?y.type===3?!1:"":h:(c=y.attributeName,g=y.attributeNamespace,h===null?o.removeAttribute(c):(y=y.type,h=y===3||y===4&&h===!0?"":""+h,g?o.setAttributeNS(g,c,h):o.setAttribute(c,h))))}var R=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,A=Symbol.for("react.element"),M=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),$=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),re=Symbol.for("react.suspense"),he=Symbol.for("react.suspense_list"),pe=Symbol.for("react.memo"),ie=Symbol.for("react.lazy"),oe=Symbol.for("react.offscreen"),K=Symbol.iterator;function q(o){return o===null||typeof o!="object"?null:(o=K&&o[K]||o["@@iterator"],typeof o=="function"?o:null)}var Y=Object.assign,F;function G(o){if(F===void 0)try{throw Error()}catch(h){var c=h.stack.trim().match(/\n( *(at )?)/);F=c&&c[1]||""}return`
`+F+o}var ne=!1;function le(o,c){if(!o||ne)return"";ne=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(V){var g=V}Reflect.construct(o,[],c)}else{try{c.call()}catch(V){g=V}o.call(c.prototype)}else{try{throw Error()}catch(V){g=V}o()}}catch(V){if(V&&g&&typeof V.stack=="string"){for(var y=V.stack.split(`
`),S=g.stack.split(`
`),D=y.length-1,N=S.length-1;1<=D&&0<=N&&y[D]!==S[N];)N--;for(;1<=D&&0<=N;D--,N--)if(y[D]!==S[N]){if(D!==1||N!==1)do if(D--,N--,0>N||y[D]!==S[N]){var L=`
`+y[D].replace(" at new "," at ");return o.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",o.displayName)),L}while(1<=D&&0<=N);break}}}finally{ne=!1,Error.prepareStackTrace=h}return(o=o?o.displayName||o.name:"")?G(o):""}function ue(o){switch(o.tag){case 5:return G(o.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return o=le(o.type,!1),o;case 11:return o=le(o.type.render,!1),o;case 1:return o=le(o.type,!0),o;default:return""}}function ce(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case P:return"Fragment";case M:return"Portal";case z:return"Profiler";case O:return"StrictMode";case re:return"Suspense";case he:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case $:return(o.displayName||"Context")+".Consumer";case B:return(o._context.displayName||"Context")+".Provider";case ee:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case pe:return c=o.displayName||null,c!==null?c:ce(o.type)||"Memo";case ie:c=o._payload,o=o._init;try{return ce(o(c))}catch{}}return null}function Ee(o){var c=o.type;switch(o.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=c.render,o=o.displayName||o.name||"",c.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ce(c);case 8:return c===O?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function se(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Me(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function ze(o){var c=Me(o)?"checked":"value",h=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),g=""+o[c];if(!o.hasOwnProperty(c)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var y=h.get,S=h.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return y.call(this)},set:function(D){g=""+D,S.call(this,D)}}),Object.defineProperty(o,c,{enumerable:h.enumerable}),{getValue:function(){return g},setValue:function(D){g=""+D},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function jt(o){o._valueTracker||(o._valueTracker=ze(o))}function Bt(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var h=c.getValue(),g="";return o&&(g=Me(o)?o.checked?"true":"false":o.value),o=g,o!==h?(c.setValue(o),!0):!1}function zn(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function ge(o,c){var h=c.checked;return Y({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??o._wrapperState.initialChecked})}function Pe(o,c){var h=c.defaultValue==null?"":c.defaultValue,g=c.checked!=null?c.checked:c.defaultChecked;h=se(c.value!=null?c.value:h),o._wrapperState={initialChecked:g,initialValue:h,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function Ze(o,c){c=c.checked,c!=null&&k(o,"checked",c,!1)}function _t(o,c){Ze(o,c);var h=se(c.value),g=c.type;if(h!=null)g==="number"?(h===0&&o.value===""||o.value!=h)&&(o.value=""+h):o.value!==""+h&&(o.value=""+h);else if(g==="submit"||g==="reset"){o.removeAttribute("value");return}c.hasOwnProperty("value")?We(o,c.type,h):c.hasOwnProperty("defaultValue")&&We(o,c.type,se(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(o.defaultChecked=!!c.defaultChecked)}function en(o,c,h){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var g=c.type;if(!(g!=="submit"&&g!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+o._wrapperState.initialValue,h||c===o.value||(o.value=c),o.defaultValue=c}h=o.name,h!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,h!==""&&(o.name=h)}function We(o,c,h){(c!=="number"||zn(o.ownerDocument)!==o)&&(h==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+h&&(o.defaultValue=""+h))}var xe=Array.isArray;function lt(o,c,h,g){if(o=o.options,c){c={};for(var y=0;y<h.length;y++)c["$"+h[y]]=!0;for(h=0;h<o.length;h++)y=c.hasOwnProperty("$"+o[h].value),o[h].selected!==y&&(o[h].selected=y),y&&g&&(o[h].defaultSelected=!0)}else{for(h=""+se(h),c=null,y=0;y<o.length;y++){if(o[y].value===h){o[y].selected=!0,g&&(o[y].defaultSelected=!0);return}c!==null||o[y].disabled||(c=o[y])}c!==null&&(c.selected=!0)}}function Le(o,c){if(c.dangerouslySetInnerHTML!=null)throw Error(n(91));return Y({},c,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function Z(o,c){var h=c.value;if(h==null){if(h=c.children,c=c.defaultValue,h!=null){if(c!=null)throw Error(n(92));if(xe(h)){if(1<h.length)throw Error(n(93));h=h[0]}c=h}c==null&&(c=""),h=c}o._wrapperState={initialValue:se(h)}}function ye(o,c){var h=se(c.value),g=se(c.defaultValue);h!=null&&(h=""+h,h!==o.value&&(o.value=h),c.defaultValue==null&&o.defaultValue!==h&&(o.defaultValue=h)),g!=null&&(o.defaultValue=""+g)}function Fe(o){var c=o.textContent;c===o._wrapperState.initialValue&&c!==""&&c!==null&&(o.value=c)}function Ne(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function be(o,c){return o==null||o==="http://www.w3.org/1999/xhtml"?Ne(c):o==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var Se,Re=(function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,h,g,y){MSApp.execUnsafeLocalFunction(function(){return o(c,h,g,y)})}:o})(function(o,c){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=c;else{for(Se=Se||document.createElement("div"),Se.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=Se.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;c.firstChild;)o.appendChild(c.firstChild)}});function He(o,c){if(c){var h=o.firstChild;if(h&&h===o.lastChild&&h.nodeType===3){h.nodeValue=c;return}}o.textContent=c}var Ue={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rt=["Webkit","ms","Moz","O"];Object.keys(Ue).forEach(function(o){rt.forEach(function(c){c=c+o.charAt(0).toUpperCase()+o.substring(1),Ue[c]=Ue[o]})});function ut(o,c,h){return c==null||typeof c=="boolean"||c===""?"":h||typeof c!="number"||c===0||Ue.hasOwnProperty(o)&&Ue[o]?(""+c).trim():c+"px"}function dr(o,c){o=o.style;for(var h in c)if(c.hasOwnProperty(h)){var g=h.indexOf("--")===0,y=ut(h,c[h],g);h==="float"&&(h="cssFloat"),g?o.setProperty(h,y):o[h]=y}}var gt=Y({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function it(o,c){if(c){if(gt[o]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(n(137,o));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(n(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(n(61))}if(c.style!=null&&typeof c.style!="object")throw Error(n(62))}}function Wt(o,c){if(o.indexOf("-")===-1)return typeof c.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Be=null;function qe(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Hn=null,yn=null,Xe=null;function Vt(o){if(o=qo(o)){if(typeof Hn!="function")throw Error(n(280));var c=o.stateNode;c&&(c=Mc(c),Hn(o.stateNode,o.type,c))}}function de(o){yn?Xe?Xe.push(o):Xe=[o]:yn=o}function Ie(){if(yn){var o=yn,c=Xe;if(Xe=yn=null,Vt(o),c)for(o=0;o<c.length;o++)Vt(c[o])}}function Ge(o,c){return o(c)}function Je(){}var zt=!1;function ct(o,c,h){if(zt)return o(c,h);zt=!0;try{return Ge(o,c,h)}finally{zt=!1,(yn!==null||Xe!==null)&&(Je(),Ie())}}function Oe(o,c){var h=o.stateNode;if(h===null)return null;var g=Mc(h);if(g===null)return null;h=g[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(o=o.type,g=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!g;break e;default:o=!1}if(o)return null;if(h&&typeof h!="function")throw Error(n(231,c,typeof h));return h}var $t=!1;if(l)try{var mt={};Object.defineProperty(mt,"passive",{get:function(){$t=!0}}),window.addEventListener("test",mt,mt),window.removeEventListener("test",mt,mt)}catch{$t=!1}function Ot(o,c,h,g,y,S,D,N,L){var V=Array.prototype.slice.call(arguments,3);try{c.apply(h,V)}catch(J){this.onError(J)}}var Un=!1,dn=null,Bn=!1,di=null,Do={onError:function(o){Un=!0,dn=o}};function XT(o,c,h,g,y,S,D,N,L){Un=!1,dn=null,Ot.apply(Do,arguments)}function JT(o,c,h,g,y,S,D,N,L){if(XT.apply(this,arguments),Un){if(Un){var V=dn;Un=!1,dn=null}else throw Error(n(198));Bn||(Bn=!0,di=V)}}function Os(o){var c=o,h=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(h=c.return),o=c.return;while(o)}return c.tag===3?h:null}function vv(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function yv(o){if(Os(o)!==o)throw Error(n(188))}function eD(o){var c=o.alternate;if(!c){if(c=Os(o),c===null)throw Error(n(188));return c!==o?null:o}for(var h=o,g=c;;){var y=h.return;if(y===null)break;var S=y.alternate;if(S===null){if(g=y.return,g!==null){h=g;continue}break}if(y.child===S.child){for(S=y.child;S;){if(S===h)return yv(y),o;if(S===g)return yv(y),c;S=S.sibling}throw Error(n(188))}if(h.return!==g.return)h=y,g=S;else{for(var D=!1,N=y.child;N;){if(N===h){D=!0,h=y,g=S;break}if(N===g){D=!0,g=y,h=S;break}N=N.sibling}if(!D){for(N=S.child;N;){if(N===h){D=!0,h=S,g=y;break}if(N===g){D=!0,g=S,h=y;break}N=N.sibling}if(!D)throw Error(n(189))}}if(h.alternate!==g)throw Error(n(190))}if(h.tag!==3)throw Error(n(188));return h.stateNode.current===h?o:c}function bv(o){return o=eD(o),o!==null?_v(o):null}function _v(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var c=_v(o);if(c!==null)return c;o=o.sibling}return null}var Sv=e.unstable_scheduleCallback,wv=e.unstable_cancelCallback,tD=e.unstable_shouldYield,nD=e.unstable_requestPaint,qt=e.unstable_now,rD=e.unstable_getCurrentPriorityLevel,kf=e.unstable_ImmediatePriority,xv=e.unstable_UserBlockingPriority,fc=e.unstable_NormalPriority,iD=e.unstable_LowPriority,Ev=e.unstable_IdlePriority,hc=null,$r=null;function sD(o){if($r&&typeof $r.onCommitFiberRoot=="function")try{$r.onCommitFiberRoot(hc,o,void 0,(o.current.flags&128)===128)}catch{}}var Rr=Math.clz32?Math.clz32:lD,aD=Math.log,oD=Math.LN2;function lD(o){return o>>>=0,o===0?32:31-(aD(o)/oD|0)|0}var pc=64,gc=4194304;function ko(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function mc(o,c){var h=o.pendingLanes;if(h===0)return 0;var g=0,y=o.suspendedLanes,S=o.pingedLanes,D=h&268435455;if(D!==0){var N=D&~y;N!==0?g=ko(N):(S&=D,S!==0&&(g=ko(S)))}else D=h&~y,D!==0?g=ko(D):S!==0&&(g=ko(S));if(g===0)return 0;if(c!==0&&c!==g&&(c&y)===0&&(y=g&-g,S=c&-c,y>=S||y===16&&(S&4194240)!==0))return c;if((g&4)!==0&&(g|=h&16),c=o.entangledLanes,c!==0)for(o=o.entanglements,c&=g;0<c;)h=31-Rr(c),y=1<<h,g|=o[h],c&=~y;return g}function cD(o,c){switch(o){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uD(o,c){for(var h=o.suspendedLanes,g=o.pingedLanes,y=o.expirationTimes,S=o.pendingLanes;0<S;){var D=31-Rr(S),N=1<<D,L=y[D];L===-1?((N&h)===0||(N&g)!==0)&&(y[D]=cD(N,c)):L<=c&&(o.expiredLanes|=N),S&=~N}}function Af(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function Cv(){var o=pc;return pc<<=1,(pc&4194240)===0&&(pc=64),o}function Rf(o){for(var c=[],h=0;31>h;h++)c.push(o);return c}function Ao(o,c,h){o.pendingLanes|=c,c!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,c=31-Rr(c),o[c]=h}function dD(o,c){var h=o.pendingLanes&~c;o.pendingLanes=c,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=c,o.mutableReadLanes&=c,o.entangledLanes&=c,c=o.entanglements;var g=o.eventTimes;for(o=o.expirationTimes;0<h;){var y=31-Rr(h),S=1<<y;c[y]=0,g[y]=-1,o[y]=-1,h&=~S}}function Of(o,c){var h=o.entangledLanes|=c;for(o=o.entanglements;h;){var g=31-Rr(h),y=1<<g;y&c|o[g]&c&&(o[g]|=c),h&=~y}}var dt=0;function Tv(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var Dv,Mf,kv,Av,Rv,Nf=!1,vc=[],$i=null,qi=null,Gi=null,Ro=new Map,Oo=new Map,Yi=[],fD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ov(o,c){switch(o){case"focusin":case"focusout":$i=null;break;case"dragenter":case"dragleave":qi=null;break;case"mouseover":case"mouseout":Gi=null;break;case"pointerover":case"pointerout":Ro.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oo.delete(c.pointerId)}}function Mo(o,c,h,g,y,S){return o===null||o.nativeEvent!==S?(o={blockedOn:c,domEventName:h,eventSystemFlags:g,nativeEvent:S,targetContainers:[y]},c!==null&&(c=qo(c),c!==null&&Mf(c)),o):(o.eventSystemFlags|=g,c=o.targetContainers,y!==null&&c.indexOf(y)===-1&&c.push(y),o)}function hD(o,c,h,g,y){switch(c){case"focusin":return $i=Mo($i,o,c,h,g,y),!0;case"dragenter":return qi=Mo(qi,o,c,h,g,y),!0;case"mouseover":return Gi=Mo(Gi,o,c,h,g,y),!0;case"pointerover":var S=y.pointerId;return Ro.set(S,Mo(Ro.get(S)||null,o,c,h,g,y)),!0;case"gotpointercapture":return S=y.pointerId,Oo.set(S,Mo(Oo.get(S)||null,o,c,h,g,y)),!0}return!1}function Mv(o){var c=Ms(o.target);if(c!==null){var h=Os(c);if(h!==null){if(c=h.tag,c===13){if(c=vv(h),c!==null){o.blockedOn=c,Rv(o.priority,function(){kv(h)});return}}else if(c===3&&h.stateNode.current.memoizedState.isDehydrated){o.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}o.blockedOn=null}function yc(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var h=Pf(o.domEventName,o.eventSystemFlags,c[0],o.nativeEvent);if(h===null){h=o.nativeEvent;var g=new h.constructor(h.type,h);Be=g,h.target.dispatchEvent(g),Be=null}else return c=qo(h),c!==null&&Mf(c),o.blockedOn=h,!1;c.shift()}return!0}function Nv(o,c,h){yc(o)&&h.delete(c)}function pD(){Nf=!1,$i!==null&&yc($i)&&($i=null),qi!==null&&yc(qi)&&(qi=null),Gi!==null&&yc(Gi)&&(Gi=null),Ro.forEach(Nv),Oo.forEach(Nv)}function No(o,c){o.blockedOn===c&&(o.blockedOn=null,Nf||(Nf=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,pD)))}function Io(o){function c(y){return No(y,o)}if(0<vc.length){No(vc[0],o);for(var h=1;h<vc.length;h++){var g=vc[h];g.blockedOn===o&&(g.blockedOn=null)}}for($i!==null&&No($i,o),qi!==null&&No(qi,o),Gi!==null&&No(Gi,o),Ro.forEach(c),Oo.forEach(c),h=0;h<Yi.length;h++)g=Yi[h],g.blockedOn===o&&(g.blockedOn=null);for(;0<Yi.length&&(h=Yi[0],h.blockedOn===null);)Mv(h),h.blockedOn===null&&Yi.shift()}var wa=R.ReactCurrentBatchConfig,bc=!0;function gD(o,c,h,g){var y=dt,S=wa.transition;wa.transition=null;try{dt=1,If(o,c,h,g)}finally{dt=y,wa.transition=S}}function mD(o,c,h,g){var y=dt,S=wa.transition;wa.transition=null;try{dt=4,If(o,c,h,g)}finally{dt=y,wa.transition=S}}function If(o,c,h,g){if(bc){var y=Pf(o,c,h,g);if(y===null)Xf(o,c,g,_c,h),Ov(o,g);else if(hD(y,o,c,h,g))g.stopPropagation();else if(Ov(o,g),c&4&&-1<fD.indexOf(o)){for(;y!==null;){var S=qo(y);if(S!==null&&Dv(S),S=Pf(o,c,h,g),S===null&&Xf(o,c,g,_c,h),S===y)break;y=S}y!==null&&g.stopPropagation()}else Xf(o,c,g,null,h)}}var _c=null;function Pf(o,c,h,g){if(_c=null,o=qe(g),o=Ms(o),o!==null)if(c=Os(o),c===null)o=null;else if(h=c.tag,h===13){if(o=vv(c),o!==null)return o;o=null}else if(h===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null);return _c=o,null}function Iv(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(rD()){case kf:return 1;case xv:return 4;case fc:case iD:return 16;case Ev:return 536870912;default:return 16}default:return 16}}var Qi=null,Lf=null,Sc=null;function Pv(){if(Sc)return Sc;var o,c=Lf,h=c.length,g,y="value"in Qi?Qi.value:Qi.textContent,S=y.length;for(o=0;o<h&&c[o]===y[o];o++);var D=h-o;for(g=1;g<=D&&c[h-g]===y[S-g];g++);return Sc=y.slice(o,1<g?1-g:void 0)}function wc(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function xc(){return!0}function Lv(){return!1}function ir(o){function c(h,g,y,S,D){this._reactName=h,this._targetInst=y,this.type=g,this.nativeEvent=S,this.target=D,this.currentTarget=null;for(var N in o)o.hasOwnProperty(N)&&(h=o[N],this[N]=h?h(S):S[N]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?xc:Lv,this.isPropagationStopped=Lv,this}return Y(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=xc)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=xc)},persist:function(){},isPersistent:xc}),c}var xa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ff=ir(xa),Po=Y({},xa,{view:0,detail:0}),vD=ir(Po),jf,zf,Lo,Ec=Y({},Po,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Uf,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Lo&&(Lo&&o.type==="mousemove"?(jf=o.screenX-Lo.screenX,zf=o.screenY-Lo.screenY):zf=jf=0,Lo=o),jf)},movementY:function(o){return"movementY"in o?o.movementY:zf}}),Fv=ir(Ec),yD=Y({},Ec,{dataTransfer:0}),bD=ir(yD),_D=Y({},Po,{relatedTarget:0}),Hf=ir(_D),SD=Y({},xa,{animationName:0,elapsedTime:0,pseudoElement:0}),wD=ir(SD),xD=Y({},xa,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),ED=ir(xD),CD=Y({},xa,{data:0}),jv=ir(CD),TD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},DD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function AD(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=kD[o])?!!c[o]:!1}function Uf(){return AD}var RD=Y({},Po,{key:function(o){if(o.key){var c=TD[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=wc(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?DD[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Uf,charCode:function(o){return o.type==="keypress"?wc(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?wc(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),OD=ir(RD),MD=Y({},Ec,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zv=ir(MD),ND=Y({},Po,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Uf}),ID=ir(ND),PD=Y({},xa,{propertyName:0,elapsedTime:0,pseudoElement:0}),LD=ir(PD),FD=Y({},Ec,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),jD=ir(FD),zD=[9,13,27,32],Bf=l&&"CompositionEvent"in window,Fo=null;l&&"documentMode"in document&&(Fo=document.documentMode);var HD=l&&"TextEvent"in window&&!Fo,Hv=l&&(!Bf||Fo&&8<Fo&&11>=Fo),Uv=" ",Bv=!1;function Wv(o,c){switch(o){case"keyup":return zD.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vv(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Ea=!1;function UD(o,c){switch(o){case"compositionend":return Vv(c);case"keypress":return c.which!==32?null:(Bv=!0,Uv);case"textInput":return o=c.data,o===Uv&&Bv?null:o;default:return null}}function BD(o,c){if(Ea)return o==="compositionend"||!Bf&&Wv(o,c)?(o=Pv(),Sc=Lf=Qi=null,Ea=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return Hv&&c.locale!=="ko"?null:c.data;default:return null}}var WD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $v(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!WD[o.type]:c==="textarea"}function qv(o,c,h,g){de(g),c=Ac(c,"onChange"),0<c.length&&(h=new Ff("onChange","change",null,h,g),o.push({event:h,listeners:c}))}var jo=null,zo=null;function VD(o){uy(o,0)}function Cc(o){var c=Aa(o);if(Bt(c))return o}function $D(o,c){if(o==="change")return c}var Gv=!1;if(l){var Wf;if(l){var Vf="oninput"in document;if(!Vf){var Yv=document.createElement("div");Yv.setAttribute("oninput","return;"),Vf=typeof Yv.oninput=="function"}Wf=Vf}else Wf=!1;Gv=Wf&&(!document.documentMode||9<document.documentMode)}function Qv(){jo&&(jo.detachEvent("onpropertychange",Kv),zo=jo=null)}function Kv(o){if(o.propertyName==="value"&&Cc(zo)){var c=[];qv(c,zo,o,qe(o)),ct(VD,c)}}function qD(o,c,h){o==="focusin"?(Qv(),jo=c,zo=h,jo.attachEvent("onpropertychange",Kv)):o==="focusout"&&Qv()}function GD(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Cc(zo)}function YD(o,c){if(o==="click")return Cc(c)}function QD(o,c){if(o==="input"||o==="change")return Cc(c)}function KD(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var Or=typeof Object.is=="function"?Object.is:KD;function Ho(o,c){if(Or(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var h=Object.keys(o),g=Object.keys(c);if(h.length!==g.length)return!1;for(g=0;g<h.length;g++){var y=h[g];if(!u.call(c,y)||!Or(o[y],c[y]))return!1}return!0}function Zv(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Xv(o,c){var h=Zv(o);o=0;for(var g;h;){if(h.nodeType===3){if(g=o+h.textContent.length,o<=c&&g>=c)return{node:h,offset:c-o};o=g}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=Zv(h)}}function Jv(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?Jv(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function ey(){for(var o=window,c=zn();c instanceof o.HTMLIFrameElement;){try{var h=typeof c.contentWindow.location.href=="string"}catch{h=!1}if(h)o=c.contentWindow;else break;c=zn(o.document)}return c}function $f(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}function ZD(o){var c=ey(),h=o.focusedElem,g=o.selectionRange;if(c!==h&&h&&h.ownerDocument&&Jv(h.ownerDocument.documentElement,h)){if(g!==null&&$f(h)){if(c=g.start,o=g.end,o===void 0&&(o=c),"selectionStart"in h)h.selectionStart=c,h.selectionEnd=Math.min(o,h.value.length);else if(o=(c=h.ownerDocument||document)&&c.defaultView||window,o.getSelection){o=o.getSelection();var y=h.textContent.length,S=Math.min(g.start,y);g=g.end===void 0?S:Math.min(g.end,y),!o.extend&&S>g&&(y=g,g=S,S=y),y=Xv(h,S);var D=Xv(h,g);y&&D&&(o.rangeCount!==1||o.anchorNode!==y.node||o.anchorOffset!==y.offset||o.focusNode!==D.node||o.focusOffset!==D.offset)&&(c=c.createRange(),c.setStart(y.node,y.offset),o.removeAllRanges(),S>g?(o.addRange(c),o.extend(D.node,D.offset)):(c.setEnd(D.node,D.offset),o.addRange(c)))}}for(c=[],o=h;o=o.parentNode;)o.nodeType===1&&c.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<c.length;h++)o=c[h],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var XD=l&&"documentMode"in document&&11>=document.documentMode,Ca=null,qf=null,Uo=null,Gf=!1;function ty(o,c,h){var g=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Gf||Ca==null||Ca!==zn(g)||(g=Ca,"selectionStart"in g&&$f(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Uo&&Ho(Uo,g)||(Uo=g,g=Ac(qf,"onSelect"),0<g.length&&(c=new Ff("onSelect","select",null,c,h),o.push({event:c,listeners:g}),c.target=Ca)))}function Tc(o,c){var h={};return h[o.toLowerCase()]=c.toLowerCase(),h["Webkit"+o]="webkit"+c,h["Moz"+o]="moz"+c,h}var Ta={animationend:Tc("Animation","AnimationEnd"),animationiteration:Tc("Animation","AnimationIteration"),animationstart:Tc("Animation","AnimationStart"),transitionend:Tc("Transition","TransitionEnd")},Yf={},ny={};l&&(ny=document.createElement("div").style,"AnimationEvent"in window||(delete Ta.animationend.animation,delete Ta.animationiteration.animation,delete Ta.animationstart.animation),"TransitionEvent"in window||delete Ta.transitionend.transition);function Dc(o){if(Yf[o])return Yf[o];if(!Ta[o])return o;var c=Ta[o],h;for(h in c)if(c.hasOwnProperty(h)&&h in ny)return Yf[o]=c[h];return o}var ry=Dc("animationend"),iy=Dc("animationiteration"),sy=Dc("animationstart"),ay=Dc("transitionend"),oy=new Map,ly="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ki(o,c){oy.set(o,c),s(c,[o])}for(var Qf=0;Qf<ly.length;Qf++){var Kf=ly[Qf],JD=Kf.toLowerCase(),ek=Kf[0].toUpperCase()+Kf.slice(1);Ki(JD,"on"+ek)}Ki(ry,"onAnimationEnd"),Ki(iy,"onAnimationIteration"),Ki(sy,"onAnimationStart"),Ki("dblclick","onDoubleClick"),Ki("focusin","onFocus"),Ki("focusout","onBlur"),Ki(ay,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bo));function cy(o,c,h){var g=o.type||"unknown-event";o.currentTarget=h,JT(g,c,void 0,o),o.currentTarget=null}function uy(o,c){c=(c&4)!==0;for(var h=0;h<o.length;h++){var g=o[h],y=g.event;g=g.listeners;e:{var S=void 0;if(c)for(var D=g.length-1;0<=D;D--){var N=g[D],L=N.instance,V=N.currentTarget;if(N=N.listener,L!==S&&y.isPropagationStopped())break e;cy(y,N,V),S=L}else for(D=0;D<g.length;D++){if(N=g[D],L=N.instance,V=N.currentTarget,N=N.listener,L!==S&&y.isPropagationStopped())break e;cy(y,N,V),S=L}}}if(Bn)throw o=di,Bn=!1,di=null,o}function xt(o,c){var h=c[ih];h===void 0&&(h=c[ih]=new Set);var g=o+"__bubble";h.has(g)||(dy(c,o,2,!1),h.add(g))}function Zf(o,c,h){var g=0;c&&(g|=4),dy(h,o,g,c)}var kc="_reactListening"+Math.random().toString(36).slice(2);function Wo(o){if(!o[kc]){o[kc]=!0,r.forEach(function(h){h!=="selectionchange"&&(tk.has(h)||Zf(h,!1,o),Zf(h,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[kc]||(c[kc]=!0,Zf("selectionchange",!1,c))}}function dy(o,c,h,g){switch(Iv(c)){case 1:var y=gD;break;case 4:y=mD;break;default:y=If}h=y.bind(null,c,h,o),y=void 0,!$t||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(y=!0),g?y!==void 0?o.addEventListener(c,h,{capture:!0,passive:y}):o.addEventListener(c,h,!0):y!==void 0?o.addEventListener(c,h,{passive:y}):o.addEventListener(c,h,!1)}function Xf(o,c,h,g,y){var S=g;if((c&1)===0&&(c&2)===0&&g!==null)e:for(;;){if(g===null)return;var D=g.tag;if(D===3||D===4){var N=g.stateNode.containerInfo;if(N===y||N.nodeType===8&&N.parentNode===y)break;if(D===4)for(D=g.return;D!==null;){var L=D.tag;if((L===3||L===4)&&(L=D.stateNode.containerInfo,L===y||L.nodeType===8&&L.parentNode===y))return;D=D.return}for(;N!==null;){if(D=Ms(N),D===null)return;if(L=D.tag,L===5||L===6){g=S=D;continue e}N=N.parentNode}}g=g.return}ct(function(){var V=S,J=qe(h),te=[];e:{var X=oy.get(o);if(X!==void 0){var fe=Ff,ve=o;switch(o){case"keypress":if(wc(h)===0)break e;case"keydown":case"keyup":fe=OD;break;case"focusin":ve="focus",fe=Hf;break;case"focusout":ve="blur",fe=Hf;break;case"beforeblur":case"afterblur":fe=Hf;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=Fv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=bD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=ID;break;case ry:case iy:case sy:fe=wD;break;case ay:fe=LD;break;case"scroll":fe=vD;break;case"wheel":fe=jD;break;case"copy":case"cut":case"paste":fe=ED;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=zv}var _e=(c&4)!==0,Gt=!_e&&o==="scroll",H=_e?X!==null?X+"Capture":null:X;_e=[];for(var j=V,U;j!==null;){U=j;var ae=U.stateNode;if(U.tag===5&&ae!==null&&(U=ae,H!==null&&(ae=Oe(j,H),ae!=null&&_e.push(Vo(j,ae,U)))),Gt)break;j=j.return}0<_e.length&&(X=new fe(X,ve,null,h,J),te.push({event:X,listeners:_e}))}}if((c&7)===0){e:{if(X=o==="mouseover"||o==="pointerover",fe=o==="mouseout"||o==="pointerout",X&&h!==Be&&(ve=h.relatedTarget||h.fromElement)&&(Ms(ve)||ve[fi]))break e;if((fe||X)&&(X=J.window===J?J:(X=J.ownerDocument)?X.defaultView||X.parentWindow:window,fe?(ve=h.relatedTarget||h.toElement,fe=V,ve=ve?Ms(ve):null,ve!==null&&(Gt=Os(ve),ve!==Gt||ve.tag!==5&&ve.tag!==6)&&(ve=null)):(fe=null,ve=V),fe!==ve)){if(_e=Fv,ae="onMouseLeave",H="onMouseEnter",j="mouse",(o==="pointerout"||o==="pointerover")&&(_e=zv,ae="onPointerLeave",H="onPointerEnter",j="pointer"),Gt=fe==null?X:Aa(fe),U=ve==null?X:Aa(ve),X=new _e(ae,j+"leave",fe,h,J),X.target=Gt,X.relatedTarget=U,ae=null,Ms(J)===V&&(_e=new _e(H,j+"enter",ve,h,J),_e.target=U,_e.relatedTarget=Gt,ae=_e),Gt=ae,fe&&ve)t:{for(_e=fe,H=ve,j=0,U=_e;U;U=Da(U))j++;for(U=0,ae=H;ae;ae=Da(ae))U++;for(;0<j-U;)_e=Da(_e),j--;for(;0<U-j;)H=Da(H),U--;for(;j--;){if(_e===H||H!==null&&_e===H.alternate)break t;_e=Da(_e),H=Da(H)}_e=null}else _e=null;fe!==null&&fy(te,X,fe,_e,!1),ve!==null&&Gt!==null&&fy(te,Gt,ve,_e,!0)}}e:{if(X=V?Aa(V):window,fe=X.nodeName&&X.nodeName.toLowerCase(),fe==="select"||fe==="input"&&X.type==="file")var we=$D;else if($v(X))if(Gv)we=QD;else{we=GD;var Te=qD}else(fe=X.nodeName)&&fe.toLowerCase()==="input"&&(X.type==="checkbox"||X.type==="radio")&&(we=YD);if(we&&(we=we(o,V))){qv(te,we,h,J);break e}Te&&Te(o,X,V),o==="focusout"&&(Te=X._wrapperState)&&Te.controlled&&X.type==="number"&&We(X,"number",X.value)}switch(Te=V?Aa(V):window,o){case"focusin":($v(Te)||Te.contentEditable==="true")&&(Ca=Te,qf=V,Uo=null);break;case"focusout":Uo=qf=Ca=null;break;case"mousedown":Gf=!0;break;case"contextmenu":case"mouseup":case"dragend":Gf=!1,ty(te,h,J);break;case"selectionchange":if(XD)break;case"keydown":case"keyup":ty(te,h,J)}var De;if(Bf)e:{switch(o){case"compositionstart":var Ae="onCompositionStart";break e;case"compositionend":Ae="onCompositionEnd";break e;case"compositionupdate":Ae="onCompositionUpdate";break e}Ae=void 0}else Ea?Wv(o,h)&&(Ae="onCompositionEnd"):o==="keydown"&&h.keyCode===229&&(Ae="onCompositionStart");Ae&&(Hv&&h.locale!=="ko"&&(Ea||Ae!=="onCompositionStart"?Ae==="onCompositionEnd"&&Ea&&(De=Pv()):(Qi=J,Lf="value"in Qi?Qi.value:Qi.textContent,Ea=!0)),Te=Ac(V,Ae),0<Te.length&&(Ae=new jv(Ae,o,null,h,J),te.push({event:Ae,listeners:Te}),De?Ae.data=De:(De=Vv(h),De!==null&&(Ae.data=De)))),(De=HD?UD(o,h):BD(o,h))&&(V=Ac(V,"onBeforeInput"),0<V.length&&(J=new jv("onBeforeInput","beforeinput",null,h,J),te.push({event:J,listeners:V}),J.data=De))}uy(te,c)})}function Vo(o,c,h){return{instance:o,listener:c,currentTarget:h}}function Ac(o,c){for(var h=c+"Capture",g=[];o!==null;){var y=o,S=y.stateNode;y.tag===5&&S!==null&&(y=S,S=Oe(o,h),S!=null&&g.unshift(Vo(o,S,y)),S=Oe(o,c),S!=null&&g.push(Vo(o,S,y))),o=o.return}return g}function Da(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function fy(o,c,h,g,y){for(var S=c._reactName,D=[];h!==null&&h!==g;){var N=h,L=N.alternate,V=N.stateNode;if(L!==null&&L===g)break;N.tag===5&&V!==null&&(N=V,y?(L=Oe(h,S),L!=null&&D.unshift(Vo(h,L,N))):y||(L=Oe(h,S),L!=null&&D.push(Vo(h,L,N)))),h=h.return}D.length!==0&&o.push({event:c,listeners:D})}var nk=/\r\n?/g,rk=/\u0000|\uFFFD/g;function hy(o){return(typeof o=="string"?o:""+o).replace(nk,`
`).replace(rk,"")}function Rc(o,c,h){if(c=hy(c),hy(o)!==c&&h)throw Error(n(425))}function Oc(){}var Jf=null,eh=null;function th(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var nh=typeof setTimeout=="function"?setTimeout:void 0,ik=typeof clearTimeout=="function"?clearTimeout:void 0,py=typeof Promise=="function"?Promise:void 0,sk=typeof queueMicrotask=="function"?queueMicrotask:typeof py<"u"?function(o){return py.resolve(null).then(o).catch(ak)}:nh;function ak(o){setTimeout(function(){throw o})}function rh(o,c){var h=c,g=0;do{var y=h.nextSibling;if(o.removeChild(h),y&&y.nodeType===8)if(h=y.data,h==="/$"){if(g===0){o.removeChild(y),Io(c);return}g--}else h!=="$"&&h!=="$?"&&h!=="$!"||g++;h=y}while(h);Io(c)}function Zi(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return o}function gy(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var h=o.data;if(h==="$"||h==="$!"||h==="$?"){if(c===0)return o;c--}else h==="/$"&&c++}o=o.previousSibling}return null}var ka=Math.random().toString(36).slice(2),qr="__reactFiber$"+ka,$o="__reactProps$"+ka,fi="__reactContainer$"+ka,ih="__reactEvents$"+ka,ok="__reactListeners$"+ka,lk="__reactHandles$"+ka;function Ms(o){var c=o[qr];if(c)return c;for(var h=o.parentNode;h;){if(c=h[fi]||h[qr]){if(h=c.alternate,c.child!==null||h!==null&&h.child!==null)for(o=gy(o);o!==null;){if(h=o[qr])return h;o=gy(o)}return c}o=h,h=o.parentNode}return null}function qo(o){return o=o[qr]||o[fi],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function Aa(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(n(33))}function Mc(o){return o[$o]||null}var sh=[],Ra=-1;function Xi(o){return{current:o}}function Et(o){0>Ra||(o.current=sh[Ra],sh[Ra]=null,Ra--)}function St(o,c){Ra++,sh[Ra]=o.current,o.current=c}var Ji={},xn=Xi(Ji),Wn=Xi(!1),Ns=Ji;function Oa(o,c){var h=o.type.contextTypes;if(!h)return Ji;var g=o.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===c)return g.__reactInternalMemoizedMaskedChildContext;var y={},S;for(S in h)y[S]=c[S];return g&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=c,o.__reactInternalMemoizedMaskedChildContext=y),y}function Vn(o){return o=o.childContextTypes,o!=null}function Nc(){Et(Wn),Et(xn)}function my(o,c,h){if(xn.current!==Ji)throw Error(n(168));St(xn,c),St(Wn,h)}function vy(o,c,h){var g=o.stateNode;if(c=c.childContextTypes,typeof g.getChildContext!="function")return h;g=g.getChildContext();for(var y in g)if(!(y in c))throw Error(n(108,Ee(o)||"Unknown",y));return Y({},h,g)}function Ic(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||Ji,Ns=xn.current,St(xn,o),St(Wn,Wn.current),!0}function yy(o,c,h){var g=o.stateNode;if(!g)throw Error(n(169));h?(o=vy(o,c,Ns),g.__reactInternalMemoizedMergedChildContext=o,Et(Wn),Et(xn),St(xn,o)):Et(Wn),St(Wn,h)}var hi=null,Pc=!1,ah=!1;function by(o){hi===null?hi=[o]:hi.push(o)}function ck(o){Pc=!0,by(o)}function es(){if(!ah&&hi!==null){ah=!0;var o=0,c=dt;try{var h=hi;for(dt=1;o<h.length;o++){var g=h[o];do g=g(!0);while(g!==null)}hi=null,Pc=!1}catch(y){throw hi!==null&&(hi=hi.slice(o+1)),Sv(kf,es),y}finally{dt=c,ah=!1}}return null}var Ma=[],Na=0,Lc=null,Fc=0,fr=[],hr=0,Is=null,pi=1,gi="";function Ps(o,c){Ma[Na++]=Fc,Ma[Na++]=Lc,Lc=o,Fc=c}function _y(o,c,h){fr[hr++]=pi,fr[hr++]=gi,fr[hr++]=Is,Is=o;var g=pi;o=gi;var y=32-Rr(g)-1;g&=~(1<<y),h+=1;var S=32-Rr(c)+y;if(30<S){var D=y-y%5;S=(g&(1<<D)-1).toString(32),g>>=D,y-=D,pi=1<<32-Rr(c)+y|h<<y|g,gi=S+o}else pi=1<<S|h<<y|g,gi=o}function oh(o){o.return!==null&&(Ps(o,1),_y(o,1,0))}function lh(o){for(;o===Lc;)Lc=Ma[--Na],Ma[Na]=null,Fc=Ma[--Na],Ma[Na]=null;for(;o===Is;)Is=fr[--hr],fr[hr]=null,gi=fr[--hr],fr[hr]=null,pi=fr[--hr],fr[hr]=null}var sr=null,ar=null,kt=!1,Mr=null;function Sy(o,c){var h=vr(5,null,null,0);h.elementType="DELETED",h.stateNode=c,h.return=o,c=o.deletions,c===null?(o.deletions=[h],o.flags|=16):c.push(h)}function wy(o,c){switch(o.tag){case 5:var h=o.type;return c=c.nodeType!==1||h.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(o.stateNode=c,sr=o,ar=Zi(c.firstChild),!0):!1;case 6:return c=o.pendingProps===""||c.nodeType!==3?null:c,c!==null?(o.stateNode=c,sr=o,ar=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(h=Is!==null?{id:pi,overflow:gi}:null,o.memoizedState={dehydrated:c,treeContext:h,retryLane:1073741824},h=vr(18,null,null,0),h.stateNode=c,h.return=o,o.child=h,sr=o,ar=null,!0):!1;default:return!1}}function ch(o){return(o.mode&1)!==0&&(o.flags&128)===0}function uh(o){if(kt){var c=ar;if(c){var h=c;if(!wy(o,c)){if(ch(o))throw Error(n(418));c=Zi(h.nextSibling);var g=sr;c&&wy(o,c)?Sy(g,h):(o.flags=o.flags&-4097|2,kt=!1,sr=o)}}else{if(ch(o))throw Error(n(418));o.flags=o.flags&-4097|2,kt=!1,sr=o}}}function xy(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;sr=o}function jc(o){if(o!==sr)return!1;if(!kt)return xy(o),kt=!0,!1;var c;if((c=o.tag!==3)&&!(c=o.tag!==5)&&(c=o.type,c=c!=="head"&&c!=="body"&&!th(o.type,o.memoizedProps)),c&&(c=ar)){if(ch(o))throw Ey(),Error(n(418));for(;c;)Sy(o,c),c=Zi(c.nextSibling)}if(xy(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));e:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8){var h=o.data;if(h==="/$"){if(c===0){ar=Zi(o.nextSibling);break e}c--}else h!=="$"&&h!=="$!"&&h!=="$?"||c++}o=o.nextSibling}ar=null}}else ar=sr?Zi(o.stateNode.nextSibling):null;return!0}function Ey(){for(var o=ar;o;)o=Zi(o.nextSibling)}function Ia(){ar=sr=null,kt=!1}function dh(o){Mr===null?Mr=[o]:Mr.push(o)}var uk=R.ReactCurrentBatchConfig;function Go(o,c,h){if(o=h.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(n(309));var g=h.stateNode}if(!g)throw Error(n(147,o));var y=g,S=""+o;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===S?c.ref:(c=function(D){var N=y.refs;D===null?delete N[S]:N[S]=D},c._stringRef=S,c)}if(typeof o!="string")throw Error(n(284));if(!h._owner)throw Error(n(290,o))}return o}function zc(o,c){throw o=Object.prototype.toString.call(c),Error(n(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o))}function Cy(o){var c=o._init;return c(o._payload)}function Ty(o){function c(H,j){if(o){var U=H.deletions;U===null?(H.deletions=[j],H.flags|=16):U.push(j)}}function h(H,j){if(!o)return null;for(;j!==null;)c(H,j),j=j.sibling;return null}function g(H,j){for(H=new Map;j!==null;)j.key!==null?H.set(j.key,j):H.set(j.index,j),j=j.sibling;return H}function y(H,j){return H=ls(H,j),H.index=0,H.sibling=null,H}function S(H,j,U){return H.index=U,o?(U=H.alternate,U!==null?(U=U.index,U<j?(H.flags|=2,j):U):(H.flags|=2,j)):(H.flags|=1048576,j)}function D(H){return o&&H.alternate===null&&(H.flags|=2),H}function N(H,j,U,ae){return j===null||j.tag!==6?(j=np(U,H.mode,ae),j.return=H,j):(j=y(j,U),j.return=H,j)}function L(H,j,U,ae){var we=U.type;return we===P?J(H,j,U.props.children,ae,U.key):j!==null&&(j.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===ie&&Cy(we)===j.type)?(ae=y(j,U.props),ae.ref=Go(H,j,U),ae.return=H,ae):(ae=cu(U.type,U.key,U.props,null,H.mode,ae),ae.ref=Go(H,j,U),ae.return=H,ae)}function V(H,j,U,ae){return j===null||j.tag!==4||j.stateNode.containerInfo!==U.containerInfo||j.stateNode.implementation!==U.implementation?(j=rp(U,H.mode,ae),j.return=H,j):(j=y(j,U.children||[]),j.return=H,j)}function J(H,j,U,ae,we){return j===null||j.tag!==7?(j=Ws(U,H.mode,ae,we),j.return=H,j):(j=y(j,U),j.return=H,j)}function te(H,j,U){if(typeof j=="string"&&j!==""||typeof j=="number")return j=np(""+j,H.mode,U),j.return=H,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case A:return U=cu(j.type,j.key,j.props,null,H.mode,U),U.ref=Go(H,null,j),U.return=H,U;case M:return j=rp(j,H.mode,U),j.return=H,j;case ie:var ae=j._init;return te(H,ae(j._payload),U)}if(xe(j)||q(j))return j=Ws(j,H.mode,U,null),j.return=H,j;zc(H,j)}return null}function X(H,j,U,ae){var we=j!==null?j.key:null;if(typeof U=="string"&&U!==""||typeof U=="number")return we!==null?null:N(H,j,""+U,ae);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case A:return U.key===we?L(H,j,U,ae):null;case M:return U.key===we?V(H,j,U,ae):null;case ie:return we=U._init,X(H,j,we(U._payload),ae)}if(xe(U)||q(U))return we!==null?null:J(H,j,U,ae,null);zc(H,U)}return null}function fe(H,j,U,ae,we){if(typeof ae=="string"&&ae!==""||typeof ae=="number")return H=H.get(U)||null,N(j,H,""+ae,we);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case A:return H=H.get(ae.key===null?U:ae.key)||null,L(j,H,ae,we);case M:return H=H.get(ae.key===null?U:ae.key)||null,V(j,H,ae,we);case ie:var Te=ae._init;return fe(H,j,U,Te(ae._payload),we)}if(xe(ae)||q(ae))return H=H.get(U)||null,J(j,H,ae,we,null);zc(j,ae)}return null}function ve(H,j,U,ae){for(var we=null,Te=null,De=j,Ae=j=0,pn=null;De!==null&&Ae<U.length;Ae++){De.index>Ae?(pn=De,De=null):pn=De.sibling;var at=X(H,De,U[Ae],ae);if(at===null){De===null&&(De=pn);break}o&&De&&at.alternate===null&&c(H,De),j=S(at,j,Ae),Te===null?we=at:Te.sibling=at,Te=at,De=pn}if(Ae===U.length)return h(H,De),kt&&Ps(H,Ae),we;if(De===null){for(;Ae<U.length;Ae++)De=te(H,U[Ae],ae),De!==null&&(j=S(De,j,Ae),Te===null?we=De:Te.sibling=De,Te=De);return kt&&Ps(H,Ae),we}for(De=g(H,De);Ae<U.length;Ae++)pn=fe(De,H,Ae,U[Ae],ae),pn!==null&&(o&&pn.alternate!==null&&De.delete(pn.key===null?Ae:pn.key),j=S(pn,j,Ae),Te===null?we=pn:Te.sibling=pn,Te=pn);return o&&De.forEach(function(cs){return c(H,cs)}),kt&&Ps(H,Ae),we}function _e(H,j,U,ae){var we=q(U);if(typeof we!="function")throw Error(n(150));if(U=we.call(U),U==null)throw Error(n(151));for(var Te=we=null,De=j,Ae=j=0,pn=null,at=U.next();De!==null&&!at.done;Ae++,at=U.next()){De.index>Ae?(pn=De,De=null):pn=De.sibling;var cs=X(H,De,at.value,ae);if(cs===null){De===null&&(De=pn);break}o&&De&&cs.alternate===null&&c(H,De),j=S(cs,j,Ae),Te===null?we=cs:Te.sibling=cs,Te=cs,De=pn}if(at.done)return h(H,De),kt&&Ps(H,Ae),we;if(De===null){for(;!at.done;Ae++,at=U.next())at=te(H,at.value,ae),at!==null&&(j=S(at,j,Ae),Te===null?we=at:Te.sibling=at,Te=at);return kt&&Ps(H,Ae),we}for(De=g(H,De);!at.done;Ae++,at=U.next())at=fe(De,H,Ae,at.value,ae),at!==null&&(o&&at.alternate!==null&&De.delete(at.key===null?Ae:at.key),j=S(at,j,Ae),Te===null?we=at:Te.sibling=at,Te=at);return o&&De.forEach(function(Wk){return c(H,Wk)}),kt&&Ps(H,Ae),we}function Gt(H,j,U,ae){if(typeof U=="object"&&U!==null&&U.type===P&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case A:e:{for(var we=U.key,Te=j;Te!==null;){if(Te.key===we){if(we=U.type,we===P){if(Te.tag===7){h(H,Te.sibling),j=y(Te,U.props.children),j.return=H,H=j;break e}}else if(Te.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===ie&&Cy(we)===Te.type){h(H,Te.sibling),j=y(Te,U.props),j.ref=Go(H,Te,U),j.return=H,H=j;break e}h(H,Te);break}else c(H,Te);Te=Te.sibling}U.type===P?(j=Ws(U.props.children,H.mode,ae,U.key),j.return=H,H=j):(ae=cu(U.type,U.key,U.props,null,H.mode,ae),ae.ref=Go(H,j,U),ae.return=H,H=ae)}return D(H);case M:e:{for(Te=U.key;j!==null;){if(j.key===Te)if(j.tag===4&&j.stateNode.containerInfo===U.containerInfo&&j.stateNode.implementation===U.implementation){h(H,j.sibling),j=y(j,U.children||[]),j.return=H,H=j;break e}else{h(H,j);break}else c(H,j);j=j.sibling}j=rp(U,H.mode,ae),j.return=H,H=j}return D(H);case ie:return Te=U._init,Gt(H,j,Te(U._payload),ae)}if(xe(U))return ve(H,j,U,ae);if(q(U))return _e(H,j,U,ae);zc(H,U)}return typeof U=="string"&&U!==""||typeof U=="number"?(U=""+U,j!==null&&j.tag===6?(h(H,j.sibling),j=y(j,U),j.return=H,H=j):(h(H,j),j=np(U,H.mode,ae),j.return=H,H=j),D(H)):h(H,j)}return Gt}var Pa=Ty(!0),Dy=Ty(!1),Hc=Xi(null),Uc=null,La=null,fh=null;function hh(){fh=La=Uc=null}function ph(o){var c=Hc.current;Et(Hc),o._currentValue=c}function gh(o,c,h){for(;o!==null;){var g=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,g!==null&&(g.childLanes|=c)):g!==null&&(g.childLanes&c)!==c&&(g.childLanes|=c),o===h)break;o=o.return}}function Fa(o,c){Uc=o,fh=La=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&c)!==0&&($n=!0),o.firstContext=null)}function pr(o){var c=o._currentValue;if(fh!==o)if(o={context:o,memoizedValue:c,next:null},La===null){if(Uc===null)throw Error(n(308));La=o,Uc.dependencies={lanes:0,firstContext:o}}else La=La.next=o;return c}var Ls=null;function mh(o){Ls===null?Ls=[o]:Ls.push(o)}function ky(o,c,h,g){var y=c.interleaved;return y===null?(h.next=h,mh(c)):(h.next=y.next,y.next=h),c.interleaved=h,mi(o,g)}function mi(o,c){o.lanes|=c;var h=o.alternate;for(h!==null&&(h.lanes|=c),h=o,o=o.return;o!==null;)o.childLanes|=c,h=o.alternate,h!==null&&(h.childLanes|=c),h=o,o=o.return;return h.tag===3?h.stateNode:null}var ts=!1;function vh(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ay(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function vi(o,c){return{eventTime:o,lane:c,tag:0,payload:null,callback:null,next:null}}function ns(o,c,h){var g=o.updateQueue;if(g===null)return null;if(g=g.shared,(st&2)!==0){var y=g.pending;return y===null?c.next=c:(c.next=y.next,y.next=c),g.pending=c,mi(o,h)}return y=g.interleaved,y===null?(c.next=c,mh(g)):(c.next=y.next,y.next=c),g.interleaved=c,mi(o,h)}function Bc(o,c,h){if(c=c.updateQueue,c!==null&&(c=c.shared,(h&4194240)!==0)){var g=c.lanes;g&=o.pendingLanes,h|=g,c.lanes=h,Of(o,h)}}function Ry(o,c){var h=o.updateQueue,g=o.alternate;if(g!==null&&(g=g.updateQueue,h===g)){var y=null,S=null;if(h=h.firstBaseUpdate,h!==null){do{var D={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};S===null?y=S=D:S=S.next=D,h=h.next}while(h!==null);S===null?y=S=c:S=S.next=c}else y=S=c;h={baseState:g.baseState,firstBaseUpdate:y,lastBaseUpdate:S,shared:g.shared,effects:g.effects},o.updateQueue=h;return}o=h.lastBaseUpdate,o===null?h.firstBaseUpdate=c:o.next=c,h.lastBaseUpdate=c}function Wc(o,c,h,g){var y=o.updateQueue;ts=!1;var S=y.firstBaseUpdate,D=y.lastBaseUpdate,N=y.shared.pending;if(N!==null){y.shared.pending=null;var L=N,V=L.next;L.next=null,D===null?S=V:D.next=V,D=L;var J=o.alternate;J!==null&&(J=J.updateQueue,N=J.lastBaseUpdate,N!==D&&(N===null?J.firstBaseUpdate=V:N.next=V,J.lastBaseUpdate=L))}if(S!==null){var te=y.baseState;D=0,J=V=L=null,N=S;do{var X=N.lane,fe=N.eventTime;if((g&X)===X){J!==null&&(J=J.next={eventTime:fe,lane:0,tag:N.tag,payload:N.payload,callback:N.callback,next:null});e:{var ve=o,_e=N;switch(X=c,fe=h,_e.tag){case 1:if(ve=_e.payload,typeof ve=="function"){te=ve.call(fe,te,X);break e}te=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=_e.payload,X=typeof ve=="function"?ve.call(fe,te,X):ve,X==null)break e;te=Y({},te,X);break e;case 2:ts=!0}}N.callback!==null&&N.lane!==0&&(o.flags|=64,X=y.effects,X===null?y.effects=[N]:X.push(N))}else fe={eventTime:fe,lane:X,tag:N.tag,payload:N.payload,callback:N.callback,next:null},J===null?(V=J=fe,L=te):J=J.next=fe,D|=X;if(N=N.next,N===null){if(N=y.shared.pending,N===null)break;X=N,N=X.next,X.next=null,y.lastBaseUpdate=X,y.shared.pending=null}}while(!0);if(J===null&&(L=te),y.baseState=L,y.firstBaseUpdate=V,y.lastBaseUpdate=J,c=y.shared.interleaved,c!==null){y=c;do D|=y.lane,y=y.next;while(y!==c)}else S===null&&(y.shared.lanes=0);zs|=D,o.lanes=D,o.memoizedState=te}}function Oy(o,c,h){if(o=c.effects,c.effects=null,o!==null)for(c=0;c<o.length;c++){var g=o[c],y=g.callback;if(y!==null){if(g.callback=null,g=h,typeof y!="function")throw Error(n(191,y));y.call(g)}}}var Yo={},Gr=Xi(Yo),Qo=Xi(Yo),Ko=Xi(Yo);function Fs(o){if(o===Yo)throw Error(n(174));return o}function yh(o,c){switch(St(Ko,c),St(Qo,o),St(Gr,Yo),o=c.nodeType,o){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:be(null,"");break;default:o=o===8?c.parentNode:c,c=o.namespaceURI||null,o=o.tagName,c=be(c,o)}Et(Gr),St(Gr,c)}function ja(){Et(Gr),Et(Qo),Et(Ko)}function My(o){Fs(Ko.current);var c=Fs(Gr.current),h=be(c,o.type);c!==h&&(St(Qo,o),St(Gr,h))}function bh(o){Qo.current===o&&(Et(Gr),Et(Qo))}var Mt=Xi(0);function Vc(o){for(var c=o;c!==null;){if(c.tag===13){var h=c.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var _h=[];function Sh(){for(var o=0;o<_h.length;o++)_h[o]._workInProgressVersionPrimary=null;_h.length=0}var $c=R.ReactCurrentDispatcher,wh=R.ReactCurrentBatchConfig,js=0,Nt=null,tn=null,fn=null,qc=!1,Zo=!1,Xo=0,dk=0;function En(){throw Error(n(321))}function xh(o,c){if(c===null)return!1;for(var h=0;h<c.length&&h<o.length;h++)if(!Or(o[h],c[h]))return!1;return!0}function Eh(o,c,h,g,y,S){if(js=S,Nt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,$c.current=o===null||o.memoizedState===null?gk:mk,o=h(g,y),Zo){S=0;do{if(Zo=!1,Xo=0,25<=S)throw Error(n(301));S+=1,fn=tn=null,c.updateQueue=null,$c.current=vk,o=h(g,y)}while(Zo)}if($c.current=Qc,c=tn!==null&&tn.next!==null,js=0,fn=tn=Nt=null,qc=!1,c)throw Error(n(300));return o}function Ch(){var o=Xo!==0;return Xo=0,o}function Yr(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fn===null?Nt.memoizedState=fn=o:fn=fn.next=o,fn}function gr(){if(tn===null){var o=Nt.alternate;o=o!==null?o.memoizedState:null}else o=tn.next;var c=fn===null?Nt.memoizedState:fn.next;if(c!==null)fn=c,tn=o;else{if(o===null)throw Error(n(310));tn=o,o={memoizedState:tn.memoizedState,baseState:tn.baseState,baseQueue:tn.baseQueue,queue:tn.queue,next:null},fn===null?Nt.memoizedState=fn=o:fn=fn.next=o}return fn}function Jo(o,c){return typeof c=="function"?c(o):c}function Th(o){var c=gr(),h=c.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=o;var g=tn,y=g.baseQueue,S=h.pending;if(S!==null){if(y!==null){var D=y.next;y.next=S.next,S.next=D}g.baseQueue=y=S,h.pending=null}if(y!==null){S=y.next,g=g.baseState;var N=D=null,L=null,V=S;do{var J=V.lane;if((js&J)===J)L!==null&&(L=L.next={lane:0,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null}),g=V.hasEagerState?V.eagerState:o(g,V.action);else{var te={lane:J,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null};L===null?(N=L=te,D=g):L=L.next=te,Nt.lanes|=J,zs|=J}V=V.next}while(V!==null&&V!==S);L===null?D=g:L.next=N,Or(g,c.memoizedState)||($n=!0),c.memoizedState=g,c.baseState=D,c.baseQueue=L,h.lastRenderedState=g}if(o=h.interleaved,o!==null){y=o;do S=y.lane,Nt.lanes|=S,zs|=S,y=y.next;while(y!==o)}else y===null&&(h.lanes=0);return[c.memoizedState,h.dispatch]}function Dh(o){var c=gr(),h=c.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=o;var g=h.dispatch,y=h.pending,S=c.memoizedState;if(y!==null){h.pending=null;var D=y=y.next;do S=o(S,D.action),D=D.next;while(D!==y);Or(S,c.memoizedState)||($n=!0),c.memoizedState=S,c.baseQueue===null&&(c.baseState=S),h.lastRenderedState=S}return[S,g]}function Ny(){}function Iy(o,c){var h=Nt,g=gr(),y=c(),S=!Or(g.memoizedState,y);if(S&&(g.memoizedState=y,$n=!0),g=g.queue,kh(Fy.bind(null,h,g,o),[o]),g.getSnapshot!==c||S||fn!==null&&fn.memoizedState.tag&1){if(h.flags|=2048,el(9,Ly.bind(null,h,g,y,c),void 0,null),hn===null)throw Error(n(349));(js&30)!==0||Py(h,c,y)}return y}function Py(o,c,h){o.flags|=16384,o={getSnapshot:c,value:h},c=Nt.updateQueue,c===null?(c={lastEffect:null,stores:null},Nt.updateQueue=c,c.stores=[o]):(h=c.stores,h===null?c.stores=[o]:h.push(o))}function Ly(o,c,h,g){c.value=h,c.getSnapshot=g,jy(c)&&zy(o)}function Fy(o,c,h){return h(function(){jy(c)&&zy(o)})}function jy(o){var c=o.getSnapshot;o=o.value;try{var h=c();return!Or(o,h)}catch{return!0}}function zy(o){var c=mi(o,1);c!==null&&Lr(c,o,1,-1)}function Hy(o){var c=Yr();return typeof o=="function"&&(o=o()),c.memoizedState=c.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Jo,lastRenderedState:o},c.queue=o,o=o.dispatch=pk.bind(null,Nt,o),[c.memoizedState,o]}function el(o,c,h,g){return o={tag:o,create:c,destroy:h,deps:g,next:null},c=Nt.updateQueue,c===null?(c={lastEffect:null,stores:null},Nt.updateQueue=c,c.lastEffect=o.next=o):(h=c.lastEffect,h===null?c.lastEffect=o.next=o:(g=h.next,h.next=o,o.next=g,c.lastEffect=o)),o}function Uy(){return gr().memoizedState}function Gc(o,c,h,g){var y=Yr();Nt.flags|=o,y.memoizedState=el(1|c,h,void 0,g===void 0?null:g)}function Yc(o,c,h,g){var y=gr();g=g===void 0?null:g;var S=void 0;if(tn!==null){var D=tn.memoizedState;if(S=D.destroy,g!==null&&xh(g,D.deps)){y.memoizedState=el(c,h,S,g);return}}Nt.flags|=o,y.memoizedState=el(1|c,h,S,g)}function By(o,c){return Gc(8390656,8,o,c)}function kh(o,c){return Yc(2048,8,o,c)}function Wy(o,c){return Yc(4,2,o,c)}function Vy(o,c){return Yc(4,4,o,c)}function $y(o,c){if(typeof c=="function")return o=o(),c(o),function(){c(null)};if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function qy(o,c,h){return h=h!=null?h.concat([o]):null,Yc(4,4,$y.bind(null,c,o),h)}function Ah(){}function Gy(o,c){var h=gr();c=c===void 0?null:c;var g=h.memoizedState;return g!==null&&c!==null&&xh(c,g[1])?g[0]:(h.memoizedState=[o,c],o)}function Yy(o,c){var h=gr();c=c===void 0?null:c;var g=h.memoizedState;return g!==null&&c!==null&&xh(c,g[1])?g[0]:(o=o(),h.memoizedState=[o,c],o)}function Qy(o,c,h){return(js&21)===0?(o.baseState&&(o.baseState=!1,$n=!0),o.memoizedState=h):(Or(h,c)||(h=Cv(),Nt.lanes|=h,zs|=h,o.baseState=!0),c)}function fk(o,c){var h=dt;dt=h!==0&&4>h?h:4,o(!0);var g=wh.transition;wh.transition={};try{o(!1),c()}finally{dt=h,wh.transition=g}}function Ky(){return gr().memoizedState}function hk(o,c,h){var g=as(o);if(h={lane:g,action:h,hasEagerState:!1,eagerState:null,next:null},Zy(o))Xy(c,h);else if(h=ky(o,c,h,g),h!==null){var y=Nn();Lr(h,o,g,y),Jy(h,c,g)}}function pk(o,c,h){var g=as(o),y={lane:g,action:h,hasEagerState:!1,eagerState:null,next:null};if(Zy(o))Xy(c,y);else{var S=o.alternate;if(o.lanes===0&&(S===null||S.lanes===0)&&(S=c.lastRenderedReducer,S!==null))try{var D=c.lastRenderedState,N=S(D,h);if(y.hasEagerState=!0,y.eagerState=N,Or(N,D)){var L=c.interleaved;L===null?(y.next=y,mh(c)):(y.next=L.next,L.next=y),c.interleaved=y;return}}catch{}finally{}h=ky(o,c,y,g),h!==null&&(y=Nn(),Lr(h,o,g,y),Jy(h,c,g))}}function Zy(o){var c=o.alternate;return o===Nt||c!==null&&c===Nt}function Xy(o,c){Zo=qc=!0;var h=o.pending;h===null?c.next=c:(c.next=h.next,h.next=c),o.pending=c}function Jy(o,c,h){if((h&4194240)!==0){var g=c.lanes;g&=o.pendingLanes,h|=g,c.lanes=h,Of(o,h)}}var Qc={readContext:pr,useCallback:En,useContext:En,useEffect:En,useImperativeHandle:En,useInsertionEffect:En,useLayoutEffect:En,useMemo:En,useReducer:En,useRef:En,useState:En,useDebugValue:En,useDeferredValue:En,useTransition:En,useMutableSource:En,useSyncExternalStore:En,useId:En,unstable_isNewReconciler:!1},gk={readContext:pr,useCallback:function(o,c){return Yr().memoizedState=[o,c===void 0?null:c],o},useContext:pr,useEffect:By,useImperativeHandle:function(o,c,h){return h=h!=null?h.concat([o]):null,Gc(4194308,4,$y.bind(null,c,o),h)},useLayoutEffect:function(o,c){return Gc(4194308,4,o,c)},useInsertionEffect:function(o,c){return Gc(4,2,o,c)},useMemo:function(o,c){var h=Yr();return c=c===void 0?null:c,o=o(),h.memoizedState=[o,c],o},useReducer:function(o,c,h){var g=Yr();return c=h!==void 0?h(c):c,g.memoizedState=g.baseState=c,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:c},g.queue=o,o=o.dispatch=hk.bind(null,Nt,o),[g.memoizedState,o]},useRef:function(o){var c=Yr();return o={current:o},c.memoizedState=o},useState:Hy,useDebugValue:Ah,useDeferredValue:function(o){return Yr().memoizedState=o},useTransition:function(){var o=Hy(!1),c=o[0];return o=fk.bind(null,o[1]),Yr().memoizedState=o,[c,o]},useMutableSource:function(){},useSyncExternalStore:function(o,c,h){var g=Nt,y=Yr();if(kt){if(h===void 0)throw Error(n(407));h=h()}else{if(h=c(),hn===null)throw Error(n(349));(js&30)!==0||Py(g,c,h)}y.memoizedState=h;var S={value:h,getSnapshot:c};return y.queue=S,By(Fy.bind(null,g,S,o),[o]),g.flags|=2048,el(9,Ly.bind(null,g,S,h,c),void 0,null),h},useId:function(){var o=Yr(),c=hn.identifierPrefix;if(kt){var h=gi,g=pi;h=(g&~(1<<32-Rr(g)-1)).toString(32)+h,c=":"+c+"R"+h,h=Xo++,0<h&&(c+="H"+h.toString(32)),c+=":"}else h=dk++,c=":"+c+"r"+h.toString(32)+":";return o.memoizedState=c},unstable_isNewReconciler:!1},mk={readContext:pr,useCallback:Gy,useContext:pr,useEffect:kh,useImperativeHandle:qy,useInsertionEffect:Wy,useLayoutEffect:Vy,useMemo:Yy,useReducer:Th,useRef:Uy,useState:function(){return Th(Jo)},useDebugValue:Ah,useDeferredValue:function(o){var c=gr();return Qy(c,tn.memoizedState,o)},useTransition:function(){var o=Th(Jo)[0],c=gr().memoizedState;return[o,c]},useMutableSource:Ny,useSyncExternalStore:Iy,useId:Ky,unstable_isNewReconciler:!1},vk={readContext:pr,useCallback:Gy,useContext:pr,useEffect:kh,useImperativeHandle:qy,useInsertionEffect:Wy,useLayoutEffect:Vy,useMemo:Yy,useReducer:Dh,useRef:Uy,useState:function(){return Dh(Jo)},useDebugValue:Ah,useDeferredValue:function(o){var c=gr();return tn===null?c.memoizedState=o:Qy(c,tn.memoizedState,o)},useTransition:function(){var o=Dh(Jo)[0],c=gr().memoizedState;return[o,c]},useMutableSource:Ny,useSyncExternalStore:Iy,useId:Ky,unstable_isNewReconciler:!1};function Nr(o,c){if(o&&o.defaultProps){c=Y({},c),o=o.defaultProps;for(var h in o)c[h]===void 0&&(c[h]=o[h]);return c}return c}function Rh(o,c,h,g){c=o.memoizedState,h=h(g,c),h=h==null?c:Y({},c,h),o.memoizedState=h,o.lanes===0&&(o.updateQueue.baseState=h)}var Kc={isMounted:function(o){return(o=o._reactInternals)?Os(o)===o:!1},enqueueSetState:function(o,c,h){o=o._reactInternals;var g=Nn(),y=as(o),S=vi(g,y);S.payload=c,h!=null&&(S.callback=h),c=ns(o,S,y),c!==null&&(Lr(c,o,y,g),Bc(c,o,y))},enqueueReplaceState:function(o,c,h){o=o._reactInternals;var g=Nn(),y=as(o),S=vi(g,y);S.tag=1,S.payload=c,h!=null&&(S.callback=h),c=ns(o,S,y),c!==null&&(Lr(c,o,y,g),Bc(c,o,y))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var h=Nn(),g=as(o),y=vi(h,g);y.tag=2,c!=null&&(y.callback=c),c=ns(o,y,g),c!==null&&(Lr(c,o,g,h),Bc(c,o,g))}};function eb(o,c,h,g,y,S,D){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(g,S,D):c.prototype&&c.prototype.isPureReactComponent?!Ho(h,g)||!Ho(y,S):!0}function tb(o,c,h){var g=!1,y=Ji,S=c.contextType;return typeof S=="object"&&S!==null?S=pr(S):(y=Vn(c)?Ns:xn.current,g=c.contextTypes,S=(g=g!=null)?Oa(o,y):Ji),c=new c(h,S),o.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=Kc,o.stateNode=c,c._reactInternals=o,g&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=y,o.__reactInternalMemoizedMaskedChildContext=S),c}function nb(o,c,h,g){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(h,g),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(h,g),c.state!==o&&Kc.enqueueReplaceState(c,c.state,null)}function Oh(o,c,h,g){var y=o.stateNode;y.props=h,y.state=o.memoizedState,y.refs={},vh(o);var S=c.contextType;typeof S=="object"&&S!==null?y.context=pr(S):(S=Vn(c)?Ns:xn.current,y.context=Oa(o,S)),y.state=o.memoizedState,S=c.getDerivedStateFromProps,typeof S=="function"&&(Rh(o,c,S,h),y.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(c=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),c!==y.state&&Kc.enqueueReplaceState(y,y.state,null),Wc(o,h,y,g),y.state=o.memoizedState),typeof y.componentDidMount=="function"&&(o.flags|=4194308)}function za(o,c){try{var h="",g=c;do h+=ue(g),g=g.return;while(g);var y=h}catch(S){y=`
Error generating stack: `+S.message+`
`+S.stack}return{value:o,source:c,stack:y,digest:null}}function Mh(o,c,h){return{value:o,source:null,stack:h??null,digest:c??null}}function Nh(o,c){try{console.error(c.value)}catch(h){setTimeout(function(){throw h})}}var yk=typeof WeakMap=="function"?WeakMap:Map;function rb(o,c,h){h=vi(-1,h),h.tag=3,h.payload={element:null};var g=c.value;return h.callback=function(){ru||(ru=!0,Yh=g),Nh(o,c)},h}function ib(o,c,h){h=vi(-1,h),h.tag=3;var g=o.type.getDerivedStateFromError;if(typeof g=="function"){var y=c.value;h.payload=function(){return g(y)},h.callback=function(){Nh(o,c)}}var S=o.stateNode;return S!==null&&typeof S.componentDidCatch=="function"&&(h.callback=function(){Nh(o,c),typeof g!="function"&&(is===null?is=new Set([this]):is.add(this));var D=c.stack;this.componentDidCatch(c.value,{componentStack:D!==null?D:""})}),h}function sb(o,c,h){var g=o.pingCache;if(g===null){g=o.pingCache=new yk;var y=new Set;g.set(c,y)}else y=g.get(c),y===void 0&&(y=new Set,g.set(c,y));y.has(h)||(y.add(h),o=Mk.bind(null,o,c,h),c.then(o,o))}function ab(o){do{var c;if((c=o.tag===13)&&(c=o.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return o;o=o.return}while(o!==null);return null}function ob(o,c,h,g,y){return(o.mode&1)===0?(o===c?o.flags|=65536:(o.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(c=vi(-1,1),c.tag=2,ns(h,c,1))),h.lanes|=1),o):(o.flags|=65536,o.lanes=y,o)}var bk=R.ReactCurrentOwner,$n=!1;function Mn(o,c,h,g){c.child=o===null?Dy(c,null,h,g):Pa(c,o.child,h,g)}function lb(o,c,h,g,y){h=h.render;var S=c.ref;return Fa(c,y),g=Eh(o,c,h,g,S,y),h=Ch(),o!==null&&!$n?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~y,yi(o,c,y)):(kt&&h&&oh(c),c.flags|=1,Mn(o,c,g,y),c.child)}function cb(o,c,h,g,y){if(o===null){var S=h.type;return typeof S=="function"&&!tp(S)&&S.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(c.tag=15,c.type=S,ub(o,c,S,g,y)):(o=cu(h.type,null,g,c,c.mode,y),o.ref=c.ref,o.return=c,c.child=o)}if(S=o.child,(o.lanes&y)===0){var D=S.memoizedProps;if(h=h.compare,h=h!==null?h:Ho,h(D,g)&&o.ref===c.ref)return yi(o,c,y)}return c.flags|=1,o=ls(S,g),o.ref=c.ref,o.return=c,c.child=o}function ub(o,c,h,g,y){if(o!==null){var S=o.memoizedProps;if(Ho(S,g)&&o.ref===c.ref)if($n=!1,c.pendingProps=g=S,(o.lanes&y)!==0)(o.flags&131072)!==0&&($n=!0);else return c.lanes=o.lanes,yi(o,c,y)}return Ih(o,c,h,g,y)}function db(o,c,h){var g=c.pendingProps,y=g.children,S=o!==null?o.memoizedState:null;if(g.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},St(Ua,or),or|=h;else{if((h&1073741824)===0)return o=S!==null?S.baseLanes|h:h,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:o,cachePool:null,transitions:null},c.updateQueue=null,St(Ua,or),or|=o,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=S!==null?S.baseLanes:h,St(Ua,or),or|=g}else S!==null?(g=S.baseLanes|h,c.memoizedState=null):g=h,St(Ua,or),or|=g;return Mn(o,c,y,h),c.child}function fb(o,c){var h=c.ref;(o===null&&h!==null||o!==null&&o.ref!==h)&&(c.flags|=512,c.flags|=2097152)}function Ih(o,c,h,g,y){var S=Vn(h)?Ns:xn.current;return S=Oa(c,S),Fa(c,y),h=Eh(o,c,h,g,S,y),g=Ch(),o!==null&&!$n?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~y,yi(o,c,y)):(kt&&g&&oh(c),c.flags|=1,Mn(o,c,h,y),c.child)}function hb(o,c,h,g,y){if(Vn(h)){var S=!0;Ic(c)}else S=!1;if(Fa(c,y),c.stateNode===null)Xc(o,c),tb(c,h,g),Oh(c,h,g,y),g=!0;else if(o===null){var D=c.stateNode,N=c.memoizedProps;D.props=N;var L=D.context,V=h.contextType;typeof V=="object"&&V!==null?V=pr(V):(V=Vn(h)?Ns:xn.current,V=Oa(c,V));var J=h.getDerivedStateFromProps,te=typeof J=="function"||typeof D.getSnapshotBeforeUpdate=="function";te||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(N!==g||L!==V)&&nb(c,D,g,V),ts=!1;var X=c.memoizedState;D.state=X,Wc(c,g,D,y),L=c.memoizedState,N!==g||X!==L||Wn.current||ts?(typeof J=="function"&&(Rh(c,h,J,g),L=c.memoizedState),(N=ts||eb(c,h,N,g,X,L,V))?(te||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount()),typeof D.componentDidMount=="function"&&(c.flags|=4194308)):(typeof D.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=g,c.memoizedState=L),D.props=g,D.state=L,D.context=V,g=N):(typeof D.componentDidMount=="function"&&(c.flags|=4194308),g=!1)}else{D=c.stateNode,Ay(o,c),N=c.memoizedProps,V=c.type===c.elementType?N:Nr(c.type,N),D.props=V,te=c.pendingProps,X=D.context,L=h.contextType,typeof L=="object"&&L!==null?L=pr(L):(L=Vn(h)?Ns:xn.current,L=Oa(c,L));var fe=h.getDerivedStateFromProps;(J=typeof fe=="function"||typeof D.getSnapshotBeforeUpdate=="function")||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(N!==te||X!==L)&&nb(c,D,g,L),ts=!1,X=c.memoizedState,D.state=X,Wc(c,g,D,y);var ve=c.memoizedState;N!==te||X!==ve||Wn.current||ts?(typeof fe=="function"&&(Rh(c,h,fe,g),ve=c.memoizedState),(V=ts||eb(c,h,V,g,X,ve,L)||!1)?(J||typeof D.UNSAFE_componentWillUpdate!="function"&&typeof D.componentWillUpdate!="function"||(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(g,ve,L),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(g,ve,L)),typeof D.componentDidUpdate=="function"&&(c.flags|=4),typeof D.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof D.componentDidUpdate!="function"||N===o.memoizedProps&&X===o.memoizedState||(c.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||N===o.memoizedProps&&X===o.memoizedState||(c.flags|=1024),c.memoizedProps=g,c.memoizedState=ve),D.props=g,D.state=ve,D.context=L,g=V):(typeof D.componentDidUpdate!="function"||N===o.memoizedProps&&X===o.memoizedState||(c.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||N===o.memoizedProps&&X===o.memoizedState||(c.flags|=1024),g=!1)}return Ph(o,c,h,g,S,y)}function Ph(o,c,h,g,y,S){fb(o,c);var D=(c.flags&128)!==0;if(!g&&!D)return y&&yy(c,h,!1),yi(o,c,S);g=c.stateNode,bk.current=c;var N=D&&typeof h.getDerivedStateFromError!="function"?null:g.render();return c.flags|=1,o!==null&&D?(c.child=Pa(c,o.child,null,S),c.child=Pa(c,null,N,S)):Mn(o,c,N,S),c.memoizedState=g.state,y&&yy(c,h,!0),c.child}function pb(o){var c=o.stateNode;c.pendingContext?my(o,c.pendingContext,c.pendingContext!==c.context):c.context&&my(o,c.context,!1),yh(o,c.containerInfo)}function gb(o,c,h,g,y){return Ia(),dh(y),c.flags|=256,Mn(o,c,h,g),c.child}var Lh={dehydrated:null,treeContext:null,retryLane:0};function Fh(o){return{baseLanes:o,cachePool:null,transitions:null}}function mb(o,c,h){var g=c.pendingProps,y=Mt.current,S=!1,D=(c.flags&128)!==0,N;if((N=D)||(N=o!==null&&o.memoizedState===null?!1:(y&2)!==0),N?(S=!0,c.flags&=-129):(o===null||o.memoizedState!==null)&&(y|=1),St(Mt,y&1),o===null)return uh(c),o=c.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((c.mode&1)===0?c.lanes=1:o.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(D=g.children,o=g.fallback,S?(g=c.mode,S=c.child,D={mode:"hidden",children:D},(g&1)===0&&S!==null?(S.childLanes=0,S.pendingProps=D):S=uu(D,g,0,null),o=Ws(o,g,h,null),S.return=c,o.return=c,S.sibling=o,c.child=S,c.child.memoizedState=Fh(h),c.memoizedState=Lh,o):jh(c,D));if(y=o.memoizedState,y!==null&&(N=y.dehydrated,N!==null))return _k(o,c,D,g,N,y,h);if(S){S=g.fallback,D=c.mode,y=o.child,N=y.sibling;var L={mode:"hidden",children:g.children};return(D&1)===0&&c.child!==y?(g=c.child,g.childLanes=0,g.pendingProps=L,c.deletions=null):(g=ls(y,L),g.subtreeFlags=y.subtreeFlags&14680064),N!==null?S=ls(N,S):(S=Ws(S,D,h,null),S.flags|=2),S.return=c,g.return=c,g.sibling=S,c.child=g,g=S,S=c.child,D=o.child.memoizedState,D=D===null?Fh(h):{baseLanes:D.baseLanes|h,cachePool:null,transitions:D.transitions},S.memoizedState=D,S.childLanes=o.childLanes&~h,c.memoizedState=Lh,g}return S=o.child,o=S.sibling,g=ls(S,{mode:"visible",children:g.children}),(c.mode&1)===0&&(g.lanes=h),g.return=c,g.sibling=null,o!==null&&(h=c.deletions,h===null?(c.deletions=[o],c.flags|=16):h.push(o)),c.child=g,c.memoizedState=null,g}function jh(o,c){return c=uu({mode:"visible",children:c},o.mode,0,null),c.return=o,o.child=c}function Zc(o,c,h,g){return g!==null&&dh(g),Pa(c,o.child,null,h),o=jh(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function _k(o,c,h,g,y,S,D){if(h)return c.flags&256?(c.flags&=-257,g=Mh(Error(n(422))),Zc(o,c,D,g)):c.memoizedState!==null?(c.child=o.child,c.flags|=128,null):(S=g.fallback,y=c.mode,g=uu({mode:"visible",children:g.children},y,0,null),S=Ws(S,y,D,null),S.flags|=2,g.return=c,S.return=c,g.sibling=S,c.child=g,(c.mode&1)!==0&&Pa(c,o.child,null,D),c.child.memoizedState=Fh(D),c.memoizedState=Lh,S);if((c.mode&1)===0)return Zc(o,c,D,null);if(y.data==="$!"){if(g=y.nextSibling&&y.nextSibling.dataset,g)var N=g.dgst;return g=N,S=Error(n(419)),g=Mh(S,g,void 0),Zc(o,c,D,g)}if(N=(D&o.childLanes)!==0,$n||N){if(g=hn,g!==null){switch(D&-D){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=(y&(g.suspendedLanes|D))!==0?0:y,y!==0&&y!==S.retryLane&&(S.retryLane=y,mi(o,y),Lr(g,o,y,-1))}return ep(),g=Mh(Error(n(421))),Zc(o,c,D,g)}return y.data==="$?"?(c.flags|=128,c.child=o.child,c=Nk.bind(null,o),y._reactRetry=c,null):(o=S.treeContext,ar=Zi(y.nextSibling),sr=c,kt=!0,Mr=null,o!==null&&(fr[hr++]=pi,fr[hr++]=gi,fr[hr++]=Is,pi=o.id,gi=o.overflow,Is=c),c=jh(c,g.children),c.flags|=4096,c)}function vb(o,c,h){o.lanes|=c;var g=o.alternate;g!==null&&(g.lanes|=c),gh(o.return,c,h)}function zh(o,c,h,g,y){var S=o.memoizedState;S===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:g,tail:h,tailMode:y}:(S.isBackwards=c,S.rendering=null,S.renderingStartTime=0,S.last=g,S.tail=h,S.tailMode=y)}function yb(o,c,h){var g=c.pendingProps,y=g.revealOrder,S=g.tail;if(Mn(o,c,g.children,h),g=Mt.current,(g&2)!==0)g=g&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&vb(o,h,c);else if(o.tag===19)vb(o,h,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}g&=1}if(St(Mt,g),(c.mode&1)===0)c.memoizedState=null;else switch(y){case"forwards":for(h=c.child,y=null;h!==null;)o=h.alternate,o!==null&&Vc(o)===null&&(y=h),h=h.sibling;h=y,h===null?(y=c.child,c.child=null):(y=h.sibling,h.sibling=null),zh(c,!1,y,h,S);break;case"backwards":for(h=null,y=c.child,c.child=null;y!==null;){if(o=y.alternate,o!==null&&Vc(o)===null){c.child=y;break}o=y.sibling,y.sibling=h,h=y,y=o}zh(c,!0,h,null,S);break;case"together":zh(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Xc(o,c){(c.mode&1)===0&&o!==null&&(o.alternate=null,c.alternate=null,c.flags|=2)}function yi(o,c,h){if(o!==null&&(c.dependencies=o.dependencies),zs|=c.lanes,(h&c.childLanes)===0)return null;if(o!==null&&c.child!==o.child)throw Error(n(153));if(c.child!==null){for(o=c.child,h=ls(o,o.pendingProps),c.child=h,h.return=c;o.sibling!==null;)o=o.sibling,h=h.sibling=ls(o,o.pendingProps),h.return=c;h.sibling=null}return c.child}function Sk(o,c,h){switch(c.tag){case 3:pb(c),Ia();break;case 5:My(c);break;case 1:Vn(c.type)&&Ic(c);break;case 4:yh(c,c.stateNode.containerInfo);break;case 10:var g=c.type._context,y=c.memoizedProps.value;St(Hc,g._currentValue),g._currentValue=y;break;case 13:if(g=c.memoizedState,g!==null)return g.dehydrated!==null?(St(Mt,Mt.current&1),c.flags|=128,null):(h&c.child.childLanes)!==0?mb(o,c,h):(St(Mt,Mt.current&1),o=yi(o,c,h),o!==null?o.sibling:null);St(Mt,Mt.current&1);break;case 19:if(g=(h&c.childLanes)!==0,(o.flags&128)!==0){if(g)return yb(o,c,h);c.flags|=128}if(y=c.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),St(Mt,Mt.current),g)break;return null;case 22:case 23:return c.lanes=0,db(o,c,h)}return yi(o,c,h)}var bb,Hh,_b,Sb;bb=function(o,c){for(var h=c.child;h!==null;){if(h.tag===5||h.tag===6)o.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},Hh=function(){},_b=function(o,c,h,g){var y=o.memoizedProps;if(y!==g){o=c.stateNode,Fs(Gr.current);var S=null;switch(h){case"input":y=ge(o,y),g=ge(o,g),S=[];break;case"select":y=Y({},y,{value:void 0}),g=Y({},g,{value:void 0}),S=[];break;case"textarea":y=Le(o,y),g=Le(o,g),S=[];break;default:typeof y.onClick!="function"&&typeof g.onClick=="function"&&(o.onclick=Oc)}it(h,g);var D;h=null;for(V in y)if(!g.hasOwnProperty(V)&&y.hasOwnProperty(V)&&y[V]!=null)if(V==="style"){var N=y[V];for(D in N)N.hasOwnProperty(D)&&(h||(h={}),h[D]="")}else V!=="dangerouslySetInnerHTML"&&V!=="children"&&V!=="suppressContentEditableWarning"&&V!=="suppressHydrationWarning"&&V!=="autoFocus"&&(i.hasOwnProperty(V)?S||(S=[]):(S=S||[]).push(V,null));for(V in g){var L=g[V];if(N=y?.[V],g.hasOwnProperty(V)&&L!==N&&(L!=null||N!=null))if(V==="style")if(N){for(D in N)!N.hasOwnProperty(D)||L&&L.hasOwnProperty(D)||(h||(h={}),h[D]="");for(D in L)L.hasOwnProperty(D)&&N[D]!==L[D]&&(h||(h={}),h[D]=L[D])}else h||(S||(S=[]),S.push(V,h)),h=L;else V==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,N=N?N.__html:void 0,L!=null&&N!==L&&(S=S||[]).push(V,L)):V==="children"?typeof L!="string"&&typeof L!="number"||(S=S||[]).push(V,""+L):V!=="suppressContentEditableWarning"&&V!=="suppressHydrationWarning"&&(i.hasOwnProperty(V)?(L!=null&&V==="onScroll"&&xt("scroll",o),S||N===L||(S=[])):(S=S||[]).push(V,L))}h&&(S=S||[]).push("style",h);var V=S;(c.updateQueue=V)&&(c.flags|=4)}},Sb=function(o,c,h,g){h!==g&&(c.flags|=4)};function tl(o,c){if(!kt)switch(o.tailMode){case"hidden":c=o.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?o.tail=null:h.sibling=null;break;case"collapsed":h=o.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:g.sibling=null}}function Cn(o){var c=o.alternate!==null&&o.alternate.child===o.child,h=0,g=0;if(c)for(var y=o.child;y!==null;)h|=y.lanes|y.childLanes,g|=y.subtreeFlags&14680064,g|=y.flags&14680064,y.return=o,y=y.sibling;else for(y=o.child;y!==null;)h|=y.lanes|y.childLanes,g|=y.subtreeFlags,g|=y.flags,y.return=o,y=y.sibling;return o.subtreeFlags|=g,o.childLanes=h,c}function wk(o,c,h){var g=c.pendingProps;switch(lh(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Cn(c),null;case 1:return Vn(c.type)&&Nc(),Cn(c),null;case 3:return g=c.stateNode,ja(),Et(Wn),Et(xn),Sh(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(o===null||o.child===null)&&(jc(c)?c.flags|=4:o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,Mr!==null&&(Zh(Mr),Mr=null))),Hh(o,c),Cn(c),null;case 5:bh(c);var y=Fs(Ko.current);if(h=c.type,o!==null&&c.stateNode!=null)_b(o,c,h,g,y),o.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!g){if(c.stateNode===null)throw Error(n(166));return Cn(c),null}if(o=Fs(Gr.current),jc(c)){g=c.stateNode,h=c.type;var S=c.memoizedProps;switch(g[qr]=c,g[$o]=S,o=(c.mode&1)!==0,h){case"dialog":xt("cancel",g),xt("close",g);break;case"iframe":case"object":case"embed":xt("load",g);break;case"video":case"audio":for(y=0;y<Bo.length;y++)xt(Bo[y],g);break;case"source":xt("error",g);break;case"img":case"image":case"link":xt("error",g),xt("load",g);break;case"details":xt("toggle",g);break;case"input":Pe(g,S),xt("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!S.multiple},xt("invalid",g);break;case"textarea":Z(g,S),xt("invalid",g)}it(h,S),y=null;for(var D in S)if(S.hasOwnProperty(D)){var N=S[D];D==="children"?typeof N=="string"?g.textContent!==N&&(S.suppressHydrationWarning!==!0&&Rc(g.textContent,N,o),y=["children",N]):typeof N=="number"&&g.textContent!==""+N&&(S.suppressHydrationWarning!==!0&&Rc(g.textContent,N,o),y=["children",""+N]):i.hasOwnProperty(D)&&N!=null&&D==="onScroll"&&xt("scroll",g)}switch(h){case"input":jt(g),en(g,S,!0);break;case"textarea":jt(g),Fe(g);break;case"select":case"option":break;default:typeof S.onClick=="function"&&(g.onclick=Oc)}g=y,c.updateQueue=g,g!==null&&(c.flags|=4)}else{D=y.nodeType===9?y:y.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=Ne(h)),o==="http://www.w3.org/1999/xhtml"?h==="script"?(o=D.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof g.is=="string"?o=D.createElement(h,{is:g.is}):(o=D.createElement(h),h==="select"&&(D=o,g.multiple?D.multiple=!0:g.size&&(D.size=g.size))):o=D.createElementNS(o,h),o[qr]=c,o[$o]=g,bb(o,c,!1,!1),c.stateNode=o;e:{switch(D=Wt(h,g),h){case"dialog":xt("cancel",o),xt("close",o),y=g;break;case"iframe":case"object":case"embed":xt("load",o),y=g;break;case"video":case"audio":for(y=0;y<Bo.length;y++)xt(Bo[y],o);y=g;break;case"source":xt("error",o),y=g;break;case"img":case"image":case"link":xt("error",o),xt("load",o),y=g;break;case"details":xt("toggle",o),y=g;break;case"input":Pe(o,g),y=ge(o,g),xt("invalid",o);break;case"option":y=g;break;case"select":o._wrapperState={wasMultiple:!!g.multiple},y=Y({},g,{value:void 0}),xt("invalid",o);break;case"textarea":Z(o,g),y=Le(o,g),xt("invalid",o);break;default:y=g}it(h,y),N=y;for(S in N)if(N.hasOwnProperty(S)){var L=N[S];S==="style"?dr(o,L):S==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,L!=null&&Re(o,L)):S==="children"?typeof L=="string"?(h!=="textarea"||L!=="")&&He(o,L):typeof L=="number"&&He(o,""+L):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(i.hasOwnProperty(S)?L!=null&&S==="onScroll"&&xt("scroll",o):L!=null&&k(o,S,L,D))}switch(h){case"input":jt(o),en(o,g,!1);break;case"textarea":jt(o),Fe(o);break;case"option":g.value!=null&&o.setAttribute("value",""+se(g.value));break;case"select":o.multiple=!!g.multiple,S=g.value,S!=null?lt(o,!!g.multiple,S,!1):g.defaultValue!=null&&lt(o,!!g.multiple,g.defaultValue,!0);break;default:typeof y.onClick=="function"&&(o.onclick=Oc)}switch(h){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return Cn(c),null;case 6:if(o&&c.stateNode!=null)Sb(o,c,o.memoizedProps,g);else{if(typeof g!="string"&&c.stateNode===null)throw Error(n(166));if(h=Fs(Ko.current),Fs(Gr.current),jc(c)){if(g=c.stateNode,h=c.memoizedProps,g[qr]=c,(S=g.nodeValue!==h)&&(o=sr,o!==null))switch(o.tag){case 3:Rc(g.nodeValue,h,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&Rc(g.nodeValue,h,(o.mode&1)!==0)}S&&(c.flags|=4)}else g=(h.nodeType===9?h:h.ownerDocument).createTextNode(g),g[qr]=c,c.stateNode=g}return Cn(c),null;case 13:if(Et(Mt),g=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(kt&&ar!==null&&(c.mode&1)!==0&&(c.flags&128)===0)Ey(),Ia(),c.flags|=98560,S=!1;else if(S=jc(c),g!==null&&g.dehydrated!==null){if(o===null){if(!S)throw Error(n(318));if(S=c.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(n(317));S[qr]=c}else Ia(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Cn(c),S=!1}else Mr!==null&&(Zh(Mr),Mr=null),S=!0;if(!S)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=h,c):(g=g!==null,g!==(o!==null&&o.memoizedState!==null)&&g&&(c.child.flags|=8192,(c.mode&1)!==0&&(o===null||(Mt.current&1)!==0?nn===0&&(nn=3):ep())),c.updateQueue!==null&&(c.flags|=4),Cn(c),null);case 4:return ja(),Hh(o,c),o===null&&Wo(c.stateNode.containerInfo),Cn(c),null;case 10:return ph(c.type._context),Cn(c),null;case 17:return Vn(c.type)&&Nc(),Cn(c),null;case 19:if(Et(Mt),S=c.memoizedState,S===null)return Cn(c),null;if(g=(c.flags&128)!==0,D=S.rendering,D===null)if(g)tl(S,!1);else{if(nn!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(D=Vc(o),D!==null){for(c.flags|=128,tl(S,!1),g=D.updateQueue,g!==null&&(c.updateQueue=g,c.flags|=4),c.subtreeFlags=0,g=h,h=c.child;h!==null;)S=h,o=g,S.flags&=14680066,D=S.alternate,D===null?(S.childLanes=0,S.lanes=o,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=D.childLanes,S.lanes=D.lanes,S.child=D.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=D.memoizedProps,S.memoizedState=D.memoizedState,S.updateQueue=D.updateQueue,S.type=D.type,o=D.dependencies,S.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),h=h.sibling;return St(Mt,Mt.current&1|2),c.child}o=o.sibling}S.tail!==null&&qt()>Ba&&(c.flags|=128,g=!0,tl(S,!1),c.lanes=4194304)}else{if(!g)if(o=Vc(D),o!==null){if(c.flags|=128,g=!0,h=o.updateQueue,h!==null&&(c.updateQueue=h,c.flags|=4),tl(S,!0),S.tail===null&&S.tailMode==="hidden"&&!D.alternate&&!kt)return Cn(c),null}else 2*qt()-S.renderingStartTime>Ba&&h!==1073741824&&(c.flags|=128,g=!0,tl(S,!1),c.lanes=4194304);S.isBackwards?(D.sibling=c.child,c.child=D):(h=S.last,h!==null?h.sibling=D:c.child=D,S.last=D)}return S.tail!==null?(c=S.tail,S.rendering=c,S.tail=c.sibling,S.renderingStartTime=qt(),c.sibling=null,h=Mt.current,St(Mt,g?h&1|2:h&1),c):(Cn(c),null);case 22:case 23:return Jh(),g=c.memoizedState!==null,o!==null&&o.memoizedState!==null!==g&&(c.flags|=8192),g&&(c.mode&1)!==0?(or&1073741824)!==0&&(Cn(c),c.subtreeFlags&6&&(c.flags|=8192)):Cn(c),null;case 24:return null;case 25:return null}throw Error(n(156,c.tag))}function xk(o,c){switch(lh(c),c.tag){case 1:return Vn(c.type)&&Nc(),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return ja(),Et(Wn),Et(xn),Sh(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 5:return bh(c),null;case 13:if(Et(Mt),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(n(340));Ia()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return Et(Mt),null;case 4:return ja(),null;case 10:return ph(c.type._context),null;case 22:case 23:return Jh(),null;case 24:return null;default:return null}}var Jc=!1,Tn=!1,Ek=typeof WeakSet=="function"?WeakSet:Set,me=null;function Ha(o,c){var h=o.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(g){Ht(o,c,g)}else h.current=null}function Uh(o,c,h){try{h()}catch(g){Ht(o,c,g)}}var wb=!1;function Ck(o,c){if(Jf=bc,o=ey(),$f(o)){if("selectionStart"in o)var h={start:o.selectionStart,end:o.selectionEnd};else e:{h=(h=o.ownerDocument)&&h.defaultView||window;var g=h.getSelection&&h.getSelection();if(g&&g.rangeCount!==0){h=g.anchorNode;var y=g.anchorOffset,S=g.focusNode;g=g.focusOffset;try{h.nodeType,S.nodeType}catch{h=null;break e}var D=0,N=-1,L=-1,V=0,J=0,te=o,X=null;t:for(;;){for(var fe;te!==h||y!==0&&te.nodeType!==3||(N=D+y),te!==S||g!==0&&te.nodeType!==3||(L=D+g),te.nodeType===3&&(D+=te.nodeValue.length),(fe=te.firstChild)!==null;)X=te,te=fe;for(;;){if(te===o)break t;if(X===h&&++V===y&&(N=D),X===S&&++J===g&&(L=D),(fe=te.nextSibling)!==null)break;te=X,X=te.parentNode}te=fe}h=N===-1||L===-1?null:{start:N,end:L}}else h=null}h=h||{start:0,end:0}}else h=null;for(eh={focusedElem:o,selectionRange:h},bc=!1,me=c;me!==null;)if(c=me,o=c.child,(c.subtreeFlags&1028)!==0&&o!==null)o.return=c,me=o;else for(;me!==null;){c=me;try{var ve=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(ve!==null){var _e=ve.memoizedProps,Gt=ve.memoizedState,H=c.stateNode,j=H.getSnapshotBeforeUpdate(c.elementType===c.type?_e:Nr(c.type,_e),Gt);H.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var U=c.stateNode.containerInfo;U.nodeType===1?U.textContent="":U.nodeType===9&&U.documentElement&&U.removeChild(U.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(ae){Ht(c,c.return,ae)}if(o=c.sibling,o!==null){o.return=c.return,me=o;break}me=c.return}return ve=wb,wb=!1,ve}function nl(o,c,h){var g=c.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var y=g=g.next;do{if((y.tag&o)===o){var S=y.destroy;y.destroy=void 0,S!==void 0&&Uh(c,h,S)}y=y.next}while(y!==g)}}function eu(o,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var h=c=c.next;do{if((h.tag&o)===o){var g=h.create;h.destroy=g()}h=h.next}while(h!==c)}}function Bh(o){var c=o.ref;if(c!==null){var h=o.stateNode;switch(o.tag){case 5:o=h;break;default:o=h}typeof c=="function"?c(o):c.current=o}}function xb(o){var c=o.alternate;c!==null&&(o.alternate=null,xb(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&(delete c[qr],delete c[$o],delete c[ih],delete c[ok],delete c[lk])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function Eb(o){return o.tag===5||o.tag===3||o.tag===4}function Cb(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Eb(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Wh(o,c,h){var g=o.tag;if(g===5||g===6)o=o.stateNode,c?h.nodeType===8?h.parentNode.insertBefore(o,c):h.insertBefore(o,c):(h.nodeType===8?(c=h.parentNode,c.insertBefore(o,h)):(c=h,c.appendChild(o)),h=h._reactRootContainer,h!=null||c.onclick!==null||(c.onclick=Oc));else if(g!==4&&(o=o.child,o!==null))for(Wh(o,c,h),o=o.sibling;o!==null;)Wh(o,c,h),o=o.sibling}function Vh(o,c,h){var g=o.tag;if(g===5||g===6)o=o.stateNode,c?h.insertBefore(o,c):h.appendChild(o);else if(g!==4&&(o=o.child,o!==null))for(Vh(o,c,h),o=o.sibling;o!==null;)Vh(o,c,h),o=o.sibling}var bn=null,Ir=!1;function rs(o,c,h){for(h=h.child;h!==null;)Tb(o,c,h),h=h.sibling}function Tb(o,c,h){if($r&&typeof $r.onCommitFiberUnmount=="function")try{$r.onCommitFiberUnmount(hc,h)}catch{}switch(h.tag){case 5:Tn||Ha(h,c);case 6:var g=bn,y=Ir;bn=null,rs(o,c,h),bn=g,Ir=y,bn!==null&&(Ir?(o=bn,h=h.stateNode,o.nodeType===8?o.parentNode.removeChild(h):o.removeChild(h)):bn.removeChild(h.stateNode));break;case 18:bn!==null&&(Ir?(o=bn,h=h.stateNode,o.nodeType===8?rh(o.parentNode,h):o.nodeType===1&&rh(o,h),Io(o)):rh(bn,h.stateNode));break;case 4:g=bn,y=Ir,bn=h.stateNode.containerInfo,Ir=!0,rs(o,c,h),bn=g,Ir=y;break;case 0:case 11:case 14:case 15:if(!Tn&&(g=h.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){y=g=g.next;do{var S=y,D=S.destroy;S=S.tag,D!==void 0&&((S&2)!==0||(S&4)!==0)&&Uh(h,c,D),y=y.next}while(y!==g)}rs(o,c,h);break;case 1:if(!Tn&&(Ha(h,c),g=h.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=h.memoizedProps,g.state=h.memoizedState,g.componentWillUnmount()}catch(N){Ht(h,c,N)}rs(o,c,h);break;case 21:rs(o,c,h);break;case 22:h.mode&1?(Tn=(g=Tn)||h.memoizedState!==null,rs(o,c,h),Tn=g):rs(o,c,h);break;default:rs(o,c,h)}}function Db(o){var c=o.updateQueue;if(c!==null){o.updateQueue=null;var h=o.stateNode;h===null&&(h=o.stateNode=new Ek),c.forEach(function(g){var y=Ik.bind(null,o,g);h.has(g)||(h.add(g),g.then(y,y))})}}function Pr(o,c){var h=c.deletions;if(h!==null)for(var g=0;g<h.length;g++){var y=h[g];try{var S=o,D=c,N=D;e:for(;N!==null;){switch(N.tag){case 5:bn=N.stateNode,Ir=!1;break e;case 3:bn=N.stateNode.containerInfo,Ir=!0;break e;case 4:bn=N.stateNode.containerInfo,Ir=!0;break e}N=N.return}if(bn===null)throw Error(n(160));Tb(S,D,y),bn=null,Ir=!1;var L=y.alternate;L!==null&&(L.return=null),y.return=null}catch(V){Ht(y,c,V)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)kb(c,o),c=c.sibling}function kb(o,c){var h=o.alternate,g=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(Pr(c,o),Qr(o),g&4){try{nl(3,o,o.return),eu(3,o)}catch(_e){Ht(o,o.return,_e)}try{nl(5,o,o.return)}catch(_e){Ht(o,o.return,_e)}}break;case 1:Pr(c,o),Qr(o),g&512&&h!==null&&Ha(h,h.return);break;case 5:if(Pr(c,o),Qr(o),g&512&&h!==null&&Ha(h,h.return),o.flags&32){var y=o.stateNode;try{He(y,"")}catch(_e){Ht(o,o.return,_e)}}if(g&4&&(y=o.stateNode,y!=null)){var S=o.memoizedProps,D=h!==null?h.memoizedProps:S,N=o.type,L=o.updateQueue;if(o.updateQueue=null,L!==null)try{N==="input"&&S.type==="radio"&&S.name!=null&&Ze(y,S),Wt(N,D);var V=Wt(N,S);for(D=0;D<L.length;D+=2){var J=L[D],te=L[D+1];J==="style"?dr(y,te):J==="dangerouslySetInnerHTML"?Re(y,te):J==="children"?He(y,te):k(y,J,te,V)}switch(N){case"input":_t(y,S);break;case"textarea":ye(y,S);break;case"select":var X=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!S.multiple;var fe=S.value;fe!=null?lt(y,!!S.multiple,fe,!1):X!==!!S.multiple&&(S.defaultValue!=null?lt(y,!!S.multiple,S.defaultValue,!0):lt(y,!!S.multiple,S.multiple?[]:"",!1))}y[$o]=S}catch(_e){Ht(o,o.return,_e)}}break;case 6:if(Pr(c,o),Qr(o),g&4){if(o.stateNode===null)throw Error(n(162));y=o.stateNode,S=o.memoizedProps;try{y.nodeValue=S}catch(_e){Ht(o,o.return,_e)}}break;case 3:if(Pr(c,o),Qr(o),g&4&&h!==null&&h.memoizedState.isDehydrated)try{Io(c.containerInfo)}catch(_e){Ht(o,o.return,_e)}break;case 4:Pr(c,o),Qr(o);break;case 13:Pr(c,o),Qr(o),y=o.child,y.flags&8192&&(S=y.memoizedState!==null,y.stateNode.isHidden=S,!S||y.alternate!==null&&y.alternate.memoizedState!==null||(Gh=qt())),g&4&&Db(o);break;case 22:if(J=h!==null&&h.memoizedState!==null,o.mode&1?(Tn=(V=Tn)||J,Pr(c,o),Tn=V):Pr(c,o),Qr(o),g&8192){if(V=o.memoizedState!==null,(o.stateNode.isHidden=V)&&!J&&(o.mode&1)!==0)for(me=o,J=o.child;J!==null;){for(te=me=J;me!==null;){switch(X=me,fe=X.child,X.tag){case 0:case 11:case 14:case 15:nl(4,X,X.return);break;case 1:Ha(X,X.return);var ve=X.stateNode;if(typeof ve.componentWillUnmount=="function"){g=X,h=X.return;try{c=g,ve.props=c.memoizedProps,ve.state=c.memoizedState,ve.componentWillUnmount()}catch(_e){Ht(g,h,_e)}}break;case 5:Ha(X,X.return);break;case 22:if(X.memoizedState!==null){Ob(te);continue}}fe!==null?(fe.return=X,me=fe):Ob(te)}J=J.sibling}e:for(J=null,te=o;;){if(te.tag===5){if(J===null){J=te;try{y=te.stateNode,V?(S=y.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none"):(N=te.stateNode,L=te.memoizedProps.style,D=L!=null&&L.hasOwnProperty("display")?L.display:null,N.style.display=ut("display",D))}catch(_e){Ht(o,o.return,_e)}}}else if(te.tag===6){if(J===null)try{te.stateNode.nodeValue=V?"":te.memoizedProps}catch(_e){Ht(o,o.return,_e)}}else if((te.tag!==22&&te.tag!==23||te.memoizedState===null||te===o)&&te.child!==null){te.child.return=te,te=te.child;continue}if(te===o)break e;for(;te.sibling===null;){if(te.return===null||te.return===o)break e;J===te&&(J=null),te=te.return}J===te&&(J=null),te.sibling.return=te.return,te=te.sibling}}break;case 19:Pr(c,o),Qr(o),g&4&&Db(o);break;case 21:break;default:Pr(c,o),Qr(o)}}function Qr(o){var c=o.flags;if(c&2){try{e:{for(var h=o.return;h!==null;){if(Eb(h)){var g=h;break e}h=h.return}throw Error(n(160))}switch(g.tag){case 5:var y=g.stateNode;g.flags&32&&(He(y,""),g.flags&=-33);var S=Cb(o);Vh(o,S,y);break;case 3:case 4:var D=g.stateNode.containerInfo,N=Cb(o);Wh(o,N,D);break;default:throw Error(n(161))}}catch(L){Ht(o,o.return,L)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function Tk(o,c,h){me=o,Ab(o)}function Ab(o,c,h){for(var g=(o.mode&1)!==0;me!==null;){var y=me,S=y.child;if(y.tag===22&&g){var D=y.memoizedState!==null||Jc;if(!D){var N=y.alternate,L=N!==null&&N.memoizedState!==null||Tn;N=Jc;var V=Tn;if(Jc=D,(Tn=L)&&!V)for(me=y;me!==null;)D=me,L=D.child,D.tag===22&&D.memoizedState!==null?Mb(y):L!==null?(L.return=D,me=L):Mb(y);for(;S!==null;)me=S,Ab(S),S=S.sibling;me=y,Jc=N,Tn=V}Rb(o)}else(y.subtreeFlags&8772)!==0&&S!==null?(S.return=y,me=S):Rb(o)}}function Rb(o){for(;me!==null;){var c=me;if((c.flags&8772)!==0){var h=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:Tn||eu(5,c);break;case 1:var g=c.stateNode;if(c.flags&4&&!Tn)if(h===null)g.componentDidMount();else{var y=c.elementType===c.type?h.memoizedProps:Nr(c.type,h.memoizedProps);g.componentDidUpdate(y,h.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var S=c.updateQueue;S!==null&&Oy(c,S,g);break;case 3:var D=c.updateQueue;if(D!==null){if(h=null,c.child!==null)switch(c.child.tag){case 5:h=c.child.stateNode;break;case 1:h=c.child.stateNode}Oy(c,D,h)}break;case 5:var N=c.stateNode;if(h===null&&c.flags&4){h=N;var L=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":L.autoFocus&&h.focus();break;case"img":L.src&&(h.src=L.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var V=c.alternate;if(V!==null){var J=V.memoizedState;if(J!==null){var te=J.dehydrated;te!==null&&Io(te)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Tn||c.flags&512&&Bh(c)}catch(X){Ht(c,c.return,X)}}if(c===o){me=null;break}if(h=c.sibling,h!==null){h.return=c.return,me=h;break}me=c.return}}function Ob(o){for(;me!==null;){var c=me;if(c===o){me=null;break}var h=c.sibling;if(h!==null){h.return=c.return,me=h;break}me=c.return}}function Mb(o){for(;me!==null;){var c=me;try{switch(c.tag){case 0:case 11:case 15:var h=c.return;try{eu(4,c)}catch(L){Ht(c,h,L)}break;case 1:var g=c.stateNode;if(typeof g.componentDidMount=="function"){var y=c.return;try{g.componentDidMount()}catch(L){Ht(c,y,L)}}var S=c.return;try{Bh(c)}catch(L){Ht(c,S,L)}break;case 5:var D=c.return;try{Bh(c)}catch(L){Ht(c,D,L)}}}catch(L){Ht(c,c.return,L)}if(c===o){me=null;break}var N=c.sibling;if(N!==null){N.return=c.return,me=N;break}me=c.return}}var Dk=Math.ceil,tu=R.ReactCurrentDispatcher,$h=R.ReactCurrentOwner,mr=R.ReactCurrentBatchConfig,st=0,hn=null,Kt=null,_n=0,or=0,Ua=Xi(0),nn=0,rl=null,zs=0,nu=0,qh=0,il=null,qn=null,Gh=0,Ba=1/0,bi=null,ru=!1,Yh=null,is=null,iu=!1,ss=null,su=0,sl=0,Qh=null,au=-1,ou=0;function Nn(){return(st&6)!==0?qt():au!==-1?au:au=qt()}function as(o){return(o.mode&1)===0?1:(st&2)!==0&&_n!==0?_n&-_n:uk.transition!==null?(ou===0&&(ou=Cv()),ou):(o=dt,o!==0||(o=window.event,o=o===void 0?16:Iv(o.type)),o)}function Lr(o,c,h,g){if(50<sl)throw sl=0,Qh=null,Error(n(185));Ao(o,h,g),((st&2)===0||o!==hn)&&(o===hn&&((st&2)===0&&(nu|=h),nn===4&&os(o,_n)),Gn(o,g),h===1&&st===0&&(c.mode&1)===0&&(Ba=qt()+500,Pc&&es()))}function Gn(o,c){var h=o.callbackNode;uD(o,c);var g=mc(o,o===hn?_n:0);if(g===0)h!==null&&wv(h),o.callbackNode=null,o.callbackPriority=0;else if(c=g&-g,o.callbackPriority!==c){if(h!=null&&wv(h),c===1)o.tag===0?ck(Ib.bind(null,o)):by(Ib.bind(null,o)),sk(function(){(st&6)===0&&es()}),h=null;else{switch(Tv(g)){case 1:h=kf;break;case 4:h=xv;break;case 16:h=fc;break;case 536870912:h=Ev;break;default:h=fc}h=Bb(h,Nb.bind(null,o))}o.callbackPriority=c,o.callbackNode=h}}function Nb(o,c){if(au=-1,ou=0,(st&6)!==0)throw Error(n(327));var h=o.callbackNode;if(Wa()&&o.callbackNode!==h)return null;var g=mc(o,o===hn?_n:0);if(g===0)return null;if((g&30)!==0||(g&o.expiredLanes)!==0||c)c=lu(o,g);else{c=g;var y=st;st|=2;var S=Lb();(hn!==o||_n!==c)&&(bi=null,Ba=qt()+500,Us(o,c));do try{Rk();break}catch(N){Pb(o,N)}while(!0);hh(),tu.current=S,st=y,Kt!==null?c=0:(hn=null,_n=0,c=nn)}if(c!==0){if(c===2&&(y=Af(o),y!==0&&(g=y,c=Kh(o,y))),c===1)throw h=rl,Us(o,0),os(o,g),Gn(o,qt()),h;if(c===6)os(o,g);else{if(y=o.current.alternate,(g&30)===0&&!kk(y)&&(c=lu(o,g),c===2&&(S=Af(o),S!==0&&(g=S,c=Kh(o,S))),c===1))throw h=rl,Us(o,0),os(o,g),Gn(o,qt()),h;switch(o.finishedWork=y,o.finishedLanes=g,c){case 0:case 1:throw Error(n(345));case 2:Bs(o,qn,bi);break;case 3:if(os(o,g),(g&130023424)===g&&(c=Gh+500-qt(),10<c)){if(mc(o,0)!==0)break;if(y=o.suspendedLanes,(y&g)!==g){Nn(),o.pingedLanes|=o.suspendedLanes&y;break}o.timeoutHandle=nh(Bs.bind(null,o,qn,bi),c);break}Bs(o,qn,bi);break;case 4:if(os(o,g),(g&4194240)===g)break;for(c=o.eventTimes,y=-1;0<g;){var D=31-Rr(g);S=1<<D,D=c[D],D>y&&(y=D),g&=~S}if(g=y,g=qt()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*Dk(g/1960))-g,10<g){o.timeoutHandle=nh(Bs.bind(null,o,qn,bi),g);break}Bs(o,qn,bi);break;case 5:Bs(o,qn,bi);break;default:throw Error(n(329))}}}return Gn(o,qt()),o.callbackNode===h?Nb.bind(null,o):null}function Kh(o,c){var h=il;return o.current.memoizedState.isDehydrated&&(Us(o,c).flags|=256),o=lu(o,c),o!==2&&(c=qn,qn=h,c!==null&&Zh(c)),o}function Zh(o){qn===null?qn=o:qn.push.apply(qn,o)}function kk(o){for(var c=o;;){if(c.flags&16384){var h=c.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var g=0;g<h.length;g++){var y=h[g],S=y.getSnapshot;y=y.value;try{if(!Or(S(),y))return!1}catch{return!1}}}if(h=c.child,c.subtreeFlags&16384&&h!==null)h.return=c,c=h;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function os(o,c){for(c&=~qh,c&=~nu,o.suspendedLanes|=c,o.pingedLanes&=~c,o=o.expirationTimes;0<c;){var h=31-Rr(c),g=1<<h;o[h]=-1,c&=~g}}function Ib(o){if((st&6)!==0)throw Error(n(327));Wa();var c=mc(o,0);if((c&1)===0)return Gn(o,qt()),null;var h=lu(o,c);if(o.tag!==0&&h===2){var g=Af(o);g!==0&&(c=g,h=Kh(o,g))}if(h===1)throw h=rl,Us(o,0),os(o,c),Gn(o,qt()),h;if(h===6)throw Error(n(345));return o.finishedWork=o.current.alternate,o.finishedLanes=c,Bs(o,qn,bi),Gn(o,qt()),null}function Xh(o,c){var h=st;st|=1;try{return o(c)}finally{st=h,st===0&&(Ba=qt()+500,Pc&&es())}}function Hs(o){ss!==null&&ss.tag===0&&(st&6)===0&&Wa();var c=st;st|=1;var h=mr.transition,g=dt;try{if(mr.transition=null,dt=1,o)return o()}finally{dt=g,mr.transition=h,st=c,(st&6)===0&&es()}}function Jh(){or=Ua.current,Et(Ua)}function Us(o,c){o.finishedWork=null,o.finishedLanes=0;var h=o.timeoutHandle;if(h!==-1&&(o.timeoutHandle=-1,ik(h)),Kt!==null)for(h=Kt.return;h!==null;){var g=h;switch(lh(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&Nc();break;case 3:ja(),Et(Wn),Et(xn),Sh();break;case 5:bh(g);break;case 4:ja();break;case 13:Et(Mt);break;case 19:Et(Mt);break;case 10:ph(g.type._context);break;case 22:case 23:Jh()}h=h.return}if(hn=o,Kt=o=ls(o.current,null),_n=or=c,nn=0,rl=null,qh=nu=zs=0,qn=il=null,Ls!==null){for(c=0;c<Ls.length;c++)if(h=Ls[c],g=h.interleaved,g!==null){h.interleaved=null;var y=g.next,S=h.pending;if(S!==null){var D=S.next;S.next=y,g.next=D}h.pending=g}Ls=null}return o}function Pb(o,c){do{var h=Kt;try{if(hh(),$c.current=Qc,qc){for(var g=Nt.memoizedState;g!==null;){var y=g.queue;y!==null&&(y.pending=null),g=g.next}qc=!1}if(js=0,fn=tn=Nt=null,Zo=!1,Xo=0,$h.current=null,h===null||h.return===null){nn=1,rl=c,Kt=null;break}e:{var S=o,D=h.return,N=h,L=c;if(c=_n,N.flags|=32768,L!==null&&typeof L=="object"&&typeof L.then=="function"){var V=L,J=N,te=J.tag;if((J.mode&1)===0&&(te===0||te===11||te===15)){var X=J.alternate;X?(J.updateQueue=X.updateQueue,J.memoizedState=X.memoizedState,J.lanes=X.lanes):(J.updateQueue=null,J.memoizedState=null)}var fe=ab(D);if(fe!==null){fe.flags&=-257,ob(fe,D,N,S,c),fe.mode&1&&sb(S,V,c),c=fe,L=V;var ve=c.updateQueue;if(ve===null){var _e=new Set;_e.add(L),c.updateQueue=_e}else ve.add(L);break e}else{if((c&1)===0){sb(S,V,c),ep();break e}L=Error(n(426))}}else if(kt&&N.mode&1){var Gt=ab(D);if(Gt!==null){(Gt.flags&65536)===0&&(Gt.flags|=256),ob(Gt,D,N,S,c),dh(za(L,N));break e}}S=L=za(L,N),nn!==4&&(nn=2),il===null?il=[S]:il.push(S),S=D;do{switch(S.tag){case 3:S.flags|=65536,c&=-c,S.lanes|=c;var H=rb(S,L,c);Ry(S,H);break e;case 1:N=L;var j=S.type,U=S.stateNode;if((S.flags&128)===0&&(typeof j.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(is===null||!is.has(U)))){S.flags|=65536,c&=-c,S.lanes|=c;var ae=ib(S,N,c);Ry(S,ae);break e}}S=S.return}while(S!==null)}jb(h)}catch(we){c=we,Kt===h&&h!==null&&(Kt=h=h.return);continue}break}while(!0)}function Lb(){var o=tu.current;return tu.current=Qc,o===null?Qc:o}function ep(){(nn===0||nn===3||nn===2)&&(nn=4),hn===null||(zs&268435455)===0&&(nu&268435455)===0||os(hn,_n)}function lu(o,c){var h=st;st|=2;var g=Lb();(hn!==o||_n!==c)&&(bi=null,Us(o,c));do try{Ak();break}catch(y){Pb(o,y)}while(!0);if(hh(),st=h,tu.current=g,Kt!==null)throw Error(n(261));return hn=null,_n=0,nn}function Ak(){for(;Kt!==null;)Fb(Kt)}function Rk(){for(;Kt!==null&&!tD();)Fb(Kt)}function Fb(o){var c=Ub(o.alternate,o,or);o.memoizedProps=o.pendingProps,c===null?jb(o):Kt=c,$h.current=null}function jb(o){var c=o;do{var h=c.alternate;if(o=c.return,(c.flags&32768)===0){if(h=wk(h,c,or),h!==null){Kt=h;return}}else{if(h=xk(h,c),h!==null){h.flags&=32767,Kt=h;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{nn=6,Kt=null;return}}if(c=c.sibling,c!==null){Kt=c;return}Kt=c=o}while(c!==null);nn===0&&(nn=5)}function Bs(o,c,h){var g=dt,y=mr.transition;try{mr.transition=null,dt=1,Ok(o,c,h,g)}finally{mr.transition=y,dt=g}return null}function Ok(o,c,h,g){do Wa();while(ss!==null);if((st&6)!==0)throw Error(n(327));h=o.finishedWork;var y=o.finishedLanes;if(h===null)return null;if(o.finishedWork=null,o.finishedLanes=0,h===o.current)throw Error(n(177));o.callbackNode=null,o.callbackPriority=0;var S=h.lanes|h.childLanes;if(dD(o,S),o===hn&&(Kt=hn=null,_n=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||iu||(iu=!0,Bb(fc,function(){return Wa(),null})),S=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||S){S=mr.transition,mr.transition=null;var D=dt;dt=1;var N=st;st|=4,$h.current=null,Ck(o,h),kb(h,o),ZD(eh),bc=!!Jf,eh=Jf=null,o.current=h,Tk(h),nD(),st=N,dt=D,mr.transition=S}else o.current=h;if(iu&&(iu=!1,ss=o,su=y),S=o.pendingLanes,S===0&&(is=null),sD(h.stateNode),Gn(o,qt()),c!==null)for(g=o.onRecoverableError,h=0;h<c.length;h++)y=c[h],g(y.value,{componentStack:y.stack,digest:y.digest});if(ru)throw ru=!1,o=Yh,Yh=null,o;return(su&1)!==0&&o.tag!==0&&Wa(),S=o.pendingLanes,(S&1)!==0?o===Qh?sl++:(sl=0,Qh=o):sl=0,es(),null}function Wa(){if(ss!==null){var o=Tv(su),c=mr.transition,h=dt;try{if(mr.transition=null,dt=16>o?16:o,ss===null)var g=!1;else{if(o=ss,ss=null,su=0,(st&6)!==0)throw Error(n(331));var y=st;for(st|=4,me=o.current;me!==null;){var S=me,D=S.child;if((me.flags&16)!==0){var N=S.deletions;if(N!==null){for(var L=0;L<N.length;L++){var V=N[L];for(me=V;me!==null;){var J=me;switch(J.tag){case 0:case 11:case 15:nl(8,J,S)}var te=J.child;if(te!==null)te.return=J,me=te;else for(;me!==null;){J=me;var X=J.sibling,fe=J.return;if(xb(J),J===V){me=null;break}if(X!==null){X.return=fe,me=X;break}me=fe}}}var ve=S.alternate;if(ve!==null){var _e=ve.child;if(_e!==null){ve.child=null;do{var Gt=_e.sibling;_e.sibling=null,_e=Gt}while(_e!==null)}}me=S}}if((S.subtreeFlags&2064)!==0&&D!==null)D.return=S,me=D;else e:for(;me!==null;){if(S=me,(S.flags&2048)!==0)switch(S.tag){case 0:case 11:case 15:nl(9,S,S.return)}var H=S.sibling;if(H!==null){H.return=S.return,me=H;break e}me=S.return}}var j=o.current;for(me=j;me!==null;){D=me;var U=D.child;if((D.subtreeFlags&2064)!==0&&U!==null)U.return=D,me=U;else e:for(D=j;me!==null;){if(N=me,(N.flags&2048)!==0)try{switch(N.tag){case 0:case 11:case 15:eu(9,N)}}catch(we){Ht(N,N.return,we)}if(N===D){me=null;break e}var ae=N.sibling;if(ae!==null){ae.return=N.return,me=ae;break e}me=N.return}}if(st=y,es(),$r&&typeof $r.onPostCommitFiberRoot=="function")try{$r.onPostCommitFiberRoot(hc,o)}catch{}g=!0}return g}finally{dt=h,mr.transition=c}}return!1}function zb(o,c,h){c=za(h,c),c=rb(o,c,1),o=ns(o,c,1),c=Nn(),o!==null&&(Ao(o,1,c),Gn(o,c))}function Ht(o,c,h){if(o.tag===3)zb(o,o,h);else for(;c!==null;){if(c.tag===3){zb(c,o,h);break}else if(c.tag===1){var g=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(is===null||!is.has(g))){o=za(h,o),o=ib(c,o,1),c=ns(c,o,1),o=Nn(),c!==null&&(Ao(c,1,o),Gn(c,o));break}}c=c.return}}function Mk(o,c,h){var g=o.pingCache;g!==null&&g.delete(c),c=Nn(),o.pingedLanes|=o.suspendedLanes&h,hn===o&&(_n&h)===h&&(nn===4||nn===3&&(_n&130023424)===_n&&500>qt()-Gh?Us(o,0):qh|=h),Gn(o,c)}function Hb(o,c){c===0&&((o.mode&1)===0?c=1:(c=gc,gc<<=1,(gc&130023424)===0&&(gc=4194304)));var h=Nn();o=mi(o,c),o!==null&&(Ao(o,c,h),Gn(o,h))}function Nk(o){var c=o.memoizedState,h=0;c!==null&&(h=c.retryLane),Hb(o,h)}function Ik(o,c){var h=0;switch(o.tag){case 13:var g=o.stateNode,y=o.memoizedState;y!==null&&(h=y.retryLane);break;case 19:g=o.stateNode;break;default:throw Error(n(314))}g!==null&&g.delete(c),Hb(o,h)}var Ub;Ub=function(o,c,h){if(o!==null)if(o.memoizedProps!==c.pendingProps||Wn.current)$n=!0;else{if((o.lanes&h)===0&&(c.flags&128)===0)return $n=!1,Sk(o,c,h);$n=(o.flags&131072)!==0}else $n=!1,kt&&(c.flags&1048576)!==0&&_y(c,Fc,c.index);switch(c.lanes=0,c.tag){case 2:var g=c.type;Xc(o,c),o=c.pendingProps;var y=Oa(c,xn.current);Fa(c,h),y=Eh(null,c,g,o,y,h);var S=Ch();return c.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,Vn(g)?(S=!0,Ic(c)):S=!1,c.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,vh(c),y.updater=Kc,c.stateNode=y,y._reactInternals=c,Oh(c,g,o,h),c=Ph(null,c,g,!0,S,h)):(c.tag=0,kt&&S&&oh(c),Mn(null,c,y,h),c=c.child),c;case 16:g=c.elementType;e:{switch(Xc(o,c),o=c.pendingProps,y=g._init,g=y(g._payload),c.type=g,y=c.tag=Lk(g),o=Nr(g,o),y){case 0:c=Ih(null,c,g,o,h);break e;case 1:c=hb(null,c,g,o,h);break e;case 11:c=lb(null,c,g,o,h);break e;case 14:c=cb(null,c,g,Nr(g.type,o),h);break e}throw Error(n(306,g,""))}return c;case 0:return g=c.type,y=c.pendingProps,y=c.elementType===g?y:Nr(g,y),Ih(o,c,g,y,h);case 1:return g=c.type,y=c.pendingProps,y=c.elementType===g?y:Nr(g,y),hb(o,c,g,y,h);case 3:e:{if(pb(c),o===null)throw Error(n(387));g=c.pendingProps,S=c.memoizedState,y=S.element,Ay(o,c),Wc(c,g,null,h);var D=c.memoizedState;if(g=D.element,S.isDehydrated)if(S={element:g,isDehydrated:!1,cache:D.cache,pendingSuspenseBoundaries:D.pendingSuspenseBoundaries,transitions:D.transitions},c.updateQueue.baseState=S,c.memoizedState=S,c.flags&256){y=za(Error(n(423)),c),c=gb(o,c,g,h,y);break e}else if(g!==y){y=za(Error(n(424)),c),c=gb(o,c,g,h,y);break e}else for(ar=Zi(c.stateNode.containerInfo.firstChild),sr=c,kt=!0,Mr=null,h=Dy(c,null,g,h),c.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(Ia(),g===y){c=yi(o,c,h);break e}Mn(o,c,g,h)}c=c.child}return c;case 5:return My(c),o===null&&uh(c),g=c.type,y=c.pendingProps,S=o!==null?o.memoizedProps:null,D=y.children,th(g,y)?D=null:S!==null&&th(g,S)&&(c.flags|=32),fb(o,c),Mn(o,c,D,h),c.child;case 6:return o===null&&uh(c),null;case 13:return mb(o,c,h);case 4:return yh(c,c.stateNode.containerInfo),g=c.pendingProps,o===null?c.child=Pa(c,null,g,h):Mn(o,c,g,h),c.child;case 11:return g=c.type,y=c.pendingProps,y=c.elementType===g?y:Nr(g,y),lb(o,c,g,y,h);case 7:return Mn(o,c,c.pendingProps,h),c.child;case 8:return Mn(o,c,c.pendingProps.children,h),c.child;case 12:return Mn(o,c,c.pendingProps.children,h),c.child;case 10:e:{if(g=c.type._context,y=c.pendingProps,S=c.memoizedProps,D=y.value,St(Hc,g._currentValue),g._currentValue=D,S!==null)if(Or(S.value,D)){if(S.children===y.children&&!Wn.current){c=yi(o,c,h);break e}}else for(S=c.child,S!==null&&(S.return=c);S!==null;){var N=S.dependencies;if(N!==null){D=S.child;for(var L=N.firstContext;L!==null;){if(L.context===g){if(S.tag===1){L=vi(-1,h&-h),L.tag=2;var V=S.updateQueue;if(V!==null){V=V.shared;var J=V.pending;J===null?L.next=L:(L.next=J.next,J.next=L),V.pending=L}}S.lanes|=h,L=S.alternate,L!==null&&(L.lanes|=h),gh(S.return,h,c),N.lanes|=h;break}L=L.next}}else if(S.tag===10)D=S.type===c.type?null:S.child;else if(S.tag===18){if(D=S.return,D===null)throw Error(n(341));D.lanes|=h,N=D.alternate,N!==null&&(N.lanes|=h),gh(D,h,c),D=S.sibling}else D=S.child;if(D!==null)D.return=S;else for(D=S;D!==null;){if(D===c){D=null;break}if(S=D.sibling,S!==null){S.return=D.return,D=S;break}D=D.return}S=D}Mn(o,c,y.children,h),c=c.child}return c;case 9:return y=c.type,g=c.pendingProps.children,Fa(c,h),y=pr(y),g=g(y),c.flags|=1,Mn(o,c,g,h),c.child;case 14:return g=c.type,y=Nr(g,c.pendingProps),y=Nr(g.type,y),cb(o,c,g,y,h);case 15:return ub(o,c,c.type,c.pendingProps,h);case 17:return g=c.type,y=c.pendingProps,y=c.elementType===g?y:Nr(g,y),Xc(o,c),c.tag=1,Vn(g)?(o=!0,Ic(c)):o=!1,Fa(c,h),tb(c,g,y),Oh(c,g,y,h),Ph(null,c,g,!0,o,h);case 19:return yb(o,c,h);case 22:return db(o,c,h)}throw Error(n(156,c.tag))};function Bb(o,c){return Sv(o,c)}function Pk(o,c,h,g){this.tag=o,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vr(o,c,h,g){return new Pk(o,c,h,g)}function tp(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Lk(o){if(typeof o=="function")return tp(o)?1:0;if(o!=null){if(o=o.$$typeof,o===ee)return 11;if(o===pe)return 14}return 2}function ls(o,c){var h=o.alternate;return h===null?(h=vr(o.tag,c,o.key,o.mode),h.elementType=o.elementType,h.type=o.type,h.stateNode=o.stateNode,h.alternate=o,o.alternate=h):(h.pendingProps=c,h.type=o.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=o.flags&14680064,h.childLanes=o.childLanes,h.lanes=o.lanes,h.child=o.child,h.memoizedProps=o.memoizedProps,h.memoizedState=o.memoizedState,h.updateQueue=o.updateQueue,c=o.dependencies,h.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},h.sibling=o.sibling,h.index=o.index,h.ref=o.ref,h}function cu(o,c,h,g,y,S){var D=2;if(g=o,typeof o=="function")tp(o)&&(D=1);else if(typeof o=="string")D=5;else e:switch(o){case P:return Ws(h.children,y,S,c);case O:D=8,y|=8;break;case z:return o=vr(12,h,c,y|2),o.elementType=z,o.lanes=S,o;case re:return o=vr(13,h,c,y),o.elementType=re,o.lanes=S,o;case he:return o=vr(19,h,c,y),o.elementType=he,o.lanes=S,o;case oe:return uu(h,y,S,c);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case B:D=10;break e;case $:D=9;break e;case ee:D=11;break e;case pe:D=14;break e;case ie:D=16,g=null;break e}throw Error(n(130,o==null?o:typeof o,""))}return c=vr(D,h,c,y),c.elementType=o,c.type=g,c.lanes=S,c}function Ws(o,c,h,g){return o=vr(7,o,g,c),o.lanes=h,o}function uu(o,c,h,g){return o=vr(22,o,g,c),o.elementType=oe,o.lanes=h,o.stateNode={isHidden:!1},o}function np(o,c,h){return o=vr(6,o,null,c),o.lanes=h,o}function rp(o,c,h){return c=vr(4,o.children!==null?o.children:[],o.key,c),c.lanes=h,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}function Fk(o,c,h,g,y){this.tag=c,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Rf(0),this.expirationTimes=Rf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rf(0),this.identifierPrefix=g,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function ip(o,c,h,g,y,S,D,N,L){return o=new Fk(o,c,h,N,L),c===1?(c=1,S===!0&&(c|=8)):c=0,S=vr(3,null,null,c),o.current=S,S.stateNode=o,S.memoizedState={element:g,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},vh(S),o}function jk(o,c,h){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:M,key:g==null?null:""+g,children:o,containerInfo:c,implementation:h}}function Wb(o){if(!o)return Ji;o=o._reactInternals;e:{if(Os(o)!==o||o.tag!==1)throw Error(n(170));var c=o;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(Vn(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(n(171))}if(o.tag===1){var h=o.type;if(Vn(h))return vy(o,h,c)}return c}function Vb(o,c,h,g,y,S,D,N,L){return o=ip(h,g,!0,o,y,S,D,N,L),o.context=Wb(null),h=o.current,g=Nn(),y=as(h),S=vi(g,y),S.callback=c??null,ns(h,S,y),o.current.lanes=y,Ao(o,y,g),Gn(o,g),o}function du(o,c,h,g){var y=c.current,S=Nn(),D=as(y);return h=Wb(h),c.context===null?c.context=h:c.pendingContext=h,c=vi(S,D),c.payload={element:o},g=g===void 0?null:g,g!==null&&(c.callback=g),o=ns(y,c,D),o!==null&&(Lr(o,y,D,S),Bc(o,y,D)),D}function fu(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function $b(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var h=o.retryLane;o.retryLane=h!==0&&h<c?h:c}}function sp(o,c){$b(o,c),(o=o.alternate)&&$b(o,c)}function zk(){return null}var qb=typeof reportError=="function"?reportError:function(o){console.error(o)};function ap(o){this._internalRoot=o}hu.prototype.render=ap.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(n(409));du(o,c,null,null)},hu.prototype.unmount=ap.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;Hs(function(){du(null,o,null,null)}),c[fi]=null}};function hu(o){this._internalRoot=o}hu.prototype.unstable_scheduleHydration=function(o){if(o){var c=Av();o={blockedOn:null,target:o,priority:c};for(var h=0;h<Yi.length&&c!==0&&c<Yi[h].priority;h++);Yi.splice(h,0,o),h===0&&Mv(o)}};function op(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function pu(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function Gb(){}function Hk(o,c,h,g,y){if(y){if(typeof g=="function"){var S=g;g=function(){var V=fu(D);S.call(V)}}var D=Vb(c,g,o,0,null,!1,!1,"",Gb);return o._reactRootContainer=D,o[fi]=D.current,Wo(o.nodeType===8?o.parentNode:o),Hs(),D}for(;y=o.lastChild;)o.removeChild(y);if(typeof g=="function"){var N=g;g=function(){var V=fu(L);N.call(V)}}var L=ip(o,0,!1,null,null,!1,!1,"",Gb);return o._reactRootContainer=L,o[fi]=L.current,Wo(o.nodeType===8?o.parentNode:o),Hs(function(){du(c,L,h,g)}),L}function gu(o,c,h,g,y){var S=h._reactRootContainer;if(S){var D=S;if(typeof y=="function"){var N=y;y=function(){var L=fu(D);N.call(L)}}du(c,D,o,y)}else D=Hk(h,c,o,y,g);return fu(D)}Dv=function(o){switch(o.tag){case 3:var c=o.stateNode;if(c.current.memoizedState.isDehydrated){var h=ko(c.pendingLanes);h!==0&&(Of(c,h|1),Gn(c,qt()),(st&6)===0&&(Ba=qt()+500,es()))}break;case 13:Hs(function(){var g=mi(o,1);if(g!==null){var y=Nn();Lr(g,o,1,y)}}),sp(o,1)}},Mf=function(o){if(o.tag===13){var c=mi(o,134217728);if(c!==null){var h=Nn();Lr(c,o,134217728,h)}sp(o,134217728)}},kv=function(o){if(o.tag===13){var c=as(o),h=mi(o,c);if(h!==null){var g=Nn();Lr(h,o,c,g)}sp(o,c)}},Av=function(){return dt},Rv=function(o,c){var h=dt;try{return dt=o,c()}finally{dt=h}},Hn=function(o,c,h){switch(c){case"input":if(_t(o,h),c=h.name,h.type==="radio"&&c!=null){for(h=o;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<h.length;c++){var g=h[c];if(g!==o&&g.form===o.form){var y=Mc(g);if(!y)throw Error(n(90));Bt(g),_t(g,y)}}}break;case"textarea":ye(o,h);break;case"select":c=h.value,c!=null&&lt(o,!!h.multiple,c,!1)}},Ge=Xh,Je=Hs;var Uk={usingClientEntryPoint:!1,Events:[qo,Aa,Mc,de,Ie,Xh]},al={findFiberByHostInstance:Ms,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Bk={bundleType:al.bundleType,version:al.version,rendererPackageName:al.rendererPackageName,rendererConfig:al.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:R.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=bv(o),o===null?null:o.stateNode},findFiberByHostInstance:al.findFiberByHostInstance||zk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mu.isDisabled&&mu.supportsFiber)try{hc=mu.inject(Bk),$r=mu}catch{}}return Yn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Uk,Yn.createPortal=function(o,c){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!op(c))throw Error(n(200));return jk(o,c,null,h)},Yn.createRoot=function(o,c){if(!op(o))throw Error(n(299));var h=!1,g="",y=qb;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onRecoverableError!==void 0&&(y=c.onRecoverableError)),c=ip(o,1,!1,null,null,h,!1,g,y),o[fi]=c.current,Wo(o.nodeType===8?o.parentNode:o),new ap(c)},Yn.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(n(188)):(o=Object.keys(o).join(","),Error(n(268,o)));return o=bv(c),o=o===null?null:o.stateNode,o},Yn.flushSync=function(o){return Hs(o)},Yn.hydrate=function(o,c,h){if(!pu(c))throw Error(n(200));return gu(null,o,c,!0,h)},Yn.hydrateRoot=function(o,c,h){if(!op(o))throw Error(n(405));var g=h!=null&&h.hydratedSources||null,y=!1,S="",D=qb;if(h!=null&&(h.unstable_strictMode===!0&&(y=!0),h.identifierPrefix!==void 0&&(S=h.identifierPrefix),h.onRecoverableError!==void 0&&(D=h.onRecoverableError)),c=Vb(c,null,o,1,h??null,y,!1,S,D),o[fi]=c.current,Wo(o),g)for(o=0;o<g.length;o++)h=g[o],y=h._getVersion,y=y(h._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[h,y]:c.mutableSourceEagerHydrationData.push(h,y);return new hu(c)},Yn.render=function(o,c,h){if(!pu(c))throw Error(n(200));return gu(null,o,c,!1,h)},Yn.unmountComponentAtNode=function(o){if(!pu(o))throw Error(n(40));return o._reactRootContainer?(Hs(function(){gu(null,null,o,!1,function(){o._reactRootContainer=null,o[fi]=null})}),!0):!1},Yn.unstable_batchedUpdates=Xh,Yn.unstable_renderSubtreeIntoContainer=function(o,c,h,g){if(!pu(h))throw Error(n(200));if(o==null||o._reactInternals===void 0)throw Error(n(38));return gu(o,c,h,!1,g)},Yn.version="18.3.1-next-f1338f8080-20240426",Yn}var t0;function Lw(){if(t0)return up.exports;t0=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),up.exports=Qk(),up.exports}var n0;function Kk(){if(n0)return vu;n0=1;var t=Lw();return vu.createRoot=t.createRoot,vu.hydrateRoot=t.hydrateRoot,vu}var Zk=Kk();const Xk=Vd(Zk);/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var r0="popstate";function Jk(t={}){function e(r,i){let{pathname:s,search:a,hash:l}=r.location;return tg("",{pathname:s,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Il(i)}return tA(e,n,null,t)}function Rt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Hr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function eA(){return Math.random().toString(36).substring(2,10)}function i0(t,e){return{usr:t.state,key:t.key,idx:e}}function tg(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?mo(e):e,state:n,key:e&&e.key||r||eA()}}function Il({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function mo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function tA(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,l="POP",u=null,d=f();d==null&&(d=0,a.replaceState({...a.state,idx:d},""));function f(){return(a.state||{idx:null}).idx}function p(){l="POP";let w=f(),x=w==null?null:w-d;d=w,u&&u({action:l,location:_.location,delta:x})}function m(w,x){l="PUSH";let C=tg(_.location,w,x);d=f()+1;let k=i0(C,d),R=_.createHref(C);try{a.pushState(k,"",R)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;i.location.assign(R)}s&&u&&u({action:l,location:_.location,delta:1})}function v(w,x){l="REPLACE";let C=tg(_.location,w,x);d=f();let k=i0(C,d),R=_.createHref(C);a.replaceState(k,"",R),s&&u&&u({action:l,location:_.location,delta:0})}function b(w){return nA(w)}let _={get action(){return l},get location(){return t(i,a)},listen(w){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(r0,p),u=w,()=>{i.removeEventListener(r0,p),u=null}},createHref(w){return e(i,w)},createURL:b,encodeLocation(w){let x=b(w);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:m,replace:v,go(w){return a.go(w)}};return _}function nA(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Rt(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Il(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function Fw(t,e,n="/"){return rA(t,e,n,!1)}function rA(t,e,n,r){let i=typeof e=="string"?mo(e):e,s=ji(i.pathname||"/",n);if(s==null)return null;let a=jw(t);iA(a);let l=null;for(let u=0;l==null&&u<a.length;++u){let d=gA(s);l=hA(a[u],d,r)}return l}function jw(t,e=[],n=[],r="",i=!1){let s=(a,l,u=i,d)=>{let f={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(r)&&u)return;Rt(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length)}let p=Ni([r,f.relativePath]),m=n.concat(f);a.children&&a.children.length>0&&(Rt(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),jw(a.children,e,m,p,u)),!(a.path==null&&!a.index)&&e.push({path:p,score:dA(p,a.index),routesMeta:m})};return t.forEach((a,l)=>{if(a.path===""||!a.path?.includes("?"))s(a,l);else for(let u of zw(a.path))s(a,l,!0,u)}),e}function zw(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=zw(r.join("/")),l=[];return l.push(...a.map(u=>u===""?s:[s,u].join("/"))),i&&l.push(...a),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function iA(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:fA(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var sA=/^:[\w-]+$/,aA=3,oA=2,lA=1,cA=10,uA=-2,s0=t=>t==="*";function dA(t,e){let n=t.split("/"),r=n.length;return n.some(s0)&&(r+=uA),e&&(r+=oA),n.filter(i=>!s0(i)).reduce((i,s)=>i+(sA.test(s)?aA:s===""?lA:cA),r)}function fA(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function hA(t,e,n=!1){let{routesMeta:r}=t,i={},s="/",a=[];for(let l=0;l<r.length;++l){let u=r[l],d=l===r.length-1,f=s==="/"?e:e.slice(s.length)||"/",p=ud({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),m=u.route;if(!p&&d&&n&&!r[r.length-1].route.index&&(p=ud({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},f)),!p)return null;Object.assign(i,p.params),a.push({params:i,pathname:Ni([s,p.pathname]),pathnameBase:bA(Ni([s,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(s=Ni([s,p.pathnameBase]))}return a}function ud(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=pA(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((d,{paramName:f,isOptional:p},m)=>{if(f==="*"){let b=l[m]||"";a=s.slice(0,s.length-b.length).replace(/(.)\/+$/,"$1")}const v=l[m];return p&&!v?d[f]=void 0:d[f]=(v||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:a,pattern:t}}function pA(t,e=!1,n=!0){Hr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function gA(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Hr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function ji(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function mA(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?mo(t):t;return{pathname:n?n.startsWith("/")?n:vA(n,e):e,search:_A(r),hash:SA(i)}}function vA(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function hp(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function yA(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Yg(t){let e=yA(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function Qg(t,e,n,r=!1){let i;typeof t=="string"?i=mo(t):(i={...t},Rt(!i.pathname||!i.pathname.includes("?"),hp("?","pathname","search",i)),Rt(!i.pathname||!i.pathname.includes("#"),hp("#","pathname","hash",i)),Rt(!i.search||!i.search.includes("#"),hp("#","search","hash",i)));let s=t===""||i.pathname==="",a=s?"/":i.pathname,l;if(a==null)l=n;else{let p=e.length-1;if(!r&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),p-=1;i.pathname=m.join("/")}l=p>=0?e[p]:"/"}let u=mA(i,l),d=a&&a!=="/"&&a.endsWith("/"),f=(s||a===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}var Ni=t=>t.join("/").replace(/\/\/+/g,"/"),bA=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),_A=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,SA=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function wA(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var Hw=["POST","PUT","PATCH","DELETE"];new Set(Hw);var xA=["GET",...Hw];new Set(xA);var vo=T.createContext(null);vo.displayName="DataRouter";var $d=T.createContext(null);$d.displayName="DataRouterState";T.createContext(!1);var Uw=T.createContext({isTransitioning:!1});Uw.displayName="ViewTransition";var EA=T.createContext(new Map);EA.displayName="Fetchers";var CA=T.createContext(null);CA.displayName="Await";var Wr=T.createContext(null);Wr.displayName="Navigation";var Xl=T.createContext(null);Xl.displayName="Location";var Ar=T.createContext({outlet:null,matches:[],isDataRoute:!1});Ar.displayName="Route";var Kg=T.createContext(null);Kg.displayName="RouteError";function TA(t,{relative:e}={}){Rt(yo(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=T.useContext(Wr),{hash:i,pathname:s,search:a}=Jl(t,{relative:e}),l=s;return n!=="/"&&(l=s==="/"?n:Ni([n,s])),r.createHref({pathname:l,search:a,hash:i})}function yo(){return T.useContext(Xl)!=null}function Ui(){return Rt(yo(),"useLocation() may be used only in the context of a <Router> component."),T.useContext(Xl).location}var Bw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Ww(t){T.useContext(Wr).static||T.useLayoutEffect(t)}function ci(){let{isDataRoute:t}=T.useContext(Ar);return t?UA():DA()}function DA(){Rt(yo(),"useNavigate() may be used only in the context of a <Router> component.");let t=T.useContext(vo),{basename:e,navigator:n}=T.useContext(Wr),{matches:r}=T.useContext(Ar),{pathname:i}=Ui(),s=JSON.stringify(Yg(r)),a=T.useRef(!1);return Ww(()=>{a.current=!0}),T.useCallback((u,d={})=>{if(Hr(a.current,Bw),!a.current)return;if(typeof u=="number"){n.go(u);return}let f=Qg(u,JSON.parse(s),i,d.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Ni([e,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[e,n,s,i,t])}var kA=T.createContext(null);function AA(t){let e=T.useContext(Ar).outlet;return T.useMemo(()=>e&&T.createElement(kA.Provider,{value:t},e),[e,t])}function qd(){let{matches:t}=T.useContext(Ar),e=t[t.length-1];return e?e.params:{}}function Jl(t,{relative:e}={}){let{matches:n}=T.useContext(Ar),{pathname:r}=Ui(),i=JSON.stringify(Yg(n));return T.useMemo(()=>Qg(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function RA(t,e){return Vw(t,e)}function Vw(t,e,n,r,i){Rt(yo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=T.useContext(Wr),{matches:a}=T.useContext(Ar),l=a[a.length-1],u=l?l.params:{},d=l?l.pathname:"/",f=l?l.pathnameBase:"/",p=l&&l.route;{let C=p&&p.path||"";$w(d,!p||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let m=Ui(),v;if(e){let C=typeof e=="string"?mo(e):e;Rt(f==="/"||C.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${C.pathname}" was given in the \`location\` prop.`),v=C}else v=m;let b=v.pathname||"/",_=b;if(f!=="/"){let C=f.replace(/^\//,"").split("/");_="/"+b.replace(/^\//,"").split("/").slice(C.length).join("/")}let w=Fw(t,{pathname:_});Hr(p||w!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),Hr(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=PA(w&&w.map(C=>Object.assign({},C,{params:Object.assign({},u,C.params),pathname:Ni([f,s.encodeLocation?s.encodeLocation(C.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?f:Ni([f,s.encodeLocation?s.encodeLocation(C.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathnameBase])})),a,n,r,i);return e&&x?T.createElement(Xl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},x):x}function OA(){let t=HA(),e=wA(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=T.createElement(T.Fragment,null,T.createElement("p",null," Hey developer "),T.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",T.createElement("code",{style:s},"ErrorBoundary")," or"," ",T.createElement("code",{style:s},"errorElement")," prop on your route.")),T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},e),n?T.createElement("pre",{style:i},n):null,a)}var MA=T.createElement(OA,null),NA=class extends T.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?T.createElement(Ar.Provider,{value:this.props.routeContext},T.createElement(Kg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function IA({routeContext:t,match:e,children:n}){let r=T.useContext(vo);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),T.createElement(Ar.Provider,{value:t},n)}function PA(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,a=n?.errors;if(a!=null){let d=s.findIndex(f=>f.route.id&&a?.[f.route.id]!==void 0);Rt(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,d+1))}let l=!1,u=-1;if(n)for(let d=0;d<s.length;d++){let f=s[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:p,errors:m}=n,v=f.route.loader&&!p.hasOwnProperty(f.route.id)&&(!m||m[f.route.id]===void 0);if(f.route.lazy||v){l=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}return s.reduceRight((d,f,p)=>{let m,v=!1,b=null,_=null;n&&(m=a&&f.route.id?a[f.route.id]:void 0,b=f.route.errorElement||MA,l&&(u<0&&p===0?($w("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,_=null):u===p&&(v=!0,_=f.route.hydrateFallbackElement||null)));let w=e.concat(s.slice(0,p+1)),x=()=>{let C;return m?C=b:v?C=_:f.route.Component?C=T.createElement(f.route.Component,null):f.route.element?C=f.route.element:C=d,T.createElement(IA,{match:f,routeContext:{outlet:d,matches:w,isDataRoute:n!=null},children:C})};return n&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?T.createElement(NA,{location:n.location,revalidation:n.revalidation,component:b,error:m,children:x(),routeContext:{outlet:null,matches:w,isDataRoute:!0},unstable_onError:r}):x()},null)}function Zg(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function LA(t){let e=T.useContext(vo);return Rt(e,Zg(t)),e}function FA(t){let e=T.useContext($d);return Rt(e,Zg(t)),e}function jA(t){let e=T.useContext(Ar);return Rt(e,Zg(t)),e}function Xg(t){let e=jA(t),n=e.matches[e.matches.length-1];return Rt(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function zA(){return Xg("useRouteId")}function HA(){let t=T.useContext(Kg),e=FA("useRouteError"),n=Xg("useRouteError");return t!==void 0?t:e.errors?.[n]}function UA(){let{router:t}=LA("useNavigate"),e=Xg("useNavigate"),n=T.useRef(!1);return Ww(()=>{n.current=!0}),T.useCallback(async(i,s={})=>{Hr(n.current,Bw),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...s}))},[t,e])}var a0={};function $w(t,e,n){!e&&!a0[t]&&(a0[t]=!0,Hr(!1,n))}T.memo(BA);function BA({routes:t,future:e,state:n,unstable_onError:r}){return Vw(t,void 0,n,r,e)}function qw({to:t,replace:e,state:n,relative:r}){Rt(yo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=T.useContext(Wr);Hr(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=T.useContext(Ar),{pathname:a}=Ui(),l=ci(),u=Qg(t,Yg(s),a,r==="path"),d=JSON.stringify(u);return T.useEffect(()=>{l(JSON.parse(d),{replace:e,state:n,relative:r})},[l,d,r,e,n]),null}function Gw(t){return AA(t.context)}function sn(t){Rt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function WA({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){Rt(!yo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),l=T.useMemo(()=>({basename:a,navigator:i,static:s,future:{}}),[a,i,s]);typeof n=="string"&&(n=mo(n));let{pathname:u="/",search:d="",hash:f="",state:p=null,key:m="default"}=n,v=T.useMemo(()=>{let b=ji(u,a);return b==null?null:{location:{pathname:b,search:d,hash:f,state:p,key:m},navigationType:r}},[a,u,d,f,p,m,r]);return Hr(v!=null,`<Router basename="${a}"> is not able to match the URL "${u}${d}${f}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:T.createElement(Wr.Provider,{value:l},T.createElement(Xl.Provider,{children:e,value:v}))}function VA({children:t,location:e}){return RA(ng(t),e)}function ng(t,e=[]){let n=[];return T.Children.forEach(t,(r,i)=>{if(!T.isValidElement(r))return;let s=[...e,i];if(r.type===T.Fragment){n.push.apply(n,ng(r.props.children,s));return}Rt(r.type===sn,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Rt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=ng(r.props.children,s)),n.push(a)}),n}var Qu="get",Ku="application/x-www-form-urlencoded";function Gd(t){return t!=null&&typeof t.tagName=="string"}function $A(t){return Gd(t)&&t.tagName.toLowerCase()==="button"}function qA(t){return Gd(t)&&t.tagName.toLowerCase()==="form"}function GA(t){return Gd(t)&&t.tagName.toLowerCase()==="input"}function YA(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function QA(t,e){return t.button===0&&(!e||e==="_self")&&!YA(t)}var yu=null;function KA(){if(yu===null)try{new FormData(document.createElement("form"),0),yu=!1}catch{yu=!0}return yu}var ZA=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function pp(t){return t!=null&&!ZA.has(t)?(Hr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ku}"`),null):t}function XA(t,e){let n,r,i,s,a;if(qA(t)){let l=t.getAttribute("action");r=l?ji(l,e):null,n=t.getAttribute("method")||Qu,i=pp(t.getAttribute("enctype"))||Ku,s=new FormData(t)}else if($A(t)||GA(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||l.getAttribute("action");if(r=u?ji(u,e):null,n=t.getAttribute("formmethod")||l.getAttribute("method")||Qu,i=pp(t.getAttribute("formenctype"))||pp(l.getAttribute("enctype"))||Ku,s=new FormData(l,t),!KA()){let{name:d,type:f,value:p}=t;if(f==="image"){let m=d?`${d}.`:"";s.append(`${m}x`,"0"),s.append(`${m}y`,"0")}else d&&s.append(d,p)}}else{if(Gd(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Qu,r=null,i=Ku,a=t}return s&&i==="text/plain"&&(a=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Jg(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function JA(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&ji(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function eR(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function tR(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function nR(t,e,n){let r=await Promise.all(t.map(async i=>{let s=e.routes[i.route.id];if(s){let a=await eR(s,n);return a.links?a.links():[]}return[]}));return aR(r.flat(1).filter(tR).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function o0(t,e,n,r,i,s){let a=(u,d)=>n[d]?u.route.id!==n[d].route.id:!0,l=(u,d)=>n[d].pathname!==u.pathname||n[d].route.path?.endsWith("*")&&n[d].params["*"]!==u.params["*"];return s==="assets"?e.filter((u,d)=>a(u,d)||l(u,d)):s==="data"?e.filter((u,d)=>{let f=r.routes[u.route.id];if(!f||!f.hasLoader)return!1;if(a(u,d)||l(u,d))return!0;if(u.route.shouldRevalidate){let p=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function rR(t,e,{includeHydrateFallback:n}={}){return iR(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function iR(t){return[...new Set(t)]}function sR(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function aR(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let s=JSON.stringify(sR(i));return n.has(s)||(n.add(s),r.push({key:s,link:i})),r},[])}function Yw(){let t=T.useContext(vo);return Jg(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function oR(){let t=T.useContext($d);return Jg(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var em=T.createContext(void 0);em.displayName="FrameworkContext";function Qw(){let t=T.useContext(em);return Jg(t,"You must render this element inside a <HydratedRouter> element"),t}function lR(t,e){let n=T.useContext(em),[r,i]=T.useState(!1),[s,a]=T.useState(!1),{onFocus:l,onBlur:u,onMouseEnter:d,onMouseLeave:f,onTouchStart:p}=e,m=T.useRef(null);T.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let _=x=>{x.forEach(C=>{a(C.isIntersecting)})},w=new IntersectionObserver(_,{threshold:.5});return m.current&&w.observe(m.current),()=>{w.disconnect()}}},[t]),T.useEffect(()=>{if(r){let _=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(_)}}},[r]);let v=()=>{i(!0)},b=()=>{i(!1),a(!1)};return n?t!=="intent"?[s,m,{}]:[s,m,{onFocus:ll(l,v),onBlur:ll(u,b),onMouseEnter:ll(d,v),onMouseLeave:ll(f,b),onTouchStart:ll(p,v)}]:[!1,m,{}]}function ll(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function cR({page:t,...e}){let{router:n}=Yw(),r=T.useMemo(()=>Fw(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?T.createElement(dR,{page:t,matches:r,...e}):null}function uR(t){let{manifest:e,routeModules:n}=Qw(),[r,i]=T.useState([]);return T.useEffect(()=>{let s=!1;return nR(t,e,n).then(a=>{s||i(a)}),()=>{s=!0}},[t,e,n]),r}function dR({page:t,matches:e,...n}){let r=Ui(),{manifest:i,routeModules:s}=Qw(),{basename:a}=Yw(),{loaderData:l,matches:u}=oR(),d=T.useMemo(()=>o0(t,e,u,i,r,"data"),[t,e,u,i,r]),f=T.useMemo(()=>o0(t,e,u,i,r,"assets"),[t,e,u,i,r]),p=T.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let b=new Set,_=!1;if(e.forEach(x=>{let C=i.routes[x.route.id];!C||!C.hasLoader||(!d.some(k=>k.route.id===x.route.id)&&x.route.id in l&&s[x.route.id]?.shouldRevalidate||C.hasClientLoader?_=!0:b.add(x.route.id))}),b.size===0)return[];let w=JA(t,a,"data");return _&&b.size>0&&w.searchParams.set("_routes",e.filter(x=>b.has(x.route.id)).map(x=>x.route.id).join(",")),[w.pathname+w.search]},[a,l,r,i,d,e,t,s]),m=T.useMemo(()=>rR(f,i),[f,i]),v=uR(f);return T.createElement(T.Fragment,null,p.map(b=>T.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...n})),m.map(b=>T.createElement("link",{key:b,rel:"modulepreload",href:b,...n})),v.map(({key:b,link:_})=>T.createElement("link",{key:b,nonce:n.nonce,..._})))}function fR(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Kw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Kw&&(window.__reactRouterVersion="7.9.4")}catch{}function hR({basename:t,children:e,window:n}){let r=T.useRef();r.current==null&&(r.current=Jk({window:n,v5Compat:!0}));let i=r.current,[s,a]=T.useState({action:i.action,location:i.location}),l=T.useCallback(u=>{T.startTransition(()=>a(u))},[a]);return T.useLayoutEffect(()=>i.listen(l),[i,l]),T.createElement(WA,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:i})}var Zw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,er=T.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:a,state:l,target:u,to:d,preventScrollReset:f,viewTransition:p,...m},v){let{basename:b}=T.useContext(Wr),_=typeof d=="string"&&Zw.test(d),w,x=!1;if(typeof d=="string"&&_&&(w=d,Kw))try{let z=new URL(window.location.href),B=d.startsWith("//")?new URL(z.protocol+d):new URL(d),$=ji(B.pathname,b);B.origin===z.origin&&$!=null?d=$+B.search+B.hash:x=!0}catch{Hr(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let C=TA(d,{relative:i}),[k,R,A]=lR(r,m),M=vR(d,{replace:a,state:l,target:u,preventScrollReset:f,relative:i,viewTransition:p});function P(z){e&&e(z),z.defaultPrevented||M(z)}let O=T.createElement("a",{...m,...A,href:w||C,onClick:x||s?e:P,ref:fR(v,R),target:u,"data-discover":!_&&n==="render"?"true":void 0});return k&&!_?T.createElement(T.Fragment,null,O,T.createElement(cR,{page:C})):O});er.displayName="Link";var pR=T.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:a,viewTransition:l,children:u,...d},f){let p=Jl(a,{relative:d.relative}),m=Ui(),v=T.useContext($d),{navigator:b,basename:_}=T.useContext(Wr),w=v!=null&&wR(p)&&l===!0,x=b.encodeLocation?b.encodeLocation(p).pathname:p.pathname,C=m.pathname,k=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;n||(C=C.toLowerCase(),k=k?k.toLowerCase():null,x=x.toLowerCase()),k&&_&&(k=ji(k,_)||k);const R=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let A=C===x||!i&&C.startsWith(x)&&C.charAt(R)==="/",M=k!=null&&(k===x||!i&&k.startsWith(x)&&k.charAt(x.length)==="/"),P={isActive:A,isPending:M,isTransitioning:w},O=A?e:void 0,z;typeof r=="function"?z=r(P):z=[r,A?"active":null,M?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let B=typeof s=="function"?s(P):s;return T.createElement(er,{...d,"aria-current":O,className:z,ref:f,style:B,to:a,viewTransition:l},typeof u=="function"?u(P):u)});pR.displayName="NavLink";var gR=T.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:s,method:a=Qu,action:l,onSubmit:u,relative:d,preventScrollReset:f,viewTransition:p,...m},v)=>{let b=_R(),_=SR(l,{relative:d}),w=a.toLowerCase()==="get"?"get":"post",x=typeof l=="string"&&Zw.test(l),C=k=>{if(u&&u(k),k.defaultPrevented)return;k.preventDefault();let R=k.nativeEvent.submitter,A=R?.getAttribute("formmethod")||a;b(R||k.currentTarget,{fetcherKey:e,method:A,navigate:n,replace:i,state:s,relative:d,preventScrollReset:f,viewTransition:p})};return T.createElement("form",{ref:v,method:w,action:_,onSubmit:r?u:C,...m,"data-discover":!x&&t==="render"?"true":void 0})});gR.displayName="Form";function mR(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Xw(t){let e=T.useContext(vo);return Rt(e,mR(t)),e}function vR(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:a}={}){let l=ci(),u=Ui(),d=Jl(t,{relative:s});return T.useCallback(f=>{if(QA(f,e)){f.preventDefault();let p=n!==void 0?n:Il(u)===Il(d);l(t,{replace:p,state:r,preventScrollReset:i,relative:s,viewTransition:a})}},[u,l,d,n,r,e,t,i,s,a])}var yR=0,bR=()=>`__${String(++yR)}__`;function _R(){let{router:t}=Xw("useSubmit"),{basename:e}=T.useContext(Wr),n=zA();return T.useCallback(async(r,i={})=>{let{action:s,method:a,encType:l,formData:u,body:d}=XA(r,e);if(i.navigate===!1){let f=i.fetcherKey||bR();await t.fetch(f,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:u,body:d,formMethod:i.method||a,formEncType:i.encType||l,flushSync:i.flushSync})}else await t.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:u,body:d,formMethod:i.method||a,formEncType:i.encType||l,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function SR(t,{relative:e}={}){let{basename:n}=T.useContext(Wr),r=T.useContext(Ar);Rt(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...Jl(t||".",{relative:e})},a=Ui();if(t==null){s.search=a.search;let l=new URLSearchParams(s.search),u=l.getAll("index");if(u.some(f=>f==="")){l.delete("index"),u.filter(p=>p).forEach(p=>l.append("index",p));let f=l.toString();s.search=f?`?${f}`:""}}return(!t||t===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Ni([n,s.pathname])),Il(s)}function wR(t,{relative:e}={}){let n=T.useContext(Uw);Rt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Xw("useViewTransitionState"),i=Jl(t,{relative:e});if(!n.isTransitioning)return!1;let s=ji(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=ji(n.nextLocation.pathname,r)||n.nextLocation.pathname;return ud(i.pathname,a)!=null||ud(i.pathname,s)!=null}var Ti=Lw();const xR=Vd(Ti);var bo=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ER={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},CR=class{#e=ER;#t=!1;setTimeoutProvider(t){this.#e=t}setTimeout(t,e){return this.#e.setTimeout(t,e)}clearTimeout(t){this.#e.clearTimeout(t)}setInterval(t,e){return this.#e.setInterval(t,e)}clearInterval(t){this.#e.clearInterval(t)}},ea=new CR;function TR(t){setTimeout(t,0)}var la=typeof window>"u"||"Deno"in globalThis;function In(){}function DR(t,e){return typeof t=="function"?t(e):t}function rg(t){return typeof t=="number"&&t>=0&&t!==1/0}function Jw(t,e){return Math.max(t+(e||0)-Date.now(),0)}function bs(t,e){return typeof t=="function"?t(e):t}function Er(t,e){return typeof t=="function"?t(e):t}function l0(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:a,stale:l}=t;if(a){if(r){if(e.queryHash!==tm(a,e.options))return!1}else if(!Pl(e.queryKey,a))return!1}if(n!=="all"){const u=e.isActive();if(n==="active"&&!u||n==="inactive"&&u)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||i&&i!==e.state.fetchStatus||s&&!s(e))}function c0(t,e){const{exact:n,status:r,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(ca(e.options.mutationKey)!==ca(s))return!1}else if(!Pl(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function tm(t,e){return(e?.queryKeyHashFn||ca)(t)}function ca(t){return JSON.stringify(t,(e,n)=>ig(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function Pl(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Pl(t[n],e[n])):!1}var kR=Object.prototype.hasOwnProperty;function ex(t,e){if(t===e)return t;const n=u0(t)&&u0(e);if(!n&&!(ig(t)&&ig(e)))return e;const i=(n?t:Object.keys(t)).length,s=n?e:Object.keys(e),a=s.length,l=n?new Array(a):{};let u=0;for(let d=0;d<a;d++){const f=n?d:s[d],p=t[f],m=e[f];if(p===m){l[f]=p,(n?d<i:kR.call(t,f))&&u++;continue}if(p===null||m===null||typeof p!="object"||typeof m!="object"){l[f]=m;continue}const v=ex(p,m);l[f]=v,v===p&&u++}return i===a&&u===i?t:l}function dd(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function u0(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function ig(t){if(!d0(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!d0(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function d0(t){return Object.prototype.toString.call(t)==="[object Object]"}function AR(t){return new Promise(e=>{ea.setTimeout(e,t)})}function sg(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?ex(t,e):e}function RR(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function OR(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var nm=Symbol();function tx(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===nm?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function nx(t,e){return typeof t=="function"?t(...e):!!t}var MR=class extends bo{#e;#t;#n;constructor(){super(),this.#n=t=>{if(!la&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},rm=new MR;function ag(){let t,e;const n=new Promise((i,s)=>{t=i,e=s});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}var NR=TR;function IR(){let t=[],e=0,n=l=>{l()},r=l=>{l()},i=NR;const s=l=>{e?t.push(l):i(()=>{n(l)})},a=()=>{const l=t;t=[],l.length&&i(()=>{r(()=>{l.forEach(u=>{n(u)})})})};return{batch:l=>{let u;e++;try{u=l()}finally{e--,e||a()}return u},batchCalls:l=>(...u)=>{s(()=>{l(...u)})},schedule:s,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{i=l}}}var ln=IR(),PR=class extends bo{#e=!0;#t;#n;constructor(){super(),this.#n=t=>{if(!la&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(n=>{n(t)}))}isOnline(){return this.#e}},fd=new PR;function LR(t){return Math.min(1e3*2**t,3e4)}function rx(t){return(t??"online")==="online"?fd.isOnline():!0}var og=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function ix(t){let e=!1,n=0,r;const i=ag(),s=()=>i.status!=="pending",a=_=>{if(!s()){const w=new og(_);m(w),t.onCancel?.(w)}},l=()=>{e=!0},u=()=>{e=!1},d=()=>rm.isFocused()&&(t.networkMode==="always"||fd.isOnline())&&t.canRun(),f=()=>rx(t.networkMode)&&t.canRun(),p=_=>{s()||(r?.(),i.resolve(_))},m=_=>{s()||(r?.(),i.reject(_))},v=()=>new Promise(_=>{r=w=>{(s()||d())&&_(w)},t.onPause?.()}).then(()=>{r=void 0,s()||t.onContinue?.()}),b=()=>{if(s())return;let _;const w=n===0?t.initialPromise:void 0;try{_=w??t.fn()}catch(x){_=Promise.reject(x)}Promise.resolve(_).then(p).catch(x=>{if(s())return;const C=t.retry??(la?0:3),k=t.retryDelay??LR,R=typeof k=="function"?k(n,x):k,A=C===!0||typeof C=="number"&&n<C||typeof C=="function"&&C(n,x);if(e||!A){m(x);return}n++,t.onFail?.(n,x),AR(R).then(()=>d()?void 0:v()).then(()=>{e?m(x):b()})})};return{promise:i,status:()=>i.status,cancel:a,continue:()=>(r?.(),i),cancelRetry:l,continueRetry:u,canStart:f,start:()=>(f()?b():v().then(b),i)}}var sx=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),rg(this.gcTime)&&(this.#e=ea.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(la?1/0:300*1e3))}clearGcTimeout(){this.#e&&(ea.clearTimeout(this.#e),this.#e=void 0)}},FR=class extends sx{#e;#t;#n;#i;#r;#a;#o;constructor(t){super(),this.#o=!1,this.#a=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#i=t.client,this.#n=this.#i.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=f0(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(t){if(this.options={...this.#a,...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const e=f0(this.options);e.data!==void 0&&(this.setData(e.data,{updatedAt:e.dataUpdatedAt,manual:!0}),this.#e=e)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(t,e){const n=sg(this.state.data,t,this.options);return this.#s({data:n,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),n}setState(t,e){this.#s({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#r?.promise;return this.#r?.cancel(t),e?e.then(In).catch(In):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>Er(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===nm||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>bs(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Jw(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#r&&(this.#o?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}async fetch(t,e){if(this.state.fetchStatus!=="idle"&&this.#r?.status()!=="rejected"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(t&&this.setOptions(t),!this.options.queryFn){const l=this.observers.find(u=>u.options.queryFn);l&&this.setOptions(l.options)}const n=new AbortController,r=l=>{Object.defineProperty(l,"signal",{enumerable:!0,get:()=>(this.#o=!0,n.signal)})},i=()=>{const l=tx(this.options,e),d=(()=>{const f={client:this.#i,queryKey:this.queryKey,meta:this.meta};return r(f),f})();return this.#o=!1,this.options.persister?this.options.persister(l,d,this):l(d)},a=(()=>{const l={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#i,state:this.state,fetchFn:i};return r(l),l})();this.options.behavior?.onFetch(a,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==a.fetchOptions?.meta)&&this.#s({type:"fetch",meta:a.fetchOptions?.meta}),this.#r=ix({initialPromise:e?.initialPromise,fn:a.fetchFn,onCancel:l=>{l instanceof og&&l.revert&&this.setState({...this.#t,fetchStatus:"idle"}),n.abort()},onFail:(l,u)=>{this.#s({type:"failed",failureCount:l,error:u})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0});try{const l=await this.#r.start();if(l===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(l),this.#n.config.onSuccess?.(l,this),this.#n.config.onSettled?.(l,this.state.error,this),l}catch(l){if(l instanceof og){if(l.silent)return this.#r.promise;if(l.revert){if(this.state.data===void 0)throw l;return this.state.data}}throw this.#s({type:"error",error:l}),this.#n.config.onError?.(l,this),this.#n.config.onSettled?.(this.state.data,l,this),l}finally{this.scheduleGc()}}#s(t){const e=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...ax(n.data,this.options),fetchMeta:t.meta??null};case"success":const r={...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=t.manual?r:void 0,r;case"error":const i=t.error;return{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=e(this.state),ln.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:t})})}};function ax(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:rx(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function f0(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var jR=class extends bo{constructor(t,e){super(),this.options=e,this.#e=t,this.#s=null,this.#o=ag(),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#n=void 0;#i=void 0;#r;#a;#o;#s;#g;#f;#h;#c;#u;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),h0(this.#t,this.options)?this.#d():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return lg(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return lg(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#_(),this.#S(),this.#t.removeObserver(this)}setOptions(t){const e=this.options,n=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Er(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#w(),this.#t.setOptions(this.options),e._defaulted&&!dd(this.options,e)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const r=this.hasListeners();r&&p0(this.#t,n,this.options,e)&&this.#d(),this.updateResult(),r&&(this.#t!==n||Er(this.options.enabled,this.#t)!==Er(e.enabled,this.#t)||bs(this.options.staleTime,this.#t)!==bs(e.staleTime,this.#t))&&this.#m();const i=this.#v();r&&(this.#t!==n||Er(this.options.enabled,this.#t)!==Er(e.enabled,this.#t)||i!==this.#l)&&this.#y(i)}getOptimisticResult(t){const e=this.#e.getQueryCache().build(this.#e,t),n=this.createResult(e,t);return HR(this,n)&&(this.#i=n,this.#a=this.options,this.#r=this.#t.state),n}getCurrentResult(){return this.#i}trackResult(t,e){return new Proxy(t,{get:(n,r)=>(this.trackProp(r),e?.(r),r==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#o.status==="pending"&&this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,r))})}trackProp(t){this.#p.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#e.defaultQueryOptions(t),n=this.#e.getQueryCache().build(this.#e,e);return n.fetch().then(()=>this.createResult(n,e))}fetch(t){return this.#d({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#i))}#d(t){this.#w();let e=this.#t.fetch(this.options,t);return t?.throwOnError||(e=e.catch(In)),e}#m(){this.#_();const t=bs(this.options.staleTime,this.#t);if(la||this.#i.isStale||!rg(t))return;const n=Jw(this.#i.dataUpdatedAt,t)+1;this.#c=ea.setTimeout(()=>{this.#i.isStale||this.updateResult()},n)}#v(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#y(t){this.#S(),this.#l=t,!(la||Er(this.options.enabled,this.#t)===!1||!rg(this.#l)||this.#l===0)&&(this.#u=ea.setInterval(()=>{(this.options.refetchIntervalInBackground||rm.isFocused())&&this.#d()},this.#l))}#b(){this.#m(),this.#y(this.#v())}#_(){this.#c&&(ea.clearTimeout(this.#c),this.#c=void 0)}#S(){this.#u&&(ea.clearInterval(this.#u),this.#u=void 0)}createResult(t,e){const n=this.#t,r=this.options,i=this.#i,s=this.#r,a=this.#a,u=t!==n?t.state:this.#n,{state:d}=t;let f={...d},p=!1,m;if(e._optimisticResults){const O=this.hasListeners(),z=!O&&h0(t,e),B=O&&p0(t,n,e,r);(z||B)&&(f={...f,...ax(d.data,t.options)}),e._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:v,errorUpdatedAt:b,status:_}=f;m=f.data;let w=!1;if(e.placeholderData!==void 0&&m===void 0&&_==="pending"){let O;i?.isPlaceholderData&&e.placeholderData===a?.placeholderData?(O=i.data,w=!0):O=typeof e.placeholderData=="function"?e.placeholderData(this.#h?.state.data,this.#h):e.placeholderData,O!==void 0&&(_="success",m=sg(i?.data,O,e),p=!0)}if(e.select&&m!==void 0&&!w)if(i&&m===s?.data&&e.select===this.#g)m=this.#f;else try{this.#g=e.select,m=e.select(m),m=sg(i?.data,m,e),this.#f=m,this.#s=null}catch(O){this.#s=O}this.#s&&(v=this.#s,m=this.#f,b=Date.now(),_="error");const x=f.fetchStatus==="fetching",C=_==="pending",k=_==="error",R=C&&x,A=m!==void 0,P={status:_,fetchStatus:f.fetchStatus,isPending:C,isSuccess:_==="success",isError:k,isInitialLoading:R,isLoading:R,data:m,dataUpdatedAt:f.dataUpdatedAt,error:v,errorUpdatedAt:b,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:x,isRefetching:x&&!C,isLoadingError:k&&!A,isPaused:f.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:k&&A,isStale:im(t,e),refetch:this.refetch,promise:this.#o,isEnabled:Er(e.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const O=$=>{P.status==="error"?$.reject(P.error):P.data!==void 0&&$.resolve(P.data)},z=()=>{const $=this.#o=P.promise=ag();O($)},B=this.#o;switch(B.status){case"pending":t.queryHash===n.queryHash&&O(B);break;case"fulfilled":(P.status==="error"||P.data!==B.value)&&z();break;case"rejected":(P.status!=="error"||P.error!==B.reason)&&z();break}}return P}updateResult(){const t=this.#i,e=this.createResult(this.#t,this.options);if(this.#r=this.#t.state,this.#a=this.options,this.#r.data!==void 0&&(this.#h=this.#t),dd(e,t))return;this.#i=e;const n=()=>{if(!t)return!0;const{notifyOnChangeProps:r}=this.options,i=typeof r=="function"?r():r;if(i==="all"||!i&&!this.#p.size)return!0;const s=new Set(i??this.#p);return this.options.throwOnError&&s.add("error"),Object.keys(this.#i).some(a=>{const l=a;return this.#i[l]!==t[l]&&s.has(l)})};this.#x({listeners:n()})}#w(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const e=this.#t;this.#t=t,this.#n=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#x(t){ln.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(this.#i)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function zR(t,e){return Er(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function h0(t,e){return zR(t,e)||t.state.data!==void 0&&lg(t,e,e.refetchOnMount)}function lg(t,e,n){if(Er(e.enabled,t)!==!1&&bs(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&im(t,e)}return!1}function p0(t,e,n,r){return(t!==e||Er(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&im(t,n)}function im(t,e){return Er(e.enabled,t)!==!1&&t.isStaleByTime(bs(e.staleTime,t))}function HR(t,e){return!dd(t.getCurrentResult(),e)}function g0(t){return{onFetch:(e,n)=>{const r=e.options,i=e.fetchOptions?.meta?.fetchMore?.direction,s=e.state.data?.pages||[],a=e.state.data?.pageParams||[];let l={pages:[],pageParams:[]},u=0;const d=async()=>{let f=!1;const p=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(e.signal.aborted?f=!0:e.signal.addEventListener("abort",()=>{f=!0}),e.signal)})},m=tx(e.options,e.fetchOptions),v=async(b,_,w)=>{if(f)return Promise.reject();if(_==null&&b.pages.length)return Promise.resolve(b);const C=(()=>{const M={client:e.client,queryKey:e.queryKey,pageParam:_,direction:w?"backward":"forward",meta:e.options.meta};return p(M),M})(),k=await m(C),{maxPages:R}=e.options,A=w?OR:RR;return{pages:A(b.pages,k,R),pageParams:A(b.pageParams,_,R)}};if(i&&s.length){const b=i==="backward",_=b?UR:m0,w={pages:s,pageParams:a},x=_(r,w);l=await v(w,x,b)}else{const b=t??s.length;do{const _=u===0?a[0]??r.initialPageParam:m0(r,l);if(u>0&&_==null)break;l=await v(l,_),u++}while(u<b)}return l};e.options.persister?e.fetchFn=()=>e.options.persister?.(d,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n):e.fetchFn=d}}}function m0(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function UR(t,{pages:e,pageParams:n}){return e.length>0?t.getPreviousPageParam?.(e[0],e,n[0],n):void 0}var BR=class extends sx{#e;#t;#n;#i;constructor(t){super(),this.#e=t.client,this.mutationId=t.mutationId,this.#n=t.mutationCache,this.#t=[],this.state=t.state||ox(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#t.includes(t)||(this.#t.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#t=this.#t.filter(e=>e!==t),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#i?.continue()??this.execute(this.state.variables)}async execute(t){const e=()=>{this.#r({type:"continue"})},n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#i=ix({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(s,a)=>{this.#r({type:"failed",failureCount:s,error:a})},onPause:()=>{this.#r({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const r=this.state.status==="pending",i=!this.#i.canStart();try{if(r)e();else{this.#r({type:"pending",variables:t,isPaused:i}),await this.#n.config.onMutate?.(t,this,n);const a=await this.options.onMutate?.(t,n);a!==this.state.context&&this.#r({type:"pending",context:a,variables:t,isPaused:i})}const s=await this.#i.start();return await this.#n.config.onSuccess?.(s,t,this.state.context,this,n),await this.options.onSuccess?.(s,t,this.state.context,n),await this.#n.config.onSettled?.(s,null,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(s,null,t,this.state.context,n),this.#r({type:"success",data:s}),s}catch(s){try{throw await this.#n.config.onError?.(s,t,this.state.context,this,n),await this.options.onError?.(s,t,this.state.context,n),await this.#n.config.onSettled?.(void 0,s,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(void 0,s,t,this.state.context,n),s}finally{this.#r({type:"error",error:s})}}finally{this.#n.runNext(this)}}#r(t){const e=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),ln.batch(()=>{this.#t.forEach(n=>{n.onMutationUpdate(t)}),this.#n.notify({mutation:this,type:"updated",action:t})})}};function ox(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var WR=class extends bo{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(t,e,n){const r=new BR({client:t,mutationCache:this,mutationId:++this.#n,options:t.defaultMutationOptions(e),state:n});return this.add(r),r}add(t){this.#e.add(t);const e=bu(t);if(typeof e=="string"){const n=this.#t.get(e);n?n.push(t):this.#t.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const e=bu(t);if(typeof e=="string"){const n=this.#t.get(e);if(n)if(n.length>1){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}else n[0]===t&&this.#t.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=bu(t);if(typeof e=="string"){const r=this.#t.get(e)?.find(i=>i.state.status==="pending");return!r||r===t}else return!0}runNext(t){const e=bu(t);return typeof e=="string"?this.#t.get(e)?.find(r=>r!==t&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){ln.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const e={exact:!0,...t};return this.getAll().find(n=>c0(e,n))}findAll(t={}){return this.getAll().filter(e=>c0(t,e))}notify(t){ln.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return ln.batch(()=>Promise.all(t.map(e=>e.continue().catch(In))))}};function bu(t){return t.options.scope?.id}var VR=class extends bo{#e;#t=void 0;#n;#i;constructor(e,n){super(),this.#e=e,this.setOptions(n),this.bindMethods(),this.#r()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const n=this.options;this.options=this.#e.defaultMutationOptions(e),dd(this.options,n)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),n?.mutationKey&&this.options.mutationKey&&ca(n.mutationKey)!==ca(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(e){this.#r(),this.#a(e)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#r(),this.#a()}mutate(e,n){return this.#i=n,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(e)}#r(){const e=this.#n?.state??ox();this.#t={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#a(e){ln.batch(()=>{if(this.#i&&this.hasListeners()){const n=this.#t.variables,r=this.#t.context,i={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};e?.type==="success"?(this.#i.onSuccess?.(e.data,n,r,i),this.#i.onSettled?.(e.data,null,n,r,i)):e?.type==="error"&&(this.#i.onError?.(e.error,n,r,i),this.#i.onSettled?.(void 0,e.error,n,r,i))}this.listeners.forEach(n=>{n(this.#t)})})}},$R=class extends bo{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,n){const r=e.queryKey,i=e.queryHash??tm(r,e);let s=this.get(i);return s||(s=new FR({client:t,queryKey:r,queryHash:i,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(r)}),this.add(s)),s}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){ln.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(n=>l0(e,n))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(n=>l0(t,n)):e}notify(t){ln.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){ln.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){ln.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},qR=class{#e;#t;#n;#i;#r;#a;#o;#s;constructor(t={}){this.#e=t.queryCache||new $R,this.#t=t.mutationCache||new WR,this.#n=t.defaultOptions||{},this.#i=new Map,this.#r=new Map,this.#a=0}mount(){this.#a++,this.#a===1&&(this.#o=rm.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#s=fd.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#a--,this.#a===0&&(this.#o?.(),this.#o=void 0,this.#s?.(),this.#s=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=this.#e.build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(bs(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=this.#e.get(r.queryHash)?.state.data,a=DR(e,s);if(a!==void 0)return this.#e.build(this,r).setData(a,{...n,manual:!0})}setQueriesData(t,e,n){return ln.batch(()=>this.#e.findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;ln.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=this.#e;return ln.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=ln.batch(()=>this.#e.findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(In).catch(In)}invalidateQueries(t,e={}){return ln.batch(()=>(this.#e.findAll(t).forEach(n=>{n.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=ln.batch(()=>this.#e.findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,n);return n.throwOnError||(s=s.catch(In)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(In)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=this.#e.build(this,e);return n.isStaleByTime(bs(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(In).catch(In)}fetchInfiniteQuery(t){return t.behavior=g0(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(In).catch(In)}ensureInfiniteQueryData(t){return t.behavior=g0(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return fd.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(t){this.#n=t}setQueryDefaults(t,e){this.#i.set(ca(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#i.values()],n={};return e.forEach(r=>{Pl(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){this.#r.set(ca(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#r.values()],n={};return e.forEach(r=>{Pl(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#n.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=tm(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===nm&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#n.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},lx=T.createContext(void 0),rr=t=>{const e=T.useContext(lx);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},GR=({client:t,children:e})=>(T.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),E.jsx(lx.Provider,{value:t,children:e})),cx=T.createContext(!1),YR=()=>T.useContext(cx);cx.Provider;function QR(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var KR=T.createContext(QR()),ZR=()=>T.useContext(KR),XR=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},JR=t=>{T.useEffect(()=>{t.clearReset()},[t])},e1=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:i})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(i&&t.data===void 0||nx(n,[t.error,r])),t1=t=>{if(t.suspense){const n=i=>i==="static"?i:Math.max(i??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...i)=>n(r(...i)):n(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},n1=(t,e)=>t.isLoading&&t.isFetching&&!e,r1=(t,e)=>t?.suspense&&e.isPending,v0=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function i1(t,e,n){const r=YR(),i=ZR(),s=rr(),a=s.defaultQueryOptions(t);s.getDefaultOptions().queries?._experimental_beforeQuery?.(a),a._optimisticResults=r?"isRestoring":"optimistic",t1(a),XR(a,i),JR(i);const l=!s.getQueryCache().get(a.queryHash),[u]=T.useState(()=>new e(s,a)),d=u.getOptimisticResult(a),f=!r&&t.subscribed!==!1;if(T.useSyncExternalStore(T.useCallback(p=>{const m=f?u.subscribe(ln.batchCalls(p)):In;return u.updateResult(),m},[u,f]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),T.useEffect(()=>{u.setOptions(a)},[a,u]),r1(a,d))throw v0(a,u,i);if(e1({result:d,errorResetBoundary:i,throwOnError:a.throwOnError,query:s.getQueryCache().get(a.queryHash),suspense:a.suspense}))throw d.error;return s.getDefaultOptions().queries?._experimental_afterQuery?.(a,d),a.experimental_prefetchInRender&&!la&&n1(d,r)&&(l?v0(a,u,i):s.getQueryCache().get(a.queryHash)?.promise)?.catch(In).finally(()=>{u.updateResult()}),a.notifyOnChangeProps?d:u.trackResult(d)}function pa(t,e){return i1(t,jR)}function Bi(t,e){const n=rr(),[r]=T.useState(()=>new VR(n,t));T.useEffect(()=>{r.setOptions(t)},[r,t]);const i=T.useSyncExternalStore(T.useCallback(a=>r.subscribe(ln.batchCalls(a)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),s=T.useCallback((a,l)=>{r.mutate(a,l).catch(In)},[r]);if(i.error&&nx(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}function s1(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}const a1=t=>{switch(t){case"success":return c1;case"info":return d1;case"warning":return u1;case"error":return f1;default:return null}},o1=Array(12).fill(0),l1=({visible:t,className:e})=>Q.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},Q.createElement("div",{className:"sonner-spinner"},o1.map((n,r)=>Q.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),c1=Q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Q.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),u1=Q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Q.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),d1=Q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Q.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),f1=Q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Q.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),h1=Q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Q.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Q.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),p1=()=>{const[t,e]=Q.useState(document.hidden);return Q.useEffect(()=>{const n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t};let cg=1;class g1{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;const{message:r,...i}=e,s=typeof e?.id=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:cg++,a=this.toasts.find(u=>u.id===s),l=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),a?this.toasts=this.toasts.map(u=>u.id===s?(this.publish({...u,...e,id:s,title:r}),{...u,...e,id:s,dismissible:l,title:r}):u):this.addToast({title:r,...i,dismissible:l,id:s}),s},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:e,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const i=Promise.resolve(e instanceof Function?e():e);let s=r!==void 0,a;const l=i.then(async d=>{if(a=["resolve",d],Q.isValidElement(d))s=!1,this.create({id:r,type:"default",message:d});else if(v1(d)&&!d.ok){s=!1;const p=typeof n.error=="function"?await n.error(`HTTP error! status: ${d.status}`):n.error,m=typeof n.description=="function"?await n.description(`HTTP error! status: ${d.status}`):n.description,b=typeof p=="object"&&!Q.isValidElement(p)?p:{message:p};this.create({id:r,type:"error",description:m,...b})}else if(d instanceof Error){s=!1;const p=typeof n.error=="function"?await n.error(d):n.error,m=typeof n.description=="function"?await n.description(d):n.description,b=typeof p=="object"&&!Q.isValidElement(p)?p:{message:p};this.create({id:r,type:"error",description:m,...b})}else if(n.success!==void 0){s=!1;const p=typeof n.success=="function"?await n.success(d):n.success,m=typeof n.description=="function"?await n.description(d):n.description,b=typeof p=="object"&&!Q.isValidElement(p)?p:{message:p};this.create({id:r,type:"success",description:m,...b})}}).catch(async d=>{if(a=["reject",d],n.error!==void 0){s=!1;const f=typeof n.error=="function"?await n.error(d):n.error,p=typeof n.description=="function"?await n.description(d):n.description,v=typeof f=="object"&&!Q.isValidElement(f)?f:{message:f};this.create({id:r,type:"error",description:p,...v})}}).finally(()=>{s&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),u=()=>new Promise((d,f)=>l.then(()=>a[0]==="reject"?f(a[1]):d(a[1])).catch(f));return typeof r!="string"&&typeof r!="number"?{unwrap:u}:Object.assign(r,{unwrap:u})},this.custom=(e,n)=>{const r=n?.id||cg++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Xn=new g1,m1=(t,e)=>{const n=e?.id||cg++;return Xn.addToast({title:t,...e,id:n}),n},v1=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",y1=m1,b1=()=>Xn.toasts,_1=()=>Xn.getActiveToasts();Object.assign(y1,{success:Xn.success,info:Xn.info,warning:Xn.warning,error:Xn.error,custom:Xn.custom,message:Xn.message,promise:Xn.promise,dismiss:Xn.dismiss,loading:Xn.loading},{getHistory:b1,getToasts:_1});s1("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function _u(t){return t.label!==void 0}const S1=3,w1="24px",x1="16px",y0=4e3,E1=356,C1=14,T1=45,D1=200;function Kr(...t){return t.filter(Boolean).join(" ")}function k1(t){const[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}const A1=t=>{var e,n,r,i,s,a,l,u,d;const{invert:f,toast:p,unstyled:m,interacting:v,setHeights:b,visibleToasts:_,heights:w,index:x,toasts:C,expanded:k,removeToast:R,defaultRichColors:A,closeButton:M,style:P,cancelButtonStyle:O,actionButtonStyle:z,className:B="",descriptionClassName:$="",duration:ee,position:re,gap:he,expandByDefault:pe,classNames:ie,icons:oe,closeButtonAriaLabel:K="Close toast"}=t,[q,Y]=Q.useState(null),[F,G]=Q.useState(null),[ne,le]=Q.useState(!1),[ue,ce]=Q.useState(!1),[Ee,se]=Q.useState(!1),[Me,ze]=Q.useState(!1),[jt,Bt]=Q.useState(!1),[zn,ge]=Q.useState(0),[Pe,Ze]=Q.useState(0),_t=Q.useRef(p.duration||ee||y0),en=Q.useRef(null),We=Q.useRef(null),xe=x===0,lt=x+1<=_,Le=p.type,Z=p.dismissible!==!1,ye=p.className||"",Fe=p.descriptionClassName||"",Ne=Q.useMemo(()=>w.findIndex(de=>de.toastId===p.id)||0,[w,p.id]),be=Q.useMemo(()=>{var de;return(de=p.closeButton)!=null?de:M},[p.closeButton,M]),Se=Q.useMemo(()=>p.duration||ee||y0,[p.duration,ee]),Re=Q.useRef(0),He=Q.useRef(0),Ue=Q.useRef(0),rt=Q.useRef(null),[ut,dr]=re.split("-"),gt=Q.useMemo(()=>w.reduce((de,Ie,Ge)=>Ge>=Ne?de:de+Ie.height,0),[w,Ne]),it=p1(),Wt=p.invert||f,Be=Le==="loading";He.current=Q.useMemo(()=>Ne*he+gt,[Ne,gt]),Q.useEffect(()=>{_t.current=Se},[Se]),Q.useEffect(()=>{le(!0)},[]),Q.useEffect(()=>{const de=We.current;if(de){const Ie=de.getBoundingClientRect().height;return Ze(Ie),b(Ge=>[{toastId:p.id,height:Ie,position:p.position},...Ge]),()=>b(Ge=>Ge.filter(Je=>Je.toastId!==p.id))}},[b,p.id]),Q.useLayoutEffect(()=>{if(!ne)return;const de=We.current,Ie=de.style.height;de.style.height="auto";const Ge=de.getBoundingClientRect().height;de.style.height=Ie,Ze(Ge),b(Je=>Je.find(ct=>ct.toastId===p.id)?Je.map(ct=>ct.toastId===p.id?{...ct,height:Ge}:ct):[{toastId:p.id,height:Ge,position:p.position},...Je])},[ne,p.title,p.description,b,p.id,p.jsx,p.action,p.cancel]);const qe=Q.useCallback(()=>{ce(!0),ge(He.current),b(de=>de.filter(Ie=>Ie.toastId!==p.id)),setTimeout(()=>{R(p)},D1)},[p,R,b,He]);Q.useEffect(()=>{if(p.promise&&Le==="loading"||p.duration===1/0||p.type==="loading")return;let de;return k||v||it?(()=>{if(Ue.current<Re.current){const Je=new Date().getTime()-Re.current;_t.current=_t.current-Je}Ue.current=new Date().getTime()})():(()=>{_t.current!==1/0&&(Re.current=new Date().getTime(),de=setTimeout(()=>{p.onAutoClose==null||p.onAutoClose.call(p,p),qe()},_t.current))})(),()=>clearTimeout(de)},[k,v,p,Le,it,qe]),Q.useEffect(()=>{p.delete&&(qe(),p.onDismiss==null||p.onDismiss.call(p,p))},[qe,p.delete]);function Hn(){var de;if(oe?.loading){var Ie;return Q.createElement("div",{className:Kr(ie?.loader,p==null||(Ie=p.classNames)==null?void 0:Ie.loader,"sonner-loader"),"data-visible":Le==="loading"},oe.loading)}return Q.createElement(l1,{className:Kr(ie?.loader,p==null||(de=p.classNames)==null?void 0:de.loader),visible:Le==="loading"})}const yn=p.icon||oe?.[Le]||a1(Le);var Xe,Vt;return Q.createElement("li",{tabIndex:0,ref:We,className:Kr(B,ye,ie?.toast,p==null||(e=p.classNames)==null?void 0:e.toast,ie?.default,ie?.[Le],p==null||(n=p.classNames)==null?void 0:n[Le]),"data-sonner-toast":"","data-rich-colors":(Xe=p.richColors)!=null?Xe:A,"data-styled":!(p.jsx||p.unstyled||m),"data-mounted":ne,"data-promise":!!p.promise,"data-swiped":jt,"data-removed":ue,"data-visible":lt,"data-y-position":ut,"data-x-position":dr,"data-index":x,"data-front":xe,"data-swiping":Ee,"data-dismissible":Z,"data-type":Le,"data-invert":Wt,"data-swipe-out":Me,"data-swipe-direction":F,"data-expanded":!!(k||pe&&ne),"data-testid":p.testId,style:{"--index":x,"--toasts-before":x,"--z-index":C.length-x,"--offset":`${ue?zn:He.current}px`,"--initial-height":pe?"auto":`${Pe}px`,...P,...p.style},onDragEnd:()=>{se(!1),Y(null),rt.current=null},onPointerDown:de=>{de.button!==2&&(Be||!Z||(en.current=new Date,ge(He.current),de.target.setPointerCapture(de.pointerId),de.target.tagName!=="BUTTON"&&(se(!0),rt.current={x:de.clientX,y:de.clientY})))},onPointerUp:()=>{var de,Ie,Ge;if(Me||!Z)return;rt.current=null;const Je=Number(((de=We.current)==null?void 0:de.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),zt=Number(((Ie=We.current)==null?void 0:Ie.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),ct=new Date().getTime()-((Ge=en.current)==null?void 0:Ge.getTime()),Oe=q==="x"?Je:zt,$t=Math.abs(Oe)/ct;if(Math.abs(Oe)>=T1||$t>.11){ge(He.current),p.onDismiss==null||p.onDismiss.call(p,p),G(q==="x"?Je>0?"right":"left":zt>0?"down":"up"),qe(),ze(!0);return}else{var mt,Ot;(mt=We.current)==null||mt.style.setProperty("--swipe-amount-x","0px"),(Ot=We.current)==null||Ot.style.setProperty("--swipe-amount-y","0px")}Bt(!1),se(!1),Y(null)},onPointerMove:de=>{var Ie,Ge,Je;if(!rt.current||!Z||((Ie=window.getSelection())==null?void 0:Ie.toString().length)>0)return;const ct=de.clientY-rt.current.y,Oe=de.clientX-rt.current.x;var $t;const mt=($t=t.swipeDirections)!=null?$t:k1(re);!q&&(Math.abs(Oe)>1||Math.abs(ct)>1)&&Y(Math.abs(Oe)>Math.abs(ct)?"x":"y");let Ot={x:0,y:0};const Un=dn=>1/(1.5+Math.abs(dn)/20);if(q==="y"){if(mt.includes("top")||mt.includes("bottom"))if(mt.includes("top")&&ct<0||mt.includes("bottom")&&ct>0)Ot.y=ct;else{const dn=ct*Un(ct);Ot.y=Math.abs(dn)<Math.abs(ct)?dn:ct}}else if(q==="x"&&(mt.includes("left")||mt.includes("right")))if(mt.includes("left")&&Oe<0||mt.includes("right")&&Oe>0)Ot.x=Oe;else{const dn=Oe*Un(Oe);Ot.x=Math.abs(dn)<Math.abs(Oe)?dn:Oe}(Math.abs(Ot.x)>0||Math.abs(Ot.y)>0)&&Bt(!0),(Ge=We.current)==null||Ge.style.setProperty("--swipe-amount-x",`${Ot.x}px`),(Je=We.current)==null||Je.style.setProperty("--swipe-amount-y",`${Ot.y}px`)}},be&&!p.jsx&&Le!=="loading"?Q.createElement("button",{"aria-label":K,"data-disabled":Be,"data-close-button":!0,onClick:Be||!Z?()=>{}:()=>{qe(),p.onDismiss==null||p.onDismiss.call(p,p)},className:Kr(ie?.closeButton,p==null||(r=p.classNames)==null?void 0:r.closeButton)},(Vt=oe?.close)!=null?Vt:h1):null,(Le||p.icon||p.promise)&&p.icon!==null&&(oe?.[Le]!==null||p.icon)?Q.createElement("div",{"data-icon":"",className:Kr(ie?.icon,p==null||(i=p.classNames)==null?void 0:i.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||Hn():null,p.type!=="loading"?yn:null):null,Q.createElement("div",{"data-content":"",className:Kr(ie?.content,p==null||(s=p.classNames)==null?void 0:s.content)},Q.createElement("div",{"data-title":"",className:Kr(ie?.title,p==null||(a=p.classNames)==null?void 0:a.title)},p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title),p.description?Q.createElement("div",{"data-description":"",className:Kr($,Fe,ie?.description,p==null||(l=p.classNames)==null?void 0:l.description)},typeof p.description=="function"?p.description():p.description):null),Q.isValidElement(p.cancel)?p.cancel:p.cancel&&_u(p.cancel)?Q.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||O,onClick:de=>{_u(p.cancel)&&Z&&(p.cancel.onClick==null||p.cancel.onClick.call(p.cancel,de),qe())},className:Kr(ie?.cancelButton,p==null||(u=p.classNames)==null?void 0:u.cancelButton)},p.cancel.label):null,Q.isValidElement(p.action)?p.action:p.action&&_u(p.action)?Q.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||z,onClick:de=>{_u(p.action)&&(p.action.onClick==null||p.action.onClick.call(p.action,de),!de.defaultPrevented&&qe())},className:Kr(ie?.actionButton,p==null||(d=p.classNames)==null?void 0:d.actionButton)},p.action.label):null)};function b0(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function R1(t,e){const n={};return[t,e].forEach((r,i)=>{const s=i===1,a=s?"--mobile-offset":"--offset",l=s?x1:w1;function u(d){["top","right","bottom","left"].forEach(f=>{n[`${a}-${f}`]=typeof d=="number"?`${d}px`:d})}typeof r=="number"||typeof r=="string"?u(r):typeof r=="object"?["top","right","bottom","left"].forEach(d=>{r[d]===void 0?n[`${a}-${d}`]=l:n[`${a}-${d}`]=typeof r[d]=="number"?`${r[d]}px`:r[d]}):u(l)}),n}const O1=Q.forwardRef(function(e,n){const{id:r,invert:i,position:s="bottom-right",hotkey:a=["altKey","KeyT"],expand:l,closeButton:u,className:d,offset:f,mobileOffset:p,theme:m="light",richColors:v,duration:b,style:_,visibleToasts:w=S1,toastOptions:x,dir:C=b0(),gap:k=C1,icons:R,containerAriaLabel:A="Notifications"}=e,[M,P]=Q.useState([]),O=Q.useMemo(()=>r?M.filter(ne=>ne.toasterId===r):M.filter(ne=>!ne.toasterId),[M,r]),z=Q.useMemo(()=>Array.from(new Set([s].concat(O.filter(ne=>ne.position).map(ne=>ne.position)))),[O,s]),[B,$]=Q.useState([]),[ee,re]=Q.useState(!1),[he,pe]=Q.useState(!1),[ie,oe]=Q.useState(m!=="system"?m:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),K=Q.useRef(null),q=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),Y=Q.useRef(null),F=Q.useRef(!1),G=Q.useCallback(ne=>{P(le=>{var ue;return(ue=le.find(ce=>ce.id===ne.id))!=null&&ue.delete||Xn.dismiss(ne.id),le.filter(({id:ce})=>ce!==ne.id)})},[]);return Q.useEffect(()=>Xn.subscribe(ne=>{if(ne.dismiss){requestAnimationFrame(()=>{P(le=>le.map(ue=>ue.id===ne.id?{...ue,delete:!0}:ue))});return}setTimeout(()=>{xR.flushSync(()=>{P(le=>{const ue=le.findIndex(ce=>ce.id===ne.id);return ue!==-1?[...le.slice(0,ue),{...le[ue],...ne},...le.slice(ue+1)]:[ne,...le]})})})}),[M]),Q.useEffect(()=>{if(m!=="system"){oe(m);return}if(m==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?oe("dark"):oe("light")),typeof window>"u")return;const ne=window.matchMedia("(prefers-color-scheme: dark)");try{ne.addEventListener("change",({matches:le})=>{oe(le?"dark":"light")})}catch{ne.addListener(({matches:ue})=>{try{oe(ue?"dark":"light")}catch(ce){console.error(ce)}})}},[m]),Q.useEffect(()=>{M.length<=1&&re(!1)},[M]),Q.useEffect(()=>{const ne=le=>{var ue;if(a.every(se=>le[se]||le.code===se)){var Ee;re(!0),(Ee=K.current)==null||Ee.focus()}le.code==="Escape"&&(document.activeElement===K.current||(ue=K.current)!=null&&ue.contains(document.activeElement))&&re(!1)};return document.addEventListener("keydown",ne),()=>document.removeEventListener("keydown",ne)},[a]),Q.useEffect(()=>{if(K.current)return()=>{Y.current&&(Y.current.focus({preventScroll:!0}),Y.current=null,F.current=!1)}},[K.current]),Q.createElement("section",{ref:n,"aria-label":`${A} ${q}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},z.map((ne,le)=>{var ue;const[ce,Ee]=ne.split("-");return O.length?Q.createElement("ol",{key:ne,dir:C==="auto"?b0():C,tabIndex:-1,ref:K,className:d,"data-sonner-toaster":!0,"data-sonner-theme":ie,"data-y-position":ce,"data-x-position":Ee,style:{"--front-toast-height":`${((ue=B[0])==null?void 0:ue.height)||0}px`,"--width":`${E1}px`,"--gap":`${k}px`,..._,...R1(f,p)},onBlur:se=>{F.current&&!se.currentTarget.contains(se.relatedTarget)&&(F.current=!1,Y.current&&(Y.current.focus({preventScroll:!0}),Y.current=null))},onFocus:se=>{se.target instanceof HTMLElement&&se.target.dataset.dismissible==="false"||F.current||(F.current=!0,Y.current=se.relatedTarget)},onMouseEnter:()=>re(!0),onMouseMove:()=>re(!0),onMouseLeave:()=>{he||re(!1)},onDragEnd:()=>re(!1),onPointerDown:se=>{se.target instanceof HTMLElement&&se.target.dataset.dismissible==="false"||pe(!0)},onPointerUp:()=>pe(!1)},O.filter(se=>!se.position&&le===0||se.position===ne).map((se,Me)=>{var ze,jt;return Q.createElement(A1,{key:se.id,icons:R,index:Me,toast:se,defaultRichColors:v,duration:(ze=x?.duration)!=null?ze:b,className:x?.className,descriptionClassName:x?.descriptionClassName,invert:i,visibleToasts:w,closeButton:(jt=x?.closeButton)!=null?jt:u,interacting:he,position:ne,style:x?.style,unstyled:x?.unstyled,classNames:x?.classNames,cancelButtonStyle:x?.cancelButtonStyle,actionButtonStyle:x?.actionButtonStyle,closeButtonAriaLabel:x?.closeButtonAriaLabel,removeToast:G,toasts:O.filter(Bt=>Bt.position==se.position),heights:B.filter(Bt=>Bt.position==se.position),setHeights:$,expandByDefault:l,gap:k,expanded:ee,swipeDirections:e.swipeDirections})})):null}))}),Di=t=>{console.error("Error:",t),alert(`Error: ${t}`)},ga=t=>{console.log("Success:",t),alert(`Success: ${t}`)},vl=t=>{console.warn("Warning:",t),alert(`Warning: ${t}`)},M1=(t,e="info")=>{console.log(`${e.toUpperCase()}:`,t),alert(`${e.toUpperCase()}: ${t}`)},N1=t=>{console.error("Validation Error:",t),alert(`Validation Error: ${t}`)},Fr=t=>{console.error("API Error:",t);const e=t?.message||"An API error occurred";return Di(e),{error:e}},Ii=({children:t,className:e="",disabled:n=!1,type:r="button",onClick:i,variant:s="default",size:a="default",...l})=>E.jsx("button",{type:r,disabled:n,onClick:i,className:`px-4 py-2 rounded bg-blue-500 text-white hover:bg-blue-600 disabled:opacity-50 ${e}`,...l,children:t}),ii=({className:t="",type:e="text",...n})=>E.jsx("input",{type:e,className:`flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${t}`,...n}),si=({className:t="",...e})=>E.jsx("label",{className:`text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 ${t}`,...e}),yr=({className:t="",...e})=>E.jsx("div",{className:`rounded-lg border bg-card text-card-foreground shadow-sm ${t}`,...e}),br=({className:t="",...e})=>E.jsx("div",{className:`flex flex-col space-y-1.5 p-6 ${t}`,...e}),_r=({className:t="",...e})=>E.jsx("h3",{className:`text-2xl font-semibold leading-none tracking-tight ${t}`,...e}),Sr=({className:t="",...e})=>E.jsx("div",{className:`p-6 pt-0 ${t}`,...e}),sm=({data:t=[],columns:e=[],...n})=>E.jsx("div",{className:"rounded-md border",children:E.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"DataTable component not available - shared package removed"})}),ma=t=>({handleAsync:async(e,n={})=>{try{return await e()}catch(r){throw console.error(`Error in ${t}:`,r),n.onFinally&&n.onFinally(),r}}}),I1=()=>({isOpen:!1,toggle:()=>{},open:()=>{},close:()=>{}}),P1=({children:t,...e})=>E.jsx("div",{...e,children:t}),L1=()=>E.jsx("div",{className:"text-sm text-muted-foreground",children:"Theme Switch"});class F1 extends Q.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,n){console.error("ErrorBoundary caught an error:",e,n)}render(){return this.state.hasError?E.jsx("div",{className:"flex items-center justify-center min-h-screen",children:E.jsxs("div",{className:"text-center",children:[E.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Something went wrong"}),E.jsx("p",{className:"text-muted-foreground",children:"Please refresh the page or contact support."})]})}):this.props.children}}const j1=({title:t,...e})=>E.jsx("header",{className:"border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:E.jsx("div",{className:"container flex h-14 items-center",children:E.jsx("h1",{className:"text-lg font-semibold",children:t||"Application"})})}),Yd=({children:t,...e})=>E.jsxs("form",{className:"space-y-4",...e,children:[E.jsx("div",{className:"p-4 text-center text-muted-foreground border rounded",children:"GenericForm component not available - shared package removed"}),t]}),am=t=>({items:[],loading:!1,error:null,fetchItems:()=>Promise.resolve([]),addItem:()=>Promise.resolve(),updateItem:()=>Promise.resolve(),deleteItem:()=>Promise.resolve()}),z1=()=>({theme:"light",sidebarOpen:!1,toggleSidebar:()=>{}});class H1{constructor(e){this.tableName=e}async getAll(){return[]}async getById(e){return null}async create(e){return e}async update(e,n){return n}async delete(e){return!0}}class x$ extends H1{}const E$=t=>({useGetAll:()=>({data:[],loading:!1,error:null}),useGetById:()=>({data:null,loading:!1,error:null}),useCreate:()=>({mutate:()=>{},loading:!1}),useUpdate:()=>({mutate:()=>{},loading:!1}),useDelete:()=>({mutate:()=>{},loading:!1})}),U1=()=>{const t=()=>({select:(e="*")=>t(),insert:e=>t(),update:e=>t(),delete:()=>t(),upsert:e=>t(),eq:(e,n)=>t(),neq:(e,n)=>t(),gt:(e,n)=>t(),gte:(e,n)=>t(),lt:(e,n)=>t(),lte:(e,n)=>t(),like:(e,n)=>t(),ilike:(e,n)=>t(),is:(e,n)=>t(),in:(e,n)=>t(),contains:(e,n)=>t(),containedBy:(e,n)=>t(),rangeGt:(e,n)=>t(),rangeGte:(e,n)=>t(),rangeLt:(e,n)=>t(),rangeLte:(e,n)=>t(),rangeAdjacent:(e,n)=>t(),overlaps:(e,n)=>t(),textSearch:(e,n)=>t(),match:e=>t(),not:(e,n,r)=>t(),or:e=>t(),filter:(e,n,r)=>t(),order:(e,n)=>t(),limit:e=>t(),range:(e,n)=>t(),abortSignal:e=>t(),single:()=>Promise.resolve({data:null,error:null}),maybeSingle:()=>Promise.resolve({data:null,error:null}),csv:()=>Promise.resolve({data:"",error:null}),geojson:()=>Promise.resolve({data:null,error:null}),explain:()=>Promise.resolve({data:null,error:null}),rollback:()=>Promise.resolve({data:null,error:null}),returns:()=>t(),then:(e,n)=>{const r={data:[],error:null,count:0,status:200,statusText:"OK"};return Promise.resolve(r).then(e,n)},catch:e=>Promise.resolve({data:[],error:null})});return{from:e=>t(),rpc:(e,n)=>t(),schema:e=>({from:n=>t(),rpc:(n,r)=>t()}),auth:{signUp:e=>Promise.resolve({data:{user:null,session:null},error:null}),signInWithPassword:e=>Promise.resolve({data:{user:null,session:null},error:null}),signOut:()=>Promise.resolve({error:null}),getSession:()=>Promise.resolve({data:{session:null},error:null}),getUser:()=>Promise.resolve({data:{user:null},error:null}),onAuthStateChange:e=>({data:{subscription:{unsubscribe:()=>{}}}})},storage:{from:e=>({upload:(n,r)=>Promise.resolve({data:null,error:null}),download:n=>Promise.resolve({data:null,error:null}),list:n=>Promise.resolve({data:[],error:null}),remove:n=>Promise.resolve({data:[],error:null}),getPublicUrl:n=>({data:{publicUrl:""}})})},realtime:{channel:e=>({on:(n,r)=>({}),subscribe:()=>({}),unsubscribe:()=>({})})}}},B1=t=>(console.error("Supabase error:",t),t),W1=({children:t,supabaseClient:e,...n})=>E.jsx("div",{...n,children:t}),_0={id:"mock-user-id",email:"demo@example.com",name:"Demo User",role:"admin"};let Zt={user:null,loading:!1,error:null};const V1=()=>({user:Zt.user,loading:Zt.loading,error:Zt.error,signIn:async(t,e)=>(Zt.loading=!0,await new Promise(n=>setTimeout(n,500)),t&&e?(Zt.user={..._0,email:t},Zt.error=null,Zt.loading=!1,{error:null,user:Zt.user}):(Zt.error="Invalid credentials",Zt.loading=!1,{error:"Invalid credentials"})),signUp:async(t,e)=>(Zt.loading=!0,await new Promise(n=>setTimeout(n,500)),t&&e?(Zt.user={..._0,email:t},Zt.error=null,Zt.loading=!1,{error:null,user:Zt.user}):(Zt.error="Invalid registration data",Zt.loading=!1,{error:"Invalid registration data"})),signOut:async()=>(Zt.user=null,Zt.error=null,Zt.loading=!1,Promise.resolve())}),It={},tt={ZANICA:"Zanica",BUSTO_GAROLFO:"Busto Garolfo",BOTH:"Both Centers"},ki={MAINTENANCE:"maintenance"},Va={},$a={},S0={},C$=t=>{if(!t)return"";try{return new Date(t).toLocaleDateString()}catch{return t.toString()}},Ut=U1(),rn=B1,$1=({children:t})=>E.jsx(W1,{supabaseClient:Ut,children:t}),_o=V1;/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),G1=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),w0=t=>{const e=G1(t);return e.charAt(0).toUpperCase()+e.slice(1)},ux=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),Y1=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Q1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K1=T.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:a,...l},u)=>T.createElement("svg",{ref:u,...Q1,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:ux("lucide",i),...!s&&!Y1(l)&&{"aria-hidden":"true"},...l},[...a.map(([d,f])=>T.createElement(d,f)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ec=(t,e)=>{const n=T.forwardRef(({className:r,...i},s)=>T.createElement(K1,{ref:s,iconNode:e,className:ux(`lucide-${q1(w0(t))}`,`lucide-${t}`,r),...i}));return n.displayName=w0(t),n};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z1=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],X1=ec("calendar",Z1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J1=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],eO=ec("clock",J1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tO=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],nO=ec("file-text",tO);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rO=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],iO=ec("house",rO);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sO=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],aO=ec("settings",sO);function oO(){const{user:t}=_o(),e=Ui(),[n,r]=T.useState({backlog:e.pathname.startsWith("/backlog"),machinery:e.pathname.startsWith("/machinery"),phases:e.pathname.startsWith("/phases"),scheduler:e.pathname.startsWith("/scheduler")}),i=[{href:"/",label:"Dashboard",icon:iO},{section:"backlog",label:"Backlog",icon:nO,subLinks:[{href:"/backlog",label:"Lista Backlog"},{href:"/backlog/add",label:"Nuovo Backlog"}]},{section:"machinery",label:"Macchinari",icon:aO,subLinks:[{href:"/machinery",label:"Lista Macchinari"},{href:"/machinery/add",label:"Nuovo Macchinario"}]},{section:"phases",label:"Fasi",icon:eO,subLinks:[{href:"/phases",label:"Lista Fasi"},{href:"/phases/add",label:"Nuova Fase"}]},{href:"/scheduler",label:"Scheduler",icon:X1}];return t?E.jsx("div",{className:"w-16 bg-secondary shadow-sm border-r border-border min-h-screen",children:E.jsx("div",{className:"flex flex-col items-center py-4 space-y-4",children:i.map(s=>{const a=s.icon,l=e.pathname===s.href;return E.jsx(er,{to:s.href||"#",className:`p-3 rounded-lg transition-colors ${l?"bg-primary/10 text-primary":"text-muted-foreground hover:text-foreground hover:bg-accent"}`,title:s.label,children:E.jsx(a,{className:"h-6 w-6"})},s.href||s.section)})})}):E.jsxs("nav",{className:"w-64 bg-secondary shadow-sm border-r border-border h-screen flex flex-col",children:[E.jsx("div",{className:"p-4 border-b border-border",children:E.jsx(er,{to:"/login",className:"flex items-center justify-center",children:E.jsx("span",{className:"text-xl font-bold text-primary",children:"SCHEDULER"})})}),E.jsxs("div",{className:"flex-1 p-4",children:[E.jsx("h3",{className:"text-xs font-semibold text-secondary-foreground uppercase tracking-wider mb-4",children:"NAVIGATION"}),E.jsxs("div",{className:"space-y-2",children:[E.jsx(er,{to:"/login",className:"flex items-center space-x-3 px-3 py-2 rounded-lg text-muted-foreground hover:text-foreground hover:bg-accent transition-colors",children:E.jsx("span",{className:"font-medium",children:"Accedi"})}),E.jsx(er,{to:"/signup",className:"flex items-center space-x-3 px-3 py-2 rounded-lg text-muted-foreground hover:text-foreground hover:bg-accent transition-colors",children:E.jsx("span",{className:"font-medium",children:"Registrati"})})]})]})]})}function lO(){const{user:t,signOut:e}=_o(),{toggle:n}=I1();return E.jsx(j1,{title:"Scheduler Demo",user:{name:t?.email?.split("@")[0]||"User",email:t?.email,avatar:t?.avatar_url},onLogout:()=>e(),onRefresh:()=>window.location.reload(),onToggleSidebar:n,rightContent:E.jsx(L1,{})})}const x0=t=>{let e;const n=new Set,r=(d,f)=>{const p=typeof d=="function"?d(e):d;if(!Object.is(p,e)){const m=e;e=f??(typeof p!="object"||p===null)?p:Object.assign({},e,p),n.forEach(v=>v(e,m))}},i=()=>e,l={setState:r,getState:i,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d))},u=e=t(r,i,l);return l},cO=(t=>t?x0(t):x0),uO=t=>t;function dO(t,e=uO){const n=Q.useSyncExternalStore(t.subscribe,Q.useCallback(()=>e(t.getState()),[t,e]),Q.useCallback(()=>e(t.getInitialState()),[t,e]));return Q.useDebugValue(n),n}const E0=t=>{const e=cO(t),n=r=>dO(e,r);return Object.assign(n,e),n},So=(t=>t?E0(t):E0),Tt={MACHINE:{DEPARTMENT:"STAMPA",WORK_CENTER:"ZANICA",MIN_WEB_WIDTH:"100",MAX_WEB_WIDTH:"1000",MIN_BAG_HEIGHT:"50",MAX_BAG_HEIGHT:"500",SETUP_TIME_STANDARD:"0.5",CHANGEOVER_COLOR:"0.25",CHANGEOVER_MATERIAL:"0.75",ACTIVE_SHIFTS:["T1"],STATUS:"ACTIVE"},PHASE:{DEPARTMENT:"STAMPA",NUMERO_PERSONE:1,WORK_CENTER:"ZANICA",V_STAMPA:6e3,T_SETUP_STAMPA:.5,COSTO_H_STAMPA:50,V_CONF:1e3,T_SETUP_CONF:.25,COSTO_H_CONF:40},ORDER:{SEAL_SIDES:3,QUANTITY_COMPLETED:0},OFF_TIME:{START_TIME:"09:00",END_TIME:"17:00"}},fO={MAX_TASK_SEGMENTS:50},Su={MINUTES_PER_HOUR:60,MILLISECONDS_PER_MINUTE:60*1e3},Yt=So((t,e)=>({isLoading:!1,isInitialized:!1,selectedWorkCenter:localStorage.getItem("selectedWorkCenter")||tt.BOTH,isEditMode:!1,schedulingLoading:{isScheduling:!1,isRescheduling:!1,isShunting:!1,isNavigating:!1,operationType:null,taskId:null},confirmDialog:{isOpen:!1,title:"",message:"",onConfirm:null,type:"danger"},conflictDialog:{isOpen:!1,details:null},dragPreview:{isActive:!1,startSlot:null,durationSlots:0,machineId:null},getLoadingState:()=>e().isLoading,getInitializationState:()=>e().isInitialized,getSelectedWorkCenter:()=>e().selectedWorkCenter,getEditMode:()=>e().isEditMode,getConfirmDialog:()=>e().confirmDialog,getConflictDialog:()=>e().conflictDialog,getSchedulingLoading:()=>e().schedulingLoading,getDragPreview:()=>e().dragPreview,setLoading:n=>t({isLoading:n}),setInitialized:n=>t({isInitialized:n}),setSelectedWorkCenter:n=>{localStorage.setItem("selectedWorkCenter",n),t({selectedWorkCenter:n})},toggleEditMode:()=>t(n=>({isEditMode:!n.isEditMode})),setEditMode:n=>t({isEditMode:n}),setSchedulingLoading:n=>t({schedulingLoading:n}),startSchedulingOperation:(n,r=null)=>t({schedulingLoading:{isScheduling:n==="schedule",isRescheduling:n==="reschedule",isShunting:n==="shunt",isNavigating:n==="navigate",operationType:n,taskId:r}}),stopSchedulingOperation:()=>t({schedulingLoading:{isScheduling:!1,isRescheduling:!1,isShunting:!1,isNavigating:!1,operationType:null,taskId:null}}),showConfirmDialog:(n,r,i,s="danger")=>t({confirmDialog:{isOpen:!0,title:n,message:r,onConfirm:i,type:s}}),hideConfirmDialog:()=>t({confirmDialog:{isOpen:!1,title:"",message:"",onConfirm:null,type:"danger"}}),showConflictDialog:n=>t({conflictDialog:{isOpen:!0,details:n}}),hideConflictDialog:()=>t({conflictDialog:{isOpen:!1,details:null}}),setDragPreview:n=>t({dragPreview:n}),clearDragPreview:()=>t({dragPreview:{isActive:!1,startSlot:null,durationSlots:0,machineId:null}}),showAlert:(n,r="info")=>{M1(n,r)},reset:()=>t({isLoading:!1,isInitialized:!1,selectedWorkCenter:tt.BOTH,isEditMode:!1,schedulingLoading:{isScheduling:!1,isRescheduling:!1,isShunting:!1,isNavigating:!1,operationType:null,taskId:null},confirmDialog:{isOpen:!1,title:"",message:"",onConfirm:null,type:"danger"},conflictDialog:{isOpen:!1,details:null},dragPreview:{isActive:!1,startSlot:null,durationSlots:0,machineId:null}})})),dx=()=>{const t=T.useCallback(d=>{if(!d||!d.department)return{isValid:!1,error:"Invalid phase data"};const{department:f}=d;if(f==="STAMPA"){const p=parseFloat(d.v_stampa);if(isNaN(p)||p<=0)return{isValid:!1,error:"Velocit di stampa non valida. Inserisci un valore maggiore di zero."}}else if(f==="CONFEZIONAMENTO"){const p=parseFloat(d.v_conf);if(isNaN(p)||p<=0)return{isValid:!1,error:"Velocit di confezionamento non valida. Inserisci un valore maggiore di zero."}}else return{isValid:!1,error:"Reparto non riconosciuto"};return{isValid:!0}},[]),e=T.useCallback((d,f,p)=>{if(!d||!f||d.department==="STAMPA"&&!p||!t(d).isValid)return null;try{const{department:v}=d;if(v==="STAMPA"){const b=parseFloat(d.v_stampa),_=parseFloat(d.t_setup_stampa)||0,w=parseFloat(d.costo_h_stampa)||0;if(isNaN(b)||b<=0)return null;const C=p*f/1e3/b,k=C+_,R=k*w;return{totals:{duration:k,cost:R},breakdown:{print:{time:C,cost:C*w},setup:{time:_,cost:_*w}}}}else if(v==="CONFEZIONAMENTO"){const b=parseFloat(d.v_conf),_=parseFloat(d.t_setup_conf)||0,w=parseFloat(d.costo_h_conf)||0;if(isNaN(b)||b<=0)return null;const x=f/b,C=_,k=x+C,R=k*w;return{totals:{duration:k,cost:R},breakdown:{package:{time:x,cost:x*w},setup:{time:C,cost:C*w}}}}return null}catch{return null}},[t]),n=T.useCallback(d=>d&&(d.startsWith("P05")||d.startsWith("ISP05"))?"BUSTO_GAROLFO":"ZANICA",[]),r=T.useCallback(d=>d&&d.startsWith("P0")?"CONFEZIONAMENTO":"STAMPA",[]),i=T.useCallback(d=>({STAMPA:["DIGITAL_PRINT","FLEXO_PRINT","ROTOGRAVURE"],CONFEZIONAMENTO:["DOYPACK","PLURI_PIU","MONO_PIU","CONFEZIONAMENTO_TRADIZIONALE","CONFEZIONAMENTO_POLVERI"]})[d]||[],[]),s=T.useCallback((d,f)=>{const m={DIGITAL_PRINT:"DIGI",FLEXO_PRINT:"FLEX",ROTOGRAVURE:"ROTO",DOYPACK:"DOYP",PLURI_PIU:"PLUR",MONO_PIU:"MONO",CONFEZIONAMENTO_TRADIZIONALE:"CONFTRAD",CONFEZIONAMENTO_POLVERI:"CONFPOL"}[d]||"MACH",v=f==="BUSTO_GAROLFO"?"BGF":"ZAN",b=Date.now().toString(36);return`${m}_${v}_${b}`},[]),a=T.useCallback((d,f)=>!(f<0||f>d),[]),l=T.useCallback((d,f)=>!d||d===0?0:Math.round(f*100/d),[]),u=T.useCallback((d,f)=>!d||d===0?0:!f||f===0?d:Math.round(d*(1-f/100)*100)/100,[]);return{calculateProductionMetrics:e,validatePhaseParameters:t,autoDetermineWorkCenter:n,autoDetermineDepartment:r,getValidMachineTypes:i,generateMachineId:s,validateQuantityCompleted:a,calculateCompletionRate:l,calculateTimeRemaining:u}};var gp,C0;function hO(){if(C0)return gp;C0=1;function t(x){this._maxSize=x,this.clear()}t.prototype.clear=function(){this._size=0,this._values=Object.create(null)},t.prototype.get=function(x){return this._values[x]},t.prototype.set=function(x,C){return this._size>=this._maxSize&&this.clear(),x in this._values||this._size++,this._values[x]=C};var e=/[^.^\]^[]+|(?=\[\]|\.\.)/g,n=/^\d+$/,r=/^\d/,i=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,s=/^\s*(['"]?)(.*?)(\1)\s*$/,a=512,l=new t(a),u=new t(a),d=new t(a);gp={Cache:t,split:p,normalizePath:f,setter:function(x){var C=f(x);return u.get(x)||u.set(x,function(R,A){for(var M=0,P=C.length,O=R;M<P-1;){var z=C[M];if(z==="__proto__"||z==="constructor"||z==="prototype")return R;O=O[C[M++]]}O[C[M]]=A})},getter:function(x,C){var k=f(x);return d.get(x)||d.set(x,function(A){for(var M=0,P=k.length;M<P;)if(A!=null||!C)A=A[k[M++]];else return;return A})},join:function(x){return x.reduce(function(C,k){return C+(v(k)||n.test(k)?"["+k+"]":(C?".":"")+k)},"")},forEach:function(x,C,k){m(Array.isArray(x)?x:p(x),C,k)}};function f(x){return l.get(x)||l.set(x,p(x).map(function(C){return C.replace(s,"$2")}))}function p(x){return x.match(e)||[""]}function m(x,C,k){var R=x.length,A,M,P,O;for(M=0;M<R;M++)A=x[M],A&&(w(A)&&(A='"'+A+'"'),O=v(A),P=!O&&/^\d+$/.test(A),C.call(k,A,O,P,M,x))}function v(x){return typeof x=="string"&&x&&["'",'"'].indexOf(x.charAt(0))!==-1}function b(x){return x.match(r)&&!x.match(n)}function _(x){return i.test(x)}function w(x){return!v(x)&&(b(x)||_(x))}return gp}var ia=hO(),mp,T0;function pO(){if(T0)return mp;T0=1;const t=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,e=f=>f.match(t)||[],n=f=>f[0].toUpperCase()+f.slice(1),r=(f,p)=>e(f).join(p).toLowerCase(),i=f=>e(f).reduce((p,m)=>`${p}${p?m[0].toUpperCase()+m.slice(1).toLowerCase():m.toLowerCase()}`,"");return mp={words:e,upperFirst:n,camelCase:i,pascalCase:f=>n(i(f)),snakeCase:f=>r(f,"_"),kebabCase:f=>r(f,"-"),sentenceCase:f=>n(r(f," ")),titleCase:f=>e(f).map(n).join(" ")},mp}var vp=pO(),wu={exports:{}},D0;function gO(){if(D0)return wu.exports;D0=1,wu.exports=function(i){return t(e(i),i)},wu.exports.array=t;function t(i,s){var a=i.length,l=new Array(a),u={},d=a,f=n(s),p=r(i);for(s.forEach(function(v){if(!p.has(v[0])||!p.has(v[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});d--;)u[d]||m(i[d],d,new Set);return l;function m(v,b,_){if(_.has(v)){var w;try{w=", node was:"+JSON.stringify(v)}catch{w=""}throw new Error("Cyclic dependency"+w)}if(!p.has(v))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(v));if(!u[b]){u[b]=!0;var x=f.get(v)||new Set;if(x=Array.from(x),b=x.length){_.add(v);do{var C=x[--b];m(C,p.get(C),_)}while(b);_.delete(v)}l[--a]=v}}}function e(i){for(var s=new Set,a=0,l=i.length;a<l;a++){var u=i[a];s.add(u[0]),s.add(u[1])}return Array.from(s)}function n(i){for(var s=new Map,a=0,l=i.length;a<l;a++){var u=i[a];s.has(u[0])||s.set(u[0],new Set),s.has(u[1])||s.set(u[1],new Set),s.get(u[0]).add(u[1])}return s}function r(i){for(var s=new Map,a=0,l=i.length;a<l;a++)s.set(i[a],a);return s}return wu.exports}var mO=gO();const vO=Vd(mO),yO=Object.prototype.toString,bO=Error.prototype.toString,_O=RegExp.prototype.toString,SO=typeof Symbol<"u"?Symbol.prototype.toString:()=>"",wO=/^Symbol\((.*)\)(.*)$/;function xO(t){return t!=+t?"NaN":t===0&&1/t<0?"-0":""+t}function k0(t,e=!1){if(t==null||t===!0||t===!1)return""+t;const n=typeof t;if(n==="number")return xO(t);if(n==="string")return e?`"${t}"`:t;if(n==="function")return"[Function "+(t.name||"anonymous")+"]";if(n==="symbol")return SO.call(t).replace(wO,"Symbol($1)");const r=yO.call(t).slice(8,-1);return r==="Date"?isNaN(t.getTime())?""+t:t.toISOString(t):r==="Error"||t instanceof Error?"["+bO.call(t)+"]":r==="RegExp"?_O.call(t):null}function Pi(t,e){let n=k0(t,e);return n!==null?n:JSON.stringify(t,function(r,i){let s=k0(this[r],e);return s!==null?s:i},2)}function fx(t){return t==null?[]:[].concat(t)}let hx,px,gx,EO=/\$\{\s*(\w+)\s*\}/g;hx=Symbol.toStringTag;class A0{constructor(e,n,r,i){this.name=void 0,this.message=void 0,this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=void 0,this.inner=void 0,this[hx]="Error",this.name="ValidationError",this.value=n,this.path=r,this.type=i,this.errors=[],this.inner=[],fx(e).forEach(s=>{if(Pn.isError(s)){this.errors.push(...s.errors);const a=s.inner.length?s.inner:[s];this.inner.push(...a)}else this.errors.push(s)}),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0]}}px=Symbol.hasInstance;gx=Symbol.toStringTag;class Pn extends Error{static formatError(e,n){const r=n.label||n.path||"this";return n=Object.assign({},n,{path:r,originalPath:n.path}),typeof e=="string"?e.replace(EO,(i,s)=>Pi(n[s])):typeof e=="function"?e(n):e}static isError(e){return e&&e.name==="ValidationError"}constructor(e,n,r,i,s){const a=new A0(e,n,r,i);if(s)return a;super(),this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=[],this.inner=[],this[gx]="Error",this.name=a.name,this.message=a.message,this.type=a.type,this.value=a.value,this.path=a.path,this.errors=a.errors,this.inner=a.inner,Error.captureStackTrace&&Error.captureStackTrace(this,Pn)}static[px](e){return A0[Symbol.hasInstance](e)||super[Symbol.hasInstance](e)}}let ni={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:t,type:e,value:n,originalValue:r})=>{const i=r!=null&&r!==n?` (cast from the value \`${Pi(r,!0)}\`).`:".";return e!=="mixed"?`${t} must be a \`${e}\` type, but the final value was: \`${Pi(n,!0)}\``+i:`${t} must match the configured type. The validated value was: \`${Pi(n,!0)}\``+i}},Kn={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",datetime:"${path} must be a valid ISO date-time",datetime_precision:"${path} must be a valid ISO date-time with a sub-second precision of exactly ${precision} digits",datetime_offset:'${path} must be a valid ISO date-time with UTC "Z" timezone',trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},ds={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},ug={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},CO={isValue:"${path} field must be ${value}"},Zu={noUnknown:"${path} field has unspecified keys: ${unknown}",exact:"${path} object contains unknown properties: ${properties}"},Xu={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},TO={notType:t=>{const{path:e,value:n,spec:r}=t,i=r.types.length;if(Array.isArray(n)){if(n.length<i)return`${e} tuple value has too few items, expected a length of ${i} but got ${n.length} for value: \`${Pi(n,!0)}\``;if(n.length>i)return`${e} tuple value has too many items, expected a length of ${i} but got ${n.length} for value: \`${Pi(n,!0)}\``}return Pn.formatError(ni.notType,t)}};Object.assign(Object.create(null),{mixed:ni,string:Kn,number:ds,date:ug,object:Zu,array:Xu,boolean:CO,tuple:TO});const Qd=t=>t&&t.__isYupSchema__;class hd{static fromOptions(e,n){if(!n.then&&!n.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:r,then:i,otherwise:s}=n,a=typeof r=="function"?r:(...l)=>l.every(u=>u===r);return new hd(e,(l,u)=>{var d;let f=a(...l)?i:s;return(d=f?.(u))!=null?d:u})}constructor(e,n){this.fn=void 0,this.refs=e,this.refs=e,this.fn=n}resolve(e,n){let r=this.refs.map(s=>s.getValue(n?.value,n?.parent,n?.context)),i=this.fn(r,e,n);if(i===void 0||i===e)return e;if(!Qd(i))throw new TypeError("conditions must return a schema object");return i.resolve(n)}}const xu={context:"$",value:"."};class va{constructor(e,n={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,typeof e!="string")throw new TypeError("ref must be a string, got: "+e);if(this.key=e.trim(),e==="")throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===xu.context,this.isValue=this.key[0]===xu.value,this.isSibling=!this.isContext&&!this.isValue;let r=this.isContext?xu.context:this.isValue?xu.value:"";this.path=this.key.slice(r.length),this.getter=this.path&&ia.getter(this.path,!0),this.map=n.map}getValue(e,n,r){let i=this.isContext?r:this.isValue?e:n;return this.getter&&(i=this.getter(i||{})),this.map&&(i=this.map(i)),i}cast(e,n){return this.getValue(e,n?.parent,n?.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(e){return e&&e.__isYupRef}}va.prototype.__isYupRef=!0;const Ai=t=>t==null;function qa(t){function e({value:n,path:r="",options:i,originalValue:s,schema:a},l,u){const{name:d,test:f,params:p,message:m,skipAbsent:v}=t;let{parent:b,context:_,abortEarly:w=a.spec.abortEarly,disableStackTrace:x=a.spec.disableStackTrace}=i;const C={value:n,parent:b,context:_};function k($={}){const ee=mx(Object.assign({value:n,originalValue:s,label:a.spec.label,path:$.path||r,spec:a.spec,disableStackTrace:$.disableStackTrace||x},p,$.params),C),re=new Pn(Pn.formatError($.message||m,ee),n,ee.path,$.type||d,ee.disableStackTrace);return re.params=ee,re}const R=w?l:u;let A={path:r,parent:b,type:d,from:i.from,createError:k,resolve($){return vx($,C)},options:i,originalValue:s,schema:a};const M=$=>{Pn.isError($)?R($):$?u(null):R(k())},P=$=>{Pn.isError($)?R($):l($)};if(v&&Ai(n))return M(!0);let z;try{var B;if(z=f.call(A,n,A),typeof((B=z)==null?void 0:B.then)=="function"){if(i.sync)throw new Error(`Validation test of type: "${A.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`);return Promise.resolve(z).then(M,P)}}catch($){P($);return}M(z)}return e.OPTIONS=t,e}function mx(t,e){if(!t)return t;for(const n of Object.keys(t))t[n]=vx(t[n],e);return t}function vx(t,e){return va.isRef(t)?t.getValue(e.value,e.parent,e.context):t}function DO(t,e,n,r=n){let i,s,a;return e?(ia.forEach(e,(l,u,d)=>{let f=u?l.slice(1,l.length-1):l;t=t.resolve({context:r,parent:i,value:n});let p=t.type==="tuple",m=d?parseInt(f,10):0;if(t.innerType||p){if(p&&!d)throw new Error(`Yup.reach cannot implicitly index into a tuple type. the path part "${a}" must contain an index to the tuple element, e.g. "${a}[0]"`);if(n&&m>=n.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${l}, in the path: ${e}. because there is no value at that index. `);i=n,n=n&&n[m],t=p?t.spec.types[m]:t.innerType}if(!d){if(!t.fields||!t.fields[f])throw new Error(`The schema does not contain the path: ${e}. (failed at: ${a} which is a type: "${t.type}")`);i=n,n=n&&n[f],t=t.fields[f]}s=f,a=u?"["+l+"]":"."+l}),{schema:t,parent:i,parentPath:s}):{parent:i,parentPath:e,schema:t}}class pd extends Set{describe(){const e=[];for(const n of this.values())e.push(va.isRef(n)?n.describe():n);return e}resolveAll(e){let n=[];for(const r of this.values())n.push(e(r));return n}clone(){return new pd(this.values())}merge(e,n){const r=this.clone();return e.forEach(i=>r.add(i)),n.forEach(i=>r.delete(i)),r}}function Za(t,e=new Map){if(Qd(t)||!t||typeof t!="object")return t;if(e.has(t))return e.get(t);let n;if(t instanceof Date)n=new Date(t.getTime()),e.set(t,n);else if(t instanceof RegExp)n=new RegExp(t),e.set(t,n);else if(Array.isArray(t)){n=new Array(t.length),e.set(t,n);for(let r=0;r<t.length;r++)n[r]=Za(t[r],e)}else if(t instanceof Map){n=new Map,e.set(t,n);for(const[r,i]of t.entries())n.set(r,Za(i,e))}else if(t instanceof Set){n=new Set,e.set(t,n);for(const r of t)n.add(Za(r,e))}else if(t instanceof Object){n={},e.set(t,n);for(const[r,i]of Object.entries(t))n[r]=Za(i,e)}else throw Error(`Unable to clone ${t}`);return n}function kO(t){if(!(t!=null&&t.length))return;const e=[];let n="",r=!1,i=!1;for(let s=0;s<t.length;s++){const a=t[s];if(a==="["&&!i){n&&(e.push(...n.split(".").filter(Boolean)),n=""),r=!0;continue}if(a==="]"&&!i){n&&(/^\d+$/.test(n)?e.push(n):e.push(n.replace(/^"|"$/g,"")),n=""),r=!1;continue}if(a==='"'){i=!i;continue}if(a==="."&&!r&&!i){n&&(e.push(n),n="");continue}n+=a}return n&&e.push(...n.split(".").filter(Boolean)),e}function AO(t,e){const n=e?`${e}.${t.path}`:t.path;return t.errors.map(r=>({message:r,path:kO(n)}))}function yx(t,e){var n;if(!((n=t.inner)!=null&&n.length)&&t.errors.length)return AO(t,e);const r=e?`${e}.${t.path}`:t.path;return t.inner.flatMap(i=>yx(i,r))}class Dr{constructor(e){this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new pd,this._blacklist=new pd,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation(()=>{this.typeError(ni.notType)}),this.type=e.type,this._typeCheck=e.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,disableStackTrace:!1,nullable:!1,optional:!0,coerce:!0},e?.spec),this.withMutation(n=>{n.nonNullable()})}get _type(){return this.type}clone(e){if(this._mutate)return e&&Object.assign(this.spec,e),this;const n=Object.create(Object.getPrototypeOf(this));return n.type=this.type,n._typeCheck=this._typeCheck,n._whitelist=this._whitelist.clone(),n._blacklist=this._blacklist.clone(),n.internalTests=Object.assign({},this.internalTests),n.exclusiveTests=Object.assign({},this.exclusiveTests),n.deps=[...this.deps],n.conditions=[...this.conditions],n.tests=[...this.tests],n.transforms=[...this.transforms],n.spec=Za(Object.assign({},this.spec,e)),n}label(e){let n=this.clone();return n.spec.label=e,n}meta(...e){if(e.length===0)return this.spec.meta;let n=this.clone();return n.spec.meta=Object.assign(n.spec.meta||{},e[0]),n}withMutation(e){let n=this._mutate;this._mutate=!0;let r=e(this);return this._mutate=n,r}concat(e){if(!e||e===this)return this;if(e.type!==this.type&&this.type!=="mixed")throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${e.type}`);let n=this,r=e.clone();const i=Object.assign({},n.spec,r.spec);return r.spec=i,r.internalTests=Object.assign({},n.internalTests,r.internalTests),r._whitelist=n._whitelist.merge(e._whitelist,e._blacklist),r._blacklist=n._blacklist.merge(e._blacklist,e._whitelist),r.tests=n.tests,r.exclusiveTests=n.exclusiveTests,r.withMutation(s=>{e.tests.forEach(a=>{s.test(a.OPTIONS)})}),r.transforms=[...n.transforms,...r.transforms],r}isType(e){return e==null?!!(this.spec.nullable&&e===null||this.spec.optional&&e===void 0):this._typeCheck(e)}resolve(e){let n=this;if(n.conditions.length){let r=n.conditions;n=n.clone(),n.conditions=[],n=r.reduce((i,s)=>s.resolve(i,e),n),n=n.resolve(e)}return n}resolveOptions(e){var n,r,i,s;return Object.assign({},e,{from:e.from||[],strict:(n=e.strict)!=null?n:this.spec.strict,abortEarly:(r=e.abortEarly)!=null?r:this.spec.abortEarly,recursive:(i=e.recursive)!=null?i:this.spec.recursive,disableStackTrace:(s=e.disableStackTrace)!=null?s:this.spec.disableStackTrace})}cast(e,n={}){let r=this.resolve(Object.assign({},n,{value:e})),i=n.assert==="ignore-optionality",s=r._cast(e,n);if(n.assert!==!1&&!r.isType(s)){if(i&&Ai(s))return s;let a=Pi(e),l=Pi(s);throw new TypeError(`The value of ${n.path||"field"} could not be cast to a value that satisfies the schema type: "${r.type}". 

attempted value: ${a} 
`+(l!==a?`result of cast: ${l}`:""))}return s}_cast(e,n){let r=e===void 0?e:this.transforms.reduce((i,s)=>s.call(this,i,e,this,n),e);return r===void 0&&(r=this.getDefault(n)),r}_validate(e,n={},r,i){let{path:s,originalValue:a=e,strict:l=this.spec.strict}=n,u=e;l||(u=this._cast(u,Object.assign({assert:!1},n)));let d=[];for(let f of Object.values(this.internalTests))f&&d.push(f);this.runTests({path:s,value:u,originalValue:a,options:n,tests:d},r,f=>{if(f.length)return i(f,u);this.runTests({path:s,value:u,originalValue:a,options:n,tests:this.tests},r,i)})}runTests(e,n,r){let i=!1,{tests:s,value:a,originalValue:l,path:u,options:d}=e,f=_=>{i||(i=!0,n(_,a))},p=_=>{i||(i=!0,r(_,a))},m=s.length,v=[];if(!m)return p([]);let b={value:a,originalValue:l,path:u,options:d,schema:this};for(let _=0;_<s.length;_++){const w=s[_];w(b,f,function(C){C&&(Array.isArray(C)?v.push(...C):v.push(C)),--m<=0&&p(v)})}}asNestedTest({key:e,index:n,parent:r,parentPath:i,originalParent:s,options:a}){const l=e??n;if(l==null)throw TypeError("Must include `key` or `index` for nested validations");const u=typeof l=="number";let d=r[l];const f=Object.assign({},a,{strict:!0,parent:r,value:d,originalValue:s[l],key:void 0,[u?"index":"key"]:l,path:u||l.includes(".")?`${i||""}[${u?l:`"${l}"`}]`:(i?`${i}.`:"")+e});return(p,m,v)=>this.resolve(f)._validate(d,f,m,v)}validate(e,n){var r;let i=this.resolve(Object.assign({},n,{value:e})),s=(r=n?.disableStackTrace)!=null?r:i.spec.disableStackTrace;return new Promise((a,l)=>i._validate(e,n,(u,d)=>{Pn.isError(u)&&(u.value=d),l(u)},(u,d)=>{u.length?l(new Pn(u,d,void 0,void 0,s)):a(d)}))}validateSync(e,n){var r;let i=this.resolve(Object.assign({},n,{value:e})),s,a=(r=n?.disableStackTrace)!=null?r:i.spec.disableStackTrace;return i._validate(e,Object.assign({},n,{sync:!0}),(l,u)=>{throw Pn.isError(l)&&(l.value=u),l},(l,u)=>{if(l.length)throw new Pn(l,e,void 0,void 0,a);s=u}),s}isValid(e,n){return this.validate(e,n).then(()=>!0,r=>{if(Pn.isError(r))return!1;throw r})}isValidSync(e,n){try{return this.validateSync(e,n),!0}catch(r){if(Pn.isError(r))return!1;throw r}}_getDefault(e){let n=this.spec.default;return n==null?n:typeof n=="function"?n.call(this,e):Za(n)}getDefault(e){return this.resolve(e||{})._getDefault(e)}default(e){return arguments.length===0?this._getDefault():this.clone({default:e})}strict(e=!0){return this.clone({strict:e})}nullability(e,n){const r=this.clone({nullable:e});return r.internalTests.nullable=qa({message:n,name:"nullable",test(i){return i===null?this.schema.spec.nullable:!0}}),r}optionality(e,n){const r=this.clone({optional:e});return r.internalTests.optionality=qa({message:n,name:"optionality",test(i){return i===void 0?this.schema.spec.optional:!0}}),r}optional(){return this.optionality(!0)}defined(e=ni.defined){return this.optionality(!1,e)}nullable(){return this.nullability(!0)}nonNullable(e=ni.notNull){return this.nullability(!1,e)}required(e=ni.required){return this.clone().withMutation(n=>n.nonNullable(e).defined(e))}notRequired(){return this.clone().withMutation(e=>e.nullable().optional())}transform(e){let n=this.clone();return n.transforms.push(e),n}test(...e){let n;if(e.length===1?typeof e[0]=="function"?n={test:e[0]}:n=e[0]:e.length===2?n={name:e[0],test:e[1]}:n={name:e[0],message:e[1],test:e[2]},n.message===void 0&&(n.message=ni.default),typeof n.test!="function")throw new TypeError("`test` is a required parameters");let r=this.clone(),i=qa(n),s=n.exclusive||n.name&&r.exclusiveTests[n.name]===!0;if(n.exclusive&&!n.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return n.name&&(r.exclusiveTests[n.name]=!!n.exclusive),r.tests=r.tests.filter(a=>!(a.OPTIONS.name===n.name&&(s||a.OPTIONS.test===i.OPTIONS.test))),r.tests.push(i),r}when(e,n){!Array.isArray(e)&&typeof e!="string"&&(n=e,e=".");let r=this.clone(),i=fx(e).map(s=>new va(s));return i.forEach(s=>{s.isSibling&&r.deps.push(s.key)}),r.conditions.push(typeof n=="function"?new hd(i,n):hd.fromOptions(i,n)),r}typeError(e){let n=this.clone();return n.internalTests.typeError=qa({message:e,name:"typeError",skipAbsent:!0,test(r){return this.schema._typeCheck(r)?!0:this.createError({params:{type:this.schema.type}})}}),n}oneOf(e,n=ni.oneOf){let r=this.clone();return e.forEach(i=>{r._whitelist.add(i),r._blacklist.delete(i)}),r.internalTests.whiteList=qa({message:n,name:"oneOf",skipAbsent:!0,test(i){let s=this.schema._whitelist,a=s.resolveAll(this.resolve);return a.includes(i)?!0:this.createError({params:{values:Array.from(s).join(", "),resolved:a}})}}),r}notOneOf(e,n=ni.notOneOf){let r=this.clone();return e.forEach(i=>{r._blacklist.add(i),r._whitelist.delete(i)}),r.internalTests.blacklist=qa({message:n,name:"notOneOf",test(i){let s=this.schema._blacklist,a=s.resolveAll(this.resolve);return a.includes(i)?this.createError({params:{values:Array.from(s).join(", "),resolved:a}}):!0}}),r}strip(e=!0){let n=this.clone();return n.spec.strip=e,n}describe(e){const n=(e?this.resolve(e):this).clone(),{label:r,meta:i,optional:s,nullable:a}=n.spec;return{meta:i,label:r,optional:s,nullable:a,default:n.getDefault(e),type:n.type,oneOf:n._whitelist.describe(),notOneOf:n._blacklist.describe(),tests:n.tests.filter((u,d,f)=>f.findIndex(p=>p.OPTIONS.name===u.OPTIONS.name)===d).map(u=>{const d=u.OPTIONS.params&&e?mx(Object.assign({},u.OPTIONS.params),e):u.OPTIONS.params;return{name:u.OPTIONS.name,params:d}})}}get"~standard"(){const e=this;return{version:1,vendor:"yup",async validate(r){try{return{value:await e.validate(r,{abortEarly:!1})}}catch(i){if(i instanceof Pn)return{issues:yx(i)};throw i}}}}}Dr.prototype.__isYupSchema__=!0;for(const t of["validate","validateSync"])Dr.prototype[`${t}At`]=function(e,n,r={}){const{parent:i,parentPath:s,schema:a}=DO(this,e,n,r.context);return a[t](i&&i[s],Object.assign({},r,{parent:i,path:e}))};for(const t of["equals","is"])Dr.prototype[t]=Dr.prototype.oneOf;for(const t of["not","nope"])Dr.prototype[t]=Dr.prototype.notOneOf;const RO=/^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,.](\d{1,}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;function OO(t){const e=dg(t);if(!e)return Date.parse?Date.parse(t):Number.NaN;if(e.z===void 0&&e.plusMinus===void 0)return new Date(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond).valueOf();let n=0;return e.z!=="Z"&&e.plusMinus!==void 0&&(n=e.hourOffset*60+e.minuteOffset,e.plusMinus==="+"&&(n=0-n)),Date.UTC(e.year,e.month,e.day,e.hour,e.minute+n,e.second,e.millisecond)}function dg(t){var e,n;const r=RO.exec(t);return r?{year:_i(r[1]),month:_i(r[2],1)-1,day:_i(r[3],1),hour:_i(r[4]),minute:_i(r[5]),second:_i(r[6]),millisecond:r[7]?_i(r[7].substring(0,3)):0,precision:(e=(n=r[7])==null?void 0:n.length)!=null?e:void 0,z:r[8]||void 0,plusMinus:r[9]||void 0,hourOffset:_i(r[10]),minuteOffset:_i(r[11])}:null}function _i(t,e=0){return Number(t)||e}let MO=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,NO=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,IO=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,PO="^\\d{4}-\\d{2}-\\d{2}",LO="\\d{2}:\\d{2}:\\d{2}",FO="(([+-]\\d{2}(:?\\d{2})?)|Z)",jO=new RegExp(`${PO}T${LO}(\\.\\d+)?${FO}$`),zO=t=>Ai(t)||t===t.trim(),HO={}.toString();function Zn(){return new bx}class bx extends Dr{constructor(){super({type:"string",check(e){return e instanceof String&&(e=e.valueOf()),typeof e=="string"}}),this.withMutation(()=>{this.transform((e,n)=>{if(!this.spec.coerce||this.isType(e)||Array.isArray(e))return e;const r=e!=null&&e.toString?e.toString():e;return r===HO?e:r})})}required(e){return super.required(e).withMutation(n=>n.test({message:e||ni.required,name:"required",skipAbsent:!0,test:r=>!!r.length}))}notRequired(){return super.notRequired().withMutation(e=>(e.tests=e.tests.filter(n=>n.OPTIONS.name!=="required"),e))}length(e,n=Kn.length){return this.test({message:n,name:"length",exclusive:!0,params:{length:e},skipAbsent:!0,test(r){return r.length===this.resolve(e)}})}min(e,n=Kn.min){return this.test({message:n,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(r){return r.length>=this.resolve(e)}})}max(e,n=Kn.max){return this.test({name:"max",exclusive:!0,message:n,params:{max:e},skipAbsent:!0,test(r){return r.length<=this.resolve(e)}})}matches(e,n){let r=!1,i,s;return n&&(typeof n=="object"?{excludeEmptyString:r=!1,message:i,name:s}=n:i=n),this.test({name:s||"matches",message:i||Kn.matches,params:{regex:e},skipAbsent:!0,test:a=>a===""&&r||a.search(e)!==-1})}email(e=Kn.email){return this.matches(MO,{name:"email",message:e,excludeEmptyString:!0})}url(e=Kn.url){return this.matches(NO,{name:"url",message:e,excludeEmptyString:!0})}uuid(e=Kn.uuid){return this.matches(IO,{name:"uuid",message:e,excludeEmptyString:!1})}datetime(e){let n="",r,i;return e&&(typeof e=="object"?{message:n="",allowOffset:r=!1,precision:i=void 0}=e:n=e),this.matches(jO,{name:"datetime",message:n||Kn.datetime,excludeEmptyString:!0}).test({name:"datetime_offset",message:n||Kn.datetime_offset,params:{allowOffset:r},skipAbsent:!0,test:s=>{if(!s||r)return!0;const a=dg(s);return a?!!a.z:!1}}).test({name:"datetime_precision",message:n||Kn.datetime_precision,params:{precision:i},skipAbsent:!0,test:s=>{if(!s||i==null)return!0;const a=dg(s);return a?a.precision===i:!1}})}ensure(){return this.default("").transform(e=>e===null?"":e)}trim(e=Kn.trim){return this.transform(n=>n!=null?n.trim():n).test({message:e,name:"trim",test:zO})}lowercase(e=Kn.lowercase){return this.transform(n=>Ai(n)?n:n.toLowerCase()).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:n=>Ai(n)||n===n.toLowerCase()})}uppercase(e=Kn.uppercase){return this.transform(n=>Ai(n)?n:n.toUpperCase()).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:n=>Ai(n)||n===n.toUpperCase()})}}Zn.prototype=bx.prototype;let UO=t=>t!=+t;function an(){return new _x}class _x extends Dr{constructor(){super({type:"number",check(e){return e instanceof Number&&(e=e.valueOf()),typeof e=="number"&&!UO(e)}}),this.withMutation(()=>{this.transform((e,n)=>{if(!this.spec.coerce)return e;let r=e;if(typeof r=="string"){if(r=r.replace(/\s/g,""),r==="")return NaN;r=+r}return this.isType(r)||r===null?r:parseFloat(r)})})}min(e,n=ds.min){return this.test({message:n,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(r){return r>=this.resolve(e)}})}max(e,n=ds.max){return this.test({message:n,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(r){return r<=this.resolve(e)}})}lessThan(e,n=ds.lessThan){return this.test({message:n,name:"max",exclusive:!0,params:{less:e},skipAbsent:!0,test(r){return r<this.resolve(e)}})}moreThan(e,n=ds.moreThan){return this.test({message:n,name:"min",exclusive:!0,params:{more:e},skipAbsent:!0,test(r){return r>this.resolve(e)}})}positive(e=ds.positive){return this.moreThan(0,e)}negative(e=ds.negative){return this.lessThan(0,e)}integer(e=ds.integer){return this.test({name:"integer",message:e,skipAbsent:!0,test:n=>Number.isInteger(n)})}truncate(){return this.transform(e=>Ai(e)?e:e|0)}round(e){var n;let r=["ceil","floor","round","trunc"];if(e=((n=e)==null?void 0:n.toLowerCase())||"round",e==="trunc")return this.truncate();if(r.indexOf(e.toLowerCase())===-1)throw new TypeError("Only valid options for round() are: "+r.join(", "));return this.transform(i=>Ai(i)?i:Math[e](i))}}an.prototype=_x.prototype;let Sx=new Date(""),BO=t=>Object.prototype.toString.call(t)==="[object Date]";function Sl(){return new tc}class tc extends Dr{constructor(){super({type:"date",check(e){return BO(e)&&!isNaN(e.getTime())}}),this.withMutation(()=>{this.transform((e,n)=>!this.spec.coerce||this.isType(e)||e===null?e:(e=OO(e),isNaN(e)?tc.INVALID_DATE:new Date(e)))})}prepareParam(e,n){let r;if(va.isRef(e))r=e;else{let i=this.cast(e);if(!this._typeCheck(i))throw new TypeError(`\`${n}\` must be a Date or a value that can be \`cast()\` to a Date`);r=i}return r}min(e,n=ug.min){let r=this.prepareParam(e,"min");return this.test({message:n,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(i){return i>=this.resolve(r)}})}max(e,n=ug.max){let r=this.prepareParam(e,"max");return this.test({message:n,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(i){return i<=this.resolve(r)}})}}tc.INVALID_DATE=Sx;Sl.prototype=tc.prototype;Sl.INVALID_DATE=Sx;function WO(t,e=[]){let n=[],r=new Set,i=new Set(e.map(([a,l])=>`${a}-${l}`));function s(a,l){let u=ia.split(a)[0];r.add(u),i.has(`${l}-${u}`)||n.push([l,u])}for(const a of Object.keys(t)){let l=t[a];r.add(a),va.isRef(l)&&l.isSibling?s(l.path,a):Qd(l)&&"deps"in l&&l.deps.forEach(u=>s(u,a))}return vO.array(Array.from(r),n).reverse()}function R0(t,e){let n=1/0;return t.some((r,i)=>{var s;if((s=e.path)!=null&&s.includes(r))return n=i,!0}),n}function wx(t){return(e,n)=>R0(t,e)-R0(t,n)}const xx=(t,e,n)=>{if(typeof t!="string")return t;let r=t;try{r=JSON.parse(t)}catch{}return n.isType(r)?r:t};function Ju(t){if("fields"in t){const e={};for(const[n,r]of Object.entries(t.fields))e[n]=Ju(r);return t.setFields(e)}if(t.type==="array"){const e=t.optional();return e.innerType&&(e.innerType=Ju(e.innerType)),e}return t.type==="tuple"?t.optional().clone({types:t.spec.types.map(Ju)}):"optional"in t?t.optional():t}const VO=(t,e)=>{const n=[...ia.normalizePath(e)];if(n.length===1)return n[0]in t;let r=n.pop(),i=ia.getter(ia.join(n),!0)(t);return!!(i&&r in i)};let O0=t=>Object.prototype.toString.call(t)==="[object Object]";function M0(t,e){let n=Object.keys(t.fields);return Object.keys(e).filter(r=>n.indexOf(r)===-1)}const $O=wx([]);function Ds(t){return new Ex(t)}class Ex extends Dr{constructor(e){super({type:"object",check(n){return O0(n)||typeof n=="function"}}),this.fields=Object.create(null),this._sortErrors=$O,this._nodes=[],this._excludedEdges=[],this.withMutation(()=>{e&&this.shape(e)})}_cast(e,n={}){var r;let i=super._cast(e,n);if(i===void 0)return this.getDefault(n);if(!this._typeCheck(i))return i;let s=this.fields,a=(r=n.stripUnknown)!=null?r:this.spec.noUnknown,l=[].concat(this._nodes,Object.keys(i).filter(p=>!this._nodes.includes(p))),u={},d=Object.assign({},n,{parent:u,__validating:n.__validating||!1}),f=!1;for(const p of l){let m=s[p],v=p in i,b=i[p];if(m){let _;d.path=(n.path?`${n.path}.`:"")+p,m=m.resolve({value:b,context:n.context,parent:u});let w=m instanceof Dr?m.spec:void 0,x=w?.strict;if(w!=null&&w.strip){f=f||p in i;continue}_=!n.__validating||!x?m.cast(b,d):b,_!==void 0&&(u[p]=_)}else v&&!a&&(u[p]=b);(v!==p in u||u[p]!==b)&&(f=!0)}return f?u:i}_validate(e,n={},r,i){let{from:s=[],originalValue:a=e,recursive:l=this.spec.recursive}=n;n.from=[{schema:this,value:a},...s],n.__validating=!0,n.originalValue=a,super._validate(e,n,r,(u,d)=>{if(!l||!O0(d)){i(u,d);return}a=a||d;let f=[];for(let p of this._nodes){let m=this.fields[p];!m||va.isRef(m)||f.push(m.asNestedTest({options:n,key:p,parent:d,parentPath:n.path,originalParent:a}))}this.runTests({tests:f,value:d,originalValue:a,options:n},r,p=>{i(p.sort(this._sortErrors).concat(u),d)})})}clone(e){const n=super.clone(e);return n.fields=Object.assign({},this.fields),n._nodes=this._nodes,n._excludedEdges=this._excludedEdges,n._sortErrors=this._sortErrors,n}concat(e){let n=super.concat(e),r=n.fields;for(let[i,s]of Object.entries(this.fields)){const a=r[i];r[i]=a===void 0?s:a}return n.withMutation(i=>i.setFields(r,[...this._excludedEdges,...e._excludedEdges]))}_getDefault(e){if("default"in this.spec)return super._getDefault(e);if(!this._nodes.length)return;let n={};return this._nodes.forEach(r=>{var i;const s=this.fields[r];let a=e;(i=a)!=null&&i.value&&(a=Object.assign({},a,{parent:a.value,value:a.value[r]})),n[r]=s&&"getDefault"in s?s.getDefault(a):void 0}),n}setFields(e,n){let r=this.clone();return r.fields=e,r._nodes=WO(e,n),r._sortErrors=wx(Object.keys(e)),n&&(r._excludedEdges=n),r}shape(e,n=[]){return this.clone().withMutation(r=>{let i=r._excludedEdges;return n.length&&(Array.isArray(n[0])||(n=[n]),i=[...r._excludedEdges,...n]),r.setFields(Object.assign(r.fields,e),i)})}partial(){const e={};for(const[n,r]of Object.entries(this.fields))e[n]="optional"in r&&r.optional instanceof Function?r.optional():r;return this.setFields(e)}deepPartial(){return Ju(this)}pick(e){const n={};for(const r of e)this.fields[r]&&(n[r]=this.fields[r]);return this.setFields(n,this._excludedEdges.filter(([r,i])=>e.includes(r)&&e.includes(i)))}omit(e){const n=[];for(const r of Object.keys(this.fields))e.includes(r)||n.push(r);return this.pick(n)}from(e,n,r){let i=ia.getter(e,!0);return this.transform(s=>{if(!s)return s;let a=s;return VO(s,e)&&(a=Object.assign({},s),r||delete a[e],a[n]=i(s)),a})}json(){return this.transform(xx)}exact(e){return this.test({name:"exact",exclusive:!0,message:e||Zu.exact,test(n){if(n==null)return!0;const r=M0(this.schema,n);return r.length===0||this.createError({params:{properties:r.join(", ")}})}})}stripUnknown(){return this.clone({noUnknown:!0})}noUnknown(e=!0,n=Zu.noUnknown){typeof e!="boolean"&&(n=e,e=!0);let r=this.test({name:"noUnknown",exclusive:!0,message:n,test(i){if(i==null)return!0;const s=M0(this.schema,i);return!e||s.length===0||this.createError({params:{unknown:s.join(", ")}})}});return r.spec.noUnknown=e,r}unknown(e=!0,n=Zu.noUnknown){return this.noUnknown(!e,n)}transformKeys(e){return this.transform(n=>{if(!n)return n;const r={};for(const i of Object.keys(n))r[e(i)]=n[i];return r})}camelCase(){return this.transformKeys(vp.camelCase)}snakeCase(){return this.transformKeys(vp.snakeCase)}constantCase(){return this.transformKeys(e=>vp.snakeCase(e).toUpperCase())}describe(e){const n=(e?this.resolve(e):this).clone(),r=super.describe(e);r.fields={};for(const[s,a]of Object.entries(n.fields)){var i;let l=e;(i=l)!=null&&i.value&&(l=Object.assign({},l,{parent:l.value,value:l.value[s]})),r.fields[s]=a.describe(l)}return r}}Ds.prototype=Ex.prototype;function Cx(t){return new Tx(t)}class Tx extends Dr{constructor(e){super({type:"array",spec:{types:e},check(n){return Array.isArray(n)}}),this.innerType=void 0,this.innerType=e}_cast(e,n){const r=super._cast(e,n);if(!this._typeCheck(r)||!this.innerType)return r;let i=!1;const s=r.map((a,l)=>{const u=this.innerType.cast(a,Object.assign({},n,{path:`${n.path||""}[${l}]`,parent:r,originalValue:a,value:a,index:l}));return u!==a&&(i=!0),u});return i?s:r}_validate(e,n={},r,i){var s;let a=this.innerType,l=(s=n.recursive)!=null?s:this.spec.recursive;n.originalValue!=null&&n.originalValue,super._validate(e,n,r,(u,d)=>{var f;if(!l||!a||!this._typeCheck(d)){i(u,d);return}let p=new Array(d.length);for(let v=0;v<d.length;v++){var m;p[v]=a.asNestedTest({options:n,index:v,parent:d,parentPath:n.path,originalParent:(m=n.originalValue)!=null?m:e})}this.runTests({value:d,tests:p,originalValue:(f=n.originalValue)!=null?f:e,options:n},r,v=>i(v.concat(u),d))})}clone(e){const n=super.clone(e);return n.innerType=this.innerType,n}json(){return this.transform(xx)}concat(e){let n=super.concat(e);return n.innerType=this.innerType,e.innerType&&(n.innerType=n.innerType?n.innerType.concat(e.innerType):e.innerType),n}of(e){let n=this.clone();if(!Qd(e))throw new TypeError("`array.of()` sub-schema must be a valid yup schema not: "+Pi(e));return n.innerType=e,n.spec=Object.assign({},n.spec,{types:e}),n}length(e,n=Xu.length){return this.test({message:n,name:"length",exclusive:!0,params:{length:e},skipAbsent:!0,test(r){return r.length===this.resolve(e)}})}min(e,n){return n=n||Xu.min,this.test({message:n,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(r){return r.length>=this.resolve(e)}})}max(e,n){return n=n||Xu.max,this.test({message:n,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(r){return r.length<=this.resolve(e)}})}ensure(){return this.default(()=>[]).transform((e,n)=>this._typeCheck(e)?e:n==null?[]:[].concat(n))}compact(e){let n=e?(r,i,s)=>!e(r,i,s):r=>!!r;return this.transform(r=>r!=null?r.filter(n):r)}describe(e){const n=(e?this.resolve(e):this).clone(),r=super.describe(e);if(n.innerType){var i;let s=e;(i=s)!=null&&i.value&&(s=Object.assign({},s,{parent:s.value,value:s.value[0]})),r.innerType=n.innerType.describe(s)}return r}}Cx.prototype=Tx.prototype;const Pt=Zn().required("This field is required");an().required("This field is required").min(0,"Value must be at least 0");const ei=an().nullable().transform(t=>isNaN(t)?null:t).min(0,"Value must be at least 0"),qO=t=>t.bag_width&&t.bag_step?t.bag_width>=t.bag_step:!0,GO=Ds({machine_name:Pt.min(2,"Machine name must be at least 2 characters").max(100,"Machine name must be at most 100 characters").matches(/^[a-zA-Z0-9\s\-_]+$/,"Machine name can only contain letters, numbers, spaces, hyphens, and underscores"),machine_type:Pt,department:Pt.oneOf(["STAMPA","CONFEZIONAMENTO"],"Invalid department"),work_center:Pt.oneOf(["ZANICA","BUSTO_GAROLFO"],"Invalid work center"),status:Pt.oneOf(["ACTIVE","INACTIVE"],"Invalid status"),min_web_width:ei,max_web_width:ei,min_bag_height:ei,max_bag_height:ei,standard_speed:ei,setup_time_standard:ei,changeover_color:ei,changeover_material:ei,active_shifts:Cx().of(Zn().oneOf(["T1","T2","T3"]))}).test("web-width-logic","Minimum web width cannot exceed maximum web width",function(t){return t.min_web_width&&t.max_web_width?t.min_web_width<=t.max_web_width:!0}).test("bag-height-logic","Minimum bag height cannot exceed maximum bag height",function(t){return t.min_bag_height&&t.max_bag_height?t.min_bag_height<=t.max_bag_height:!0}),YO=Ds({name:Pt.min(2,"Phase name must be at least 2 characters").max(100,"Phase name must be at most 100 characters"),department:Pt.oneOf(["STAMPA","CONFEZIONAMENTO"],"Invalid department"),work_center:Pt.oneOf(["ZANICA","BUSTO_GAROLFO"],"Invalid work center"),numero_persone:an().required("Number of people is required").min(1,"Number of people must be at least 1"),bag_width:ei,bag_step:ei,v_stampa:an().nullable().transform(t=>isNaN(t)?null:t).when("department",{is:"STAMPA",then:t=>t.min(0,"Printing speed must be greater than 0")}),t_setup_stampa:an().nullable().transform(t=>isNaN(t)?null:t).when("department",{is:"STAMPA",then:t=>t.min(0,"Setup time cannot be negative")}),costo_h_stampa:an().nullable().transform(t=>isNaN(t)?null:t).when("department",{is:"STAMPA",then:t=>t.min(0,"Hourly cost cannot be negative")}),v_conf:an().nullable().transform(t=>isNaN(t)?null:t).when("department",{is:"CONFEZIONAMENTO",then:t=>t.min(0,"Packaging speed must be greater than 0")}),t_setup_conf:an().nullable().transform(t=>isNaN(t)?null:t).when("department",{is:"CONFEZIONAMENTO",then:t=>t.min(0,"Setup time cannot be negative")}),costo_h_conf:an().nullable().transform(t=>isNaN(t)?null:t).when("department",{is:"CONFEZIONAMENTO",then:t=>t.min(0,"Hourly cost cannot be negative")})}).test("bag-width-step-logic","Bag width cannot be less than bag step",qO),N0=Ds({odp_number:Pt.min(1,"Il numero ODP  obbligatorio"),article_code:Pt.min(1,"Il codice articolo  obbligatorio"),work_center:Pt.oneOf(["ZANICA","BUSTO_GAROLFO"],"Seleziona un centro di lavoro valido"),nome_cliente:Pt.min(1,"Il nome del cliente  obbligatorio"),quantity:an().required("La quantit  obbligatoria").min(0,"La quantit deve essere maggiore o uguale a 0").typeError("La quantit deve essere un numero valido"),delivery_date:Sl().required("La data di consegna  obbligatoria").typeError("Inserisci una data di consegna valida"),customer_order_ref:Pt.min(1,"Il riferimento ordine cliente  obbligatorio"),department:Pt.oneOf(["STAMPA","CONFEZIONAMENTO"],"Seleziona un reparto valido"),status:Zn().oneOf(["NOT SCHEDULED","SCHEDULED","IN PROGRESS","COMPLETED","CANCELLED"],"Stato non valido").default("NOT SCHEDULED"),quantity_completed:an().min(0,"La quantit completata deve essere maggiore o uguale a 0").default(0),production_lot:Zn().nullable(),description:Zn().nullable(),bag_height:an().nullable().transform(t=>isNaN(t)?null:t).min(0,"L'altezza busta deve essere maggiore o uguale a 0"),bag_width:an().nullable().transform(t=>isNaN(t)?null:t).min(0,"La larghezza busta deve essere maggiore o uguale a 0"),bag_step:an().nullable().transform(t=>isNaN(t)?null:t).min(0,"Il passo busta deve essere maggiore o uguale a 0"),seal_sides:an().nullable().transform(t=>isNaN(t)?null:t).oneOf([3,4],"I lati di sigillatura devono essere 3 o 4"),product_type:Zn().nullable().oneOf(["CREMA","LIQUIDO","POLVERI"],"Seleziona un tipo di prodotto valido"),internal_customer_code:Zn().nullable().test("not-empty-if-provided","Il codice cliente interno non pu essere vuoto",function(t){return!t||t.trim().length>0}),external_customer_code:Zn().nullable().test("not-empty-if-provided","Il codice cliente esterno non pu essere vuoto",function(t){return!t||t.trim().length>0}),fase:Zn().nullable(),duration:an().nullable().transform(t=>isNaN(t)?null:t).min(0,"La durata deve essere maggiore o uguale a 0"),cost:an().nullable().transform(t=>isNaN(t)?null:t).min(0,"Il costo deve essere maggiore o uguale a 0"),scheduled_start_time:Sl().nullable(),scheduled_end_time:Sl().nullable(),scheduled_machine_id:Zn().nullable(),user_notes:Zn().nullable(),asd_notes:Zn().nullable(),material_availability_global:an().nullable().transform(t=>isNaN(t)?null:t).min(0,"Material availability must be between 0 and 100").max(100,"Material availability must be between 0 and 100")}).test("bag-width-step-logic","La larghezza busta non pu essere minore del passo busta",function(t){return t.bag_width&&t.bag_step?t.bag_width>=t.bag_step:!0}).test("quantity-completed-logic","La quantit completata non pu superare la quantit totale",function(t){return t.quantity&&t.quantity_completed!==void 0?t.quantity_completed<=t.quantity:!0}).test("scheduled-time-order","L'ora di fine programmata deve essere dopo l'ora di inizio",function(t){return t.scheduled_start_time&&t.scheduled_end_time?new Date(t.scheduled_end_time)>new Date(t.scheduled_start_time):!0}).test("scheduling-logic","I campi di programmazione devono essere tutti forniti o tutti nulli",function(t){const e=!!t.scheduled_start_time,n=!!t.scheduled_end_time,r=!!t.scheduled_machine_id;return e&&n&&r||!e&&!n&&!r}),QO=Ds({startDate:Pt,startTime:Pt,endDate:Pt,endTime:Pt}).test("date-logic","End date cannot be before start date",function(t){return t.startDate&&t.endDate?new Date(t.startDate)<=new Date(t.endDate):!0}).test("time-logic","End time must be after start time when dates are the same",function(t){return t.startDate&&t.endDate&&t.startDate===t.endDate&&t.startTime&&t.endTime?t.startTime<t.endTime:!0}),KO=Ds({email:Pt.email("Please enter a valid email address"),password:Pt.min(6,"Password must be at least 6 characters")}),ZO=Ds({email:Pt.email("Please enter a valid email address"),password:Pt.min(6,"Password must be at least 6 characters"),confirmPassword:Zn().required("Please confirm your password")}).test("passwords-match","Passwords must match",function(t){return t.password===t.confirmPassword}),XO=Ds({email:Pt.email("Please enter a valid email address")}),JO=(t,e)=>{try{return e.validateSync(t,{abortEarly:!1}),{isValid:!0,errors:{}}}catch(n){const r={};return n.inner.forEach(i=>{r[i.path]=i.message}),{isValid:!1,errors:r}}},eM={MACHINE:GO,PHASE:YO,ORDER:N0,BACKLOG:N0,OFF_TIME:QO,LOGIN:KO,SIGNUP:ZO,FORGOT_PASSWORD:XO},tM=()=>{const t=T.useCallback((m,v)=>{const b=eM[v];if(!b)throw new Error(`Unknown schema type: ${v}`);return JO(m,b)},[]),e=T.useCallback(m=>t(m,"MACHINE"),[t]),n=T.useCallback(m=>t(m,"PHASE"),[t]),r=T.useCallback(m=>t(m,"ORDER"),[t]),i=T.useCallback(m=>t(m,"OFF_TIME"),[t]),s=T.useCallback((m,v)=>t(m,v),[t]),a=T.useCallback((m,v)=>{const b={};return v.some(w=>w.scheduled_machine_id===m)&&(b.general="Cannot delete machine with scheduled tasks. Please unschedule all tasks first."),{isValid:Object.keys(b).length===0,errors:b}},[]),l=T.useCallback(m=>{const v={};return m?(m.quantity_completed>0&&(v.general="Cannot delete order that has started production"),m.scheduled_machine_id&&(v.general="Cannot delete scheduled order. Please unschedule first."),{isValid:Object.keys(v).length===0,errors:v}):(v.general="Order is required",{isValid:!1,errors:v})},[]),u=T.useCallback((m,v,b,_)=>{const w={};return m?v?!b||!_?(w.general="Start and end times are required",{isValid:!1,errors:w}):(v.status!=="ACTIVE"&&(w.general=`Machine ${v.machine_name} is not active`),m.scheduled_machine_id&&m.scheduled_machine_id!==v.id&&(w.general="Order is already scheduled on a different machine"),m.fase||(w.general="Order must have a production phase selected"),(!m.quantity||m.quantity<=0)&&(w.general="Order must have a valid quantity"),(!m.duration||m.duration<=0)&&(w.general="Order must have calculated duration"),{isValid:Object.keys(w).length===0,errors:w}):(w.general="Machine is required",{isValid:!1,errors:w}):(w.general="Order is required",{isValid:!1,errors:w})},[]),d=T.useCallback((m,v)=>{const b={};if(!m)return b.general="Please select a production phase",{isValid:!1,errors:b};v.department&&m.department!==v.department&&(b.general=`Selected phase is for ${m.department} department, but order is for ${v.department}`),v.work_center&&m.work_center!==v.work_center&&(b.general=`Selected phase is for ${m.work_center} work center, but order is for ${v.work_center}`);const _=n(m);return _.isValid||Object.assign(b,_.errors),{isValid:Object.keys(b).length===0,errors:b}},[n]),f=T.useCallback((m,v)=>{if(m.status!=="ACTIVE")return!1;const b=m.active_shifts||[];if(b.length===0)return!1;const _=v.getUTCHours();return b.some(x=>{switch(x){case"T1":return _>=6&&_<14;case"T2":return _>=14&&_<22;case"T3":return _>=22||_<6;default:return!1}})},[]),p=T.useCallback(m=>({name:m?.machine_name||"Unknown Machine",type:m?.machine_type||"Unknown Type",department:m?.department||"Unknown Department",workCenter:m?.work_center||"Unknown Work Center",status:m?.status||"UNKNOWN",isActive:m?.status==="ACTIVE"}),[]);return{validate:t,validateMachine:e,validatePhase:n,validateOrder:r,validateOffTime:i,validateAuth:s,validateMachineDeletion:a,validateOrderDeletion:l,validateOrderScheduling:u,validatePhaseSelection:d,isMachineAvailable:f,getMachineDisplayInfo:p}},Xa=So((t,e)=>({phases:[],getPhases:()=>e().phases,getPhaseById:n=>e().phases.find(r=>r.id===n),setPhases:n=>t({phases:n||[]}),cleanupDuplicatePhases:()=>{const n=e(),r=[],i=new Set;n.phases.forEach(s=>{i.has(s.id)||(i.add(s.id),r.push(s))}),t({phases:r})},reset:()=>t({phases:[]})})),nM=(t,e,n=null)=>{const{entities:r}=Xa(),[i,s]=T.useState(""),[a,l]=T.useState(!1),[u,d]=T.useState(null),[f,p]=T.useState({}),m=T.useRef(null),v=T.useMemo(()=>!r||r.length===0?[]:t||e?r.filter(R=>(!t||R.department===t)&&(!e||R.work_center===e)).filter(R=>R.name.toLowerCase().includes(i.toLowerCase())):[],[i,t,e,r]);T.useEffect(()=>{if(n&&r&&r.length>0&&!u){const k=r.find(R=>R.id===n);k&&(d(k),s(k.name),p({v_stampa:k.v_stampa||null,t_setup_stampa:k.t_setup_stampa||null,costo_h_stampa:k.costo_h_stampa||null,v_conf:k.v_conf||null,t_setup_conf:k.t_setup_conf||null,costo_h_conf:k.costo_h_conf||null}))}},[n,r,u]),T.useEffect(()=>()=>{m.current&&clearTimeout(m.current)},[]);const b=T.useCallback((k,R)=>{const A=R===""?null:parseFloat(R);p(M=>({...M,[k]:A}))},[]),_=T.useCallback((k,R,A)=>{R("fase",k.id),d(k),s(k.name),l(!1),A("fase"),p({v_stampa:k.v_stampa||null,t_setup_stampa:k.t_setup_stampa||null,costo_h_stampa:k.costo_h_stampa||null,v_conf:k.v_conf||null,t_setup_conf:k.t_setup_conf||null,costo_h_conf:k.costo_h_conf||null})},[]),w=T.useCallback(()=>{s(""),d(null),p({})},[]),x=T.useCallback(()=>{m.current&&clearTimeout(m.current),m.current=setTimeout(()=>l(!1),150)},[]);return T.useMemo(()=>({phaseSearch:i,setPhaseSearch:s,isDropdownVisible:a,setIsDropdownVisible:l,selectedPhase:u,setSelectedPhase:d,filteredPhases:v,editablePhaseParams:f,setEditablePhaseParams:p,handlePhaseParamChange:b,handlePhaseSelect:_,resetPhaseData:w,handleBlur:x,blurTimeoutRef:m}),[i,a,u,v,f,p,b,_,w,x])},rM={APP:{FIRST_DAY_OF_WEEK:1}},iM=Object.prototype.toString;function sM(t,e){return iM.call(t)===`[object ${e}]`}function Dx(t){return sM(t,"Object")}function om(t){return!!(t&&t.then&&typeof t.then=="function")}function aM(t){return typeof t=="number"&&t!==t}function Eu(t){return t&&t.Math==Math?t:void 0}const Sn=typeof globalThis=="object"&&Eu(globalThis)||typeof window=="object"&&Eu(window)||typeof self=="object"&&Eu(self)||typeof global=="object"&&Eu(global)||(function(){return this})()||{};function kx(t,e,n){const r=n||Sn,i=r.__SENTRY__=r.__SENTRY__||{};return i[t]||(i[t]=e())}const Ax=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,oM="Sentry Logger ",I0=["debug","info","warn","error","log","assert","trace"],P0={};function Rx(t){if(!("console"in Sn))return t();const e=Sn.console,n={},r=Object.keys(P0);r.forEach(i=>{const s=P0[i];n[i]=e[i],e[i]=s});try{return t()}finally{r.forEach(i=>{e[i]=n[i]})}}function lM(){let t=!1;const e={enable:()=>{t=!0},disable:()=>{t=!1},isEnabled:()=>t};return Ax?I0.forEach(n=>{e[n]=(...r)=>{t&&Rx(()=>{Sn.console[n](`${oM}[${n}]:`,...r)})}}):I0.forEach(n=>{e[n]=()=>{}}),e}const Lt=lM();function jr(t){return fg(t,new Map)}function fg(t,e){if(cM(t)){const n=e.get(t);if(n!==void 0)return n;const r={};e.set(t,r);for(const i of Object.keys(t))typeof t[i]<"u"&&(r[i]=fg(t[i],e));return r}if(Array.isArray(t)){const n=e.get(t);if(n!==void 0)return n;const r=[];return e.set(t,r),t.forEach(i=>{r.push(fg(i,e))}),r}return t}function cM(t){if(!Dx(t))return!1;try{const e=Object.getPrototypeOf(t).constructor.name;return!e||e==="Object"}catch{return!0}}const yp="<anonymous>";function uM(t){try{return!t||typeof t!="function"?yp:t.name||yp}catch{return yp}}const ed={},L0={};function Ox(t,e){ed[t]=ed[t]||[],ed[t].push(e)}function Mx(t,e){L0[t]||(e(),L0[t]=!0)}function Nx(t,e){const n=t&&ed[t];if(n)for(const r of n)try{r(e)}catch(i){Ax&&Lt.error(`Error while triggering instrumentation handler.
Type: ${t}
Name: ${uM(r)}
Error:`,i)}}function nr(){const t=Sn,e=t.crypto||t.msCrypto;let n=()=>Math.random()*16;try{if(e&&e.randomUUID)return e.randomUUID().replace(/-/g,"");e&&e.getRandomValues&&(n=()=>{const r=new Uint8Array(1);return e.getRandomValues(r),r[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,r=>(r^(n()&15)>>r/4).toString(16))}function dM(t){return Array.isArray(t)?t:[t]}let Cu=null;function fM(t){const e="error";Ox(e,t),Mx(e,hM)}function hM(){Cu=Sn.onerror,Sn.onerror=function(t,e,n,r,i){return Nx("error",{column:r,error:i,line:n,msg:t,url:e}),Cu&&!Cu.__SENTRY_LOADER__?Cu.apply(this,arguments):!1},Sn.onerror.__SENTRY_INSTRUMENTED__=!0}let Tu=null;function pM(t){const e="unhandledrejection";Ox(e,t),Mx(e,gM)}function gM(){Tu=Sn.onunhandledrejection,Sn.onunhandledrejection=function(t){return Nx("unhandledrejection",t),Tu&&!Tu.__SENTRY_LOADER__?Tu.apply(this,arguments):!0},Sn.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}function mM(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function vM(){return!mM()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function ta(t,e){return t.require(e)}function yM(t){let e;try{e=ta(module,t)}catch{}try{const{cwd:n}=ta(module,"process");e=ta(module,`${n()}/node_modules/${t}`)}catch{}return e}var Ei;(function(t){t[t.PENDING=0]="PENDING";const n=1;t[t.RESOLVED=n]="RESOLVED";const r=2;t[t.REJECTED=r]="REJECTED"})(Ei||(Ei={}));class fs{constructor(e){fs.prototype.__init.call(this),fs.prototype.__init2.call(this),fs.prototype.__init3.call(this),fs.prototype.__init4.call(this),this._state=Ei.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(n){this._reject(n)}}then(e,n){return new fs((r,i)=>{this._handlers.push([!1,s=>{if(!e)r(s);else try{r(e(s))}catch(a){i(a)}},s=>{if(!n)i(s);else try{r(n(s))}catch(a){i(a)}}]),this._executeHandlers()})}catch(e){return this.then(n=>n,e)}finally(e){return new fs((n,r)=>{let i,s;return this.then(a=>{s=!1,i=a,e&&e()},a=>{s=!0,i=a,e&&e()}).then(()=>{if(s){r(i);return}n(i)})})}__init(){this._resolve=e=>{this._setResult(Ei.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(Ei.REJECTED,e)}}__init3(){this._setResult=(e,n)=>{if(this._state===Ei.PENDING){if(om(n)){n.then(this._resolve,this._reject);return}this._state=e,this._value=n,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===Ei.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach(n=>{n[0]||(this._state===Ei.RESOLVED&&n[1](this._value),this._state===Ei.REJECTED&&n[2](this._value),n[0]=!0)})}}}const Ix=1e3;function lm(){return Date.now()/Ix}function bM(){const{performance:t}=Sn;if(!t||!t.now)return lm;const e=Date.now()-t.now(),n=t.timeOrigin==null?e:t.timeOrigin;return()=>(n+t.now())/Ix}const Kd=bM();(()=>{const{performance:t}=Sn;if(!t||!t.now)return;const e=3600*1e3,n=t.now(),r=Date.now(),i=t.timeOrigin?Math.abs(t.timeOrigin+n-r):e,s=i<e,a=t.timing&&t.timing.navigationStart,u=typeof a=="number"?Math.abs(a+n-r):e,d=u<e;return s||d?i<=u?t.timeOrigin:a:r})();function _M(t=nr(),e=nr().substring(16),n){let r="";return n!==void 0&&(r=n?"-1":"-0"),`${t}-${e}${r}`}const mn=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Px="production";function SM(){return kx("globalEventProcessors",()=>[])}function hg(t,e,n,r=0){return new fs((i,s)=>{const a=t[r];if(e===null||typeof a!="function")i(e);else{const l=a({...e},n);mn&&a.id&&l===null&&Lt.log(`Event processor "${a.id}" dropped event`),om(l)?l.then(u=>hg(t,u,n,r+1).then(i)).then(null,s):hg(t,l,n,r+1).then(i).then(null,s)}})}function wM(t){const e=Kd(),n={sid:nr(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>EM(n)};return t&&Zd(n,t),n}function Zd(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),!t.did&&!e.did&&(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||Kd(),e.abnormal_mechanism&&(t.abnormal_mechanism=e.abnormal_mechanism),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=e.sid.length===32?e.sid:nr()),e.init!==void 0&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),typeof e.started=="number"&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if(typeof e.duration=="number")t.duration=e.duration;else{const n=t.timestamp-t.started;t.duration=n>=0?n:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),typeof e.errors=="number"&&(t.errors=e.errors),e.status&&(t.status=e.status)}function xM(t,e){let n={};t.status==="ok"&&(n={status:"exited"}),Zd(t,n)}function EM(t){return jr({sid:`${t.sid}`,init:t.init,started:new Date(t.started*1e3).toISOString(),timestamp:new Date(t.timestamp*1e3).toISOString(),status:t.status,errors:t.errors,did:typeof t.did=="number"||typeof t.did=="string"?`${t.did}`:void 0,duration:t.duration,abnormal_mechanism:t.abnormal_mechanism,attrs:{release:t.release,environment:t.environment,ip_address:t.ipAddress,user_agent:t.userAgent}})}const CM=0,Lx=1;function cm(t){const{spanId:e,traceId:n}=t.spanContext(),{data:r,op:i,parent_span_id:s,status:a,tags:l,origin:u}=ws(t);return jr({data:r,op:i,parent_span_id:s,span_id:e,status:a,tags:l,trace_id:n,origin:u})}function Fx(t){const{traceId:e,spanId:n}=t.spanContext(),r=zx(t);return _M(e,n,r)}function jx(t){return typeof t=="number"?F0(t):Array.isArray(t)?t[0]+t[1]/1e9:t instanceof Date?F0(t.getTime()):Kd()}function F0(t){return t>9999999999?t/1e3:t}function ws(t){return TM(t)?t.getSpanJSON():typeof t.toJSON=="function"?t.toJSON():{}}function TM(t){return typeof t.getSpanJSON=="function"}function zx(t){const{traceFlags:e}=t.spanContext();return!!(e&Lx)}function Hx(){return Xd().getClient()}function DM(){return Xd().getScope()}function gd(t){return t.transaction}function kM(t,e,n){const r=e.getOptions(),{publicKey:i}=e.getDsn()||{},{segment:s}=n&&n.getUser()||{},a=jr({environment:r.environment||Px,release:r.release,user_segment:s,public_key:i,trace_id:t});return e.emit&&e.emit("createDsc",a),a}function pg(t){const e=Hx();if(!e)return{};const n=kM(ws(t).trace_id||"",e,DM()),r=gd(t);if(!r)return n;const i=r&&r._frozenDynamicSamplingContext;if(i)return i;const{sampleRate:s,source:a}=r.metadata;s!=null&&(n.sample_rate=`${s}`);const l=ws(r);return a&&a!=="url"&&(n.transaction=l.description),n.sampled=String(zx(r)),e.emit&&e.emit("createDsc",n),n}function AM(t,e){const{fingerprint:n,span:r,breadcrumbs:i,sdkProcessingMetadata:s}=e;RM(t,e),r&&NM(t,r),IM(t,n),OM(t,i),MM(t,s)}function RM(t,e){const{extra:n,tags:r,user:i,contexts:s,level:a,transactionName:l}=e,u=jr(n);u&&Object.keys(u).length&&(t.extra={...u,...t.extra});const d=jr(r);d&&Object.keys(d).length&&(t.tags={...d,...t.tags});const f=jr(i);f&&Object.keys(f).length&&(t.user={...f,...t.user});const p=jr(s);p&&Object.keys(p).length&&(t.contexts={...p,...t.contexts}),a&&(t.level=a),l&&(t.transaction=l)}function OM(t,e){const n=[...t.breadcrumbs||[],...e];t.breadcrumbs=n.length?n:void 0}function MM(t,e){t.sdkProcessingMetadata={...t.sdkProcessingMetadata,...e}}function NM(t,e){t.contexts={trace:cm(e),...t.contexts};const n=gd(e);if(n){t.sdkProcessingMetadata={dynamicSamplingContext:pg(e),...t.sdkProcessingMetadata};const r=ws(n).description;r&&(t.tags={transaction:r,...t.tags})}}function IM(t,e){t.fingerprint=t.fingerprint?dM(t.fingerprint):[],e&&(t.fingerprint=t.fingerprint.concat(e)),t.fingerprint&&!t.fingerprint.length&&delete t.fingerprint}const PM=100;class to{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=j0()}static clone(e){return e?e.clone():new to}clone(){const e=new to;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},e._user=this._user,e._level=this._level,e._span=this._span,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e}setClient(e){this._client=e}getClient(){return this._client}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&Zd(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,n){return this._tags={...this._tags,[e]:n},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,n){return this._extra={...this._extra,[e]:n},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,n){return n===null?delete this._contexts[e]:this._contexts[e]=n,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this._span;return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const n=typeof e=="function"?e(this):e;if(n instanceof to){const r=n.getScopeData();this._tags={...this._tags,...r.tags},this._extra={...this._extra,...r.extra},this._contexts={...this._contexts,...r.contexts},r.user&&Object.keys(r.user).length&&(this._user=r.user),r.level&&(this._level=r.level),r.fingerprint.length&&(this._fingerprint=r.fingerprint),n.getRequestSession()&&(this._requestSession=n.getRequestSession()),r.propagationContext&&(this._propagationContext=r.propagationContext)}else if(Dx(n)){const r=e;this._tags={...this._tags,...r.tags},this._extra={...this._extra,...r.extra},this._contexts={...this._contexts,...r.contexts},r.user&&(this._user=r.user),r.level&&(this._level=r.level),r.fingerprint&&(this._fingerprint=r.fingerprint),r.requestSession&&(this._requestSession=r.requestSession),r.propagationContext&&(this._propagationContext=r.propagationContext)}return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=j0(),this}addBreadcrumb(e,n){const r=typeof n=="number"?n:PM;if(r<=0)return this;const i={timestamp:lm(),...e},s=this._breadcrumbs;return s.push(i),this._breadcrumbs=s.length>r?s.slice(-r):s,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){const{_breadcrumbs:e,_attachments:n,_contexts:r,_tags:i,_extra:s,_user:a,_level:l,_fingerprint:u,_eventProcessors:d,_propagationContext:f,_sdkProcessingMetadata:p,_transactionName:m,_span:v}=this;return{breadcrumbs:e,attachments:n,contexts:r,tags:i,extra:s,user:a,level:l,fingerprint:u||[],eventProcessors:d,propagationContext:f,sdkProcessingMetadata:p,transactionName:m,span:v}}applyToEvent(e,n={},r=[]){AM(e,this.getScopeData());const i=[...r,...SM(),...this._eventProcessors];return hg(i,e,n)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,n){const r=n&&n.event_id?n.event_id:nr();if(!this._client)return Lt.warn("No client configured on scope - will not capture exception!"),r;const i=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:i,...n,event_id:r},this),r}captureMessage(e,n,r){const i=r&&r.event_id?r.event_id:nr();if(!this._client)return Lt.warn("No client configured on scope - will not capture message!"),i;const s=new Error(e);return this._client.captureMessage(e,n,{originalException:e,syntheticException:s,...r,event_id:i},this),i}captureEvent(e,n){const r=n&&n.event_id?n.event_id:nr();return this._client?(this._client.captureEvent(e,{...n,event_id:r},this),r):(Lt.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}function j0(){return{traceId:nr(),spanId:nr().substring(16)}}const LM="7.120.4",Ux=parseFloat(LM),FM=100;class Bx{constructor(e,n,r,i=Ux){this._version=i;let s;n?s=n:(s=new to,s.setClient(e));let a;r?a=r:(a=new to,a.setClient(e)),this._stack=[{scope:s}],e&&this.bindClient(e),this._isolationScope=a}isOlderThan(e){return this._version<e}bindClient(e){const n=this.getStackTop();n.client=e,n.scope.setClient(e),e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return this.getStack().length<=1?!1:!!this.getStack().pop()}withScope(e){const n=this.pushScope();let r;try{r=e(n)}catch(i){throw this.popScope(),i}return om(r)?r.then(i=>(this.popScope(),i),i=>{throw this.popScope(),i}):(this.popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,n){const r=this._lastEventId=n&&n.event_id?n.event_id:nr(),i=new Error("Sentry syntheticException");return this.getScope().captureException(e,{originalException:e,syntheticException:i,...n,event_id:r}),r}captureMessage(e,n,r){const i=this._lastEventId=r&&r.event_id?r.event_id:nr(),s=new Error(e);return this.getScope().captureMessage(e,n,{originalException:e,syntheticException:s,...r,event_id:i}),i}captureEvent(e,n){const r=n&&n.event_id?n.event_id:nr();return e.type||(this._lastEventId=r),this.getScope().captureEvent(e,{...n,event_id:r}),r}lastEventId(){return this._lastEventId}addBreadcrumb(e,n){const{scope:r,client:i}=this.getStackTop();if(!i)return;const{beforeBreadcrumb:s=null,maxBreadcrumbs:a=FM}=i.getOptions&&i.getOptions()||{};if(a<=0)return;const u={timestamp:lm(),...e},d=s?Rx(()=>s(u,n)):u;d!==null&&(i.emit&&i.emit("beforeAddBreadcrumb",d,n),r.addBreadcrumb(d,a))}setUser(e){this.getScope().setUser(e),this.getIsolationScope().setUser(e)}setTags(e){this.getScope().setTags(e),this.getIsolationScope().setTags(e)}setExtras(e){this.getScope().setExtras(e),this.getIsolationScope().setExtras(e)}setTag(e,n){this.getScope().setTag(e,n),this.getIsolationScope().setTag(e,n)}setExtra(e,n){this.getScope().setExtra(e,n),this.getIsolationScope().setExtra(e,n)}setContext(e,n){this.getScope().setContext(e,n),this.getIsolationScope().setContext(e,n)}configureScope(e){const{scope:n,client:r}=this.getStackTop();r&&e(n)}run(e){const n=z0(this);try{e(this)}finally{z0(n)}}getIntegration(e){const n=this.getClient();if(!n)return null;try{return n.getIntegration(e)}catch{return mn&&Lt.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,n){const r=this._callExtensionMethod("startTransaction",e,n);return mn&&!r&&(this.getClient()?Lt.warn(`Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':
Sentry.addTracingExtensions();
Sentry.init({...});
`):Lt.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")),r}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){const n=this.getStackTop().scope,r=n.getSession();r&&xM(r),this._sendSessionUpdate(),n.setSession()}startSession(e){const{scope:n,client:r}=this.getStackTop(),{release:i,environment:s=Px}=r&&r.getOptions()||{},{userAgent:a}=Sn.navigator||{},l=wM({release:i,environment:s,user:n.getUser(),...a&&{userAgent:a},...e}),u=n.getSession&&n.getSession();return u&&u.status==="ok"&&Zd(u,{status:"exited"}),this.endSession(),n.setSession(l),l}shouldSendDefaultPii(){const e=this.getClient(),n=e&&e.getOptions();return!!(n&&n.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:n}=this.getStackTop(),r=e.getSession();r&&n&&n.captureSession&&n.captureSession(r)}_callExtensionMethod(e,...n){const i=wo().__SENTRY__;if(i&&i.extensions&&typeof i.extensions[e]=="function")return i.extensions[e].apply(this,n);mn&&Lt.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function wo(){return Sn.__SENTRY__=Sn.__SENTRY__||{extensions:{},hub:void 0},Sn}function z0(t){const e=wo(),n=gg(e);return Wx(e,t),n}function Xd(){const t=wo();if(t.__SENTRY__&&t.__SENTRY__.acs){const e=t.__SENTRY__.acs.getCurrentHub();if(e)return e}return jM(t)}function jM(t=wo()){return(!zM(t)||gg(t).isOlderThan(Ux))&&Wx(t,new Bx),gg(t)}function zM(t){return!!(t&&t.__SENTRY__&&t.__SENTRY__.hub)}function gg(t){return kx("hub",()=>new Bx,t)}function Wx(t,e){if(!t)return!1;const n=t.__SENTRY__=t.__SENTRY__||{};return n.hub=e,!0}function HM(t){return(t||Xd()).getScope().getTransaction()}let H0=!1;function UM(){H0||(H0=!0,fM(mg),pM(mg))}function mg(){const t=HM();if(t){const e="internal_error";mn&&Lt.log(`[Tracing] Transaction: ${e} -> Global error occured`),t.setStatus(e)}}mg.tag="sentry_tracingErrorCallback";var U0;(function(t){t.Ok="ok";const n="deadline_exceeded";t.DeadlineExceeded=n;const r="unauthenticated";t.Unauthenticated=r;const i="permission_denied";t.PermissionDenied=i;const s="not_found";t.NotFound=s;const a="resource_exhausted";t.ResourceExhausted=a;const l="invalid_argument";t.InvalidArgument=l;const u="unimplemented";t.Unimplemented=u;const d="unavailable";t.Unavailable=d;const f="internal_error";t.InternalError=f;const p="unknown_error";t.UnknownError=p;const m="cancelled";t.Cancelled=m;const v="already_exists";t.AlreadyExists=v;const b="failed_precondition";t.FailedPrecondition=b;const _="aborted";t.Aborted=_;const w="out_of_range";t.OutOfRange=w;const x="data_loss";t.DataLoss=x})(U0||(U0={}));function BM(t){if(t<400&&t>=100)return"ok";if(t>=400&&t<500)switch(t){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(t>=500&&t<600)switch(t){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}function WM(t,e){t.setTag("http.status_code",String(e)),t.setData("http.response.status_code",e);const n=BM(e);n!=="unknown_error"&&t.setStatus(n)}function VM(t){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const e=Hx(),n=t||e&&e.getOptions();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}const $M="_sentryScope",qM="_sentryIsolationScope";function GM(t){return{scope:t[$M],isolationScope:t[qM]}}const bp="sentry.source",Ja="sentry.sample_rate",Du="sentry.op",ku="sentry.origin",YM="profile_id";class QM{constructor(e=1e3){this._maxlen=e,this.spans=[]}add(e){this.spans.length>this._maxlen?e.spanRecorder=void 0:this.spans.push(e)}}class um{constructor(e={}){this._traceId=e.traceId||nr(),this._spanId=e.spanId||nr().substring(16),this._startTime=e.startTimestamp||Kd(),this.tags=e.tags?{...e.tags}:{},this.data=e.data?{...e.data}:{},this.instrumenter=e.instrumenter||"sentry",this._attributes={},this.setAttributes({[ku]:e.origin||"manual",[Du]:e.op,...e.attributes}),this._name=e.name||e.description,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.status&&(this._status=e.status),e.endTimestamp&&(this._endTime=e.endTimestamp),e.exclusiveTime!==void 0&&(this._exclusiveTime=e.exclusiveTime),this._measurements=e.measurements?{...e.measurements}:{}}get name(){return this._name||""}set name(e){this.updateName(e)}get description(){return this._name}set description(e){this._name=e}get traceId(){return this._traceId}set traceId(e){this._traceId=e}get spanId(){return this._spanId}set spanId(e){this._spanId=e}set parentSpanId(e){this._parentSpanId=e}get parentSpanId(){return this._parentSpanId}get sampled(){return this._sampled}set sampled(e){this._sampled=e}get attributes(){return this._attributes}set attributes(e){this._attributes=e}get startTimestamp(){return this._startTime}set startTimestamp(e){this._startTime=e}get endTimestamp(){return this._endTime}set endTimestamp(e){this._endTime=e}get status(){return this._status}set status(e){this._status=e}get op(){return this._attributes[Du]}set op(e){this.setAttribute(Du,e)}get origin(){return this._attributes[ku]}set origin(e){this.setAttribute(ku,e)}spanContext(){const{_spanId:e,_traceId:n,_sampled:r}=this;return{spanId:e,traceId:n,traceFlags:r?Lx:CM}}startChild(e){const n=new um({...e,parentSpanId:this._spanId,sampled:this._sampled,traceId:this._traceId});n.spanRecorder=this.spanRecorder,n.spanRecorder&&n.spanRecorder.add(n);const r=gd(this);if(n.transaction=r,mn&&r){const i=e&&e.op||"< unknown op >",s=ws(n).description||"< unknown name >",a=r.spanContext().spanId,l=`[Tracing] Starting '${i}' span on transaction '${s}' (${a}).`;Lt.log(l),this._logMessage=l}return n}setTag(e,n){return this.tags={...this.tags,[e]:n},this}setData(e,n){return this.data={...this.data,[e]:n},this}setAttribute(e,n){n===void 0?delete this._attributes[e]:this._attributes[e]=n}setAttributes(e){Object.keys(e).forEach(n=>this.setAttribute(n,e[n]))}setStatus(e){return this._status=e,this}setHttpStatus(e){return WM(this,e),this}setName(e){this.updateName(e)}updateName(e){return this._name=e,this}isSuccess(){return this._status==="ok"}finish(e){return this.end(e)}end(e){if(this._endTime)return;const n=gd(this);if(mn&&n&&n.spanContext().spanId!==this._spanId){const r=this._logMessage;r&&Lt.log(r.replace("Starting","Finishing"))}this._endTime=jx(e)}toTraceparent(){return Fx(this)}toContext(){return jr({data:this._getData(),description:this._name,endTimestamp:this._endTime,op:this.op,parentSpanId:this._parentSpanId,sampled:this._sampled,spanId:this._spanId,startTimestamp:this._startTime,status:this._status,tags:this.tags,traceId:this._traceId})}updateWithContext(e){return this.data=e.data||{},this._name=e.name||e.description,this._endTime=e.endTimestamp,this.op=e.op,this._parentSpanId=e.parentSpanId,this._sampled=e.sampled,this._spanId=e.spanId||this._spanId,this._startTime=e.startTimestamp||this._startTime,this._status=e.status,this.tags=e.tags||{},this._traceId=e.traceId||this._traceId,this}getTraceContext(){return cm(this)}getSpanJSON(){return jr({data:this._getData(),description:this._name,op:this._attributes[Du],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:this._status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[ku],_metrics_summary:void 0,profile_id:this._attributes[YM],exclusive_time:this._exclusiveTime,measurements:Object.keys(this._measurements).length>0?this._measurements:void 0})}isRecording(){return!this._endTime&&!!this._sampled}toJSON(){return this.getSpanJSON()}_getData(){const{data:e,_attributes:n}=this,r=Object.keys(e).length>0,i=Object.keys(n).length>0;if(!(!r&&!i))return r&&i?{...e,...n}:r?e:n}}class KM extends um{constructor(e,n){super(e),this._contexts={},this._hub=n||Xd(),this._name=e.name||"",this._metadata={...e.metadata},this._trimEnd=e.trimEnd,this.transaction=this;const r=this._metadata.dynamicSamplingContext;r&&(this._frozenDynamicSamplingContext={...r})}get name(){return this._name}set name(e){this.setName(e)}get metadata(){return{source:"custom",spanMetadata:{},...this._metadata,...this._attributes[bp]&&{source:this._attributes[bp]},...this._attributes[Ja]&&{sampleRate:this._attributes[Ja]}}}set metadata(e){this._metadata=e}setName(e,n="custom"){this._name=e,this.setAttribute(bp,n)}updateName(e){return this._name=e,this}initSpanRecorder(e=1e3){this.spanRecorder||(this.spanRecorder=new QM(e)),this.spanRecorder.add(this)}setContext(e,n){n===null?delete this._contexts[e]:this._contexts[e]=n}setMeasurement(e,n,r=""){this._measurements[e]={value:n,unit:r}}setMetadata(e){this._metadata={...this._metadata,...e}}end(e){const n=jx(e),r=this._finishTransaction(n);if(r)return this._hub.captureEvent(r)}toContext(){const e=super.toContext();return jr({...e,name:this._name,trimEnd:this._trimEnd})}updateWithContext(e){return super.updateWithContext(e),this._name=e.name||"",this._trimEnd=e.trimEnd,this}getDynamicSamplingContext(){return pg(this)}setHub(e){this._hub=e}getProfileId(){if(this._contexts!==void 0&&this._contexts.profile!==void 0)return this._contexts.profile.profile_id}_finishTransaction(e){if(this._endTime!==void 0)return;this._name||(mn&&Lt.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>"),super.end(e);const n=this._hub.getClient();if(n&&n.emit&&n.emit("finishTransaction",this),this._sampled!==!0){mn&&Lt.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),n&&n.recordDroppedEvent("sample_rate","transaction");return}const r=this.spanRecorder?this.spanRecorder.spans.filter(f=>f!==this&&ws(f).timestamp):[];if(this._trimEnd&&r.length>0){const f=r.map(p=>ws(p).timestamp).filter(Boolean);this._endTime=f.reduce((p,m)=>p>m?p:m)}const{scope:i,isolationScope:s}=GM(this),{metadata:a}=this,{source:l}=a,u={contexts:{...this._contexts,trace:cm(this)},spans:r,start_timestamp:this._startTime,tags:this.tags,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{...a,capturedSpanScope:i,capturedSpanIsolationScope:s,...jr({dynamicSamplingContext:pg(this)})},_metrics_summary:void 0,...l&&{transaction_info:{source:l}}};return Object.keys(this._measurements).length>0&&(mn&&Lt.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),u.measurements=this._measurements),mn&&Lt.log(`[Tracing] Finishing ${this.op} transaction: ${this._name}.`),u}}function ZM(t,e,n){if(!VM(e))return t.sampled=!1,t;if(t.sampled!==void 0)return t.setAttribute(Ja,Number(t.sampled)),t;let r;return typeof e.tracesSampler=="function"?(r=e.tracesSampler(n),t.setAttribute(Ja,Number(r))):n.parentSampled!==void 0?r=n.parentSampled:typeof e.tracesSampleRate<"u"?(r=e.tracesSampleRate,t.setAttribute(Ja,Number(r))):(r=1,t.setAttribute(Ja,r)),XM(r)?r?(t.sampled=Math.random()<r,t.sampled?(mn&&Lt.log(`[Tracing] starting ${t.op} transaction - ${ws(t).description}`),t):(mn&&Lt.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(r)})`),t)):(mn&&Lt.log(`[Tracing] Discarding transaction because ${typeof e.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),t.sampled=!1,t):(mn&&Lt.warn("[Tracing] Discarding transaction because of invalid sample rate."),t.sampled=!1,t)}function XM(t){return aM(t)||!(typeof t=="number"||typeof t=="boolean")?(mn&&Lt.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(t)} of type ${JSON.stringify(typeof t)}.`),!1):t<0||t>1?(mn&&Lt.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${t}.`),!1):!0}function JM(){const e=this.getScope().getSpan();return e?{"sentry-trace":Fx(e)}:{}}function eN(t,e){const n=this.getClient(),r=n&&n.getOptions()||{},i=r.instrumenter||"sentry",s=t.instrumenter||"sentry";i!==s&&(mn&&Lt.error(`A transaction was started with instrumenter=\`${s}\`, but the SDK is configured with the \`${i}\` instrumenter.
The transaction will not be sampled. Please use the ${i} instrumentation to start transactions.`),t.sampled=!1);let a=new KM(t,this);return a=ZM(a,r,{name:t.name,parentSampled:t.parentSampled,transactionContext:t,attributes:{...t.data,...t.attributes},...e}),a.isRecording()&&a.initSpanRecorder(r._experiments&&r._experiments.maxSpans),n&&n.emit&&n.emit("startTransaction",a),a}function tN(){const t=wo();t.__SENTRY__&&(t.__SENTRY__.extensions=t.__SENTRY__.extensions||{},t.__SENTRY__.extensions.startTransaction||(t.__SENTRY__.extensions.startTransaction=eN),t.__SENTRY__.extensions.traceHeaders||(t.__SENTRY__.extensions.traceHeaders=JM),UM())}function nN(){const t=wo();if(!t.__SENTRY__)return;const e={mongodb(){const r=ta(module,"./node/integrations/mongo");return new r.Mongo},mongoose(){const r=ta(module,"./node/integrations/mongo");return new r.Mongo},mysql(){const r=ta(module,"./node/integrations/mysql");return new r.Mysql},pg(){const r=ta(module,"./node/integrations/postgres");return new r.Postgres}},n=Object.keys(e).filter(r=>!!yM(r)).map(r=>{try{return e[r]()}catch{return}}).filter(r=>r);n.length>0&&(t.__SENTRY__.integrations=[...t.__SENTRY__.integrations||[],...n])}function rN(){tN(),vM()&&nN()}(typeof __SENTRY_TRACING__>"u"||__SENTRY_TRACING__)&&rN();const je={VALIDATION_ERROR:"VALIDATION_ERROR",NETWORK_ERROR:"NETWORK_ERROR",AUTHENTICATION_ERROR:"AUTHENTICATION_ERROR",AUTHORIZATION_ERROR:"AUTHORIZATION_ERROR",NOT_FOUND_ERROR:"NOT_FOUND_ERROR",SERVER_ERROR:"SERVER_ERROR",BUSINESS_LOGIC_ERROR:"BUSINESS_LOGIC_ERROR",UNKNOWN_ERROR:"UNKNOWN_ERROR"},B0={[je.VALIDATION_ERROR]:"I dati inseriti non sono validi. Controlla i campi evidenziati.",[je.NETWORK_ERROR]:"Errore di connessione. Verifica la tua connessione internet.",[je.AUTHENTICATION_ERROR]:"Sessione scaduta. Effettua nuovamente l'accesso.",[je.AUTHORIZATION_ERROR]:"Non hai i permessi per eseguire questa operazione.",[je.NOT_FOUND_ERROR]:"La risorsa richiesta non  stata trovata.",[je.SERVER_ERROR]:"Errore del server. Riprova pi tardi.",[je.BUSINESS_LOGIC_ERROR]:"Operazione non consentita dalle regole di business.",[je.UNKNOWN_ERROR]:"Si  verificato un errore imprevisto."};class Ye extends Error{constructor(e,n=je.UNKNOWN_ERROR,r=500,i={}){super(e),this.name="AppError",this.type=n,this.statusCode=r,this.context=i,this.timestamp=new Date().toISOString(),this.userMessage=B0[n]||B0[je.UNKNOWN_ERROR]}toJSON(){return{message:this.message,type:this.type,statusCode:this.statusCode,context:this.context,timestamp:this.timestamp,userMessage:this.userMessage}}}const Vx=6048e5,iN=864e5,sN=36e5,W0=Symbol.for("constructDateFrom");function oi(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&W0 in t?t[W0](e):t instanceof Date?new t.constructor(e):new Date(e)}function wn(t,e){return oi(e||t,t)}function nc(t,e,n){const r=wn(t,n?.in);return isNaN(e)?oi(t,NaN):(e&&r.setDate(r.getDate()+e),r)}function aN(t,e,n){return oi(t,+wn(t)+e)}function V0(t,e,n){return aN(t,e*sN)}let oN={};function Jd(){return oN}function ua(t,e){const n=Jd(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,i=wn(t,e?.in),s=i.getDay(),a=(s<r?7:0)+s-r;return i.setDate(i.getDate()-a),i.setHours(0,0,0,0),i}function md(t,e){return ua(t,{...e,weekStartsOn:1})}function $x(t,e){const n=wn(t,e?.in),r=n.getFullYear(),i=oi(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const s=md(i),a=oi(n,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const l=md(a);return n.getTime()>=s.getTime()?r+1:n.getTime()>=l.getTime()?r:r-1}function $0(t){const e=wn(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function lN(t,...e){const n=oi.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function q0(t,e){const n=wn(t,e?.in);return n.setHours(0,0,0,0),n}function cN(t,e,n){const[r,i]=lN(n?.in,t,e),s=q0(r),a=q0(i),l=+s-$0(s),u=+a-$0(a);return Math.round((l-u)/iN)}function uN(t,e){const n=$x(t,e),r=oi(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),md(r)}function qx(t,e,n){return nc(t,e*7,n)}function dN(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function fN(t){return!(!dN(t)&&typeof t!="number"||isNaN(+wn(t)))}function hN(t,e){const n=wn(t,e?.in),r=n.getFullYear();return n.setFullYear(r+1,0,0),n.setHours(23,59,59,999),n}function Gx(t,e){const n=wn(t,e?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const pN={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},gN=(t,e,n)=>{let r;const i=pN[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function _p(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const mN={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},vN={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},yN={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},bN={date:_p({formats:mN,defaultWidth:"full"}),time:_p({formats:vN,defaultWidth:"full"}),dateTime:_p({formats:yN,defaultWidth:"full"})},_N={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},SN=(t,e,n,r)=>_N[t];function cl(t){return(e,n)=>{const r=n?.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,l=n?.width?String(n.width):a;i=t.formattingValues[l]||t.formattingValues[a]}else{const a=t.defaultWidth,l=n?.width?String(n.width):t.defaultWidth;i=t.values[l]||t.values[a]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const wN={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},xN={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},EN={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},CN={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},TN={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},DN={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},kN=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},AN={ordinalNumber:kN,era:cl({values:wN,defaultWidth:"wide"}),quarter:cl({values:xN,defaultWidth:"wide",argumentCallback:t=>t-1}),month:cl({values:EN,defaultWidth:"wide"}),day:cl({values:CN,defaultWidth:"wide"}),dayPeriod:cl({values:TN,defaultWidth:"wide",formattingValues:DN,defaultFormattingWidth:"wide"})};function ul(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const a=s[0],l=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(l)?ON(l,p=>p.test(a)):RN(l,p=>p.test(a));let d;d=t.valueCallback?t.valueCallback(u):u,d=n.valueCallback?n.valueCallback(d):d;const f=e.slice(a.length);return{value:d,rest:f}}}function RN(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function ON(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function MN(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],s=e.match(t.parsePattern);if(!s)return null;let a=t.valueCallback?t.valueCallback(s[0]):s[0];a=n.valueCallback?n.valueCallback(a):a;const l=e.slice(i.length);return{value:a,rest:l}}}const NN=/^(\d+)(th|st|nd|rd)?/i,IN=/\d+/i,PN={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},LN={any:[/^b/i,/^(a|c)/i]},FN={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},jN={any:[/1/i,/2/i,/3/i,/4/i]},zN={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},HN={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},UN={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},BN={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},WN={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},VN={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},$N={ordinalNumber:MN({matchPattern:NN,parsePattern:IN,valueCallback:t=>parseInt(t,10)}),era:ul({matchPatterns:PN,defaultMatchWidth:"wide",parsePatterns:LN,defaultParseWidth:"any"}),quarter:ul({matchPatterns:FN,defaultMatchWidth:"wide",parsePatterns:jN,defaultParseWidth:"any",valueCallback:t=>t+1}),month:ul({matchPatterns:zN,defaultMatchWidth:"wide",parsePatterns:HN,defaultParseWidth:"any"}),day:ul({matchPatterns:UN,defaultMatchWidth:"wide",parsePatterns:BN,defaultParseWidth:"any"}),dayPeriod:ul({matchPatterns:WN,defaultMatchWidth:"any",parsePatterns:VN,defaultParseWidth:"any"})},qN={code:"en-US",formatDistance:gN,formatLong:bN,formatRelative:SN,localize:AN,match:$N,options:{weekStartsOn:0,firstWeekContainsDate:1}};function GN(t,e){const n=wn(t,e?.in);return cN(n,Gx(n))+1}function YN(t,e){const n=wn(t,e?.in),r=+md(n)-+uN(n);return Math.round(r/Vx)+1}function Yx(t,e){const n=wn(t,e?.in),r=n.getFullYear(),i=Jd(),s=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,a=oi(e?.in||t,0);a.setFullYear(r+1,0,s),a.setHours(0,0,0,0);const l=ua(a,e),u=oi(e?.in||t,0);u.setFullYear(r,0,s),u.setHours(0,0,0,0);const d=ua(u,e);return+n>=+l?r+1:+n>=+d?r:r-1}function QN(t,e){const n=Jd(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,i=Yx(t,e),s=oi(e?.in||t,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),ua(s,e)}function KN(t,e){const n=wn(t,e?.in),r=+ua(n,e)-+QN(n,e);return Math.round(r/Vx)+1}function ft(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const us={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return ft(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):ft(n+1,2)},d(t,e){return ft(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return ft(t.getHours()%12||12,e.length)},H(t,e){return ft(t.getHours(),e.length)},m(t,e){return ft(t.getMinutes(),e.length)},s(t,e){return ft(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return ft(i,e.length)}},Ga={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},G0={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return us.y(t,e)},Y:function(t,e,n,r){const i=Yx(t,r),s=i>0?i:1-i;if(e==="YY"){const a=s%100;return ft(a,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):ft(s,e.length)},R:function(t,e){const n=$x(t);return ft(n,e.length)},u:function(t,e){const n=t.getFullYear();return ft(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return ft(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return ft(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return us.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return ft(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=KN(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):ft(i,e.length)},I:function(t,e,n){const r=YN(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):ft(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):us.d(t,e)},D:function(t,e,n){const r=GN(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):ft(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return ft(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return ft(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return ft(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=Ga.noon:r===0?i=Ga.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=Ga.evening:r>=12?i=Ga.afternoon:r>=4?i=Ga.morning:i=Ga.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return us.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):us.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):ft(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):ft(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):us.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):us.s(t,e)},S:function(t,e){return us.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return Q0(r);case"XXXX":case"XX":return Ys(r);case"XXXXX":case"XXX":default:return Ys(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return Q0(r);case"xxxx":case"xx":return Ys(r);case"xxxxx":case"xxx":default:return Ys(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Y0(r,":");case"OOOO":default:return"GMT"+Ys(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Y0(r,":");case"zzzz":default:return"GMT"+Ys(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return ft(r,e.length)},T:function(t,e,n){return ft(+t,e.length)}};function Y0(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+e+ft(s,2)}function Q0(t,e){return t%60===0?(t>0?"-":"+")+ft(Math.abs(t)/60,2):Ys(t,e)}function Ys(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=ft(Math.trunc(r/60),2),s=ft(r%60,2);return n+i+e+s}const K0=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Qx=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},ZN=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return K0(t,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",K0(r,e)).replace("{{time}}",Qx(i,e))},XN={p:Qx,P:ZN},JN=/^D+$/,eI=/^Y+$/,tI=["D","DD","YY","YYYY"];function nI(t){return JN.test(t)}function rI(t){return eI.test(t)}function iI(t,e,n){const r=sI(t,e,n);if(console.warn(r),tI.includes(t))throw new RangeError(r)}function sI(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const aI=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,oI=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,lI=/^'([^]*?)'?$/,cI=/''/g,uI=/[a-zA-Z]/;function vn(t,e,n){const r=Jd(),i=r.locale??qN,s=r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,a=r.weekStartsOn??r.locale?.options?.weekStartsOn??0,l=wn(t,n?.in);if(!fN(l))throw new RangeError("Invalid time value");let u=e.match(oI).map(f=>{const p=f[0];if(p==="p"||p==="P"){const m=XN[p];return m(f,i.formatLong)}return f}).join("").match(aI).map(f=>{if(f==="''")return{isToken:!1,value:"'"};const p=f[0];if(p==="'")return{isToken:!1,value:dI(f)};if(G0[p])return{isToken:!0,value:f};if(p.match(uI))throw new RangeError("Format string contains an unescaped latin alphabet character `"+p+"`");return{isToken:!1,value:f}});i.localize.preprocessor&&(u=i.localize.preprocessor(l,u));const d={firstWeekContainsDate:s,weekStartsOn:a,locale:i};return u.map(f=>{if(!f.isToken)return f.value;const p=f.value;(rI(p)||nI(p))&&iI(p,e,String(t));const m=G0[p[0]];return m(l,p,i.localize,d)}).join("")}function dI(t){const e=t.match(lI);return e?e[1].replace(cI,"'"):t}function fI(t,e){return wn(t,e?.in).getDay()}function hI(t,e){return+wn(t)>+wn(e)}function pI(t,e,n){return qx(t,-1,n)}class gI{async init(){try{const{error:e}=await Ut.from("machines").select("count").limit(1);if(e)throw new Ye(`API initialization failed: ${e.message}`,je.SERVER_ERROR,500,e,"API.init");return!0}catch(e){throw e instanceof Ye?e:new Ye(`API initialization failed: ${e.message}`,je.SERVER_ERROR,500,e,"API.init")}}async getMachines(){try{const{data:e,error:n}=await Ut.from("machines").select("*").order("machine_name");if(n)throw n;return e||[]}catch(e){throw new Ye(`Failed to get machines: ${e.message}`,je.SERVER_ERROR,500,e,"API.getMachines")}}async addMachine(e){try{const{data:n,error:r}=await Ut.from("machines").insert([e]).select().single();if(r)throw r;return n}catch(n){throw new Ye(`Failed to add machine: ${rn(n)}`,je.SERVER_ERROR,500,n,"API.addMachine")}}async updateMachine(e,n){try{const{data:r,error:i}=await Ut.from("machines").update(n).eq("id",e).select().single();if(i)throw i;return r}catch(r){throw new Ye(`Failed to update machine: ${rn(r)}`,je.SERVER_ERROR,500,r,"API.updateMachine")}}async removeMachine(e){try{const{error:n}=await Ut.from("machines").delete().eq("id",e);if(n)throw n;return!0}catch(n){throw new Ye(`Failed to remove machine: ${rn(n)}`,je.SERVER_ERROR,500,n,"API.removeMachine")}}async getOdpOrders(){try{const{data:e,error:n}=await Ut.from("odp_orders").select("*").order("created_at",{ascending:!1});if(n)throw n;return e||[]}catch(e){throw new Ye(`Failed to fetch ODP orders: ${rn(e)}`,je.SERVER_ERROR,500,e,"API.getOdpOrders")}}async getOdpOrder(e){try{const{data:n,error:r}=await Ut.from("odp_orders").select("*").eq("id",e).single();if(r)throw r;return n}catch(n){throw new Ye(`Failed to fetch ODP order: ${rn(n)}`,je.SERVER_ERROR,500,n,"API.getOdpOrder")}}async addOdpOrder(e){try{const{data:n,error:r}=await Ut.from("odp_orders").insert([e]).select().single();if(r)throw r;return n}catch(n){throw new Ye(`Failed to add ODP order: ${rn(n)}`,je.SERVER_ERROR,500,n,"API.addOdpOrder")}}async updateOdpOrder(e,n){try{const{data:r,error:i}=await Ut.from("odp_orders").update(n).eq("id",e).select().single();if(i)throw i;return r}catch(r){throw new Ye(`Failed to update ODP order: ${rn(r)}`,je.SERVER_ERROR,500,r,"API.updateOdpOrder")}}async removeOdpOrder(e){try{const{error:n}=await Ut.from("odp_orders").delete().eq("id",e);if(n)throw n;return!0}catch(n){throw new Ye(`Failed to remove ODP order: ${rn(n)}`,je.SERVER_ERROR,500,n,"API.removeOdpOrder")}}async getPhases(){try{const{data:e,error:n}=await Ut.from("phases").select("*").order("name");if(n)throw n;return e||[]}catch(e){throw new Ye(`Failed to fetch phases: ${rn(e)}`,je.SERVER_ERROR,500,e,"API.getPhases")}}async addPhase(e){try{const{data:n,error:r}=await Ut.from("phases").insert([e]).select().single();if(r)throw r;return n}catch(n){throw new Ye(`Failed to add phase: ${rn(n)}`,je.SERVER_ERROR,500,n,"API.addPhase")}}async updatePhase(e,n){try{const{data:r,error:i}=await Ut.from("phases").update(n).eq("id",e).select().single();if(i)throw i;return r}catch(r){throw new Ye(`Failed to update phase: ${rn(r)}`,je.SERVER_ERROR,500,r,"API.updatePhase")}}async removePhase(e){try{const{error:n}=await Ut.from("phases").delete().eq("id",e);if(n)throw n;return!0}catch(n){throw new Ye(`Failed to remove phase: ${rn(n)}`,je.SERVER_ERROR,500,n,"API.removePhase")}}async getMachineAvailabilityForDateRange(e,n,r){try{const{data:i,error:s}=await Ut.from("machine_availability").select("*").eq("machine_id",e).gte("date",n).lte("date",r).order("date");if(s)throw s;return i||[]}catch(i){throw new Ye(`Failed to fetch machine availability for date range: ${rn(i)}`,je.SERVER_ERROR,500,i,"API.getMachineAvailabilityForDateRange")}}async getMachineAvailabilityForDate(e,n){try{const{data:r,error:i}=await Ut.from("machine_availability").select("*").eq("machine_id",e).eq("date",n).maybeSingle();if(i)throw i;return r||null}catch(r){throw new Ye(`Failed to fetch machine availability: ${rn(r)}`,je.SERVER_ERROR,500,r,"API.getMachineAvailabilityForDate")}}async getMachineAvailability(e,n){try{return(await this.getMachineAvailabilityForDate(e,n))?.unavailable_hours||[]}catch{return[]}}async setMachineAvailability(e,n,r){try{const{data:i,error:s}=await Ut.from("machine_availability").upsert([{machine_id:e,date:n,unavailable_hours:r}],{onConflict:"machine_id,date"}).select().single();if(s)throw s;return i}catch(i){throw new Ye(`Failed to set machine availability: ${rn(i)}`,je.SERVER_ERROR,500,i,"API.setMachineAvailability")}}async getMachineAvailabilityForDateAllMachines(e){try{const{data:n,error:r}=await Ut.from("machine_availability").select("*").eq("date",e);if(r)throw r;return n||[]}catch(n){throw new Ye(`Failed to fetch machine availability for all machines: ${rn(n)}`,je.SERVER_ERROR,500,n,"API.getMachineAvailabilityForDateAllMachines")}}async getEventsByDate(e){try{const{data:n,error:r}=await Ut.from("machine_availability").select("*").eq("date",e);if(r)throw r;return n||[]}catch(n){throw new Ye(`Failed to fetch events by date: ${rn(n)}`,je.SERVER_ERROR,500,n,"API.getEventsByDate")}}async setUnavailableHoursForRange(e,n,r,i,s){try{const a=parseInt(i.split(":")[0]),l=parseInt(s.split(":")[0]),u=[];for(let v=a;v<l;v++)u.push(v.toString());const d=new Date(n),f=new Date(r);let p=new Date(d);const m=[];for(;p<=f;){const v=vn(p,"yyyy-MM-dd"),_=(await this.getMachineAvailabilityForDate(e,v))?.unavailable_hours||[],w=[...new Set([..._,...u])].sort((C,k)=>parseInt(C)-parseInt(k)),x=await this.setMachineAvailability(e,v,w);m.push(x),p=nc(p,1)}return m}catch(a){throw new Ye(`Failed to set unavailable hours for range: ${rn(a)}`,je.SERVER_ERROR,500,a,"API.setUnavailableHoursForRange")}}async bulkUpsertMachineAvailability(e){try{const{error:n}=await Ut.from("machine_availability").upsert(e,{onConflict:"machine_id,date"});if(n)throw n;return{success:!0}}catch(n){throw new Ye(`Failed to bulk set machine availability: ${rn(n)}`,je.SERVER_ERROR,500,n,"API.bulkUpsertMachineAvailability")}}setupRealtimeSubscriptions(e,n,r){return Ut.channel("table-db-changes").on("postgres_changes",{event:"*",schema:"public",table:"odp_orders"},e).on("postgres_changes",{event:"*",schema:"public",table:"machines"},n).on("postgres_changes",{event:"*",schema:"public",table:"phases"},r).subscribe(s=>{})}cleanupRealtimeSubscriptions(e){if(e)try{e.unsubscribe()}catch{}}}const et=new gI,vg=Object.freeze(Object.defineProperty({__proto__:null,apiService:et},Symbol.toStringTag,{value:"Module"}));function mI(t,e){const n=fI(e),r=new Set;if(n===0||n===6){for(let l=0;l<24;l++)r.add(l.toString());return Array.from(r)}for(let l=0;l<24;l++)r.add(l.toString());const{work_center:i,department:s,active_shifts:a=[]}=t;return a.forEach(l=>{if(l==="T3"){r.clear();return}if(l==="T2")for(let u=6;u<22;u++)r.delete(u.toString());if(l==="T1"){if(i===tt.BUSTO_GAROLFO){for(let u=8;u<12;u++)r.delete(u.toString());for(let u=14;u<18;u++)r.delete(u.toString())}else if(i===tt.ZANICA)if(s===It.PACKAGING){for(let u=8;u<12;u++)r.delete(u.toString());for(let u=13;u<17;u++)r.delete(u.toString())}else{for(let u=8;u<12;u++)r.delete(u.toString());for(let u=13;u<17;u++)r.delete(u.toString())}}}),Array.from(r).sort((l,u)=>parseInt(l)-parseInt(u))}function vI(t,e){const n=[],r=Gx(new Date(e,0,1)),i=hN(new Date(e,11,31));for(const s of t){let a=new Date(r);for(;!hI(a,i);){const l=mI(s,a);l.length>0&&n.push({machine_id:s.id,date:vn(a,"yyyy-MM-dd"),unavailable_hours:l}),a=nc(a,1)}}return n}const nt={machines:["machines"],machine:t=>["machines",t],machinesByWorkCenter:t=>["machines","workCenter",t],orders:["orders"],order:t=>["orders",t],phases:["phases"],phase:t=>["phases",t],machineAvailability:(t,e,n)=>["machineAvailability",t,e,n],machineAvailabilityForDate:(t,e)=>["machineAvailability",t,"date",e],machineAvailabilityForDateAllMachines:t=>["machineAvailability","allMachines",t]},ef=()=>pa({queryKey:nt.machines,queryFn:()=>et.getMachines(),staleTime:120*1e3}),yI=t=>pa({queryKey:nt.machinesByWorkCenter(t),queryFn:()=>et.getMachines().then(e=>t===tt.BOTH?e:e.filter(n=>n.work_center===t)),staleTime:120*1e3}),bI=()=>{const t=rr();return Bi({mutationFn:async e=>{const n=await et.addMachine(e);try{const r=new Date().getUTCFullYear(),i=vI([n],r);i.length>0&&await et.bulkUpsertMachineAvailability(i),ga(`Machine "${n?.machine_name||"Unknown"}" added and calendar set successfully`)}catch(r){vl(`Machine added, but failed to set calendar: ${r.message}`)}return n},onSuccess:e=>{t.invalidateQueries({queryKey:nt.machines}),t.invalidateQueries({queryKey:nt.machinesByWorkCenter()}),t.setQueryData(nt.machines,n=>n?[...n,e]:[e])}})},_I=()=>{const t=rr();return Bi({mutationFn:({id:e,updates:n})=>et.updateMachine(e,n),onSuccess:(e,{id:n})=>{t.invalidateQueries({queryKey:nt.machines}),t.invalidateQueries({queryKey:nt.machinesByWorkCenter()}),t.setQueryData(nt.machines,r=>r?.map(i=>i.id===n?{...i,...e}:i)),t.setQueryData(nt.machine(n),e),ga(`Machine "${e?.machine_name||"Unknown"}" updated successfully`)}})},SI=()=>{const t=rr();return Bi({mutationFn:async e=>{const n=await et.getMachines().then(r=>r.find(i=>i.id===e));return await et.removeMachine(e),n},onSuccess:e=>{t.invalidateQueries({queryKey:nt.machines}),t.invalidateQueries({queryKey:nt.machinesByWorkCenter()}),t.setQueryData(nt.machines,n=>n?.filter(r=>r.id!==e.id)),t.removeQueries({queryKey:nt.machine(e.id)}),ga(`Machine "${e?.machine_name||"Unknown"}" deleted successfully`)}})},tf=()=>pa({queryKey:nt.orders,queryFn:()=>et.getOdpOrders(),staleTime:60*1e3}),wI=t=>pa({queryKey:nt.order(t),queryFn:async()=>{try{return await et.getOdpOrder(t)}catch{const r=(await et.getOdpOrders()).find(i=>i.id===t);if(!r)throw new Error(`Order with id ${t} not found`);return r}},enabled:!!t,staleTime:60*1e3}),xI=()=>{const t=rr();return Bi({mutationFn:e=>et.addOdpOrder(e),onSuccess:e=>{t.invalidateQueries({queryKey:nt.orders}),t.setQueryData(nt.orders,n=>n?[e,...n]:[e])}})},EI=()=>{const t=rr();return Bi({mutationFn:({id:e,updates:n})=>et.updateOdpOrder(e,n),onSuccess:(e,{id:n})=>{t.invalidateQueries({queryKey:nt.orders}),t.setQueryData(nt.orders,r=>r?.map(i=>i.id===n?{...i,...e}:i)),t.setQueryData(nt.order(n),e)}})},CI=()=>{const t=rr();return Bi({mutationFn:e=>et.removeOdpOrder(e),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:nt.orders}),t.setQueryData(nt.orders,r=>r?.filter(i=>i.id!==n)),t.removeQueries({queryKey:nt.order(n)})}})},dm=()=>pa({queryKey:nt.phases,queryFn:()=>et.getPhases(),staleTime:300*1e3}),TI=t=>pa({queryKey:nt.phase(t),queryFn:()=>et.getPhases().then(e=>e.find(n=>n.id===t)),enabled:!!t,staleTime:300*1e3}),DI=()=>{const t=rr();return Bi({mutationFn:e=>et.addPhase(e),onSuccess:e=>{t.invalidateQueries({queryKey:nt.phases}),t.setQueryData(nt.phases,n=>n?[...n,e]:[e])}})},kI=()=>{const t=rr();return Bi({mutationFn:({id:e,updates:n})=>et.updatePhase(e,n),onSuccess:(e,{id:n})=>{t.invalidateQueries({queryKey:nt.phases}),t.setQueryData(nt.phases,r=>r?.map(i=>i.id===n?{...i,...e}:i)),t.setQueryData(nt.phase(n),e)}})},AI=()=>{const t=rr();return Bi({mutationFn:e=>et.removePhase(e),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:nt.phases}),t.setQueryData(nt.phases,r=>r?.filter(i=>i.id!==n)),t.removeQueries({queryKey:nt.phase(n)})}})},T$=t=>pa({queryKey:nt.machineAvailabilityForDateAllMachines(t),queryFn:()=>et.getMachineAvailabilityForDateAllMachines(t),enabled:!!t,staleTime:30*1e3}),Ri=So((t,e)=>({machines:[],getMachines:()=>e().machines,getMachineById:n=>e().machines.find(r=>r.id===n),getMachinesByWorkCenter:n=>n==="BOTH"?e().machines:e().machines.filter(r=>r.work_center===n),setMachines:n=>t({machines:n||[]}),cleanupDuplicateMachines:()=>{const n=e(),r=[],i=new Set;n.machines.forEach(s=>{i.has(s.id)||(i.add(s.id),r.push(s))}),t({machines:r})},reset:()=>t({machines:[]})})),Xt=So((t,e)=>({odpOrders:[],getOdpOrders:()=>e().odpOrders,getOrderById:n=>e().odpOrders.find(r=>r.id===n),getScheduledOrders:()=>e().odpOrders.filter(n=>n.status==="SCHEDULED"),getUnscheduledOrders:()=>e().odpOrders.filter(n=>n.status==="NOT SCHEDULED"),getOdpOrdersByWorkCenter:n=>n==="BOTH"?e().odpOrders:e().odpOrders.filter(r=>r.work_center===n),setOdpOrders:n=>t({odpOrders:n||[]}),cleanupDuplicateOrders:()=>{const n=e(),r=[],i=new Set;n.odpOrders.forEach(s=>{i.has(s.id)||(i.add(s.id),r.push(s))}),t({odpOrders:r})},reset:()=>t({odpOrders:[]})})),RI=()=>{const{data:t,isLoading:e,error:n}=ef(),{data:r,isLoading:i,error:s}=tf(),{data:a,isLoading:l,error:u}=dm(),{setMachines:d}=Ri(),{setOdpOrders:f}=Xt(),{setPhases:p}=Xa();return T.useEffect(()=>{t&&!e&&!n&&d(t)},[t,e,n,d]),T.useEffect(()=>{r&&!i&&!s&&f(r)},[r,i,s,f]),T.useEffect(()=>{a&&!l&&!u&&p(a)},[a,l,u,p]),{isLoading:e||i||l,errors:{machines:n,orders:s,phases:u}}};function OI(){const{selectedWorkCenter:t,showConfirmDialog:e}=Yt(),n=ci(),{data:r=[],isLoading:i,error:s}=yI(t),a=SI(),{handleAsync:l}=ma("MachineryListPage");if(s)return E.jsxs("div",{className:"text-center py-2 text-red-600 text-[10px]",children:["Errore nel caricamento delle macchine: ",s.message]});const u=T.useMemo(()=>[{header:"Nome Macchina",accessorKey:"machine_name"},{header:"Centro di Lavoro",accessorKey:"work_center"},{header:"Reparto",accessorKey:"department"},{header:"Stato",accessorKey:"status"},{header:"Larghezza Min (mm)",accessorKey:"min_web_width"},{header:"Larghezza Max (mm)",accessorKey:"max_web_width"},{header:"Altezza Min (mm)",accessorKey:"min_bag_height"},{header:"Altezza Max (mm)",accessorKey:"max_bag_height"},{header:"Velocit Std",accessorKey:"standard_speed"},{header:"Setup (h)",accessorKey:"setup_time_standard"},{header:"Cambio Colore (h)",accessorKey:"changeover_color"},{header:"Cambio Materiale (h)",accessorKey:"changeover_material"},{header:"Turni Attivi",accessorKey:"active_shifts",cell:p=>Array.isArray(p.getValue())?p.getValue().join(", "):""},{header:"Calendario",accessorKey:"id",cell:p=>E.jsx(er,{to:`/machinery/${p.getValue()}/calendar`,className:"inline-flex items-center px-1 py-1 border border-gray-300 rounded shadow-sm text-[10px] font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Visualizza Calendario"})}],[]),d=p=>{n(`/machinery/${p.id}/edit`)},f=async p=>{e("Elimina Macchina",`Sei sicuro di voler eliminare "${p.machine_name}"? Questa azione non pu essere annullata.`,async()=>{await l(async()=>{await a.mutateAsync(p.id)},{context:"Delete Machine",fallbackMessage:"Eliminazione macchina fallita"})},"danger")};return i?E.jsx("div",{children:"Caricamento dati macchine..."}):t?E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("h1",{className:"text-2xl font-semibold text-foreground",children:"Lista Macchine"}),E.jsx(er,{to:"/machinery/new",className:"inline-flex items-center px-4 py-2 border border-border rounded-md text-sm font-medium text-foreground bg-background hover:bg-muted",children:"Aggiungi Macchina"})]}),E.jsx(sm,{columns:u,data:r,onEditRow:d,onDeleteRow:f,enableGlobalSearch:!1})]}):E.jsx("div",{className:"text-center py-2 text-red-600 text-[10px]",children:"Seleziona un centro di lavoro per visualizzare i dati delle macchine."})}const fm=am(),yg=am(),Wi=z1(),nf=am(),MI="modulepreload",NI=function(t){return"/scheduler_demo/"+t},Z0={},Ll=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let u=function(d){return Promise.all(d.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=a?.nonce||a?.getAttribute("nonce");i=u(n.map(d=>{if(d=NI(d),d in Z0)return;Z0[d]=!0;const f=d.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${p}`))return;const m=document.createElement("link");if(m.rel=f?"stylesheet":MI,f||(m.as="script"),m.crossOrigin="",m.href=d,l&&m.setAttribute("nonce",l),document.head.appendChild(m),f)return new Promise((v,b)=>{m.addEventListener("load",v),m.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${d}`)))})}))}function s(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return i.then(a=>{for(const l of a||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};class II{constructor(e,n){this.get=e,this.set=n}setSplitTaskInfo=(e,n)=>{this.set(r=>({splitTasksInfo:{...r.splitTasksInfo,[e]:n}}))};getSplitTaskInfo=e=>{const n=this.get().splitTasksInfo[e];if(n&&n.segments)return n;const{getOrderById:r}=Xt.getState(),i=r(e);if(i&&i.description&&i.status==="SCHEDULED")try{const s=JSON.parse(i.description);if(s.segments&&Array.isArray(s.segments))return setTimeout(()=>{this.setSplitTaskInfo(e,s)},0),s}catch{}return null};clearSplitTaskInfo=e=>{this.set(n=>{const r={...n.splitTasksInfo};return delete r[e],{splitTasksInfo:r}})};updateTaskWithSplitInfo=async(e,n,r=null,i=null,s=null)=>{const{apiService:a}=await Ll(async()=>{const{apiService:l}=await Promise.resolve().then(()=>vg);return{apiService:l}},[]);if(n){this.setSplitTaskInfo(e,n);const u={description:JSON.stringify(n),status:"SCHEDULED"};if(r&&(u.scheduled_start_time=r.toISOString()),i&&(u.scheduled_end_time=i.toISOString()),s&&(u.scheduled_machine_id=s),!(u.scheduled_start_time&&u.scheduled_end_time&&u.scheduled_machine_id))if(!u.scheduled_start_time&&!u.scheduled_end_time&&!u.scheduled_machine_id)delete u.scheduled_start_time,delete u.scheduled_end_time,delete u.scheduled_machine_id,u.status="NOT SCHEDULED";else{const{getOrderById:f}=Xt.getState(),p=f(e);p&&(u.scheduled_start_time||(u.scheduled_start_time=p.scheduled_start_time),u.scheduled_end_time||(u.scheduled_end_time=p.scheduled_end_time),u.scheduled_machine_id||(u.scheduled_machine_id=p.scheduled_machine_id))}const d=await a.updateOdpOrder(e,u);this.updateSplitTaskInfo(e,d)}else{this.clearSplitTaskInfo(e);const l=await a.updateOdpOrder(e,{description:""});this.updateSplitTaskInfo(e,l)}};updateSplitTaskInfo=(e,n)=>{if(this.clearSplitTaskInfo(e),n.description&&n.status==="SCHEDULED")try{const r=JSON.parse(n.description);r.segments&&Array.isArray(r.segments)?this.validateSegments(r.segments.map(s=>({start:new Date(s.start),end:new Date(s.end),duration:s.duration}))).isValid?this.setSplitTaskInfo(e,r):this.clearSplitTaskInfo(e):this.clearSplitTaskInfo(e)}catch{this.clearSplitTaskInfo(e)}else this.clearSplitTaskInfo(e)};restoreSplitTaskInfo=()=>{const{getOdpOrders:e}=Xt.getState(),n=e(),r={};let i=0;n.forEach(s=>{if(s.description&&s.status==="SCHEDULED")try{const a=JSON.parse(s.description);a.segments&&Array.isArray(a.segments)&&(r[s.id]=a,i++)}catch{}}),this.set({splitTasksInfo:r})};validateSegments=e=>{if(!Array.isArray(e)||e.length===0)return{isValid:!1,error:"Segments must be a non-empty array"};for(let n=0;n<e.length;n++){const r=e[n];if(!r.start||!r.end||r.duration===void 0)return{isValid:!1,error:`Segment ${n} missing required properties (start, end, duration)`};const i=new Date(r.start),s=new Date(r.end);if(isNaN(i.getTime())||isNaN(s.getTime()))return{isValid:!1,error:`Segment ${n} has invalid date values`};if(s<=i)return{isValid:!1,error:`Segment ${n} end time must be after start time`};if(r.duration<=0)return{isValid:!1,error:`Segment ${n} duration must be positive`};if(n>0){const a=e[n-1],l=new Date(a.end);if(i<l)return{isValid:!1,error:`Segment ${n} overlaps with previous segment`}}}return{isValid:!0}};createSegmentInfo=(e,n)=>{const r=this.validateSegments(e);if(!r.isValid)throw new Error(`Invalid segments: ${r.error}`);return{totalSegments:e.length,segments:e.map(i=>({start:i.start.toISOString(),end:i.end.toISOString(),duration:i.duration})),originalDuration:n,wasSplit:e.length>1}};getTaskOccupiedSegments=e=>{const n=this.getSplitTaskInfo(e.id);if(n&&n.segments)return n.segments.map(r=>({start:new Date(r.start),end:new Date(r.end),duration:r.duration}));if(e.description)try{const r=JSON.parse(e.description);if(r.segments&&Array.isArray(r.segments))return r.segments.map(i=>({start:new Date(i.start),end:new Date(i.end),duration:i.duration}))}catch{}if(e.scheduled_start_time){const r=new Date(e.scheduled_start_time),i=e.time_remaining||e.duration||1,s=new Date(r.getTime()+i*60*60*1e3);return[{start:r,end:s,duration:i}]}return[]};doTimeRangesOverlap=(e,n,r,i)=>e<i&&n>r;checkTaskOverlap=(e,n,r)=>{const i=this.getTaskOccupiedSegments(r);for(const s of i)if(this.doTimeRangesOverlap(e,n,s.start,s.end))return{hasOverlap:!0,conflictingSegment:s,existingTask:r};return{hasOverlap:!1}};checkMachineOverlaps=(e,n,r,i=null,s=[])=>{const{getOdpOrders:a}=Xt.getState(),l=[i,...s].filter(f=>f),d=a().filter(f=>f.scheduled_machine_id===r&&f.status==="SCHEDULED"&&!l.includes(f.id)&&f.scheduled_start_time&&f.scheduled_end_time&&f.scheduled_machine_id).sort((f,p)=>{const m=this.getTaskOccupiedSegments(f),v=this.getTaskOccupiedSegments(p),b=m.length>0?m[0].start:new Date(f.scheduled_start_time),_=v.length>0?v[0].start:new Date(p.scheduled_start_time);return b.getTime()-_.getTime()});for(const f of d){const p=this.checkTaskOverlap(e,n,f);if(p.hasOverlap)return{hasOverlap:!0,conflictingTask:f,conflictingSegment:p.conflictingSegment}}return{hasOverlap:!1}};migrateExistingTasksToSegmentFormat=async()=>{const{getOdpOrders:e}=Xt.getState(),n=e();for(const r of n)if(r.status==="SCHEDULED"&&r.scheduled_start_time){const i=this.getSplitTaskInfo(r.id);if(i&&i.segments)continue;if(r.description)try{const f=JSON.parse(r.description);if(f.segments&&Array.isArray(f.segments)){this.setSplitTaskInfo(r.id,f);continue}}catch{}const s=new Date(r.scheduled_start_time),a=r.time_remaining||r.duration||1,l=new Date(s.getTime()+a*60*60*1e3),u=[{start:s,end:l,duration:a}],d=this.createSegmentInfo(u,a);await this.updateTaskWithSplitInfo(r.id,d)}};verifyAllTasksHaveSegmentInfo=()=>{const{getOdpOrders:e}=Xt.getState(),r=e().filter(s=>s.status==="SCHEDULED"),i=[];for(const s of r){const a=this.getSplitTaskInfo(s.id);(!a||!a.segments)&&i.push({id:s.id,odp_number:s.odp_number,description:s.description})}return{totalScheduledTasks:r.length,tasksWithSegments:r.length-i.length,tasksWithoutSegments:i}}}class PI{constructor(e,n,r,i){this.get=e,this.set=n,this.splitTaskManager=r,this.machineAvailabilityManager=i}createAbsoluteDate=(e,n,r,i=0,s=0)=>new Date(Date.UTC(e,n-1,r,i,s,0,0));splitTaskAcrossAvailableSlots=(e,n,r,i)=>{try{const s=[];let a=new Date(e),l=n,u=!0;for(;u;){u=!1;for(const d of i)if(a>=d.start&&a<d.end){a=new Date(d.end),u=!0;break}}for(;l>0;){let d=null,f=null,p=null;for(const m of i){const v=new Date(m.start),b=new Date(m.end);v>=a&&(!d||v<f)&&(d=m,f=v,p=b)}if(d){const m=(f.getTime()-a.getTime())/36e5;if(m>0){const b=Math.min(m,l),_=new Date(a.getTime()+b*60*60*1e3);s.push({start:new Date(a),end:_,duration:b}),l-=b}a=new Date(p);let v=!0;for(;v;){v=!1;for(const b of i)if(a>=b.start&&a<b.end){a=new Date(b.end),v=!0;break}}}else{const m=new Date(a.getTime()+l*60*60*1e3);s.push({start:new Date(a),end:m,duration:l}),l=0}if(s.length>fO.MAX_TASK_SEGMENTS){console.warn("Task splitting exceeded maximum segments limit");break}}return s}catch(s){return console.error("Error in splitTaskAcrossAvailableSlots:",s),[]}};splitTaskAcrossAvailableSlotsBackward=(e,n,r,i)=>{try{const s=[];let a=new Date(e),l=n,u=!0;for(;u;){u=!1;for(const f of i)if(a>f.start&&a<=f.end){a=new Date(f.start),u=!0;break}}for(;l>0;){let f=null,p=null,m=null;for(const C of i){const k=new Date(C.start),R=new Date(C.end);R<=a&&(!f||R>m)&&(f=C,p=k,m=R)}let v;f?v=new Date(m):v=new Date(a.getTime()-l*60*60*1e3);let b=!0;for(;b;){b=!1;for(const C of i)if(v<C.end&&v>=C.start){v=new Date(C.end),b=!0;break}}const _=(a.getTime()-v.getTime())/(1e3*60*60);if(_<=0){a=f?new Date(p):new Date(a.getTime()-3600*1e3);continue}const w=Math.min(_,l),x=new Date(a.getTime()-w*60*60*1e3);s.push({start:x,end:new Date(a),duration:w}),l-=w,a=new Date(x)}return s.reverse()}catch(s){return console.error("Error in splitTaskAcrossAvailableSlotsBackward:",s),[]}};collectUnavailableSlots=(e,n,r)=>{const i=[],s=this.createAbsoluteDate(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate()),a=this.createAbsoluteDate(n.getUTCFullYear(),n.getUTCMonth()+1,n.getUTCDate()),l=new Date(a);l.setUTCDate(l.getUTCDate()+7);let u=new Date(s);for(;u<=l;){const d=vn(u,"yyyy-MM-dd"),f=this.get().machineAvailability[d];if(f&&Array.isArray(f)){const p=f.find(m=>m.machine_id===r);if(p&&p.unavailable_hours&&Array.isArray(p.unavailable_hours)){const[m,v,b]=d.split("-").map(Number);for(const _ of p.unavailable_hours){const w=this.createAbsoluteDate(m,v,b,parseInt(_),0),x=new Date(w.getTime()+3600*1e3);i.push({start:w,end:x,hour:parseInt(_),date:d})}}}u.setUTCDate(u.getUTCDate()+1)}return i.sort((d,f)=>d.start.getTime()-f.start.getTime())};loadMachineAvailabilityForExtendedRange=async(e,n,r)=>{const i=this.createAbsoluteDate(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate()),s=new Date(e.getTime()+n*60*60*1e3),a=this.createAbsoluteDate(s.getUTCFullYear(),s.getUTCMonth()+1,s.getUTCDate()),l=new Date(a);l.setUTCDate(l.getUTCDate()+7);let u=new Date(i);for(;u<=l;){const d=vn(u,"yyyy-MM-dd");await this.machineAvailabilityManager.loadMachineAvailabilityForDate(d),u.setUTCDate(u.getUTCDate()+1)}return l};loadMachineAvailabilityForBackwardRange=async(e,n,r)=>{const i=this.createAbsoluteDate(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate()),s=new Date(e.getTime()-n*60*60*1e3),a=this.createAbsoluteDate(s.getUTCFullYear(),s.getUTCMonth()+1,s.getUTCDate()),l=new Date(a);l.setUTCDate(l.getUTCDate()-7);let u=new Date(l);for(;u<=i;){const d=vn(u,"yyyy-MM-dd");await this.machineAvailabilityManager.loadMachineAvailabilityForDate(d),u.setUTCDate(u.getUTCDate()+1)}return{taskStartDateWithBuffer:l,taskEndDate:i}};checkSegmentsForOverlaps=(e,n,r,i=[])=>{[r,...i].filter(s=>s);for(const s of e){const a=this.splitTaskManager.checkMachineOverlaps(s.start,s.end,n,r,i);if(a.hasOverlap)return{hasOverlap:!0,conflictingSegment:s,conflictingTask:a.conflictingTask,conflictingExistingSegment:a.conflictingSegment}}return{hasOverlap:!1}};scheduleTaskWithSplitting=async(e,n,r,i,s=[])=>{const a=await this.loadMachineAvailabilityForExtendedRange(n,r,i),l=this.collectUnavailableSlots(n,a,i),u=new Date(n.getTime()+r*60*60*1e3);if(l.some(f=>n<f.end&&u>f.start)){const f=this.splitTaskAcrossAvailableSlots(n,r,i,l);if(f.length>0){const p=this.checkSegmentsForOverlaps(f,i,e,s);if(p.hasOverlap)return{conflict:!0,conflictingTask:p.conflictingTask,conflictingSegment:p.conflictingExistingSegment,proposedSegments:f};const m=f[0],v=f[f.length-1];if(!m?.start||!v?.end)return console.error("Invalid segments returned from splitTaskAcrossAvailableSlots:",f),null;const b=this.splitTaskManager.createSegmentInfo(f,r);return await this.splitTaskManager.updateTaskWithSplitInfo(e,b,m.start,v.end,i),{startTime:m.start,endTime:v.end,wasSplit:!0,segments:f,originalDuration:r}}}else{const f=[{start:n,end:u,duration:r}],p=this.checkSegmentsForOverlaps(f,i,e,s);if(p.hasOverlap)return{conflict:!0,conflictingTask:p.conflictingTask,conflictingSegment:p.conflictingExistingSegment,proposedSegments:f};const m=this.splitTaskManager.createSegmentInfo(f,r);return await this.splitTaskManager.updateTaskWithSplitInfo(e,m,n,u,i),{startTime:n,endTime:u,wasSplit:!1,segments:f,originalDuration:r}}return null};scheduleTaskEndingAtWithSplitting=async(e,n,r,i,s=[])=>{const{taskStartDateWithBuffer:a,taskEndDate:l}=await this.loadMachineAvailabilityForBackwardRange(n,r,i),u=this.collectUnavailableSlots(a,l,i),d=this.splitTaskAcrossAvailableSlotsBackward(n,r,i,u);if(d.length===0)return null;const f=this.checkSegmentsForOverlaps(d,i,e,s);if(f.hasOverlap)return{conflict:!0,conflictingTask:f.conflictingTask,conflictingSegment:f.conflictingExistingSegment,proposedSegments:d};const p=this.splitTaskManager.createSegmentInfo(d,r),m=d[0],v=d[d.length-1];return!m?.start||!v?.end?(console.error("Invalid segments returned from splitTaskAcrossAvailableSlotsBackward:",d),null):(await this.splitTaskManager.updateTaskWithSplitInfo(e,p,m.start,v.end,i),{startTime:m.start,endTime:v.end,wasSplit:d.length>1,segments:d,originalDuration:r})};handleTaskDurationShrinking=async(e,n,r,i={})=>{try{console.log(" DURATION SHRINKING: Starting cascading rescheduling for task",e),console.log(" DURATION SHRINKING: New duration:",n,"hours");const{getOrderById:s,getOdpOrders:a}=Xt.getState(),{getMachineById:l}=Ri.getState(),u=s(e),d=l(r),f=a();if(!u||!d)return{success:!1,error:"Task or machine not found"};if(!u.scheduled_start_time||!u.scheduled_end_time)return{success:!1,error:"Task is not scheduled"};const p=new Date(u.scheduled_start_time),m=u.duration,v=new Date(p.getTime()+m*60*60*1e3);console.log(" DURATION SHRINKING: Original end time (pre-shrinking):",v.toISOString()),console.log(" DURATION SHRINKING: Original duration:",m,"New duration:",n);const b=this.findCascadingChain(e,v,r,f);console.log(" DURATION SHRINKING: Found cascading chain of",b.length,"tasks to reschedule"),console.log(" DURATION SHRINKING: Chain tasks:",b.map(O=>O.odp_number));const _=u.quantity_completed/u.quantity||0,w=n*(1-_);console.log(" DURATION SHRINKING: Calculated time_remaining:",w,"from new duration:",n,"and progress:",_),console.log(" DURATION SHRINKING: Progress calculation:",u.quantity_completed,"/",u.quantity,"=",_),console.log(" DURATION SHRINKING: Rescheduling original task with new time_remaining");const x=await this.scheduleTaskWithSplitting(e,p,w,r,[]);if(!x)return console.error(" DURATION SHRINKING: Failed to reschedule original task"),{success:!1,error:"Failed to reschedule original task. Not enough space available.",rescheduledTasks:[]};if(x.conflict)return console.error(" DURATION SHRINKING: Conflict detected while rescheduling original task"),{success:!1,error:"Conflict detected while rescheduling original task. Consider using conflict resolution.",rescheduledTasks:[]};await this.splitTaskManager.updateTaskWithSplitInfo(e,x.segments?{segments:x.segments,totalSegments:x.segments.length,originalDuration:x.originalDuration||w,wasSplit:x.wasSplit||!1}:null,x.startTime,x.endTime,r);const C={duration:n,time_remaining:w,...i};console.log(" DURATION SHRINKING: Final update data:",C),await et.updateOdpOrder(e,C);const k=[{id:e,odp_number:u.odp_number,new_start_time:x.startTime.toISOString(),new_end_time:x.endTime.toISOString(),was_split:x.wasSplit}];let R=new Date(x.endTime);const A=R.getUTCMinutes(),M=Math.ceil(A/15)*15;M===60?R.setUTCHours(R.getUTCHours()+1,0,0,0):R.setUTCMinutes(M,0,0);for(const O of b){console.log(" DURATION SHRINKING: Rescheduling task",O.odp_number,"to start at",R.toISOString());const z=await this.scheduleTaskWithSplitting(O.id,R,O.time_remaining||O.duration||1,r,[e]);if(!z)return console.error(" DURATION SHRINKING: Failed to reschedule task",O.odp_number),{success:!1,error:`Failed to reschedule task ${O.odp_number}. Not enough space available.`,rescheduledTasks:k};if(z.conflict)return console.error(" DURATION SHRINKING: Conflict detected while rescheduling task",O.odp_number),{success:!1,error:`Conflict detected while rescheduling task ${O.odp_number}. Consider using conflict resolution.`,rescheduledTasks:k};await this.splitTaskManager.updateTaskWithSplitInfo(O.id,z.segments?{segments:z.segments,totalSegments:z.segments.length,originalDuration:z.originalDuration||O.time_remaining||O.duration||1,wasSplit:z.wasSplit||!1}:null,z.startTime,z.endTime,r),k.push({id:O.id,odp_number:O.odp_number,new_start_time:z.startTime.toISOString(),new_end_time:z.endTime.toISOString(),was_split:z.wasSplit}),R=new Date(z.endTime);const B=R.getUTCMinutes(),$=Math.ceil(B/15)*15;$===60?R.setUTCHours(R.getUTCHours()+1,0,0,0):R.setUTCMinutes($,0,0)}console.log(" DURATION SHRINKING: Successfully rescheduled",k.length,"tasks");const P=s(e);return{success:!0,message:`Successfully rescheduled ${k.length} tasks due to duration reduction`,rescheduledTasks:k,updatedTask:P}}catch(s){return console.error(" DURATION SHRINKING ERROR:",s),{success:!1,error:s.message||"Unknown error during duration shrinking",rescheduledTasks:[]}}};findCascadingChain=(e,n,r,i)=>{const s=[],a=new Set,l=i.filter(f=>f.scheduled_machine_id===r&&f.status==="SCHEDULED"&&f.id!==e&&f.scheduled_start_time).sort((f,p)=>new Date(f.scheduled_start_time)-new Date(p.scheduled_start_time)),u=l.filter(f=>{const m=(new Date(f.scheduled_start_time).getTime()-n.getTime())/(1e3*60);return m>=0&&m<=15});console.log(" DURATION SHRINKING: Initial candidates within 15 minutes:",u.map(f=>f.odp_number));const d=f=>{for(const p of l){if(a.has(p.id))continue;const m=new Date(p.scheduled_start_time),v=(m.getTime()-f.getTime())/(1e3*60);if(v>=0&&v<=15){a.add(p.id),s.push(p);const b=p.time_remaining||p.duration||1,_=new Date(m.getTime()+b*60*60*1e3);console.log(" DURATION SHRINKING: Added to chain:",p.odp_number,"ends at",_.toISOString()),d(_)}}};return d(n),console.log(" DURATION SHRINKING: Complete chain found:",s.map(f=>f.odp_number)),s}}class LI{constructor(e,n,r,i){this.get=e,this.set=n,this.schedulingLogic=r,this.splitTaskManager=i}getTaskDurationMinutes=e=>Math.round((e.time_remaining||e.duration||1)*Su.MINUTES_PER_HOUR);getTaskEndTime=e=>{const n=new Date(e.scheduled_start_time),r=this.getTaskDurationMinutes(e);return new Date(n.getTime()+r*Su.MILLISECONDS_PER_MINUTE)};addMinutesToDate=(e,n)=>new Date(e.getTime()+n*Su.MILLISECONDS_PER_MINUTE);roundUpToNext15MinSlot=e=>{const n=e.getUTCMinutes(),r=e.getUTCHours(),i=Math.ceil(n/15)*15,s=new Date(e);return i===Su.MINUTES_PER_HOUR?s.setUTCHours(r+1,0,0,0):s.setUTCMinutes(i,0,0),s};scheduleTaskWithSplittingForShunt=async(e,n,r)=>await this.scheduleTaskWithSplittingForShuntExcluding(e,n,r,[e.id]);scheduleTaskWithSplittingForShuntExcluding=async(e,n,r,i,s=3)=>{const a=this.getTaskDurationMinutes(e)/60,l=i.filter(d=>d!==e.id),u=await this.schedulingLogic.scheduleTaskWithSplitting(e.id,n,a,r.id,l);return u&&!u.conflict?{startTime:u.startTime,endTime:u.endTime,wasSplit:u.wasSplit}:u&&u.conflict?(console.log(` CASCADING SHUNT: Task ${e.odp_number} conflicts with ${u.conflictingTask?.odp_number}, attempting cascading resolution`),s>0?await this.handleCascadingConflict(e,n,r,i,u,s-1):(console.warn(` CASCADING SHUNT: Max depth reached for task ${e.odp_number}, returning conflict info`),{conflict:!0,conflictingTask:u.conflictingTask,conflictingSegment:u.conflictingSegment,proposedSegments:u.proposedSegments})):u?{startTime:n,endTime:this.addMinutesToDate(n,this.getTaskDurationMinutes(e)),wasSplit:!1}:null};handleCascadingConflict=async(e,n,r,i,s,a)=>{const l=s.conflictingTask,u=s.conflictingSegment;console.log(` CASCADING SHUNT: Attempting to shunt conflicting task ${l?.odp_number} to resolve conflict with ${e.odp_number}`);const d=new Date(n.getTime()+this.getTaskDurationMinutes(e)*60*1e3),f=this.roundUpToNext15MinSlot(d),p=[...i,l.id];try{const m=await this.scheduleTaskWithSplittingForShuntExcluding(l,f,r,p,a);if(m&&!m.conflict){console.log(` CASCADING SHUNT: Successfully shunted conflicting task ${l.odp_number}`),await this.updateTaskSchedule(l.id,m.startTime,m.endTime);const v=await this.scheduleTaskWithSplittingForShuntExcluding(e,n,r,p,a);return v&&!v.conflict?(console.log(` CASCADING SHUNT: Successfully scheduled original task ${e.odp_number} after resolving conflicts`),v):(console.warn(` CASCADING SHUNT: Original task ${e.odp_number} still conflicts after shunting conflicting task`),v||{conflict:!0,conflictingTask:l,conflictingSegment:u,proposedSegments:s.proposedSegments})}else return console.warn(` CASCADING SHUNT: Could not shunt conflicting task ${l?.odp_number}`),m||{conflict:!0,conflictingTask:l,conflictingSegment:u,proposedSegments:s.proposedSegments}}catch(m){return console.error(" CASCADING SHUNT: Error during cascading conflict resolution:",m),{conflict:!0,conflictingTask:l,conflictingSegment:u,proposedSegments:s.proposedSegments}}};updateTaskSchedule=async(e,n,r)=>{try{const{updateOrder:i}=Xt.getState();await i(e,{scheduled_start_time:n.toISOString(),scheduled_end_time:r.toISOString()})}catch(i){console.error(` CASCADING SHUNT: Failed to update task ${e} schedule:`,i)}};checkShuntingOverlaps=(e,n,r,i=[])=>{const s=r.filter(a=>a.scheduled_machine_id===n&&a.status==="SCHEDULED"&&!i.includes(a.id));for(const a of e)for(const l of s){const u=this.splitTaskManager.checkTaskOverlap(a.start,a.end,l);if(u.hasOverlap)return{hasOverlap:!0,conflictingTask:l,conflictingSegment:u.conflictingSegment,newTaskSegment:a}}return{hasOverlap:!1}};resolveConflictByShunting=async(e,n,r,i)=>{try{const{conflictingTask:s,proposedStartTime:a,machine:l}=e,u=new Date(a),d=r.filter(A=>A.scheduled_machine_id===l.id&&A.status==="SCHEDULED"&&A.id!==i.id).sort((A,M)=>{const P=this.splitTaskManager.getTaskOccupiedSegments(A),O=this.splitTaskManager.getTaskOccupiedSegments(M),z=P.length>0?P[0].start:new Date(A.scheduled_start_time),B=O.length>0?O[0].start:new Date(M.scheduled_start_time);return z-B}),f=d.findIndex(A=>A.id===s.id);if(f===-1)throw new Ye("Conflicting task not found",je.BUSINESS_LOGIC_ERROR,400,null,"ConflictResolution.resolveConflictByShunting");const p=this.getTaskDurationMinutes(i),m=[];let v=!1;if(n==="right")for(let A=f;A<d.length&&!v;A++){const M=d[A];if(m.push(M),A<d.length-1){const P=d[A+1],O=this.splitTaskManager.getTaskOccupiedSegments(M),z=this.splitTaskManager.getTaskOccupiedSegments(P);if(O.length>0&&z.length>0){const B=Math.max(...O.map(re=>re.end.getTime())),$=Math.min(...z.map(re=>re.start.getTime()));Math.floor(($-B)/(60*1e3))>=p&&(v=!0)}}else v=!0}else for(let A=f;A>=0&&!v;A--){const M=d[A];if(m.unshift(M),A>0){const P=d[A-1],O=this.splitTaskManager.getTaskOccupiedSegments(P),z=this.splitTaskManager.getTaskOccupiedSegments(M);if(O.length>0&&z.length>0){const B=Math.max(...O.map(re=>re.end.getTime())),$=Math.min(...z.map(re=>re.start.getTime()));Math.floor(($-B)/(60*1e3))>=p&&(v=!0)}}else{const P=this.splitTaskManager.getTaskOccupiedSegments(M);if(P.length>0){const O=Math.min(...P.map($=>$.start.getTime())),z=new Date(O);if(z.setUTCHours(6,0,0,0),Math.floor((O-z.getTime())/(60*1e3))>=p)v=!0;else{const $=new Date(O),ee=new Date($);ee.setUTCHours(6,0,0,0),$.getTime()>ee.getTime()&&(v=!0)}}}}const b=new Set,_=new Set;for(const A of m)b.add(A.id),_.add(A.id);_.add(i.id);let w=0;const x=10;for(;w<x;){w++;let A=!1;const M=Array.from(b);for(const P of M){const O=d.find(re=>re.id===P)||i;if(!O)continue;let z;if(n==="right"){const re=new Date(u.getTime()+p*60*1e3);if(z=this.roundUpToNext15MinSlot(re),O.id!==i.id){const he=Array.from(b).indexOf(P);if(he>0){const pe=Array.from(b)[he-1],ie=d.find(q=>q.id===pe)||i,oe=this.getTaskDurationMinutes(ie),K=new Date(z.getTime()+oe*60*1e3);z=this.roundUpToNext15MinSlot(K)}}}else{const re=u,he=this.getTaskDurationMinutes(O);z=this.roundUpToNext15MinSlot(this.addMinutesToDate(re,-he))}const B=this.getTaskDurationMinutes(O)/60,$=this.schedulingLogic.collectUnavailableSlots(z,new Date(z.getTime()+B*60*60*1e3),l.id);if($.some(re=>z<re.end&&new Date(z.getTime()+B*60*60*1e3)>re.start)){const re=this.schedulingLogic.splitTaskAcrossAvailableSlots(z,B,l.id,$);for(const he of re)for(const pe of d)!_.has(pe.id)&&pe.id!==O.id&&this.splitTaskManager.checkTaskOverlap(he.start,he.end,pe).hasOverlap&&(_.add(pe.id),b.add(pe.id),A=!0)}else{const re=new Date(z.getTime()+B*60*60*1e3);for(const he of d)!_.has(he.id)&&he.id!==O.id&&this.splitTaskManager.checkTaskOverlap(z,re,he).hasOverlap&&(_.add(he.id),b.add(he.id),A=!0)}}if(!A)break}if(w>=x)throw console.error(` SHUNTING ERROR: Maximum iterations (${x}) reached, possible infinite loop`),new Ye("Too many conflicts detected during shunting",je.BUSINESS_LOGIC_ERROR,400,null,"ConflictResolution.resolveConflictByShunting");const C=d.filter(A=>b.has(A.id));if(m.length=0,m.push(...C),!v&&m.length===d.length){const A=this.getTaskDurationMinutes(i),M=m.length,P=l.machine_name||"Unknown Machine";console.warn(` SHUNTING WARNING: No gap found for ${A} minutes on machine ${P}`),console.warn(` All ${M} tasks on machine would need to be moved`),console.warn(" Attempting to schedule at earliest possible time...");const O=d[0],z=this.splitTaskManager.getTaskOccupiedSegments(O);if(z.length>0){const B=Math.min(...z.map(ee=>ee.start.getTime())),$=new Date(B);if($.setUTCHours(6,0,0,0),$.getTime()<B)v=!0;else throw console.error(` SHUNTING FAILED: No space even at 6 AM on machine ${P}`),console.error(" Consider: 1) Moving to different machine, 2) Reducing task duration, 3) Scheduling on different day"),new Ye(`Non c' spazio sufficiente per spostare i lavori. Il task ${i.odp_number} (${A} minuti) richiederebbe di spostare tutti i ${M} lavori sulla macchina ${P}. Prova a: 1) Spostare su una macchina diversa, 2) Ridurre la durata del task, 3) Programmare in un giorno diverso.`,je.BUSINESS_LOGIC_ERROR,400,null,"ConflictResolution.resolveConflictByShunting")}else throw new Ye(`Non c' spazio sufficiente per spostare i lavori. Il task ${i.odp_number} (${A} minuti) richiederebbe di spostare tutti i ${M} lavori sulla macchina ${P}. Prova a: 1) Spostare su una macchina diversa, 2) Ridurre la durata del task, 3) Programmare in un giorno diverso.`,je.BUSINESS_LOGIC_ERROR,400,null,"ConflictResolution.resolveConflictByShunting")}const k=[];let R=null;if(n==="right"){const A=new Date(u),M=[...Array.from(_)];if(R=await this.scheduleTaskWithSplittingForShuntExcluding(i,A,l,M),R&&R.conflict)return console.warn(` CASCADING SHUNT: Dragged task ${i.odp_number} still has conflicts after cascading resolution`),{error:`Impossibile programmare il task ${i.odp_number} alla posizione richiesta. Conflitti non risolvibili automaticamente.`,conflict:R.conflict,conflictingTask:R.conflictingTask,conflictingSegment:R.conflictingSegment};let P=R.endTime?this.roundUpToNext15MinSlot(R.endTime):new Date;for(const O of m){const z=[...Array.from(_)],B=await this.scheduleTaskWithSplittingForShuntExcluding(O,P,l,z);if(!B)throw console.error(` Failed to schedule task ${O.odp_number} at ${P.toISOString()}`),new Ye(`Impossibile programmare il task ${O.odp_number} alla posizione richiesta. Non c' spazio sufficiente.`,je.BUSINESS_LOGIC_ERROR,400,null,"ConflictResolution.resolveConflictByShunting");if(B&&B.conflict){console.warn(` CASCADING SHUNT: Task ${O.odp_number} still has conflicts after cascading resolution`);continue}k.push({id:O.id,scheduled_start_time:B.startTime?.toISOString(),scheduled_end_time:B.endTime?.toISOString()}),B.endTime&&(P=this.roundUpToNext15MinSlot(B.endTime))}}else{const A=new Date(u);let M=this.roundUpToNext15MinSlot(this.addMinutesToDate(A,-1));for(let P=m.length-1;P>=0;P--){const O=m[P],z=[...Array.from(_)],B=await this.schedulingLogic.scheduleTaskEndingAtWithSplitting(O.id,M,this.getTaskDurationMinutes(O)/60,l.id,z);if(!B)throw console.error(` Failed to schedule task ${O.odp_number} ending at ${M.toISOString()}`),new Ye(`Impossibile programmare il task ${O.odp_number} alla posizione richiesta. Non c' spazio sufficiente.`,je.BUSINESS_LOGIC_ERROR,400,null,"ConflictResolution.resolveConflictByShunting");if(B&&B.conflict){console.warn(` CASCADING SHUNT: Task ${O.odp_number} still has conflicts after cascading resolution (LEFT direction)`);continue}k.push({id:O.id,scheduled_start_time:B.startTime?.toISOString(),scheduled_end_time:B.endTime?.toISOString()}),B.startTime&&(M=this.roundUpToNext15MinSlot(this.addMinutesToDate(B.startTime,-1)))}}if(!R){const A=new Date(u),M=[...Array.from(_)];R=await this.scheduleTaskWithSplittingForShuntExcluding(i,A,l,M)}if(!R)throw console.error(` Failed to schedule dragged task ${i.odp_number} at ${proposedStart.toISOString()}`),new Ye(`Impossibile programmare il task ${i.odp_number} alla posizione richiesta. Non c' spazio sufficiente.`,je.BUSINESS_LOGIC_ERROR,400,null,"ConflictResolution.resolveConflictByShunting");k.push({id:i.id,scheduled_machine_id:l.id,scheduled_start_time:R.startTime?.toISOString(),scheduled_end_time:R.endTime?.toISOString(),status:"SCHEDULED"});for(const A of k)await et.updateOdpOrder(A.id,A);return Yt.getState().hideConflictDialog(),Yt.getState().showAlert("Lavori riprogrammati con successo","success"),{success:!0}}catch(s){return console.error(" SHUNTING ERROR:",s),{error:(s instanceof Ye?s:new Ye(s.message||"Errore durante la riprogrammazione",je.BUSINESS_LOGIC_ERROR,400,s,"ConflictResolution.resolveConflictByShunting")).message}}}}class FI{constructor(e,n){this.get=e,this.set=n,this.updateLocks=new Map}getLockKey=(e,n)=>`${e}-${n}`;acquireLock=async(e,n)=>{const r=this.getLockKey(e,n);this.updateLocks.has(r)&&await this.updateLocks.get(r);let i;const s=new Promise(a=>{i=a});return this.updateLocks.set(r,s),i};releaseLock=(e,n)=>{const r=this.getLockKey(e,n);this.updateLocks.delete(r)};loadMachineAvailabilityForDate=async e=>{const{machineAvailability:n}=this.get();if(!n[e]?._loading&&!(n[e]&&n[e].length>=0)){this.set(r=>({machineAvailability:{...r.machineAvailability,[e]:{_loading:!0}}}));try{const r=await et.getMachineAvailabilityForDateAllMachines(e);this.set(i=>({machineAvailability:{...i.machineAvailability,[e]:r||[]}}))}catch(r){throw this.set(i=>{const s={...i.machineAvailability};return s[e]&&delete s[e]._loading,{machineAvailability:s}}),r}}};loadMachineAvailabilityForDateRange=async(e,n,r)=>{const i=n instanceof Date?vn(n,"yyyy-MM-dd"):n,s=r instanceof Date?vn(r,"yyyy-MM-dd"):r;try{const a=await et.getMachineAvailabilityForDateRange(e,i,s);return this.set(l=>{const u={...l.machineAvailability};return Array.isArray(a)&&a.forEach(d=>{if(d.date&&d.unavailable_hours){const f=d.date;u[f]||(u[f]=[]);const p=u[f].find(m=>m.machine_id===e);p?p.unavailable_hours=d.unavailable_hours:u[f].push({machine_id:e,date:f,unavailable_hours:d.unavailable_hours})}}),{machineAvailability:u}}),a}catch(a){throw a}};getMachineAvailability=async(e,n)=>{try{const r=this.get().machineAvailability[n];if(r&&Array.isArray(r)){const s=r.find(a=>a.machine_id===e);if(s)return s.unavailable_hours||[]}const i=await et.getMachineAvailabilityForDate(e,n);if(i){const s=(i.unavailable_hours||[]).map(a=>a.toString());return this.set(a=>{const l={...a.machineAvailability};l[n]||(l[n]=[]);const u=l[n].find(d=>d.machine_id===e);return u?u.unavailable_hours=s:l[n].push({machine_id:e,date:n,unavailable_hours:s}),{machineAvailability:l}}),s}return[]}catch{return[]}};loadMachineAvailabilityForMachine=async(e,n,r)=>{const i={};try{try{await et.getMachineAvailabilityForDate("test","2025-01-01")}catch{return{}}let s=new Date(n);for(;s<=r;){const a=vn(s,"yyyy-MM-dd");this.get().machineAvailability[a]||await this.loadMachineAvailabilityForDate(a);const u=this.get().machineAvailability[a];if(Array.isArray(u)){const d=u.find(f=>f.machine_id===e);d&&(i[a]=d.unavailable_hours||[])}s=nc(s,1)}return i}catch{return{}}};isTimeSlotUnavailable=async(e,n,r)=>(await this.getMachineAvailability(e,n)).includes(r.toString());setMachineAvailability=async(e,n,r)=>{const i=await this.acquireLock(e,n);try{const{getOdpOrders:s}=Xt.getState(),a=s().filter(m=>m.scheduled_machine_id===e&&m.status==="SCHEDULED"&&m.scheduled_start_time&&m.scheduled_end_time),[l,u,d]=n.split("-").map(Number),f=new Date(Date.UTC(l,u-1,d)),p=new Date(f.getTime()+1440*60*1e3);for(const m of a){const v=new Date(m.scheduled_start_time),b=new Date(m.scheduled_end_time);if(v<p&&b>f)for(const _ of r){const w=new Date(f.getTime()+parseInt(_)*60*60*1e3),x=new Date(w.getTime()+3600*1e3);if(w<b&&x>v)throw new Ye(`Cannot set machine unavailable during scheduled task: ${m.odp_number}`,je.BUSINESS_LOGIC_ERROR,400,null,"MachineAvailabilityManager.setMachineUnavailability")}}return await et.setMachineAvailability(e,n,r),this.set(m=>{const v={...m.machineAvailability};v[n]||(v[n]=[]);const b=v[n].find(_=>_.machine_id===e);return b?b.unavailable_hours=r:v[n].push({machine_id:e,date:n,unavailable_hours:r}),{machineAvailability:v}}),Yt.getState().showAlert(`Machine availability updated successfully for ${n}`,"success"),!0}catch(s){const a=Fr(s);throw Yt.getState().showAlert(a.message,"error"),a}finally{i(),this.releaseLock(e,n)}};toggleMachineHourAvailability=async(e,n,r)=>{const i=await this.acquireLock(e,n);try{const s=await this.getMachineAvailability(e,n),a=r.toString();let l;return s.includes(a)?l=s.filter(u=>u!==a):l=[...s,a].sort((u,d)=>parseInt(u)-parseInt(d)),await et.setMachineAvailability(e,n,l),this.set(u=>{const d={...u.machineAvailability};d[n]||(d[n]=[]);const f=d[n].find(p=>p.machine_id===e);return f?f.unavailable_hours=l:d[n].push({machine_id:e,date:n,unavailable_hours:l}),{machineAvailability:d}}),Yt.getState().showAlert(`Time slot ${a}:00 updated successfully`,"success"),!0}catch(s){const a=Fr(s);throw Yt.getState().showAlert(a.message,"error"),a}finally{i(),this.releaseLock(e,n)}};setMachineUnavailability=async(e,n,r,i,s)=>{try{const a=await et.setUnavailableHoursForRange(e,n,r,i,s),l=new Date(n),u=new Date(r),d=await this.loadMachineAvailabilityForDateRange(e,l,u);return d&&Array.isArray(d)&&this.set(f=>{const p={...f.machineAvailability};return d.forEach(m=>{if(m.date&&m.unavailable_hours){const v=vn(new Date(m.date),"yyyy-MM-dd");p[v]||(p[v]=[]);const b=p[v].find(_=>_.machine_id===e);b?b.unavailable_hours=m.unavailable_hours:p[v].push({machine_id:e,date:v,unavailable_hours:m.unavailable_hours})}}),{machineAvailability:p}}),a}catch(a){throw a}};isMachineAvailabilityAccessible=async()=>{try{return await et.getMachineAvailabilityForDateAllMachines("2025-01-01"),!0}catch{return!1}};getMachineAvailabilityStatus=async()=>{try{const e=await this.isMachineAvailabilityAccessible();return{accessible:e,message:e?"Table is accessible":"Table is not accessible - check permissions or table existence"}}catch(e){return{accessible:!1,message:`Error checking table: ${e.message}`}}};initializeEmptyMachineAvailability=()=>{const{machineAvailability:e}=this.get(),n={...e};this.set({machineAvailability:n})}}const ai=So((t,e)=>{const n=new II(e,t),r=new FI(e,t),i=new PI(e,t,n,r),s=new LI(e,t,i,n);return{machineAvailability:{},shuntPreview:null,splitTasksInfo:{},getMachineAvailabilityState:()=>e().machineAvailability,getSplitTaskInfo:a=>n.getSplitTaskInfo(a),setMachineAvailabilityState:a=>t({machineAvailability:a}),setShuntPreview:a=>t({shuntPreview:a}),clearShuntPreview:()=>t({shuntPreview:null}),setSplitTaskInfo:n.setSplitTaskInfo,clearSplitTaskInfo:n.clearSplitTaskInfo,updateSplitTaskInfo:n.updateSplitTaskInfo,restoreSplitTaskInfo:n.restoreSplitTaskInfo,updateTaskWithSplitInfo:n.updateTaskWithSplitInfo,getTaskOccupiedSegments:n.getTaskOccupiedSegments,checkTaskOverlap:n.checkTaskOverlap,checkMachineOverlaps:n.checkMachineOverlaps,migrateExistingTasksToSegmentFormat:n.migrateExistingTasksToSegmentFormat,verifyAllTasksHaveSegmentInfo:n.verifyAllTasksHaveSegmentInfo,createAbsoluteDate:i.createAbsoluteDate,splitTaskAcrossAvailableSlots:i.splitTaskAcrossAvailableSlots,collectUnavailableSlots:i.collectUnavailableSlots,scheduleTaskWithSplitting:i.scheduleTaskWithSplitting,findAdjacentTasksChain:i.findAdjacentTasksChain,handleTaskDurationShrinking:i.handleTaskDurationShrinking,scheduleTaskFromSlot:async(a,l,u,d,f,p=null,m=null)=>{const{startSchedulingOperation:v,stopSchedulingOperation:b}=Yt.getState();try{v("schedule",a);const{getOrderById:_,getOdpOrders:w}=Xt.getState(),{getMachineById:x}=Ri.getState(),C=_(a),k=x(l.id),R=w();if(!C||!k)return{error:"Task or machine not found"};const A=u.getUTCFullYear(),M=u.getUTCMonth()+1,P=u.getUTCDate(),O=i.createAbsoluteDate(A,M,P,d,f),z=p||C.time_remaining||C.duration||1;console.log(" SCHEDULER: Using duration:",z,"overrideDuration:",p);const B={machine:l.id,start_time:O.toISOString(),end_time:V0(O,z).toISOString()};console.log(" SCHEDULER: Calling scheduleTask with:",{taskId:a,scheduleData:B,overrideDuration:p});const $=await e().scheduleTask(a,B,R,p,m);return console.log(" SCHEDULER: scheduleTask result:",$),$}catch(_){return{error:Fr(_).message}}finally{b()}},rescheduleTaskToSlot:async(a,l,u,d,f,p=null)=>{const{startSchedulingOperation:m,stopSchedulingOperation:v}=Yt.getState();try{m("reschedule",a);const{getOrderById:b,getOdpOrders:_}=Xt.getState(),{getMachineById:w}=Ri.getState(),x=b(a),C=w(l.id),k=_();if(!x||!C)return{error:"Event or machine not found"};const R=u.getUTCFullYear(),A=u.getUTCMonth()+1,M=u.getUTCDate(),P=i.createAbsoluteDate(R,A,M,d,f),O=x.time_remaining||x.duration||1,z={machine:l.id,start_time:P.toISOString(),end_time:V0(P,O).toISOString()};return await e().scheduleTask(a,z,k,null,p)}catch(b){return{error:Fr(b).message}}finally{v()}},scheduleTask:async(a,l,u=null,d=null,f=null)=>{try{console.log(" SCHEDULER: scheduleTask called with:",{taskId:a,eventData:l,overrideDuration:d});const{getOrderById:p,getOdpOrders:m}=Xt.getState(),{getMachineById:v}=Ri.getState(),b=p(a),_=v(l.machine),w=u||m();if(console.log(" SCHEDULER: Task found:",b?.odp_number,"Machine found:",_?.name),b&&_&&b.work_center&&_.work_center&&b.work_center!==_.work_center)return{error:`Work center mismatch: task requires '${b.work_center}' but machine is '${_.work_center}'`};const x=new Date(l.start_time),C=d||b.time_remaining||b.duration||1;console.log(" SCHEDULER: scheduleTask using duration:",C,"overrideDuration:",d),console.log(" SCHEDULER: Calling scheduleTaskWithSplitting with:",{taskId:a,newStart:x.toISOString(),timeRemainingHours:C,machineId:l.machine});const k=await i.scheduleTaskWithSplitting(a,x,C,l.machine);if(console.log(" SCHEDULER: scheduleTaskWithSplitting result:",k),!k)return{error:"No available time slots found for this task"};if(k.conflict)return{conflict:!0,conflictingTask:k.conflictingTask,draggedTask:b,proposedStartTime:l.start_time,proposedEndTime:l.end_time,machine:_,conflictingSegment:k.conflictingSegment,proposedSegments:k.proposedSegments,tasks:w};l.start_time=k.startTime.toISOString(),l.end_time=k.endTime.toISOString();const R={scheduled_machine_id:l.machine,scheduled_start_time:l.start_time,scheduled_end_time:l.end_time,status:"SCHEDULED"};if(k.segments){const P={segments:k.segments,totalSegments:k.segments.length,originalDuration:k.originalDuration||b.time_remaining||b.duration||1,wasSplit:k.wasSplit||!1};R.description=JSON.stringify(P)}const{apiService:A}=await Ll(async()=>{const{apiService:P}=await Promise.resolve().then(()=>vg);return{apiService:P}},void 0),M=await A.updateOdpOrder(a,R);if(k.segments){const P={segments:k.segments,totalSegments:k.segments.length,originalDuration:k.originalDuration||b.time_remaining||b.duration||1,wasSplit:k.wasSplit||!1};n.setSplitTaskInfo(a,P)}return f&&(f.invalidateQueries({queryKey:["orders"]}),f.invalidateQueries({queryKey:["orders",a]})),{success:!0,updatedTask:M,schedulingResult:k}}catch(p){return{error:Fr(p).message}}},unscheduleTask:async(a,l=null)=>{const{startSchedulingOperation:u,stopSchedulingOperation:d}=Yt.getState();try{u("unschedule",a),n.clearSplitTaskInfo(a);const f={scheduled_machine_id:null,scheduled_start_time:null,scheduled_end_time:null,status:"NOT SCHEDULED",description:""},{apiService:p}=await Ll(async()=>{const{apiService:m}=await Promise.resolve().then(()=>vg);return{apiService:m}},void 0);return await p.updateOdpOrder(a,f),l&&(l.invalidateQueries({queryKey:["orders"]}),l.invalidateQueries({queryKey:["orders",a]})),{success:!0}}catch(f){return{error:Fr(f).message}}finally{d()}},loadMachineAvailabilityForDate:r.loadMachineAvailabilityForDate,loadMachineAvailabilityForDateRange:r.loadMachineAvailabilityForDateRange,getMachineAvailability:r.getMachineAvailability,loadMachineAvailabilityForMachine:r.loadMachineAvailabilityForMachine,isTimeSlotUnavailable:r.isTimeSlotUnavailable,setMachineAvailability:r.setMachineAvailability,toggleMachineHourAvailability:r.toggleMachineHourAvailability,setMachineUnavailability:r.setMachineUnavailability,isMachineAvailabilityAccessible:r.isMachineAvailabilityAccessible,getMachineAvailabilityStatus:r.getMachineAvailabilityStatus,initializeEmptyMachineAvailability:r.initializeEmptyMachineAvailability,resolveConflictByShunting:async(a,l,u=null)=>{const{startSchedulingOperation:d,stopSchedulingOperation:f}=Yt.getState();try{d("shunt",a.draggedTask?.id);const{getOdpOrders:p}=Xt.getState(),m=p(),v=await s.resolveConflictByShunting(a,l,m,a.draggedTask);if(v&&!v.error&&u){console.log(" SHUNTING: Invalidating React Query cache to refresh UI");const b=[u.invalidateQueries({queryKey:["orders"]}),u.invalidateQueries({queryKey:["machines"]})];a.draggedTask?.id&&b.push(u.invalidateQueries({queryKey:["orders",a.draggedTask.id]})),await Promise.all(b)}return v}catch(p){return console.error(" SHUNTING ERROR in scheduler store:",p),{error:p.message||"Errore durante lo spostamento del task"}}finally{f()}},validateSlotAvailability:async(a,l,u,d)=>{try{const f=vn(l,"yyyy-MM-dd");if(await e().isTimeSlotUnavailable(a.id,f,u))return{error:"Cannot schedule task on unavailable time slot"};const{getOdpOrders:m}=Xt.getState(),v=new Date(l);v.setUTCHours(u,d,0,0);const b=new Date(v.getTime()+3600*1e3),_=m().filter(w=>w.scheduled_machine_id===a.id&&w.status==="SCHEDULED"&&w.scheduled_start_time);for(const w of _){const x=new Date(w.scheduled_start_time),C=w.time_remaining||w.duration||1,k=new Date(x.getTime()+C*60*60*1e3);if(v<k&&b>x)return{error:"Cannot schedule task on occupied time slot"}}return{success:!0}}catch(f){return{error:Fr(f).message}}},getEventsByDate:async a=>{try{return await et.getEventsByDate(a)}catch{return[]}},reset:()=>t({machineAvailability:{},shuntPreview:null,splitTasksInfo:{}})}}),wr={validationSchema:"MACHINE",addButtonText:"Aggiungi Macchina",editButtonText:"Aggiorna Macchina",addLoadingText:"Aggiunta...",editLoadingText:"Aggiornamento...",addContext:"Add Machine",editContext:"Update Machine",addErrorMessage:"Aggiunta macchina fallita",editErrorMessage:"Aggiornamento macchina fallita",sections:[{title:"Identificazione",fields:[{name:"department",label:"Department",type:"select",required:!0,options:[{value:It.PRINTING,label:It.PRINTING},{value:It.PACKAGING,label:It.PACKAGING}],defaultValue:Tt.MACHINE.DEPARTMENT,validation:{required:"Department is required"}},{name:"machine_type",label:"Machine Type",type:"select",required:!0,placeholder:"Seleziona tipo macchina",options:[],conditional:t=>t===It.PRINTING||t===It.PACKAGING,validation:{required:"Machine type is required"}},{name:"machine_name",label:"Machine Name",type:"text",required:!0,placeholder:"Nome descrittivo",validation:{required:"Machine name is required",minLength:{value:2,message:"Machine name must be at least 2 characters"},maxLength:{value:100,message:"Machine name must be at most 100 characters"},pattern:{value:/^[a-zA-Z0-9\s\-_]+$/,message:"Machine name can only contain letters, numbers, spaces, hyphens, and underscores"}}},{name:"work_center",label:"Work Center",type:"select",required:!0,placeholder:"Seleziona un centro di lavoro",options:[{value:tt.ZANICA,label:tt.ZANICA},{value:tt.BUSTO_GAROLFO,label:tt.BUSTO_GAROLFO}],defaultValue:Tt.MACHINE.WORK_CENTER,helpText:"Il centro di lavoro  pre-impostato.",validation:{required:"Work center is required"}}]},{title:"Capacit Tecniche",fields:[{name:"min_web_width",label:"Min Web Width (mm)",type:"number",required:!0,defaultValue:Tt.MACHINE.MIN_WEB_WIDTH,validation:{required:"Min web width is required",min:{value:1,message:"Min web width must be at least 1"}}},{name:"max_web_width",label:"Max Web Width (mm)",type:"number",required:!0,defaultValue:Tt.MACHINE.MAX_WEB_WIDTH,validation:{required:"Max web width is required",min:{value:1,message:"Max web width must be at least 1"}}},{name:"min_bag_height",label:"Min Bag Height (mm)",type:"number",required:!0,defaultValue:Tt.MACHINE.MIN_BAG_HEIGHT,validation:{required:"Min bag height is required",min:{value:1,message:"Min bag height must be at least 1"}}},{name:"max_bag_height",label:"Max Bag Height (mm)",type:"number",required:!0,defaultValue:Tt.MACHINE.MAX_BAG_HEIGHT,validation:{required:"Max bag height is required",min:{value:1,message:"Max bag height must be at least 1"}}}]},{title:"Performance",fields:[{name:"standard_speed",label:"Standard Speed",type:"number",required:!0,placeholder:"pz/h o mt/h",validation:{required:"Standard speed is required",min:{value:1,message:"Standard speed must be at least 1"}}},{name:"setup_time_standard",label:"Setup Time Standard (h)",type:"number",required:!0,defaultValue:Tt.MACHINE.SETUP_TIME_STANDARD,validation:{required:"Setup time is required",min:{value:0,message:"Setup time must be at least 0"}}},{name:"changeover_color",label:"Changeover Color (h)",type:"number",required:!0,defaultValue:Tt.MACHINE.CHANGEOVER_COLOR,conditional:(t,e,n)=>n("department")===It.PRINTING,validation:{required:"Changeover color time is required",min:{value:0,message:"Changeover color time must be at least 0"}}},{name:"changeover_material",label:"Material Changeover (h)",type:"number",required:!0,defaultValue:Tt.MACHINE.CHANGEOVER_MATERIAL,conditional:(t,e,n)=>n("department")===It.PACKAGING,validation:{required:"Changeover material time is required",min:{value:0,message:"Changeover material time must be at least 0"}}}]},{title:"Disponibilit",fields:[{name:"active_shifts",label:"Active Shifts",type:"checkbox",required:!1,defaultValue:Tt.MACHINE.ACTIVE_SHIFTS,options:[{value:$a.T1,label:$a.T1},{value:$a.T2,label:$a.T2},{value:$a.T3,label:$a.T3}]},{name:"status",label:"Status",type:"select",required:!0,defaultValue:Tt.MACHINE.STATUS,options:[{value:ki.ACTIVE,label:ki.ACTIVE},{value:ki.INACTIVE,label:ki.INACTIVE}],validation:{required:"Status is required"}}]}]},Zr={validationSchema:"PHASE",addButtonText:"Aggiungi Fase",editButtonText:"Aggiorna Fase",addLoadingText:"Aggiunta Fase...",editLoadingText:"Aggiornamento Fase...",addContext:"Add Phase",editContext:"Update Phase",addErrorMessage:"Aggiunta fase fallita",editErrorMessage:"Aggiornamento fase fallita",sections:[{title:"Informazioni Fase",fields:[{name:"name",label:"Nome Fase",type:"text",required:!0,placeholder:"es. Stampa Alta Velocit"},{name:"department",label:"Tipo Fase",type:"select",required:!0,options:[{value:It.PRINTING,label:It.PRINTING},{value:It.PACKAGING,label:It.PACKAGING}],defaultValue:Tt.PHASE.DEPARTMENT},{name:"numero_persone",label:"Numero di Persone Richieste",type:"number",required:!0,defaultValue:Tt.PHASE.NUMERO_PERSONE},{name:"work_center",label:"Centro di Lavoro",type:"select",required:!0,options:[{value:tt.ZANICA,label:tt.ZANICA},{value:tt.BUSTO_GAROLFO,label:tt.BUSTO_GAROLFO}],defaultValue:Tt.PHASE.WORK_CENTER,helpText:"Il centro di lavoro  impostato in base alla tua selezione di accesso"}]},{title:"Parametri Stampa",fields:[{name:"v_stampa",label:"Velocit Stampa (mt/h)",type:"number",required:!0,defaultValue:Tt.PHASE.V_STAMPA,conditional:(t,e,n)=>n("department")===It.PRINTING},{name:"t_setup_stampa",label:"Tempo Setup (ore)",type:"number",required:!0,defaultValue:Tt.PHASE.T_SETUP_STAMPA,conditional:(t,e,n)=>n("department")===It.PRINTING},{name:"costo_h_stampa",label:"Costo Orario (/h)",type:"number",required:!0,defaultValue:Tt.PHASE.COSTO_H_STAMPA,conditional:(t,e,n)=>n("department")===It.PRINTING}]},{title:"Parametri Confezionamento",fields:[{name:"v_conf",label:"Velocit Confezionamento (pz/h)",type:"number",required:!0,defaultValue:Tt.PHASE.V_CONF,conditional:(t,e,n)=>n("department")===It.PACKAGING},{name:"t_setup_conf",label:"Tempo Setup (ore)",type:"number",required:!0,defaultValue:Tt.PHASE.T_SETUP_CONF,conditional:(t,e,n)=>n("department")===It.PACKAGING},{name:"costo_h_conf",label:"Costo Orario (/h)",type:"number",required:!0,defaultValue:Tt.PHASE.COSTO_H_CONF,conditional:(t,e,n)=>n("department")===It.PACKAGING}]},{title:"Descrizione Fase",fields:[{name:"contenuto_fase",label:"Descrizione Contenuto Fase",type:"textarea",required:!0,placeholder:"Descrivi il contenuto della fase e i requisiti...",rows:3}],gridCols:"grid-cols-1"}]},jI={validationSchema:"ORDER",addButtonText:"Aggiungi al Backlog",editButtonText:"Aggiorna Ordine",addLoadingText:"Aggiunta...",editLoadingText:"Aggiornamento...",addContext:"Add Order",editContext:"Update Order",addErrorMessage:"Aggiunta ordine fallita",editErrorMessage:"Aggiornamento ordine fallito",sections:[{title:"Identificazione",fields:[{name:"odp_number",label:"Numero ODP",type:"text",required:!0,placeholder:"Inserisci numero ODP"},{name:"article_code",label:"Codice Articolo",type:"article_code",required:!0,placeholder:"Inserisci codice articolo"},{name:"production_lot",label:"Codice Articolo Esterno",type:"text",required:!0,placeholder:"Inserisci codice articolo esterno"},{name:"work_center",label:"Centro di Lavoro",type:"select",required:!0,placeholder:"Seleziona centro di lavoro",options:[{value:tt.ZANICA,label:tt.ZANICA},{value:tt.BUSTO_GAROLFO,label:tt.BUSTO_GAROLFO}],conditional:(t,e,n)=>!0},{name:"nome_cliente",label:"Nome Cliente",type:"text",required:!0,placeholder:"Inserisci nome cliente"}]},{title:"Specifiche Tecniche",fields:[{name:"bag_height",label:"Altezza Busta (mm)",type:"number",required:!1,placeholder:"Inserisci altezza busta"},{name:"bag_width",label:"Larghezza Busta (mm)",type:"number",required:!1,placeholder:"Inserisci larghezza busta"},{name:"bag_step",label:"Passo Busta (mm)",type:"number",required:!1,placeholder:"Inserisci passo busta"},{name:"seal_sides",label:"Lati Sigillatura",type:"select",required:!1,placeholder:"Seleziona...",options:[{value:"3",label:"3"},{value:"4",label:"4"}],defaultValue:Tt.ORDER.SEAL_SIDES},{name:"product_type",label:"Tipo Prodotto",type:"select",required:!1,placeholder:"Seleziona...",options:[{value:Va.CREMA,label:Va.CREMA},{value:Va.LIQUIDO,label:Va.LIQUIDO},{value:Va.POLVERI,label:Va.POLVERI}]},{name:"quantity",label:"Quantit",type:"number",required:!0,placeholder:"Inserisci quantit"},{name:"quantity_completed",label:"Q.t Completata",type:"number",required:!0,defaultValue:Tt.ORDER.QUANTITY_COMPLETED}]},{title:"Dati Commerciali",fields:[{name:"internal_customer_code",label:"Lotto FLEXI",type:"text",required:!0,placeholder:"Inserisci lotto FLEXI"},{name:"external_customer_code",label:"Lotto Cliente",type:"text",required:!0,placeholder:"Inserisci lotto cliente"},{name:"customer_order_ref",label:"Riferimento Cliente",type:"text",required:!0,placeholder:"Inserisci riferimento cliente"},{name:"user_notes",label:"Note Libere",type:"textarea",required:!1,placeholder:"Inserisci note libere per l'ordine...",rows:3},{name:"asd_notes",label:"Note ASD",type:"textarea",required:!1,placeholder:"Inserisci note ASD per l'ordine...",rows:3}],gridCols:"grid-cols-2 md:grid-cols-3"},{title:"Dati Lavorazione & Pianificazione",fields:[{name:"department",label:"Reparto",type:"text",required:!0,readOnly:!0,className:"bg-gray-50"},{name:"phase_search",label:"Cerca Fase di Produzione",type:"phase_search",required:!0},{name:"delivery_date",label:"Data di Consegna",type:"datetime-local",required:!0}]},{title:"Disponibilit Materiali",fields:[{name:"material_availability_global",label:"Disponibilit Materiale Globale (%)",type:"number",required:!1,placeholder:"Inserisci percentuale disponibilit (0-100)",min:0,max:100}]}],customFields:{phase_parameters:{type:"phase_parameters",label:"Parametri Fase Selezionata"},calculation_results:{type:"calculation_results",label:"Risultati Calcolo Produzione"}},customValidation:t=>{const e={};return{isValid:Object.keys(e).length===0,errors:e}}},Sp={validationSchema:"OFF_TIME",addButtonText:"Imposta Non Disponibilit",editButtonText:"Aggiorna Non Disponibilit",addLoadingText:"Impostazione...",editLoadingText:"Aggiornamento...",addContext:"Set Machine Unavailability",editContext:"Update Machine Unavailability",addErrorMessage:"Impostazione indisponibilit macchina fallita",editErrorMessage:"Aggiornamento indisponibilit macchina fallita",sections:[{title:"Periodo di Non Disponibilit",fields:[{name:"startDate",label:"Data Inizio",type:"date",required:!0,defaultValue:""},{name:"startTime",label:"Ora Inizio",type:"time",required:!0,defaultValue:Tt.OFF_TIME.START_TIME},{name:"endDate",label:"Data Fine",type:"date",required:!0,defaultValue:""},{name:"endTime",label:"Ora Fine",type:"time",required:!0,defaultValue:Tt.OFF_TIME.END_TIME}]}],customValidation:t=>{const e={};if(t.startDate&&t.endDate){const n=new Date(t.startDate);new Date(t.endDate)<n&&(e.endDate=S0.END_DATE_BEFORE_START),t.startDate===t.endDate&&t.startTime&&t.endTime&&t.startTime>=t.endTime&&(e.endTime=S0.END_TIME_BEFORE_START)}return{isValid:Object.keys(e).length===0,errors:e}}};function zI({machineToEdit:t,onSuccess:e}){const{selectedWorkCenter:n}=Wi(),{getValidMachineTypes:r}=dx(),i=bI(),s=_I(),a=!!t,l=T.useMemo(()=>{const p={...wr};return p.sections[0].fields[1].options=[...r("STAMPA").map(m=>({value:m,label:m})),...r("CONFEZIONAMENTO").map(m=>({value:m,label:m}))],p.sections[0].fields[1].placeholder="Seleziona tipo macchina",n!==tt.BOTH&&(p.sections[0].fields[3].disabled=!0,p.sections[0].fields[3].defaultValue=n,p.sections[0].fields[3].helpText="Il centro di lavoro  pre-impostato."),p},[r,n]),u=T.useMemo(()=>({department:t?.department||wr.sections[0].fields[0].defaultValue,machine_type:t?.machine_type||"",machine_name:t?.machine_name||"",work_center:t?.work_center||(n===tt.BOTH?wr.sections[0].fields[3].defaultValue:n),min_web_width:t?.min_web_width||wr.sections[1].fields[0].defaultValue,max_web_width:t?.max_web_width||wr.sections[1].fields[1].defaultValue,min_bag_height:t?.min_bag_height||wr.sections[1].fields[2].defaultValue,max_bag_height:t?.max_bag_height||wr.sections[1].fields[3].defaultValue,standard_speed:t?.standard_speed||"",setup_time_standard:t?.setup_time_standard||wr.sections[2].fields[1].defaultValue,changeover_color:t?.changeover_color||wr.sections[2].fields[2].defaultValue,changeover_material:t?.changeover_material||wr.sections[2].fields[3].defaultValue,active_shifts:t?.active_shifts||wr.sections[3].fields[0].defaultValue,status:t?.status||wr.sections[3].fields[1].defaultValue}),[n,t]),d=async p=>{a?await s.mutateAsync({id:t.id,updates:p}):await i.mutateAsync(p),e&&e()},f=i.isPending||s.isPending;return E.jsx(Yd,{config:l,initialData:u,onSubmit:d,onSuccess:e,isEditMode:a,isLoading:f})}function HI({title:t,children:e}){return E.jsx("div",{className:"sticky top-0 z-10 bg-background border-b border-border px-2 py-3 mb-2",children:E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("div",{className:"flex items-center",children:t&&E.jsx("h2",{className:"text-[10px] font-semibold text-gray-900",children:t})}),e]})})}function X0(){const{id:t}=qd(),e=ci(),{getMachineById:n}=fm(),{selectedWorkCenter:r}=Wi(),{isLoading:i,isInitialized:s,init:a,cleanup:l}=nf(),u=!!t,d=u?n(t):null;return T.useEffect(()=>(s||a(),()=>{l()}),[a,s,l]),T.useEffect(()=>{u&&!i&&!d&&e("/machinery",{replace:!0})},[u,i,d,e]),i?E.jsx("div",{children:"Caricamento..."}):u&&!d?E.jsx("div",{className:"text-center py-2 text-red-600 text-[10px]",children:"Macchina non trovata."}):r?E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("h1",{className:"text-2xl font-semibold text-foreground",children:u?`Modifica Macchina: ${d?.machine_name}`:"Aggiungi Nuova Macchina"}),u&&E.jsx(er,{to:`/machinery/${t}/calendar`,className:"inline-flex items-center px-4 py-2 border border-border rounded-md text-sm font-medium text-foreground bg-background hover:bg-muted",children:"Visualizza Calendario"})]}),E.jsx(zI,{machineToEdit:d})]}):E.jsx("div",{className:"text-center py-2 text-red-600 text-[10px]",children:"Seleziona un centro di lavoro per gestire le macchine."})}function UI({machineId:t,currentDate:e,onSuccess:n}){const{setMachineUnavailability:r}=ai(),{showAlert:i}=Wi(),s=T.useMemo(()=>{const l=new Date,u=nc(l,1);return{startDate:vn(l,"yyyy-MM-dd"),endDate:vn(u,"yyyy-MM-dd"),startTime:Sp.sections[0].fields[1].defaultValue,endTime:Sp.sections[0].fields[3].defaultValue}},[e]),a=async l=>{await r(t,l.startDate,l.endDate,l.startTime,l.endTime),i("Indisponibilit macchina impostata con successo!","success"),n&&n()};return E.jsx(Yd,{config:Sp,initialData:s,onSubmit:a,onSuccess:n,className:"p-1 bg-white rounded-lg shadow-sm border"})}var rf,ke,Kx,Zx,lo,Js,J0,Xx,Jx,vd={},eE=[],BI=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function ps(t,e){for(var n in e)t[n]=e[n];return t}function tE(t){var e=t.parentNode;e&&e.removeChild(t)}function I(t,e,n){var r,i,s,a={};for(s in e)s=="key"?r=e[s]:s=="ref"?i=e[s]:a[s]=e[s];if(arguments.length>2&&(a.children=arguments.length>3?rf.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(s in t.defaultProps)a[s]===void 0&&(a[s]=t.defaultProps[s]);return td(t,a,r,i,null)}function td(t,e,n,r,i){var s={type:t,props:e,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:i??++Kx};return i==null&&ke.vnode!=null&&ke.vnode(s),s}function Fn(){return{current:null}}function vt(t){return t.children}function WI(t,e,n,r,i){var s;for(s in n)s==="children"||s==="key"||s in e||yd(t,s,null,n[s],r);for(s in e)i&&typeof e[s]!="function"||s==="children"||s==="key"||s==="value"||s==="checked"||n[s]===e[s]||yd(t,s,e[s],n[s],r)}function e_(t,e,n){e[0]==="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||BI.test(e)?n:n+"px"}function yd(t,e,n,r,i){var s;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof r=="string"&&(t.style.cssText=r=""),r)for(e in r)n&&e in n||e_(t.style,e,"");if(n)for(e in n)r&&n[e]===r[e]||e_(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")s=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+s]=n,n?r||t.addEventListener(e,s?n_:t_,s):t.removeEventListener(e,s?n_:t_,s);else if(e!=="dangerouslySetInnerHTML"){if(i)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="width"&&e!=="height"&&e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e.indexOf("-")==-1?t.removeAttribute(e):t.setAttribute(e,n))}}function t_(t){lo=!0;try{return this.l[t.type+!1](ke.event?ke.event(t):t)}finally{lo=!1}}function n_(t){lo=!0;try{return this.l[t.type+!0](ke.event?ke.event(t):t)}finally{lo=!1}}function cr(t,e){this.props=t,this.context=e}function Fl(t,e){if(e==null)return t.__?Fl(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?Fl(t):null}function nE(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return nE(t)}}function VI(t){lo?setTimeout(t):Xx(t)}function bg(t){(!t.__d&&(t.__d=!0)&&Js.push(t)&&!bd.__r++||J0!==ke.debounceRendering)&&((J0=ke.debounceRendering)||VI)(bd)}function bd(){var t,e,n,r,i,s,a,l;for(Js.sort(function(u,d){return u.__v.__b-d.__v.__b});t=Js.shift();)t.__d&&(e=Js.length,r=void 0,i=void 0,a=(s=(n=t).__v).__e,(l=n.__P)&&(r=[],(i=ps({},s)).__v=s.__v+1,hm(l,s,i,n.__n,l.ownerSVGElement!==void 0,s.__h!=null?[a]:null,r,a??Fl(s),s.__h),oE(r,s),s.__e!=a&&nE(s)),Js.length>e&&Js.sort(function(u,d){return u.__v.__b-d.__v.__b}));bd.__r=0}function rE(t,e,n,r,i,s,a,l,u,d){var f,p,m,v,b,_,w,x=r&&r.__k||eE,C=x.length;for(n.__k=[],f=0;f<e.length;f++)if((v=n.__k[f]=(v=e[f])==null||typeof v=="boolean"?null:typeof v=="string"||typeof v=="number"||typeof v=="bigint"?td(null,v,null,null,v):Array.isArray(v)?td(vt,{children:v},null,null,null):v.__b>0?td(v.type,v.props,v.key,v.ref?v.ref:null,v.__v):v)!=null){if(v.__=n,v.__b=n.__b+1,(m=x[f])===null||m&&v.key==m.key&&v.type===m.type)x[f]=void 0;else for(p=0;p<C;p++){if((m=x[p])&&v.key==m.key&&v.type===m.type){x[p]=void 0;break}m=null}hm(t,v,m=m||vd,i,s,a,l,u,d),b=v.__e,(p=v.ref)&&m.ref!=p&&(w||(w=[]),m.ref&&w.push(m.ref,null,v),w.push(p,v.__c||b,v)),b!=null?(_==null&&(_=b),typeof v.type=="function"&&v.__k===m.__k?v.__d=u=iE(v,u,t):u=sE(t,v,m,x,b,u),typeof n.type=="function"&&(n.__d=u)):u&&m.__e==u&&u.parentNode!=t&&(u=Fl(m))}for(n.__e=_,f=C;f--;)x[f]!=null&&(typeof n.type=="function"&&x[f].__e!=null&&x[f].__e==n.__d&&(n.__d=aE(r).nextSibling),cE(x[f],x[f]));if(w)for(f=0;f<w.length;f++)lE(w[f],w[++f],w[++f])}function iE(t,e,n){for(var r,i=t.__k,s=0;i&&s<i.length;s++)(r=i[s])&&(r.__=t,e=typeof r.type=="function"?iE(r,e,n):sE(n,r,r,i,r.__e,e));return e}function _d(t,e){return e=e||[],t==null||typeof t=="boolean"||(Array.isArray(t)?t.some(function(n){_d(n,e)}):e.push(t)),e}function sE(t,e,n,r,i,s){var a,l,u;if(e.__d!==void 0)a=e.__d,e.__d=void 0;else if(n==null||i!=s||i.parentNode==null)e:if(s==null||s.parentNode!==t)t.appendChild(i),a=null;else{for(l=s,u=0;(l=l.nextSibling)&&u<r.length;u+=1)if(l==i)break e;t.insertBefore(i,s),a=s}return a!==void 0?a:i.nextSibling}function aE(t){var e,n,r;if(t.type==null||typeof t.type=="string")return t.__e;if(t.__k){for(e=t.__k.length-1;e>=0;e--)if((n=t.__k[e])&&(r=aE(n)))return r}return null}function hm(t,e,n,r,i,s,a,l,u){var d,f,p,m,v,b,_,w,x,C,k,R,A,M,P,O=e.type;if(e.constructor!==void 0)return null;n.__h!=null&&(u=n.__h,l=e.__e=n.__e,e.__h=null,s=[l]),(d=ke.__b)&&d(e);try{e:if(typeof O=="function"){if(w=e.props,x=(d=O.contextType)&&r[d.__c],C=d?x?x.props.value:d.__:r,n.__c?_=(f=e.__c=n.__c).__=f.__E:("prototype"in O&&O.prototype.render?e.__c=f=new O(w,C):(e.__c=f=new cr(w,C),f.constructor=O,f.render=qI),x&&x.sub(f),f.props=w,f.state||(f.state={}),f.context=C,f.__n=r,p=f.__d=!0,f.__h=[],f._sb=[]),f.__s==null&&(f.__s=f.state),O.getDerivedStateFromProps!=null&&(f.__s==f.state&&(f.__s=ps({},f.__s)),ps(f.__s,O.getDerivedStateFromProps(w,f.__s))),m=f.props,v=f.state,f.__v=e,p)O.getDerivedStateFromProps==null&&f.componentWillMount!=null&&f.componentWillMount(),f.componentDidMount!=null&&f.__h.push(f.componentDidMount);else{if(O.getDerivedStateFromProps==null&&w!==m&&f.componentWillReceiveProps!=null&&f.componentWillReceiveProps(w,C),!f.__e&&f.shouldComponentUpdate!=null&&f.shouldComponentUpdate(w,f.__s,C)===!1||e.__v===n.__v){for(e.__v!==n.__v&&(f.props=w,f.state=f.__s,f.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.forEach(function(z){z&&(z.__=e)}),k=0;k<f._sb.length;k++)f.__h.push(f._sb[k]);f._sb=[],f.__h.length&&a.push(f);break e}f.componentWillUpdate!=null&&f.componentWillUpdate(w,f.__s,C),f.componentDidUpdate!=null&&f.__h.push(function(){f.componentDidUpdate(m,v,b)})}if(f.context=C,f.props=w,f.__P=t,R=ke.__r,A=0,"prototype"in O&&O.prototype.render){for(f.state=f.__s,f.__d=!1,R&&R(e),d=f.render(f.props,f.state,f.context),M=0;M<f._sb.length;M++)f.__h.push(f._sb[M]);f._sb=[]}else do f.__d=!1,R&&R(e),d=f.render(f.props,f.state,f.context),f.state=f.__s;while(f.__d&&++A<25);f.state=f.__s,f.getChildContext!=null&&(r=ps(ps({},r),f.getChildContext())),p||f.getSnapshotBeforeUpdate==null||(b=f.getSnapshotBeforeUpdate(m,v)),P=d!=null&&d.type===vt&&d.key==null?d.props.children:d,rE(t,Array.isArray(P)?P:[P],e,n,r,i,s,a,l,u),f.base=e.__e,e.__h=null,f.__h.length&&a.push(f),_&&(f.__E=f.__=null),f.__e=!1}else s==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=$I(n.__e,e,n,r,i,s,a,u);(d=ke.diffed)&&d(e)}catch(z){e.__v=null,(u||s!=null)&&(e.__e=l,e.__h=!!u,s[s.indexOf(l)]=null),ke.__e(z,e,n)}}function oE(t,e){ke.__c&&ke.__c(e,t),t.some(function(n){try{t=n.__h,n.__h=[],t.some(function(r){r.call(n)})}catch(r){ke.__e(r,n.__v)}})}function $I(t,e,n,r,i,s,a,l){var u,d,f,p=n.props,m=e.props,v=e.type,b=0;if(v==="svg"&&(i=!0),s!=null){for(;b<s.length;b++)if((u=s[b])&&"setAttribute"in u==!!v&&(v?u.localName===v:u.nodeType===3)){t=u,s[b]=null;break}}if(t==null){if(v===null)return document.createTextNode(m);t=i?document.createElementNS("http://www.w3.org/2000/svg",v):document.createElement(v,m.is&&m),s=null,l=!1}if(v===null)p===m||l&&t.data===m||(t.data=m);else{if(s=s&&rf.call(t.childNodes),d=(p=n.props||vd).dangerouslySetInnerHTML,f=m.dangerouslySetInnerHTML,!l){if(s!=null)for(p={},b=0;b<t.attributes.length;b++)p[t.attributes[b].name]=t.attributes[b].value;(f||d)&&(f&&(d&&f.__html==d.__html||f.__html===t.innerHTML)||(t.innerHTML=f&&f.__html||""))}if(WI(t,m,p,i,l),f)e.__k=[];else if(b=e.props.children,rE(t,Array.isArray(b)?b:[b],e,n,r,i&&v!=="foreignObject",s,a,s?s[0]:n.__k&&Fl(n,0),l),s!=null)for(b=s.length;b--;)s[b]!=null&&tE(s[b]);l||("value"in m&&(b=m.value)!==void 0&&(b!==t.value||v==="progress"&&!b||v==="option"&&b!==p.value)&&yd(t,"value",b,p.value,!1),"checked"in m&&(b=m.checked)!==void 0&&b!==t.checked&&yd(t,"checked",b,p.checked,!1))}return t}function lE(t,e,n){try{typeof t=="function"?t(e):t.current=e}catch(r){ke.__e(r,n)}}function cE(t,e,n){var r,i;if(ke.unmount&&ke.unmount(t),(r=t.ref)&&(r.current&&r.current!==t.__e||lE(r,null,e)),(r=t.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(s){ke.__e(s,e)}r.base=r.__P=null,t.__c=void 0}if(r=t.__k)for(i=0;i<r.length;i++)r[i]&&cE(r[i],e,n||typeof t.type!="function");n||t.__e==null||tE(t.__e),t.__=t.__e=t.__d=void 0}function qI(t,e,n){return this.constructor(t,n)}function jl(t,e,n){var r,i,s;ke.__&&ke.__(t,e),i=(r=!1)?null:e.__k,s=[],hm(e,t=e.__k=I(vt,null,[t]),i||vd,vd,e.ownerSVGElement!==void 0,i?null:e.firstChild?rf.call(e.childNodes):null,s,i?i.__e:e.firstChild,r),oE(s,t)}function GI(t,e){var n={__c:e="__cC"+Jx++,__:t,Consumer:function(r,i){return r.children(i)},Provider:function(r){var i,s;return this.getChildContext||(i=[],(s={})[e]=this,this.getChildContext=function(){return s},this.shouldComponentUpdate=function(a){this.props.value!==a.value&&i.some(function(l){l.__e=!0,bg(l)})},this.sub=function(a){i.push(a);var l=a.componentWillUnmount;a.componentWillUnmount=function(){i.splice(i.indexOf(a),1),l&&l.call(a)}}),r.children}};return n.Provider.__=n.Consumer.contextType=n}rf=eE.slice,ke={__e:function(t,e,n,r){for(var i,s,a;e=e.__;)if((i=e.__c)&&!i.__)try{if((s=i.constructor)&&s.getDerivedStateFromError!=null&&(i.setState(s.getDerivedStateFromError(t)),a=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(t,r||{}),a=i.__d),a)return i.__E=i}catch(l){t=l}throw t}},Kx=0,Zx=function(t){return t!=null&&t.constructor===void 0},lo=!1,cr.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=ps({},this.state),typeof t=="function"&&(t=t(ps({},n),this.props)),t&&ps(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),bg(this))},cr.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),bg(this))},cr.prototype.render=vt,Js=[],Xx=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,bd.__r=0,Jx=0;var ri,wp,r_,uE=[],xp=[],i_=ke.__b,s_=ke.__r,a_=ke.diffed,o_=ke.__c,l_=ke.unmount;function YI(){for(var t;t=uE.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(nd),t.__H.__h.forEach(_g),t.__H.__h=[]}catch(e){t.__H.__h=[],ke.__e(e,t.__v)}}ke.__b=function(t){ri=null,i_&&i_(t)},ke.__r=function(t){s_&&s_(t);var e=(ri=t.__c).__H;e&&(wp===ri?(e.__h=[],ri.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=xp,n.__N=n.i=void 0})):(e.__h.forEach(nd),e.__h.forEach(_g),e.__h=[])),wp=ri},ke.diffed=function(t){a_&&a_(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(uE.push(e)!==1&&r_===ke.requestAnimationFrame||((r_=ke.requestAnimationFrame)||QI)(YI)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==xp&&(n.__=n.__V),n.i=void 0,n.__V=xp})),wp=ri=null},ke.__c=function(t,e){e.some(function(n){try{n.__h.forEach(nd),n.__h=n.__h.filter(function(r){return!r.__||_g(r)})}catch(r){e.some(function(i){i.__h&&(i.__h=[])}),e=[],ke.__e(r,n.__v)}}),o_&&o_(t,e)},ke.unmount=function(t){l_&&l_(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{nd(r)}catch(i){e=i}}),n.__H=void 0,e&&ke.__e(e,n.__v))};var c_=typeof requestAnimationFrame=="function";function QI(t){var e,n=function(){clearTimeout(r),c_&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(n,100);c_&&(e=requestAnimationFrame(n))}function nd(t){var e=ri,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),ri=e}function _g(t){var e=ri;t.__c=t.__(),ri=e}function KI(t,e){for(var n in e)t[n]=e[n];return t}function u_(t,e){for(var n in t)if(n!=="__source"&&!(n in e))return!0;for(var r in e)if(r!=="__source"&&t[r]!==e[r])return!0;return!1}function d_(t){this.props=t}(d_.prototype=new cr).isPureReactComponent=!0,d_.prototype.shouldComponentUpdate=function(t,e){return u_(this.props,t)||u_(this.state,e)};var f_=ke.__b;ke.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),f_&&f_(t)};var ZI=ke.__e;ke.__e=function(t,e,n,r){if(t.then){for(var i,s=e;s=s.__;)if((i=s.__c)&&i.__c)return e.__e==null&&(e.__e=n.__e,e.__k=n.__k),i.__c(t,e)}ZI(t,e,n,r)};var h_=ke.unmount;function dE(t,e,n){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(r){typeof r.__c=="function"&&r.__c()}),t.__c.__H=null),(t=KI({},t)).__c!=null&&(t.__c.__P===n&&(t.__c.__P=e),t.__c=null),t.__k=t.__k&&t.__k.map(function(r){return dE(r,e,n)})),t}function fE(t,e,n){return t&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(r){return fE(r,e,n)}),t.__c&&t.__c.__P===e&&(t.__e&&n.insertBefore(t.__e,t.__d),t.__c.__e=!0,t.__c.__P=n)),t}function Ep(){this.__u=0,this.t=null,this.__b=null}function hE(t){var e=t.__.__c;return e&&e.__a&&e.__a(t)}function Au(){this.u=null,this.o=null}ke.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&t.__h===!0&&(t.type=null),h_&&h_(t)},(Ep.prototype=new cr).__c=function(t,e){var n=e.__c,r=this;r.t==null&&(r.t=[]),r.t.push(n);var i=hE(r.__v),s=!1,a=function(){s||(s=!0,n.__R=null,i?i(l):l())};n.__R=a;var l=function(){if(!--r.__u){if(r.state.__a){var d=r.state.__a;r.__v.__k[0]=fE(d,d.__c.__P,d.__c.__O)}var f;for(r.setState({__a:r.__b=null});f=r.t.pop();)f.forceUpdate()}},u=e.__h===!0;r.__u++||u||r.setState({__a:r.__b=r.__v.__k[0]}),t.then(a,a)},Ep.prototype.componentWillUnmount=function(){this.t=[]},Ep.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=dE(this.__b,n,r.__O=r.__P)}this.__b=null}var i=e.__a&&I(vt,null,t.fallback);return i&&(i.__h=null),[I(vt,null,e.__a?null:t.children),i]};var p_=function(t,e,n){if(++n[1]===n[0]&&t.o.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.o.size))for(n=t.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.u=n=n[2]}};function XI(t){return this.getChildContext=function(){return t.context},t.children}function JI(t){var e=this,n=t.i;e.componentWillUnmount=function(){jl(null,e.l),e.l=null,e.i=null},e.i&&e.i!==n&&e.componentWillUnmount(),t.__v?(e.l||(e.i=n,e.l={nodeType:1,parentNode:n,childNodes:[],appendChild:function(r){this.childNodes.push(r),e.i.appendChild(r)},insertBefore:function(r,i){this.childNodes.push(r),e.i.appendChild(r)},removeChild:function(r){this.childNodes.splice(this.childNodes.indexOf(r)>>>1,1),e.i.removeChild(r)}}),jl(I(XI,{context:e.context},t.__v),e.l)):e.l&&e.componentWillUnmount()}function eP(t,e){var n=I(JI,{__v:t,i:e});return n.containerInfo=e,n}(Au.prototype=new cr).__a=function(t){var e=this,n=hE(e.__v),r=e.o.get(t);return r[0]++,function(i){var s=function(){e.props.revealOrder?(r.push(i),p_(e,t,r)):i()};n?n(s):s()}},Au.prototype.render=function(t){this.u=null,this.o=new Map;var e=_d(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var n=e.length;n--;)this.o.set(e[n],this.u=[1,0,this.u]);return t.children},Au.prototype.componentDidUpdate=Au.prototype.componentDidMount=function(){var t=this;this.o.forEach(function(e,n){p_(t,n,e)})};var tP=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,nP=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,rP=typeof document<"u",iP=function(t){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(t)};cr.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(cr.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});var g_=ke.event;function sP(){}function aP(){return this.cancelBubble}function oP(){return this.defaultPrevented}ke.event=function(t){return g_&&(t=g_(t)),t.persist=sP,t.isPropagationStopped=aP,t.isDefaultPrevented=oP,t.nativeEvent=t};var m_={configurable:!0,get:function(){return this.class}},v_=ke.vnode;ke.vnode=function(t){var e=t.type,n=t.props,r=n;if(typeof e=="string"){var i=e.indexOf("-")===-1;for(var s in r={},n){var a=n[s];rP&&s==="children"&&e==="noscript"||s==="value"&&"defaultValue"in n&&a==null||(s==="defaultValue"&&"value"in n&&n.value==null?s="value":s==="download"&&a===!0?a="":/ondoubleclick/i.test(s)?s="ondblclick":/^onchange(textarea|input)/i.test(s+e)&&!iP(n.type)?s="oninput":/^onfocus$/i.test(s)?s="onfocusin":/^onblur$/i.test(s)?s="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(s)?s=s.toLowerCase():i&&nP.test(s)?s=s.replace(/[A-Z0-9]/g,"-$&").toLowerCase():a===null&&(a=void 0),/^oninput$/i.test(s)&&(s=s.toLowerCase(),r[s]&&(s="oninputCapture")),r[s]=a)}e=="select"&&r.multiple&&Array.isArray(r.value)&&(r.value=_d(n.children).forEach(function(l){l.props.selected=r.value.indexOf(l.props.value)!=-1})),e=="select"&&r.defaultValue!=null&&(r.value=_d(n.children).forEach(function(l){l.props.selected=r.multiple?r.defaultValue.indexOf(l.props.value)!=-1:r.defaultValue==l.props.value})),t.props=r,n.class!=n.className&&(m_.enumerable="className"in n,n.className!=null&&(r.class=n.className),Object.defineProperty(r,"className",m_))}t.$$typeof=tP,v_&&v_(t)};var y_=ke.__r;ke.__r=function(t){y_&&y_(t),t.__c};const pE=[],Sg=new Map;function sf(t){pE.push(t),Sg.forEach(e=>{mE(e,t)})}function lP(t){t.isConnected&&t.getRootNode&&gE(t.getRootNode())}function gE(t){let e=Sg.get(t);if(!e||!e.isConnected){if(e=t.querySelector("style[data-fullcalendar]"),!e){e=document.createElement("style"),e.setAttribute("data-fullcalendar","");const n=uP();n&&(e.nonce=n);const r=t===document?document.head:t,i=t===document?r.querySelector("script,link[rel=stylesheet],link[as=style],style"):r.firstChild;r.insertBefore(e,i)}Sg.set(t,e),cP(e)}}function cP(t){for(const e of pE)mE(t,e)}function mE(t,e){const{sheet:n}=t,r=n.cssRules.length;e.split("}").forEach((i,s)=>{i=i.trim(),i&&n.insertRule(i+"}",r+s)})}let Cp;function uP(){return Cp===void 0&&(Cp=dP()),Cp}function dP(){const t=document.querySelector('meta[name="csp-nonce"]');if(t&&t.hasAttribute("content"))return t.getAttribute("content");const e=document.querySelector("script[nonce]");return e&&e.nonce||""}typeof document<"u"&&gE(document);var fP=':root{--fc-small-font-size:.85em;--fc-page-bg-color:#fff;--fc-neutral-bg-color:hsla(0,0%,82%,.3);--fc-neutral-text-color:grey;--fc-border-color:#ddd;--fc-button-text-color:#fff;--fc-button-bg-color:#2c3e50;--fc-button-border-color:#2c3e50;--fc-button-hover-bg-color:#1e2b37;--fc-button-hover-border-color:#1a252f;--fc-button-active-bg-color:#1a252f;--fc-button-active-border-color:#151e27;--fc-event-bg-color:#3788d8;--fc-event-border-color:#3788d8;--fc-event-text-color:#fff;--fc-event-selected-overlay-color:rgba(0,0,0,.25);--fc-more-link-bg-color:#d0d0d0;--fc-more-link-text-color:inherit;--fc-event-resizer-thickness:8px;--fc-event-resizer-dot-total-width:8px;--fc-event-resizer-dot-border-width:1px;--fc-non-business-color:hsla(0,0%,84%,.3);--fc-bg-event-color:#8fdf82;--fc-bg-event-opacity:0.3;--fc-highlight-color:rgba(188,232,241,.3);--fc-today-bg-color:rgba(255,220,40,.15);--fc-now-indicator-color:red}.fc-not-allowed,.fc-not-allowed .fc-event{cursor:not-allowed}.fc{display:flex;flex-direction:column;font-size:1em}.fc,.fc *,.fc :after,.fc :before{box-sizing:border-box}.fc table{border-collapse:collapse;border-spacing:0;font-size:1em}.fc th{text-align:center}.fc td,.fc th{padding:0;vertical-align:top}.fc a[data-navlink]{cursor:pointer}.fc a[data-navlink]:hover{text-decoration:underline}.fc-direction-ltr{direction:ltr;text-align:left}.fc-direction-rtl{direction:rtl;text-align:right}.fc-theme-standard td,.fc-theme-standard th{border:1px solid var(--fc-border-color)}.fc-liquid-hack td,.fc-liquid-hack th{position:relative}@font-face{font-family:fcicons;font-style:normal;font-weight:400;src:url("data:application/x-font-ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMg8SBfAAAAC8AAAAYGNtYXAXVtKNAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZgYydxIAAAF4AAAFNGhlYWQUJ7cIAAAGrAAAADZoaGVhB20DzAAABuQAAAAkaG10eCIABhQAAAcIAAAALGxvY2ED4AU6AAAHNAAAABhtYXhwAA8AjAAAB0wAAAAgbmFtZXsr690AAAdsAAABhnBvc3QAAwAAAAAI9AAAACAAAwPAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpBgPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6Qb//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAWIAjQKeAskAEwAAJSc3NjQnJiIHAQYUFwEWMjc2NCcCnuLiDQ0MJAz/AA0NAQAMJAwNDcni4gwjDQwM/wANIwz/AA0NDCMNAAAAAQFiAI0CngLJABMAACUBNjQnASYiBwYUHwEHBhQXFjI3AZ4BAA0N/wAMJAwNDeLiDQ0MJAyNAQAMIw0BAAwMDSMM4uINIwwNDQAAAAIA4gC3Ax4CngATACcAACUnNzY0JyYiDwEGFB8BFjI3NjQnISc3NjQnJiIPAQYUHwEWMjc2NCcB87e3DQ0MIw3VDQ3VDSMMDQ0BK7e3DQ0MJAzVDQ3VDCQMDQ3zuLcMJAwNDdUNIwzWDAwNIwy4twwkDA0N1Q0jDNYMDA0jDAAAAgDiALcDHgKeABMAJwAAJTc2NC8BJiIHBhQfAQcGFBcWMjchNzY0LwEmIgcGFB8BBwYUFxYyNwJJ1Q0N1Q0jDA0Nt7cNDQwjDf7V1Q0N1QwkDA0Nt7cNDQwkDLfWDCMN1Q0NDCQMt7gMIw0MDNYMIw3VDQ0MJAy3uAwjDQwMAAADAFUAAAOrA1UAMwBoAHcAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMhMjY1NCYjISIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAAVYRGRkR/qoRGRkRA1UFBAUOCQkVDAsZDf2rDRkLDBUJCA4FBQUFBQUOCQgVDAsZDQJVDRkLDBUJCQ4FBAVVAgECBQMCBwQECAX9qwQJAwQHAwMFAQICAgIBBQMDBwQDCQQCVQUIBAQHAgMFAgEC/oAZEhEZGRESGQAAAAADAFUAAAOrA1UAMwBoAIkAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMzFRQWMzI2PQEzMjY1NCYrATU0JiMiBh0BIyIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAgBkSEhmAERkZEYAZEhIZgBEZGREDVQUEBQ4JCRUMCxkN/asNGQsMFQkIDgUFBQUFBQ4JCBUMCxkNAlUNGQsMFQkJDgUEBVUCAQIFAwIHBAQIBf2rBAkDBAcDAwUBAgICAgEFAwMHBAMJBAJVBQgEBAcCAwUCAQL+gIASGRkSgBkSERmAEhkZEoAZERIZAAABAOIAjQMeAskAIAAAExcHBhQXFjI/ARcWMjc2NC8BNzY0JyYiDwEnJiIHBhQX4uLiDQ0MJAzi4gwkDA0N4uINDQwkDOLiDCQMDQ0CjeLiDSMMDQ3h4Q0NDCMN4uIMIw0MDOLiDAwNIwwAAAABAAAAAQAAa5n0y18PPPUACwQAAAAAANivOVsAAAAA2K85WwAAAAADqwNVAAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAOrAAEAAAAAAAAAAAAAAAAAAAALBAAAAAAAAAAAAAAAAgAAAAQAAWIEAAFiBAAA4gQAAOIEAABVBAAAVQQAAOIAAAAAAAoAFAAeAEQAagCqAOoBngJkApoAAQAAAAsAigADAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApGZjaWNvbnMAZgBjAGkAYwBvAG4Ac1ZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGZjaWNvbnMAZgBjAGkAYwBvAG4Ac2ZjaWNvbnMAZgBjAGkAYwBvAG4Ac1JlZ3VsYXIAUgBlAGcAdQBsAGEAcmZjaWNvbnMAZgBjAGkAYwBvAG4Ac0ZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=") format("truetype")}.fc-icon{speak:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:inline-block;font-family:fcicons!important;font-style:normal;font-variant:normal;font-weight:400;height:1em;line-height:1;text-align:center;text-transform:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:1em}.fc-icon-chevron-left:before{content:"\\e900"}.fc-icon-chevron-right:before{content:"\\e901"}.fc-icon-chevrons-left:before{content:"\\e902"}.fc-icon-chevrons-right:before{content:"\\e903"}.fc-icon-minus-square:before{content:"\\e904"}.fc-icon-plus-square:before{content:"\\e905"}.fc-icon-x:before{content:"\\e906"}.fc .fc-button{border-radius:0;font-family:inherit;font-size:inherit;line-height:inherit;margin:0;overflow:visible;text-transform:none}.fc .fc-button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}.fc .fc-button{-webkit-appearance:button}.fc .fc-button:not(:disabled){cursor:pointer}.fc .fc-button{background-color:transparent;border:1px solid transparent;border-radius:.25em;display:inline-block;font-size:1em;font-weight:400;line-height:1.5;padding:.4em .65em;text-align:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle}.fc .fc-button:hover{text-decoration:none}.fc .fc-button:focus{box-shadow:0 0 0 .2rem rgba(44,62,80,.25);outline:0}.fc .fc-button:disabled{opacity:.65}.fc .fc-button-primary{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:hover{background-color:var(--fc-button-hover-bg-color);border-color:var(--fc-button-hover-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:disabled{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button-primary:not(:disabled).fc-button-active,.fc .fc-button-primary:not(:disabled):active{background-color:var(--fc-button-active-bg-color);border-color:var(--fc-button-active-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:not(:disabled).fc-button-active:focus,.fc .fc-button-primary:not(:disabled):active:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button .fc-icon{font-size:1.5em;vertical-align:middle}.fc .fc-button-group{display:inline-flex;position:relative;vertical-align:middle}.fc .fc-button-group>.fc-button{flex:1 1 auto;position:relative}.fc .fc-button-group>.fc-button.fc-button-active,.fc .fc-button-group>.fc-button:active,.fc .fc-button-group>.fc-button:focus,.fc .fc-button-group>.fc-button:hover{z-index:1}.fc-direction-ltr .fc-button-group>.fc-button:not(:first-child){border-bottom-left-radius:0;border-top-left-radius:0;margin-left:-1px}.fc-direction-ltr .fc-button-group>.fc-button:not(:last-child){border-bottom-right-radius:0;border-top-right-radius:0}.fc-direction-rtl .fc-button-group>.fc-button:not(:first-child){border-bottom-right-radius:0;border-top-right-radius:0;margin-right:-1px}.fc-direction-rtl .fc-button-group>.fc-button:not(:last-child){border-bottom-left-radius:0;border-top-left-radius:0}.fc .fc-toolbar{align-items:center;display:flex;justify-content:space-between}.fc .fc-toolbar.fc-header-toolbar{margin-bottom:1.5em}.fc .fc-toolbar.fc-footer-toolbar{margin-top:1.5em}.fc .fc-toolbar-title{font-size:1.75em;margin:0}.fc-direction-ltr .fc-toolbar>*>:not(:first-child){margin-left:.75em}.fc-direction-rtl .fc-toolbar>*>:not(:first-child){margin-right:.75em}.fc-direction-rtl .fc-toolbar-ltr{flex-direction:row-reverse}.fc .fc-scroller{-webkit-overflow-scrolling:touch;position:relative}.fc .fc-scroller-liquid{height:100%}.fc .fc-scroller-liquid-absolute{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-scroller-harness{direction:ltr;overflow:hidden;position:relative}.fc .fc-scroller-harness-liquid{height:100%}.fc-direction-rtl .fc-scroller-harness>.fc-scroller{direction:rtl}.fc-theme-standard .fc-scrollgrid{border:1px solid var(--fc-border-color)}.fc .fc-scrollgrid,.fc .fc-scrollgrid table{table-layout:fixed;width:100%}.fc .fc-scrollgrid table{border-left-style:hidden;border-right-style:hidden;border-top-style:hidden}.fc .fc-scrollgrid{border-bottom-width:0;border-collapse:separate;border-right-width:0}.fc .fc-scrollgrid-liquid{height:100%}.fc .fc-scrollgrid-section,.fc .fc-scrollgrid-section table,.fc .fc-scrollgrid-section>td{height:1px}.fc .fc-scrollgrid-section-liquid>td{height:100%}.fc .fc-scrollgrid-section>*{border-left-width:0;border-top-width:0}.fc .fc-scrollgrid-section-footer>*,.fc .fc-scrollgrid-section-header>*{border-bottom-width:0}.fc .fc-scrollgrid-section-body table,.fc .fc-scrollgrid-section-footer table{border-bottom-style:hidden}.fc .fc-scrollgrid-section-sticky>*{background:var(--fc-page-bg-color);position:sticky;z-index:3}.fc .fc-scrollgrid-section-header.fc-scrollgrid-section-sticky>*{top:0}.fc .fc-scrollgrid-section-footer.fc-scrollgrid-section-sticky>*{bottom:0}.fc .fc-scrollgrid-sticky-shim{height:1px;margin-bottom:-1px}.fc-sticky{position:sticky}.fc .fc-view-harness{flex-grow:1;position:relative}.fc .fc-view-harness-active>.fc-view{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-col-header-cell-cushion{display:inline-block;padding:2px 4px}.fc .fc-bg-event,.fc .fc-highlight,.fc .fc-non-business{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-non-business{background:var(--fc-non-business-color)}.fc .fc-bg-event{background:var(--fc-bg-event-color);opacity:var(--fc-bg-event-opacity)}.fc .fc-bg-event .fc-event-title{font-size:var(--fc-small-font-size);font-style:italic;margin:.5em}.fc .fc-highlight{background:var(--fc-highlight-color)}.fc .fc-cell-shaded,.fc .fc-day-disabled{background:var(--fc-neutral-bg-color)}a.fc-event,a.fc-event:hover{text-decoration:none}.fc-event.fc-event-draggable,.fc-event[href]{cursor:pointer}.fc-event .fc-event-main{position:relative;z-index:2}.fc-event-dragging:not(.fc-event-selected){opacity:.75}.fc-event-dragging.fc-event-selected{box-shadow:0 2px 7px rgba(0,0,0,.3)}.fc-event .fc-event-resizer{display:none;position:absolute;z-index:4}.fc-event-selected .fc-event-resizer,.fc-event:hover .fc-event-resizer{display:block}.fc-event-selected .fc-event-resizer{background:var(--fc-page-bg-color);border-color:inherit;border-radius:calc(var(--fc-event-resizer-dot-total-width)/2);border-style:solid;border-width:var(--fc-event-resizer-dot-border-width);height:var(--fc-event-resizer-dot-total-width);width:var(--fc-event-resizer-dot-total-width)}.fc-event-selected .fc-event-resizer:before{bottom:-20px;content:"";left:-20px;position:absolute;right:-20px;top:-20px}.fc-event-selected,.fc-event:focus{box-shadow:0 2px 5px rgba(0,0,0,.2)}.fc-event-selected:before,.fc-event:focus:before{bottom:0;content:"";left:0;position:absolute;right:0;top:0;z-index:3}.fc-event-selected:after,.fc-event:focus:after{background:var(--fc-event-selected-overlay-color);bottom:-1px;content:"";left:-1px;position:absolute;right:-1px;top:-1px;z-index:1}.fc-h-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-h-event .fc-event-main{color:var(--fc-event-text-color)}.fc-h-event .fc-event-main-frame{display:flex}.fc-h-event .fc-event-time{max-width:100%;overflow:hidden}.fc-h-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-width:0}.fc-h-event .fc-event-title{display:inline-block;left:0;max-width:100%;overflow:hidden;right:0;vertical-align:top}.fc-h-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-start),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-end){border-bottom-left-radius:0;border-left-width:0;border-top-left-radius:0}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-end),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-start){border-bottom-right-radius:0;border-right-width:0;border-top-right-radius:0}.fc-h-event:not(.fc-event-selected) .fc-event-resizer{bottom:0;top:0;width:var(--fc-event-resizer-thickness)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end{cursor:w-resize;left:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start{cursor:e-resize;right:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-h-event.fc-event-selected .fc-event-resizer{margin-top:calc(var(--fc-event-resizer-dot-total-width)*-.5);top:50%}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-start,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-end{left:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-end,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-start{right:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc .fc-popover{box-shadow:0 2px 6px rgba(0,0,0,.15);position:absolute;z-index:9999}.fc .fc-popover-header{align-items:center;display:flex;flex-direction:row;justify-content:space-between;padding:3px 4px}.fc .fc-popover-title{margin:0 2px}.fc .fc-popover-close{cursor:pointer;font-size:1.1em;opacity:.65}.fc-theme-standard .fc-popover{background:var(--fc-page-bg-color);border:1px solid var(--fc-border-color)}.fc-theme-standard .fc-popover-header{background:var(--fc-neutral-bg-color)}';sf(fP);class pm{constructor(e){this.drainedOption=e,this.isRunning=!1,this.isDirty=!1,this.pauseDepths={},this.timeoutId=0}request(e){this.isDirty=!0,this.isPaused()||(this.clearTimeout(),e==null?this.tryDrain():this.timeoutId=setTimeout(this.tryDrain.bind(this),e))}pause(e=""){let{pauseDepths:n}=this;n[e]=(n[e]||0)+1,this.clearTimeout()}resume(e="",n){let{pauseDepths:r}=this;e in r&&(n?delete r[e]:(r[e]-=1,r[e]<=0&&delete r[e]),this.tryDrain())}isPaused(){return Object.keys(this.pauseDepths).length}tryDrain(){if(!this.isRunning&&!this.isPaused()){for(this.isRunning=!0;this.isDirty;)this.isDirty=!1,this.drained();this.isRunning=!1}}clear(){this.clearTimeout(),this.isDirty=!1,this.pauseDepths={}}clearTimeout(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=0)}drained(){this.drainedOption&&this.drainedOption()}}function gm(t){t.parentNode&&t.parentNode.removeChild(t)}function kn(t,e){if(t.closest)return t.closest(e);if(!document.documentElement.contains(t))return null;do{if(hP(t,e))return t;t=t.parentElement||t.parentNode}while(t!==null&&t.nodeType===1);return null}function hP(t,e){return(t.matches||t.matchesSelector||t.msMatchesSelector).call(t,e)}function pP(t,e){let n=t instanceof HTMLElement?[t]:t,r=[];for(let i=0;i<n.length;i+=1){let s=n[i].querySelectorAll(e);for(let a=0;a<s.length;a+=1)r.push(s[a])}return r}const gP=/(top|left|right|bottom|width|height)$/i;function wl(t,e){for(let n in e)vE(t,n,e[n])}function vE(t,e,n){n==null?t.style[e]="":typeof n=="number"&&gP.test(e)?t.style[e]=`${n}px`:t.style[e]=n}function yE(t){var e,n;return(n=(e=t.composedPath)===null||e===void 0?void 0:e.call(t)[0])!==null&&n!==void 0?n:t.target}let b_=0;function _s(){return b_+=1,"fc-dom-"+b_}function af(t){t.preventDefault()}function mP(t,e){return n=>{let r=kn(n.target,t);r&&e.call(r,n,r)}}function bE(t,e,n,r){let i=mP(n,r);return t.addEventListener(e,i),()=>{t.removeEventListener(e,i)}}function vP(t,e,n,r){let i;return bE(t,"mouseover",e,(s,a)=>{if(a!==i){i=a,n(s,a);let l=u=>{i=null,r(u,a),a.removeEventListener("mouseleave",l)};a.addEventListener("mouseleave",l)}})}const __=["webkitTransitionEnd","otransitionend","oTransitionEnd","msTransitionEnd","transitionend"];function yP(t,e){let n=r=>{e(r),__.forEach(i=>{t.removeEventListener(i,n)})};__.forEach(r=>{t.addEventListener(r,n)})}function _E(t){return Object.assign({onClick:t},SE(t))}function SE(t){return{tabIndex:0,onKeyDown(e){(e.key==="Enter"||e.key===" ")&&(t(e),e.preventDefault())}}}let S_=0;function ya(){return S_+=1,String(S_)}function mm(){document.body.classList.add("fc-not-allowed")}function vm(){document.body.classList.remove("fc-not-allowed")}function bP(t){t.style.userSelect="none",t.style.webkitUserSelect="none",t.addEventListener("selectstart",af)}function _P(t){t.style.userSelect="",t.style.webkitUserSelect="",t.removeEventListener("selectstart",af)}function SP(t){t.addEventListener("contextmenu",af)}function wP(t){t.removeEventListener("contextmenu",af)}function xP(t){let e=[],n=[],r,i;for(typeof t=="string"?n=t.split(/\s*,\s*/):typeof t=="function"?n=[t]:Array.isArray(t)&&(n=t),r=0;r<n.length;r+=1)i=n[r],typeof i=="string"?e.push(i.charAt(0)==="-"?{field:i.substring(1),order:-1}:{field:i,order:1}):typeof i=="function"&&e.push({func:i});return e}function EP(t,e,n){let r,i;for(r=0;r<n.length;r+=1)if(i=CP(t,e,n[r]),i)return i;return 0}function CP(t,e,n){return n.func?n.func(t,e):TP(t[n.field],e[n.field])*(n.order||1)}function TP(t,e){return!t&&!e?0:e==null?-1:t==null?1:typeof t=="string"||typeof e=="string"?String(t).localeCompare(String(e)):t-e}function no(t,e){let n=String(t);return"000".substr(0,e-n.length)+n}function xl(t,e,n){return typeof t=="function"?t(...e):typeof t=="string"?e.reduce((r,i,s)=>r.replace("$"+s,i||""),t):n}function DP(t,e){return t-e}function rd(t){return t%1===0}function kP(t){let e=t.querySelector(".fc-scrollgrid-shrink-frame"),n=t.querySelector(".fc-scrollgrid-shrink-cushion");if(!e)throw new Error("needs fc-scrollgrid-shrink-frame className");if(!n)throw new Error("needs fc-scrollgrid-shrink-cushion className");return t.getBoundingClientRect().width-e.getBoundingClientRect().width+n.getBoundingClientRect().width}const w_=["years","months","days","milliseconds"],AP=/^(-?)(?:(\d+)\.)?(\d+):(\d\d)(?::(\d\d)(?:\.(\d\d\d))?)?/;function Qe(t,e){return typeof t=="string"?RP(t):typeof t=="object"&&t?x_(t):typeof t=="number"?x_({[e||"milliseconds"]:t}):null}function RP(t){let e=AP.exec(t);if(e){let n=e[1]?-1:1;return{years:0,months:0,days:n*(e[2]?parseInt(e[2],10):0),milliseconds:n*((e[3]?parseInt(e[3],10):0)*60*60*1e3+(e[4]?parseInt(e[4],10):0)*60*1e3+(e[5]?parseInt(e[5],10):0)*1e3+(e[6]?parseInt(e[6],10):0))}}return null}function x_(t){let e={years:t.years||t.year||0,months:t.months||t.month||0,days:t.days||t.day||0,milliseconds:(t.hours||t.hour||0)*60*60*1e3+(t.minutes||t.minute||0)*60*1e3+(t.seconds||t.second||0)*1e3+(t.milliseconds||t.millisecond||t.ms||0)},n=t.weeks||t.week;return n&&(e.days+=n*7,e.specifiedWeeks=!0),e}function OP(t,e){return t.years===e.years&&t.months===e.months&&t.days===e.days&&t.milliseconds===e.milliseconds}function wg(t,e){return{years:t.years+e.years,months:t.months+e.months,days:t.days+e.days,milliseconds:t.milliseconds+e.milliseconds}}function MP(t,e){return{years:t.years-e.years,months:t.months-e.months,days:t.days-e.days,milliseconds:t.milliseconds-e.milliseconds}}function NP(t,e){return{years:t.years*e,months:t.months*e,days:t.days*e,milliseconds:t.milliseconds*e}}function IP(t){return ro(t)/365}function PP(t){return ro(t)/30}function ro(t){return zr(t)/864e5}function zr(t){return t.years*(365*864e5)+t.months*(30*864e5)+t.days*864e5+t.milliseconds}function ym(t,e){let n=null;for(let r=0;r<w_.length;r+=1){let i=w_[r];if(e[i]){let s=t[i]/e[i];if(!rd(s)||n!==null&&n!==s)return null;n=s}else if(t[i])return null}return n}function xg(t){let e=t.milliseconds;if(e){if(e%1e3!==0)return{unit:"millisecond",value:e};if(e%(1e3*60)!==0)return{unit:"second",value:e/1e3};if(e%(1e3*60*60)!==0)return{unit:"minute",value:e/(1e3*60)};if(e)return{unit:"hour",value:e/(1e3*60*60)}}return t.days?t.specifiedWeeks&&t.days%7===0?{unit:"week",value:t.days/7}:{unit:"day",value:t.days}:t.months?{unit:"month",value:t.months}:t.years?{unit:"year",value:t.years}:{unit:"millisecond",value:0}}function xs(t,e,n){if(t===e)return!0;let r=t.length,i;if(r!==e.length)return!1;for(i=0;i<r;i+=1)if(!(n?n(t[i],e[i]):t[i]===e[i]))return!1;return!0}const LP=["sun","mon","tue","wed","thu","fri","sat"];function E_(t,e){let n=gs(t);return n[2]+=e*7,tr(n)}function Jt(t,e){let n=gs(t);return n[2]+=e,tr(n)}function Es(t,e){let n=gs(t);return n[6]+=e,tr(n)}function FP(t,e){return ks(t,e)/7}function ks(t,e){return(e.valueOf()-t.valueOf())/(1e3*60*60*24)}function jP(t,e){return(e.valueOf()-t.valueOf())/(1e3*60*60)}function zP(t,e){return(e.valueOf()-t.valueOf())/(1e3*60)}function HP(t,e){return(e.valueOf()-t.valueOf())/1e3}function UP(t,e){let n=bt(t),r=bt(e);return{years:0,months:0,days:Math.round(ks(n,r)),milliseconds:e.valueOf()-r.valueOf()-(t.valueOf()-n.valueOf())}}function BP(t,e){let n=Sd(t,e);return n!==null&&n%7===0?n/7:null}function Sd(t,e){return ms(t)===ms(e)?Math.round(ks(t,e)):null}function bt(t){return tr([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()])}function WP(t){return tr([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours()])}function VP(t){return tr([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes()])}function $P(t){return tr([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds()])}function qP(t,e,n){let r=t.getUTCFullYear(),i=Tp(t,r,e,n);if(i<1)return Tp(t,r-1,e,n);let s=Tp(t,r+1,e,n);return s>=1?Math.min(i,s):i}function Tp(t,e,n,r){let i=tr([e,0,1+GP(e,n,r)]),s=bt(t),a=Math.round(ks(i,s));return Math.floor(a/7)+1}function GP(t,e,n){let r=7+e-n;return-((7+tr([t,0,r]).getUTCDay()-e)%7)+r-1}function C_(t){return[t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()]}function T_(t){return new Date(t[0],t[1]||0,t[2]==null?1:t[2],t[3]||0,t[4]||0,t[5]||0)}function gs(t){return[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()]}function tr(t){return t.length===1&&(t=t.concat([0])),new Date(Date.UTC(...t))}function wE(t){return!isNaN(t.valueOf())}function ms(t){return t.getUTCHours()*1e3*60*60+t.getUTCMinutes()*1e3*60+t.getUTCSeconds()*1e3+t.getUTCMilliseconds()}function xE(t,e,n=!1){let r=t.toISOString();return r=r.replace(".000",""),n&&(r=r.replace("T00:00:00Z","")),r.length>10&&(e==null?r=r.replace("Z",""):e!==0&&(r=r.replace("Z",bm(e,!0)))),r}function rc(t){return t.toISOString().replace(/T.*$/,"")}function YP(t){return t.toISOString().match(/^\d{4}-\d{2}/)[0]}function QP(t){return no(t.getUTCHours(),2)+":"+no(t.getUTCMinutes(),2)+":"+no(t.getUTCSeconds(),2)}function bm(t,e=!1){let n=t<0?"-":"+",r=Math.abs(t),i=Math.floor(r/60),s=Math.round(r%60);return e?`${n+no(i,2)}:${no(s,2)}`:`GMT${n}${i}${s?`:${no(s,2)}`:""}`}function Ce(t,e,n){let r,i;return function(...s){if(!r)i=t.apply(this,s);else if(!xs(r,s)){let a=t.apply(this,s);(!e||!e(a,i))&&(i=a)}return r=s,i}}function id(t,e,n){let r,i;return s=>(r?Ur(r,s)||(i=t.call(this,s)):i=t.call(this,s),r=s,i)}const Dp={week:3,separator:9,omitZeroMinute:9,meridiem:9,omitCommas:9},wd={timeZoneName:7,era:6,year:5,month:4,day:2,weekday:2,hour:1,minute:1,second:1},Ru=/\s*([ap])\.?m\.?/i,KP=/,/g,ZP=/\s+/g,XP=/\u200e/g,JP=/UTC|GMT/;class e2{constructor(e){let n={},r={},i=9;for(let s in e)s in Dp?(r[s]=e[s],Dp[s]<9&&(i=Math.min(Dp[s],i))):(n[s]=e[s],s in wd&&(i=Math.min(wd[s],i)));this.standardDateProps=n,this.extendedSettings=r,this.smallestUnitNum=i,this.buildFormattingFunc=Ce(D_)}format(e,n){return this.buildFormattingFunc(this.standardDateProps,this.extendedSettings,n)(e)}formatRange(e,n,r,i){let{standardDateProps:s,extendedSettings:a}=this,l=a2(e.marker,n.marker,r.calendarSystem);if(!l)return this.format(e,r);let u=l;u>1&&(s.year==="numeric"||s.year==="2-digit")&&(s.month==="numeric"||s.month==="2-digit")&&(s.day==="numeric"||s.day==="2-digit")&&(u=1);let d=this.format(e,r),f=this.format(n,r);if(d===f)return d;let p=o2(s,u),m=D_(p,a,r),v=m(e),b=m(n),_=l2(d,v,f,b),w=a.separator||i||r.defaultSeparator||"";return _?_.before+v+w+b+_.after:d+w+f}getSmallestUnit(){switch(this.smallestUnitNum){case 7:case 6:case 5:return"year";case 4:return"month";case 3:return"week";case 2:return"day";default:return"time"}}}function D_(t,e,n){let r=Object.keys(t).length;return r===1&&t.timeZoneName==="short"?i=>bm(i.timeZoneOffset):r===0&&e.week?i=>s2(n.computeWeekNumber(i.marker),n.weekText,n.weekTextLong,n.locale,e.week):t2(t,e,n)}function t2(t,e,n){t=Object.assign({},t),e=Object.assign({},e),n2(t,e),t.timeZone="UTC";let r=new Intl.DateTimeFormat(n.locale.codes,t),i;if(e.omitZeroMinute){let s=Object.assign({},t);delete s.minute,i=new Intl.DateTimeFormat(n.locale.codes,s)}return s=>{let{marker:a}=s,l;i&&!a.getUTCMinutes()?l=i:l=r;let u=l.format(a);return r2(u,s,t,e,n)}}function n2(t,e){t.timeZoneName&&(t.hour||(t.hour="2-digit"),t.minute||(t.minute="2-digit")),t.timeZoneName==="long"&&(t.timeZoneName="short"),e.omitZeroMinute&&(t.second||t.millisecond)&&delete e.omitZeroMinute}function r2(t,e,n,r,i){return t=t.replace(XP,""),n.timeZoneName==="short"&&(t=i2(t,i.timeZone==="UTC"||e.timeZoneOffset==null?"UTC":bm(e.timeZoneOffset))),r.omitCommas&&(t=t.replace(KP,"").trim()),r.omitZeroMinute&&(t=t.replace(":00","")),r.meridiem===!1?t=t.replace(Ru,"").trim():r.meridiem==="narrow"?t=t.replace(Ru,(s,a)=>a.toLocaleLowerCase()):r.meridiem==="short"?t=t.replace(Ru,(s,a)=>`${a.toLocaleLowerCase()}m`):r.meridiem==="lowercase"&&(t=t.replace(Ru,s=>s.toLocaleLowerCase())),t=t.replace(ZP," "),t=t.trim(),t}function i2(t,e){let n=!1;return t=t.replace(JP,()=>(n=!0,e)),n||(t+=` ${e}`),t}function s2(t,e,n,r,i){let s=[];return i==="long"?s.push(n):(i==="short"||i==="narrow")&&s.push(e),(i==="long"||i==="short")&&s.push(" "),s.push(r.simpleNumberFormat.format(t)),r.options.direction==="rtl"&&s.reverse(),s.join("")}function a2(t,e,n){return n.getMarkerYear(t)!==n.getMarkerYear(e)?5:n.getMarkerMonth(t)!==n.getMarkerMonth(e)?4:n.getMarkerDay(t)!==n.getMarkerDay(e)?2:ms(t)!==ms(e)?1:0}function o2(t,e){let n={};for(let r in t)(!(r in wd)||wd[r]<=e)&&(n[r]=t[r]);return n}function l2(t,e,n,r){let i=0;for(;i<t.length;){let s=t.indexOf(e,i);if(s===-1)break;let a=t.substr(0,s);i=s+e.length;let l=t.substr(i),u=0;for(;u<n.length;){let d=n.indexOf(r,u);if(d===-1)break;let f=n.substr(0,d);u=d+r.length;let p=n.substr(u);if(a===f&&l===p)return{before:a,after:l}}}return null}function k_(t,e){let n=e.markerToArray(t.marker);return{marker:t.marker,timeZoneOffset:t.timeZoneOffset,array:n,year:n[0],month:n[1],day:n[2],hour:n[3],minute:n[4],second:n[5],millisecond:n[6]}}function xd(t,e,n,r){let i=k_(t,n.calendarSystem),s=e?k_(e,n.calendarSystem):null;return{date:i,start:i,end:s,timeZone:n.timeZone,localeCodes:n.locale.codes,defaultSeparator:r||n.defaultSeparator}}class c2{constructor(e){this.cmdStr=e}format(e,n,r){return n.cmdFormatter(this.cmdStr,xd(e,null,n,r))}formatRange(e,n,r,i){return r.cmdFormatter(this.cmdStr,xd(e,n,r,i))}}class u2{constructor(e){this.func=e}format(e,n,r){return this.func(xd(e,null,n,r))}formatRange(e,n,r,i){return this.func(xd(e,n,r,i))}}function Dt(t){return typeof t=="object"&&t?new e2(t):typeof t=="string"?new c2(t):typeof t=="function"?new u2(t):null}const A_={navLinkDayClick:W,navLinkWeekClick:W,duration:Qe,bootstrapFontAwesome:W,buttonIcons:W,customButtons:W,defaultAllDayEventDuration:Qe,defaultTimedEventDuration:Qe,nextDayThreshold:Qe,scrollTime:Qe,scrollTimeReset:Boolean,slotMinTime:Qe,slotMaxTime:Qe,dayPopoverFormat:Dt,slotDuration:Qe,snapDuration:Qe,headerToolbar:W,footerToolbar:W,defaultRangeSeparator:String,titleRangeSeparator:String,forceEventDuration:Boolean,dayHeaders:Boolean,dayHeaderFormat:Dt,dayHeaderClassNames:W,dayHeaderContent:W,dayHeaderDidMount:W,dayHeaderWillUnmount:W,dayCellClassNames:W,dayCellContent:W,dayCellDidMount:W,dayCellWillUnmount:W,initialView:String,aspectRatio:Number,weekends:Boolean,weekNumberCalculation:W,weekNumbers:Boolean,weekNumberClassNames:W,weekNumberContent:W,weekNumberDidMount:W,weekNumberWillUnmount:W,editable:Boolean,viewClassNames:W,viewDidMount:W,viewWillUnmount:W,nowIndicator:Boolean,nowIndicatorSnap:W,nowIndicatorClassNames:W,nowIndicatorContent:W,nowIndicatorDidMount:W,nowIndicatorWillUnmount:W,showNonCurrentDates:Boolean,lazyFetching:Boolean,startParam:String,endParam:String,timeZoneParam:String,timeZone:String,locales:W,locale:W,themeSystem:String,dragRevertDuration:Number,dragScroll:Boolean,allDayMaintainDuration:Boolean,unselectAuto:Boolean,dropAccept:W,eventOrder:xP,eventOrderStrict:Boolean,handleWindowResize:Boolean,windowResizeDelay:Number,longPressDelay:Number,eventDragMinDistance:Number,expandRows:Boolean,height:W,contentHeight:W,direction:String,weekNumberFormat:Dt,eventResizableFromStart:Boolean,displayEventTime:Boolean,displayEventEnd:Boolean,weekText:String,weekTextLong:String,progressiveEventRendering:Boolean,businessHours:W,initialDate:W,now:W,eventDataTransform:W,stickyHeaderDates:W,stickyFooterScrollbar:W,viewHeight:W,defaultAllDay:Boolean,eventSourceFailure:W,eventSourceSuccess:W,eventDisplay:String,eventStartEditable:Boolean,eventDurationEditable:Boolean,eventOverlap:W,eventConstraint:W,eventAllow:W,eventBackgroundColor:String,eventBorderColor:String,eventTextColor:String,eventColor:String,eventClassNames:W,eventContent:W,eventDidMount:W,eventWillUnmount:W,selectConstraint:W,selectOverlap:W,selectAllow:W,droppable:Boolean,unselectCancel:String,slotLabelFormat:W,slotLaneClassNames:W,slotLaneContent:W,slotLaneDidMount:W,slotLaneWillUnmount:W,slotLabelClassNames:W,slotLabelContent:W,slotLabelDidMount:W,slotLabelWillUnmount:W,dayMaxEvents:W,dayMaxEventRows:W,dayMinWidth:Number,slotLabelInterval:Qe,allDayText:String,allDayClassNames:W,allDayContent:W,allDayDidMount:W,allDayWillUnmount:W,slotMinWidth:Number,navLinks:Boolean,eventTimeFormat:Dt,rerenderDelay:Number,moreLinkText:W,moreLinkHint:W,selectMinDistance:Number,selectable:Boolean,selectLongPressDelay:Number,eventLongPressDelay:Number,selectMirror:Boolean,eventMaxStack:Number,eventMinHeight:Number,eventMinWidth:Number,eventShortHeight:Number,slotEventOverlap:Boolean,plugins:W,firstDay:Number,dayCount:Number,dateAlignment:String,dateIncrement:Qe,hiddenDays:W,fixedWeekCount:Boolean,validRange:W,visibleRange:W,titleFormat:W,eventInteractive:Boolean,noEventsText:String,viewHint:W,navLinkHint:W,closeHint:String,timeHint:String,eventHint:String,moreLinkClick:W,moreLinkClassNames:W,moreLinkContent:W,moreLinkDidMount:W,moreLinkWillUnmount:W,monthStartFormat:Dt,handleCustomRendering:W,customRenderingMetaMap:W,customRenderingReplaces:Boolean},El={eventDisplay:"auto",defaultRangeSeparator:" - ",titleRangeSeparator:"  ",defaultTimedEventDuration:"01:00:00",defaultAllDayEventDuration:{day:1},forceEventDuration:!1,nextDayThreshold:"00:00:00",dayHeaders:!0,initialView:"",aspectRatio:1.35,headerToolbar:{start:"title",center:"",end:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"local",editable:!1,nowIndicator:!1,scrollTime:"06:00:00",scrollTimeReset:!0,slotMinTime:"00:00:00",slotMaxTime:"24:00:00",showNonCurrentDates:!0,lazyFetching:!0,startParam:"start",endParam:"end",timeZoneParam:"timeZone",timeZone:"local",locales:[],locale:"",themeSystem:"standard",dragRevertDuration:500,dragScroll:!0,allDayMaintainDuration:!1,unselectAuto:!0,dropAccept:"*",eventOrder:"start,-duration,allDay,title",dayPopoverFormat:{month:"long",day:"numeric",year:"numeric"},handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1e3,eventDragMinDistance:5,expandRows:!1,navLinks:!1,selectable:!1,eventMinHeight:15,eventMinWidth:30,eventShortHeight:30,monthStartFormat:{month:"long",day:"numeric"},nowIndicatorSnap:"auto"},R_={datesSet:W,eventsSet:W,eventAdd:W,eventChange:W,eventRemove:W,windowResize:W,eventClick:W,eventMouseEnter:W,eventMouseLeave:W,select:W,unselect:W,loading:W,_unmount:W,_beforeprint:W,_afterprint:W,_noEventDrop:W,_noEventResize:W,_resize:W,_scrollRequest:W},O_={buttonText:W,buttonHints:W,views:W,plugins:W,initialEvents:W,events:W,eventSources:W},Qs={headerToolbar:Ks,footerToolbar:Ks,buttonText:Ks,buttonHints:Ks,buttonIcons:Ks,dateIncrement:Ks,plugins:Ou,events:Ou,eventSources:Ou,resources:Ou};function Ks(t,e){return typeof t=="object"&&typeof e=="object"&&t&&e?Ur(t,e):t===e}function Ou(t,e){return Array.isArray(t)&&Array.isArray(e)?xs(t,e):t===e}const d2={type:String,component:W,buttonText:String,buttonTextKey:String,dateProfileGeneratorClass:W,usesMinMaxTime:Boolean,classNames:W,content:W,didMount:W,willUnmount:W};function kp(t){return Sm(t,Qs)}function _m(t,e){let n={},r={};for(let i in e)i in t&&(n[i]=e[i](t[i]));for(let i in t)i in e||(r[i]=t[i]);return{refined:n,extra:r}}function W(t){return t}const{hasOwnProperty:Ed}=Object.prototype;function Sm(t,e){let n={};if(e){for(let r in e)if(e[r]===Ks){let i=[];for(let s=t.length-1;s>=0;s-=1){let a=t[s][r];if(typeof a=="object"&&a)i.unshift(a);else if(a!==void 0){n[r]=a;break}}i.length&&(n[r]=Sm(i))}}for(let r=t.length-1;r>=0;r-=1){let i=t[r];for(let s in i)s in n||(n[s]=i[s])}return n}function da(t,e){let n={};for(let r in t)e(t[r],r)&&(n[r]=t[r]);return n}function zi(t,e){let n={};for(let r in t)n[r]=e(t[r],r);return n}function EE(t){let e={};for(let n of t)e[n]=!0;return e}function wm(t){let e=[];for(let n in t)e.push(t[n]);return e}function Ur(t,e){if(t===e)return!0;for(let n in t)if(Ed.call(t,n)&&!(n in e))return!1;for(let n in e)if(Ed.call(e,n)&&t[n]!==e[n])return!1;return!0}const f2=/^on[A-Z]/;function h2(t,e){const n=p2(t,e);for(let r of n)if(!f2.test(r))return!1;return!0}function p2(t,e){let n=[];for(let r in t)Ed.call(t,r)&&(r in e||n.push(r));for(let r in e)Ed.call(e,r)&&t[r]!==e[r]&&n.push(r);return n}function Ap(t,e,n={}){if(t===e)return!0;for(let r in e)if(!(r in t&&g2(t[r],e[r],n[r])))return!1;for(let r in t)if(!(r in e))return!1;return!0}function g2(t,e,n){return t===e||n===!0?!0:n?n(t,e):!1}function m2(t,e=0,n,r=1){let i=[];n==null&&(n=Object.keys(t).length);for(let s=e;s<n;s+=r){let a=t[s];a!==void 0&&i.push(a)}return i}let CE={};function v2(t,e){CE[t]=e}function y2(t){return new CE[t]}class b2{getMarkerYear(e){return e.getUTCFullYear()}getMarkerMonth(e){return e.getUTCMonth()}getMarkerDay(e){return e.getUTCDate()}arrayToMarker(e){return tr(e)}markerToArray(e){return gs(e)}}v2("gregory",b2);const _2=/^\s*(\d{4})(-?(\d{2})(-?(\d{2})([T ](\d{2}):?(\d{2})(:?(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/;function S2(t){let e=_2.exec(t);if(e){let n=new Date(Date.UTC(Number(e[1]),e[3]?Number(e[3])-1:0,Number(e[5]||1),Number(e[7]||0),Number(e[8]||0),Number(e[10]||0),e[12]?+`0.${e[12]}`*1e3:0));if(wE(n)){let r=null;return e[13]&&(r=(e[15]==="-"?-1:1)*(Number(e[16]||0)*60+Number(e[18]||0))),{marker:n,isTimeUnspecified:!e[6],timeZoneOffset:r}}}return null}class w2{constructor(e){let n=this.timeZone=e.timeZone,r=n!=="local"&&n!=="UTC";e.namedTimeZoneImpl&&r&&(this.namedTimeZoneImpl=new e.namedTimeZoneImpl(n)),this.canComputeOffset=!!(!r||this.namedTimeZoneImpl),this.calendarSystem=y2(e.calendarSystem),this.locale=e.locale,this.weekDow=e.locale.week.dow,this.weekDoy=e.locale.week.doy,e.weekNumberCalculation==="ISO"&&(this.weekDow=1,this.weekDoy=4),typeof e.firstDay=="number"&&(this.weekDow=e.firstDay),typeof e.weekNumberCalculation=="function"&&(this.weekNumberFunc=e.weekNumberCalculation),this.weekText=e.weekText!=null?e.weekText:e.locale.options.weekText,this.weekTextLong=(e.weekTextLong!=null?e.weekTextLong:e.locale.options.weekTextLong)||this.weekText,this.cmdFormatter=e.cmdFormatter,this.defaultSeparator=e.defaultSeparator}createMarker(e){let n=this.createMarkerMeta(e);return n===null?null:n.marker}createNowMarker(){return this.canComputeOffset?this.timestampToMarker(new Date().valueOf()):tr(C_(new Date))}createMarkerMeta(e){if(typeof e=="string")return this.parse(e);let n=null;return typeof e=="number"?n=this.timestampToMarker(e):e instanceof Date?(e=e.valueOf(),isNaN(e)||(n=this.timestampToMarker(e))):Array.isArray(e)&&(n=tr(e)),n===null||!wE(n)?null:{marker:n,isTimeUnspecified:!1,forcedTzo:null}}parse(e){let n=S2(e);if(n===null)return null;let{marker:r}=n,i=null;return n.timeZoneOffset!==null&&(this.canComputeOffset?r=this.timestampToMarker(r.valueOf()-n.timeZoneOffset*60*1e3):i=n.timeZoneOffset),{marker:r,isTimeUnspecified:n.isTimeUnspecified,forcedTzo:i}}getYear(e){return this.calendarSystem.getMarkerYear(e)}getMonth(e){return this.calendarSystem.getMarkerMonth(e)}getDay(e){return this.calendarSystem.getMarkerDay(e)}add(e,n){let r=this.calendarSystem.markerToArray(e);return r[0]+=n.years,r[1]+=n.months,r[2]+=n.days,r[6]+=n.milliseconds,this.calendarSystem.arrayToMarker(r)}subtract(e,n){let r=this.calendarSystem.markerToArray(e);return r[0]-=n.years,r[1]-=n.months,r[2]-=n.days,r[6]-=n.milliseconds,this.calendarSystem.arrayToMarker(r)}addYears(e,n){let r=this.calendarSystem.markerToArray(e);return r[0]+=n,this.calendarSystem.arrayToMarker(r)}addMonths(e,n){let r=this.calendarSystem.markerToArray(e);return r[1]+=n,this.calendarSystem.arrayToMarker(r)}diffWholeYears(e,n){let{calendarSystem:r}=this;return ms(e)===ms(n)&&r.getMarkerDay(e)===r.getMarkerDay(n)&&r.getMarkerMonth(e)===r.getMarkerMonth(n)?r.getMarkerYear(n)-r.getMarkerYear(e):null}diffWholeMonths(e,n){let{calendarSystem:r}=this;return ms(e)===ms(n)&&r.getMarkerDay(e)===r.getMarkerDay(n)?r.getMarkerMonth(n)-r.getMarkerMonth(e)+(r.getMarkerYear(n)-r.getMarkerYear(e))*12:null}greatestWholeUnit(e,n){let r=this.diffWholeYears(e,n);return r!==null?{unit:"year",value:r}:(r=this.diffWholeMonths(e,n),r!==null?{unit:"month",value:r}:(r=BP(e,n),r!==null?{unit:"week",value:r}:(r=Sd(e,n),r!==null?{unit:"day",value:r}:(r=jP(e,n),rd(r)?{unit:"hour",value:r}:(r=zP(e,n),rd(r)?{unit:"minute",value:r}:(r=HP(e,n),rd(r)?{unit:"second",value:r}:{unit:"millisecond",value:n.valueOf()-e.valueOf()}))))))}countDurationsBetween(e,n,r){let i;return r.years&&(i=this.diffWholeYears(e,n),i!==null)?i/IP(r):r.months&&(i=this.diffWholeMonths(e,n),i!==null)?i/PP(r):r.days&&(i=Sd(e,n),i!==null)?i/ro(r):(n.valueOf()-e.valueOf())/zr(r)}startOf(e,n){return n==="year"?this.startOfYear(e):n==="month"?this.startOfMonth(e):n==="week"?this.startOfWeek(e):n==="day"?bt(e):n==="hour"?WP(e):n==="minute"?VP(e):n==="second"?$P(e):null}startOfYear(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e)])}startOfMonth(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e)])}startOfWeek(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e),e.getUTCDate()-(e.getUTCDay()-this.weekDow+7)%7])}computeWeekNumber(e){return this.weekNumberFunc?this.weekNumberFunc(this.toDate(e)):qP(e,this.weekDow,this.weekDoy)}format(e,n,r={}){return n.format({marker:e,timeZoneOffset:r.forcedTzo!=null?r.forcedTzo:this.offsetForMarker(e)},this)}formatRange(e,n,r,i={}){return i.isEndExclusive&&(n=Es(n,-1)),r.formatRange({marker:e,timeZoneOffset:i.forcedStartTzo!=null?i.forcedStartTzo:this.offsetForMarker(e)},{marker:n,timeZoneOffset:i.forcedEndTzo!=null?i.forcedEndTzo:this.offsetForMarker(n)},this,i.defaultSeparator)}formatIso(e,n={}){let r=null;return n.omitTimeZoneOffset||(n.forcedTzo!=null?r=n.forcedTzo:r=this.offsetForMarker(e)),xE(e,r,n.omitTime)}timestampToMarker(e){return this.timeZone==="local"?tr(C_(new Date(e))):this.timeZone==="UTC"||!this.namedTimeZoneImpl?new Date(e):tr(this.namedTimeZoneImpl.timestampToArray(e))}offsetForMarker(e){return this.timeZone==="local"?-T_(gs(e)).getTimezoneOffset():this.timeZone==="UTC"?0:this.namedTimeZoneImpl?this.namedTimeZoneImpl.offsetForArray(gs(e)):null}toDate(e,n){return this.timeZone==="local"?T_(gs(e)):this.timeZone==="UTC"?new Date(e.valueOf()):this.namedTimeZoneImpl?new Date(e.valueOf()-this.namedTimeZoneImpl.offsetForArray(gs(e))*1e3*60):new Date(e.valueOf()-(n||0))}}class ic{constructor(e){this.iconOverrideOption&&this.setIconOverride(e[this.iconOverrideOption])}setIconOverride(e){let n,r;if(typeof e=="object"&&e){n=Object.assign({},this.iconClasses);for(r in e)n[r]=this.applyIconOverridePrefix(e[r]);this.iconClasses=n}else e===!1&&(this.iconClasses={})}applyIconOverridePrefix(e){let n=this.iconOverridePrefix;return n&&e.indexOf(n)!==0&&(e=n+e),e}getClass(e){return this.classes[e]||""}getIconClass(e,n){let r;return n&&this.rtlIconClasses?r=this.rtlIconClasses[e]||this.iconClasses[e]:r=this.iconClasses[e],r?`${this.baseIconClass} ${r}`:""}getCustomButtonIconClass(e){let n;return this.iconOverrideCustomButtonOption&&(n=e[this.iconOverrideCustomButtonOption],n)?`${this.baseIconClass} ${this.applyIconOverridePrefix(n)}`:""}}ic.prototype.classes={};ic.prototype.iconClasses={};ic.prototype.baseIconClass="";ic.prototype.iconOverridePrefix="";function Cd(t){t();let e=ke.debounceRendering,n=[];function r(i){n.push(i)}for(ke.debounceRendering=r,jl(I(x2,{}),document.createElement("div"));n.length;)n.shift()();ke.debounceRendering=e}class x2 extends cr{render(){return I("div",{})}componentDidMount(){this.setState({})}}function TE(t){let e=GI(t),n=e.Provider;return e.Provider=function(){let r=!this.getChildContext,i=n.apply(this,arguments);if(r){let s=[];this.shouldComponentUpdate=a=>{this.props.value!==a.value&&s.forEach(l=>{l.context=a.value,l.forceUpdate()})},this.sub=a=>{s.push(a);let l=a.componentWillUnmount;a.componentWillUnmount=()=>{s.splice(s.indexOf(a),1),l&&l.call(a)}}}return i},e}class E2{constructor(e,n,r,i){this.execFunc=e,this.emitter=n,this.scrollTime=r,this.scrollTimeReset=i,this.handleScrollRequest=s=>{this.queuedRequest=Object.assign({},this.queuedRequest||{},s),this.drain()},n.on("_scrollRequest",this.handleScrollRequest),this.fireInitialScroll()}detach(){this.emitter.off("_scrollRequest",this.handleScrollRequest)}update(e){e&&this.scrollTimeReset?this.fireInitialScroll():this.drain()}fireInitialScroll(){this.handleScrollRequest({time:this.scrollTime})}drain(){this.queuedRequest&&this.execFunc(this.queuedRequest)&&(this.queuedRequest=null)}}const Vi=TE({});function C2(t,e,n,r,i,s,a,l,u,d,f,p,m,v){return{dateEnv:i,nowManager:s,options:n,pluginHooks:l,emitter:f,dispatch:u,getCurrentData:d,calendarApi:p,viewSpec:t,viewApi:e,dateProfileGenerator:r,theme:a,isRtl:n.direction==="rtl",addResizeHandler(b){f.on("_resize",b)},removeResizeHandler(b){f.off("_resize",b)},createScrollResponder(b){return new E2(b,f,Qe(n.scrollTime),n.scrollTimeReset)},registerInteractiveComponent:m,unregisterInteractiveComponent:v}}class ba extends cr{shouldComponentUpdate(e,n){return!Ap(this.props,e,this.propEquality)||!Ap(this.state,n,this.stateEquality)}safeSetState(e){Ap(this.state,Object.assign(Object.assign({},this.state),e),this.stateEquality)||this.setState(e)}}ba.addPropsEquality=T2;ba.addStateEquality=D2;ba.contextType=Vi;ba.prototype.propEquality={};ba.prototype.stateEquality={};class ot extends ba{}ot.contextType=Vi;function T2(t){let e=Object.create(this.prototype.propEquality);Object.assign(e,t),this.prototype.propEquality=e}function D2(t){let e=Object.create(this.prototype.stateEquality);Object.assign(e,t),this.prototype.stateEquality=e}function li(t,e){typeof t=="function"?t(e):t&&(t.current=e)}class xm extends ot{constructor(){super(...arguments),this.id=ya(),this.queuedDomNodes=[],this.currentDomNodes=[],this.handleEl=e=>{const{options:n}=this.context,{generatorName:r}=this.props;(!n.customRenderingReplaces||!Eg(r,n))&&this.updateElRef(e)},this.updateElRef=e=>{this.props.elRef&&li(this.props.elRef,e)}}render(){const{props:e,context:n}=this,{options:r}=n,{customGenerator:i,defaultGenerator:s,renderProps:a}=e,l=DE(e,[],this.handleEl);let u=!1,d,f=[],p;if(i!=null){const m=typeof i=="function"?i(a,I):i;if(m===!0)u=!0;else{const v=m&&typeof m=="object";v&&"html"in m?l.dangerouslySetInnerHTML={__html:m.html}:v&&"domNodes"in m?f=Array.prototype.slice.call(m.domNodes):(v?Zx(m):typeof m!="function")?d=m:p=m}}else u=!Eg(e.generatorName,r);return u&&s&&(d=s(a)),this.queuedDomNodes=f,this.currentGeneratorMeta=p,I(e.elTag,l,d)}componentDidMount(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentDidUpdate(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentWillUnmount(){this.triggerCustomRendering(!1)}triggerCustomRendering(e){var n;const{props:r,context:i}=this,{handleCustomRendering:s,customRenderingMetaMap:a}=i.options;if(s){const l=(n=this.currentGeneratorMeta)!==null&&n!==void 0?n:a?.[r.generatorName];l&&s(Object.assign(Object.assign({id:this.id,isActive:e,containerEl:this.base,reportNewContainerEl:this.updateElRef,generatorMeta:l},r),{elClasses:(r.elClasses||[]).filter(k2)}))}}applyQueueudDomNodes(){const{queuedDomNodes:e,currentDomNodes:n}=this,r=this.base;if(!xs(e,n)){n.forEach(gm);for(let i of e)r.appendChild(i);this.currentDomNodes=e}}}xm.addPropsEquality({elClasses:xs,elStyle:Ur,elAttrs:h2,renderProps:Ur});function Eg(t,e){var n;return!!(e.handleCustomRendering&&t&&(!((n=e.customRenderingMetaMap)===null||n===void 0)&&n[t]))}function DE(t,e,n){const r=Object.assign(Object.assign({},t.elAttrs),{ref:n});return(t.elClasses||e)&&(r.className=(t.elClasses||[]).concat(e||[]).concat(r.className||[]).filter(Boolean).join(" ")),t.elStyle&&(r.style=t.elStyle),r}function k2(t){return!!t}const kE=TE(0);class On extends cr{constructor(){super(...arguments),this.InnerContent=A2.bind(void 0,this),this.handleEl=e=>{this.el=e,this.props.elRef&&(li(this.props.elRef,e),e&&this.didMountMisfire&&this.componentDidMount())}}render(){const{props:e}=this,n=R2(e.classNameGenerator,e.renderProps);if(e.children){const r=DE(e,n,this.handleEl),i=e.children(this.InnerContent,e.renderProps,r);return e.elTag?I(e.elTag,r,i):i}else return I(xm,Object.assign(Object.assign({},e),{elRef:this.handleEl,elTag:e.elTag||"div",elClasses:(e.elClasses||[]).concat(n),renderId:this.context}))}componentDidMount(){var e,n;this.el?(n=(e=this.props).didMount)===null||n===void 0||n.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el})):this.didMountMisfire=!0}componentWillUnmount(){var e,n;(n=(e=this.props).willUnmount)===null||n===void 0||n.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el}))}}On.contextType=kE;function A2(t,e){const n=t.props;return I(xm,Object.assign({renderProps:n.renderProps,generatorName:n.generatorName,customGenerator:n.customGenerator,defaultGenerator:n.defaultGenerator,renderId:t.context},e))}function R2(t,e){const n=typeof t=="function"?t(e):t||[];return typeof n=="string"?[n]:n}class zl extends ot{render(){let{props:e,context:n}=this,{options:r}=n,i={view:n.viewApi};return I(On,{elRef:e.elRef,elTag:e.elTag||"div",elAttrs:e.elAttrs,elClasses:[...AE(e.viewSpec),...e.elClasses||[]],elStyle:e.elStyle,renderProps:i,classNameGenerator:r.viewClassNames,generatorName:void 0,didMount:r.viewDidMount,willUnmount:r.viewWillUnmount},()=>e.children)}}function AE(t){return[`fc-${t.type}-view`,"fc-view"]}function O2(t,e){let n=null,r=null;return t.start&&(n=e.createMarker(t.start)),t.end&&(r=e.createMarker(t.end)),!n&&!r||n&&r&&r<n?null:{start:n,end:r}}function M_(t,e){let n=[],{start:r}=e,i,s;for(t.sort(M2),i=0;i<t.length;i+=1)s=t[i],s.start>r&&n.push({start:r,end:s.start}),s.end>r&&(r=s.end);return r<e.end&&n.push({start:r,end:e.end}),n}function M2(t,e){return t.start.valueOf()-e.start.valueOf()}function Cs(t,e){let{start:n,end:r}=t,i=null;return e.start!==null&&(n===null?n=e.start:n=new Date(Math.max(n.valueOf(),e.start.valueOf()))),e.end!=null&&(r===null?r=e.end:r=new Date(Math.min(r.valueOf(),e.end.valueOf()))),(n===null||r===null||n<r)&&(i={start:n,end:r}),i}function N2(t,e){return(t.start===null?null:t.start.valueOf())===(e.start===null?null:e.start.valueOf())&&(t.end===null?null:t.end.valueOf())===(e.end===null?null:e.end.valueOf())}function Em(t,e){return(t.end===null||e.start===null||t.end>e.start)&&(t.start===null||e.end===null||t.start<e.end)}function of(t,e){return(t.start===null||e.start!==null&&e.start>=t.start)&&(t.end===null||e.end!==null&&e.end<=t.end)}function Li(t,e){return(t.start===null||e>=t.start)&&(t.end===null||e<t.end)}function I2(t,e){return e.start!=null&&t<e.start?e.start:e.end!=null&&t>=e.end?new Date(e.end.valueOf()-1):t}function RE(t){let e=Math.floor(ks(t.start,t.end))||1,n=bt(t.start),r=Jt(n,e);return{start:n,end:r}}function Cm(t,e=Qe(0)){let n=null,r=null;if(t.end){r=bt(t.end);let i=t.end.valueOf()-r.valueOf();i&&i>=zr(e)&&(r=Jt(r,1))}return t.start&&(n=bt(t.start),r&&r<=n&&(r=Jt(n,1))),{start:n,end:r}}function P2(t){let e=Cm(t);return ks(e.start,e.end)>1}function eo(t,e,n,r){return r==="year"?Qe(n.diffWholeYears(t,e),"year"):r==="month"?Qe(n.diffWholeMonths(t,e),"month"):UP(t,e)}class OE{constructor(e){this.props=e,this.initHiddenDays()}buildPrev(e,n,r){let{dateEnv:i}=this.props,s=i.subtract(i.startOf(n,e.currentRangeUnit),e.dateIncrement);return this.build(s,-1,r)}buildNext(e,n,r){let{dateEnv:i}=this.props,s=i.add(i.startOf(n,e.currentRangeUnit),e.dateIncrement);return this.build(s,1,r)}build(e,n,r=!0){let{props:i}=this,s,a,l,u,d,f;return s=this.buildValidRange(),s=this.trimHiddenDays(s),r&&(e=I2(e,s)),a=this.buildCurrentRangeInfo(e,n),l=/^(year|month|week|day)$/.test(a.unit),u=this.buildRenderRange(this.trimHiddenDays(a.range),a.unit,l),u=this.trimHiddenDays(u),d=u,i.showNonCurrentDates||(d=Cs(d,a.range)),d=this.adjustActiveRange(d),d=Cs(d,s),f=Em(a.range,s),Li(u,e)||(e=u.start),{currentDate:e,validRange:s,currentRange:a.range,currentRangeUnit:a.unit,isRangeAllDay:l,activeRange:d,renderRange:u,slotMinTime:i.slotMinTime,slotMaxTime:i.slotMaxTime,isValid:f,dateIncrement:this.buildDateIncrement(a.duration)}}buildValidRange(){let e=this.props.validRangeInput,n=typeof e=="function"?e.call(this.props.calendarApi,this.props.dateEnv.toDate(this.props.nowManager.getDateMarker())):e;return this.refineRange(n)||{start:null,end:null}}buildCurrentRangeInfo(e,n){let{props:r}=this,i=null,s=null,a=null,l;return r.duration?(i=r.duration,s=r.durationUnit,a=this.buildRangeFromDuration(e,n,i,s)):(l=this.props.dayCount)?(s="day",a=this.buildRangeFromDayCount(e,n,l)):(a=this.buildCustomVisibleRange(e))?s=r.dateEnv.greatestWholeUnit(a.start,a.end).unit:(i=this.getFallbackDuration(),s=xg(i).unit,a=this.buildRangeFromDuration(e,n,i,s)),{duration:i,unit:s,range:a}}getFallbackDuration(){return Qe({day:1})}adjustActiveRange(e){let{dateEnv:n,usesMinMaxTime:r,slotMinTime:i,slotMaxTime:s}=this.props,{start:a,end:l}=e;return r&&(ro(i)<0&&(a=bt(a),a=n.add(a,i)),ro(s)>1&&(l=bt(l),l=Jt(l,-1),l=n.add(l,s))),{start:a,end:l}}buildRangeFromDuration(e,n,r,i){let{dateEnv:s,dateAlignment:a}=this.props,l,u,d;if(!a){let{dateIncrement:p}=this.props;p&&zr(p)<zr(r)?a=xg(p).unit:a=i}ro(r)<=1&&this.isHiddenDay(l)&&(l=this.skipHiddenDays(l,n),l=bt(l));function f(){l=s.startOf(e,a),u=s.add(l,r),d={start:l,end:u}}return f(),this.trimHiddenDays(d)||(e=this.skipHiddenDays(e,n),f()),d}buildRangeFromDayCount(e,n,r){let{dateEnv:i,dateAlignment:s}=this.props,a=0,l=e,u;s&&(l=i.startOf(l,s)),l=bt(l),l=this.skipHiddenDays(l,n),u=l;do u=Jt(u,1),this.isHiddenDay(u)||(a+=1);while(a<r);return{start:l,end:u}}buildCustomVisibleRange(e){let{props:n}=this,r=n.visibleRangeInput,i=typeof r=="function"?r.call(n.calendarApi,n.dateEnv.toDate(e)):r,s=this.refineRange(i);return s&&(s.start==null||s.end==null)?null:s}buildRenderRange(e,n,r){return e}buildDateIncrement(e){let{dateIncrement:n}=this.props,r;return n||((r=this.props.dateAlignment)?Qe(1,r):e||Qe({days:1}))}refineRange(e){if(e){let n=O2(e,this.props.dateEnv);return n&&(n=Cm(n)),n}return null}initHiddenDays(){let e=this.props.hiddenDays||[],n=[],r=0,i;for(this.props.weekends===!1&&e.push(0,6),i=0;i<7;i+=1)(n[i]=e.indexOf(i)!==-1)||(r+=1);if(!r)throw new Error("invalid hiddenDays");this.isHiddenDayHash=n}trimHiddenDays(e){let{start:n,end:r}=e;return n&&(n=this.skipHiddenDays(n)),r&&(r=this.skipHiddenDays(r,-1,!0)),n==null||r==null||n<r?{start:n,end:r}:null}isHiddenDay(e){return e instanceof Date&&(e=e.getUTCDay()),this.isHiddenDayHash[e]}skipHiddenDays(e,n=1,r=!1){for(;this.isHiddenDayHash[(e.getUTCDay()+(r?n:0)+7)%7];)e=Jt(e,n);return e}}function Tm(t,e,n,r){return{instanceId:ya(),defId:t,range:e,forcedStartTzo:n??null,forcedEndTzo:r??null}}function L2(t,e,n,r){for(let i=0;i<r.length;i+=1){let s=r[i].parse(t,n);if(s){let{allDay:a}=t;return a==null&&(a=e,a==null&&(a=s.allDayGuess,a==null&&(a=!1))),{allDay:a,duration:s.duration,typeData:s.typeData,typeId:i}}}return null}function fa(t,e,n){let{dateEnv:r,pluginHooks:i,options:s}=n,{defs:a,instances:l}=t;l=da(l,u=>!a[u.defId].recurringDef);for(let u in a){let d=a[u];if(d.recurringDef){let{duration:f}=d.recurringDef;f||(f=d.allDay?s.defaultAllDayEventDuration:s.defaultTimedEventDuration);let p=F2(d,f,e,r,i.recurringTypes);for(let m of p){let v=Tm(u,{start:m,end:r.add(m,f)});l[v.instanceId]=v}}}return{defs:a,instances:l}}function F2(t,e,n,r,i){let a=i[t.recurringDef.typeId].expand(t.recurringDef.typeData,{start:r.subtract(n.start,e),end:n.end},r);return t.allDay&&(a=a.map(bt)),a}const sd={id:String,groupId:String,title:String,url:String,interactive:Boolean},ME={start:W,end:W,date:W,allDay:Boolean},j2=Object.assign(Object.assign(Object.assign({},sd),ME),{extendedProps:W});function NE(t,e,n,r,i=Dm(n),s,a){let{refined:l,extra:u}=IE(t,n,i),d=H2(e,n),f=L2(l,d,n.dateEnv,n.pluginHooks.recurringTypes);if(f){let m=Cg(l,u,e?e.sourceId:"",f.allDay,!!f.duration,n,s);return m.recurringDef={typeId:f.typeId,typeData:f.typeData,duration:f.duration},{def:m,instance:null}}let p=z2(l,d,n,r);if(p){let m=Cg(l,u,e?e.sourceId:"",p.allDay,p.hasEnd,n,s),v=Tm(m.defId,p.range,p.forcedStartTzo,p.forcedEndTzo);return a&&m.publicId&&a[m.publicId]&&(v.instanceId=a[m.publicId]),{def:m,instance:v}}return null}function IE(t,e,n=Dm(e)){return _m(t,n)}function Dm(t){return Object.assign(Object.assign(Object.assign({},Td),j2),t.pluginHooks.eventRefiners)}function Cg(t,e,n,r,i,s,a){let l={title:t.title||"",groupId:t.groupId||"",publicId:t.id||"",url:t.url||"",recurringDef:null,defId:(a&&t.id?a[t.id]:"")||ya(),sourceId:n,allDay:r,hasEnd:i,interactive:t.interactive,ui:Dd(t,s),extendedProps:Object.assign(Object.assign({},t.extendedProps||{}),e)};for(let u of s.pluginHooks.eventDefMemberAdders)Object.assign(l,u(t));return Object.freeze(l.ui.classNames),Object.freeze(l.extendedProps),l}function z2(t,e,n,r){let{allDay:i}=t,s,a=null,l=!1,u,d=null,f=t.start!=null?t.start:t.date;if(s=n.dateEnv.createMarkerMeta(f),s)a=s.marker;else if(!r)return null;return t.end!=null&&(u=n.dateEnv.createMarkerMeta(t.end)),i==null&&(e!=null?i=e:i=(!s||s.isTimeUnspecified)&&(!u||u.isTimeUnspecified)),i&&a&&(a=bt(a)),u&&(d=u.marker,i&&(d=bt(d)),a&&d<=a&&(d=null)),d?l=!0:r||(l=n.options.forceEventDuration||!1,d=n.dateEnv.add(a,i?n.options.defaultAllDayEventDuration:n.options.defaultTimedEventDuration)),{allDay:i,hasEnd:l,range:{start:a,end:d},forcedStartTzo:s?s.forcedTzo:null,forcedEndTzo:u?u.forcedTzo:null}}function H2(t,e){let n=null;return t&&(n=t.defaultAllDay),n==null&&(n=e.options.defaultAllDay),n}function Hl(t,e,n,r,i,s){let a=ur(),l=Dm(n);for(let u of t){let d=NE(u,e,n,r,l,i,s);d&&Tg(d,a)}return a}function Tg(t,e=ur()){return e.defs[t.def.defId]=t.def,t.instance&&(e.instances[t.instance.instanceId]=t.instance),e}function km(t,e){let n=t.instances[e];if(n){let r=t.defs[n.defId],i=lf(t,s=>U2(r,s));return i.defs[r.defId]=r,i.instances[n.instanceId]=n,i}return ur()}function U2(t,e){return!!(t.groupId&&t.groupId===e.groupId)}function ur(){return{defs:{},instances:{}}}function Am(t,e){return{defs:Object.assign(Object.assign({},t.defs),e.defs),instances:Object.assign(Object.assign({},t.instances),e.instances)}}function lf(t,e){let n=da(t.defs,e),r=da(t.instances,i=>n[i.defId]);return{defs:n,instances:r}}function B2(t,e){let{defs:n,instances:r}=t,i={},s={};for(let a in n)e.defs[a]||(i[a]=n[a]);for(let a in r)!e.instances[a]&&i[r[a].defId]&&(s[a]=r[a]);return{defs:i,instances:s}}function W2(t,e){return Array.isArray(t)?Hl(t,null,e,!0):typeof t=="object"&&t?Hl([t],null,e,!0):t!=null?String(t):null}function N_(t){return Array.isArray(t)?t:typeof t=="string"?t.split(/\s+/):[]}const Td={display:String,editable:Boolean,startEditable:Boolean,durationEditable:Boolean,constraint:W,overlap:W,allow:W,className:N_,classNames:N_,color:String,backgroundColor:String,borderColor:String,textColor:String},V2={display:null,startEditable:null,durationEditable:null,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]};function Dd(t,e){let n=W2(t.constraint,e);return{display:t.display||null,startEditable:t.startEditable!=null?t.startEditable:t.editable,durationEditable:t.durationEditable!=null?t.durationEditable:t.editable,constraints:n!=null?[n]:[],overlap:t.overlap!=null?t.overlap:null,allows:t.allow!=null?[t.allow]:[],backgroundColor:t.backgroundColor||t.color||"",borderColor:t.borderColor||t.color||"",textColor:t.textColor||"",classNames:(t.className||[]).concat(t.classNames||[])}}function PE(t){return t.reduce($2,V2)}function $2(t,e){return{display:e.display!=null?e.display:t.display,startEditable:e.startEditable!=null?e.startEditable:t.startEditable,durationEditable:e.durationEditable!=null?e.durationEditable:t.durationEditable,constraints:t.constraints.concat(e.constraints),overlap:typeof e.overlap=="boolean"?e.overlap:t.overlap,allows:t.allows.concat(e.allows),backgroundColor:e.backgroundColor||t.backgroundColor,borderColor:e.borderColor||t.borderColor,textColor:e.textColor||t.textColor,classNames:t.classNames.concat(e.classNames)}}const q2={id:String,defaultAllDay:Boolean,url:String,format:String,events:W,eventDataTransform:W,success:W,failure:W};function LE(t,e,n=FE(e)){let r;if(typeof t=="string"?r={url:t}:typeof t=="function"||Array.isArray(t)?r={events:t}:typeof t=="object"&&t&&(r=t),r){let{refined:i,extra:s}=_m(r,n),a=G2(i,e);if(a)return{_raw:t,isFetching:!1,latestFetchId:"",fetchRange:null,defaultAllDay:i.defaultAllDay,eventDataTransform:i.eventDataTransform,success:i.success,failure:i.failure,publicId:i.id||"",sourceId:ya(),sourceDefId:a.sourceDefId,meta:a.meta,ui:Dd(i,e),extendedProps:s}}return null}function FE(t){return Object.assign(Object.assign(Object.assign({},Td),q2),t.pluginHooks.eventSourceRefiners)}function G2(t,e){let n=e.pluginHooks.eventSourceDefs;for(let r=n.length-1;r>=0;r-=1){let s=n[r].parseMeta(t);if(s)return{sourceDefId:r,meta:s}}return null}function Y2(t,e,n,r,i){switch(e.type){case"RECEIVE_EVENTS":return Q2(t,n[e.sourceId],e.fetchId,e.fetchRange,e.rawEvents,i);case"RESET_RAW_EVENTS":return K2(t,n[e.sourceId],e.rawEvents,r.activeRange,i);case"ADD_EVENTS":return Z2(t,e.eventStore,r?r.activeRange:null,i);case"RESET_EVENTS":return e.eventStore;case"MERGE_EVENTS":return Am(t,e.eventStore);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return r?fa(t,r.activeRange,i):t;case"REMOVE_EVENTS":return B2(t,e.eventStore);case"REMOVE_EVENT_SOURCE":return zE(t,e.sourceId);case"REMOVE_ALL_EVENT_SOURCES":return lf(t,s=>!s.sourceId);case"REMOVE_ALL_EVENTS":return ur();default:return t}}function Q2(t,e,n,r,i,s){if(e&&n===e.latestFetchId){let a=Hl(jE(i,e,s),e,s);return r&&(a=fa(a,r,s)),Am(zE(t,e.sourceId),a)}return t}function K2(t,e,n,r,i){const{defIdMap:s,instanceIdMap:a}=J2(t);let l=Hl(jE(n,e,i),e,i,!1,s,a);return fa(l,r,i)}function jE(t,e,n){let r=n.options.eventDataTransform,i=e?e.eventDataTransform:null;return i&&(t=I_(t,i)),r&&(t=I_(t,r)),t}function I_(t,e){let n;if(!e)n=t;else{n=[];for(let r of t){let i=e(r);i?n.push(i):i==null&&n.push(r)}}return n}function Z2(t,e,n,r){return n&&(e=fa(e,n,r)),Am(t,e)}function P_(t,e,n){let{defs:r}=t,i=zi(t.instances,s=>r[s.defId].allDay?s:Object.assign(Object.assign({},s),{range:{start:n.createMarker(e.toDate(s.range.start,s.forcedStartTzo)),end:n.createMarker(e.toDate(s.range.end,s.forcedEndTzo))},forcedStartTzo:n.canComputeOffset?null:s.forcedStartTzo,forcedEndTzo:n.canComputeOffset?null:s.forcedEndTzo}));return{defs:r,instances:i}}function zE(t,e){return lf(t,n=>n.sourceId!==e)}function X2(t,e){return{defs:t.defs,instances:da(t.instances,n=>!e[n.instanceId])}}function J2(t){const{defs:e,instances:n}=t,r={},i={};for(let s in e){const a=e[s],{publicId:l}=a;l&&(r[l]=s)}for(let s in n){const a=n[s],l=e[a.defId],{publicId:u}=l;u&&(i[u]=s)}return{defIdMap:r,instanceIdMap:i}}class cf{constructor(){this.handlers={},this.thisContext=null}setThisContext(e){this.thisContext=e}setOptions(e){this.options=e}on(e,n){eL(this.handlers,e,n)}off(e,n){tL(this.handlers,e,n)}trigger(e,...n){let r=this.handlers[e]||[],i=this.options&&this.options[e],s=[].concat(i||[],r);for(let a of s)a.apply(this.thisContext,n)}hasHandlers(e){return!!(this.handlers[e]&&this.handlers[e].length||this.options&&this.options[e])}}function eL(t,e,n){(t[e]||(t[e]=[])).push(n)}function tL(t,e,n){n?t[e]&&(t[e]=t[e].filter(r=>r!==n)):delete t[e]}const nL={startTime:"09:00",endTime:"17:00",daysOfWeek:[1,2,3,4,5],display:"inverse-background",classNames:"fc-non-business",groupId:"_businessHours"};function rL(t,e){return Hl(iL(t),null,e)}function iL(t){let e;return t===!0?e=[{}]:Array.isArray(t)?e=t.filter(n=>n.daysOfWeek):typeof t=="object"&&t?e=[t]:e=[],e=e.map(n=>Object.assign(Object.assign({},nL),n)),e}function HE(t,e,n){n.emitter.trigger("select",Object.assign(Object.assign({},Rm(t,n)),{jsEvent:e?e.origEvent:null,view:n.viewApi||n.calendarApi.view}))}function sL(t,e){e.emitter.trigger("unselect",{jsEvent:t?t.origEvent:null,view:e.viewApi||e.calendarApi.view})}function Rm(t,e){let n={};for(let r of e.pluginHooks.dateSpanTransforms)Object.assign(n,r(t,e));return Object.assign(n,bL(t,e.dateEnv)),n}function L_(t,e,n){let{dateEnv:r,options:i}=n,s=e;return t?(s=bt(s),s=r.add(s,i.defaultAllDayEventDuration)):s=r.add(s,i.defaultTimedEventDuration),s}function Om(t,e,n,r){let i=kd(t.defs,e),s=ur();for(let a in t.defs){let l=t.defs[a];s.defs[a]=aL(l,i[a],n,r)}for(let a in t.instances){let l=t.instances[a],u=s.defs[l.defId];s.instances[a]=oL(l,u,i[l.defId],n,r)}return s}function aL(t,e,n,r){let i=n.standardProps||{};i.hasEnd==null&&e.durationEditable&&(n.startDelta||n.endDelta)&&(i.hasEnd=!0);let s=Object.assign(Object.assign(Object.assign({},t),i),{ui:Object.assign(Object.assign({},t.ui),i.ui)});n.extendedProps&&(s.extendedProps=Object.assign(Object.assign({},s.extendedProps),n.extendedProps));for(let a of r.pluginHooks.eventDefMutationAppliers)a(s,n,r);return!s.hasEnd&&r.options.forceEventDuration&&(s.hasEnd=!0),s}function oL(t,e,n,r,i){let{dateEnv:s}=i,a=r.standardProps&&r.standardProps.allDay===!0,l=r.standardProps&&r.standardProps.hasEnd===!1,u=Object.assign({},t);return a&&(u.range=RE(u.range)),r.datesDelta&&n.startEditable&&(u.range={start:s.add(u.range.start,r.datesDelta),end:s.add(u.range.end,r.datesDelta)}),r.startDelta&&n.durationEditable&&(u.range={start:s.add(u.range.start,r.startDelta),end:u.range.end}),r.endDelta&&n.durationEditable&&(u.range={start:u.range.start,end:s.add(u.range.end,r.endDelta)}),l&&(u.range={start:u.range.start,end:L_(e.allDay,u.range.start,i)}),e.allDay&&(u.range={start:bt(u.range.start),end:bt(u.range.end)}),u.range.end<u.range.start&&(u.range.end=L_(e.allDay,u.range.start,i)),u}class Ka{constructor(e,n){this.context=e,this.internalEventSource=n}remove(){this.context.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:this.internalEventSource.sourceId})}refetch(){this.context.dispatch({type:"FETCH_EVENT_SOURCES",sourceIds:[this.internalEventSource.sourceId],isRefetch:!0})}get id(){return this.internalEventSource.publicId}get url(){return this.internalEventSource.meta.url}get format(){return this.internalEventSource.meta.format}}class At{constructor(e,n,r){this._context=e,this._def=n,this._instance=r||null}setProp(e,n){if(e in ME)console.warn("Could not set date-related prop 'name'. Use one of the date-related methods instead.");else if(e==="id")n=sd[e](n),this.mutate({standardProps:{publicId:n}});else if(e in sd)n=sd[e](n),this.mutate({standardProps:{[e]:n}});else if(e in Td){let r=Td[e](n);e==="color"?r={backgroundColor:n,borderColor:n}:e==="editable"?r={startEditable:n,durationEditable:n}:r={[e]:n},this.mutate({standardProps:{ui:r}})}else console.warn(`Could not set prop '${e}'. Use setExtendedProp instead.`)}setExtendedProp(e,n){this.mutate({extendedProps:{[e]:n}})}setStart(e,n={}){let{dateEnv:r}=this._context,i=r.createMarker(e);if(i&&this._instance){let s=this._instance.range,a=eo(s.start,i,r,n.granularity);n.maintainDuration?this.mutate({datesDelta:a}):this.mutate({startDelta:a})}}setEnd(e,n={}){let{dateEnv:r}=this._context,i;if(!(e!=null&&(i=r.createMarker(e),!i))&&this._instance)if(i){let s=eo(this._instance.range.end,i,r,n.granularity);this.mutate({endDelta:s})}else this.mutate({standardProps:{hasEnd:!1}})}setDates(e,n,r={}){let{dateEnv:i}=this._context,s={allDay:r.allDay},a=i.createMarker(e),l;if(a&&!(n!=null&&(l=i.createMarker(n),!l))&&this._instance){let u=this._instance.range;r.allDay===!0&&(u=RE(u));let d=eo(u.start,a,i,r.granularity);if(l){let f=eo(u.end,l,i,r.granularity);OP(d,f)?this.mutate({datesDelta:d,standardProps:s}):this.mutate({startDelta:d,endDelta:f,standardProps:s})}else s.hasEnd=!1,this.mutate({datesDelta:d,standardProps:s})}}moveStart(e){let n=Qe(e);n&&this.mutate({startDelta:n})}moveEnd(e){let n=Qe(e);n&&this.mutate({endDelta:n})}moveDates(e){let n=Qe(e);n&&this.mutate({datesDelta:n})}setAllDay(e,n={}){let r={allDay:e},{maintainDuration:i}=n;i==null&&(i=this._context.options.allDayMaintainDuration),this._def.allDay!==e&&(r.hasEnd=i),this.mutate({standardProps:r})}formatRange(e){let{dateEnv:n}=this._context,r=this._instance,i=Dt(e);return this._def.hasEnd?n.formatRange(r.range.start,r.range.end,i,{forcedStartTzo:r.forcedStartTzo,forcedEndTzo:r.forcedEndTzo}):n.format(r.range.start,i,{forcedTzo:r.forcedStartTzo})}mutate(e){let n=this._instance;if(n){let r=this._def,i=this._context,{eventStore:s}=i.getCurrentData(),a=km(s,n.instanceId);a=Om(a,{"":{display:"",startEditable:!0,durationEditable:!0,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]}},e,i);let u=new At(i,r,n);this._def=a.defs[r.defId],this._instance=a.instances[n.instanceId],i.dispatch({type:"MERGE_EVENTS",eventStore:a}),i.emitter.trigger("eventChange",{oldEvent:u,event:this,relatedEvents:sa(a,i,n),revert(){i.dispatch({type:"RESET_EVENTS",eventStore:s})}})}}remove(){let e=this._context,n=UE(this);e.dispatch({type:"REMOVE_EVENTS",eventStore:n}),e.emitter.trigger("eventRemove",{event:this,relatedEvents:[],revert(){e.dispatch({type:"MERGE_EVENTS",eventStore:n})}})}get source(){let{sourceId:e}=this._def;return e?new Ka(this._context,this._context.getCurrentData().eventSources[e]):null}get start(){return this._instance?this._context.dateEnv.toDate(this._instance.range.start):null}get end(){return this._instance&&this._def.hasEnd?this._context.dateEnv.toDate(this._instance.range.end):null}get startStr(){let e=this._instance;return e?this._context.dateEnv.formatIso(e.range.start,{omitTime:this._def.allDay,forcedTzo:e.forcedStartTzo}):""}get endStr(){let e=this._instance;return e&&this._def.hasEnd?this._context.dateEnv.formatIso(e.range.end,{omitTime:this._def.allDay,forcedTzo:e.forcedEndTzo}):""}get id(){return this._def.publicId}get groupId(){return this._def.groupId}get allDay(){return this._def.allDay}get title(){return this._def.title}get url(){return this._def.url}get display(){return this._def.ui.display||"auto"}get startEditable(){return this._def.ui.startEditable}get durationEditable(){return this._def.ui.durationEditable}get constraint(){return this._def.ui.constraints[0]||null}get overlap(){return this._def.ui.overlap}get allow(){return this._def.ui.allows[0]||null}get backgroundColor(){return this._def.ui.backgroundColor}get borderColor(){return this._def.ui.borderColor}get textColor(){return this._def.ui.textColor}get classNames(){return this._def.ui.classNames}get extendedProps(){return this._def.extendedProps}toPlainObject(e={}){let n=this._def,{ui:r}=n,{startStr:i,endStr:s}=this,a={allDay:n.allDay};return n.title&&(a.title=n.title),i&&(a.start=i),s&&(a.end=s),n.publicId&&(a.id=n.publicId),n.groupId&&(a.groupId=n.groupId),n.url&&(a.url=n.url),r.display&&r.display!=="auto"&&(a.display=r.display),e.collapseColor&&r.backgroundColor&&r.backgroundColor===r.borderColor?a.color=r.backgroundColor:(r.backgroundColor&&(a.backgroundColor=r.backgroundColor),r.borderColor&&(a.borderColor=r.borderColor)),r.textColor&&(a.textColor=r.textColor),r.classNames.length&&(a.classNames=r.classNames),Object.keys(n.extendedProps).length&&(e.collapseExtendedProps?Object.assign(a,n.extendedProps):a.extendedProps=n.extendedProps),a}toJSON(){return this.toPlainObject()}}function UE(t){let e=t._def,n=t._instance;return{defs:{[e.defId]:e},instances:n?{[n.instanceId]:n}:{}}}function sa(t,e,n){let{defs:r,instances:i}=t,s=[],a=n?n.instanceId:"";for(let l in i){let u=i[l],d=r[u.defId];u.instanceId!==a&&s.push(new At(e,d,u))}return s}function Dg(t,e,n,r){let i={},s={},a={},l=[],u=[],d=kd(t.defs,e);for(let f in t.defs){let p=t.defs[f];d[p.defId].display==="inverse-background"&&(p.groupId?(i[p.groupId]=[],a[p.groupId]||(a[p.groupId]=p)):s[f]=[])}for(let f in t.instances){let p=t.instances[f],m=t.defs[p.defId],v=d[m.defId],b=p.range,_=!m.allDay&&r?Cm(b,r):b,w=Cs(_,n);w&&(v.display==="inverse-background"?m.groupId?i[m.groupId].push(w):s[p.defId].push(w):v.display!=="none"&&(v.display==="background"?l:u).push({def:m,ui:v,instance:p,range:w,isStart:_.start&&_.start.valueOf()===w.start.valueOf(),isEnd:_.end&&_.end.valueOf()===w.end.valueOf()}))}for(let f in i){let p=i[f],m=M_(p,n);for(let v of m){let b=a[f],_=d[b.defId];l.push({def:b,ui:_,instance:null,range:v,isStart:!1,isEnd:!1})}}for(let f in s){let p=s[f],m=M_(p,n);for(let v of m)l.push({def:t.defs[f],ui:d[f],instance:null,range:v,isStart:!1,isEnd:!1})}return{bg:l,fg:u}}function lL(t){return t.ui.display==="background"||t.ui.display==="inverse-background"}function F_(t,e){t.fcSeg=e}function co(t){return t.fcSeg||t.parentNode.fcSeg||null}function kd(t,e){return zi(t,n=>BE(n,e))}function BE(t,e){let n=[];return e[""]&&n.push(e[""]),e[t.defId]&&n.push(e[t.defId]),n.push(t.ui),PE(n)}function Mm(t,e){let n=t.map(cL);return n.sort((r,i)=>EP(r,i,e)),n.map(r=>r._seg)}function cL(t){let{eventRange:e}=t,n=e.def,r=e.instance?e.instance.range:e.range,i=r.start?r.start.valueOf():0,s=r.end?r.end.valueOf():0;return Object.assign(Object.assign(Object.assign({},n.extendedProps),n),{id:n.publicId,start:i,end:s,duration:s-i,allDay:Number(n.allDay),_seg:t})}function uL(t,e){let{pluginHooks:n}=e,r=n.isDraggableTransformers,{def:i,ui:s}=t.eventRange,a=s.startEditable;for(let l of r)a=l(a,i,s,e);return a}function dL(t,e){return t.isStart&&t.eventRange.ui.durationEditable&&e.options.eventResizableFromStart}function fL(t,e){return t.isEnd&&t.eventRange.ui.durationEditable}function Cl(t,e,n,r,i,s,a){let{dateEnv:l,options:u}=n,{displayEventTime:d,displayEventEnd:f}=u,p=t.eventRange.def,m=t.eventRange.instance;d==null&&(d=r!==!1),f==null&&(f=i!==!1);let v=m.range.start,b=m.range.end,_=s||t.start||t.eventRange.range.start,w=a||t.end||t.eventRange.range.end,x=bt(v).valueOf()===bt(_).valueOf(),C=bt(Es(b,-1)).valueOf()===bt(Es(w,-1)).valueOf();return d&&!p.allDay&&(x||C)?(_=x?v:_,w=C?b:w,f&&p.hasEnd?l.formatRange(_,w,e,{forcedStartTzo:s?null:m.forcedStartTzo,forcedEndTzo:a?null:m.forcedEndTzo}):l.format(_,e,{forcedTzo:s?null:m.forcedStartTzo})):""}function Fi(t,e,n){let r=t.eventRange.range;return{isPast:r.end<=(n||e.start),isFuture:r.start>=(n||e.end),isToday:e&&Li(e,r.start)}}function hL(t){let e=["fc-event"];return t.isMirror&&e.push("fc-event-mirror"),t.isDraggable&&e.push("fc-event-draggable"),(t.isStartResizable||t.isEndResizable)&&e.push("fc-event-resizable"),t.isDragging&&e.push("fc-event-dragging"),t.isResizing&&e.push("fc-event-resizing"),t.isSelected&&e.push("fc-event-selected"),t.isStart&&e.push("fc-event-start"),t.isEnd&&e.push("fc-event-end"),t.isPast&&e.push("fc-event-past"),t.isToday&&e.push("fc-event-today"),t.isFuture&&e.push("fc-event-future"),e}function WE(t){return t.instance?t.instance.instanceId:`${t.def.defId}:${t.range.start.toISOString()}`}function Nm(t,e){let{def:n,instance:r}=t.eventRange,{url:i}=n;if(i)return{href:i};let{emitter:s,options:a}=e,{eventInteractive:l}=a;return l==null&&(l=n.interactive,l==null&&(l=!!s.hasHandlers("eventClick"))),l?SE(u=>{s.trigger("eventClick",{el:u.target,event:new At(e,n,r),jsEvent:u,view:e.viewApi})}):{}}const pL={start:W,end:W,allDay:Boolean};function gL(t,e,n){let r=mL(t,e),{range:i}=r;if(!i.start)return null;if(!i.end){if(n==null)return null;i.end=e.add(i.start,n)}return r}function mL(t,e){let{refined:n,extra:r}=_m(t,pL),i=n.start?e.createMarkerMeta(n.start):null,s=n.end?e.createMarkerMeta(n.end):null,{allDay:a}=n;return a==null&&(a=i&&i.isTimeUnspecified&&(!s||s.isTimeUnspecified)),Object.assign({range:{start:i?i.marker:null,end:s?s.marker:null},allDay:a},r)}function vL(t,e){return N2(t.range,e.range)&&t.allDay===e.allDay&&yL(t,e)}function yL(t,e){for(let n in e)if(n!=="range"&&n!=="allDay"&&t[n]!==e[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}function bL(t,e){return Object.assign(Object.assign({},$E(t.range,e,t.allDay)),{allDay:t.allDay})}function VE(t,e,n){return Object.assign(Object.assign({},$E(t,e,n)),{timeZone:e.timeZone})}function $E(t,e,n){return{start:e.toDate(t.start),end:e.toDate(t.end),startStr:e.formatIso(t.start,{omitTime:n}),endStr:e.formatIso(t.end,{omitTime:n})}}function _L(t,e,n){let r=IE({editable:!1},n),i=Cg(r.refined,r.extra,"",t.allDay,!0,n);return{def:i,ui:BE(i,e),instance:Tm(i.defId,t.range),range:t.range,isStart:!0,isEnd:!0}}function SL(t,e,n){let r=!1,i=function(l){r||(r=!0,e(l))},s=function(l){r||(r=!0,n(l))},a=t(i,s);a&&typeof a.then=="function"&&a.then(i,s)}class j_ extends Error{constructor(e,n){super(e),this.response=n}}function wL(t,e,n){t=t.toUpperCase();const r={method:t};return t==="GET"?e+=(e.indexOf("?")===-1?"?":"&")+new URLSearchParams(n):(r.body=new URLSearchParams(n),r.headers={"Content-Type":"application/x-www-form-urlencoded"}),fetch(e,r).then(i=>{if(i.ok)return i.json().then(s=>[s,i],()=>{throw new j_("Failure parsing JSON",i)});throw new j_("Request failed",i)})}let Rp;function qE(){return Rp==null&&(Rp=xL()),Rp}function xL(){if(typeof document>"u")return!0;let t=document.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.innerHTML="<table><tr><td><div></div></td></tr></table>",t.querySelector("table").style.height="100px",t.querySelector("div").style.height="100%",document.body.appendChild(t);let n=t.querySelector("div").offsetHeight>0;return document.body.removeChild(t),n}class EL extends ot{constructor(){super(...arguments),this.state={forPrint:!1},this.handleBeforePrint=()=>{Cd(()=>{this.setState({forPrint:!0})})},this.handleAfterPrint=()=>{Cd(()=>{this.setState({forPrint:!1})})}}render(){let{props:e}=this,{options:n}=e,{forPrint:r}=this.state,i=r||n.height==="auto"||n.contentHeight==="auto",s=!i&&n.height!=null?n.height:"",a=["fc",r?"fc-media-print":"fc-media-screen",`fc-direction-${n.direction}`,e.theme.getClass("root")];return qE()||a.push("fc-liquid-hack"),e.children(a,s,i,r)}componentDidMount(){let{emitter:e}=this.props;e.on("_beforeprint",this.handleBeforePrint),e.on("_afterprint",this.handleAfterPrint)}componentWillUnmount(){let{emitter:e}=this.props;e.off("_beforeprint",this.handleBeforePrint),e.off("_afterprint",this.handleAfterPrint)}}let xo=class{constructor(e){this.component=e.component,this.isHitComboAllowed=e.isHitComboAllowed||null}destroy(){}};function CL(t,e){return{component:t,el:e.el,useEventCenter:e.useEventCenter!=null?e.useEventCenter:!0,isHitComboAllowed:e.isHitComboAllowed||null}}function Im(t){return{[t.component.uid]:t}}const kg={};class _a extends cr{constructor(e,n){super(e,n),this.handleRefresh=()=>{let r=this.computeTiming();r.state.nowDate.valueOf()!==this.state.nowDate.valueOf()&&this.setState(r.state),this.clearTimeout(),this.setTimeout(r.waitMs)},this.handleVisibilityChange=()=>{document.hidden||this.handleRefresh()},this.state=this.computeTiming().state}render(){let{props:e,state:n}=this;return e.children(n.nowDate,n.todayRange)}componentDidMount(){this.setTimeout(),this.context.nowManager.addResetListener(this.handleRefresh),document.addEventListener("visibilitychange",this.handleVisibilityChange)}componentDidUpdate(e){e.unit!==this.props.unit&&(this.clearTimeout(),this.setTimeout())}componentWillUnmount(){this.clearTimeout(),this.context.nowManager.removeResetListener(this.handleRefresh),document.removeEventListener("visibilitychange",this.handleVisibilityChange)}computeTiming(){let{props:e,context:n}=this,r=n.nowManager.getDateMarker(),{nowIndicatorSnap:i}=n.options;i==="auto"&&(i=/year|month|week|day/.test(e.unit)||(e.unitValue||1)===1);let s,a;return i?(s=n.dateEnv.startOf(r,e.unit),a=n.dateEnv.add(s,Qe(1,e.unit)).valueOf()-r.valueOf()):(s=r,a=1e3*60),a=Math.min(1e3*60*60*24,a),{state:{nowDate:s,todayRange:TL(s)},waitMs:a}}setTimeout(e=this.computeTiming().waitMs){this.timeoutId=setTimeout(()=>{const n=this.computeTiming();this.setState(n.state,()=>{this.setTimeout(n.waitMs)})},e)}clearTimeout(){this.timeoutId&&clearTimeout(this.timeoutId)}}_a.contextType=Vi;function TL(t){let e=bt(t),n=Jt(e,1);return{start:e,end:n}}class DL{getCurrentData(){return this.currentDataManager.getCurrentData()}dispatch(e){this.currentDataManager.dispatch(e)}get view(){return this.getCurrentData().viewApi}batchRendering(e){e()}updateSize(){this.trigger("_resize",!0)}setOption(e,n){this.dispatch({type:"SET_OPTION",optionName:e,rawOptionValue:n})}getOption(e){return this.currentDataManager.currentCalendarOptionsInput[e]}getAvailableLocaleCodes(){return Object.keys(this.getCurrentData().availableRawLocales)}on(e,n){let{currentDataManager:r}=this;r.currentCalendarOptionsRefiners[e]?r.emitter.on(e,n):console.warn(`Unknown listener name '${e}'`)}off(e,n){this.currentDataManager.emitter.off(e,n)}trigger(e,...n){this.currentDataManager.emitter.trigger(e,...n)}changeView(e,n){this.batchRendering(()=>{if(this.unselect(),n)if(n.start&&n.end)this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e}),this.dispatch({type:"SET_OPTION",optionName:"visibleRange",rawOptionValue:n});else{let{dateEnv:r}=this.getCurrentData();this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e,dateMarker:r.createMarker(n)})}else this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e})})}zoomTo(e,n){let r=this.getCurrentData(),i;n=n||"day",i=r.viewSpecs[n]||this.getUnitViewSpec(n),this.unselect(),i?this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:i.type,dateMarker:e}):this.dispatch({type:"CHANGE_DATE",dateMarker:e})}getUnitViewSpec(e){let{viewSpecs:n,toolbarConfig:r}=this.getCurrentData(),i=[].concat(r.header?r.header.viewsWithButtons:[],r.footer?r.footer.viewsWithButtons:[]),s,a;for(let l in n)i.push(l);for(s=0;s<i.length;s+=1)if(a=n[i[s]],a&&a.singleUnit===e)return a;return null}prev(){this.unselect(),this.dispatch({type:"PREV"})}next(){this.unselect(),this.dispatch({type:"NEXT"})}prevYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,-1)})}nextYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,1)})}today(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.nowManager.getDateMarker()})}gotoDate(e){let n=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:n.dateEnv.createMarker(e)})}incrementDate(e){let n=this.getCurrentData(),r=Qe(e);r&&(this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:n.dateEnv.add(n.currentDate,r)}))}getDate(){let e=this.getCurrentData();return e.dateEnv.toDate(e.currentDate)}formatDate(e,n){let{dateEnv:r}=this.getCurrentData();return r.format(r.createMarker(e),Dt(n))}formatRange(e,n,r){let{dateEnv:i}=this.getCurrentData();return i.formatRange(i.createMarker(e),i.createMarker(n),Dt(r),r)}formatIso(e,n){let{dateEnv:r}=this.getCurrentData();return r.formatIso(r.createMarker(e),{omitTime:n})}select(e,n){let r;n==null?e.start!=null?r=e:r={start:e,end:null}:r={start:e,end:n};let i=this.getCurrentData(),s=gL(r,i.dateEnv,Qe({days:1}));s&&(this.dispatch({type:"SELECT_DATES",selection:s}),HE(s,null,i))}unselect(e){let n=this.getCurrentData();n.dateSelection&&(this.dispatch({type:"UNSELECT_DATES"}),sL(e,n))}addEvent(e,n){if(e instanceof At){let a=e._def,l=e._instance;return this.getCurrentData().eventStore.defs[a.defId]||(this.dispatch({type:"ADD_EVENTS",eventStore:Tg({def:a,instance:l})}),this.triggerEventAdd(e)),e}let r=this.getCurrentData(),i;if(n instanceof Ka)i=n.internalEventSource;else if(typeof n=="boolean")n&&([i]=wm(r.eventSources));else if(n!=null){let a=this.getEventSourceById(n);if(!a)return console.warn(`Could not find an event source with ID "${n}"`),null;i=a.internalEventSource}let s=NE(e,i,r,!1);if(s){let a=new At(r,s.def,s.def.recurringDef?null:s.instance);return this.dispatch({type:"ADD_EVENTS",eventStore:Tg(s)}),this.triggerEventAdd(a),a}return null}triggerEventAdd(e){let{emitter:n}=this.getCurrentData();n.trigger("eventAdd",{event:e,relatedEvents:[],revert:()=>{this.dispatch({type:"REMOVE_EVENTS",eventStore:UE(e)})}})}getEventById(e){let n=this.getCurrentData(),{defs:r,instances:i}=n.eventStore;e=String(e);for(let s in r){let a=r[s];if(a.publicId===e){if(a.recurringDef)return new At(n,a,null);for(let l in i){let u=i[l];if(u.defId===a.defId)return new At(n,a,u)}}}return null}getEvents(){let e=this.getCurrentData();return sa(e.eventStore,e)}removeAllEvents(){this.dispatch({type:"REMOVE_ALL_EVENTS"})}getEventSources(){let e=this.getCurrentData(),n=e.eventSources,r=[];for(let i in n)r.push(new Ka(e,n[i]));return r}getEventSourceById(e){let n=this.getCurrentData(),r=n.eventSources;e=String(e);for(let i in r)if(r[i].publicId===e)return new Ka(n,r[i]);return null}addEventSource(e){let n=this.getCurrentData();if(e instanceof Ka)return n.eventSources[e.internalEventSource.sourceId]||this.dispatch({type:"ADD_EVENT_SOURCES",sources:[e.internalEventSource]}),e;let r=LE(e,n);return r?(this.dispatch({type:"ADD_EVENT_SOURCES",sources:[r]}),new Ka(n,r)):null}removeAllEventSources(){this.dispatch({type:"REMOVE_ALL_EVENT_SOURCES"})}refetchEvents(){this.dispatch({type:"FETCH_EVENT_SOURCES",isRefetch:!0})}scrollToTime(e){let n=Qe(e);n&&this.trigger("_scrollRequest",{time:n})}}function kL(t,e){return t.left>=e.left&&t.left<e.right&&t.top>=e.top&&t.top<e.bottom}function GE(t,e){let n={left:Math.max(t.left,e.left),right:Math.min(t.right,e.right),top:Math.max(t.top,e.top),bottom:Math.min(t.bottom,e.bottom)};return n.left<n.right&&n.top<n.bottom?n:!1}function AL(t,e){return{left:Math.min(Math.max(t.left,e.left),e.right),top:Math.min(Math.max(t.top,e.top),e.bottom)}}function RL(t){return{left:(t.left+t.right)/2,top:(t.top+t.bottom)/2}}function OL(t,e){return{left:t.left-e.left,top:t.top-e.top}}const Op=ur();class ML{constructor(){this.getKeysForEventDefs=Ce(this._getKeysForEventDefs),this.splitDateSelection=Ce(this._splitDateSpan),this.splitEventStore=Ce(this._splitEventStore),this.splitIndividualUi=Ce(this._splitIndividualUi),this.splitEventDrag=Ce(this._splitInteraction),this.splitEventResize=Ce(this._splitInteraction),this.eventUiBuilders={}}splitProps(e){let n=this.getKeyInfo(e),r=this.getKeysForEventDefs(e.eventStore),i=this.splitDateSelection(e.dateSelection),s=this.splitIndividualUi(e.eventUiBases,r),a=this.splitEventStore(e.eventStore,r),l=this.splitEventDrag(e.eventDrag),u=this.splitEventResize(e.eventResize),d={};this.eventUiBuilders=zi(n,(f,p)=>this.eventUiBuilders[p]||Ce(NL));for(let f in n){let p=n[f],m=a[f]||Op,v=this.eventUiBuilders[f];d[f]={businessHours:p.businessHours||e.businessHours,dateSelection:i[f]||null,eventStore:m,eventUiBases:v(e.eventUiBases[""],p.ui,s[f]),eventSelection:m.instances[e.eventSelection]?e.eventSelection:"",eventDrag:l[f]||null,eventResize:u[f]||null}}return d}_splitDateSpan(e){let n={};if(e){let r=this.getKeysForDateSpan(e);for(let i of r)n[i]=e}return n}_getKeysForEventDefs(e){return zi(e.defs,n=>this.getKeysForEventDef(n))}_splitEventStore(e,n){let{defs:r,instances:i}=e,s={};for(let a in r)for(let l of n[a])s[l]||(s[l]=ur()),s[l].defs[a]=r[a];for(let a in i){let l=i[a];for(let u of n[l.defId])s[u]&&(s[u].instances[a]=l)}return s}_splitIndividualUi(e,n){let r={};for(let i in e)if(i)for(let s of n[i])r[s]||(r[s]={}),r[s][i]=e[i];return r}_splitInteraction(e){let n={};if(e){let r=this._splitEventStore(e.affectedEvents,this._getKeysForEventDefs(e.affectedEvents)),i=this._getKeysForEventDefs(e.mutatedEvents),s=this._splitEventStore(e.mutatedEvents,i),a=l=>{n[l]||(n[l]={affectedEvents:r[l]||Op,mutatedEvents:s[l]||Op,isEvent:e.isEvent})};for(let l in r)a(l);for(let l in s)a(l)}return n}}function NL(t,e,n){let r=[];t&&r.push(t),e&&r.push(e);let i={"":PE(r)};return n&&Object.assign(i,n),i}function Pm(t,e,n,r){return{dow:t.getUTCDay(),isDisabled:!!(r&&(!r.activeRange||!Li(r.activeRange,t))),isOther:!!(r&&!Li(r.currentRange,t)),isToday:!!(e&&Li(e,t)),isPast:!!(n?t<n:e&&t<e.start),isFuture:!!(n?t>n:e&&t>=e.end)}}function uf(t,e){let n=["fc-day",`fc-day-${LP[t.dow]}`];return t.isDisabled?n.push("fc-day-disabled"):(t.isToday&&(n.push("fc-day-today"),n.push(e.getClass("today"))),t.isPast&&n.push("fc-day-past"),t.isFuture&&n.push("fc-day-future"),t.isOther&&n.push("fc-day-other")),n}const IL=Dt({year:"numeric",month:"long",day:"numeric"}),PL=Dt({week:"long"});function uo(t,e,n="day",r=!0){const{dateEnv:i,options:s,calendarApi:a}=t;let l=i.format(e,n==="week"?PL:IL);if(s.navLinks){let u=i.toDate(e);const d=f=>{let p=n==="day"?s.navLinkDayClick:n==="week"?s.navLinkWeekClick:null;typeof p=="function"?p.call(a,i.toDate(e),f):(typeof p=="string"&&(n=p),a.zoomTo(e,n))};return Object.assign({title:xl(s.navLinkHint,[l,u],l),"data-navlink":""},r?_E(d):{onClick:d})}return{"aria-label":l}}let Mp=null;function LL(){return Mp===null&&(Mp=FL()),Mp}function FL(){let t=document.createElement("div");wl(t,{position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}),t.innerHTML="<div></div>",document.body.appendChild(t);let n=t.firstChild.getBoundingClientRect().left>t.getBoundingClientRect().left;return gm(t),n}let Np;function jL(){return Np||(Np=zL()),Np}function zL(){let t=document.createElement("div");t.style.overflow="scroll",t.style.position="absolute",t.style.top="-9999px",t.style.left="-9999px",document.body.appendChild(t);let e=YE(t);return document.body.removeChild(t),e}function YE(t){return{x:t.offsetHeight-t.clientHeight,y:t.offsetWidth-t.clientWidth}}function HL(t,e=!1){let n=window.getComputedStyle(t),r=parseInt(n.borderLeftWidth,10)||0,i=parseInt(n.borderRightWidth,10)||0,s=parseInt(n.borderTopWidth,10)||0,a=parseInt(n.borderBottomWidth,10)||0,l=YE(t),u=l.y-r-i,d=l.x-s-a,f={borderLeft:r,borderRight:i,borderTop:s,borderBottom:a,scrollbarBottom:d,scrollbarLeft:0,scrollbarRight:0};return LL()&&n.direction==="rtl"?f.scrollbarLeft=u:f.scrollbarRight=u,e&&(f.paddingLeft=parseInt(n.paddingLeft,10)||0,f.paddingRight=parseInt(n.paddingRight,10)||0,f.paddingTop=parseInt(n.paddingTop,10)||0,f.paddingBottom=parseInt(n.paddingBottom,10)||0),f}function UL(t,e=!1,n){let r=Lm(t),i=HL(t,e),s={left:r.left+i.borderLeft+i.scrollbarLeft,right:r.right-i.borderRight-i.scrollbarRight,top:r.top+i.borderTop,bottom:r.bottom-i.borderBottom-i.scrollbarBottom};return e&&(s.left+=i.paddingLeft,s.right-=i.paddingRight,s.top+=i.paddingTop,s.bottom-=i.paddingBottom),s}function Lm(t){let e=t.getBoundingClientRect();return{left:e.left+window.scrollX,top:e.top+window.scrollY,right:e.right+window.scrollX,bottom:e.bottom+window.scrollY}}function BL(t){let e=QE(t),n=t.getBoundingClientRect();for(let r of e){let i=GE(n,r.getBoundingClientRect());if(i)n=i;else return null}return n}function QE(t){let e=[];for(;t instanceof HTMLElement;){let n=window.getComputedStyle(t);if(n.position==="fixed")break;/(auto|scroll)/.test(n.overflow+n.overflowY+n.overflowX)&&e.push(t),t=t.parentNode}return e}class fo{constructor(e,n,r,i){this.els=n;let s=this.originClientRect=e.getBoundingClientRect();r&&this.buildElHorizontals(s.left),i&&this.buildElVerticals(s.top)}buildElHorizontals(e){let n=[],r=[];for(let i of this.els){let s=i.getBoundingClientRect();n.push(s.left-e),r.push(s.right-e)}this.lefts=n,this.rights=r}buildElVerticals(e){let n=[],r=[];for(let i of this.els){let s=i.getBoundingClientRect();n.push(s.top-e),r.push(s.bottom-e)}this.tops=n,this.bottoms=r}leftToIndex(e){let{lefts:n,rights:r}=this,i=n.length,s;for(s=0;s<i;s+=1)if(e>=n[s]&&e<r[s])return s}topToIndex(e){let{tops:n,bottoms:r}=this,i=n.length,s;for(s=0;s<i;s+=1)if(e>=n[s]&&e<r[s])return s}getWidth(e){return this.rights[e]-this.lefts[e]}getHeight(e){return this.bottoms[e]-this.tops[e]}similarTo(e){return Mu(this.tops||[],e.tops||[])&&Mu(this.bottoms||[],e.bottoms||[])&&Mu(this.lefts||[],e.lefts||[])&&Mu(this.rights||[],e.rights||[])}}function Mu(t,e){const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(Math.round(t[r])!==Math.round(e[r]))return!1;return!0}class Fm{getMaxScrollTop(){return this.getScrollHeight()-this.getClientHeight()}getMaxScrollLeft(){return this.getScrollWidth()-this.getClientWidth()}canScrollVertically(){return this.getMaxScrollTop()>0}canScrollHorizontally(){return this.getMaxScrollLeft()>0}canScrollUp(){return this.getScrollTop()>0}canScrollDown(){return this.getScrollTop()<this.getMaxScrollTop()}canScrollLeft(){return this.getScrollLeft()>0}canScrollRight(){return this.getScrollLeft()<this.getMaxScrollLeft()}}class WL extends Fm{constructor(e){super(),this.el=e}getScrollTop(){return this.el.scrollTop}getScrollLeft(){return this.el.scrollLeft}setScrollTop(e){this.el.scrollTop=e}setScrollLeft(e){this.el.scrollLeft=e}getScrollWidth(){return this.el.scrollWidth}getScrollHeight(){return this.el.scrollHeight}getClientHeight(){return this.el.clientHeight}getClientWidth(){return this.el.clientWidth}}class VL extends Fm{getScrollTop(){return window.scrollY}getScrollLeft(){return window.scrollX}setScrollTop(e){window.scroll(window.scrollX,e)}setScrollLeft(e){window.scroll(e,window.scrollY)}getScrollWidth(){return document.documentElement.scrollWidth}getScrollHeight(){return document.documentElement.scrollHeight}getClientHeight(){return document.documentElement.clientHeight}getClientWidth(){return document.documentElement.clientWidth}}class Vr extends ot{constructor(){super(...arguments),this.uid=ya()}prepareHits(){}queryHit(e,n,r,i){return null}isValidSegDownEl(e){return!this.props.eventDrag&&!this.props.eventResize&&!kn(e,".fc-event-mirror")}isValidDateDownEl(e){return!kn(e,".fc-event:not(.fc-bg-event)")&&!kn(e,".fc-more-link")&&!kn(e,"a[data-navlink]")&&!kn(e,".fc-popover")}}class KE{constructor(e=n=>n.thickness||1){this.getEntryThickness=e,this.strictOrder=!1,this.allowReslicing=!1,this.maxCoord=-1,this.maxStackCnt=-1,this.levelCoords=[],this.entriesByLevel=[],this.stackCnts={}}addSegs(e){let n=[];for(let r of e)this.insertEntry(r,n);return n}insertEntry(e,n){let r=this.findInsertion(e);this.isInsertionValid(r,e)?this.insertEntryAt(e,r):this.handleInvalidInsertion(r,e,n)}isInsertionValid(e,n){return(this.maxCoord===-1||e.levelCoord+this.getEntryThickness(n)<=this.maxCoord)&&(this.maxStackCnt===-1||e.stackCnt<this.maxStackCnt)}handleInvalidInsertion(e,n,r){if(this.allowReslicing&&e.touchingEntry){const i=Object.assign(Object.assign({},n),{span:jm(n.span,e.touchingEntry.span)});r.push(i),this.splitEntry(n,e.touchingEntry,r)}else r.push(n)}splitEntry(e,n,r){let i=e.span,s=n.span;i.start<s.start&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:i.start,end:s.start}},r),i.end>s.end&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:s.end,end:i.end}},r)}insertEntryAt(e,n){let{entriesByLevel:r,levelCoords:i}=this;n.lateral===-1?(Ip(i,n.level,n.levelCoord),Ip(r,n.level,[e])):Ip(r[n.level],n.lateral,e),this.stackCnts[aa(e)]=n.stackCnt}findInsertion(e){let{levelCoords:n,entriesByLevel:r,strictOrder:i,stackCnts:s}=this,a=n.length,l=0,u=-1,d=-1,f=null,p=0;for(let b=0;b<a;b+=1){const _=n[b];if(!i&&_>=l+this.getEntryThickness(e))break;let w=r[b],x,C=Rg(w,e.span.start,Ag),k=C[0]+C[1];for(;(x=w[k])&&x.span.start<e.span.end;){let R=_+this.getEntryThickness(x);R>l&&(l=R,f=x,u=b,d=k),R===l&&(p=Math.max(p,s[aa(x)]+1)),k+=1}}let m=0;if(f)for(m=u+1;m<a&&n[m]<l;)m+=1;let v=-1;return m<a&&n[m]===l&&(v=Rg(r[m],e.span.end,Ag)[0]),{touchingLevel:u,touchingLateral:d,touchingEntry:f,stackCnt:p,levelCoord:l,level:m,lateral:v}}toRects(){let{entriesByLevel:e,levelCoords:n}=this,r=e.length,i=[];for(let s=0;s<r;s+=1){let a=e[s],l=n[s];for(let u of a)i.push(Object.assign(Object.assign({},u),{thickness:this.getEntryThickness(u),levelCoord:l}))}return i}}function Ag(t){return t.span.end}function aa(t){return t.index+":"+t.span.start}function $L(t){let e=[];for(let n of t){let r=[],i={span:n.span,entries:[n]};for(let s of e)jm(s.span,i.span)?i={entries:s.entries.concat(i.entries),span:qL(s.span,i.span)}:r.push(s);r.push(i),e=r}return e}function qL(t,e){return{start:Math.min(t.start,e.start),end:Math.max(t.end,e.end)}}function jm(t,e){let n=Math.max(t.start,e.start),r=Math.min(t.end,e.end);return n<r?{start:n,end:r}:null}function Ip(t,e,n){t.splice(e,0,n)}function Rg(t,e,n){let r=0,i=t.length;if(!i||e<n(t[r]))return[0,0];if(e>n(t[i-1]))return[i,0];for(;r<i;){let s=Math.floor(r+(i-r)/2),a=n(t[s]);if(e<a)i=s;else if(e>a)r=s+1;else return[s,1]}return[r,0]}class GL{constructor(e,n){this.emitter=new cf}destroy(){}setMirrorIsVisible(e){}setMirrorNeedsRevert(e){}setAutoScrollEnabled(e){}}const zm={};function YL(t,e){return!t||e>10?Dt({weekday:"short"}):e>1?Dt({weekday:"short",month:"numeric",day:"numeric",omitCommas:!0}):Dt({weekday:"long"})}const ZE="fc-col-header-cell";function XE(t){return t.text}class QL extends ot{render(){let{dateEnv:e,options:n,theme:r,viewApi:i}=this.context,{props:s}=this,{date:a,dateProfile:l}=s,u=Pm(a,s.todayRange,null,l),d=[ZE].concat(uf(u,r)),f=e.format(a,s.dayHeaderFormat),p=!u.isDisabled&&s.colCnt>1?uo(this.context,a):{},m=e.toDate(a);e.namedTimeZoneImpl&&(m=Es(m,36e5));let v=Object.assign(Object.assign(Object.assign({date:m,view:i},s.extraRenderProps),{text:f}),u);return I(On,{elTag:"th",elClasses:d,elAttrs:Object.assign({role:"columnheader",colSpan:s.colSpan,"data-date":u.isDisabled?void 0:rc(a)},s.extraDataAttrs),renderProps:v,generatorName:"dayHeaderContent",customGenerator:n.dayHeaderContent,defaultGenerator:XE,classNameGenerator:n.dayHeaderClassNames,didMount:n.dayHeaderDidMount,willUnmount:n.dayHeaderWillUnmount},b=>I("div",{className:"fc-scrollgrid-sync-inner"},!u.isDisabled&&I(b,{elTag:"a",elAttrs:p,elClasses:["fc-col-header-cell-cushion",s.isSticky&&"fc-sticky"]})))}}const KL=Dt({weekday:"long"});class ZL extends ot{render(){let{props:e}=this,{dateEnv:n,theme:r,viewApi:i,options:s}=this.context,a=Jt(new Date(2592e5),e.dow),l={dow:e.dow,isDisabled:!1,isFuture:!1,isPast:!1,isToday:!1,isOther:!1},u=n.format(a,e.dayHeaderFormat),d=Object.assign(Object.assign(Object.assign(Object.assign({date:a},l),{view:i}),e.extraRenderProps),{text:u});return I(On,{elTag:"th",elClasses:[ZE,...uf(l,r),...e.extraClassNames||[]],elAttrs:Object.assign({role:"columnheader",colSpan:e.colSpan},e.extraDataAttrs),renderProps:d,generatorName:"dayHeaderContent",customGenerator:s.dayHeaderContent,defaultGenerator:XE,classNameGenerator:s.dayHeaderClassNames,didMount:s.dayHeaderDidMount,willUnmount:s.dayHeaderWillUnmount},f=>I("div",{className:"fc-scrollgrid-sync-inner"},I(f,{elTag:"a",elClasses:["fc-col-header-cell-cushion",e.isSticky&&"fc-sticky"],elAttrs:{"aria-label":n.format(a,KL)}})))}}class JE extends ot{constructor(){super(...arguments),this.createDayHeaderFormatter=Ce(XL)}render(){let{context:e}=this,{dates:n,dateProfile:r,datesRepDistinctDays:i,renderIntro:s}=this.props,a=this.createDayHeaderFormatter(e.options.dayHeaderFormat,i,n.length);return I(_a,{unit:"day"},(l,u)=>I("tr",{role:"row"},s&&s("day"),n.map(d=>i?I(QL,{key:d.toISOString(),date:d,dateProfile:r,todayRange:u,colCnt:n.length,dayHeaderFormat:a}):I(ZL,{key:d.getUTCDay(),dow:d.getUTCDay(),dayHeaderFormat:a}))))}}function XL(t,e,n){return t||YL(e,n)}class eC{constructor(e,n){let r=e.start,{end:i}=e,s=[],a=[],l=-1;for(;r<i;)n.isHiddenDay(r)?s.push(l+.5):(l+=1,s.push(l),a.push(r)),r=Jt(r,1);this.dates=a,this.indices=s,this.cnt=a.length}sliceRange(e){let n=this.getDateDayIndex(e.start),r=this.getDateDayIndex(Jt(e.end,-1)),i=Math.max(0,n),s=Math.min(this.cnt-1,r);return i=Math.ceil(i),s=Math.floor(s),i<=s?{firstIndex:i,lastIndex:s,isStart:n===i,isEnd:r===s}:null}getDateDayIndex(e){let{indices:n}=this,r=Math.floor(ks(this.dates[0],e));return r<0?n[0]-1:r>=n.length?n[n.length-1]+1:n[r]}}class tC{constructor(e,n){let{dates:r}=e,i,s,a;if(n){for(s=r[0].getUTCDay(),i=1;i<r.length&&r[i].getUTCDay()!==s;i+=1);a=Math.ceil(r.length/i)}else a=1,i=r.length;this.rowCnt=a,this.colCnt=i,this.daySeries=e,this.cells=this.buildCells(),this.headerDates=this.buildHeaderDates()}buildCells(){let e=[];for(let n=0;n<this.rowCnt;n+=1){let r=[];for(let i=0;i<this.colCnt;i+=1)r.push(this.buildCell(n,i));e.push(r)}return e}buildCell(e,n){let r=this.daySeries.dates[e*this.colCnt+n];return{key:r.toISOString(),date:r}}buildHeaderDates(){let e=[];for(let n=0;n<this.colCnt;n+=1)e.push(this.cells[0][n].date);return e}sliceRange(e){let{colCnt:n}=this,r=this.daySeries.sliceRange(e),i=[];if(r){let{firstIndex:s,lastIndex:a}=r,l=s;for(;l<=a;){let u=Math.floor(l/n),d=Math.min((u+1)*n,a+1);i.push({row:u,firstCol:l%n,lastCol:(d-1)%n,isStart:r.isStart&&l===s,isEnd:r.isEnd&&d-1===a}),l=d}}return i}}class nC{constructor(){this.sliceBusinessHours=Ce(this._sliceBusinessHours),this.sliceDateSelection=Ce(this._sliceDateSpan),this.sliceEventStore=Ce(this._sliceEventStore),this.sliceEventDrag=Ce(this._sliceInteraction),this.sliceEventResize=Ce(this._sliceInteraction),this.forceDayIfListItem=!1}sliceProps(e,n,r,i,...s){let{eventUiBases:a}=e,l=this.sliceEventStore(e.eventStore,a,n,r,...s);return{dateSelectionSegs:this.sliceDateSelection(e.dateSelection,n,r,a,i,...s),businessHourSegs:this.sliceBusinessHours(e.businessHours,n,r,i,...s),fgEventSegs:l.fg,bgEventSegs:l.bg,eventDrag:this.sliceEventDrag(e.eventDrag,a,n,r,...s),eventResize:this.sliceEventResize(e.eventResize,a,n,r,...s),eventSelection:e.eventSelection}}sliceNowDate(e,n,r,i,...s){return this._sliceDateSpan({range:{start:e,end:Es(e,1)},allDay:!1},n,r,{},i,...s)}_sliceBusinessHours(e,n,r,i,...s){return e?this._sliceEventStore(fa(e,Nu(n,!!r),i),{},n,r,...s).bg:[]}_sliceEventStore(e,n,r,i,...s){if(e){let a=Dg(e,n,Nu(r,!!i),i);return{bg:this.sliceEventRanges(a.bg,s),fg:this.sliceEventRanges(a.fg,s)}}return{bg:[],fg:[]}}_sliceInteraction(e,n,r,i,...s){if(!e)return null;let a=Dg(e.mutatedEvents,n,Nu(r,!!i),i);return{segs:this.sliceEventRanges(a.fg,s),affectedInstances:e.affectedEvents.instances,isEvent:e.isEvent}}_sliceDateSpan(e,n,r,i,s,...a){if(!e)return[];let l=Nu(n,!!r),u=Cs(e.range,l);if(u){e=Object.assign(Object.assign({},e),{range:u});let d=_L(e,i,s),f=this.sliceRange(e.range,...a);for(let p of f)p.eventRange=d;return f}return[]}sliceEventRanges(e,n){let r=[];for(let i of e)r.push(...this.sliceEventRange(i,n));return r}sliceEventRange(e,n){let r=e.range;this.forceDayIfListItem&&e.ui.display==="list-item"&&(r={start:r.start,end:Jt(r.start,1)});let i=this.sliceRange(r,...n);for(let s of i)s.eventRange=e,s.isStart=e.isStart&&s.isStart,s.isEnd=e.isEnd&&s.isEnd;return i}}function Nu(t,e){let n=t.activeRange;return e?n:{start:Es(n.start,t.slotMinTime.milliseconds),end:Es(n.end,t.slotMaxTime.milliseconds-864e5)}}function rC(t,e,n){let{instances:r}=t.mutatedEvents;for(let i in r)if(!of(e.validRange,r[i].range))return!1;return iC({eventDrag:t},n)}function JL(t,e,n){return of(e.validRange,t.range)?iC({dateSelection:t},n):!1}function iC(t,e){let n=e.getCurrentData(),r=Object.assign({businessHours:n.businessHours,dateSelection:"",eventStore:n.eventStore,eventUiBases:n.eventUiBases,eventSelection:"",eventDrag:null,eventResize:null},t);return(e.pluginHooks.isPropsValid||eF)(r,e)}function eF(t,e,n={},r){return!(t.eventDrag&&!tF(t,e,n,r)||t.dateSelection&&!nF(t,e,n,r))}function tF(t,e,n,r){let i=e.getCurrentData(),s=t.eventDrag,a=s.mutatedEvents,l=a.defs,u=a.instances,d=kd(l,s.isEvent?t.eventUiBases:{"":i.selectionConfig});r&&(d=zi(d,r));let f=X2(t.eventStore,s.affectedEvents.instances),p=f.defs,m=f.instances,v=kd(p,t.eventUiBases);for(let b in u){let _=u[b],w=_.range,x=d[_.defId],C=l[_.defId];if(!sC(x.constraints,w,f,t.businessHours,e))return!1;let{eventOverlap:k}=e.options,R=typeof k=="function"?k:null;for(let M in m){let P=m[M];if(Em(w,P.range)&&(v[P.defId].overlap===!1&&s.isEvent||x.overlap===!1||R&&!R(new At(e,p[P.defId],P),new At(e,C,_))))return!1}let A=i.eventStore;for(let M of x.allows){let P=Object.assign(Object.assign({},n),{range:_.range,allDay:C.allDay}),O=A.defs[C.defId],z=A.instances[b],B;if(O?B=new At(e,O,z):B=new At(e,C),!M(Rm(P,e),B))return!1}}return!0}function nF(t,e,n,r){let i=t.eventStore,s=i.defs,a=i.instances,l=t.dateSelection,u=l.range,{selectionConfig:d}=e.getCurrentData();if(r&&(d=r(d)),!sC(d.constraints,u,i,t.businessHours,e))return!1;let{selectOverlap:f}=e.options,p=typeof f=="function"?f:null;for(let m in a){let v=a[m];if(Em(u,v.range)&&(d.overlap===!1||p&&!p(new At(e,s[v.defId],v),null)))return!1}for(let m of d.allows){let v=Object.assign(Object.assign({},n),l);if(!m(Rm(v,e),null))return!1}return!0}function sC(t,e,n,r,i){for(let s of t)if(!iF(rF(s,e,n,r,i),e))return!1;return!0}function rF(t,e,n,r,i){return t==="businessHours"?Pp(fa(r,e,i)):typeof t=="string"?Pp(lf(n,s=>s.groupId===t)):typeof t=="object"&&t?Pp(fa(t,e,i)):[]}function Pp(t){let{instances:e}=t,n=[];for(let r in e)n.push(e[r].range);return n}function iF(t,e){for(let n of t)if(of(n,e))return!0;return!1}const Iu=/^(visible|hidden)$/;class aC extends ot{constructor(){super(...arguments),this.handleEl=e=>{this.el=e,li(this.props.elRef,e)}}render(){let{props:e}=this,{liquid:n,liquidIsAbsolute:r}=e,i=n&&r,s=["fc-scroller"];return n&&(r?s.push("fc-scroller-liquid-absolute"):s.push("fc-scroller-liquid")),I("div",{ref:this.handleEl,className:s.join(" "),style:{overflowX:e.overflowX,overflowY:e.overflowY,left:i&&-(e.overcomeLeft||0)||"",right:i&&-(e.overcomeRight||0)||"",bottom:i&&-(e.overcomeBottom||0)||"",marginLeft:!i&&-(e.overcomeLeft||0)||"",marginRight:!i&&-(e.overcomeRight||0)||"",marginBottom:!i&&-(e.overcomeBottom||0)||"",maxHeight:e.maxHeight||""}},e.children)}needsXScrolling(){if(Iu.test(this.props.overflowX))return!1;let{el:e}=this,n=this.el.getBoundingClientRect().width-this.getYScrollbarWidth(),{children:r}=e;for(let i=0;i<r.length;i+=1)if(r[i].getBoundingClientRect().width>n)return!0;return!1}needsYScrolling(){if(Iu.test(this.props.overflowY))return!1;let{el:e}=this,n=this.el.getBoundingClientRect().height-this.getXScrollbarWidth(),{children:r}=e;for(let i=0;i<r.length;i+=1)if(r[i].getBoundingClientRect().height>n)return!0;return!1}getXScrollbarWidth(){return Iu.test(this.props.overflowX)?0:this.el.offsetHeight-this.el.clientHeight}getYScrollbarWidth(){return Iu.test(this.props.overflowY)?0:this.el.offsetWidth-this.el.clientWidth}}class Oi{constructor(e){this.masterCallback=e,this.currentMap={},this.depths={},this.callbackMap={},this.handleValue=(n,r)=>{let{depths:i,currentMap:s}=this,a=!1,l=!1;n!==null?(a=r in s,s[r]=n,i[r]=(i[r]||0)+1,l=!0):(i[r]-=1,i[r]||(delete s[r],delete this.callbackMap[r],a=!0)),this.masterCallback&&(a&&this.masterCallback(null,String(r)),l&&this.masterCallback(n,String(r)))}}createRef(e){let n=this.callbackMap[e];return n||(n=this.callbackMap[e]=r=>{this.handleValue(r,String(e))}),n}collect(e,n,r){return m2(this.currentMap,e,n,r)}getAll(){return wm(this.currentMap)}}function sF(t){let e=pP(t,".fc-scrollgrid-shrink"),n=0;for(let r of e)n=Math.max(n,kP(r));return Math.ceil(n)}function oC(t,e){return t.liquid&&e.liquid}function aF(t,e){return e.maxHeight!=null||oC(t,e)}function oF(t,e,n,r){let{expandRows:i}=n;return typeof e.content=="function"?e.content(n):I("table",{role:"presentation",className:[e.tableClassName,t.syncRowHeights?"fc-scrollgrid-sync-table":""].join(" "),style:{minWidth:n.tableMinWidth,width:n.clientWidth,height:i?n.clientHeight:""}},n.tableColGroupNode,I(r?"thead":"tbody",{role:"presentation"},typeof e.rowContent=="function"?e.rowContent(n):e.rowContent))}function lF(t,e){return xs(t,e,Ur)}function cF(t,e){let n=[];for(let r of t){let i=r.span||1;for(let s=0;s<i;s+=1)n.push(I("col",{style:{width:r.width==="shrink"?uF(e):r.width||"",minWidth:r.minWidth||""}}))}return I("colgroup",{},...n)}function uF(t){return t??4}function dF(t){for(let e of t)if(e.width==="shrink")return!0;return!1}function fF(t,e){let n=["fc-scrollgrid",e.theme.getClass("table")];return t&&n.push("fc-scrollgrid-liquid"),n}function hF(t,e){let n=["fc-scrollgrid-section",`fc-scrollgrid-section-${t.type}`,t.className];return e&&t.liquid&&t.maxHeight==null&&n.push("fc-scrollgrid-section-liquid"),t.isSticky&&n.push("fc-scrollgrid-section-sticky"),n}function Og(t){return I("div",{className:"fc-scrollgrid-sticky-shim",style:{width:t.clientWidth,minWidth:t.tableMinWidth}})}function Ad(t){let{stickyHeaderDates:e}=t;return(e==null||e==="auto")&&(e=t.height==="auto"||t.viewHeight==="auto"),e}function lC(t){let{stickyFooterScrollbar:e}=t;return(e==null||e==="auto")&&(e=t.height==="auto"||t.viewHeight==="auto"),e}class Hm extends ot{constructor(){super(...arguments),this.processCols=Ce(e=>e,lF),this.renderMicroColGroup=Ce(cF),this.scrollerRefs=new Oi,this.scrollerElRefs=new Oi(this._handleScrollerEl.bind(this)),this.state={shrinkWidth:null,forceYScrollbars:!1,scrollerClientWidths:{},scrollerClientHeights:{}},this.handleSizing=()=>{this.safeSetState(Object.assign({shrinkWidth:this.computeShrinkWidth()},this.computeScrollerDims()))}}render(){let{props:e,state:n,context:r}=this,i=e.sections||[],s=this.processCols(e.cols),a=this.renderMicroColGroup(s,n.shrinkWidth),l=fF(e.liquid,r);e.collapsibleWidth&&l.push("fc-scrollgrid-collapsible");let u=i.length,d=0,f,p=[],m=[],v=[];for(;d<u&&(f=i[d]).type==="header";)p.push(this.renderSection(f,a,!0)),d+=1;for(;d<u&&(f=i[d]).type==="body";)m.push(this.renderSection(f,a,!1)),d+=1;for(;d<u&&(f=i[d]).type==="footer";)v.push(this.renderSection(f,a,!0)),d+=1;let b=!qE();const _={role:"rowgroup"};return I("table",{role:"grid",className:l.join(" "),style:{height:e.height}},!!(!b&&p.length)&&I("thead",_,...p),!!(!b&&m.length)&&I("tbody",_,...m),!!(!b&&v.length)&&I("tfoot",_,...v),b&&I("tbody",_,...p,...m,...v))}renderSection(e,n,r){return"outerContent"in e?I(vt,{key:e.key},e.outerContent):I("tr",{key:e.key,role:"presentation",className:hF(e,this.props.liquid).join(" ")},this.renderChunkTd(e,n,e.chunk,r))}renderChunkTd(e,n,r,i){if("outerContent"in r)return r.outerContent;let{props:s}=this,{forceYScrollbars:a,scrollerClientWidths:l,scrollerClientHeights:u}=this.state,d=aF(s,e),f=oC(s,e),p=s.liquid?a?"scroll":d?"auto":"hidden":"visible",m=e.key,v=oF(e,r,{tableColGroupNode:n,tableMinWidth:"",clientWidth:!s.collapsibleWidth&&l[m]!==void 0?l[m]:null,clientHeight:u[m]!==void 0?u[m]:null,expandRows:e.expandRows,syncRowHeights:!1,rowSyncHeights:[],reportRowHeightChange:()=>{}},i);return I(i?"th":"td",{ref:r.elRef,role:"presentation"},I("div",{className:`fc-scroller-harness${f?" fc-scroller-harness-liquid":""}`},I(aC,{ref:this.scrollerRefs.createRef(m),elRef:this.scrollerElRefs.createRef(m),overflowY:p,overflowX:s.liquid?"hidden":"visible",maxHeight:e.maxHeight,liquid:f,liquidIsAbsolute:!0},v)))}_handleScrollerEl(e,n){let r=pF(this.props.sections,n);r&&li(r.chunk.scrollerElRef,e)}componentDidMount(){this.handleSizing(),this.context.addResizeHandler(this.handleSizing)}componentDidUpdate(){this.handleSizing()}componentWillUnmount(){this.context.removeResizeHandler(this.handleSizing)}computeShrinkWidth(){return dF(this.props.cols)?sF(this.scrollerElRefs.getAll()):0}computeScrollerDims(){let e=jL(),{scrollerRefs:n,scrollerElRefs:r}=this,i=!1,s={},a={};for(let l in n.currentMap){let u=n.currentMap[l];if(u&&u.needsYScrolling()){i=!0;break}}for(let l of this.props.sections){let u=l.key,d=r.currentMap[u];if(d){let f=d.parentNode;s[u]=Math.floor(f.getBoundingClientRect().width-(i?e.y:0)),a[u]=Math.floor(f.getBoundingClientRect().height)}}return{forceYScrollbars:i,scrollerClientWidths:s,scrollerClientHeights:a}}}Hm.addStateEquality({scrollerClientWidths:Ur,scrollerClientHeights:Ur});function pF(t,e){for(let n of t)if(n.key===e)return n;return null}class df extends ot{constructor(){super(...arguments),this.buildPublicEvent=Ce((e,n,r)=>new At(e,n,r)),this.handleEl=e=>{this.el=e,li(this.props.elRef,e),e&&F_(e,this.props.seg)}}render(){const{props:e,context:n}=this,{options:r}=n,{seg:i}=e,{eventRange:s}=i,{ui:a}=s,l={event:this.buildPublicEvent(n,s.def,s.instance),view:n.viewApi,timeText:e.timeText,textColor:a.textColor,backgroundColor:a.backgroundColor,borderColor:a.borderColor,isDraggable:!e.disableDragging&&uL(i,n),isStartResizable:!e.disableResizing&&dL(i,n),isEndResizable:!e.disableResizing&&fL(i),isMirror:!!(e.isDragging||e.isResizing||e.isDateSelecting),isStart:!!i.isStart,isEnd:!!i.isEnd,isPast:!!e.isPast,isFuture:!!e.isFuture,isToday:!!e.isToday,isSelected:!!e.isSelected,isDragging:!!e.isDragging,isResizing:!!e.isResizing};return I(On,{elRef:this.handleEl,elTag:e.elTag,elAttrs:e.elAttrs,elClasses:[...hL(l),...i.eventRange.ui.classNames,...e.elClasses||[]],elStyle:e.elStyle,renderProps:l,generatorName:"eventContent",customGenerator:r.eventContent,defaultGenerator:e.defaultGenerator,classNameGenerator:r.eventClassNames,didMount:r.eventDidMount,willUnmount:r.eventWillUnmount},e.children)}componentDidUpdate(e){this.el&&this.props.seg!==e.seg&&F_(this.el,this.props.seg)}}class Um extends ot{render(){let{props:e,context:n}=this,{options:r}=n,{seg:i}=e,{ui:s}=i.eventRange,a=r.eventTimeFormat||e.defaultTimeFormat,l=Cl(i,a,n,e.defaultDisplayEventTime,e.defaultDisplayEventEnd);return I(df,Object.assign({},e,{elTag:"a",elStyle:{borderColor:s.borderColor,backgroundColor:s.backgroundColor},elAttrs:Nm(i,n),defaultGenerator:gF,timeText:l}),(u,d)=>I(vt,null,I(u,{elTag:"div",elClasses:["fc-event-main"],elStyle:{color:d.textColor}}),!!d.isStartResizable&&I("div",{className:"fc-event-resizer fc-event-resizer-start"}),!!d.isEndResizable&&I("div",{className:"fc-event-resizer fc-event-resizer-end"})))}}Um.addPropsEquality({seg:Ur});function gF(t){return I("div",{className:"fc-event-main-frame"},t.timeText&&I("div",{className:"fc-event-time"},t.timeText),I("div",{className:"fc-event-title-container"},I("div",{className:"fc-event-title fc-sticky"},t.event.title||I(vt,null,""))))}const Bm=t=>I(Vi.Consumer,null,e=>{let{options:n}=e,r={isAxis:t.isAxis,date:e.dateEnv.toDate(t.date),view:e.viewApi};return I(On,{elRef:t.elRef,elTag:t.elTag||"div",elAttrs:t.elAttrs,elClasses:t.elClasses,elStyle:t.elStyle,renderProps:r,generatorName:"nowIndicatorContent",customGenerator:n.nowIndicatorContent,classNameGenerator:n.nowIndicatorClassNames,didMount:n.nowIndicatorDidMount,willUnmount:n.nowIndicatorWillUnmount},t.children)}),mF=Dt({day:"numeric"});class Wm extends ot{constructor(){super(...arguments),this.refineRenderProps=id(vF)}render(){let{props:e,context:n}=this,{options:r}=n,i=this.refineRenderProps({date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,isMonthStart:e.isMonthStart||!1,showDayNumber:e.showDayNumber,extraRenderProps:e.extraRenderProps,viewApi:n.viewApi,dateEnv:n.dateEnv,monthStartFormat:r.monthStartFormat});return I(On,{elRef:e.elRef,elTag:e.elTag,elAttrs:Object.assign(Object.assign({},e.elAttrs),i.isDisabled?{}:{"data-date":rc(e.date)}),elClasses:[...uf(i,n.theme),...e.elClasses||[]],elStyle:e.elStyle,renderProps:i,generatorName:"dayCellContent",customGenerator:r.dayCellContent,defaultGenerator:e.defaultGenerator,classNameGenerator:i.isDisabled?void 0:r.dayCellClassNames,didMount:r.dayCellDidMount,willUnmount:r.dayCellWillUnmount},e.children)}}function Vm(t){return!!(t.dayCellContent||Eg("dayCellContent",t))}function vF(t){let{date:e,dateEnv:n,dateProfile:r,isMonthStart:i}=t,s=Pm(e,t.todayRange,null,r),a=t.showDayNumber?n.format(e,i?t.monthStartFormat:mF):"";return Object.assign(Object.assign(Object.assign({date:n.toDate(e),view:t.viewApi},s),{isMonthStart:i,dayNumberText:a}),t.extraRenderProps)}class cC extends ot{render(){let{props:e}=this,{seg:n}=e;return I(df,{elTag:"div",elClasses:["fc-bg-event"],elStyle:{backgroundColor:n.eventRange.ui.backgroundColor},defaultGenerator:yF,seg:n,timeText:"",isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,isPast:e.isPast,isFuture:e.isFuture,isToday:e.isToday,disableDragging:!0,disableResizing:!0})}}function yF(t){let{title:e}=t.event;return e&&I("div",{className:"fc-event-title"},t.event.title)}function uC(t){return I("div",{className:`fc-${t}`})}const dC=t=>I(Vi.Consumer,null,e=>{let{dateEnv:n,options:r}=e,{date:i}=t,s=r.weekNumberFormat||t.defaultFormat,a=n.computeWeekNumber(i),l=n.format(i,s),u={num:a,text:l,date:i};return I(On,{elRef:t.elRef,elTag:t.elTag,elAttrs:t.elAttrs,elClasses:t.elClasses,elStyle:t.elStyle,renderProps:u,generatorName:"weekNumberContent",customGenerator:r.weekNumberContent,defaultGenerator:bF,classNameGenerator:r.weekNumberClassNames,didMount:r.weekNumberDidMount,willUnmount:r.weekNumberWillUnmount},t.children)});function bF(t){return t.text}const Lp=10;class _F extends ot{constructor(){super(...arguments),this.state={titleId:_s()},this.handleRootEl=e=>{this.rootEl=e,this.props.elRef&&li(this.props.elRef,e)},this.handleDocumentMouseDown=e=>{const n=yE(e);this.rootEl.contains(n)||this.handleCloseClick()},this.handleDocumentKeyDown=e=>{e.key==="Escape"&&this.handleCloseClick()},this.handleCloseClick=()=>{let{onClose:e}=this.props;e&&e()}}render(){let{theme:e,options:n}=this.context,{props:r,state:i}=this,s=["fc-popover",e.getClass("popover")].concat(r.extraClassNames||[]);return eP(I("div",Object.assign({},r.extraAttrs,{id:r.id,className:s.join(" "),"aria-labelledby":i.titleId,ref:this.handleRootEl}),I("div",{className:"fc-popover-header "+e.getClass("popoverHeader")},I("span",{className:"fc-popover-title",id:i.titleId},r.title),I("span",{className:"fc-popover-close "+e.getIconClass("close"),title:n.closeHint,onClick:this.handleCloseClick})),I("div",{className:"fc-popover-body "+e.getClass("popoverContent")},r.children)),r.parentEl)}componentDidMount(){document.addEventListener("mousedown",this.handleDocumentMouseDown),document.addEventListener("keydown",this.handleDocumentKeyDown),this.updateSize()}componentWillUnmount(){document.removeEventListener("mousedown",this.handleDocumentMouseDown),document.removeEventListener("keydown",this.handleDocumentKeyDown)}updateSize(){let{isRtl:e}=this.context,{alignmentEl:n,alignGridTop:r}=this.props,{rootEl:i}=this,s=BL(n);if(s){let a=i.getBoundingClientRect(),l=r?kn(n,".fc-scrollgrid").getBoundingClientRect().top:s.top,u=e?s.right-a.width:s.left;l=Math.max(l,Lp),u=Math.min(u,document.documentElement.clientWidth-Lp-a.width),u=Math.max(u,Lp);let d=i.offsetParent.getBoundingClientRect();wl(i,{top:l-d.top,left:u-d.left})}}}class SF extends Vr{constructor(){super(...arguments),this.handleRootEl=e=>{this.rootEl=e,e?this.context.registerInteractiveComponent(this,{el:e,useEventCenter:!1}):this.context.unregisterInteractiveComponent(this)}}render(){let{options:e,dateEnv:n}=this.context,{props:r}=this,{startDate:i,todayRange:s,dateProfile:a}=r,l=n.format(i,e.dayPopoverFormat);return I(Wm,{elRef:this.handleRootEl,date:i,dateProfile:a,todayRange:s},(u,d,f)=>I(_F,{elRef:f.ref,id:r.id,title:l,extraClassNames:["fc-more-popover"].concat(f.className||[]),extraAttrs:f,parentEl:r.parentEl,alignmentEl:r.alignmentEl,alignGridTop:r.alignGridTop,onClose:r.onClose},Vm(e)&&I(u,{elTag:"div",elClasses:["fc-more-popover-misc"]}),r.children))}queryHit(e,n,r,i){let{rootEl:s,props:a}=this;return e>=0&&e<r&&n>=0&&n<i?{dateProfile:a.dateProfile,dateSpan:Object.assign({allDay:!a.forceTimed,range:{start:a.startDate,end:a.endDate}},a.extraDateSpan),dayEl:s,rect:{left:0,top:0,right:r,bottom:i},layer:1}:null}}class fC extends ot{constructor(){super(...arguments),this.state={isPopoverOpen:!1,popoverId:_s()},this.handleLinkEl=e=>{this.linkEl=e,this.props.elRef&&li(this.props.elRef,e)},this.handleClick=e=>{let{props:n,context:r}=this,{moreLinkClick:i}=r.options,s=z_(n).start;function a(l){let{def:u,instance:d,range:f}=l.eventRange;return{event:new At(r,u,d),start:r.dateEnv.toDate(f.start),end:r.dateEnv.toDate(f.end),isStart:l.isStart,isEnd:l.isEnd}}typeof i=="function"&&(i=i({date:s,allDay:!!n.allDayDate,allSegs:n.allSegs.map(a),hiddenSegs:n.hiddenSegs.map(a),jsEvent:e,view:r.viewApi})),!i||i==="popover"?this.setState({isPopoverOpen:!0}):typeof i=="string"&&r.calendarApi.zoomTo(s,i)},this.handlePopoverClose=()=>{this.setState({isPopoverOpen:!1})}}render(){let{props:e,state:n}=this;return I(Vi.Consumer,null,r=>{let{viewApi:i,options:s,calendarApi:a}=r,{moreLinkText:l}=s,{moreCnt:u}=e,d=z_(e),f=typeof l=="function"?l.call(a,u):`+${u} ${l}`,p=xl(s.moreLinkHint,[u],f),m={num:u,shortText:`+${u}`,text:f,view:i};return I(vt,null,!!e.moreCnt&&I(On,{elTag:e.elTag||"a",elRef:this.handleLinkEl,elClasses:[...e.elClasses||[],"fc-more-link"],elStyle:e.elStyle,elAttrs:Object.assign(Object.assign(Object.assign({},e.elAttrs),_E(this.handleClick)),{title:p,"aria-expanded":n.isPopoverOpen,"aria-controls":n.isPopoverOpen?n.popoverId:""}),renderProps:m,generatorName:"moreLinkContent",customGenerator:s.moreLinkContent,defaultGenerator:e.defaultGenerator||wF,classNameGenerator:s.moreLinkClassNames,didMount:s.moreLinkDidMount,willUnmount:s.moreLinkWillUnmount},e.children),n.isPopoverOpen&&I(SF,{id:n.popoverId,startDate:d.start,endDate:d.end,dateProfile:e.dateProfile,todayRange:e.todayRange,extraDateSpan:e.extraDateSpan,parentEl:this.parentEl,alignmentEl:e.alignmentElRef?e.alignmentElRef.current:this.linkEl,alignGridTop:e.alignGridTop,forceTimed:e.forceTimed,onClose:this.handlePopoverClose},e.popoverContent()))})}componentDidMount(){this.updateParentEl()}componentDidUpdate(){this.updateParentEl()}updateParentEl(){this.linkEl&&(this.parentEl=kn(this.linkEl,".fc-view-harness"))}}function wF(t){return t.text}function z_(t){if(t.allDayDate)return{start:t.allDayDate,end:Jt(t.allDayDate,1)};let{hiddenSegs:e}=t;return{start:hC(e),end:EF(e)}}function hC(t){return t.reduce(xF).eventRange.range.start}function xF(t,e){return t.eventRange.range.start<e.eventRange.range.start?t:e}function EF(t){return t.reduce(CF).eventRange.range.end}function CF(t,e){return t.eventRange.range.end>e.eventRange.range.end?t:e}class TF{constructor(){this.handlers=[]}set(e){this.currentValue=e;for(let n of this.handlers)n(e)}subscribe(e){this.handlers.push(e),this.currentValue!==void 0&&e(this.currentValue)}}class DF extends TF{constructor(){super(...arguments),this.map=new Map}handle(e){const{map:n}=this;let r=!1;e.isActive?(n.set(e.id,e),r=!0):n.has(e.id)&&(n.delete(e.id),r=!0),r&&this.set(n)}}const kF=[],pC={code:"en",week:{dow:0,doy:4},direction:"ltr",buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day",list:"list"},weekText:"W",weekTextLong:"Week",closeHint:"Close",timeHint:"Time",eventHint:"Event",allDayText:"all-day",moreLinkText:"more",noEventsText:"No events to display"},gC=Object.assign(Object.assign({},pC),{buttonHints:{prev:"Previous $0",next:"Next $0",today(t,e){return e==="day"?"Today":`This ${t}`}},viewHint:"$0 view",navLinkHint:"Go to $0",moreLinkHint(t){return`Show ${t} more event${t===1?"":"s"}`}});function AF(t){let e=t.length>0?t[0].code:"en",n=kF.concat(t),r={en:gC};for(let i of n)r[i.code]=i;return{map:r,defaultCode:e}}function mC(t,e){return typeof t=="object"&&!Array.isArray(t)?vC(t.code,[t.code],t):RF(t,e)}function RF(t,e){let n=[].concat(t||[]),r=OF(n,e)||gC;return vC(t,n,r)}function OF(t,e){for(let n=0;n<t.length;n+=1){let r=t[n].toLocaleLowerCase().split("-");for(let i=r.length;i>0;i-=1){let s=r.slice(0,i).join("-");if(e[s])return e[s]}}return null}function vC(t,e,n){let r=Sm([pC,n],["buttonText"]);delete r.code;let{week:i}=r;return delete r.week,{codeArg:t,codes:e,week:i,simpleNumberFormat:new Intl.NumberFormat(t),options:r}}function ui(t){return{id:ya(),name:t.name,premiumReleaseDate:t.premiumReleaseDate?new Date(t.premiumReleaseDate):void 0,deps:t.deps||[],reducers:t.reducers||[],isLoadingFuncs:t.isLoadingFuncs||[],contextInit:[].concat(t.contextInit||[]),eventRefiners:t.eventRefiners||{},eventDefMemberAdders:t.eventDefMemberAdders||[],eventSourceRefiners:t.eventSourceRefiners||{},isDraggableTransformers:t.isDraggableTransformers||[],eventDragMutationMassagers:t.eventDragMutationMassagers||[],eventDefMutationAppliers:t.eventDefMutationAppliers||[],dateSelectionTransformers:t.dateSelectionTransformers||[],datePointTransforms:t.datePointTransforms||[],dateSpanTransforms:t.dateSpanTransforms||[],views:t.views||{},viewPropsTransformers:t.viewPropsTransformers||[],isPropsValid:t.isPropsValid||null,externalDefTransforms:t.externalDefTransforms||[],viewContainerAppends:t.viewContainerAppends||[],eventDropTransformers:t.eventDropTransformers||[],componentInteractions:t.componentInteractions||[],calendarInteractions:t.calendarInteractions||[],themeClasses:t.themeClasses||{},eventSourceDefs:t.eventSourceDefs||[],cmdFormatter:t.cmdFormatter,recurringTypes:t.recurringTypes||[],namedTimeZonedImpl:t.namedTimeZonedImpl,initialView:t.initialView||"",elementDraggingImpl:t.elementDraggingImpl,optionChangeHandlers:t.optionChangeHandlers||{},scrollGridImpl:t.scrollGridImpl||null,listenerRefiners:t.listenerRefiners||{},optionRefiners:t.optionRefiners||{},propSetHandlers:t.propSetHandlers||{}}}function MF(t,e){let n={},r={premiumReleaseDate:void 0,reducers:[],isLoadingFuncs:[],contextInit:[],eventRefiners:{},eventDefMemberAdders:[],eventSourceRefiners:{},isDraggableTransformers:[],eventDragMutationMassagers:[],eventDefMutationAppliers:[],dateSelectionTransformers:[],datePointTransforms:[],dateSpanTransforms:[],views:{},viewPropsTransformers:[],isPropsValid:null,externalDefTransforms:[],viewContainerAppends:[],eventDropTransformers:[],componentInteractions:[],calendarInteractions:[],themeClasses:{},eventSourceDefs:[],cmdFormatter:null,recurringTypes:[],namedTimeZonedImpl:null,initialView:"",elementDraggingImpl:null,optionChangeHandlers:{},scrollGridImpl:null,listenerRefiners:{},optionRefiners:{},propSetHandlers:{}};function i(s){for(let a of s){const l=a.name,u=n[l];u===void 0?(n[l]=a.id,i(a.deps),r=IF(r,a)):u!==a.id&&console.warn(`Duplicate plugin '${l}'`)}}return t&&i(t),i(e),r}function NF(){let t=[],e=[],n;return(r,i)=>((!n||!xs(r,t)||!xs(i,e))&&(n=MF(r,i)),t=r,e=i,n)}function IF(t,e){return{premiumReleaseDate:PF(t.premiumReleaseDate,e.premiumReleaseDate),reducers:t.reducers.concat(e.reducers),isLoadingFuncs:t.isLoadingFuncs.concat(e.isLoadingFuncs),contextInit:t.contextInit.concat(e.contextInit),eventRefiners:Object.assign(Object.assign({},t.eventRefiners),e.eventRefiners),eventDefMemberAdders:t.eventDefMemberAdders.concat(e.eventDefMemberAdders),eventSourceRefiners:Object.assign(Object.assign({},t.eventSourceRefiners),e.eventSourceRefiners),isDraggableTransformers:t.isDraggableTransformers.concat(e.isDraggableTransformers),eventDragMutationMassagers:t.eventDragMutationMassagers.concat(e.eventDragMutationMassagers),eventDefMutationAppliers:t.eventDefMutationAppliers.concat(e.eventDefMutationAppliers),dateSelectionTransformers:t.dateSelectionTransformers.concat(e.dateSelectionTransformers),datePointTransforms:t.datePointTransforms.concat(e.datePointTransforms),dateSpanTransforms:t.dateSpanTransforms.concat(e.dateSpanTransforms),views:Object.assign(Object.assign({},t.views),e.views),viewPropsTransformers:t.viewPropsTransformers.concat(e.viewPropsTransformers),isPropsValid:e.isPropsValid||t.isPropsValid,externalDefTransforms:t.externalDefTransforms.concat(e.externalDefTransforms),viewContainerAppends:t.viewContainerAppends.concat(e.viewContainerAppends),eventDropTransformers:t.eventDropTransformers.concat(e.eventDropTransformers),calendarInteractions:t.calendarInteractions.concat(e.calendarInteractions),componentInteractions:t.componentInteractions.concat(e.componentInteractions),themeClasses:Object.assign(Object.assign({},t.themeClasses),e.themeClasses),eventSourceDefs:t.eventSourceDefs.concat(e.eventSourceDefs),cmdFormatter:e.cmdFormatter||t.cmdFormatter,recurringTypes:t.recurringTypes.concat(e.recurringTypes),namedTimeZonedImpl:e.namedTimeZonedImpl||t.namedTimeZonedImpl,initialView:t.initialView||e.initialView,elementDraggingImpl:t.elementDraggingImpl||e.elementDraggingImpl,optionChangeHandlers:Object.assign(Object.assign({},t.optionChangeHandlers),e.optionChangeHandlers),scrollGridImpl:e.scrollGridImpl||t.scrollGridImpl,listenerRefiners:Object.assign(Object.assign({},t.listenerRefiners),e.listenerRefiners),optionRefiners:Object.assign(Object.assign({},t.optionRefiners),e.optionRefiners),propSetHandlers:Object.assign(Object.assign({},t.propSetHandlers),e.propSetHandlers)}}function PF(t,e){return t===void 0?e:e===void 0?t:new Date(Math.max(t.valueOf(),e.valueOf()))}class As extends ic{}As.prototype.classes={root:"fc-theme-standard",tableCellShaded:"fc-cell-shaded",buttonGroup:"fc-button-group",button:"fc-button fc-button-primary",buttonActive:"fc-button-active"};As.prototype.baseIconClass="fc-icon";As.prototype.iconClasses={close:"fc-icon-x",prev:"fc-icon-chevron-left",next:"fc-icon-chevron-right",prevYear:"fc-icon-chevrons-left",nextYear:"fc-icon-chevrons-right"};As.prototype.rtlIconClasses={prev:"fc-icon-chevron-right",next:"fc-icon-chevron-left",prevYear:"fc-icon-chevrons-right",nextYear:"fc-icon-chevrons-left"};As.prototype.iconOverrideOption="buttonIcons";As.prototype.iconOverrideCustomButtonOption="icon";As.prototype.iconOverridePrefix="fc-icon-";function LF(t,e){let n={},r;for(r in t)Mg(r,n,t,e);for(r in e)Mg(r,n,t,e);return n}function Mg(t,e,n,r){if(e[t])return e[t];let i=FF(t,e,n,r);return i&&(e[t]=i),i}function FF(t,e,n,r){let i=n[t],s=r[t],a=f=>i&&i[f]!==null?i[f]:s&&s[f]!==null?s[f]:null,l=a("component"),u=a("superType"),d=null;if(u){if(u===t)throw new Error("Can't have a custom view type that references itself");d=Mg(u,e,n,r)}return!l&&d&&(l=d.component),l?{type:t,component:l,defaults:Object.assign(Object.assign({},d?d.defaults:{}),i?i.rawOptions:{}),overrides:Object.assign(Object.assign({},d?d.overrides:{}),s?s.rawOptions:{})}:null}function H_(t){return zi(t,jF)}function jF(t){let e=typeof t=="function"?{component:t}:t,{component:n}=e;return e.content?n=U_(e):n&&!(n.prototype instanceof ot)&&(n=U_(Object.assign(Object.assign({},e),{content:n}))),{superType:e.type,component:n,rawOptions:e}}function U_(t){return e=>I(Vi.Consumer,null,n=>I(On,{elTag:"div",elClasses:AE(n.viewSpec),renderProps:Object.assign(Object.assign({},e),{nextDayThreshold:n.options.nextDayThreshold}),generatorName:void 0,customGenerator:t.content,classNameGenerator:t.classNames,didMount:t.didMount,willUnmount:t.willUnmount}))}function zF(t,e,n,r){let i=H_(t),s=H_(e.views),a=LF(i,s);return zi(a,l=>HF(l,s,e,n,r))}function HF(t,e,n,r,i){let s=t.overrides.duration||t.defaults.duration||r.duration||n.duration,a=null,l="",u="",d={};if(s&&(a=UF(s),a)){let m=xg(a);l=m.unit,m.value===1&&(u=l,d=e[l]?e[l].rawOptions:{})}let f=m=>{let v=m.buttonText||{},b=t.defaults.buttonTextKey;return b!=null&&v[b]!=null?v[b]:v[t.type]!=null?v[t.type]:v[u]!=null?v[u]:null},p=m=>{let v=m.buttonHints||{},b=t.defaults.buttonTextKey;return b!=null&&v[b]!=null?v[b]:v[t.type]!=null?v[t.type]:v[u]!=null?v[u]:null};return{type:t.type,component:t.component,duration:a,durationUnit:l,singleUnit:u,optionDefaults:t.defaults,optionOverrides:Object.assign(Object.assign({},d),t.overrides),buttonTextOverride:f(r)||f(n)||t.overrides.buttonText,buttonTextDefault:f(i)||t.defaults.buttonText||f(El)||t.type,buttonTitleOverride:p(r)||p(n)||t.overrides.buttonHint,buttonTitleDefault:p(i)||t.defaults.buttonHint||p(El)}}let B_={};function UF(t){let e=JSON.stringify(t),n=B_[e];return n===void 0&&(n=Qe(t),B_[e]=n),n}function BF(t,e){switch(e.type){case"CHANGE_VIEW_TYPE":t=e.viewType}return t}function WF(t,e){switch(e.type){case"CHANGE_DATE":return e.dateMarker;default:return t}}function VF(t,e,n){let r=t.initialDate;return r!=null?e.createMarker(r):n.getDateMarker()}function $F(t,e){switch(e.type){case"SET_OPTION":return Object.assign(Object.assign({},t),{[e.optionName]:e.rawOptionValue});default:return t}}function qF(t,e,n,r){let i;switch(e.type){case"CHANGE_VIEW_TYPE":return r.build(e.dateMarker||n);case"CHANGE_DATE":return r.build(e.dateMarker);case"PREV":if(i=r.buildPrev(t,n),i.isValid)return i;break;case"NEXT":if(i=r.buildNext(t,n),i.isValid)return i;break}return t}function GF(t,e,n){let r=e?e.activeRange:null;return bC({},ej(t,n),r,n)}function YF(t,e,n,r){let i=n?n.activeRange:null;switch(e.type){case"ADD_EVENT_SOURCES":return bC(t,e.sources,i,r);case"REMOVE_EVENT_SOURCE":return KF(t,e.sourceId);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return n?_C(t,i,r):t;case"FETCH_EVENT_SOURCES":return $m(t,e.sourceIds?EE(e.sourceIds):SC(t,r),i,e.isRefetch||!1,r);case"RECEIVE_EVENTS":case"RECEIVE_EVENT_ERROR":return JF(t,e.sourceId,e.fetchId,e.fetchRange);case"REMOVE_ALL_EVENT_SOURCES":return{};default:return t}}function QF(t,e,n){let r=e?e.activeRange:null;return $m(t,SC(t,n),r,!0,n)}function yC(t){for(let e in t)if(t[e].isFetching)return!0;return!1}function bC(t,e,n,r){let i={};for(let s of e)i[s.sourceId]=s;return n&&(i=_C(i,n,r)),Object.assign(Object.assign({},t),i)}function KF(t,e){return da(t,n=>n.sourceId!==e)}function _C(t,e,n){return $m(t,da(t,r=>ZF(r,e,n)),e,!1,n)}function ZF(t,e,n){return wC(t,n)?!n.options.lazyFetching||!t.fetchRange||t.isFetching||e.start<t.fetchRange.start||e.end>t.fetchRange.end:!t.latestFetchId}function $m(t,e,n,r,i){let s={};for(let a in t){let l=t[a];e[a]?s[a]=XF(l,n,r,i):s[a]=l}return s}function XF(t,e,n,r){let{options:i,calendarApi:s}=r,a=r.pluginHooks.eventSourceDefs[t.sourceDefId],l=ya();return a.fetch({eventSource:t,range:e,isRefetch:n,context:r},u=>{let{rawEvents:d}=u;i.eventSourceSuccess&&(d=i.eventSourceSuccess.call(s,d,u.response)||d),t.success&&(d=t.success.call(s,d,u.response)||d),r.dispatch({type:"RECEIVE_EVENTS",sourceId:t.sourceId,fetchId:l,fetchRange:e,rawEvents:d})},u=>{let d=!1;i.eventSourceFailure&&(i.eventSourceFailure.call(s,u),d=!0),t.failure&&(t.failure(u),d=!0),d||console.warn(u.message,u),r.dispatch({type:"RECEIVE_EVENT_ERROR",sourceId:t.sourceId,fetchId:l,fetchRange:e,error:u})}),Object.assign(Object.assign({},t),{isFetching:!0,latestFetchId:l})}function JF(t,e,n,r){let i=t[e];return i&&n===i.latestFetchId?Object.assign(Object.assign({},t),{[e]:Object.assign(Object.assign({},i),{isFetching:!1,fetchRange:r})}):t}function SC(t,e){return da(t,n=>wC(n,e))}function ej(t,e){let n=FE(e),r=[].concat(t.eventSources||[]),i=[];t.initialEvents&&r.unshift(t.initialEvents),t.events&&r.unshift(t.events);for(let s of r){let a=LE(s,e,n);a&&i.push(a)}return i}function wC(t,e){return!e.pluginHooks.eventSourceDefs[t.sourceDefId].ignoreRange}function tj(t,e){switch(e.type){case"UNSELECT_DATES":return null;case"SELECT_DATES":return e.selection;default:return t}}function nj(t,e){switch(e.type){case"UNSELECT_EVENT":return"";case"SELECT_EVENT":return e.eventInstanceId;default:return t}}function rj(t,e){let n;switch(e.type){case"UNSET_EVENT_DRAG":return null;case"SET_EVENT_DRAG":return n=e.state,{affectedEvents:n.affectedEvents,mutatedEvents:n.mutatedEvents,isEvent:n.isEvent};default:return t}}function ij(t,e){let n;switch(e.type){case"UNSET_EVENT_RESIZE":return null;case"SET_EVENT_RESIZE":return n=e.state,{affectedEvents:n.affectedEvents,mutatedEvents:n.mutatedEvents,isEvent:n.isEvent};default:return t}}function sj(t,e,n,r,i){let s=t.headerToolbar?W_(t.headerToolbar,t,e,n,r,i):null,a=t.footerToolbar?W_(t.footerToolbar,t,e,n,r,i):null;return{header:s,footer:a}}function W_(t,e,n,r,i,s){let a={},l=[],u=!1;for(let d in t){let f=t[d],p=aj(f,e,n,r,i,s);a[d]=p.widgets,l.push(...p.viewsWithButtons),u=u||p.hasTitle}return{sectionWidgets:a,viewsWithButtons:l,hasTitle:u}}function aj(t,e,n,r,i,s){let a=e.direction==="rtl",l=e.customButtons||{},u=n.buttonText||{},d=e.buttonText||{},f=n.buttonHints||{},p=e.buttonHints||{},m=t?t.split(" "):[],v=[],b=!1;return{widgets:m.map(w=>w.split(",").map(x=>{if(x==="title")return b=!0,{buttonName:x};let C,k,R,A,M,P;if(C=l[x])R=O=>{C.click&&C.click.call(O.target,O,O.target)},(A=r.getCustomButtonIconClass(C))||(A=r.getIconClass(x,a))||(M=C.text),P=C.hint||C.text;else if(k=i[x]){v.push(x),R=()=>{s.changeView(x)},(M=k.buttonTextOverride)||(A=r.getIconClass(x,a))||(M=k.buttonTextDefault);let O=k.buttonTextOverride||k.buttonTextDefault;P=xl(k.buttonTitleOverride||k.buttonTitleDefault||e.viewHint,[O,x],O)}else if(s[x])if(R=()=>{s[x]()},(M=u[x])||(A=r.getIconClass(x,a))||(M=d[x]),x==="prevYear"||x==="nextYear"){let O=x==="prevYear"?"prev":"next";P=xl(f[O]||p[O],[d.year||"year","year"],d[x])}else P=O=>xl(f[x]||p[x],[d[O]||O,O],d[x]);return{buttonName:x,buttonClick:R,buttonIcon:A,buttonText:M,buttonHint:P}})),viewsWithButtons:v,hasTitle:b}}class oj{constructor(e,n,r){this.type=e,this.getCurrentData=n,this.dateEnv=r}get calendar(){return this.getCurrentData().calendarApi}get title(){return this.getCurrentData().viewTitle}get activeStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.start)}get activeEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.end)}get currentStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.start)}get currentEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.end)}getOption(e){return this.getCurrentData().options[e]}}let lj={ignoreRange:!0,parseMeta(t){return Array.isArray(t.events)?t.events:null},fetch(t,e){e({rawEvents:t.eventSource.meta})}};const cj=ui({name:"array-event-source",eventSourceDefs:[lj]});let uj={parseMeta(t){return typeof t.events=="function"?t.events:null},fetch(t,e,n){const{dateEnv:r}=t.context,i=t.eventSource.meta;SL(i.bind(null,VE(t.range,r)),s=>e({rawEvents:s}),n)}};const dj=ui({name:"func-event-source",eventSourceDefs:[uj]}),fj={method:String,extraParams:W,startParam:String,endParam:String,timeZoneParam:String};let hj={parseMeta(t){return t.url&&(t.format==="json"||!t.format)?{url:t.url,format:"json",method:(t.method||"GET").toUpperCase(),extraParams:t.extraParams,startParam:t.startParam,endParam:t.endParam,timeZoneParam:t.timeZoneParam}:null},fetch(t,e,n){const{meta:r}=t.eventSource,i=gj(r,t.range,t.context);wL(r.method,r.url,i).then(([s,a])=>{e({rawEvents:s,response:a})},n)}};const pj=ui({name:"json-event-source",eventSourceRefiners:fj,eventSourceDefs:[hj]});function gj(t,e,n){let{dateEnv:r,options:i}=n,s,a,l,u,d={};return s=t.startParam,s==null&&(s=i.startParam),a=t.endParam,a==null&&(a=i.endParam),l=t.timeZoneParam,l==null&&(l=i.timeZoneParam),typeof t.extraParams=="function"?u=t.extraParams():u=t.extraParams||{},Object.assign(d,u),d[s]=r.formatIso(e.start),d[a]=r.formatIso(e.end),r.timeZone!=="local"&&(d[l]=r.timeZone),d}const mj={daysOfWeek:W,startTime:Qe,endTime:Qe,duration:Qe,startRecur:W,endRecur:W};let vj={parse(t,e){if(t.daysOfWeek||t.startTime||t.endTime||t.startRecur||t.endRecur){let n={daysOfWeek:t.daysOfWeek||null,startTime:t.startTime||null,endTime:t.endTime||null,startRecur:t.startRecur?e.createMarker(t.startRecur):null,endRecur:t.endRecur?e.createMarker(t.endRecur):null,dateEnv:e},r;return t.duration&&(r=t.duration),!r&&t.startTime&&t.endTime&&(r=MP(t.endTime,t.startTime)),{allDayGuess:!t.startTime&&!t.endTime,duration:r,typeData:n}}return null},expand(t,e,n){let r=Cs(e,{start:t.startRecur,end:t.endRecur});return r?bj(t.daysOfWeek,t.startTime,t.dateEnv,n,r):[]}};const yj=ui({name:"simple-recurring-event",recurringTypes:[vj],eventRefiners:mj});function bj(t,e,n,r,i){let s=t?EE(t):null,a=bt(i.start),l=i.end,u=[];for(e&&(e.milliseconds<0?l=Jt(l,1):e.milliseconds>=1e3*60*60*24&&(a=Jt(a,-1)));a<l;){let d;(!s||s[a.getUTCDay()])&&(e?d=r.add(a,e):d=a,u.push(r.createMarker(n.toDate(d)))),a=Jt(a,1)}return u}const _j=ui({name:"change-handler",optionChangeHandlers:{events(t,e){V_([t],e)},eventSources:V_}});function V_(t,e){let n=wm(e.getCurrentData().eventSources);if(n.length===1&&t.length===1&&Array.isArray(n[0]._raw)&&Array.isArray(t[0])){e.dispatch({type:"RESET_RAW_EVENTS",sourceId:n[0].sourceId,rawEvents:t[0]});return}let r=[];for(let i of t){let s=!1;for(let a=0;a<n.length;a+=1)if(n[a]._raw===i){n.splice(a,1),s=!0;break}s||r.push(i)}for(let i of n)e.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:i.sourceId});for(let i of r)e.calendarApi.addEventSource(i)}function Sj(t,e){e.emitter.trigger("datesSet",Object.assign(Object.assign({},VE(t.activeRange,e.dateEnv)),{view:e.viewApi}))}function wj(t,e){let{emitter:n}=e;n.hasHandlers("eventsSet")&&n.trigger("eventsSet",sa(t,e))}const xj=[cj,dj,pj,yj,_j,ui({name:"misc",isLoadingFuncs:[t=>yC(t.eventSources)],propSetHandlers:{dateProfile:Sj,eventStore:wj}})];class Ej{constructor(e,n){this.runTaskOption=e,this.drainedOption=n,this.queue=[],this.delayedRunner=new pm(this.drain.bind(this))}request(e,n){this.queue.push(e),this.delayedRunner.request(n)}pause(e){this.delayedRunner.pause(e)}resume(e,n){this.delayedRunner.resume(e,n)}drain(){let{queue:e}=this;for(;e.length;){let n=[],r;for(;r=e.shift();)this.runTask(r),n.push(r);this.drained(n)}}runTask(e){this.runTaskOption&&this.runTaskOption(e)}drained(e){this.drainedOption&&this.drainedOption(e)}}function Cj(t,e,n){let r;return/^(year|month)$/.test(t.currentRangeUnit)?r=t.currentRange:r=t.activeRange,n.formatRange(r.start,r.end,Dt(e.titleFormat||Tj(t)),{isEndExclusive:t.isRangeAllDay,defaultSeparator:e.titleRangeSeparator})}function Tj(t){let{currentRangeUnit:e}=t;if(e==="year")return{year:"numeric"};if(e==="month")return{year:"numeric",month:"long"};let n=Sd(t.currentRange.start,t.currentRange.end);return n!==null&&n>1?{year:"numeric",month:"short",day:"numeric"}:{year:"numeric",month:"long",day:"numeric"}}class $_{constructor(){this.resetListeners=new Set}handleInput(e,n){const r=this.dateEnv;if(e!==r&&(typeof n=="function"?this.nowFn=n:r||(this.nowAnchorDate=e.toDate(n?e.createMarker(n):e.createNowMarker()),this.nowAnchorQueried=Date.now()),this.dateEnv=e,r))for(const i of this.resetListeners.values())i()}getDateMarker(){return this.nowAnchorDate?this.dateEnv.timestampToMarker(this.nowAnchorDate.valueOf()+(Date.now()-this.nowAnchorQueried)):this.dateEnv.createMarker(this.nowFn())}addResetListener(e){this.resetListeners.add(e)}removeResetListener(e){this.resetListeners.delete(e)}}class Dj{constructor(e){this.computeCurrentViewData=Ce(this._computeCurrentViewData),this.organizeRawLocales=Ce(AF),this.buildLocale=Ce(mC),this.buildPluginHooks=NF(),this.buildDateEnv=Ce(kj),this.buildTheme=Ce(Aj),this.parseToolbars=Ce(sj),this.buildViewSpecs=Ce(zF),this.buildDateProfileGenerator=id(Rj),this.buildViewApi=Ce(Oj),this.buildViewUiProps=id(Ij),this.buildEventUiBySource=Ce(Mj,Ur),this.buildEventUiBases=Ce(Nj),this.parseContextBusinessHours=id(Pj),this.buildTitle=Ce(Cj),this.nowManager=new $_,this.emitter=new cf,this.actionRunner=new Ej(this._handleAction.bind(this),this.updateData.bind(this)),this.currentCalendarOptionsInput={},this.currentCalendarOptionsRefined={},this.currentViewOptionsInput={},this.currentViewOptionsRefined={},this.currentCalendarOptionsRefiners={},this.optionsForRefining=[],this.optionsForHandling=[],this.getCurrentData=()=>this.data,this.dispatch=m=>{this.actionRunner.request(m)},this.props=e,this.actionRunner.pause(),this.nowManager=new $_;let n={},r=this.computeOptionsData(e.optionOverrides,n,e.calendarApi),i=r.calendarOptions.initialView||r.pluginHooks.initialView,s=this.computeCurrentViewData(i,r,e.optionOverrides,n);e.calendarApi.currentDataManager=this,this.emitter.setThisContext(e.calendarApi),this.emitter.setOptions(s.options);let a={nowManager:this.nowManager,dateEnv:r.dateEnv,options:r.calendarOptions,pluginHooks:r.pluginHooks,calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},l=VF(r.calendarOptions,r.dateEnv,this.nowManager),u=s.dateProfileGenerator.build(l);Li(u.activeRange,l)||(l=u.currentRange.start);for(let m of r.pluginHooks.contextInit)m(a);let d=GF(r.calendarOptions,u,a),f={dynamicOptionOverrides:n,currentViewType:i,currentDate:l,dateProfile:u,businessHours:this.parseContextBusinessHours(a),eventSources:d,eventUiBases:{},eventStore:ur(),renderableEventStore:ur(),dateSelection:null,eventSelection:"",eventDrag:null,eventResize:null,selectionConfig:this.buildViewUiProps(a).selectionConfig},p=Object.assign(Object.assign({},a),f);for(let m of r.pluginHooks.reducers)Object.assign(f,m(null,null,p));Fp(f,a)&&this.emitter.trigger("loading",!0),this.state=f,this.updateData(),this.actionRunner.resume()}resetOptions(e,n){let{props:r}=this;n===void 0?r.optionOverrides=e:(r.optionOverrides=Object.assign(Object.assign({},r.optionOverrides||{}),e),this.optionsForRefining.push(...n)),(n===void 0||n.length)&&this.actionRunner.request({type:"NOTHING"})}_handleAction(e){let{props:n,state:r,emitter:i}=this,s=$F(r.dynamicOptionOverrides,e),a=this.computeOptionsData(n.optionOverrides,s,n.calendarApi),l=BF(r.currentViewType,e),u=this.computeCurrentViewData(l,a,n.optionOverrides,s);n.calendarApi.currentDataManager=this,i.setThisContext(n.calendarApi),i.setOptions(u.options);let d={nowManager:this.nowManager,dateEnv:a.dateEnv,options:a.calendarOptions,pluginHooks:a.pluginHooks,calendarApi:n.calendarApi,dispatch:this.dispatch,emitter:i,getCurrentData:this.getCurrentData},{currentDate:f,dateProfile:p}=r;this.data&&this.data.dateProfileGenerator!==u.dateProfileGenerator&&(p=u.dateProfileGenerator.build(f)),f=WF(f,e),p=qF(p,e,f,u.dateProfileGenerator),(e.type==="PREV"||e.type==="NEXT"||!Li(p.currentRange,f))&&(f=p.currentRange.start);let m=YF(r.eventSources,e,p,d),v=Y2(r.eventStore,e,m,p,d),_=yC(m)&&!u.options.progressiveEventRendering&&r.renderableEventStore||v,{eventUiSingleBase:w,selectionConfig:x}=this.buildViewUiProps(d),C=this.buildEventUiBySource(m),k=this.buildEventUiBases(_.defs,w,C),R={dynamicOptionOverrides:s,currentViewType:l,currentDate:f,dateProfile:p,eventSources:m,eventStore:v,renderableEventStore:_,selectionConfig:x,eventUiBases:k,businessHours:this.parseContextBusinessHours(d),dateSelection:tj(r.dateSelection,e),eventSelection:nj(r.eventSelection,e),eventDrag:rj(r.eventDrag,e),eventResize:ij(r.eventResize,e)},A=Object.assign(Object.assign({},d),R);for(let O of a.pluginHooks.reducers)Object.assign(R,O(r,e,A));let M=Fp(r,d),P=Fp(R,d);!M&&P?i.trigger("loading",!0):M&&!P&&i.trigger("loading",!1),this.state=R,n.onAction&&n.onAction(e)}updateData(){let{props:e,state:n}=this,r=this.data,i=this.computeOptionsData(e.optionOverrides,n.dynamicOptionOverrides,e.calendarApi),s=this.computeCurrentViewData(n.currentViewType,i,e.optionOverrides,n.dynamicOptionOverrides),a=this.data=Object.assign(Object.assign(Object.assign({nowManager:this.nowManager,viewTitle:this.buildTitle(n.dateProfile,s.options,i.dateEnv),calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},i),s),n),l=i.pluginHooks.optionChangeHandlers,u=r&&r.calendarOptions,d=i.calendarOptions;if(u&&u!==d){u.timeZone!==d.timeZone&&(n.eventSources=a.eventSources=QF(a.eventSources,n.dateProfile,a),n.eventStore=a.eventStore=P_(a.eventStore,r.dateEnv,a.dateEnv),n.renderableEventStore=a.renderableEventStore=P_(a.renderableEventStore,r.dateEnv,a.dateEnv));for(let f in l)(this.optionsForHandling.indexOf(f)!==-1||u[f]!==d[f])&&l[f](d[f],a)}this.optionsForHandling=[],e.onData&&e.onData(a)}computeOptionsData(e,n,r){if(!this.optionsForRefining.length&&e===this.stableOptionOverrides&&n===this.stableDynamicOptionOverrides)return this.stableCalendarOptionsData;let{refinedOptions:i,pluginHooks:s,localeDefaults:a,availableLocaleData:l,extra:u}=this.processRawCalendarOptions(e,n);q_(u);let d=this.buildDateEnv(i.timeZone,i.locale,i.weekNumberCalculation,i.firstDay,i.weekText,s,l,i.defaultRangeSeparator),f=this.buildViewSpecs(s.views,this.stableOptionOverrides,this.stableDynamicOptionOverrides,a),p=this.buildTheme(i,s),m=this.parseToolbars(i,this.stableOptionOverrides,p,f,r);return this.stableCalendarOptionsData={calendarOptions:i,pluginHooks:s,dateEnv:d,viewSpecs:f,theme:p,toolbarConfig:m,localeDefaults:a,availableRawLocales:l.map}}processRawCalendarOptions(e,n){let{locales:r,locale:i}=kp([El,e,n]),s=this.organizeRawLocales(r),a=s.map,l=this.buildLocale(i||s.defaultCode,a).options,u=this.buildPluginHooks(e.plugins||[],xj),d=this.currentCalendarOptionsRefiners=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},A_),R_),O_),u.listenerRefiners),u.optionRefiners),f={},p=kp([El,l,e,n]),m={},v=this.currentCalendarOptionsInput,b=this.currentCalendarOptionsRefined,_=!1;for(let w in p)this.optionsForRefining.indexOf(w)===-1&&(p[w]===v[w]||Qs[w]&&w in v&&Qs[w](v[w],p[w]))?m[w]=b[w]:d[w]?(m[w]=d[w](p[w]),_=!0):f[w]=v[w];return _&&(this.currentCalendarOptionsInput=p,this.currentCalendarOptionsRefined=m,this.stableOptionOverrides=e,this.stableDynamicOptionOverrides=n),this.optionsForHandling.push(...this.optionsForRefining),this.optionsForRefining=[],{rawOptions:this.currentCalendarOptionsInput,refinedOptions:this.currentCalendarOptionsRefined,pluginHooks:u,availableLocaleData:s,localeDefaults:l,extra:f}}_computeCurrentViewData(e,n,r,i){let s=n.viewSpecs[e];if(!s)throw new Error(`viewType "${e}" is not available. Please make sure you've loaded all neccessary plugins`);let{refinedOptions:a,extra:l}=this.processRawViewOptions(s,n.pluginHooks,n.localeDefaults,r,i);q_(l),this.nowManager.handleInput(n.dateEnv,a.now);let u=this.buildDateProfileGenerator({dateProfileGeneratorClass:s.optionDefaults.dateProfileGeneratorClass,nowManager:this.nowManager,duration:s.duration,durationUnit:s.durationUnit,usesMinMaxTime:s.optionDefaults.usesMinMaxTime,dateEnv:n.dateEnv,calendarApi:this.props.calendarApi,slotMinTime:a.slotMinTime,slotMaxTime:a.slotMaxTime,showNonCurrentDates:a.showNonCurrentDates,dayCount:a.dayCount,dateAlignment:a.dateAlignment,dateIncrement:a.dateIncrement,hiddenDays:a.hiddenDays,weekends:a.weekends,validRangeInput:a.validRange,visibleRangeInput:a.visibleRange,fixedWeekCount:a.fixedWeekCount}),d=this.buildViewApi(e,this.getCurrentData,n.dateEnv);return{viewSpec:s,options:a,dateProfileGenerator:u,viewApi:d}}processRawViewOptions(e,n,r,i,s){let a=kp([El,e.optionDefaults,r,i,e.optionOverrides,s]),l=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},A_),R_),O_),d2),n.listenerRefiners),n.optionRefiners),u={},d=this.currentViewOptionsInput,f=this.currentViewOptionsRefined,p=!1,m={};for(let v in a)a[v]===d[v]||Qs[v]&&Qs[v](a[v],d[v])?u[v]=f[v]:(a[v]===this.currentCalendarOptionsInput[v]||Qs[v]&&Qs[v](a[v],this.currentCalendarOptionsInput[v])?v in this.currentCalendarOptionsRefined&&(u[v]=this.currentCalendarOptionsRefined[v]):l[v]?u[v]=l[v](a[v]):m[v]=a[v],p=!0);return p&&(this.currentViewOptionsInput=a,this.currentViewOptionsRefined=u),{rawOptions:this.currentViewOptionsInput,refinedOptions:this.currentViewOptionsRefined,extra:m}}}function kj(t,e,n,r,i,s,a,l){let u=mC(e||a.defaultCode,a.map);return new w2({calendarSystem:"gregory",timeZone:t,namedTimeZoneImpl:s.namedTimeZonedImpl,locale:u,weekNumberCalculation:n,firstDay:r,weekText:i,cmdFormatter:s.cmdFormatter,defaultSeparator:l})}function Aj(t,e){let n=e.themeClasses[t.themeSystem]||As;return new n(t)}function Rj(t){let e=t.dateProfileGeneratorClass||OE;return new e(t)}function Oj(t,e,n){return new oj(t,e,n)}function Mj(t){return zi(t,e=>e.ui)}function Nj(t,e,n){let r={"":e};for(let i in t){let s=t[i];s.sourceId&&n[s.sourceId]&&(r[i]=n[s.sourceId])}return r}function Ij(t){let{options:e}=t;return{eventUiSingleBase:Dd({display:e.eventDisplay,editable:e.editable,startEditable:e.eventStartEditable,durationEditable:e.eventDurationEditable,constraint:e.eventConstraint,overlap:typeof e.eventOverlap=="boolean"?e.eventOverlap:void 0,allow:e.eventAllow,backgroundColor:e.eventBackgroundColor,borderColor:e.eventBorderColor,textColor:e.eventTextColor,color:e.eventColor},t),selectionConfig:Dd({constraint:e.selectConstraint,overlap:typeof e.selectOverlap=="boolean"?e.selectOverlap:void 0,allow:e.selectAllow},t)}}function Fp(t,e){for(let n of e.pluginHooks.isLoadingFuncs)if(n(t))return!0;return!1}function Pj(t){return rL(t.options.businessHours,t)}function q_(t,e){for(let n in t)console.warn(`Unknown option '${n}'`)}class Lj extends ot{render(){let e=this.props.widgetGroups.map(n=>this.renderWidgetGroup(n));return I("div",{className:"fc-toolbar-chunk"},...e)}renderWidgetGroup(e){let{props:n}=this,{theme:r}=this.context,i=[],s=!0;for(let a of e){let{buttonName:l,buttonClick:u,buttonText:d,buttonIcon:f,buttonHint:p}=a;if(l==="title")s=!1,i.push(I("h2",{className:"fc-toolbar-title",id:n.titleId},n.title));else{let m=l===n.activeButton,v=!n.isTodayEnabled&&l==="today"||!n.isPrevEnabled&&l==="prev"||!n.isNextEnabled&&l==="next",b=[`fc-${l}-button`,r.getClass("button")];m&&b.push(r.getClass("buttonActive")),i.push(I("button",{type:"button",title:typeof p=="function"?p(n.navUnit):p,disabled:v,"aria-pressed":m,className:b.join(" "),onClick:u},d||(f?I("span",{className:f,role:"img"}):"")))}}if(i.length>1){let a=s&&r.getClass("buttonGroup")||"";return I("div",{className:a},...i)}return i[0]}}class G_ extends ot{render(){let{model:e,extraClassName:n}=this.props,r=!1,i,s,a=e.sectionWidgets,l=a.center;return a.left?(r=!0,i=a.left):i=a.start,a.right?(r=!0,s=a.right):s=a.end,I("div",{className:[n||"","fc-toolbar",r?"fc-toolbar-ltr":""].join(" ")},this.renderSection("start",i||[]),this.renderSection("center",l||[]),this.renderSection("end",s||[]))}renderSection(e,n){let{props:r}=this;return I(Lj,{key:e,widgetGroups:n,title:r.title,navUnit:r.navUnit,activeButton:r.activeButton,isTodayEnabled:r.isTodayEnabled,isPrevEnabled:r.isPrevEnabled,isNextEnabled:r.isNextEnabled,titleId:r.titleId})}}class Fj extends ot{constructor(){super(...arguments),this.state={availableWidth:null},this.handleEl=e=>{this.el=e,li(this.props.elRef,e),this.updateAvailableWidth()},this.handleResize=()=>{this.updateAvailableWidth()}}render(){let{props:e,state:n}=this,{aspectRatio:r}=e,i=["fc-view-harness",r||e.liquid||e.height?"fc-view-harness-active":"fc-view-harness-passive"],s="",a="";return r?n.availableWidth!==null?s=n.availableWidth/r:a=`${1/r*100}%`:s=e.height||"",I("div",{"aria-labelledby":e.labeledById,ref:this.handleEl,className:i.join(" "),style:{height:s,paddingBottom:a}},e.children)}componentDidMount(){this.context.addResizeHandler(this.handleResize)}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}updateAvailableWidth(){this.el&&this.props.aspectRatio&&this.setState({availableWidth:this.el.offsetWidth})}}class jj extends xo{constructor(e){super(e),this.handleSegClick=(n,r)=>{let{component:i}=this,{context:s}=i,a=co(r);if(a&&i.isValidSegDownEl(n.target)){let l=kn(n.target,".fc-event-forced-url"),u=l?l.querySelector("a[href]").href:"";s.emitter.trigger("eventClick",{el:r,event:new At(i.context,a.eventRange.def,a.eventRange.instance),jsEvent:n,view:s.viewApi}),u&&!n.defaultPrevented&&(window.location.href=u)}},this.destroy=bE(e.el,"click",".fc-event",this.handleSegClick)}}class zj extends xo{constructor(e){super(e),this.handleEventElRemove=n=>{n===this.currentSegEl&&this.handleSegLeave(null,this.currentSegEl)},this.handleSegEnter=(n,r)=>{co(r)&&(this.currentSegEl=r,this.triggerEvent("eventMouseEnter",n,r))},this.handleSegLeave=(n,r)=>{this.currentSegEl&&(this.currentSegEl=null,this.triggerEvent("eventMouseLeave",n,r))},this.removeHoverListeners=vP(e.el,".fc-event",this.handleSegEnter,this.handleSegLeave)}destroy(){this.removeHoverListeners()}triggerEvent(e,n,r){let{component:i}=this,{context:s}=i,a=co(r);(!n||i.isValidSegDownEl(n.target))&&s.emitter.trigger(e,{el:r,event:new At(s,a.eventRange.def,a.eventRange.instance),jsEvent:n,view:s.viewApi})}}class Hj extends ba{constructor(){super(...arguments),this.buildViewContext=Ce(C2),this.buildViewPropTransformers=Ce(Bj),this.buildToolbarProps=Ce(Uj),this.headerRef=Fn(),this.footerRef=Fn(),this.interactionsStore={},this.state={viewLabelId:_s()},this.registerInteractiveComponent=(e,n)=>{let r=CL(e,n),a=[jj,zj].concat(this.props.pluginHooks.componentInteractions).map(l=>new l(r));this.interactionsStore[e.uid]=a,kg[e.uid]=r},this.unregisterInteractiveComponent=e=>{let n=this.interactionsStore[e.uid];if(n){for(let r of n)r.destroy();delete this.interactionsStore[e.uid]}delete kg[e.uid]},this.resizeRunner=new pm(()=>{this.props.emitter.trigger("_resize",!0),this.props.emitter.trigger("windowResize",{view:this.props.viewApi})}),this.handleWindowResize=e=>{let{options:n}=this.props;n.handleWindowResize&&e.target===window&&this.resizeRunner.request(n.windowResizeDelay)}}render(){let{props:e}=this,{toolbarConfig:n,options:r}=e,i=!1,s="",a;e.isHeightAuto||e.forPrint?s="":r.height!=null?i=!0:r.contentHeight!=null?s=r.contentHeight:a=Math.max(r.aspectRatio,.5);let l=this.buildViewContext(e.viewSpec,e.viewApi,e.options,e.dateProfileGenerator,e.dateEnv,e.nowManager,e.theme,e.pluginHooks,e.dispatch,e.getCurrentData,e.emitter,e.calendarApi,this.registerInteractiveComponent,this.unregisterInteractiveComponent),u=n.header&&n.header.hasTitle?this.state.viewLabelId:void 0;return I(Vi.Provider,{value:l},I(_a,{unit:"day"},d=>{let f=this.buildToolbarProps(e.viewSpec,e.dateProfile,e.dateProfileGenerator,e.currentDate,d,e.viewTitle);return I(vt,null,n.header&&I(G_,Object.assign({ref:this.headerRef,extraClassName:"fc-header-toolbar",model:n.header,titleId:u},f)),I(Fj,{liquid:i,height:s,aspectRatio:a,labeledById:u},this.renderView(e),this.buildAppendContent()),n.footer&&I(G_,Object.assign({ref:this.footerRef,extraClassName:"fc-footer-toolbar",model:n.footer,titleId:""},f)))}))}componentDidMount(){let{props:e}=this;this.calendarInteractions=e.pluginHooks.calendarInteractions.map(r=>new r(e)),window.addEventListener("resize",this.handleWindowResize);let{propSetHandlers:n}=e.pluginHooks;for(let r in n)n[r](e[r],e)}componentDidUpdate(e){let{props:n}=this,{propSetHandlers:r}=n.pluginHooks;for(let i in r)n[i]!==e[i]&&r[i](n[i],n)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),this.resizeRunner.clear();for(let e of this.calendarInteractions)e.destroy();this.props.emitter.trigger("_unmount")}buildAppendContent(){let{props:e}=this,n=e.pluginHooks.viewContainerAppends.map(r=>r(e));return I(vt,{},...n)}renderView(e){let{pluginHooks:n}=e,{viewSpec:r}=e,i={dateProfile:e.dateProfile,businessHours:e.businessHours,eventStore:e.renderableEventStore,eventUiBases:e.eventUiBases,dateSelection:e.dateSelection,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,isHeightAuto:e.isHeightAuto,forPrint:e.forPrint},s=this.buildViewPropTransformers(n.viewPropsTransformers);for(let l of s)Object.assign(i,l.transform(i,e));let a=r.component;return I(a,Object.assign({},i))}}function Uj(t,e,n,r,i,s){let a=n.build(i,void 0,!1),l=n.buildPrev(e,r,!1),u=n.buildNext(e,r,!1);return{title:s,activeButton:t.type,navUnit:t.singleUnit,isTodayEnabled:a.isValid&&!Li(e.currentRange,i),isPrevEnabled:l.isValid,isNextEnabled:u.isValid}}function Bj(t){return t.map(e=>new e)}class Wj extends DL{constructor(e,n={}){super(),this.isRendering=!1,this.isRendered=!1,this.currentClassNames=[],this.customContentRenderId=0,this.handleAction=r=>{switch(r.type){case"SET_EVENT_DRAG":case"SET_EVENT_RESIZE":this.renderRunner.tryDrain()}},this.handleData=r=>{this.currentData=r,this.renderRunner.request(r.calendarOptions.rerenderDelay)},this.handleRenderRequest=()=>{if(this.isRendering){this.isRendered=!0;let{currentData:r}=this;Cd(()=>{jl(I(EL,{options:r.calendarOptions,theme:r.theme,emitter:r.emitter},(i,s,a,l)=>(this.setClassNames(i),this.setHeight(s),I(kE.Provider,{value:this.customContentRenderId},I(Hj,Object.assign({isHeightAuto:a,forPrint:l},r))))),this.el)})}else this.isRendered&&(this.isRendered=!1,jl(null,this.el),this.setClassNames([]),this.setHeight(""))},lP(e),this.el=e,this.renderRunner=new pm(this.handleRenderRequest),new Dj({optionOverrides:n,calendarApi:this,onAction:this.handleAction,onData:this.handleData})}render(){let e=this.isRendering;e?this.customContentRenderId+=1:this.isRendering=!0,this.renderRunner.request(),e&&this.updateSize()}destroy(){this.isRendering&&(this.isRendering=!1,this.renderRunner.request())}updateSize(){Cd(()=>{super.updateSize()})}batchRendering(e){this.renderRunner.pause("batchRendering"),e(),this.renderRunner.resume("batchRendering")}pauseRendering(){this.renderRunner.pause("pauseRendering")}resumeRendering(){this.renderRunner.resume("pauseRendering",!0)}resetOptions(e,n){this.currentDataManager.resetOptions(e,n)}setClassNames(e){if(!xs(e,this.currentClassNames)){let{classList:n}=this.el;for(let r of this.currentClassNames)n.remove(r);for(let r of e)n.add(r);this.currentClassNames=e}}setHeight(e){vE(this.el,"height",e)}}const Vj=parseInt(String(Q.version).split(".")[0]),$j=Vj<18;class xC extends T.Component{constructor(){super(...arguments),this.elRef=T.createRef(),this.isUpdating=!1,this.isUnmounting=!1,this.state={customRenderingMap:new Map},this.requestResize=()=>{this.isUnmounting||(this.cancelResize(),this.resizeId=requestAnimationFrame(()=>{this.doResize()}))}}render(){const e=[];for(const n of this.state.customRenderingMap.values())e.push(Q.createElement(qj,{key:n.id,customRendering:n}));return Q.createElement("div",{ref:this.elRef},e)}componentDidMount(){this.isUnmounting=!1;const e=new DF;this.handleCustomRendering=e.handle.bind(e),this.calendar=new Wj(this.elRef.current,Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.calendar.render(),this.calendar.on("_beforeprint",()=>{Ti.flushSync(()=>{})});let n;e.subscribe(r=>{const i=Date.now(),s=!n;($j||s||this.isUpdating||this.isUnmounting||i-n<100?EC:Ti.flushSync)(()=>{this.setState({customRenderingMap:r},()=>{n=i,s?this.doResize():this.requestResize()})})})}componentDidUpdate(){this.isUpdating=!0,this.calendar.resetOptions(Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.isUpdating=!1}componentWillUnmount(){this.isUnmounting=!0,this.cancelResize(),this.calendar.destroy()}doResize(){this.calendar.updateSize()}cancelResize(){this.resizeId!==void 0&&(cancelAnimationFrame(this.resizeId),this.resizeId=void 0)}getApi(){return this.calendar}}xC.act=EC;class qj extends T.PureComponent{render(){const{customRendering:e}=this.props,{generatorMeta:n}=e,r=typeof n=="function"?n(e.renderProps):n;return Ti.createPortal(r,e.containerEl)}}function EC(t){t()}class Gj extends Vr{constructor(){super(...arguments),this.headerElRef=Fn()}renderSimpleLayout(e,n){let{props:r,context:i}=this,s=[],a=Ad(i.options);return e&&s.push({type:"header",key:"header",isSticky:a,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),s.push({type:"body",key:"body",liquid:!0,chunk:{content:n}}),I(zl,{elClasses:["fc-daygrid"],viewSpec:i.viewSpec},I(Hm,{liquid:!r.isHeightAuto&&!r.forPrint,collapsibleWidth:r.forPrint,cols:[],sections:s}))}renderHScrollLayout(e,n,r,i){let s=this.context.pluginHooks.scrollGridImpl;if(!s)throw new Error("No ScrollGrid implementation");let{props:a,context:l}=this,u=!a.forPrint&&Ad(l.options),d=!a.forPrint&&lC(l.options),f=[];return e&&f.push({type:"header",key:"header",isSticky:u,chunks:[{key:"main",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),f.push({type:"body",key:"body",liquid:!0,chunks:[{key:"main",content:n}]}),d&&f.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"main",content:Og}]}),I(zl,{elClasses:["fc-daygrid"],viewSpec:l.viewSpec},I(s,{liquid:!a.isHeightAuto&&!a.forPrint,forPrint:a.forPrint,collapsibleWidth:a.forPrint,colGroups:[{cols:[{span:r,minWidth:i}]}],sections:f}))}}function ad(t,e){let n=[];for(let r=0;r<e;r+=1)n[r]=[];for(let r of t)n[r.row].push(r);return n}function Pu(t,e){let n=[];for(let r=0;r<e;r+=1)n[r]=[];for(let r of t)n[r.firstCol].push(r);return n}function Y_(t,e){let n=[];if(t){for(let r=0;r<e;r+=1)n[r]={affectedInstances:t.affectedInstances,isEvent:t.isEvent,segs:[]};for(let r of t.segs)n[r.row].segs.push(r)}else for(let r=0;r<e;r+=1)n[r]=null;return n}const CC=Dt({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});function TC(t){let{display:e}=t.eventRange.ui;return e==="list-item"||e==="auto"&&!t.eventRange.def.allDay&&t.firstCol===t.lastCol&&t.isStart&&t.isEnd}class DC extends ot{render(){let{props:e}=this;return I(Um,Object.assign({},e,{elClasses:["fc-daygrid-event","fc-daygrid-block-event","fc-h-event"],defaultTimeFormat:CC,defaultDisplayEventEnd:e.defaultDisplayEventEnd,disableResizing:!e.seg.eventRange.def.allDay}))}}class kC extends ot{render(){let{props:e,context:n}=this,{options:r}=n,{seg:i}=e,s=r.eventTimeFormat||CC,a=Cl(i,s,n,!0,e.defaultDisplayEventEnd);return I(df,Object.assign({},e,{elTag:"a",elClasses:["fc-daygrid-event","fc-daygrid-dot-event"],elAttrs:Nm(e.seg,n),defaultGenerator:Yj,timeText:a,isResizing:!1,isDateSelecting:!1}))}}function Yj(t){return I(vt,null,I("div",{className:"fc-daygrid-event-dot",style:{borderColor:t.borderColor||t.backgroundColor}}),t.timeText&&I("div",{className:"fc-event-time"},t.timeText),I("div",{className:"fc-event-title"},t.event.title||I(vt,null,"")))}class Qj extends ot{constructor(){super(...arguments),this.compileSegs=Ce(Kj)}render(){let{props:e}=this,{allSegs:n,invisibleSegs:r}=this.compileSegs(e.singlePlacements);return I(fC,{elClasses:["fc-daygrid-more-link"],dateProfile:e.dateProfile,todayRange:e.todayRange,allDayDate:e.allDayDate,moreCnt:e.moreCnt,allSegs:n,hiddenSegs:r,alignmentElRef:e.alignmentElRef,alignGridTop:e.alignGridTop,extraDateSpan:e.extraDateSpan,popoverContent:()=>{let i=(e.eventDrag?e.eventDrag.affectedInstances:null)||(e.eventResize?e.eventResize.affectedInstances:null)||{};return I(vt,null,n.map(s=>{let a=s.eventRange.instance.instanceId;return I("div",{className:"fc-daygrid-event-harness",key:a,style:{visibility:i[a]?"hidden":""}},TC(s)?I(kC,Object.assign({seg:s,isDragging:!1,isSelected:a===e.eventSelection,defaultDisplayEventEnd:!1},Fi(s,e.todayRange))):I(DC,Object.assign({seg:s,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:a===e.eventSelection,defaultDisplayEventEnd:!1},Fi(s,e.todayRange))))}))}})}}function Kj(t){let e=[],n=[];for(let r of t)e.push(r.seg),r.isVisible||n.push(r.seg);return{allSegs:e,invisibleSegs:n}}const Zj=Dt({week:"narrow"});class Xj extends Vr{constructor(){super(...arguments),this.rootElRef=Fn(),this.state={dayNumberId:_s()},this.handleRootEl=e=>{li(this.rootElRef,e),li(this.props.elRef,e)}}render(){let{context:e,props:n,state:r,rootElRef:i}=this,{options:s,dateEnv:a}=e,{date:l,dateProfile:u}=n;const d=n.showDayNumber&&ez(l,u.currentRange,a);return I(Wm,{elTag:"td",elRef:this.handleRootEl,elClasses:["fc-daygrid-day",...n.extraClassNames||[]],elAttrs:Object.assign(Object.assign(Object.assign({},n.extraDataAttrs),n.showDayNumber?{"aria-labelledby":r.dayNumberId}:{}),{role:"gridcell"}),defaultGenerator:Jj,date:l,dateProfile:u,todayRange:n.todayRange,showDayNumber:n.showDayNumber,isMonthStart:d,extraRenderProps:n.extraRenderProps},(f,p)=>I("div",{ref:n.innerElRef,className:"fc-daygrid-day-frame fc-scrollgrid-sync-inner",style:{minHeight:n.minHeight}},n.showWeekNumber&&I(dC,{elTag:"a",elClasses:["fc-daygrid-week-number"],elAttrs:uo(e,l,"week"),date:l,defaultFormat:Zj}),!p.isDisabled&&(n.showDayNumber||Vm(s)||n.forceDayTop)?I("div",{className:"fc-daygrid-day-top"},I(f,{elTag:"a",elClasses:["fc-daygrid-day-number",d&&"fc-daygrid-month-start"],elAttrs:Object.assign(Object.assign({},uo(e,l)),{id:r.dayNumberId})})):n.showDayNumber?I("div",{className:"fc-daygrid-day-top",style:{visibility:"hidden"}},I("a",{className:"fc-daygrid-day-number"},"")):void 0,I("div",{className:"fc-daygrid-day-events",ref:n.fgContentElRef},n.fgContent,I("div",{className:"fc-daygrid-day-bottom",style:{marginTop:n.moreMarginTop}},I(Qj,{allDayDate:l,singlePlacements:n.singlePlacements,moreCnt:n.moreCnt,alignmentElRef:i,alignGridTop:!n.showDayNumber,extraDateSpan:n.extraDateSpan,dateProfile:n.dateProfile,eventSelection:n.eventSelection,eventDrag:n.eventDrag,eventResize:n.eventResize,todayRange:n.todayRange}))),I("div",{className:"fc-daygrid-day-bg"},n.bgContent)))}}function Jj(t){return t.dayNumberText||I(vt,null,"")}function ez(t,e,n){const{start:r,end:i}=e,s=Es(i,-1),a=n.getYear(r),l=n.getMonth(r),u=n.getYear(s),d=n.getMonth(s);return!(a===u&&l===d)&&(t.valueOf()===r.valueOf()||n.getDay(t)===1&&t.valueOf()<i.valueOf())}function AC(t){return t.eventRange.instance.instanceId+":"+t.firstCol}function RC(t){return AC(t)+":"+t.lastCol}function tz(t,e,n,r,i,s,a){let l=new iz(x=>{let C=t[x.index].eventRange.instance.instanceId+":"+x.span.start+":"+(x.span.end-1);return i[C]||1});l.allowReslicing=!0,l.strictOrder=r,e===!0||n===!0?(l.maxCoord=s,l.hiddenConsumes=!0):typeof e=="number"?l.maxStackCnt=e:typeof n=="number"&&(l.maxStackCnt=n,l.hiddenConsumes=!0);let u=[],d=[];for(let x=0;x<t.length;x+=1){let C=t[x],k=RC(C);i[k]!=null?u.push({index:x,span:{start:C.firstCol,end:C.lastCol+1}}):d.push(C)}let f=l.addSegs(u),p=l.toRects(),{singleColPlacements:m,multiColPlacements:v,leftoverMargins:b}=nz(p,t,a),_=[],w=[];for(let x of d){v[x.firstCol].push({seg:x,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let C=x.firstCol;C<=x.lastCol;C+=1)m[C].push({seg:io(x,C,C+1,a),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let x=0;x<a.length;x+=1)_.push(0);for(let x of f){let C=t[x.index],k=x.span;v[k.start].push({seg:io(C,k.start,k.end,a),isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let R=k.start;R<k.end;R+=1)_[R]+=1,m[R].push({seg:io(C,R,R+1,a),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let x=0;x<a.length;x+=1)w.push(b[x]);return{singleColPlacements:m,multiColPlacements:v,moreCnts:_,moreMarginTops:w}}function nz(t,e,n){let r=rz(t,n.length),i=[],s=[],a=[];for(let l=0;l<n.length;l+=1){let u=r[l],d=[],f=0,p=0;for(let v of u){let b=e[v.index];d.push({seg:io(b,l,l+1,n),isVisible:!0,isAbsolute:!1,absoluteTop:v.levelCoord,marginTop:v.levelCoord-f}),f=v.levelCoord+v.thickness}let m=[];f=0,p=0;for(let v of u){let b=e[v.index],_=v.span.end-v.span.start>1,w=v.span.start===l;p+=v.levelCoord-f,f=v.levelCoord+v.thickness,_?(p+=v.thickness,w&&m.push({seg:io(b,v.span.start,v.span.end,n),isVisible:!0,isAbsolute:!0,absoluteTop:v.levelCoord,marginTop:0})):w&&(m.push({seg:io(b,v.span.start,v.span.end,n),isVisible:!0,isAbsolute:!1,absoluteTop:v.levelCoord,marginTop:p}),p=0)}i.push(d),s.push(m),a.push(p)}return{singleColPlacements:i,multiColPlacements:s,leftoverMargins:a}}function rz(t,e){let n=[];for(let r=0;r<e;r+=1)n.push([]);for(let r of t)for(let i=r.span.start;i<r.span.end;i+=1)n[i].push(r);return n}function io(t,e,n,r){if(t.firstCol===e&&t.lastCol===n-1)return t;let i=t.eventRange,s=i.range,a=Cs(s,{start:r[e].date,end:Jt(r[n-1].date,1)});return Object.assign(Object.assign({},t),{firstCol:e,lastCol:n-1,eventRange:{def:i.def,ui:Object.assign(Object.assign({},i.ui),{durationEditable:!1}),instance:i.instance,range:a},isStart:t.isStart&&a.start.valueOf()===s.start.valueOf(),isEnd:t.isEnd&&a.end.valueOf()===s.end.valueOf()})}class iz extends KE{constructor(){super(...arguments),this.hiddenConsumes=!1,this.forceHidden={}}addSegs(e){const n=super.addSegs(e),{entriesByLevel:r}=this,i=s=>!this.forceHidden[aa(s)];for(let s=0;s<r.length;s+=1)r[s]=r[s].filter(i);return n}handleInvalidInsertion(e,n,r){const{entriesByLevel:i,forceHidden:s}=this,{touchingEntry:a,touchingLevel:l,touchingLateral:u}=e;if(this.hiddenConsumes&&a){const d=aa(a);if(!s[d])if(this.allowReslicing){const f=Object.assign(Object.assign({},a),{span:jm(a.span,n.span)}),p=aa(f);s[p]=!0,i[l][u]=f,r.push(f),this.splitEntry(a,n,r)}else s[d]=!0,r.push(a)}super.handleInvalidInsertion(e,n,r)}}class OC extends Vr{constructor(){super(...arguments),this.cellElRefs=new Oi,this.frameElRefs=new Oi,this.fgElRefs=new Oi,this.segHarnessRefs=new Oi,this.rootElRef=Fn(),this.state={framePositions:null,maxContentHeight:null,segHeights:{}},this.handleResize=e=>{e&&this.updateSizing(!0)}}render(){let{props:e,state:n,context:r}=this,{options:i}=r,s=e.cells.length,a=Pu(e.businessHourSegs,s),l=Pu(e.bgEventSegs,s),u=Pu(this.getHighlightSegs(),s),d=Pu(this.getMirrorSegs(),s),{singleColPlacements:f,multiColPlacements:p,moreCnts:m,moreMarginTops:v}=tz(Mm(e.fgEventSegs,i.eventOrder),e.dayMaxEvents,e.dayMaxEventRows,i.eventOrderStrict,n.segHeights,n.maxContentHeight,e.cells),b=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{};return I("tr",{ref:this.rootElRef,role:"row"},e.renderIntro&&e.renderIntro(),e.cells.map((_,w)=>{let x=this.renderFgSegs(w,e.forPrint?f[w]:p[w],e.todayRange,b),C=this.renderFgSegs(w,sz(d[w],p),e.todayRange,{},!!e.eventDrag,!!e.eventResize,!1);return I(Xj,{key:_.key,elRef:this.cellElRefs.createRef(_.key),innerElRef:this.frameElRefs.createRef(_.key),dateProfile:e.dateProfile,date:_.date,showDayNumber:e.showDayNumbers,showWeekNumber:e.showWeekNumbers&&w===0,forceDayTop:e.showWeekNumbers,todayRange:e.todayRange,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,extraRenderProps:_.extraRenderProps,extraDataAttrs:_.extraDataAttrs,extraClassNames:_.extraClassNames,extraDateSpan:_.extraDateSpan,moreCnt:m[w],moreMarginTop:v[w],singlePlacements:f[w],fgContentElRef:this.fgElRefs.createRef(_.key),fgContent:I(vt,null,I(vt,null,x),I(vt,null,C)),bgContent:I(vt,null,this.renderFillSegs(u[w],"highlight"),this.renderFillSegs(a[w],"non-business"),this.renderFillSegs(l[w],"bg-event")),minHeight:e.cellMinHeight})}))}componentDidMount(){this.updateSizing(!0),this.context.addResizeHandler(this.handleResize)}componentDidUpdate(e,n){let r=this.props;this.updateSizing(!Ur(e,r))}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}getHighlightSegs(){let{props:e}=this;return e.eventDrag&&e.eventDrag.segs.length?e.eventDrag.segs:e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:e.dateSelectionSegs}getMirrorSegs(){let{props:e}=this;return e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:[]}renderFgSegs(e,n,r,i,s,a,l){let{context:u}=this,{eventSelection:d}=this.props,{framePositions:f}=this.state,p=this.props.cells.length===1,m=s||a||l,v=[];if(f)for(let b of n){let{seg:_}=b,{instanceId:w}=_.eventRange.instance,x=b.isVisible&&!i[w],C=b.isAbsolute,k="",R="";C&&(u.isRtl?(R=0,k=f.lefts[_.lastCol]-f.lefts[_.firstCol]):(k=0,R=f.rights[_.firstCol]-f.rights[_.lastCol])),v.push(I("div",{className:"fc-daygrid-event-harness"+(C?" fc-daygrid-event-harness-abs":""),key:AC(_),ref:m?null:this.segHarnessRefs.createRef(RC(_)),style:{visibility:x?"":"hidden",marginTop:C?"":b.marginTop,top:C?b.absoluteTop:"",left:k,right:R}},TC(_)?I(kC,Object.assign({seg:_,isDragging:s,isSelected:w===d,defaultDisplayEventEnd:p},Fi(_,r))):I(DC,Object.assign({seg:_,isDragging:s,isResizing:a,isDateSelecting:l,isSelected:w===d,defaultDisplayEventEnd:p},Fi(_,r)))))}return v}renderFillSegs(e,n){let{isRtl:r}=this.context,{todayRange:i}=this.props,{framePositions:s}=this.state,a=[];if(s)for(let l of e){let u=r?{right:0,left:s.lefts[l.lastCol]-s.lefts[l.firstCol]}:{left:0,right:s.rights[l.firstCol]-s.rights[l.lastCol]};a.push(I("div",{key:WE(l.eventRange),className:"fc-daygrid-bg-harness",style:u},n==="bg-event"?I(cC,Object.assign({seg:l},Fi(l,i))):uC(n)))}return I(vt,{},...a)}updateSizing(e){let{props:n,state:r,frameElRefs:i}=this;if(!n.forPrint&&n.clientWidth!==null){if(e){let u=n.cells.map(d=>i.currentMap[d.key]);if(u.length){let d=this.rootElRef.current,f=new fo(d,u,!0,!1);(!r.framePositions||!r.framePositions.similarTo(f))&&this.setState({framePositions:new fo(d,u,!0,!1)})}}const s=this.state.segHeights,a=this.querySegHeights(),l=n.dayMaxEvents===!0||n.dayMaxEventRows===!0;this.safeSetState({segHeights:Object.assign(Object.assign({},s),a),maxContentHeight:l?this.computeMaxContentHeight():null})}}querySegHeights(){let e=this.segHarnessRefs.currentMap,n={};for(let r in e){let i=Math.round(e[r].getBoundingClientRect().height);n[r]=Math.max(n[r]||0,i)}return n}computeMaxContentHeight(){let e=this.props.cells[0].key,n=this.cellElRefs.currentMap[e],r=this.fgElRefs.currentMap[e];return n.getBoundingClientRect().bottom-r.getBoundingClientRect().top}getCellEls(){let e=this.cellElRefs.currentMap;return this.props.cells.map(n=>e[n.key])}}OC.addStateEquality({segHeights:Ur});function sz(t,e){if(!t.length)return[];let n=az(e);return t.map(r=>({seg:r,isVisible:!0,isAbsolute:!0,absoluteTop:n[r.eventRange.instance.instanceId],marginTop:0}))}function az(t){let e={};for(let n of t)for(let r of n)e[r.seg.eventRange.instance.instanceId]=r.absoluteTop;return e}class oz extends Vr{constructor(){super(...arguments),this.splitBusinessHourSegs=Ce(ad),this.splitBgEventSegs=Ce(lz),this.splitFgEventSegs=Ce(ad),this.splitDateSelectionSegs=Ce(ad),this.splitEventDrag=Ce(Y_),this.splitEventResize=Ce(Y_),this.rowRefs=new Oi}render(){let{props:e,context:n}=this,r=e.cells.length,i=this.splitBusinessHourSegs(e.businessHourSegs,r),s=this.splitBgEventSegs(e.bgEventSegs,r),a=this.splitFgEventSegs(e.fgEventSegs,r),l=this.splitDateSelectionSegs(e.dateSelectionSegs,r),u=this.splitEventDrag(e.eventDrag,r),d=this.splitEventResize(e.eventResize,r),f=r>=7&&e.clientWidth?e.clientWidth/n.options.aspectRatio/6:null;return I(_a,{unit:"day"},(p,m)=>I(vt,null,e.cells.map((v,b)=>I(OC,{ref:this.rowRefs.createRef(b),key:v.length?v[0].date.toISOString():b,showDayNumbers:r>1,showWeekNumbers:e.showWeekNumbers,todayRange:m,dateProfile:e.dateProfile,cells:v,renderIntro:e.renderRowIntro,businessHourSegs:i[b],eventSelection:e.eventSelection,bgEventSegs:s[b],fgEventSegs:a[b],dateSelectionSegs:l[b],eventDrag:u[b],eventResize:d[b],dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,clientWidth:e.clientWidth,clientHeight:e.clientHeight,cellMinHeight:f,forPrint:e.forPrint}))))}componentDidMount(){this.registerInteractiveComponent()}componentDidUpdate(){this.registerInteractiveComponent()}registerInteractiveComponent(){if(!this.rootEl){const e=this.rowRefs.currentMap[0].getCellEls()[0],n=e?e.closest(".fc-daygrid-body"):null;n&&(this.rootEl=n,this.context.registerInteractiveComponent(this,{el:n,isHitComboAllowed:this.props.isHitComboAllowed}))}}componentWillUnmount(){this.rootEl&&(this.context.unregisterInteractiveComponent(this),this.rootEl=null)}prepareHits(){this.rowPositions=new fo(this.rootEl,this.rowRefs.collect().map(e=>e.getCellEls()[0]),!1,!0),this.colPositions=new fo(this.rootEl,this.rowRefs.currentMap[0].getCellEls(),!0,!1)}queryHit(e,n){let{colPositions:r,rowPositions:i}=this,s=r.leftToIndex(e),a=i.topToIndex(n);if(a!=null&&s!=null){let l=this.props.cells[a][s];return{dateProfile:this.props.dateProfile,dateSpan:Object.assign({range:this.getCellRange(a,s),allDay:!0},l.extraDateSpan),dayEl:this.getCellEl(a,s),rect:{left:r.lefts[s],right:r.rights[s],top:i.tops[a],bottom:i.bottoms[a]},layer:0}}return null}getCellEl(e,n){return this.rowRefs.currentMap[e].getCellEls()[n]}getCellRange(e,n){let r=this.props.cells[e][n].date,i=Jt(r,1);return{start:r,end:i}}}function lz(t,e){return ad(t.filter(cz),e)}function cz(t){return t.eventRange.def.allDay}class uz extends Vr{constructor(){super(...arguments),this.elRef=Fn(),this.needsScrollReset=!1}render(){let{props:e}=this,{dayMaxEventRows:n,dayMaxEvents:r,expandRows:i}=e,s=r===!0||n===!0;s&&!i&&(s=!1,n=null,r=null);let a=["fc-daygrid-body",s?"fc-daygrid-body-balanced":"fc-daygrid-body-unbalanced",i?"":"fc-daygrid-body-natural"];return I("div",{ref:this.elRef,className:a.join(" "),style:{width:e.clientWidth,minWidth:e.tableMinWidth}},I("table",{role:"presentation",className:"fc-scrollgrid-sync-table",style:{width:e.clientWidth,minWidth:e.tableMinWidth,height:i?e.clientHeight:""}},e.colGroupNode,I("tbody",{role:"presentation"},I(oz,{dateProfile:e.dateProfile,cells:e.cells,renderRowIntro:e.renderRowIntro,showWeekNumbers:e.showWeekNumbers,clientWidth:e.clientWidth,clientHeight:e.clientHeight,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,dayMaxEvents:r,dayMaxEventRows:n,forPrint:e.forPrint,isHitComboAllowed:e.isHitComboAllowed}))))}componentDidMount(){this.requestScrollReset()}componentDidUpdate(e){e.dateProfile!==this.props.dateProfile?this.requestScrollReset():this.flushScrollReset()}requestScrollReset(){this.needsScrollReset=!0,this.flushScrollReset()}flushScrollReset(){if(this.needsScrollReset&&this.props.clientWidth){const e=dz(this.elRef.current,this.props.dateProfile);if(e){const n=e.closest(".fc-daygrid-body"),r=n.closest(".fc-scroller"),i=e.getBoundingClientRect().top-n.getBoundingClientRect().top;r.scrollTop=i?i+1:0}this.needsScrollReset=!1}}}function dz(t,e){let n;return e.currentRangeUnit.match(/year|month/)&&(n=t.querySelector(`[data-date="${YP(e.currentDate)}-01"]`)),n||(n=t.querySelector(`[data-date="${rc(e.currentDate)}"]`)),n}class fz extends nC{constructor(){super(...arguments),this.forceDayIfListItem=!0}sliceRange(e,n){return n.sliceRange(e)}}class MC extends Vr{constructor(){super(...arguments),this.slicer=new fz,this.tableRef=Fn()}render(){let{props:e,context:n}=this;return I(uz,Object.assign({ref:this.tableRef},this.slicer.sliceProps(e,e.dateProfile,e.nextDayThreshold,n,e.dayTableModel),{dateProfile:e.dateProfile,cells:e.dayTableModel.cells,colGroupNode:e.colGroupNode,tableMinWidth:e.tableMinWidth,renderRowIntro:e.renderRowIntro,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.showWeekNumbers,expandRows:e.expandRows,headerAlignElRef:e.headerAlignElRef,clientWidth:e.clientWidth,clientHeight:e.clientHeight,forPrint:e.forPrint}))}}class hz extends Gj{constructor(){super(...arguments),this.buildDayTableModel=Ce(pz),this.headerRef=Fn(),this.tableRef=Fn()}render(){let{options:e,dateProfileGenerator:n}=this.context,{props:r}=this,i=this.buildDayTableModel(r.dateProfile,n),s=e.dayHeaders&&I(JE,{ref:this.headerRef,dateProfile:r.dateProfile,dates:i.headerDates,datesRepDistinctDays:i.rowCnt===1}),a=l=>I(MC,{ref:this.tableRef,dateProfile:r.dateProfile,dayTableModel:i,businessHours:r.businessHours,dateSelection:r.dateSelection,eventStore:r.eventStore,eventUiBases:r.eventUiBases,eventSelection:r.eventSelection,eventDrag:r.eventDrag,eventResize:r.eventResize,nextDayThreshold:e.nextDayThreshold,colGroupNode:l.tableColGroupNode,tableMinWidth:l.tableMinWidth,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.weekNumbers,expandRows:!r.isHeightAuto,headerAlignElRef:this.headerElRef,clientWidth:l.clientWidth,clientHeight:l.clientHeight,forPrint:r.forPrint});return e.dayMinWidth?this.renderHScrollLayout(s,a,i.colCnt,e.dayMinWidth):this.renderSimpleLayout(s,a)}}function pz(t,e){let n=new eC(t.renderRange,e);return new tC(n,/year|month|week/.test(t.currentRangeUnit))}class gz extends OE{buildRenderRange(e,n,r){let i=super.buildRenderRange(e,n,r),{props:s}=this;return mz({currentRange:i,snapToWeek:/^(year|month)$/.test(n),fixedWeekCount:s.fixedWeekCount,dateEnv:s.dateEnv})}}function mz(t){let{dateEnv:e,currentRange:n}=t,{start:r,end:i}=n,s;if(t.snapToWeek&&(r=e.startOfWeek(r),s=e.startOfWeek(i),s.valueOf()!==i.valueOf()&&(i=E_(s,1))),t.fixedWeekCount){let a=e.startOfWeek(e.startOfMonth(Jt(n.end,-1))),l=Math.ceil(FP(a,i));i=E_(i,6-l)}return{start:r,end:i}}var vz=':root{--fc-daygrid-event-dot-width:8px}.fc-daygrid-day-events:after,.fc-daygrid-day-events:before,.fc-daygrid-day-frame:after,.fc-daygrid-day-frame:before,.fc-daygrid-event-harness:after,.fc-daygrid-event-harness:before{clear:both;content:"";display:table}.fc .fc-daygrid-body{position:relative;z-index:1}.fc .fc-daygrid-day.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-daygrid-day-frame{min-height:100%;position:relative}.fc .fc-daygrid-day-top{display:flex;flex-direction:row-reverse}.fc .fc-day-other .fc-daygrid-day-top{opacity:.3}.fc .fc-daygrid-day-number{padding:4px;position:relative;z-index:4}.fc .fc-daygrid-month-start{font-size:1.1em;font-weight:700}.fc .fc-daygrid-day-events{margin-top:1px}.fc .fc-daygrid-body-balanced .fc-daygrid-day-events{left:0;position:absolute;right:0}.fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events{min-height:2em;position:relative}.fc .fc-daygrid-body-natural .fc-daygrid-day-events{margin-bottom:1em}.fc .fc-daygrid-event-harness{position:relative}.fc .fc-daygrid-event-harness-abs{left:0;position:absolute;right:0;top:0}.fc .fc-daygrid-bg-harness{bottom:0;position:absolute;top:0}.fc .fc-daygrid-day-bg .fc-non-business{z-index:1}.fc .fc-daygrid-day-bg .fc-bg-event{z-index:2}.fc .fc-daygrid-day-bg .fc-highlight{z-index:3}.fc .fc-daygrid-event{margin-top:1px;z-index:6}.fc .fc-daygrid-event.fc-event-mirror{z-index:7}.fc .fc-daygrid-day-bottom{font-size:.85em;margin:0 2px}.fc .fc-daygrid-day-bottom:after,.fc .fc-daygrid-day-bottom:before{clear:both;content:"";display:table}.fc .fc-daygrid-more-link{border-radius:3px;cursor:pointer;line-height:1;margin-top:1px;max-width:100%;overflow:hidden;padding:2px;position:relative;white-space:nowrap;z-index:4}.fc .fc-daygrid-more-link:hover{background-color:rgba(0,0,0,.1)}.fc .fc-daygrid-week-number{background-color:var(--fc-neutral-bg-color);color:var(--fc-neutral-text-color);min-width:1.5em;padding:2px;position:absolute;text-align:center;top:0;z-index:5}.fc .fc-more-popover .fc-popover-body{min-width:220px;padding:10px}.fc-direction-ltr .fc-daygrid-event.fc-event-start,.fc-direction-rtl .fc-daygrid-event.fc-event-end{margin-left:2px}.fc-direction-ltr .fc-daygrid-event.fc-event-end,.fc-direction-rtl .fc-daygrid-event.fc-event-start{margin-right:2px}.fc-direction-ltr .fc-daygrid-more-link{float:left}.fc-direction-ltr .fc-daygrid-week-number{border-radius:0 0 3px 0;left:0}.fc-direction-rtl .fc-daygrid-more-link{float:right}.fc-direction-rtl .fc-daygrid-week-number{border-radius:0 0 0 3px;right:0}.fc-liquid-hack .fc-daygrid-day-frame{position:static}.fc-daygrid-event{border-radius:3px;font-size:var(--fc-small-font-size);position:relative;white-space:nowrap}.fc-daygrid-block-event .fc-event-time{font-weight:700}.fc-daygrid-block-event .fc-event-time,.fc-daygrid-block-event .fc-event-title{padding:1px}.fc-daygrid-dot-event{align-items:center;display:flex;padding:2px 0}.fc-daygrid-dot-event .fc-event-title{flex-grow:1;flex-shrink:1;font-weight:700;min-width:0;overflow:hidden}.fc-daygrid-dot-event.fc-event-mirror,.fc-daygrid-dot-event:hover{background:rgba(0,0,0,.1)}.fc-daygrid-dot-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-daygrid-event-dot{border:calc(var(--fc-daygrid-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-daygrid-event-dot-width)/2);box-sizing:content-box;height:0;margin:0 4px;width:0}.fc-direction-ltr .fc-daygrid-event .fc-event-time{margin-right:3px}.fc-direction-rtl .fc-daygrid-event .fc-event-time{margin-left:3px}';sf(vz);var yz=ui({name:"@fullcalendar/daygrid",initialView:"dayGridMonth",views:{dayGrid:{component:hz,dateProfileGeneratorClass:gz},dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},fixedWeekCount:!0},dayGridYear:{type:"dayGrid",duration:{years:1}}}});class bz extends ML{getKeyInfo(){return{allDay:{},timed:{}}}getKeysForDateSpan(e){return e.allDay?["allDay"]:["timed"]}getKeysForEventDef(e){return e.allDay?lL(e)?["timed","allDay"]:["allDay"]:["timed"]}}const _z=Dt({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"short"});function NC(t){let e=["fc-timegrid-slot","fc-timegrid-slot-label",t.isLabeled?"fc-scrollgrid-shrink":"fc-timegrid-slot-minor"];return I(Vi.Consumer,null,n=>{if(!t.isLabeled)return I("td",{className:e.join(" "),"data-time":t.isoTimeStr});let{dateEnv:r,options:i,viewApi:s}=n,a=i.slotLabelFormat==null?_z:Array.isArray(i.slotLabelFormat)?Dt(i.slotLabelFormat[0]):Dt(i.slotLabelFormat),l={level:0,time:t.time,date:r.toDate(t.date),view:s,text:r.format(t.date,a)};return I(On,{elTag:"td",elClasses:e,elAttrs:{"data-time":t.isoTimeStr},renderProps:l,generatorName:"slotLabelContent",customGenerator:i.slotLabelContent,defaultGenerator:Sz,classNameGenerator:i.slotLabelClassNames,didMount:i.slotLabelDidMount,willUnmount:i.slotLabelWillUnmount},u=>I("div",{className:"fc-timegrid-slot-label-frame fc-scrollgrid-shrink-frame"},I(u,{elTag:"div",elClasses:["fc-timegrid-slot-label-cushion","fc-scrollgrid-shrink-cushion"]})))})}function Sz(t){return t.text}class wz extends ot{render(){return this.props.slatMetas.map(e=>I("tr",{key:e.key},I(NC,Object.assign({},e))))}}const xz=Dt({week:"short"}),Ez=5;class Cz extends Vr{constructor(){super(...arguments),this.allDaySplitter=new bz,this.headerElRef=Fn(),this.rootElRef=Fn(),this.scrollerElRef=Fn(),this.state={slatCoords:null},this.handleScrollTopRequest=e=>{let n=this.scrollerElRef.current;n&&(n.scrollTop=e)},this.renderHeadAxis=(e,n="")=>{let{options:r}=this.context,{dateProfile:i}=this.props,s=i.renderRange,l=ks(s.start,s.end)===1?uo(this.context,s.start,"week"):{};return r.weekNumbers&&e==="day"?I(dC,{elTag:"th",elClasses:["fc-timegrid-axis","fc-scrollgrid-shrink"],elAttrs:{"aria-hidden":!0},date:s.start,defaultFormat:xz},u=>I("div",{className:["fc-timegrid-axis-frame","fc-scrollgrid-shrink-frame","fc-timegrid-axis-frame-liquid"].join(" "),style:{height:n}},I(u,{elTag:"a",elClasses:["fc-timegrid-axis-cushion","fc-scrollgrid-shrink-cushion","fc-scrollgrid-sync-inner"],elAttrs:l}))):I("th",{"aria-hidden":!0,className:"fc-timegrid-axis"},I("div",{className:"fc-timegrid-axis-frame",style:{height:n}}))},this.renderTableRowAxis=e=>{let{options:n,viewApi:r}=this.context,i={text:n.allDayText,view:r};return I(On,{elTag:"td",elClasses:["fc-timegrid-axis","fc-scrollgrid-shrink"],elAttrs:{"aria-hidden":!0},renderProps:i,generatorName:"allDayContent",customGenerator:n.allDayContent,defaultGenerator:Tz,classNameGenerator:n.allDayClassNames,didMount:n.allDayDidMount,willUnmount:n.allDayWillUnmount},s=>I("div",{className:["fc-timegrid-axis-frame","fc-scrollgrid-shrink-frame",e==null?" fc-timegrid-axis-frame-liquid":""].join(" "),style:{height:e}},I(s,{elTag:"span",elClasses:["fc-timegrid-axis-cushion","fc-scrollgrid-shrink-cushion","fc-scrollgrid-sync-inner"]})))},this.handleSlatCoords=e=>{this.setState({slatCoords:e})}}renderSimpleLayout(e,n,r){let{context:i,props:s}=this,a=[],l=Ad(i.options);return e&&a.push({type:"header",key:"header",isSticky:l,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),n&&(a.push({type:"body",key:"all-day",chunk:{content:n}}),a.push({type:"body",key:"all-day-divider",outerContent:I("tr",{role:"presentation",className:"fc-scrollgrid-section"},I("td",{className:"fc-timegrid-divider "+i.theme.getClass("tableCellShaded")}))})),a.push({type:"body",key:"body",liquid:!0,expandRows:!!i.options.expandRows,chunk:{scrollerElRef:this.scrollerElRef,content:r}}),I(zl,{elRef:this.rootElRef,elClasses:["fc-timegrid"],viewSpec:i.viewSpec},I(Hm,{liquid:!s.isHeightAuto&&!s.forPrint,collapsibleWidth:s.forPrint,cols:[{width:"shrink"}],sections:a}))}renderHScrollLayout(e,n,r,i,s,a,l){let u=this.context.pluginHooks.scrollGridImpl;if(!u)throw new Error("No ScrollGrid implementation");let{context:d,props:f}=this,p=!f.forPrint&&Ad(d.options),m=!f.forPrint&&lC(d.options),v=[];e&&v.push({type:"header",key:"header",isSticky:p,syncRowHeights:!0,chunks:[{key:"axis",rowContent:_=>I("tr",{role:"presentation"},this.renderHeadAxis("day",_.rowSyncHeights[0]))},{key:"cols",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),n&&(v.push({type:"body",key:"all-day",syncRowHeights:!0,chunks:[{key:"axis",rowContent:_=>I("tr",{role:"presentation"},this.renderTableRowAxis(_.rowSyncHeights[0]))},{key:"cols",content:n}]}),v.push({key:"all-day-divider",type:"body",outerContent:I("tr",{role:"presentation",className:"fc-scrollgrid-section"},I("td",{colSpan:2,className:"fc-timegrid-divider "+d.theme.getClass("tableCellShaded")}))}));let b=d.options.nowIndicator;return v.push({type:"body",key:"body",liquid:!0,expandRows:!!d.options.expandRows,chunks:[{key:"axis",content:_=>I("div",{className:"fc-timegrid-axis-chunk"},I("table",{"aria-hidden":!0,style:{height:_.expandRows?_.clientHeight:""}},_.tableColGroupNode,I("tbody",null,I(wz,{slatMetas:a}))),I("div",{className:"fc-timegrid-now-indicator-container"},I(_a,{unit:b?"minute":"day"},w=>{let x=b&&l&&l.safeComputeTop(w);return typeof x=="number"?I(Bm,{elClasses:["fc-timegrid-now-indicator-arrow"],elStyle:{top:x},isAxis:!0,date:w}):null})))},{key:"cols",scrollerElRef:this.scrollerElRef,content:r}]}),m&&v.push({key:"footer",type:"footer",isSticky:!0,chunks:[{key:"axis",content:Og},{key:"cols",content:Og}]}),I(zl,{elRef:this.rootElRef,elClasses:["fc-timegrid"],viewSpec:d.viewSpec},I(u,{liquid:!f.isHeightAuto&&!f.forPrint,forPrint:f.forPrint,collapsibleWidth:!1,colGroups:[{width:"shrink",cols:[{width:"shrink"}]},{cols:[{span:i,minWidth:s}]}],sections:v}))}getAllDayMaxEventProps(){let{dayMaxEvents:e,dayMaxEventRows:n}=this.context.options;return(e===!0||n===!0)&&(e=void 0,n=Ez),{dayMaxEvents:e,dayMaxEventRows:n}}}function Tz(t){return t.text}class Dz{constructor(e,n,r){this.positions=e,this.dateProfile=n,this.slotDuration=r}safeComputeTop(e){let{dateProfile:n}=this;if(Li(n.currentRange,e)){let r=bt(e),i=e.valueOf()-r.valueOf();if(i>=zr(n.slotMinTime)&&i<zr(n.slotMaxTime))return this.computeTimeTop(Qe(i))}return null}computeDateTop(e,n){return n||(n=bt(e)),this.computeTimeTop(Qe(e.valueOf()-n.valueOf()))}computeTimeTop(e){let{positions:n,dateProfile:r}=this,i=n.els.length,s=(e.milliseconds-zr(r.slotMinTime))/zr(this.slotDuration),a,l;return s=Math.max(0,s),s=Math.min(i,s),a=Math.floor(s),a=Math.min(a,i-1),l=s-a,n.tops[a]+n.getHeight(a)*l}}class kz extends ot{render(){let{props:e,context:n}=this,{options:r}=n,{slatElRefs:i}=e;return I("tbody",null,e.slatMetas.map((s,a)=>{let l={time:s.time,date:n.dateEnv.toDate(s.date),view:n.viewApi};return I("tr",{key:s.key,ref:i.createRef(s.key)},e.axis&&I(NC,Object.assign({},s)),I(On,{elTag:"td",elClasses:["fc-timegrid-slot","fc-timegrid-slot-lane",!s.isLabeled&&"fc-timegrid-slot-minor"],elAttrs:{"data-time":s.isoTimeStr},renderProps:l,generatorName:"slotLaneContent",customGenerator:r.slotLaneContent,classNameGenerator:r.slotLaneClassNames,didMount:r.slotLaneDidMount,willUnmount:r.slotLaneWillUnmount}))}))}}class Az extends ot{constructor(){super(...arguments),this.rootElRef=Fn(),this.slatElRefs=new Oi}render(){let{props:e,context:n}=this;return I("div",{ref:this.rootElRef,className:"fc-timegrid-slots"},I("table",{"aria-hidden":!0,className:n.theme.getClass("table"),style:{minWidth:e.tableMinWidth,width:e.clientWidth,height:e.minHeight}},e.tableColGroupNode,I(kz,{slatElRefs:this.slatElRefs,axis:e.axis,slatMetas:e.slatMetas})))}componentDidMount(){this.updateSizing()}componentDidUpdate(){this.updateSizing()}componentWillUnmount(){this.props.onCoords&&this.props.onCoords(null)}updateSizing(){let{context:e,props:n}=this;n.onCoords&&n.clientWidth!==null&&this.rootElRef.current.offsetHeight&&n.onCoords(new Dz(new fo(this.rootElRef.current,Rz(this.slatElRefs.currentMap,n.slatMetas),!1,!0),this.props.dateProfile,e.options.slotDuration))}}function Rz(t,e){return e.map(n=>t[n.key])}function dl(t,e){let n=[],r;for(r=0;r<e;r+=1)n.push([]);if(t)for(r=0;r<t.length;r+=1)n[t[r].col].push(t[r]);return n}function Q_(t,e){let n=[];if(t){for(let r=0;r<e;r+=1)n[r]={affectedInstances:t.affectedInstances,isEvent:t.isEvent,segs:[]};for(let r of t.segs)n[r.col].segs.push(r)}else for(let r=0;r<e;r+=1)n[r]=null;return n}class Oz extends ot{render(){let{props:e}=this;return I(fC,{elClasses:["fc-timegrid-more-link"],elStyle:{top:e.top,bottom:e.bottom},allDayDate:null,moreCnt:e.hiddenSegs.length,allSegs:e.hiddenSegs,hiddenSegs:e.hiddenSegs,extraDateSpan:e.extraDateSpan,dateProfile:e.dateProfile,todayRange:e.todayRange,popoverContent:()=>PC(e.hiddenSegs,e),defaultGenerator:Mz,forceTimed:!0},n=>I(n,{elTag:"div",elClasses:["fc-timegrid-more-link-inner","fc-sticky"]}))}}function Mz(t){return t.shortText}function Nz(t,e,n){let r=new KE;e!=null&&(r.strictOrder=e),n!=null&&(r.maxStackCnt=n);let i=r.addSegs(t),s=$L(i),a=Iz(r);return a=jz(a,1),{segRects:zz(a),hiddenGroups:s}}function Iz(t){const{entriesByLevel:e}=t,n=qm((r,i)=>r+":"+i,(r,i)=>{let s=Fz(t,r,i),a=K_(s,n),l=e[r][i];return[Object.assign(Object.assign({},l),{nextLevelNodes:a[0]}),l.thickness+a[1]]});return K_(e.length?{level:0,lateralStart:0,lateralEnd:e[0].length}:null,n)[0]}function K_(t,e){if(!t)return[[],0];let{level:n,lateralStart:r,lateralEnd:i}=t,s=r,a=[];for(;s<i;)a.push(e(n,s)),s+=1;return a.sort(Pz),[a.map(Lz),a[0][1]]}function Pz(t,e){return e[1]-t[1]}function Lz(t){return t[0]}function Fz(t,e,n){let{levelCoords:r,entriesByLevel:i}=t,s=i[e][n],a=r[e]+s.thickness,l=r.length,u=e;for(;u<l&&r[u]<a;u+=1);for(;u<l;u+=1){let d=i[u],f,p=Rg(d,s.span.start,Ag),m=p[0]+p[1],v=m;for(;(f=d[v])&&f.span.start<s.span.end;)v+=1;if(m<v)return{level:u,lateralStart:m,lateralEnd:v}}return null}function jz(t,e){const n=qm((r,i,s)=>aa(r),(r,i,s)=>{let{nextLevelNodes:a,thickness:l}=r,u=l+s,d=l/u,f,p=[];if(!a.length)f=e;else for(let v of a)if(f===void 0){let b=n(v,i,u);f=b[0],p.push(b[1])}else{let b=n(v,f,0);p.push(b[1])}let m=(f-i)*d;return[f-m,Object.assign(Object.assign({},r),{thickness:m,nextLevelNodes:p})]});return t.map(r=>n(r,0,0)[1])}function zz(t){let e=[];const n=qm((i,s,a)=>aa(i),(i,s,a)=>{let l=Object.assign(Object.assign({},i),{levelCoord:s,stackDepth:a,stackForward:0});return e.push(l),l.stackForward=r(i.nextLevelNodes,s+i.thickness,a+1)+1});function r(i,s,a){let l=0;for(let u of i)l=Math.max(n(u,s,a),l);return l}return r(t,0,0),e}function qm(t,e){const n={};return(...r)=>{let i=t(...r);return i in n?n[i]:n[i]=e(...r)}}function Z_(t,e,n=null,r=0){let i=[];if(n)for(let s=0;s<t.length;s+=1){let a=t[s],l=n.computeDateTop(a.start,e),u=Math.max(l+(r||0),n.computeDateTop(a.end,e));i.push({start:Math.round(l),end:Math.round(u)})}return i}function Hz(t,e,n,r){let i=[],s=[];for(let d=0;d<t.length;d+=1){let f=e[d];f?i.push({index:d,thickness:1,span:f}):s.push(t[d])}let{segRects:a,hiddenGroups:l}=Nz(i,n,r),u=[];for(let d of a)u.push({seg:t[d.index],rect:d});for(let d of s)u.push({seg:d,rect:null});return{segPlacements:u,hiddenGroups:l}}const Uz=Dt({hour:"numeric",minute:"2-digit",meridiem:!1});class IC extends ot{render(){return I(Um,Object.assign({},this.props,{elClasses:["fc-timegrid-event","fc-v-event",this.props.isShort&&"fc-timegrid-event-short"],defaultTimeFormat:Uz}))}}class Bz extends ot{constructor(){super(...arguments),this.sortEventSegs=Ce(Mm)}render(){let{props:e,context:n}=this,{options:r}=n,i=r.selectMirror,s=e.eventDrag&&e.eventDrag.segs||e.eventResize&&e.eventResize.segs||i&&e.dateSelectionSegs||[],a=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{},l=this.sortEventSegs(e.fgEventSegs,r.eventOrder);return I(Wm,{elTag:"td",elRef:e.elRef,elClasses:["fc-timegrid-col",...e.extraClassNames||[]],elAttrs:Object.assign({role:"gridcell"},e.extraDataAttrs),date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,extraRenderProps:e.extraRenderProps},u=>I("div",{className:"fc-timegrid-col-frame"},I("div",{className:"fc-timegrid-col-bg"},this.renderFillSegs(e.businessHourSegs,"non-business"),this.renderFillSegs(e.bgEventSegs,"bg-event"),this.renderFillSegs(e.dateSelectionSegs,"highlight")),I("div",{className:"fc-timegrid-col-events"},this.renderFgSegs(l,a,!1,!1,!1)),I("div",{className:"fc-timegrid-col-events"},this.renderFgSegs(s,{},!!e.eventDrag,!!e.eventResize,!!i,"mirror")),I("div",{className:"fc-timegrid-now-indicator-container"},this.renderNowIndicator(e.nowIndicatorSegs)),Vm(r)&&I(u,{elTag:"div",elClasses:["fc-timegrid-col-misc"]})))}renderFgSegs(e,n,r,i,s,a){let{props:l}=this;return l.forPrint?PC(e,l):this.renderPositionedFgSegs(e,n,r,i,s,a)}renderPositionedFgSegs(e,n,r,i,s,a){let{eventMaxStack:l,eventShortHeight:u,eventOrderStrict:d,eventMinHeight:f}=this.context.options,{date:p,slatCoords:m,eventSelection:v,todayRange:b,nowDate:_}=this.props,w=r||i||s,x=Z_(e,p,m,f),{segPlacements:C,hiddenGroups:k}=Hz(e,x,d,l);return I(vt,null,this.renderHiddenGroups(k,e),C.map(R=>{let{seg:A,rect:M}=R,P=A.eventRange.instance.instanceId,O=w||!!(!n[P]&&M),z=jp(M&&M.span),B=!w&&M?this.computeSegHStyle(M):{left:0,right:0},$=!!M&&M.stackForward>0,ee=!!M&&M.span.end-M.span.start<u;return I("div",{className:"fc-timegrid-event-harness"+($?" fc-timegrid-event-harness-inset":""),key:a||P,style:Object.assign(Object.assign({visibility:O?"":"hidden"},z),B)},I(IC,Object.assign({seg:A,isDragging:r,isResizing:i,isDateSelecting:s,isSelected:P===v,isShort:ee},Fi(A,b,_))))}))}renderHiddenGroups(e,n){let{extraDateSpan:r,dateProfile:i,todayRange:s,nowDate:a,eventSelection:l,eventDrag:u,eventResize:d}=this.props;return I(vt,null,e.map(f=>{let p=jp(f.span),m=Wz(f.entries,n);return I(Oz,{key:xE(hC(m)),hiddenSegs:m,top:p.top,bottom:p.bottom,extraDateSpan:r,dateProfile:i,todayRange:s,nowDate:a,eventSelection:l,eventDrag:u,eventResize:d})}))}renderFillSegs(e,n){let{props:r,context:i}=this,a=Z_(e,r.date,r.slatCoords,i.options.eventMinHeight).map((l,u)=>{let d=e[u];return I("div",{key:WE(d.eventRange),className:"fc-timegrid-bg-harness",style:jp(l)},n==="bg-event"?I(cC,Object.assign({seg:d},Fi(d,r.todayRange,r.nowDate))):uC(n))});return I(vt,null,a)}renderNowIndicator(e){let{slatCoords:n,date:r}=this.props;return n?e.map((i,s)=>I(Bm,{key:s,elClasses:["fc-timegrid-now-indicator-line"],elStyle:{top:n.computeDateTop(i.start,r)},isAxis:!1,date:r})):null}computeSegHStyle(e){let{isRtl:n,options:r}=this.context,i=r.slotEventOverlap,s=e.levelCoord,a=e.levelCoord+e.thickness,l,u;i&&(a=Math.min(1,s+(a-s)*2)),n?(l=1-a,u=s):(l=s,u=1-a);let d={zIndex:e.stackDepth+1,left:l*100+"%",right:u*100+"%"};return i&&!e.stackForward&&(d[n?"marginLeft":"marginRight"]=20),d}}function PC(t,{todayRange:e,nowDate:n,eventSelection:r,eventDrag:i,eventResize:s}){let a=(i?i.affectedInstances:null)||(s?s.affectedInstances:null)||{};return I(vt,null,t.map(l=>{let u=l.eventRange.instance.instanceId;return I("div",{key:u,style:{visibility:a[u]?"hidden":""}},I(IC,Object.assign({seg:l,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:u===r,isShort:!1},Fi(l,e,n))))}))}function jp(t){return t?{top:t.start,bottom:-t.end}:{top:"",bottom:""}}function Wz(t,e){return t.map(n=>e[n.index])}class Vz extends ot{constructor(){super(...arguments),this.splitFgEventSegs=Ce(dl),this.splitBgEventSegs=Ce(dl),this.splitBusinessHourSegs=Ce(dl),this.splitNowIndicatorSegs=Ce(dl),this.splitDateSelectionSegs=Ce(dl),this.splitEventDrag=Ce(Q_),this.splitEventResize=Ce(Q_),this.rootElRef=Fn(),this.cellElRefs=new Oi}render(){let{props:e,context:n}=this,r=n.options.nowIndicator&&e.slatCoords&&e.slatCoords.safeComputeTop(e.nowDate),i=e.cells.length,s=this.splitFgEventSegs(e.fgEventSegs,i),a=this.splitBgEventSegs(e.bgEventSegs,i),l=this.splitBusinessHourSegs(e.businessHourSegs,i),u=this.splitNowIndicatorSegs(e.nowIndicatorSegs,i),d=this.splitDateSelectionSegs(e.dateSelectionSegs,i),f=this.splitEventDrag(e.eventDrag,i),p=this.splitEventResize(e.eventResize,i);return I("div",{className:"fc-timegrid-cols",ref:this.rootElRef},I("table",{role:"presentation",style:{minWidth:e.tableMinWidth,width:e.clientWidth}},e.tableColGroupNode,I("tbody",{role:"presentation"},I("tr",{role:"row"},e.axis&&I("td",{"aria-hidden":!0,className:"fc-timegrid-col fc-timegrid-axis"},I("div",{className:"fc-timegrid-col-frame"},I("div",{className:"fc-timegrid-now-indicator-container"},typeof r=="number"&&I(Bm,{elClasses:["fc-timegrid-now-indicator-arrow"],elStyle:{top:r},isAxis:!0,date:e.nowDate})))),e.cells.map((m,v)=>I(Bz,{key:m.key,elRef:this.cellElRefs.createRef(m.key),dateProfile:e.dateProfile,date:m.date,nowDate:e.nowDate,todayRange:e.todayRange,extraRenderProps:m.extraRenderProps,extraDataAttrs:m.extraDataAttrs,extraClassNames:m.extraClassNames,extraDateSpan:m.extraDateSpan,fgEventSegs:s[v],bgEventSegs:a[v],businessHourSegs:l[v],nowIndicatorSegs:u[v],dateSelectionSegs:d[v],eventDrag:f[v],eventResize:p[v],slatCoords:e.slatCoords,eventSelection:e.eventSelection,forPrint:e.forPrint}))))))}componentDidMount(){this.updateCoords()}componentDidUpdate(){this.updateCoords()}updateCoords(){let{props:e}=this;e.onColCoords&&e.clientWidth!==null&&e.onColCoords(new fo(this.rootElRef.current,$z(this.cellElRefs.currentMap,e.cells),!0,!1))}}function $z(t,e){return e.map(n=>t[n.key])}class qz extends Vr{constructor(){super(...arguments),this.processSlotOptions=Ce(Gz),this.state={slatCoords:null},this.handleRootEl=e=>{e?this.context.registerInteractiveComponent(this,{el:e,isHitComboAllowed:this.props.isHitComboAllowed}):this.context.unregisterInteractiveComponent(this)},this.handleScrollRequest=e=>{let{onScrollTopRequest:n}=this.props,{slatCoords:r}=this.state;if(n&&r){if(e.time){let i=r.computeTimeTop(e.time);i=Math.ceil(i),i&&(i+=1),n(i)}return!0}return!1},this.handleColCoords=e=>{this.colCoords=e},this.handleSlatCoords=e=>{this.setState({slatCoords:e}),this.props.onSlatCoords&&this.props.onSlatCoords(e)}}render(){let{props:e,state:n}=this;return I("div",{className:"fc-timegrid-body",ref:this.handleRootEl,style:{width:e.clientWidth,minWidth:e.tableMinWidth}},I(Az,{axis:e.axis,dateProfile:e.dateProfile,slatMetas:e.slatMetas,clientWidth:e.clientWidth,minHeight:e.expandRows?e.clientHeight:"",tableMinWidth:e.tableMinWidth,tableColGroupNode:e.axis?e.tableColGroupNode:null,onCoords:this.handleSlatCoords}),I(Vz,{cells:e.cells,axis:e.axis,dateProfile:e.dateProfile,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,todayRange:e.todayRange,nowDate:e.nowDate,nowIndicatorSegs:e.nowIndicatorSegs,clientWidth:e.clientWidth,tableMinWidth:e.tableMinWidth,tableColGroupNode:e.tableColGroupNode,slatCoords:n.slatCoords,onColCoords:this.handleColCoords,forPrint:e.forPrint}))}componentDidMount(){this.scrollResponder=this.context.createScrollResponder(this.handleScrollRequest)}componentDidUpdate(e){this.scrollResponder.update(e.dateProfile!==this.props.dateProfile)}componentWillUnmount(){this.scrollResponder.detach()}queryHit(e,n){let{dateEnv:r,options:i}=this.context,{colCoords:s}=this,{dateProfile:a}=this.props,{slatCoords:l}=this.state,{snapDuration:u,snapsPerSlot:d}=this.processSlotOptions(this.props.slotDuration,i.snapDuration),f=s.leftToIndex(e),p=l.positions.topToIndex(n);if(f!=null&&p!=null){let m=this.props.cells[f],v=l.positions.tops[p],b=l.positions.getHeight(p),_=(n-v)/b,w=Math.floor(_*d),x=p*d+w,C=this.props.cells[f].date,k=wg(a.slotMinTime,NP(u,x)),R=r.add(C,k),A=r.add(R,u);return{dateProfile:a,dateSpan:Object.assign({range:{start:R,end:A},allDay:!1},m.extraDateSpan),dayEl:s.els[f],rect:{left:s.lefts[f],right:s.rights[f],top:v,bottom:v+b},layer:0}}return null}}function Gz(t,e){let n=e||t,r=ym(t,n);return r===null&&(n=t,r=1),{snapDuration:n,snapsPerSlot:r}}class Yz extends nC{sliceRange(e,n){let r=[];for(let i=0;i<n.length;i+=1){let s=Cs(e,n[i]);s&&r.push({start:s.start,end:s.end,isStart:s.start.valueOf()===e.start.valueOf(),isEnd:s.end.valueOf()===e.end.valueOf(),col:i})}return r}}class Qz extends Vr{constructor(){super(...arguments),this.buildDayRanges=Ce(Kz),this.slicer=new Yz,this.timeColsRef=Fn()}render(){let{props:e,context:n}=this,{dateProfile:r,dayTableModel:i}=e,{nowIndicator:s,nextDayThreshold:a}=n.options,l=this.buildDayRanges(i,r,n.dateEnv);return I(_a,{unit:s?"minute":"day"},(u,d)=>I(qz,Object.assign({ref:this.timeColsRef},this.slicer.sliceProps(e,r,null,n,l),{forPrint:e.forPrint,axis:e.axis,dateProfile:r,slatMetas:e.slatMetas,slotDuration:e.slotDuration,cells:i.cells[0],tableColGroupNode:e.tableColGroupNode,tableMinWidth:e.tableMinWidth,clientWidth:e.clientWidth,clientHeight:e.clientHeight,expandRows:e.expandRows,nowDate:u,nowIndicatorSegs:s&&this.slicer.sliceNowDate(u,r,a,n,l),todayRange:d,onScrollTopRequest:e.onScrollTopRequest,onSlatCoords:e.onSlatCoords})))}}function Kz(t,e,n){let r=[];for(let i of t.headerDates)r.push({start:n.add(i,e.slotMinTime),end:n.add(i,e.slotMaxTime)});return r}const X_=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}];function Zz(t,e,n,r,i){let s=new Date(0),a=t,l=Qe(0),u=n||Xz(r),d=[];for(;zr(a)<zr(e);){let f=i.add(s,a),p=ym(l,u)!==null;d.push({date:f,time:a,key:f.toISOString(),isoTimeStr:QP(f),isLabeled:p}),a=wg(a,r),l=wg(l,r)}return d}function Xz(t){let e,n,r;for(e=X_.length-1;e>=0;e-=1)if(n=Qe(X_[e]),r=ym(n,t),r!==null&&r>1)return n;return t}class Jz extends Cz{constructor(){super(...arguments),this.buildTimeColsModel=Ce(eH),this.buildSlatMetas=Ce(Zz)}render(){let{options:e,dateEnv:n,dateProfileGenerator:r}=this.context,{props:i}=this,{dateProfile:s}=i,a=this.buildTimeColsModel(s,r),l=this.allDaySplitter.splitProps(i),u=this.buildSlatMetas(s.slotMinTime,s.slotMaxTime,e.slotLabelInterval,e.slotDuration,n),{dayMinWidth:d}=e,f=!d,p=d,m=e.dayHeaders&&I(JE,{dates:a.headerDates,dateProfile:s,datesRepDistinctDays:!0,renderIntro:f?this.renderHeadAxis:null}),v=e.allDaySlot!==!1&&(_=>I(MC,Object.assign({},l.allDay,{dateProfile:s,dayTableModel:a,nextDayThreshold:e.nextDayThreshold,tableMinWidth:_.tableMinWidth,colGroupNode:_.tableColGroupNode,renderRowIntro:f?this.renderTableRowAxis:null,showWeekNumbers:!1,expandRows:!1,headerAlignElRef:this.headerElRef,clientWidth:_.clientWidth,clientHeight:_.clientHeight,forPrint:i.forPrint},this.getAllDayMaxEventProps()))),b=_=>I(Qz,Object.assign({},l.timed,{dayTableModel:a,dateProfile:s,axis:f,slotDuration:e.slotDuration,slatMetas:u,forPrint:i.forPrint,tableColGroupNode:_.tableColGroupNode,tableMinWidth:_.tableMinWidth,clientWidth:_.clientWidth,clientHeight:_.clientHeight,onSlatCoords:this.handleSlatCoords,expandRows:_.expandRows,onScrollTopRequest:this.handleScrollTopRequest}));return p?this.renderHScrollLayout(m,v,b,a.colCnt,d,u,this.state.slatCoords):this.renderSimpleLayout(m,v,b)}}function eH(t,e){let n=new eC(t.renderRange,e);return new tC(n,!1)}var tH='.fc-v-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-v-event .fc-event-main{color:var(--fc-event-text-color);height:100%}.fc-v-event .fc-event-main-frame{display:flex;flex-direction:column;height:100%}.fc-v-event .fc-event-time{flex-grow:0;flex-shrink:0;max-height:100%;overflow:hidden}.fc-v-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-height:0}.fc-v-event .fc-event-title{bottom:0;max-height:100%;overflow:hidden;top:0}.fc-v-event:not(.fc-event-start){border-top-left-radius:0;border-top-right-radius:0;border-top-width:0}.fc-v-event:not(.fc-event-end){border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-width:0}.fc-v-event.fc-event-selected:before{left:-10px;right:-10px}.fc-v-event .fc-event-resizer-start{cursor:n-resize}.fc-v-event .fc-event-resizer-end{cursor:s-resize}.fc-v-event:not(.fc-event-selected) .fc-event-resizer{height:var(--fc-event-resizer-thickness);left:0;right:0}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-start{top:calc(var(--fc-event-resizer-thickness)/-2)}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-end{bottom:calc(var(--fc-event-resizer-thickness)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer{left:50%;margin-left:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer-start{top:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer-end{bottom:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc .fc-timegrid .fc-daygrid-body{z-index:2}.fc .fc-timegrid-divider{padding:0 0 2px}.fc .fc-timegrid-body{min-height:100%;position:relative;z-index:1}.fc .fc-timegrid-axis-chunk{position:relative}.fc .fc-timegrid-axis-chunk>table,.fc .fc-timegrid-slots{position:relative;z-index:1}.fc .fc-timegrid-slot{border-bottom:0;height:1.5em}.fc .fc-timegrid-slot:empty:before{content:"\\00a0"}.fc .fc-timegrid-slot-minor{border-top-style:dotted}.fc .fc-timegrid-slot-label-cushion{display:inline-block;white-space:nowrap}.fc .fc-timegrid-slot-label{vertical-align:middle}.fc .fc-timegrid-axis-cushion,.fc .fc-timegrid-slot-label-cushion{padding:0 4px}.fc .fc-timegrid-axis-frame-liquid{height:100%}.fc .fc-timegrid-axis-frame{align-items:center;display:flex;justify-content:flex-end;overflow:hidden}.fc .fc-timegrid-axis-cushion{flex-shrink:0;max-width:60px}.fc-direction-ltr .fc-timegrid-slot-label-frame{text-align:right}.fc-direction-rtl .fc-timegrid-slot-label-frame{text-align:left}.fc-liquid-hack .fc-timegrid-axis-frame-liquid{bottom:0;height:auto;left:0;position:absolute;right:0;top:0}.fc .fc-timegrid-col.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-timegrid-col-frame{min-height:100%;position:relative}.fc-media-screen.fc-liquid-hack .fc-timegrid-col-frame{bottom:0;height:auto;left:0;position:absolute;right:0;top:0}.fc-media-screen .fc-timegrid-cols{bottom:0;left:0;position:absolute;right:0;top:0}.fc-media-screen .fc-timegrid-cols>table{height:100%}.fc-media-screen .fc-timegrid-col-bg,.fc-media-screen .fc-timegrid-col-events,.fc-media-screen .fc-timegrid-now-indicator-container{left:0;position:absolute;right:0;top:0}.fc .fc-timegrid-col-bg{z-index:2}.fc .fc-timegrid-col-bg .fc-non-business{z-index:1}.fc .fc-timegrid-col-bg .fc-bg-event{z-index:2}.fc .fc-timegrid-col-bg .fc-highlight{z-index:3}.fc .fc-timegrid-bg-harness{left:0;position:absolute;right:0}.fc .fc-timegrid-col-events{z-index:3}.fc .fc-timegrid-now-indicator-container{bottom:0;overflow:hidden}.fc-direction-ltr .fc-timegrid-col-events{margin:0 2.5% 0 2px}.fc-direction-rtl .fc-timegrid-col-events{margin:0 2px 0 2.5%}.fc-timegrid-event-harness{position:absolute}.fc-timegrid-event-harness>.fc-timegrid-event{bottom:0;left:0;position:absolute;right:0;top:0}.fc-timegrid-event-harness-inset .fc-timegrid-event,.fc-timegrid-event.fc-event-mirror,.fc-timegrid-more-link{box-shadow:0 0 0 1px var(--fc-page-bg-color)}.fc-timegrid-event,.fc-timegrid-more-link{border-radius:3px;font-size:var(--fc-small-font-size)}.fc-timegrid-event{margin-bottom:1px}.fc-timegrid-event .fc-event-main{padding:1px 1px 0}.fc-timegrid-event .fc-event-time{font-size:var(--fc-small-font-size);margin-bottom:1px;white-space:nowrap}.fc-timegrid-event-short .fc-event-main-frame{flex-direction:row;overflow:hidden}.fc-timegrid-event-short .fc-event-time:after{content:"\\00a0-\\00a0"}.fc-timegrid-event-short .fc-event-title{font-size:var(--fc-small-font-size)}.fc-timegrid-more-link{background:var(--fc-more-link-bg-color);color:var(--fc-more-link-text-color);cursor:pointer;margin-bottom:1px;position:absolute;z-index:9999}.fc-timegrid-more-link-inner{padding:3px 2px;top:0}.fc-direction-ltr .fc-timegrid-more-link{right:0}.fc-direction-rtl .fc-timegrid-more-link{left:0}.fc .fc-timegrid-now-indicator-arrow,.fc .fc-timegrid-now-indicator-line{pointer-events:none}.fc .fc-timegrid-now-indicator-line{border-color:var(--fc-now-indicator-color);border-style:solid;border-width:1px 0 0;left:0;position:absolute;right:0;z-index:4}.fc .fc-timegrid-now-indicator-arrow{border-color:var(--fc-now-indicator-color);border-style:solid;margin-top:-5px;position:absolute;z-index:4}.fc-direction-ltr .fc-timegrid-now-indicator-arrow{border-bottom-color:transparent;border-top-color:transparent;border-width:5px 0 5px 6px;left:0}.fc-direction-rtl .fc-timegrid-now-indicator-arrow{border-bottom-color:transparent;border-top-color:transparent;border-width:5px 6px 5px 0;right:0}';sf(tH);const nH={allDaySlot:Boolean};var rH=ui({name:"@fullcalendar/timegrid",initialView:"timeGridWeek",optionRefiners:nH,views:{timeGrid:{component:Jz,usesMinMaxTime:!0,allDaySlot:!0,slotDuration:"00:30:00",slotEventOverlap:!0},timeGridDay:{type:"timeGrid",duration:{days:1}},timeGridWeek:{type:"timeGrid",duration:{weeks:1}}}});class iH extends ot{constructor(){super(...arguments),this.state={textId:_s()}}render(){let{theme:e,dateEnv:n,options:r,viewApi:i}=this.context,{cellId:s,dayDate:a,todayRange:l}=this.props,{textId:u}=this.state,d=Pm(a,l),f=r.listDayFormat?n.format(a,r.listDayFormat):"",p=r.listDaySideFormat?n.format(a,r.listDaySideFormat):"",m=Object.assign({date:n.toDate(a),view:i,textId:u,text:f,sideText:p,navLinkAttrs:uo(this.context,a),sideNavLinkAttrs:uo(this.context,a,"day",!1)},d);return I(On,{elTag:"tr",elClasses:["fc-list-day",...uf(d,e)],elAttrs:{"data-date":rc(a)},renderProps:m,generatorName:"dayHeaderContent",customGenerator:r.dayHeaderContent,defaultGenerator:sH,classNameGenerator:r.dayHeaderClassNames,didMount:r.dayHeaderDidMount,willUnmount:r.dayHeaderWillUnmount},v=>I("th",{scope:"colgroup",colSpan:3,id:s,"aria-labelledby":u},I(v,{elTag:"div",elClasses:["fc-list-day-cushion",e.getClass("tableCellShaded")]})))}}function sH(t){return I(vt,null,t.text&&I("a",Object.assign({id:t.textId,className:"fc-list-day-text"},t.navLinkAttrs),t.text),t.sideText&&I("a",Object.assign({"aria-hidden":!0,className:"fc-list-day-side-text"},t.sideNavLinkAttrs),t.sideText))}const aH=Dt({hour:"numeric",minute:"2-digit",meridiem:"short"});class oH extends ot{render(){let{props:e,context:n}=this,{options:r}=n,{seg:i,timeHeaderId:s,eventHeaderId:a,dateHeaderId:l}=e,u=r.eventTimeFormat||aH;return I(df,Object.assign({},e,{elTag:"tr",elClasses:["fc-list-event",i.eventRange.def.url&&"fc-event-forced-url"],defaultGenerator:()=>lH(i,n),seg:i,timeText:"",disableDragging:!0,disableResizing:!0}),(d,f)=>I(vt,null,cH(i,u,n,s,l),I("td",{"aria-hidden":!0,className:"fc-list-event-graphic"},I("span",{className:"fc-list-event-dot",style:{borderColor:f.borderColor||f.backgroundColor}})),I(d,{elTag:"td",elClasses:["fc-list-event-title"],elAttrs:{headers:`${a} ${l}`}})))}}function lH(t,e){let n=Nm(t,e);return I("a",Object.assign({},n),t.eventRange.def.title)}function cH(t,e,n,r,i){let{options:s}=n;if(s.displayEventTime!==!1){let a=t.eventRange.def,l=t.eventRange.instance,u=!1,d;if(a.allDay?u=!0:P2(t.eventRange.range)?t.isStart?d=Cl(t,e,n,null,null,l.range.start,t.end):t.isEnd?d=Cl(t,e,n,null,null,t.start,l.range.end):u=!0:d=Cl(t,e,n),u){let f={text:n.options.allDayText,view:n.viewApi};return I(On,{elTag:"td",elClasses:["fc-list-event-time"],elAttrs:{headers:`${r} ${i}`},renderProps:f,generatorName:"allDayContent",customGenerator:s.allDayContent,defaultGenerator:uH,classNameGenerator:s.allDayClassNames,didMount:s.allDayDidMount,willUnmount:s.allDayWillUnmount})}return I("td",{className:"fc-list-event-time"},d)}return null}function uH(t){return t.text}class dH extends Vr{constructor(){super(...arguments),this.computeDateVars=Ce(hH),this.eventStoreToSegs=Ce(this._eventStoreToSegs),this.state={timeHeaderId:_s(),eventHeaderId:_s(),dateHeaderIdRoot:_s()},this.setRootEl=e=>{e?this.context.registerInteractiveComponent(this,{el:e}):this.context.unregisterInteractiveComponent(this)}}render(){let{props:e,context:n}=this,{dayDates:r,dayRanges:i}=this.computeDateVars(e.dateProfile),s=this.eventStoreToSegs(e.eventStore,e.eventUiBases,i);return I(zl,{elRef:this.setRootEl,elClasses:["fc-list",n.theme.getClass("table"),n.options.stickyHeaderDates!==!1?"fc-list-sticky":""],viewSpec:n.viewSpec},I(aC,{liquid:!e.isHeightAuto,overflowX:e.isHeightAuto?"visible":"hidden",overflowY:e.isHeightAuto?"visible":"auto"},s.length>0?this.renderSegList(s,r):this.renderEmptyMessage()))}renderEmptyMessage(){let{options:e,viewApi:n}=this.context,r={text:e.noEventsText,view:n};return I(On,{elTag:"div",elClasses:["fc-list-empty"],renderProps:r,generatorName:"noEventsContent",customGenerator:e.noEventsContent,defaultGenerator:fH,classNameGenerator:e.noEventsClassNames,didMount:e.noEventsDidMount,willUnmount:e.noEventsWillUnmount},i=>I(i,{elTag:"div",elClasses:["fc-list-empty-cushion"]}))}renderSegList(e,n){let{theme:r,options:i}=this.context,{timeHeaderId:s,eventHeaderId:a,dateHeaderIdRoot:l}=this.state,u=pH(e);return I(_a,{unit:"day"},(d,f)=>{let p=[];for(let m=0;m<u.length;m+=1){let v=u[m];if(v){let b=rc(n[m]),_=l+"-"+b;p.push(I(iH,{key:b,cellId:_,dayDate:n[m],todayRange:f})),v=Mm(v,i.eventOrder);for(let w of v)p.push(I(oH,Object.assign({key:b+":"+w.eventRange.instance.instanceId,seg:w,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,timeHeaderId:s,eventHeaderId:a,dateHeaderId:_},Fi(w,f,d))))}}return I("table",{className:"fc-list-table "+r.getClass("table")},I("thead",null,I("tr",null,I("th",{scope:"col",id:s},i.timeHint),I("th",{scope:"col","aria-hidden":!0}),I("th",{scope:"col",id:a},i.eventHint))),I("tbody",null,p))})}_eventStoreToSegs(e,n,r){return this.eventRangesToSegs(Dg(e,n,this.props.dateProfile.activeRange,this.context.options.nextDayThreshold).fg,r)}eventRangesToSegs(e,n){let r=[];for(let i of e)r.push(...this.eventRangeToSegs(i,n));return r}eventRangeToSegs(e,n){let{dateEnv:r}=this.context,{nextDayThreshold:i}=this.context.options,s=e.range,a=e.def.allDay,l,u,d,f=[];for(l=0;l<n.length;l+=1)if(u=Cs(s,n[l]),u&&(d={component:this,eventRange:e,start:u.start,end:u.end,isStart:e.isStart&&u.start.valueOf()===s.start.valueOf(),isEnd:e.isEnd&&u.end.valueOf()===s.end.valueOf(),dayIndex:l},f.push(d),!d.isEnd&&!a&&l+1<n.length&&s.end<r.add(n[l+1].start,i))){d.end=s.end,d.isEnd=!0;break}return f}}function fH(t){return t.text}function hH(t){let e=bt(t.renderRange.start),n=t.renderRange.end,r=[],i=[];for(;e<n;)r.push(e),i.push({start:e,end:Jt(e,1)}),e=Jt(e,1);return{dayDates:r,dayRanges:i}}function pH(t){let e=[],n,r;for(n=0;n<t.length;n+=1)r=t[n],(e[r.dayIndex]||(e[r.dayIndex]=[])).push(r);return e}var gH=':root{--fc-list-event-dot-width:10px;--fc-list-event-hover-bg-color:#f5f5f5}.fc-theme-standard .fc-list{border:1px solid var(--fc-border-color)}.fc .fc-list-empty{align-items:center;background-color:var(--fc-neutral-bg-color);display:flex;height:100%;justify-content:center}.fc .fc-list-empty-cushion{margin:5em 0}.fc .fc-list-table{border-style:hidden;width:100%}.fc .fc-list-table tr>*{border-left:0;border-right:0}.fc .fc-list-sticky .fc-list-day>*{background:var(--fc-page-bg-color);position:sticky;top:0}.fc .fc-list-table thead{left:-10000px;position:absolute}.fc .fc-list-table tbody>tr:first-child th{border-top:0}.fc .fc-list-table th{padding:0}.fc .fc-list-day-cushion,.fc .fc-list-table td{padding:8px 14px}.fc .fc-list-day-cushion:after{clear:both;content:"";display:table}.fc-theme-standard .fc-list-day-cushion{background-color:var(--fc-neutral-bg-color)}.fc-direction-ltr .fc-list-day-text,.fc-direction-rtl .fc-list-day-side-text{float:left}.fc-direction-ltr .fc-list-day-side-text,.fc-direction-rtl .fc-list-day-text{float:right}.fc-direction-ltr .fc-list-table .fc-list-event-graphic{padding-right:0}.fc-direction-rtl .fc-list-table .fc-list-event-graphic{padding-left:0}.fc .fc-list-event.fc-event-forced-url{cursor:pointer}.fc .fc-list-event:hover td{background-color:var(--fc-list-event-hover-bg-color)}.fc .fc-list-event-graphic,.fc .fc-list-event-time{white-space:nowrap;width:1px}.fc .fc-list-event-dot{border:calc(var(--fc-list-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-list-event-dot-width)/2);box-sizing:content-box;display:inline-block;height:0;width:0}.fc .fc-list-event-title a{color:inherit;text-decoration:none}.fc .fc-list-event.fc-event-forced-url:hover a{text-decoration:underline}';sf(gH);const mH={listDayFormat:J_,listDaySideFormat:J_,noEventsClassNames:W,noEventsContent:W,noEventsDidMount:W,noEventsWillUnmount:W};function J_(t){return t===!1?null:Dt(t)}var vH=ui({name:"@fullcalendar/list",optionRefiners:mH,views:{list:{component:dH,buttonTextKey:"list",listDayFormat:{month:"long",day:"numeric",year:"numeric"}},listDay:{type:"list",duration:{days:1},listDayFormat:{weekday:"long"}},listWeek:{type:"list",duration:{weeks:1},listDayFormat:{weekday:"long"},listDaySideFormat:{month:"long",day:"numeric",year:"numeric"}},listMonth:{type:"list",duration:{month:1},listDaySideFormat:{weekday:"long"}},listYear:{type:"list",duration:{year:1},listDaySideFormat:{weekday:"long"}}}});zm.touchMouseIgnoreWait=500;let Ng=0,Rd=0,Ig=!1;class LC{constructor(e){this.subjectEl=null,this.selector="",this.handleSelector="",this.shouldIgnoreMove=!1,this.shouldWatchScroll=!0,this.isDragging=!1,this.isTouchDragging=!1,this.wasTouchScroll=!1,this.handleMouseDown=n=>{if(!this.shouldIgnoreMouse()&&yH(n)&&this.tryStart(n)){let r=this.createEventFromMouse(n,!0);this.emitter.trigger("pointerdown",r),this.initScrollWatch(r),this.shouldIgnoreMove||document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp)}},this.handleMouseMove=n=>{let r=this.createEventFromMouse(n);this.recordCoords(r),this.emitter.trigger("pointermove",r)},this.handleMouseUp=n=>{document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.emitter.trigger("pointerup",this.createEventFromMouse(n)),this.cleanup()},this.handleTouchStart=n=>{if(this.tryStart(n)){this.isTouchDragging=!0;let r=this.createEventFromTouch(n,!0);this.emitter.trigger("pointerdown",r),this.initScrollWatch(r);let i=n.target;this.shouldIgnoreMove||i.addEventListener("touchmove",this.handleTouchMove),i.addEventListener("touchend",this.handleTouchEnd),i.addEventListener("touchcancel",this.handleTouchEnd),window.addEventListener("scroll",this.handleTouchScroll,!0)}},this.handleTouchMove=n=>{let r=this.createEventFromTouch(n);this.recordCoords(r),this.emitter.trigger("pointermove",r)},this.handleTouchEnd=n=>{if(this.isDragging){let r=n.target;r.removeEventListener("touchmove",this.handleTouchMove),r.removeEventListener("touchend",this.handleTouchEnd),r.removeEventListener("touchcancel",this.handleTouchEnd),window.removeEventListener("scroll",this.handleTouchScroll,!0),this.emitter.trigger("pointerup",this.createEventFromTouch(n)),this.cleanup(),this.isTouchDragging=!1,bH()}},this.handleTouchScroll=()=>{this.wasTouchScroll=!0},this.handleScroll=n=>{if(!this.shouldIgnoreMove){let r=window.scrollX-this.prevScrollX+this.prevPageX,i=window.scrollY-this.prevScrollY+this.prevPageY;this.emitter.trigger("pointermove",{origEvent:n,isTouch:this.isTouchDragging,subjectEl:this.subjectEl,pageX:r,pageY:i,deltaX:r-this.origPageX,deltaY:i-this.origPageY})}},this.containerEl=e,this.emitter=new cf,e.addEventListener("mousedown",this.handleMouseDown),e.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),_H()}destroy(){this.containerEl.removeEventListener("mousedown",this.handleMouseDown),this.containerEl.removeEventListener("touchstart",this.handleTouchStart,{passive:!0}),SH()}tryStart(e){let n=this.querySubjectEl(e),r=e.target;return n&&(!this.handleSelector||kn(r,this.handleSelector))?(this.subjectEl=n,this.isDragging=!0,this.wasTouchScroll=!1,!0):!1}cleanup(){Ig=!1,this.isDragging=!1,this.subjectEl=null,this.destroyScrollWatch()}querySubjectEl(e){return this.selector?kn(e.target,this.selector):this.containerEl}shouldIgnoreMouse(){return Ng||this.isTouchDragging}cancelTouchScroll(){this.isDragging&&(Ig=!0)}initScrollWatch(e){this.shouldWatchScroll&&(this.recordCoords(e),window.addEventListener("scroll",this.handleScroll,!0))}recordCoords(e){this.shouldWatchScroll&&(this.prevPageX=e.pageX,this.prevPageY=e.pageY,this.prevScrollX=window.scrollX,this.prevScrollY=window.scrollY)}destroyScrollWatch(){this.shouldWatchScroll&&window.removeEventListener("scroll",this.handleScroll,!0)}createEventFromMouse(e,n){let r=0,i=0;return n?(this.origPageX=e.pageX,this.origPageY=e.pageY):(r=e.pageX-this.origPageX,i=e.pageY-this.origPageY),{origEvent:e,isTouch:!1,subjectEl:this.subjectEl,pageX:e.pageX,pageY:e.pageY,deltaX:r,deltaY:i}}createEventFromTouch(e,n){let r=e.touches,i,s,a=0,l=0;return r&&r.length?(i=r[0].pageX,s=r[0].pageY):(i=e.pageX,s=e.pageY),n?(this.origPageX=i,this.origPageY=s):(a=i-this.origPageX,l=s-this.origPageY),{origEvent:e,isTouch:!0,subjectEl:this.subjectEl,pageX:i,pageY:s,deltaX:a,deltaY:l}}}function yH(t){return t.button===0&&!t.ctrlKey}function bH(){Ng+=1,setTimeout(()=>{Ng-=1},zm.touchMouseIgnoreWait)}function _H(){Rd+=1,Rd===1&&window.addEventListener("touchmove",FC,{passive:!1})}function SH(){Rd-=1,Rd||window.removeEventListener("touchmove",FC,{passive:!1})}function FC(t){Ig&&t.preventDefault()}class wH{constructor(){this.isVisible=!1,this.sourceEl=null,this.mirrorEl=null,this.sourceElRect=null,this.parentNode=document.body,this.zIndex=9999,this.revertDuration=0}start(e,n,r){this.sourceEl=e,this.sourceElRect=this.sourceEl.getBoundingClientRect(),this.origScreenX=n-window.scrollX,this.origScreenY=r-window.scrollY,this.deltaX=0,this.deltaY=0,this.updateElPosition()}handleMove(e,n){this.deltaX=e-window.scrollX-this.origScreenX,this.deltaY=n-window.scrollY-this.origScreenY,this.updateElPosition()}setIsVisible(e){e?this.isVisible||(this.mirrorEl&&(this.mirrorEl.style.display=""),this.isVisible=e,this.updateElPosition()):this.isVisible&&(this.mirrorEl&&(this.mirrorEl.style.display="none"),this.isVisible=e)}stop(e,n){let r=()=>{this.cleanup(),n()};e&&this.mirrorEl&&this.isVisible&&this.revertDuration&&(this.deltaX||this.deltaY)?this.doRevertAnimation(r,this.revertDuration):setTimeout(r,0)}doRevertAnimation(e,n){let r=this.mirrorEl,i=this.sourceEl.getBoundingClientRect();r.style.transition="top "+n+"ms,left "+n+"ms",wl(r,{left:i.left,top:i.top}),yP(r,()=>{r.style.transition="",e()})}cleanup(){this.mirrorEl&&(gm(this.mirrorEl),this.mirrorEl=null),this.sourceEl=null}updateElPosition(){this.sourceEl&&this.isVisible&&wl(this.getMirrorEl(),{left:this.sourceElRect.left+this.deltaX,top:this.sourceElRect.top+this.deltaY})}getMirrorEl(){let e=this.sourceElRect,n=this.mirrorEl;return n||(n=this.mirrorEl=this.sourceEl.cloneNode(!0),n.style.userSelect="none",n.style.webkitUserSelect="none",n.style.pointerEvents="none",n.classList.add("fc-event-dragging"),wl(n,{position:"fixed",zIndex:this.zIndex,visibility:"",boxSizing:"border-box",width:e.right-e.left,height:e.bottom-e.top,right:"auto",bottom:"auto",margin:0}),this.parentNode.appendChild(n)),n}}class jC extends Fm{constructor(e,n){super(),this.handleScroll=()=>{this.scrollTop=this.scrollController.getScrollTop(),this.scrollLeft=this.scrollController.getScrollLeft(),this.handleScrollChange()},this.scrollController=e,this.doesListening=n,this.scrollTop=this.origScrollTop=e.getScrollTop(),this.scrollLeft=this.origScrollLeft=e.getScrollLeft(),this.scrollWidth=e.getScrollWidth(),this.scrollHeight=e.getScrollHeight(),this.clientWidth=e.getClientWidth(),this.clientHeight=e.getClientHeight(),this.clientRect=this.computeClientRect(),this.doesListening&&this.getEventTarget().addEventListener("scroll",this.handleScroll)}destroy(){this.doesListening&&this.getEventTarget().removeEventListener("scroll",this.handleScroll)}getScrollTop(){return this.scrollTop}getScrollLeft(){return this.scrollLeft}setScrollTop(e){this.scrollController.setScrollTop(e),this.doesListening||(this.scrollTop=Math.max(Math.min(e,this.getMaxScrollTop()),0),this.handleScrollChange())}setScrollLeft(e){this.scrollController.setScrollLeft(e),this.doesListening||(this.scrollLeft=Math.max(Math.min(e,this.getMaxScrollLeft()),0),this.handleScrollChange())}getClientWidth(){return this.clientWidth}getClientHeight(){return this.clientHeight}getScrollWidth(){return this.scrollWidth}getScrollHeight(){return this.scrollHeight}handleScrollChange(){}}class zC extends jC{constructor(e,n){super(new WL(e),n)}getEventTarget(){return this.scrollController.el}computeClientRect(){return UL(this.scrollController.el)}}class xH extends jC{constructor(e){super(new VL,e)}getEventTarget(){return window}computeClientRect(){return{left:this.scrollLeft,right:this.scrollLeft+this.clientWidth,top:this.scrollTop,bottom:this.scrollTop+this.clientHeight}}handleScrollChange(){this.clientRect=this.computeClientRect()}}const eS=typeof performance=="function"?performance.now:Date.now;class EH{constructor(){this.isEnabled=!0,this.scrollQuery=[window,".fc-scroller"],this.edgeThreshold=50,this.maxVelocity=300,this.pointerScreenX=null,this.pointerScreenY=null,this.isAnimating=!1,this.scrollCaches=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.animate=()=>{if(this.isAnimating){let e=this.computeBestEdge(this.pointerScreenX+window.scrollX,this.pointerScreenY+window.scrollY);if(e){let n=eS();this.handleSide(e,(n-this.msSinceRequest)/1e3),this.requestAnimation(n)}else this.isAnimating=!1}}}start(e,n,r){this.isEnabled&&(this.scrollCaches=this.buildCaches(r),this.pointerScreenX=null,this.pointerScreenY=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.handleMove(e,n))}handleMove(e,n){if(this.isEnabled){let r=e-window.scrollX,i=n-window.scrollY,s=this.pointerScreenY===null?0:i-this.pointerScreenY,a=this.pointerScreenX===null?0:r-this.pointerScreenX;s<0?this.everMovedUp=!0:s>0&&(this.everMovedDown=!0),a<0?this.everMovedLeft=!0:a>0&&(this.everMovedRight=!0),this.pointerScreenX=r,this.pointerScreenY=i,this.isAnimating||(this.isAnimating=!0,this.requestAnimation(eS()))}}stop(){if(this.isEnabled){this.isAnimating=!1;for(let e of this.scrollCaches)e.destroy();this.scrollCaches=null}}requestAnimation(e){this.msSinceRequest=e,requestAnimationFrame(this.animate)}handleSide(e,n){let{scrollCache:r}=e,{edgeThreshold:i}=this,s=i-e.distance,a=s*s/(i*i)*this.maxVelocity*n,l=1;switch(e.name){case"left":l=-1;case"right":r.setScrollLeft(r.getScrollLeft()+a*l);break;case"top":l=-1;case"bottom":r.setScrollTop(r.getScrollTop()+a*l);break}}computeBestEdge(e,n){let{edgeThreshold:r}=this,i=null,s=this.scrollCaches||[];for(let a of s){let l=a.clientRect,u=e-l.left,d=l.right-e,f=n-l.top,p=l.bottom-n;u>=0&&d>=0&&f>=0&&p>=0&&(f<=r&&this.everMovedUp&&a.canScrollUp()&&(!i||i.distance>f)&&(i={scrollCache:a,name:"top",distance:f}),p<=r&&this.everMovedDown&&a.canScrollDown()&&(!i||i.distance>p)&&(i={scrollCache:a,name:"bottom",distance:p}),u<=r&&this.everMovedLeft&&a.canScrollLeft()&&(!i||i.distance>u)&&(i={scrollCache:a,name:"left",distance:u}),d<=r&&this.everMovedRight&&a.canScrollRight()&&(!i||i.distance>d)&&(i={scrollCache:a,name:"right",distance:d}))}return i}buildCaches(e){return this.queryScrollEls(e).map(n=>n===window?new xH(!1):new zC(n,!1))}queryScrollEls(e){let n=[];for(let r of this.scrollQuery)typeof r=="object"?n.push(r):n.push(...Array.prototype.slice.call(e.getRootNode().querySelectorAll(r)));return n}}class sc extends GL{constructor(e,n){super(e),this.containerEl=e,this.delay=null,this.minDistance=0,this.touchScrollAllowed=!0,this.mirrorNeedsRevert=!1,this.isInteracting=!1,this.isDragging=!1,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,this.delayTimeoutId=null,this.onPointerDown=i=>{this.isDragging||(this.isInteracting=!0,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,bP(document.body),SP(document.body),i.isTouch||i.origEvent.preventDefault(),this.emitter.trigger("pointerdown",i),this.isInteracting&&!this.pointer.shouldIgnoreMove&&(this.mirror.setIsVisible(!1),this.mirror.start(i.subjectEl,i.pageX,i.pageY),this.startDelay(i),this.minDistance||this.handleDistanceSurpassed(i)))},this.onPointerMove=i=>{if(this.isInteracting){if(this.emitter.trigger("pointermove",i),!this.isDistanceSurpassed){let s=this.minDistance,a,{deltaX:l,deltaY:u}=i;a=l*l+u*u,a>=s*s&&this.handleDistanceSurpassed(i)}this.isDragging&&(i.origEvent.type!=="scroll"&&(this.mirror.handleMove(i.pageX,i.pageY),this.autoScroller.handleMove(i.pageX,i.pageY)),this.emitter.trigger("dragmove",i))}},this.onPointerUp=i=>{this.isInteracting&&(this.isInteracting=!1,_P(document.body),wP(document.body),this.emitter.trigger("pointerup",i),this.isDragging&&(this.autoScroller.stop(),this.tryStopDrag(i)),this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null))};let r=this.pointer=new LC(e);r.emitter.on("pointerdown",this.onPointerDown),r.emitter.on("pointermove",this.onPointerMove),r.emitter.on("pointerup",this.onPointerUp),n&&(r.selector=n),this.mirror=new wH,this.autoScroller=new EH}destroy(){this.pointer.destroy(),this.onPointerUp({})}startDelay(e){typeof this.delay=="number"?this.delayTimeoutId=setTimeout(()=>{this.delayTimeoutId=null,this.handleDelayEnd(e)},this.delay):this.handleDelayEnd(e)}handleDelayEnd(e){this.isDelayEnded=!0,this.tryStartDrag(e)}handleDistanceSurpassed(e){this.isDistanceSurpassed=!0,this.tryStartDrag(e)}tryStartDrag(e){this.isDelayEnded&&this.isDistanceSurpassed&&(!this.pointer.wasTouchScroll||this.touchScrollAllowed)&&(this.isDragging=!0,this.mirrorNeedsRevert=!1,this.autoScroller.start(e.pageX,e.pageY,this.containerEl),this.emitter.trigger("dragstart",e),this.touchScrollAllowed===!1&&this.pointer.cancelTouchScroll())}tryStopDrag(e){this.mirror.stop(this.mirrorNeedsRevert,this.stopDrag.bind(this,e))}stopDrag(e){this.isDragging=!1,this.emitter.trigger("dragend",e)}setIgnoreMove(e){this.pointer.shouldIgnoreMove=e}setMirrorIsVisible(e){this.mirror.setIsVisible(e)}setMirrorNeedsRevert(e){this.mirrorNeedsRevert=e}setAutoScrollEnabled(e){this.autoScroller.isEnabled=e}}class CH{constructor(e){this.el=e,this.origRect=Lm(e),this.scrollCaches=QE(e).map(n=>new zC(n,!0))}destroy(){for(let e of this.scrollCaches)e.destroy()}computeLeft(){let e=this.origRect.left;for(let n of this.scrollCaches)e+=n.origScrollLeft-n.getScrollLeft();return e}computeTop(){let e=this.origRect.top;for(let n of this.scrollCaches)e+=n.origScrollTop-n.getScrollTop();return e}isWithinClipping(e,n){let r={left:e,top:n};for(let i of this.scrollCaches)if(!TH(i.getEventTarget())&&!kL(r,i.clientRect))return!1;return!0}}function TH(t){let e=t.tagName;return e==="HTML"||e==="BODY"}class ff{constructor(e,n){this.useSubjectCenter=!1,this.requireInitial=!0,this.disablePointCheck=!1,this.initialHit=null,this.movingHit=null,this.finalHit=null,this.handlePointerDown=r=>{let{dragging:i}=this;this.initialHit=null,this.movingHit=null,this.finalHit=null,this.prepareHits(),this.processFirstCoord(r),this.initialHit||!this.requireInitial?(i.setIgnoreMove(!1),this.emitter.trigger("pointerdown",r)):i.setIgnoreMove(!0)},this.handleDragStart=r=>{this.emitter.trigger("dragstart",r),this.handleMove(r,!0)},this.handleDragMove=r=>{this.emitter.trigger("dragmove",r),this.handleMove(r)},this.handlePointerUp=r=>{this.releaseHits(),this.emitter.trigger("pointerup",r)},this.handleDragEnd=r=>{this.movingHit&&this.emitter.trigger("hitupdate",null,!0,r),this.finalHit=this.movingHit,this.movingHit=null,this.emitter.trigger("dragend",r)},this.droppableStore=n,e.emitter.on("pointerdown",this.handlePointerDown),e.emitter.on("dragstart",this.handleDragStart),e.emitter.on("dragmove",this.handleDragMove),e.emitter.on("pointerup",this.handlePointerUp),e.emitter.on("dragend",this.handleDragEnd),this.dragging=e,this.emitter=new cf}processFirstCoord(e){let n={left:e.pageX,top:e.pageY},r=n,i=e.subjectEl,s;i instanceof HTMLElement&&(s=Lm(i),r=AL(r,s));let a=this.initialHit=this.queryHitForOffset(r.left,r.top);if(a){if(this.useSubjectCenter&&s){let l=GE(s,a.rect);l&&(r=RL(l))}this.coordAdjust=OL(r,n)}else this.coordAdjust={left:0,top:0}}handleMove(e,n){let r=this.queryHitForOffset(e.pageX+this.coordAdjust.left,e.pageY+this.coordAdjust.top);(n||!hf(this.movingHit,r))&&(this.movingHit=r,this.emitter.trigger("hitupdate",r,!1,e))}prepareHits(){this.offsetTrackers=zi(this.droppableStore,e=>(e.component.prepareHits(),new CH(e.el)))}releaseHits(){let{offsetTrackers:e}=this;for(let n in e)e[n].destroy();this.offsetTrackers={}}queryHitForOffset(e,n){let{droppableStore:r,offsetTrackers:i}=this,s=null;for(let a in r){let l=r[a].component,u=i[a];if(u&&u.isWithinClipping(e,n)){let d=u.computeLeft(),f=u.computeTop(),p=e-d,m=n-f,{origRect:v}=u,b=v.right-v.left,_=v.bottom-v.top;if(p>=0&&p<b&&m>=0&&m<_){let w=l.queryHit(p,m,b,_);w&&of(w.dateProfile.activeRange,w.dateSpan.range)&&(this.disablePointCheck||u.el.contains(u.el.getRootNode().elementFromPoint(p+d-window.scrollX,m+f-window.scrollY)))&&(!s||w.layer>s.layer)&&(w.componentId=a,w.context=l.context,w.rect.left+=d,w.rect.right+=d,w.rect.top+=f,w.rect.bottom+=f,s=w)}}}return s}}function hf(t,e){return!t&&!e?!0:!!t!=!!e?!1:vL(t.dateSpan,e.dateSpan)}function HC(t,e){let n={};for(let r of e.pluginHooks.datePointTransforms)Object.assign(n,r(t,e));return Object.assign(n,DH(t,e.dateEnv)),n}function DH(t,e){return{date:e.toDate(t.range.start),dateStr:e.formatIso(t.range.start,{omitTime:t.allDay}),allDay:t.allDay}}class kH extends xo{constructor(e){super(e),this.handlePointerDown=r=>{let{dragging:i}=this,s=r.origEvent.target;i.setIgnoreMove(!this.component.isValidDateDownEl(s))},this.handleDragEnd=r=>{let{component:i}=this,{pointer:s}=this.dragging;if(!s.wasTouchScroll){let{initialHit:a,finalHit:l}=this.hitDragging;if(a&&l&&hf(a,l)){let{context:u}=i,d=Object.assign(Object.assign({},HC(a.dateSpan,u)),{dayEl:a.dayEl,jsEvent:r.origEvent,view:u.viewApi||u.calendarApi.view});u.emitter.trigger("dateClick",d)}}},this.dragging=new sc(e.el),this.dragging.autoScroller.isEnabled=!1;let n=this.hitDragging=new ff(this.dragging,Im(e));n.emitter.on("pointerdown",this.handlePointerDown),n.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}}class AH extends xo{constructor(e){super(e),this.dragSelection=null,this.handlePointerDown=a=>{let{component:l,dragging:u}=this,{options:d}=l.context,f=d.selectable&&l.isValidDateDownEl(a.origEvent.target);u.setIgnoreMove(!f),u.delay=a.isTouch?RH(l):null},this.handleDragStart=a=>{this.component.context.calendarApi.unselect(a)},this.handleHitUpdate=(a,l)=>{let{context:u}=this.component,d=null,f=!1;if(a){let p=this.hitDragging.initialHit;a.componentId===p.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(p,a)||(d=OH(p,a,u.pluginHooks.dateSelectionTransformers)),(!d||!JL(d,a.dateProfile,u))&&(f=!0,d=null)}d?u.dispatch({type:"SELECT_DATES",selection:d}):l||u.dispatch({type:"UNSELECT_DATES"}),f?mm():vm(),l||(this.dragSelection=d)},this.handlePointerUp=a=>{this.dragSelection&&(HE(this.dragSelection,a,this.component.context),this.dragSelection=null)};let{component:n}=e,{options:r}=n.context,i=this.dragging=new sc(e.el);i.touchScrollAllowed=!1,i.minDistance=r.selectMinDistance||0,i.autoScroller.isEnabled=r.dragScroll;let s=this.hitDragging=new ff(this.dragging,Im(e));s.emitter.on("pointerdown",this.handlePointerDown),s.emitter.on("dragstart",this.handleDragStart),s.emitter.on("hitupdate",this.handleHitUpdate),s.emitter.on("pointerup",this.handlePointerUp)}destroy(){this.dragging.destroy()}}function RH(t){let{options:e}=t.context,n=e.selectLongPressDelay;return n==null&&(n=e.longPressDelay),n}function OH(t,e,n){let r=t.dateSpan,i=e.dateSpan,s=[r.range.start,r.range.end,i.range.start,i.range.end];s.sort(DP);let a={};for(let l of n){let u=l(t,e);if(u===!1)return null;u&&Object.assign(a,u)}return a.range={start:s[0],end:s[3]},a.allDay=r.allDay,a}class ac extends xo{constructor(e){super(e),this.subjectEl=null,this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=a=>{let l=a.origEvent.target,{component:u,dragging:d}=this,{mirror:f}=d,{options:p}=u.context,m=u.context;this.subjectEl=a.subjectEl;let v=this.subjectSeg=co(a.subjectEl),_=(this.eventRange=v.eventRange).instance.instanceId;this.relevantEvents=km(m.getCurrentData().eventStore,_),d.minDistance=a.isTouch?0:p.eventDragMinDistance,d.delay=a.isTouch&&_!==u.props.eventSelection?NH(u):null,p.fixedMirrorParent?f.parentNode=p.fixedMirrorParent:f.parentNode=kn(l,".fc"),f.revertDuration=p.dragRevertDuration;let w=u.isValidSegDownEl(l)&&!kn(l,".fc-event-resizer");d.setIgnoreMove(!w),this.isDragging=w&&a.subjectEl.classList.contains("fc-event-draggable")},this.handleDragStart=a=>{let l=this.component.context,u=this.eventRange,d=u.instance.instanceId;a.isTouch?d!==this.component.props.eventSelection&&l.dispatch({type:"SELECT_EVENT",eventInstanceId:d}):l.dispatch({type:"UNSELECT_EVENT"}),this.isDragging&&(l.calendarApi.unselect(a),l.emitter.trigger("eventDragStart",{el:this.subjectEl,event:new At(l,u.def,u.instance),jsEvent:a.origEvent,view:l.viewApi}))},this.handleHitUpdate=(a,l)=>{if(!this.isDragging)return;let u=this.relevantEvents,d=this.hitDragging.initialHit,f=this.component.context,p=null,m=null,v=null,b=!1,_={affectedEvents:u,mutatedEvents:ur(),isEvent:!0};if(a){p=a.context;let w=p.options;f===p||w.editable&&w.droppable?(m=MH(d,a,this.eventRange.instance.range.start,p.getCurrentData().pluginHooks.eventDragMutationMassagers),m&&(v=Om(u,p.getCurrentData().eventUiBases,m,p),_.mutatedEvents=v,rC(_,a.dateProfile,p)||(b=!0,m=null,v=null,_.mutatedEvents=ur()))):p=null}this.displayDrag(p,_),b?mm():vm(),l||(f===p&&hf(d,a)&&(m=null),this.dragging.setMirrorNeedsRevert(!m),this.dragging.setMirrorIsVisible(!a||!this.subjectEl.getRootNode().querySelector(".fc-event-mirror")),this.receivingContext=p,this.validMutation=m,this.mutatedRelevantEvents=v)},this.handlePointerUp=()=>{this.isDragging||this.cleanup()},this.handleDragEnd=a=>{if(this.isDragging){let l=this.component.context,u=l.viewApi,{receivingContext:d,validMutation:f}=this,p=this.eventRange.def,m=this.eventRange.instance,v=new At(l,p,m),b=this.relevantEvents,_=this.mutatedRelevantEvents,{finalHit:w}=this.hitDragging;if(this.clearDrag(),l.emitter.trigger("eventDragStop",{el:this.subjectEl,event:v,jsEvent:a.origEvent,view:u}),f){if(d===l){let x=new At(l,_.defs[p.defId],m?_.instances[m.instanceId]:null);l.dispatch({type:"MERGE_EVENTS",eventStore:_});let C={oldEvent:v,event:x,relatedEvents:sa(_,l,m),revert(){l.dispatch({type:"MERGE_EVENTS",eventStore:b})}},k={};for(let R of l.getCurrentData().pluginHooks.eventDropTransformers)Object.assign(k,R(f,l));l.emitter.trigger("eventDrop",Object.assign(Object.assign(Object.assign({},C),k),{el:a.subjectEl,delta:f.datesDelta,jsEvent:a.origEvent,view:u})),l.emitter.trigger("eventChange",C)}else if(d){let x={event:v,relatedEvents:sa(b,l,m),revert(){l.dispatch({type:"MERGE_EVENTS",eventStore:b})}};l.emitter.trigger("eventLeave",Object.assign(Object.assign({},x),{draggedEl:a.subjectEl,view:u})),l.dispatch({type:"REMOVE_EVENTS",eventStore:b}),l.emitter.trigger("eventRemove",x);let C=_.defs[p.defId],k=_.instances[m.instanceId],R=new At(d,C,k);d.dispatch({type:"MERGE_EVENTS",eventStore:_});let A={event:R,relatedEvents:sa(_,d,k),revert(){d.dispatch({type:"REMOVE_EVENTS",eventStore:_})}};d.emitter.trigger("eventAdd",A),a.isTouch&&d.dispatch({type:"SELECT_EVENT",eventInstanceId:m.instanceId}),d.emitter.trigger("drop",Object.assign(Object.assign({},HC(w.dateSpan,d)),{draggedEl:a.subjectEl,jsEvent:a.origEvent,view:w.context.viewApi})),d.emitter.trigger("eventReceive",Object.assign(Object.assign({},A),{draggedEl:a.subjectEl,view:w.context.viewApi}))}}else l.emitter.trigger("_noEventDrop")}this.cleanup()};let{component:n}=this,{options:r}=n.context,i=this.dragging=new sc(e.el);i.pointer.selector=ac.SELECTOR,i.touchScrollAllowed=!1,i.autoScroller.isEnabled=r.dragScroll;let s=this.hitDragging=new ff(this.dragging,kg);s.useSubjectCenter=e.useEventCenter,s.emitter.on("pointerdown",this.handlePointerDown),s.emitter.on("dragstart",this.handleDragStart),s.emitter.on("hitupdate",this.handleHitUpdate),s.emitter.on("pointerup",this.handlePointerUp),s.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}displayDrag(e,n){let r=this.component.context,i=this.receivingContext;i&&i!==e&&(i===r?i.dispatch({type:"SET_EVENT_DRAG",state:{affectedEvents:n.affectedEvents,mutatedEvents:ur(),isEvent:!0}}):i.dispatch({type:"UNSET_EVENT_DRAG"})),e&&e.dispatch({type:"SET_EVENT_DRAG",state:n})}clearDrag(){let e=this.component.context,{receivingContext:n}=this;n&&n.dispatch({type:"UNSET_EVENT_DRAG"}),e!==n&&e.dispatch({type:"UNSET_EVENT_DRAG"})}cleanup(){this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null}}ac.SELECTOR=".fc-event-draggable, .fc-event-resizable";function MH(t,e,n,r){let i=t.dateSpan,s=e.dateSpan,a=i.range.start,l=s.range.start,u={};i.allDay!==s.allDay&&(u.allDay=s.allDay,u.hasEnd=e.context.options.allDayMaintainDuration,s.allDay?a=bt(n):a=n);let d=eo(a,l,t.context.dateEnv,t.componentId===e.componentId?t.largeUnit:null);d.milliseconds&&(u.allDay=!1);let f={datesDelta:d,standardProps:u};for(let p of r)p(f,t,e);return f}function NH(t){let{options:e}=t.context,n=e.eventLongPressDelay;return n==null&&(n=e.longPressDelay),n}class IH extends xo{constructor(e){super(e),this.draggingSegEl=null,this.draggingSeg=null,this.eventRange=null,this.relevantEvents=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=s=>{let{component:a}=this,l=this.querySegEl(s),u=co(l),d=this.eventRange=u.eventRange;this.dragging.minDistance=a.context.options.eventDragMinDistance,this.dragging.setIgnoreMove(!this.component.isValidSegDownEl(s.origEvent.target)||s.isTouch&&this.component.props.eventSelection!==d.instance.instanceId)},this.handleDragStart=s=>{let{context:a}=this.component,l=this.eventRange;this.relevantEvents=km(a.getCurrentData().eventStore,this.eventRange.instance.instanceId);let u=this.querySegEl(s);this.draggingSegEl=u,this.draggingSeg=co(u),a.calendarApi.unselect(),a.emitter.trigger("eventResizeStart",{el:u,event:new At(a,l.def,l.instance),jsEvent:s.origEvent,view:a.viewApi})},this.handleHitUpdate=(s,a,l)=>{let{context:u}=this.component,d=this.relevantEvents,f=this.hitDragging.initialHit,p=this.eventRange.instance,m=null,v=null,b=!1,_={affectedEvents:d,mutatedEvents:ur(),isEvent:!0};s&&(s.componentId===f.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(f,s)||(m=PH(f,s,l.subjectEl.classList.contains("fc-event-resizer-start"),p.range))),m&&(v=Om(d,u.getCurrentData().eventUiBases,m,u),_.mutatedEvents=v,rC(_,s.dateProfile,u)||(b=!0,m=null,v=null,_.mutatedEvents=null)),v?u.dispatch({type:"SET_EVENT_RESIZE",state:_}):u.dispatch({type:"UNSET_EVENT_RESIZE"}),b?mm():vm(),a||(m&&hf(f,s)&&(m=null),this.validMutation=m,this.mutatedRelevantEvents=v)},this.handleDragEnd=s=>{let{context:a}=this.component,l=this.eventRange.def,u=this.eventRange.instance,d=new At(a,l,u),f=this.relevantEvents,p=this.mutatedRelevantEvents;if(a.emitter.trigger("eventResizeStop",{el:this.draggingSegEl,event:d,jsEvent:s.origEvent,view:a.viewApi}),this.validMutation){let m=new At(a,p.defs[l.defId],u?p.instances[u.instanceId]:null);a.dispatch({type:"MERGE_EVENTS",eventStore:p});let v={oldEvent:d,event:m,relatedEvents:sa(p,a,u),revert(){a.dispatch({type:"MERGE_EVENTS",eventStore:f})}};a.emitter.trigger("eventResize",Object.assign(Object.assign({},v),{el:this.draggingSegEl,startDelta:this.validMutation.startDelta||Qe(0),endDelta:this.validMutation.endDelta||Qe(0),jsEvent:s.origEvent,view:a.viewApi})),a.emitter.trigger("eventChange",v)}else a.emitter.trigger("_noEventResize");this.draggingSeg=null,this.relevantEvents=null,this.validMutation=null};let{component:n}=e,r=this.dragging=new sc(e.el);r.pointer.selector=".fc-event-resizer",r.touchScrollAllowed=!1,r.autoScroller.isEnabled=n.context.options.dragScroll;let i=this.hitDragging=new ff(this.dragging,Im(e));i.emitter.on("pointerdown",this.handlePointerDown),i.emitter.on("dragstart",this.handleDragStart),i.emitter.on("hitupdate",this.handleHitUpdate),i.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}querySegEl(e){return kn(e.subjectEl,".fc-event")}}function PH(t,e,n,r){let i=t.context.dateEnv,s=t.dateSpan.range.start,a=e.dateSpan.range.start,l=eo(s,a,i,t.largeUnit);if(n){if(i.add(r.start,l)<r.end)return{startDelta:l}}else if(i.add(r.end,l)>r.start)return{endDelta:l};return null}class LH{constructor(e){this.context=e,this.isRecentPointerDateSelect=!1,this.matchesCancel=!1,this.matchesEvent=!1,this.onSelect=r=>{r.jsEvent&&(this.isRecentPointerDateSelect=!0)},this.onDocumentPointerDown=r=>{let i=this.context.options.unselectCancel,s=yE(r.origEvent);this.matchesCancel=!!kn(s,i),this.matchesEvent=!!kn(s,ac.SELECTOR)},this.onDocumentPointerUp=r=>{let{context:i}=this,{documentPointer:s}=this,a=i.getCurrentData();if(!s.wasTouchScroll){if(a.dateSelection&&!this.isRecentPointerDateSelect){let l=i.options.unselectAuto;l&&(!l||!this.matchesCancel)&&i.calendarApi.unselect(r)}a.eventSelection&&!this.matchesEvent&&i.dispatch({type:"UNSELECT_EVENT"})}this.isRecentPointerDateSelect=!1};let n=this.documentPointer=new LC(document);n.shouldIgnoreMove=!0,n.shouldWatchScroll=!1,n.emitter.on("pointerdown",this.onDocumentPointerDown),n.emitter.on("pointerup",this.onDocumentPointerUp),e.emitter.on("select",this.onSelect)}destroy(){this.context.emitter.off("select",this.onSelect),this.documentPointer.destroy()}}const FH={fixedMirrorParent:W},jH={dateClick:W,eventDragStart:W,eventDragStop:W,eventDrop:W,eventResizeStart:W,eventResizeStop:W,eventResize:W,drop:W,eventReceive:W,eventLeave:W};zm.dataAttrPrefix="";var zH=ui({name:"@fullcalendar/interaction",componentInteractions:[kH,AH,ac,IH],calendarInteractions:[LH],elementDraggingImpl:sc,optionRefiners:FH,listenerRefiners:jH});function HH({machineId:t,refreshTrigger:e}){const[n,r]=T.useState(!1),[i,s]=T.useState({}),a=Q.useRef(null),{entities:l}=fm(),{entities:u}=yg(),{machineAvailability:d,loadMachineAvailabilityForDateRange:f,toggleMachineHourAvailability:p,getTaskOccupiedSegments:m}=ai(),{showAlert:v}=Wi(),b=l.find(A=>A.id===t),_=T.useCallback(A=>{try{const M=m(A);return M&&M.length>0?M:A.scheduled_start_time&&A.scheduled_end_time?[{start:new Date(A.scheduled_start_time),end:new Date(A.scheduled_end_time),duration:(new Date(A.scheduled_end_time).getTime()-new Date(A.scheduled_start_time).getTime())/(1e3*60*60)}]:[]}catch(M){return console.warn("Failed to get task segments:",M),[]}},[m]),w=T.useMemo(()=>{if(!b)return[];const A=[];return u.filter(M=>M.status==="SCHEDULED"&&M.scheduled_machine_id===b.id&&M.scheduled_start_time&&M.scheduled_end_time).forEach(M=>{const P=_(M);P.forEach((O,z)=>{const B=P.length>1;A.push({id:`${M.id}-segment-${z}`,title:`${M.odp_number} - ${M.article_code}${B?` (${z+1}/${P.length})`:""}`,start:O.start,end:O.end,backgroundColor:B?"#8b5cf6":"#3b82f6",borderColor:B?"#7c3aed":"#2563eb",textColor:"#ffffff",extendedProps:{taskId:M.id,odpNumber:M.odp_number,articleCode:M.article_code,quantity:M.quantity,status:M.status,segmentIndex:z,totalSegments:P.length,isSplitTask:B}})})}),A},[b,u,_]),x=T.useMemo(()=>{if(!d||!b)return[];const A=[];return Object.entries(d).forEach(([M,P])=>{if(Array.isArray(P)){const O=P.find(z=>z.machine_id===t);O&&O.unavailable_hours&&(Array.isArray(O.unavailable_hours)?O.unavailable_hours:[]).forEach(B=>{const $=parseInt(B);if($<6||$>=22)return;const ee=new Date(M);ee.setUTCHours($,0,0,0);const re=new Date(ee);re.setUTCHours($+1,0,0,0),A.push({id:`availability-${M}-${B}`,title:"Unavailable",start:ee,end:re,backgroundColor:"#ef4444",borderColor:"#dc2626",textColor:"#ffffff",display:"background",extendedProps:{type:"availability",date:M,hour:parseInt(B)}})})}}),A},[d,t,b]);T.useEffect(()=>{(async()=>{if(t){r(!0);try{const M=new Date,P=new Date(Date.UTC(M.getUTCFullYear(),M.getUTCMonth(),1)),O=new Date(Date.UTC(M.getUTCFullYear(),M.getUTCMonth()+1,0));await f(t,vn(P,"yyyy-MM-dd"),vn(O,"yyyy-MM-dd"))}catch(M){console.error("Failed to load machine availability data:",M)}finally{r(!1)}}})()},[t,e]);const C=T.useCallback(async A=>{const M=A.date,P=vn(M,"yyyy-MM-dd"),O=M.getUTCHours();if(w.some($=>{const ee=new Date($.start),re=new Date($.end),he=new Date(M);return he>=ee&&he<re})){v("Cannot mark time slot as unavailable - it has scheduled tasks","error");return}if(!b)return;const B=`${P}-${O}`;s($=>({...$,[B]:!0}));try{await p(b.id,P,O)}catch($){console.error("Failed to toggle machine hour availability:",$),v("An unexpected error occurred.","error")}finally{s($=>({...$,[B]:!1}))}},[w,v,b,p]),k=T.useCallback(A=>{const M=A.event,P=M.extendedProps;P.type==="availability"?console.log("Availability event clicked:",P):console.log("Scheduled task clicked:",{odpNumber:P.odpNumber,articleCode:P.articleCode,quantity:P.quantity,start:M.start,end:M.end})},[]),R=T.useMemo(()=>({plugins:[yz,rH,vH,zH],initialView:"dayGridMonth",initialDate:new Date,headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},height:"auto",locale:"it",timeZone:"UTC",firstDay:rM.APP.FIRST_DAY_OF_WEEK,slotMinTime:"06:00:00",slotMaxTime:"22:00:00",slotDuration:"01:00:00",slotLabelInterval:"01:00:00",allDaySlot:!1,weekends:!0,editable:!1,selectable:!0,selectMirror:!0,dayMaxEvents:!0,eventDisplay:"block",eventTimeFormat:{hour:"2-digit",minute:"2-digit",meridiem:!1,hour12:!1},dayHeaderFormat:{weekday:"short",day:"numeric"},slotLabelFormat:{hour:"2-digit",minute:"2-digit",meridiem:!1,hour12:!1},buttonText:{today:"Oggi",month:"Mese",week:"Settimana",day:"Giorno"},eventClick:k,dateClick:C,events:[...w,...x]}),[k,C,w,x]);return b?n?E.jsx("div",{className:"loading",children:"Loading calendar data..."}):E.jsx("div",{className:"fullcalendar-container",children:E.jsx(xC,{ref:a,...R})}):E.jsx("div",{className:"loading",children:"Loading machine data..."})}function UH(){const{machineId:t}=qd(),[e,n]=T.useState(0),{getMachineById:r}=fm(),{isLoading:i,isInitialized:s}=Wi(),{init:a,cleanup:l}=nf(),u=r(t);if(T.useEffect(()=>{if(!s){console.log("Initializing main store...");const f=a(),p=new Promise((m,v)=>setTimeout(()=>v(new Error("Initialization timeout")),1e4));Promise.race([f,p]).catch(m=>{console.error("Initialization failed or timed out:",m)})}return()=>{l()}},[a,s,l]),i)return E.jsx("div",{className:"p-1 bg-white rounded shadow-sm border",children:E.jsxs("div",{className:"text-center py-1 text-gray-500 text-[10px]",children:["Caricamento calendario macchina... (Loading: ",i.toString(),", Initialized: ",s.toString(),")"]})});if(!u)return E.jsx("div",{className:"p-1 bg-white rounded shadow-sm border",children:E.jsxs("div",{className:"text-center py-1 text-red-600 text-[10px]",children:["Macchina non trovata (ID: ",t,", Initialized: ",s.toString(),")"]})});const d=()=>{n(f=>f+1)};return E.jsxs("div",{className:"p-1 bg-white rounded shadow-sm border",children:[E.jsx(HI,{title:"Calendario Disponibilit Macchina"}),E.jsx("div",{className:"mb-1",children:E.jsx("h3",{className:"text-[10px] font-semibold text-gray-900",children:u.machine_name})}),!1,E.jsx(UI,{machineId:u.id,currentDate:new Date,onSuccess:d}),E.jsx(HH,{machineId:u.id,refreshTrigger:e})]})}function BH(){const{data:t=[],isLoading:e,error:n}=dm(),r=AI(),{selectedWorkCenter:i,isInitialized:s,showConfirmDialog:a}=Wi(),{init:l,cleanup:u}=nf(),d=ci(),f=T.useMemo(()=>i?i===tt.BOTH?t:t.filter(b=>b.work_center===i):[],[t,i]);T.useEffect(()=>(s||l(),()=>{u()}),[l,s,u]);const p=T.useMemo(()=>[{header:"Nome Fase",accessorKey:"name"},{header:"Centro di Lavoro",accessorKey:"work_center"},{header:"Reparto",accessorKey:"department"},{header:"Numero Persone",accessorKey:"numero_persone"},{header:"V Stampa",accessorKey:"v_stampa"},{header:"T Setup Stampa (h)",accessorKey:"t_setup_stampa"},{header:"Costo H Stampa",accessorKey:"costo_h_stampa"},{header:"V Conf",accessorKey:"v_conf"},{header:"T Setup Conf (h)",accessorKey:"t_setup_conf"},{header:"Costo H Conf",accessorKey:"costo_h_conf"},{header:"Contenuto Fase",accessorKey:"contenuto_fase"}],[]),m=b=>{d(`/phases/${b.id}/edit`)},v=async b=>{a("Elimina Fase",`Sei sicuro di voler eliminare "${b.name}"? Questa azione non pu essere annullata.`,async()=>{try{await r.mutateAsync(b.id),ga(`Fase "${b.name}" eliminata con successo`)}catch(_){Di(_.message||"Errore durante l'eliminazione della fase")}},"danger")};return e?E.jsx("div",{children:"Caricamento dati fasi..."}):n?E.jsxs("div",{className:"text-center py-2 text-red-600 text-[10px]",children:["Errore nel caricamento delle fasi: ",n.message]}):i?E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("h1",{className:"text-2xl font-semibold text-foreground",children:"Lista Fasi"}),E.jsx(er,{to:"/phases/new",className:"inline-flex items-center px-4 py-2 border border-border rounded-md text-sm font-medium text-foreground bg-background hover:bg-muted",children:"Aggiungi Fase"})]}),E.jsx(sm,{columns:p,data:f,onEditRow:m,onDeleteRow:v,enableGlobalSearch:!1})]}):E.jsx("div",{className:"text-center py-2 text-red-600 text-[10px]",children:"Seleziona un centro di lavoro per visualizzare i dati delle fasi."})}function WH({phaseToEdit:t,onSuccess:e}){const{selectedWorkCenter:n}=Wi(),r=DI(),i=kI(),{handleAsync:s}=ma("PhasesForm"),a=!!t,l=T.useMemo(()=>{const f={...Zr};return n!==tt.BOTH&&(f.sections[0].fields[3].disabled=!0,f.sections[0].fields[3].defaultValue=n,f.sections[0].fields[3].helpText="Il centro di lavoro  impostato in base alla tua selezione di accesso"),f},[n]),u=T.useMemo(()=>({name:t?.name||"",department:t?.department||Zr.sections[0].fields[1].defaultValue,numero_persone:t?.numero_persone||Zr.sections[0].fields[2].defaultValue,work_center:t?.work_center||(n===tt.BOTH?Zr.sections[0].fields[3].defaultValue:n),v_stampa:t?.v_stampa||Zr.sections[1].fields[0].defaultValue,t_setup_stampa:t?.t_setup_stampa||Zr.sections[1].fields[1].defaultValue,costo_h_stampa:t?.costo_h_stampa||Zr.sections[1].fields[2].defaultValue,v_conf:t?.v_conf||Zr.sections[2].fields[0].defaultValue,t_setup_conf:t?.t_setup_conf||Zr.sections[2].fields[1].defaultValue,costo_h_conf:t?.costo_h_conf||Zr.sections[2].fields[2].defaultValue,contenuto_fase:t?.contenuto_fase||""}),[n,t]),d=async f=>{await s(async()=>{a?await i.mutateAsync({id:t.id,updates:f}):await r.mutateAsync(f),e&&e(),ga(a?"Fase aggiornata con successo":"Fase aggiunta con successo")},{context:a?"Update Phase":"Add Phase",fallbackMessage:a?"Aggiornamento fase fallito":"Aggiunta fase fallita"})};return E.jsx(Yd,{config:l,initialData:u,onSubmit:d,onSuccess:e,isEditMode:a})}function tS(){const{id:t}=qd(),e=ci(),{selectedWorkCenter:n}=Wi(),{isLoading:r,isInitialized:i,init:s,cleanup:a}=nf(),l=!!t,{data:u,isLoading:d,error:f}=TI(t);return T.useEffect(()=>(i||s(),()=>{a()}),[s,i,a]),T.useEffect(()=>{l&&!r&&!d&&!u&&!f&&e("/phases",{replace:!0})},[l,r,d,u,f,e]),r||l&&d?E.jsx("div",{children:"Caricamento..."}):l&&f?E.jsxs("div",{className:"text-center py-2 text-red-600 text-[10px]",children:["Errore nel caricamento della fase: ",f.message]}):l&&!u?E.jsx("div",{className:"text-center py-2 text-red-600 text-[10px]",children:"Fase non trovata."}):n?E.jsxs("div",{className:"space-y-6",children:[E.jsx("div",{className:"flex items-center justify-between",children:E.jsx("h1",{className:"text-2xl font-semibold text-foreground",children:l?`Modifica Fase: ${u?.name}`:"Aggiungi Nuova Fase"})}),E.jsx(WH,{phaseToEdit:u})]}):E.jsx("div",{className:"text-center py-2 text-red-600 text-[10px]",children:"Seleziona un centro di lavoro per gestire le fasi."})}function VH(){const{selectedWorkCenter:t,showConfirmDialog:e}=Yt(),n=ci(),{data:r=[],isLoading:i,error:s}=tf(),{data:a=[],isLoading:l}=ef(),{data:u=[],isLoading:d}=dm(),f=CI(),{handleAsync:p}=ma("BacklogListPage");if(s)return E.jsxs("div",{className:"text-center py-2 text-red-600 text-[10px]",children:["Errore nel caricamento degli ordini: ",s.message]});const m=T.useMemo(()=>{if(!t)return[];let x=r;return t!==tt.BOTH&&(x=r.filter(C=>C.work_center===t)),x.map(C=>({...C,machine_name:C.scheduled_machine_id?a.find(k=>k.id===C.scheduled_machine_id)?.machine_name||"Macchina non trovata":"Non programmato",phase_name:C.fase?u.find(k=>k.id===C.fase)?.name||"Fase non trovata":"Fase non assegnata",progress:C.progress||0,time_remaining:C.time_remaining||C.duration||0}))},[r,t,a,u]),v=i||l||d,b=T.useMemo(()=>[{header:"Numero ODP",accessorKey:"odp_number",cell:x=>{const C=x.row.original.status,k=x.getValue(),R=C==="SCHEDULED";return E.jsx("span",{className:R?"text-green-600 font-medium":"",children:k})}},{header:"Codice Articolo",accessorKey:"article_code"},{header:"Note ASD",accessorKey:"asd_notes",cell:x=>{const C=x.getValue();return C?E.jsx("div",{className:"max-w-[200px] truncate text-[10px]",title:C,children:C}):"N/A"}},{header:"Nome Cliente",accessorKey:"nome_cliente"},{header:"Quantit",accessorKey:"quantity"},{header:"Quantit Completata",accessorKey:"quantity_completed"},{header:"Altezza Busta (mm)",accessorKey:"bag_height"},{header:"Larghezza Busta (mm)",accessorKey:"bag_width"},{header:"Passo Busta (mm)",accessorKey:"bag_step"},{header:"Lotto Produzione",accessorKey:"production_lot"},{header:"Centro di Lavoro",accessorKey:"work_center"},{header:"Reparto",accessorKey:"department"},{header:"Lati Sigillati",accessorKey:"seal_sides"},{header:"Tipo Prodotto",accessorKey:"product_type"},{header:"Data Consegna",accessorKey:"delivery_date",cell:x=>x.getValue()?vn(new Date(x.getValue()),"yyyy-MM-dd"):"Non impostata"},{header:"Inizio Programmato",accessorKey:"scheduled_start_time",cell:x=>x.getValue()?new Date(x.getValue()).toISOString().replace("T"," ").replace(".000Z",""):"Non programmato"},{header:"Fine Programmata",accessorKey:"scheduled_end_time",cell:x=>x.getValue()?new Date(x.getValue()).toISOString().replace("T"," ").replace(".000Z",""):"Non programmato"},{header:"Codice Cliente Interno",accessorKey:"internal_customer_code"},{header:"Codice Cliente Esterno",accessorKey:"external_customer_code"},{header:"Riferimento Ordine Cliente",accessorKey:"customer_order_ref"},{header:"Note Libere",accessorKey:"user_notes"},{header:"Nome Fase",accessorKey:"phase_name"},{header:"Durata (ore)",accessorKey:"duration",cell:x=>{const C=x.getValue();return typeof C=="number"?C.toFixed(1):C}},{header:"Costo ()",accessorKey:"cost",cell:x=>{const C=x.getValue();return typeof C=="number"?C.toFixed(1):C}},{header:"Stato",accessorKey:"status"},{header:"Nome Macchina",accessorKey:"machine_name"},{header:"Progresso (%)",accessorKey:"progress",cell:x=>{const C=x.getValue();return typeof C=="number"?`${C}%`:C}},{header:"Tempo Rimanente (ore)",accessorKey:"time_remaining",cell:x=>{const C=x.getValue();return typeof C=="number"?C.toFixed(1):C}},{header:"Material ISP (%)",accessorKey:"material_availability_isp",cell:x=>{const C=x.getValue();if(typeof C!="number")return C||"N/A";const k=C<=39?"bg-gray-300":C<=69?"bg-yellow-400":"bg-green-400";return E.jsx("div",{className:`inline-flex items-center justify-center w-8 h-8 rounded-full ${k} text-black text-[10px] font-medium`,children:C})}},{header:"Material Lotti (%)",accessorKey:"material_availability_lotti",cell:x=>{const C=x.getValue();if(typeof C!="number")return C||"N/A";const k=C<=39?"bg-gray-300":C<=69?"bg-yellow-400":"bg-green-400";return E.jsx("div",{className:`inline-flex items-center justify-center w-8 h-8 rounded-full ${k} text-black text-[10px] font-medium`,children:C})}},{header:"Material Global (%)",accessorKey:"material_availability_global",cell:x=>{const C=x.getValue();if(typeof C!="number")return C||"N/A";const k=C<=39?"bg-gray-300":C<=69?"bg-yellow-400":"bg-green-400";return E.jsx("div",{className:`inline-flex items-center justify-center w-8 h-8 rounded-full ${k} text-black text-[10px] font-medium`,children:C})}}],[]);T.useMemo(()=>b.map(x=>x.accessorKey),[b]);const _=x=>{n(`/backlog/${x.id}/edit`)},w=async x=>{e("Elimina Ordine",`Sei sicuro di voler eliminare "${x.odp_number}"? Questa azione non pu essere annullata.`,async()=>{await p(async()=>{await f.mutateAsync(x.id)},{context:"Delete Order",fallbackMessage:"Eliminazione ordine fallita"})},"danger")};return v?E.jsx("div",{children:"Caricamento dati backlog..."}):t?E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("h1",{className:"text-2xl font-semibold text-foreground",children:"Lista Ordini"}),E.jsx(er,{to:"/backlog/new",className:"inline-flex items-center px-4 py-2 border border-border rounded-md text-sm font-medium text-foreground bg-background hover:bg-muted",children:"Aggiungi Ordine"})]}),E.jsx(sm,{columns:b,data:m,onEditRow:_,onDeleteRow:w,stickyColumns:["odp_number","article_code"],enableGlobalSearch:!1,enableFiltering:!1})]}):E.jsx("div",{className:"text-center py-2 text-red-600 text-[10px]",children:"Seleziona un centro di lavoro per visualizzare i dati del backlog."})}const $H=({onSuccess:t,orderToEdit:e})=>{const{selectedWorkCenter:n,showConflictDialog:r}=Wi(),{scheduleTaskFromSlot:i,unscheduleTask:s}=ai(),{calculateProductionMetrics:a,validatePhaseParameters:l,autoDetermineWorkCenter:u,autoDetermineDepartment:d}=dx(),{handleAsync:f}=ma("BacklogForm"),{validateOrder:p}=tM(),m=xI(),v=EI(),b=rr(),[_,w]=T.useState(null),x=!!e,C=T.useMemo(()=>{const ge={...jI};if(n!==tt.BOTH){const Pe=ge.sections[0].fields.find(Ze=>Ze.name==="work_center");Pe&&(Pe.disabled=!0,Pe.defaultValue=n,Pe.helpText="Centro di lavoro pre-impostato.")}return ge},[n]),k=T.useMemo(()=>({odp_number:e?.odp_number||"",article_code:e?.article_code||"",work_center:e?.work_center||(n===tt.BOTH?"":n),nome_cliente:e?.nome_cliente||"",delivery_date:e?.delivery_date?new Date(e.delivery_date).toISOString().slice(0,16):"",quantity:e?.quantity||"",customer_order_ref:e?.customer_order_ref||"",department:e?.department||"",quantity_completed:e?.quantity_completed||Tt.ORDER.QUANTITY_COMPLETED,production_lot:e?.production_lot||null,bag_height:e?.bag_height||null,bag_width:e?.bag_width||null,bag_step:e?.bag_step||null,seal_sides:e?.seal_sides||null,product_type:e?.product_type||null,internal_customer_code:e?.internal_customer_code||null,external_customer_code:e?.external_customer_code||null,user_notes:e?.user_notes||null,asd_notes:e?.asd_notes||null,material_availability_global:e?.material_availability_global||null,fase:e?.fase||null}),[n,e]),[R,A]=T.useState(k.department),[M,P]=T.useState(k.work_center),[O,z]=T.useState(k.quantity),[B,$]=T.useState(k.bag_step),{phaseSearch:ee,setPhaseSearch:re,isDropdownVisible:he,setIsDropdownVisible:pe,selectedPhase:ie,setSelectedPhase:oe,filteredPhases:K,editablePhaseParams:q,setEditablePhaseParams:Y,handlePhaseParamChange:F,handlePhaseSelect:G,handleBlur:ne}=nM(R,M,x?e?.fase:null),le=T.useCallback(()=>{re(""),oe(null),Y({}),w(null)},[re,oe,Y]),ue=T.useCallback((ge,Pe)=>{if(ge){const Ze=d(ge);Pe("department",Ze),n===tt.BOTH&&Pe("work_center",u(ge)),Pe("fase",""),re(""),oe(null),Y({}),w(null)}},[d,u,n,re,oe,Y]),ce=async ge=>{const Pe=p(ge);if(!Pe.isValid){const We=Object.entries(Pe.errors).map(([xe,lt])=>`${{odp_number:"Numero ODP",article_code:"Codice Articolo",work_center:"Centro di Lavoro",nome_cliente:"Nome Cliente",quantity:"Quantit",delivery_date:"Data di Consegna",customer_order_ref:"Riferimento Ordine Cliente",department:"Reparto",bag_height:"Altezza Busta",bag_width:"Larghezza Busta",bag_step:"Passo Busta",seal_sides:"Lati Sigillatura",product_type:"Tipo Prodotto",internal_customer_code:"Codice Cliente Interno",external_customer_code:"Codice Cliente Esterno"}[xe]||xe}: ${lt}`);N1(We);return}const Ze=ge.fase,_t=ie?.department===It.PRINTING;if(Ze&&(!_t||ge.bag_step)&&(!_?.totals||typeof _.totals.duration!="number"||typeof _.totals.cost!="number")){vl("Calcola le metriche di produzione valide prima di procedere.");return}await f(async()=>{const{phase_search:We,...xe}=ge,lt={...xe,fase:xe.fase===""?null:xe.fase,scheduled_machine_id:xe.scheduled_machine_id===""?null:xe.scheduled_machine_id,production_lot:xe.production_lot===""?null:xe.production_lot,internal_customer_code:xe.internal_customer_code===""?null:xe.internal_customer_code,external_customer_code:xe.external_customer_code===""?null:xe.external_customer_code,user_notes:xe.user_notes===""?null:xe.user_notes,asd_notes:xe.asd_notes===""?null:xe.asd_notes,material_availability_global:xe.material_availability_global===""?null:xe.material_availability_global,bag_height:xe.bag_height===""?null:xe.bag_height,bag_width:xe.bag_width===""?null:xe.bag_width,bag_step:xe.bag_step===""?null:xe.bag_step,seal_sides:xe.seal_sides===""?null:xe.seal_sides,product_type:xe.product_type===""?null:xe.product_type};let Le;if(x){const Z=_?.totals?.duration||e.duration,ye=e.quantity_completed/e.quantity||0,Fe=Z*(1-ye);if(e.scheduled_machine_id&&e.scheduled_start_time){console.log(" EDIT FLOW: Starting rescheduling for task",e.id),console.log(" EDIT FLOW: Original duration:",e.duration,"New duration:",Z);const Ne=e.duration,be=Z-Ne;if(Math.abs(be)<.01){console.log(" SCENARIO X: Duration unchanged, skipping rescheduling");const Se={...lt,duration:Z,cost:_?.totals?.cost||null};Le=await v.mutateAsync({id:e.id,updates:Se})}else if(be>0){console.log(" SCENARIO Y: Duration increased, using standard rescheduling");const Se=new Date(e.scheduled_start_time),Re=Se.getUTCHours(),He=Se.getUTCMinutes(),Ue=new Date(Date.UTC(Se.getUTCFullYear(),Se.getUTCMonth(),Se.getUTCDate()));console.log(" EDIT FLOW: Start date:",Se.toISOString()),console.log(" EDIT FLOW: Hour:",Re,"Minute:",He),console.log(" EDIT FLOW: Current date:",Ue.toISOString());const rt={duration:Z};console.log(" EDIT FLOW: Updating task with new duration:",rt),await v.mutateAsync({id:e.id,updates:rt}),await new Promise(qe=>setTimeout(qe,100));const{getOrderById:ut}=yg.getState(),dr=ut(e.id);console.log(" EDIT FLOW: Task duration after update:",dr?.duration),console.log(" EDIT FLOW: Unscheduling task first"),await s(e.id,b),await new Promise(qe=>setTimeout(qe,100));const gt={id:e.scheduled_machine_id};console.log(" EDIT FLOW: Calling scheduleTaskFromSlot with:",{taskId:e.id,machine:gt,currentDate:Ue.toISOString(),hour:Re,minute:He,timeRemaining:Fe});const it=await i(e.id,gt,Ue,Re,He,Fe,b);if(console.log(" EDIT FLOW: scheduleTaskFromSlot result:",it),it?.conflict){console.log(" EDIT FLOW: Conflict detected, showing dialog");const qe={...it,schedulingParams:{taskId:e.id,machine:gt,currentDate:Ue,hour:Re,minute:He,newDuration:Fe,originalConflict:it}};r(qe);return}else if(it?.error){console.log(" EDIT FLOW: Error:",it.error),Di(it.error);return}else console.log(" EDIT FLOW: Scheduling successful");const Wt=it?.updatedTask;console.log(" EDIT FLOW: Updated task from scheduling result:",Wt);const Be={...lt,duration:Z,cost:_?.totals?.cost||null,scheduled_start_time:Wt?.scheduled_start_time||Se.toISOString(),scheduled_end_time:Wt?.scheduled_end_time||new Date(Se.getTime()+Z*36e5).toISOString(),description:Wt?.description||e.description};console.log(" EDIT FLOW: Final order data to save:",Be),Le=await v.mutateAsync({id:e.id,updates:Be}),console.log(" EDIT FLOW: Final update completed:",Le)}else{console.log(" SCENARIO Z: Duration decreased, using adjacent task rescheduling");const Se=await Me(e.id,Z,Fe,lt,_?.totals?.cost||null,b,v,i,s,r);if(Se?.error){console.log(" SCENARIO Z: Error:",Se.error),Di(Se.error);return}Le=Se.updatedOrder,console.log(" SCENARIO Z: Duration decrease rescheduling completed:",Le)}}else{const Ne={...lt,duration:Z,cost:_?.totals?.cost||null};Le=await v.mutateAsync({id:e.id,updates:Ne})}}else{const Z={...lt,duration:_?.totals?.duration||null,cost:_?.totals?.cost||null,status:"NOT SCHEDULED"};Le=await m.mutateAsync(Z)}t&&t(),le(),ga(x?"Ordine aggiornato con successo":"Ordine aggiunto con successo")},{context:x?"Aggiorna Ordine":"Aggiungi Ordine",fallbackMessage:x?"Aggiornamento ordine fallito":"Aggiunta ordine fallita"})},Ee=()=>{if(!ie){vl("Seleziona una fase prima di calcolare.");return}if(!O){vl("Inserisci la quantit per calcolare.");return}if(ie.department===It.PRINTING&&!B){vl("Inserisci il passo busta per calcolare la stampa.");return}const ge={...ie,...q},Pe=l(ge);if(!Pe.isValid){Di(Pe.error),w(null);return}const Ze=ie.department===It.PRINTING?B:null,_t=a(ge,O,Ze);if(!_t||typeof _t.totals?.duration!="number"||typeof _t.totals?.cost!="number"){Di("Errore nel calcolo. Verifica i parametri della fase."),w(null);return}w(_t)},se=ge=>q[ge]??ie[ge]??"",Me=async(ge,Pe,Ze,_t,en,We,xe,lt,Le,Z,ye)=>{try{console.log(" SCENARIO Z: Starting duration decrease rescheduling for task",ge);const{getOrderById:Fe,getOdpOrders:Ne}=yg.getState(),be=Fe(ge);if(!be)return{error:"Task not found"};const Se=new Date(be.scheduled_start_time),Re=Se.getUTCHours(),He=Se.getUTCMinutes(),Ue=new Date(Date.UTC(Se.getUTCFullYear(),Se.getUTCMonth(),Se.getUTCDate())),rt={id:be.scheduled_machine_id};console.log(" SCENARIO Z: Current task start:",Se.toISOString()),console.log(" SCENARIO Z: New time remaining:",Ze);const ut=new Date(be.scheduled_end_time);console.log(" SCENARIO Z: Current end time for task A (from DB):",ut.toISOString());const dr=Ne(),gt=[];let it=ut;for(console.log(" SCENARIO Z: Starting to find chain of adjacent tasks...");;){const Wt=dr.find(Be=>{if(Be.id===ge||!Be.scheduled_machine_id||!Be.scheduled_start_time||Be.status!=="SCHEDULED"||Be.scheduled_machine_id!==be.scheduled_machine_id||gt.some(yn=>yn.id===Be.id))return!1;const qe=new Date(Be.scheduled_start_time),Hn=Math.abs(qe.getTime()-it.getTime())/(1e3*60);return console.log(" SCENARIO Z: Checking task",Be.odp_number,"start:",qe.toISOString(),"diff:",Hn,"minutes","against end time:",it.toISOString()),Hn<=120});if(Wt)console.log(" SCENARIO Z: Found adjacent task in chain:",Wt.odp_number),gt.push(Wt),it=new Date(Wt.scheduled_end_time),console.log(" SCENARIO Z: Next task end time for chain:",it.toISOString()),console.log(" SCENARIO Z: Continuing to search for more adjacent tasks...");else{console.log(" SCENARIO Z: No more adjacent tasks found, stopping chain search");break}}if(gt.length>0){console.log(" SCENARIO Z: Found chain of",gt.length,"adjacent tasks:",gt.map(de=>de.odp_number)),console.log(" SCENARIO Z: Step 2 - Rescheduling task A");const Wt={duration:Pe};await xe.mutateAsync({id:ge,updates:Wt}),await new Promise(de=>setTimeout(de,100)),await Le(ge,We),await new Promise(de=>setTimeout(de,100));const Be=await lt(ge,rt,Ue,Re,He,Ze,We);if(Be?.conflict){console.log(" SCENARIO Z: Conflict detected for task A, showing dialog");const de={...Be,schedulingParams:{taskId:ge,machine:rt,currentDate:Ue,hour:Re,minute:He,newDuration:Ze,originalConflict:Be}};return Z(de),{error:"Conflict detected for task A"}}else if(Be?.error)return console.log(" SCENARIO Z: Error rescheduling task A:",Be.error),{error:Be.error};console.log(" SCENARIO Z: Task A rescheduled successfully"),console.log(" SCENARIO Z: Step 3 - Rescheduling chain of",gt.length,"tasks");let qe=new Date(Be.schedulingResult.endTime);const Hn=[];for(let de=0;de<gt.length;de++){const Ie=gt[de];console.log(` SCENARIO Z: Rescheduling chain task ${de+1}/${gt.length}:`,Ie.odp_number);const Ge=qe.getUTCHours(),Je=qe.getUTCMinutes(),zt=new Date(Date.UTC(qe.getUTCFullYear(),qe.getUTCMonth(),qe.getUTCDate()));console.log(" SCENARIO Z: Chain task new start time:",qe.toISOString()),console.log(" SCENARIO Z: Chain task new hour:",Ge,"minute:",Je);const ct=Ie.time_remaining||Ie.duration||1;console.log(" SCENARIO Z: Chain task time remaining:",ct),await Le(Ie.id,We),await new Promise($t=>setTimeout($t,100));const Oe=await lt(Ie.id,rt,zt,Ge,Je,ct,We);if(Oe?.conflict){console.log(" SCENARIO Z: Conflict detected for chain task",Ie.odp_number,", showing dialog");const $t={...Oe,schedulingParams:{taskId:Ie.id,machine:rt,currentDate:zt,hour:Ge,minute:Je,newDuration:ct,originalConflict:Oe}};return Z($t),{error:`Conflict detected for chain task ${Ie.odp_number}`}}else if(Oe?.error)return console.log(" SCENARIO Z: Error rescheduling chain task",Ie.odp_number,":",Oe.error),{error:`Error rescheduling chain task ${Ie.odp_number}: ${Oe.error}`};console.log(" SCENARIO Z: Chain task",Ie.odp_number,"rescheduled successfully"),Hn.push(Oe),qe=new Date(Oe.schedulingResult.endTime),console.log(" SCENARIO Z: Updated end time for next chain task:",qe.toISOString())}console.log(" SCENARIO Z: All",gt.length,"chain tasks rescheduled successfully");const yn=Be?.updatedTask,Xe={..._t,duration:Pe,cost:en,scheduled_start_time:yn?.scheduled_start_time||Se.toISOString(),scheduled_end_time:yn?.scheduled_end_time||new Date(Se.getTime()+Pe*36e5).toISOString(),description:yn?.description||be.description},Vt=await xe.mutateAsync({id:ge,updates:Xe});return console.log(" SCENARIO Z: Task A and",gt.length,"chain tasks rescheduled successfully"),{updatedOrder:Vt}}else{console.log(" SCENARIO Z: No adjacent task found, using standard rescheduling");const Wt={duration:Pe};await xe.mutateAsync({id:ge,updates:Wt}),await new Promise(Xe=>setTimeout(Xe,100)),await Le(ge,We),await new Promise(Xe=>setTimeout(Xe,100));const Be=await lt(ge,rt,Ue,Re,He,Ze,We);if(Be?.conflict){console.log(" SCENARIO Z: Conflict detected, showing dialog");const Xe={...Be,schedulingParams:{taskId:ge,machine:rt,currentDate:Ue,hour:Re,minute:He,newDuration:Ze,originalConflict:Be}};return Z(Xe),{error:"Conflict detected"}}else if(Be?.error)return console.log(" SCENARIO Z: Error:",Be.error),{error:Be.error};const qe=Be?.updatedTask,Hn={..._t,duration:Pe,cost:en,scheduled_start_time:qe?.scheduled_start_time||Se.toISOString(),scheduled_end_time:qe?.scheduled_end_time||new Date(Se.getTime()+Pe*36e5).toISOString(),description:qe?.description||be.description};return{updatedOrder:await xe.mutateAsync({id:ge,updates:Hn})}}}catch(Fe){return console.error(" SCENARIO Z: Error in handleDurationDecreaseRescheduling:",Fe),{error:Fe.message||"Error during duration decrease rescheduling"}}},ze=()=>ie?ie.department===It.PRINTING?[{name:"v_stampa",label:"Velocit Stampa:",unit:"mt/h"},{name:"t_setup_stampa",label:"Setup Stampa:",unit:"h"},{name:"costo_h_stampa",label:"Costo Stampa:",unit:"/h"}]:[{name:"v_conf",label:"Velocit Confezionamento:",unit:"pz/h"},{name:"t_setup_conf",label:"Setup Confezionamento:",unit:"h"},{name:"costo_h_conf",label:"Costo Confezionamento:",unit:"/h"}]:[],jt=T.useMemo(()=>({article_code:(ge,{watch:Pe,setValue:Ze,getValues:_t,register:en})=>E.jsx(ii,{type:"text",...en(ge.name,{...ge.validation,onChange:We=>{ge.validation?.onChange&&ge.validation.onChange(We),ue(We.target.value,Ze)}}),placeholder:ge.placeholder,disabled:ge.disabled,className:ge.className}),phase_search:(ge,{watch:Pe,setValue:Ze,getValues:_t,register:en})=>{const We=Pe("department"),xe=Pe("work_center"),lt=Pe("quantity"),Le=Pe("bag_step");return T.useEffect(()=>{We!==R&&A(We),xe!==M&&P(xe),lt!==O&&z(lt),Le!==B&&$(Le)},[We,xe,lt,Le,R,M,O,B]),E.jsxs("div",{className:"relative",children:[E.jsx(ii,{type:"text",value:ee,onChange:Z=>re(Z.target.value),onFocus:()=>pe(!0),onBlur:ne,placeholder:"Cerca fase di produzione..."}),E.jsx("input",{type:"hidden",...en("fase")}),he&&K.length>0&&E.jsx("div",{className:"absolute top-full left-0 right-0 bg-white border border-gray-300 rounded-md shadow-lg z-10 max-h-60 overflow-y-auto",children:K.map(Z=>E.jsxs("div",{className:"px-3 py-1 hover:bg-gray-100 cursor-pointer border-b border-gray-100 last:border-b-0",onMouseDown:()=>{G(Z,Ze,()=>{}),w(null)},children:[E.jsx("div",{className:"text-[10px] font-medium",children:Z.name}),E.jsx("div",{className:"text-[10px] text-gray-600",children:Z.contenuto_fase})]},Z.id))})]})},phase_parameters:()=>ie?E.jsxs("div",{className:"space-y-2",children:[E.jsx("h3",{className:"text-[10px] font-semibold text-gray-900 border-b pb-2",children:"Parametri Fase Selezionata"}),E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:ze().map(ge=>E.jsxs("div",{className:"space-y-2",children:[E.jsx(si,{htmlFor:ge.name,children:ge.label}),E.jsxs("div",{className:"flex items-center space-x-2",children:[E.jsx(ii,{type:"number",id:ge.name,value:se(ge.name),onChange:Pe=>F(ge.name,Pe.target.value)}),E.jsx("span",{className:"text-[10px] text-gray-500 whitespace-nowrap",children:ge.unit})]})]},ge.name))})]}):null,calculation_results:()=>_?.totals?E.jsxs("div",{className:"space-y-2",children:[E.jsx("h3",{className:"text-[10px] font-semibold text-gray-900 border-b pb-2",children:"Risultati Calcolo Produzione"}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[E.jsxs("div",{className:"space-y-2",children:[E.jsx(si,{children:"Durata Totale (ore):"}),E.jsx("div",{className:"text-[10px] font-semibold text-navy-800",children:_.totals.duration.toFixed(2)})]}),E.jsxs("div",{className:"space-y-2",children:[E.jsx(si,{children:"Costo Totale ():"}),E.jsx("div",{className:"text-[10px] font-semibold text-green-600",children:_.totals.cost.toFixed(2)})]})]})]}):null}),[ee,re,he,pe,K,ne,G,ie,se,F,ze,_,ue]),Bt=T.useMemo(()=>E.jsx("div",{className:"flex justify-end space-x-4 pt-6",children:E.jsx(Ii,{type:"button",variant:"outline",onClick:Ee,disabled:!ie,children:"Calcola"})}),[ie,Ee]),zn=m.isPending||v.isPending;return E.jsx(Yd,{config:C,initialData:k,onSubmit:ce,onSuccess:t,isEditMode:x,isLoading:zn,customActions:Bt,customFieldRenderers:jt})},qH=(t,e)=>{const n=s=>{YH(s)},r=s=>{QH(s)},i=s=>{KH(s)};return et.setupRealtimeSubscriptions(n,r,i)},zp=(t,e)=>{const{realtimeChannel:n}=t();n&&(et.cleanupRealtimeSubscriptions(n),e({realtimeChannel:null}))};let so=null;const GH=()=>{typeof window<"u"&&so&&(window.removeEventListener("beforeunload",so),so=null)},YH=(t,e,n)=>{const{eventType:r,newRecord:i,oldRecord:s}=t,{updateSplitTaskInfo:a}=ai.getState();(r==="INSERT"&&i.status==="SCHEDULED"||r==="UPDATE")&&a(i.id,i),console.log(`Orders ${r.toLowerCase()}:`,i||s)},QH=(t,e,n)=>{const{eventType:r,newRecord:i,oldRecord:s}=t;console.log(`Machines ${r.toLowerCase()}:`,i||s)},KH=(t,e,n)=>{const{eventType:r,newRecord:i,oldRecord:s}=t;console.log(`Phases ${r.toLowerCase()}:`,i||s)},pf=So((t,e)=>({isInitializing:!1,realtimeChannel:null,init:async()=>{const{getInitializationState:n,setLoading:r,setInitialized:i,showAlert:s}=Yt.getState(),{initializeEmptyMachineAvailability:a}=ai.getState();if(!n()){if(e().isInitializing)return new Promise(l=>{const u=()=>{n()?l():setTimeout(u,100)};u()});t({isInitializing:!0}),r(!0);try{let l=!1,u=0;const d=3;for(;!l&&u<d;)try{await et.init(),l=!0}catch(f){u++;const p=Fr(f,"API Service Initialization");if(u>=d)throw r(!1),i(!1),s("Unable to connect to the server. Please check your internet connection and refresh the page.","error"),new Ye("API service initialization failed after multiple attempts","CRITICAL_INIT_ERROR",503,p,"Store Initialization");const m=Math.min(1e3*Math.pow(2,u-1),1e4);await new Promise(v=>setTimeout(v,m)),s(`Connection attempt ${u} failed. Retrying...`,"warning")}try{a();const{restoreSplitTaskInfo:f,migrateExistingTasksToSegmentFormat:p}=ai.getState();f(),await p();const{realtimeChannel:m}=e();if(!m)try{const v=qH(t,e);v&&(t({realtimeChannel:v}),typeof window<"u"&&!so&&(so=()=>{zp(e,t)},window.addEventListener("beforeunload",so)))}catch(v){const b=Fr(v,"Real-time Subscriptions Setup");s("Warning: Real-time updates are not available. Data may not update automatically.","warning")}r(!1),i(!0),t({isInitializing:!1}),s("Application initialized successfully. Data will be loaded via React Query.","success")}catch(f){const p=Fr(f,"Data Processing");throw r(!1),i(!1),t({isInitializing:!1}),s("Failed to process application data. Please refresh the page.","error"),p}}catch(l){const u=l instanceof Ye?l:Fr(l);throw r(!1),i(!1),t({isInitializing:!1}),u.code==="CRITICAL_INIT_ERROR"?s("Critical initialization error. Please contact support if the problem persists.","error"):s("Application initialization failed. Please refresh the page or contact support.","error"),u}}},refreshData:()=>{console.warn("refreshData is deprecated. Use React Query invalidation instead.")},debugData:()=>{const{getMachines:n}=Ri.getState(),{getOdpOrders:r}=Xt.getState(),{getPhases:i}=Xa.getState(),s=n().map(u=>u.id);s.filter((u,d)=>s.indexOf(u)!==d);const a=r().map(u=>u.id);a.filter((u,d)=>a.indexOf(u)!==d);const l=i().map(u=>u.id);l.filter((u,d)=>l.indexOf(u)!==d)},cleanupDuplicates:()=>{const{cleanupDuplicateMachines:n}=Ri.getState(),{cleanupDuplicateOrders:r}=Xt.getState(),{cleanupDuplicatePhases:i}=Xa.getState();n(),r(),i()},reset:()=>{zp(e,t);const{reset:n}=Ri.getState(),{reset:r}=Xt.getState(),{reset:i}=Xa.getState(),{reset:s}=ai.getState(),{reset:a}=Yt.getState();n(),r(),i(),s(),a(),t({isInitializing:!1,realtimeChannel:null})},cleanup:()=>{zp(e,t),GH()},getState:()=>{const{getMachines:n}=Ri.getState(),{getOdpOrders:r}=Xt.getState(),{getPhases:i}=Xa.getState(),{getLoadingState:s,getInitializationState:a}=Yt.getState();return{machines:n(),odpOrders:r(),phases:i(),machineAvailability:ai.getState().getMachineAvailabilityState(),isLoading:s(),isInitialized:a()}}}));function nS(){const{id:t}=qd(),e=ci(),{data:n,isLoading:r,error:i}=wI(t),{selectedWorkCenter:s}=Yt(),{isLoading:a,isInitialized:l,init:u,cleanup:d}=pf(),f=!!t;return T.useEffect(()=>(l||u(),()=>{d()}),[u,l,d]),T.useEffect(()=>{f&&!r&&!n&&i&&e("/backlog",{replace:!0})},[f,r,n,e,i]),r?E.jsx("div",{children:"Caricamento..."}):f&&!n?E.jsx("div",{className:"text-center py-2 text-red-600 text-[10px]",children:"Ordine non trovato."}):s?E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("h1",{className:"text-2xl font-semibold text-foreground",children:f?`Modifica Ordine: ${n?.odp_number}`:"Aggiungi Nuovo Ordine"}),f&&E.jsx(Ii,{variant:"outline",onClick:()=>e("/scheduler"),children:" Torna al Programmatore"})]}),E.jsx($H,{onSuccess:f?()=>e("/scheduler"):void 0,orderToEdit:n})]}):E.jsx("div",{className:"text-center py-2 text-red-600 text-[10px]",children:"Seleziona un centro di lavoro per gestire gli ordini del backlog."})}const gf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Eo(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function Gm(t){return"nodeType"in t}function jn(t){var e,n;return t?Eo(t)?t:Gm(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function Ym(t){const{Document:e}=jn(t);return t instanceof e}function oc(t){return Eo(t)?!1:t instanceof jn(t).HTMLElement}function UC(t){return t instanceof jn(t).SVGElement}function Co(t){return t?Eo(t)?t.document:Gm(t)?Ym(t)?t:oc(t)||UC(t)?t.ownerDocument:document:document:document}const Hi=gf?T.useLayoutEffect:T.useEffect;function mf(t){const e=T.useRef(t);return Hi(()=>{e.current=t}),T.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}function ZH(){const t=T.useRef(null),e=T.useCallback((r,i)=>{t.current=setInterval(r,i)},[]),n=T.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function Ul(t,e){e===void 0&&(e=[t]);const n=T.useRef(t);return Hi(()=>{n.current!==t&&(n.current=t)},e),n}function lc(t,e){const n=T.useRef();return T.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function Od(t){const e=mf(t),n=T.useRef(null),r=T.useCallback(i=>{i!==n.current&&e?.(i,n.current),n.current=i},[]);return[n,r]}function Md(t){const e=T.useRef();return T.useEffect(()=>{e.current=t},[t]),e.current}let Hp={};function vf(t,e){return T.useMemo(()=>{if(e)return e;const n=Hp[t]==null?0:Hp[t]+1;return Hp[t]=n,t+"-"+n},[t,e])}function BC(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((s,a)=>{const l=Object.entries(a);for(const[u,d]of l){const f=s[u];f!=null&&(s[u]=f+t*d)}return s},{...e})}}const ao=BC(1),Nd=BC(-1);function XH(t){return"clientX"in t&&"clientY"in t}function Qm(t){if(!t)return!1;const{KeyboardEvent:e}=jn(t.target);return e&&t instanceof e}function JH(t){if(!t)return!1;const{TouchEvent:e}=jn(t.target);return e&&t instanceof e}function Id(t){if(JH(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return XH(t)?{x:t.clientX,y:t.clientY}:null}const Bl=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Bl.Translate.toString(t),Bl.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),rS="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function eU(t){return t.matches(rS)?t:t.querySelector(rS)}const tU={display:"none"};function nU(t){let{id:e,value:n}=t;return Q.createElement("div",{id:e,style:tU},n)}function rU(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Q.createElement("div",{id:e,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function iU(){const[t,e]=T.useState("");return{announce:T.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const WC=T.createContext(null);function sU(t){const e=T.useContext(WC);T.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function aU(){const[t]=T.useState(()=>new Set),e=T.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[T.useCallback(r=>{let{type:i,event:s}=r;t.forEach(a=>{var l;return(l=a[i])==null?void 0:l.call(a,s)})},[t]),e]}const oU={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},lU={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function cU(t){let{announcements:e=lU,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=oU}=t;const{announce:s,announcement:a}=iU(),l=vf("DndLiveRegion"),[u,d]=T.useState(!1);if(T.useEffect(()=>{d(!0)},[]),sU(T.useMemo(()=>({onDragStart(p){let{active:m}=p;s(e.onDragStart({active:m}))},onDragMove(p){let{active:m,over:v}=p;e.onDragMove&&s(e.onDragMove({active:m,over:v}))},onDragOver(p){let{active:m,over:v}=p;s(e.onDragOver({active:m,over:v}))},onDragEnd(p){let{active:m,over:v}=p;s(e.onDragEnd({active:m,over:v}))},onDragCancel(p){let{active:m,over:v}=p;s(e.onDragCancel({active:m,over:v}))}}),[s,e])),!u)return null;const f=Q.createElement(Q.Fragment,null,Q.createElement(nU,{id:r,value:i.draggable}),Q.createElement(rU,{id:l,announcement:a}));return n?Ti.createPortal(f,n):f}var on;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(on||(on={}));function Pd(){}function iS(t,e){return T.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function uU(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return T.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const Br=Object.freeze({x:0,y:0});function dU(t,e){const n=Id(t);if(!n)return"0 0";const r={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return r.x+"% "+r.y+"%"}function fU(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function hU(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function pU(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),i=Math.min(e.left+e.width,t.left+t.width),s=Math.min(e.top+e.height,t.top+t.height),a=i-r,l=s-n;if(r<i&&n<s){const u=e.width*e.height,d=t.width*t.height,f=a*l,p=f/(u+d-f);return Number(p.toFixed(4))}return 0}const gU=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=[];for(const s of r){const{id:a}=s,l=n.get(a);if(l){const u=pU(l,e);u>0&&i.push({id:a,data:{droppableContainer:s,value:u}})}}return i.sort(fU)};function mU(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function VC(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:Br}function vU(t){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return i.reduce((a,l)=>({...a,top:a.top+t*l.y,bottom:a.bottom+t*l.y,left:a.left+t*l.x,right:a.right+t*l.x}),{...n})}}const yU=vU(1);function $C(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function bU(t,e,n){const r=$C(e);if(!r)return t;const{scaleX:i,scaleY:s,x:a,y:l}=r,u=t.left-a-(1-i)*parseFloat(n),d=t.top-l-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),f=i?t.width/i:t.width,p=s?t.height/s:t.height;return{width:f,height:p,top:d,right:u+f,bottom:d+p,left:u}}const _U={ignoreTransform:!1};function cc(t,e){e===void 0&&(e=_U);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:d,transformOrigin:f}=jn(t).getComputedStyle(t);d&&(n=bU(n,d,f))}const{top:r,left:i,width:s,height:a,bottom:l,right:u}=n;return{top:r,left:i,width:s,height:a,bottom:l,right:u}}function sS(t){return cc(t,{ignoreTransform:!0})}function SU(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function wU(t,e){return e===void 0&&(e=jn(t).getComputedStyle(t)),e.position==="fixed"}function xU(t,e){e===void 0&&(e=jn(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const s=e[i];return typeof s=="string"?n.test(s):!1})}function Km(t,e){const n=[];function r(i){if(e!=null&&n.length>=e||!i)return n;if(Ym(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!oc(i)||UC(i)||n.includes(i))return n;const s=jn(t).getComputedStyle(i);return i!==t&&xU(i,s)&&n.push(i),wU(i,s)?n:r(i.parentNode)}return t?r(t):n}function qC(t){const[e]=Km(t,1);return e??null}function Up(t){return!gf||!t?null:Eo(t)?t:Gm(t)?Ym(t)||t===Co(t).scrollingElement?window:oc(t)?t:null:null}function GC(t){return Eo(t)?t.scrollX:t.scrollLeft}function YC(t){return Eo(t)?t.scrollY:t.scrollTop}function Pg(t){return{x:GC(t),y:YC(t)}}var gn;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(gn||(gn={}));function QC(t){return!gf||!t?!1:t===document.scrollingElement}function KC(t){const e={x:0,y:0},n=QC(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},i=t.scrollTop<=e.y,s=t.scrollLeft<=e.x,a=t.scrollTop>=r.y,l=t.scrollLeft>=r.x;return{isTop:i,isLeft:s,isBottom:a,isRight:l,maxScroll:r,minScroll:e}}const EU={x:.2,y:.2};function CU(t,e,n,r,i){let{top:s,left:a,right:l,bottom:u}=n;r===void 0&&(r=10),i===void 0&&(i=EU);const{isTop:d,isBottom:f,isLeft:p,isRight:m}=KC(t),v={x:0,y:0},b={x:0,y:0},_={height:e.height*i.y,width:e.width*i.x};return!d&&s<=e.top+_.height?(v.y=gn.Backward,b.y=r*Math.abs((e.top+_.height-s)/_.height)):!f&&u>=e.bottom-_.height&&(v.y=gn.Forward,b.y=r*Math.abs((e.bottom-_.height-u)/_.height)),!m&&l>=e.right-_.width?(v.x=gn.Forward,b.x=r*Math.abs((e.right-_.width-l)/_.width)):!p&&a<=e.left+_.width&&(v.x=gn.Backward,b.x=r*Math.abs((e.left+_.width-a)/_.width)),{direction:v,speed:b}}function TU(t){if(t===document.scrollingElement){const{innerWidth:s,innerHeight:a}=window;return{top:0,left:0,right:s,bottom:a,width:s,height:a}}const{top:e,left:n,right:r,bottom:i}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:i,width:t.clientWidth,height:t.clientHeight}}function ZC(t){return t.reduce((e,n)=>ao(e,Pg(n)),Br)}function DU(t){return t.reduce((e,n)=>e+GC(n),0)}function kU(t){return t.reduce((e,n)=>e+YC(n),0)}function XC(t,e){if(e===void 0&&(e=cc),!t)return;const{top:n,left:r,bottom:i,right:s}=e(t);qC(t)&&(i<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const AU=[["x",["left","right"],DU],["y",["top","bottom"],kU]];class Zm{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Km(n),i=ZC(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[s,a,l]of AU)for(const u of a)Object.defineProperty(this,u,{get:()=>{const d=l(r),f=i[s]-d;return this.rect[u]+f},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Tl{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var i;(i=this.target)==null||i.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function RU(t){const{EventTarget:e}=jn(t);return t instanceof e?t:Co(t)}function Bp(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var Cr;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Cr||(Cr={}));function aS(t){t.preventDefault()}function OU(t){t.stopPropagation()}var yt;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(yt||(yt={}));const JC={start:[yt.Space,yt.Enter],cancel:[yt.Esc],end:[yt.Space,yt.Enter,yt.Tab]},MU=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case yt.Right:return{...n,x:n.x+25};case yt.Left:return{...n,x:n.x-25};case yt.Down:return{...n,y:n.y+25};case yt.Up:return{...n,y:n.y-25}}};class eT{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new Tl(Co(n)),this.windowListeners=new Tl(jn(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Cr.Resize,this.handleCancel),this.windowListeners.add(Cr.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Cr.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&XC(r),n(Br)}handleKeyDown(e){if(Qm(e)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:s=JC,coordinateGetter:a=MU,scrollBehavior:l="smooth"}=i,{code:u}=e;if(s.end.includes(u)){this.handleEnd(e);return}if(s.cancel.includes(u)){this.handleCancel(e);return}const{collisionRect:d}=r.current,f=d?{x:d.left,y:d.top}:Br;this.referenceCoordinates||(this.referenceCoordinates=f);const p=a(e,{active:n,context:r.current,currentCoordinates:f});if(p){const m=Nd(p,f),v={x:0,y:0},{scrollableAncestors:b}=r.current;for(const _ of b){const w=e.code,{isTop:x,isRight:C,isLeft:k,isBottom:R,maxScroll:A,minScroll:M}=KC(_),P=TU(_),O={x:Math.min(w===yt.Right?P.right-P.width/2:P.right,Math.max(w===yt.Right?P.left:P.left+P.width/2,p.x)),y:Math.min(w===yt.Down?P.bottom-P.height/2:P.bottom,Math.max(w===yt.Down?P.top:P.top+P.height/2,p.y))},z=w===yt.Right&&!C||w===yt.Left&&!k,B=w===yt.Down&&!R||w===yt.Up&&!x;if(z&&O.x!==p.x){const $=_.scrollLeft+m.x,ee=w===yt.Right&&$<=A.x||w===yt.Left&&$>=M.x;if(ee&&!m.y){_.scrollTo({left:$,behavior:l});return}ee?v.x=_.scrollLeft-$:v.x=w===yt.Right?_.scrollLeft-A.x:_.scrollLeft-M.x,v.x&&_.scrollBy({left:-v.x,behavior:l});break}else if(B&&O.y!==p.y){const $=_.scrollTop+m.y,ee=w===yt.Down&&$<=A.y||w===yt.Up&&$>=M.y;if(ee&&!m.x){_.scrollTo({top:$,behavior:l});return}ee?v.y=_.scrollTop-$:v.y=w===yt.Down?_.scrollTop-A.y:_.scrollTop-M.y,v.y&&_.scrollBy({top:-v.y,behavior:l});break}}this.handleMove(e,ao(Nd(p,this.referenceCoordinates),v))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}eT.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=JC,onActivation:i}=e,{active:s}=n;const{code:a}=t.nativeEvent;if(r.start.includes(a)){const l=s.activatorNode.current;return l&&t.target!==l?!1:(t.preventDefault(),i?.({event:t.nativeEvent}),!0)}return!1}}];function oS(t){return!!(t&&"distance"in t)}function lS(t){return!!(t&&"delay"in t)}class Xm{constructor(e,n,r){var i;r===void 0&&(r=RU(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:s}=e,{target:a}=s;this.props=e,this.events=n,this.document=Co(a),this.documentListeners=new Tl(this.document),this.listeners=new Tl(r),this.windowListeners=new Tl(jn(a)),this.initialCoordinates=(i=Id(s))!=null?i:Br,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Cr.Resize,this.handleCancel),this.windowListeners.add(Cr.DragStart,aS),this.windowListeners.add(Cr.VisibilityChange,this.handleCancel),this.windowListeners.add(Cr.ContextMenu,aS),this.documentListeners.add(Cr.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(lS(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(oS(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:i}=this.props;i(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(Cr.Click,OU,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Cr.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:i,props:s}=this,{onMove:a,options:{activationConstraint:l}}=s;if(!i)return;const u=(n=Id(e))!=null?n:Br,d=Nd(i,u);if(!r&&l){if(oS(l)){if(l.tolerance!=null&&Bp(d,l.tolerance))return this.handleCancel();if(Bp(d,l.distance))return this.handleStart()}if(lS(l)&&Bp(d,l.tolerance))return this.handleCancel();this.handlePending(l,d);return}e.cancelable&&e.preventDefault(),a(u)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===yt.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const NU={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Jm extends Xm{constructor(e){const{event:n}=e,r=Co(n.target);super(e,NU,r)}}Jm.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r?.({event:n}),!0)}}];const IU={move:{name:"mousemove"},end:{name:"mouseup"}};var Lg;(function(t){t[t.RightClick=2]="RightClick"})(Lg||(Lg={}));class tT extends Xm{constructor(e){super(e,IU,Co(e.event.target))}}tT.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===Lg.RightClick?!1:(r?.({event:n}),!0)}}];const Wp={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class PU extends Xm{constructor(e){super(e,Wp)}static setup(){return window.addEventListener(Wp.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Wp.move.name,e)};function e(){}}}PU.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:i}=n;return i.length>1?!1:(r?.({event:n}),!0)}}];var Dl;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(Dl||(Dl={}));var Ld;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Ld||(Ld={}));function LU(t){let{acceleration:e,activator:n=Dl.Pointer,canScroll:r,draggingRect:i,enabled:s,interval:a=5,order:l=Ld.TreeOrder,pointerCoordinates:u,scrollableAncestors:d,scrollableAncestorRects:f,delta:p,threshold:m}=t;const v=jU({delta:p,disabled:!s}),[b,_]=ZH(),w=T.useRef({x:0,y:0}),x=T.useRef({x:0,y:0}),C=T.useMemo(()=>{switch(n){case Dl.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case Dl.DraggableRect:return i}},[n,i,u]),k=T.useRef(null),R=T.useCallback(()=>{const M=k.current;if(!M)return;const P=w.current.x*x.current.x,O=w.current.y*x.current.y;M.scrollBy(P,O)},[]),A=T.useMemo(()=>l===Ld.TreeOrder?[...d].reverse():d,[l,d]);T.useEffect(()=>{if(!s||!d.length||!C){_();return}for(const M of A){if(r?.(M)===!1)continue;const P=d.indexOf(M),O=f[P];if(!O)continue;const{direction:z,speed:B}=CU(M,O,C,e,m);for(const $ of["x","y"])v[$][z[$]]||(B[$]=0,z[$]=0);if(B.x>0||B.y>0){_(),k.current=M,b(R,a),w.current=B,x.current=z;return}}w.current={x:0,y:0},x.current={x:0,y:0},_()},[e,R,r,_,s,a,JSON.stringify(C),JSON.stringify(v),b,d,A,f,JSON.stringify(m)])}const FU={x:{[gn.Backward]:!1,[gn.Forward]:!1},y:{[gn.Backward]:!1,[gn.Forward]:!1}};function jU(t){let{delta:e,disabled:n}=t;const r=Md(e);return lc(i=>{if(n||!r||!i)return FU;const s={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[gn.Backward]:i.x[gn.Backward]||s.x===-1,[gn.Forward]:i.x[gn.Forward]||s.x===1},y:{[gn.Backward]:i.y[gn.Backward]||s.y===-1,[gn.Forward]:i.y[gn.Forward]||s.y===1}}},[n,e,r])}function zU(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return lc(i=>{var s;return e==null?null:(s=r??i)!=null?s:null},[r,e])}function HU(t,e){return T.useMemo(()=>t.reduce((n,r)=>{const{sensor:i}=r,s=i.activators.map(a=>({eventName:a.eventName,handler:e(a.handler,r)}));return[...n,...s]},[]),[t,e])}var Wl;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Wl||(Wl={}));var Fg;(function(t){t.Optimized="optimized"})(Fg||(Fg={}));const cS=new Map;function UU(t,e){let{dragging:n,dependencies:r,config:i}=e;const[s,a]=T.useState(null),{frequency:l,measure:u,strategy:d}=i,f=T.useRef(t),p=w(),m=Ul(p),v=T.useCallback(function(x){x===void 0&&(x=[]),!m.current&&a(C=>C===null?x:C.concat(x.filter(k=>!C.includes(k))))},[m]),b=T.useRef(null),_=lc(x=>{if(p&&!n)return cS;if(!x||x===cS||f.current!==t||s!=null){const C=new Map;for(let k of t){if(!k)continue;if(s&&s.length>0&&!s.includes(k.id)&&k.rect.current){C.set(k.id,k.rect.current);continue}const R=k.node.current,A=R?new Zm(u(R),R):null;k.rect.current=A,A&&C.set(k.id,A)}return C}return x},[t,s,n,p,u]);return T.useEffect(()=>{f.current=t},[t]),T.useEffect(()=>{p||v()},[n,p]),T.useEffect(()=>{s&&s.length>0&&a(null)},[JSON.stringify(s)]),T.useEffect(()=>{p||typeof l!="number"||b.current!==null||(b.current=setTimeout(()=>{v(),b.current=null},l))},[l,p,v,...r]),{droppableRects:_,measureDroppableContainers:v,measuringScheduled:s!=null};function w(){switch(d){case Wl.Always:return!1;case Wl.BeforeDragging:return n;default:return!n}}}function ev(t,e){return lc(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function BU(t,e){return ev(t,e)}function WU(t){let{callback:e,disabled:n}=t;const r=mf(e),i=T.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(r)},[r,n]);return T.useEffect(()=>()=>i?.disconnect(),[i]),i}function yf(t){let{callback:e,disabled:n}=t;const r=mf(e),i=T.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(r)},[n]);return T.useEffect(()=>()=>i?.disconnect(),[i]),i}function VU(t){return new Zm(cc(t),t)}function uS(t,e,n){e===void 0&&(e=VU);const[r,i]=T.useState(null);function s(){i(u=>{if(!t)return null;if(t.isConnected===!1){var d;return(d=u??n)!=null?d:null}const f=e(t);return JSON.stringify(u)===JSON.stringify(f)?u:f})}const a=WU({callback(u){if(t)for(const d of u){const{type:f,target:p}=d;if(f==="childList"&&p instanceof HTMLElement&&p.contains(t)){s();break}}}}),l=yf({callback:s});return Hi(()=>{s(),t?(l?.observe(t),a?.observe(document.body,{childList:!0,subtree:!0})):(l?.disconnect(),a?.disconnect())},[t]),r}function $U(t){const e=ev(t);return VC(t,e)}const dS=[];function qU(t){const e=T.useRef(t),n=lc(r=>t?r&&r!==dS&&t&&e.current&&t.parentNode===e.current.parentNode?r:Km(t):dS,[t]);return T.useEffect(()=>{e.current=t},[t]),n}function GU(t){const[e,n]=T.useState(null),r=T.useRef(t),i=T.useCallback(s=>{const a=Up(s.target);a&&n(l=>l?(l.set(a,Pg(a)),new Map(l)):null)},[]);return T.useEffect(()=>{const s=r.current;if(t!==s){a(s);const l=t.map(u=>{const d=Up(u);return d?(d.addEventListener("scroll",i,{passive:!0}),[d,Pg(d)]):null}).filter(u=>u!=null);n(l.length?new Map(l):null),r.current=t}return()=>{a(t),a(s)};function a(l){l.forEach(u=>{const d=Up(u);d?.removeEventListener("scroll",i)})}},[i,t]),T.useMemo(()=>t.length?e?Array.from(e.values()).reduce((s,a)=>ao(s,a),Br):ZC(t):Br,[t,e])}function fS(t,e){e===void 0&&(e=[]);const n=T.useRef(null);return T.useEffect(()=>{n.current=null},e),T.useEffect(()=>{const r=t!==Br;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?Nd(t,n.current):Br}function YU(t){T.useEffect(()=>{if(!gf)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n?.()}},t.map(e=>{let{sensor:n}=e;return n}))}function QU(t,e){return T.useMemo(()=>t.reduce((n,r)=>{let{eventName:i,handler:s}=r;return n[i]=a=>{s(a,e)},n},{}),[t,e])}function nT(t){return T.useMemo(()=>t?SU(t):null,[t])}const hS=[];function KU(t,e){e===void 0&&(e=cc);const[n]=t,r=nT(n?jn(n):null),[i,s]=T.useState(hS);function a(){s(()=>t.length?t.map(u=>QC(u)?r:new Zm(e(u),u)):hS)}const l=yf({callback:a});return Hi(()=>{l?.disconnect(),a(),t.forEach(u=>l?.observe(u))},[t]),i}function rT(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return oc(e)?e:t}function ZU(t){let{measure:e}=t;const[n,r]=T.useState(null),i=T.useCallback(d=>{for(const{target:f}of d)if(oc(f)){r(p=>{const m=e(f);return p?{...p,width:m.width,height:m.height}:m});break}},[e]),s=yf({callback:i}),a=T.useCallback(d=>{const f=rT(d);s?.disconnect(),f&&s?.observe(f),r(f?e(f):null)},[e,s]),[l,u]=Od(a);return T.useMemo(()=>({nodeRef:l,rect:n,setRef:u}),[n,l,u])}const XU=[{sensor:Jm,options:{}},{sensor:eT,options:{}}],JU={current:{}},od={draggable:{measure:sS},droppable:{measure:sS,strategy:Wl.WhileDragging,frequency:Fg.Optimized},dragOverlay:{measure:cc}};class kl extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const eB={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new kl,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Pd},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:od,measureDroppableContainers:Pd,windowRect:null,measuringScheduled:!1},iT={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Pd,draggableNodes:new Map,over:null,measureDroppableContainers:Pd},uc=T.createContext(iT),sT=T.createContext(eB);function tB(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new kl}}}function nB(t,e){switch(e.type){case on.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case on.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case on.DragEnd:case on.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case on.RegisterDroppable:{const{element:n}=e,{id:r}=n,i=new kl(t.droppable.containers);return i.set(r,n),{...t,droppable:{...t.droppable,containers:i}}}case on.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const a=new kl(t.droppable.containers);return a.set(n,{...s,disabled:i}),{...t,droppable:{...t.droppable,containers:a}}}case on.UnregisterDroppable:{const{id:n,key:r}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const s=new kl(t.droppable.containers);return s.delete(n),{...t,droppable:{...t.droppable,containers:s}}}default:return t}}function rB(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:i}=T.useContext(uc),s=Md(r),a=Md(n?.id);return T.useEffect(()=>{if(!e&&!r&&s&&a!=null){if(!Qm(s)||document.activeElement===s.target)return;const l=i.get(a);if(!l)return;const{activatorNode:u,node:d}=l;if(!u.current&&!d.current)return;requestAnimationFrame(()=>{for(const f of[u.current,d.current]){if(!f)continue;const p=eU(f);if(p){p.focus();break}}})}},[r,e,i,a,s]),null}function aT(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((i,s)=>s({transform:i,...r}),n):n}function iB(t){return T.useMemo(()=>({draggable:{...od.draggable,...t?.draggable},droppable:{...od.droppable,...t?.droppable},dragOverlay:{...od.dragOverlay,...t?.dragOverlay}}),[t?.draggable,t?.droppable,t?.dragOverlay])}function sB(t){let{activeNode:e,measure:n,initialRect:r,config:i=!0}=t;const s=T.useRef(!1),{x:a,y:l}=typeof i=="boolean"?{x:i,y:i}:i;Hi(()=>{if(!a&&!l||!e){s.current=!1;return}if(s.current||!r)return;const d=e?.node.current;if(!d||d.isConnected===!1)return;const f=n(d),p=VC(f,r);if(a||(p.x=0),l||(p.y=0),s.current=!0,Math.abs(p.x)>0||Math.abs(p.y)>0){const m=qC(d);m&&m.scrollBy({top:p.y,left:p.x})}},[e,a,l,r,n])}const bf=T.createContext({...Br,scaleX:1,scaleY:1});var hs;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(hs||(hs={}));const aB=T.memo(function(e){var n,r,i,s;let{id:a,accessibility:l,autoScroll:u=!0,children:d,sensors:f=XU,collisionDetection:p=gU,measuring:m,modifiers:v,...b}=e;const _=T.useReducer(nB,void 0,tB),[w,x]=_,[C,k]=aU(),[R,A]=T.useState(hs.Uninitialized),M=R===hs.Initialized,{draggable:{active:P,nodes:O,translate:z},droppable:{containers:B}}=w,$=P!=null?O.get(P):null,ee=T.useRef({initial:null,translated:null}),re=T.useMemo(()=>{var Xe;return P!=null?{id:P,data:(Xe=$?.data)!=null?Xe:JU,rect:ee}:null},[P,$]),he=T.useRef(null),[pe,ie]=T.useState(null),[oe,K]=T.useState(null),q=Ul(b,Object.values(b)),Y=vf("DndDescribedBy",a),F=T.useMemo(()=>B.getEnabled(),[B]),G=iB(m),{droppableRects:ne,measureDroppableContainers:le,measuringScheduled:ue}=UU(F,{dragging:M,dependencies:[z.x,z.y],config:G.droppable}),ce=zU(O,P),Ee=T.useMemo(()=>oe?Id(oe):null,[oe]),se=yn(),Me=BU(ce,G.draggable.measure);sB({activeNode:P!=null?O.get(P):null,config:se.layoutShiftCompensation,initialRect:Me,measure:G.draggable.measure});const ze=uS(ce,G.draggable.measure,Me),jt=uS(ce?ce.parentElement:null),Bt=T.useRef({activatorEvent:null,active:null,activeNode:ce,collisionRect:null,collisions:null,droppableRects:ne,draggableNodes:O,draggingNode:null,draggingNodeRect:null,droppableContainers:B,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),zn=B.getNodeFor((n=Bt.current.over)==null?void 0:n.id),ge=ZU({measure:G.dragOverlay.measure}),Pe=(r=ge.nodeRef.current)!=null?r:ce,Ze=M?(i=ge.rect)!=null?i:ze:null,_t=!!(ge.nodeRef.current&&ge.rect),en=$U(_t?null:ze),We=nT(Pe?jn(Pe):null),xe=qU(M?zn??ce:null),lt=KU(xe),Le=aT(v,{transform:{x:z.x-en.x,y:z.y-en.y,scaleX:1,scaleY:1},activatorEvent:oe,active:re,activeNodeRect:ze,containerNodeRect:jt,draggingNodeRect:Ze,over:Bt.current.over,overlayNodeRect:ge.rect,scrollableAncestors:xe,scrollableAncestorRects:lt,windowRect:We}),Z=Ee?ao(Ee,z):null,ye=GU(xe),Fe=fS(ye),Ne=fS(ye,[ze]),be=ao(Le,Fe),Se=Ze?yU(Ze,Le):null,Re=re&&Se?p({active:re,collisionRect:Se,droppableRects:ne,droppableContainers:F,pointerCoordinates:Z}):null,He=hU(Re,"id"),[Ue,rt]=T.useState(null),ut=_t?Le:ao(Le,Ne),dr=mU(ut,(s=Ue?.rect)!=null?s:null,ze),gt=T.useRef(null),it=T.useCallback((Xe,Vt)=>{let{sensor:de,options:Ie}=Vt;if(he.current==null)return;const Ge=O.get(he.current);if(!Ge)return;const Je=Xe.nativeEvent,zt=new de({active:he.current,activeNode:Ge,event:Je,options:Ie,context:Bt,onAbort(Oe){if(!O.get(Oe))return;const{onDragAbort:mt}=q.current,Ot={id:Oe};mt?.(Ot),C({type:"onDragAbort",event:Ot})},onPending(Oe,$t,mt,Ot){if(!O.get(Oe))return;const{onDragPending:dn}=q.current,Bn={id:Oe,constraint:$t,initialCoordinates:mt,offset:Ot};dn?.(Bn),C({type:"onDragPending",event:Bn})},onStart(Oe){const $t=he.current;if($t==null)return;const mt=O.get($t);if(!mt)return;const{onDragStart:Ot}=q.current,Un={activatorEvent:Je,active:{id:$t,data:mt.data,rect:ee}};Ti.unstable_batchedUpdates(()=>{Ot?.(Un),A(hs.Initializing),x({type:on.DragStart,initialCoordinates:Oe,active:$t}),C({type:"onDragStart",event:Un}),ie(gt.current),K(Je)})},onMove(Oe){x({type:on.DragMove,coordinates:Oe})},onEnd:ct(on.DragEnd),onCancel:ct(on.DragCancel)});gt.current=zt;function ct(Oe){return async function(){const{active:mt,collisions:Ot,over:Un,scrollAdjustedTranslate:dn}=Bt.current;let Bn=null;if(mt&&dn){const{cancelDrop:di}=q.current;Bn={activatorEvent:Je,active:mt,collisions:Ot,delta:dn,over:Un},Oe===on.DragEnd&&typeof di=="function"&&await Promise.resolve(di(Bn))&&(Oe=on.DragCancel)}he.current=null,Ti.unstable_batchedUpdates(()=>{x({type:Oe}),A(hs.Uninitialized),rt(null),ie(null),K(null),gt.current=null;const di=Oe===on.DragEnd?"onDragEnd":"onDragCancel";if(Bn){const Do=q.current[di];Do?.(Bn),C({type:di,event:Bn})}})}}},[O]),Wt=T.useCallback((Xe,Vt)=>(de,Ie)=>{const Ge=de.nativeEvent,Je=O.get(Ie);if(he.current!==null||!Je||Ge.dndKit||Ge.defaultPrevented)return;const zt={active:Je};Xe(de,Vt.options,zt)===!0&&(Ge.dndKit={capturedBy:Vt.sensor},he.current=Ie,it(de,Vt))},[O,it]),Be=HU(f,Wt);YU(f),Hi(()=>{ze&&R===hs.Initializing&&A(hs.Initialized)},[ze,R]),T.useEffect(()=>{const{onDragMove:Xe}=q.current,{active:Vt,activatorEvent:de,collisions:Ie,over:Ge}=Bt.current;if(!Vt||!de)return;const Je={active:Vt,activatorEvent:de,collisions:Ie,delta:{x:be.x,y:be.y},over:Ge};Ti.unstable_batchedUpdates(()=>{Xe?.(Je),C({type:"onDragMove",event:Je})})},[be.x,be.y]),T.useEffect(()=>{const{active:Xe,activatorEvent:Vt,collisions:de,droppableContainers:Ie,scrollAdjustedTranslate:Ge}=Bt.current;if(!Xe||he.current==null||!Vt||!Ge)return;const{onDragOver:Je}=q.current,zt=Ie.get(He),ct=zt&&zt.rect.current?{id:zt.id,rect:zt.rect.current,data:zt.data,disabled:zt.disabled}:null,Oe={active:Xe,activatorEvent:Vt,collisions:de,delta:{x:Ge.x,y:Ge.y},over:ct};Ti.unstable_batchedUpdates(()=>{rt(ct),Je?.(Oe),C({type:"onDragOver",event:Oe})})},[He]),Hi(()=>{Bt.current={activatorEvent:oe,active:re,activeNode:ce,collisionRect:Se,collisions:Re,droppableRects:ne,draggableNodes:O,draggingNode:Pe,draggingNodeRect:Ze,droppableContainers:B,over:Ue,scrollableAncestors:xe,scrollAdjustedTranslate:be},ee.current={initial:Ze,translated:Se}},[re,ce,Re,Se,O,Pe,Ze,ne,B,Ue,xe,be]),LU({...se,delta:z,draggingRect:Se,pointerCoordinates:Z,scrollableAncestors:xe,scrollableAncestorRects:lt});const qe=T.useMemo(()=>({active:re,activeNode:ce,activeNodeRect:ze,activatorEvent:oe,collisions:Re,containerNodeRect:jt,dragOverlay:ge,draggableNodes:O,droppableContainers:B,droppableRects:ne,over:Ue,measureDroppableContainers:le,scrollableAncestors:xe,scrollableAncestorRects:lt,measuringConfiguration:G,measuringScheduled:ue,windowRect:We}),[re,ce,ze,oe,Re,jt,ge,O,B,ne,Ue,le,xe,lt,G,ue,We]),Hn=T.useMemo(()=>({activatorEvent:oe,activators:Be,active:re,activeNodeRect:ze,ariaDescribedById:{draggable:Y},dispatch:x,draggableNodes:O,over:Ue,measureDroppableContainers:le}),[oe,Be,re,ze,x,Y,O,Ue,le]);return Q.createElement(WC.Provider,{value:k},Q.createElement(uc.Provider,{value:Hn},Q.createElement(sT.Provider,{value:qe},Q.createElement(bf.Provider,{value:dr},d)),Q.createElement(rB,{disabled:l?.restoreFocus===!1})),Q.createElement(cU,{...l,hiddenTextDescribedById:Y}));function yn(){const Xe=pe?.autoScrollEnabled===!1,Vt=typeof u=="object"?u.enabled===!1:u===!1,de=M&&!Xe&&!Vt;return typeof u=="object"?{...u,enabled:de}:{enabled:de}}}),oB=T.createContext(null),pS="button",lB="Draggable";function k$(t){let{id:e,data:n,disabled:r=!1,attributes:i}=t;const s=vf(lB),{activators:a,activatorEvent:l,active:u,activeNodeRect:d,ariaDescribedById:f,draggableNodes:p,over:m}=T.useContext(uc),{role:v=pS,roleDescription:b="draggable",tabIndex:_=0}=i??{},w=u?.id===e,x=T.useContext(w?bf:oB),[C,k]=Od(),[R,A]=Od(),M=QU(a,e),P=Ul(n);Hi(()=>(p.set(e,{id:e,key:s,node:C,activatorNode:R,data:P}),()=>{const z=p.get(e);z&&z.key===s&&p.delete(e)}),[p,e]);const O=T.useMemo(()=>({role:v,tabIndex:_,"aria-disabled":r,"aria-pressed":w&&v===pS?!0:void 0,"aria-roledescription":b,"aria-describedby":f.draggable}),[r,v,_,w,b,f.draggable]);return{active:u,activatorEvent:l,activeNodeRect:d,attributes:O,isDragging:w,listeners:r?void 0:M,node:C,over:m,setNodeRef:k,setActivatorNodeRef:A,transform:x}}function cB(){return T.useContext(sT)}const uB="Droppable",dB={timeout:25};function A$(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:i}=t;const s=vf(uB),{active:a,dispatch:l,over:u,measureDroppableContainers:d}=T.useContext(uc),f=T.useRef({disabled:n}),p=T.useRef(!1),m=T.useRef(null),v=T.useRef(null),{disabled:b,updateMeasurementsFor:_,timeout:w}={...dB,...i},x=Ul(_??r),C=T.useCallback(()=>{if(!p.current){p.current=!0;return}v.current!=null&&clearTimeout(v.current),v.current=setTimeout(()=>{d(Array.isArray(x.current)?x.current:[x.current]),v.current=null},w)},[w]),k=yf({callback:C,disabled:b||!a}),R=T.useCallback((O,z)=>{k&&(z&&(k.unobserve(z),p.current=!1),O&&k.observe(O))},[k]),[A,M]=Od(R),P=Ul(e);return T.useEffect(()=>{!k||!A.current||(k.disconnect(),p.current=!1,k.observe(A.current))},[A,k]),T.useEffect(()=>(l({type:on.RegisterDroppable,element:{id:r,key:s,disabled:n,node:A,rect:m,data:P}}),()=>l({type:on.UnregisterDroppable,key:s,id:r})),[r]),T.useEffect(()=>{n!==f.current.disabled&&(l({type:on.SetDroppableDisabled,id:r,key:s,disabled:n}),f.current.disabled=n)},[r,s,n,l]),{active:a,rect:m,isOver:u?.id===r,node:A,over:u,setNodeRef:M}}function fB(t){let{animation:e,children:n}=t;const[r,i]=T.useState(null),[s,a]=T.useState(null),l=Md(n);return!n&&!r&&l&&i(l),Hi(()=>{if(!s)return;const u=r?.key,d=r?.props.id;if(u==null||d==null){i(null);return}Promise.resolve(e(d,s)).then(()=>{i(null)})},[e,r,s]),Q.createElement(Q.Fragment,null,n,r?T.cloneElement(r,{ref:a}):null)}const hB={x:0,y:0,scaleX:1,scaleY:1};function pB(t){let{children:e}=t;return Q.createElement(uc.Provider,{value:iT},Q.createElement(bf.Provider,{value:hB},e))}const gB={position:"fixed",touchAction:"none"},mB=t=>Qm(t)?"transform 250ms ease":void 0,vB=T.forwardRef((t,e)=>{let{as:n,activatorEvent:r,adjustScale:i,children:s,className:a,rect:l,style:u,transform:d,transition:f=mB}=t;if(!l)return null;const p=i?d:{...d,scaleX:1,scaleY:1},m={...gB,width:l.width,height:l.height,top:l.top,left:l.left,transform:Bl.Transform.toString(p),transformOrigin:i&&r?dU(r,l):void 0,transition:typeof f=="function"?f(r):f,...u};return Q.createElement(n,{className:a,style:m,ref:e},s)}),yB=t=>e=>{let{active:n,dragOverlay:r}=e;const i={},{styles:s,className:a}=t;if(s!=null&&s.active)for(const[l,u]of Object.entries(s.active))u!==void 0&&(i[l]=n.node.style.getPropertyValue(l),n.node.style.setProperty(l,u));if(s!=null&&s.dragOverlay)for(const[l,u]of Object.entries(s.dragOverlay))u!==void 0&&r.node.style.setProperty(l,u);return a!=null&&a.active&&n.node.classList.add(a.active),a!=null&&a.dragOverlay&&r.node.classList.add(a.dragOverlay),function(){for(const[u,d]of Object.entries(i))n.node.style.setProperty(u,d);a!=null&&a.active&&n.node.classList.remove(a.active)}},bB=t=>{let{transform:{initial:e,final:n}}=t;return[{transform:Bl.Transform.toString(e)},{transform:Bl.Transform.toString(n)}]},_B={duration:250,easing:"ease",keyframes:bB,sideEffects:yB({styles:{active:{opacity:"0"}}})};function SB(t){let{config:e,draggableNodes:n,droppableContainers:r,measuringConfiguration:i}=t;return mf((s,a)=>{if(e===null)return;const l=n.get(s);if(!l)return;const u=l.node.current;if(!u)return;const d=rT(a);if(!d)return;const{transform:f}=jn(a).getComputedStyle(a),p=$C(f);if(!p)return;const m=typeof e=="function"?e:wB(e);return XC(u,i.draggable.measure),m({active:{id:s,data:l.data,node:u,rect:i.draggable.measure(u)},draggableNodes:n,dragOverlay:{node:a,rect:i.dragOverlay.measure(d)},droppableContainers:r,measuringConfiguration:i,transform:p})})}function wB(t){const{duration:e,easing:n,sideEffects:r,keyframes:i}={..._B,...t};return s=>{let{active:a,dragOverlay:l,transform:u,...d}=s;if(!e)return;const f={x:l.rect.left-a.rect.left,y:l.rect.top-a.rect.top},p={scaleX:u.scaleX!==1?a.rect.width*u.scaleX/l.rect.width:1,scaleY:u.scaleY!==1?a.rect.height*u.scaleY/l.rect.height:1},m={x:u.x-f.x,y:u.y-f.y,...p},v=i({...d,active:a,dragOverlay:l,transform:{initial:u,final:m}}),[b]=v,_=v[v.length-1];if(JSON.stringify(b)===JSON.stringify(_))return;const w=r?.({active:a,dragOverlay:l,...d}),x=l.node.animate(v,{duration:e,easing:n,fill:"forwards"});return new Promise(C=>{x.onfinish=()=>{w?.(),C()}})}}let gS=0;function xB(t){return T.useMemo(()=>{if(t!=null)return gS++,gS},[t])}const EB=Q.memo(t=>{let{adjustScale:e=!1,children:n,dropAnimation:r,style:i,transition:s,modifiers:a,wrapperElement:l="div",className:u,zIndex:d=999}=t;const{activatorEvent:f,active:p,activeNodeRect:m,containerNodeRect:v,draggableNodes:b,droppableContainers:_,dragOverlay:w,over:x,measuringConfiguration:C,scrollableAncestors:k,scrollableAncestorRects:R,windowRect:A}=cB(),M=T.useContext(bf),P=xB(p?.id),O=aT(a,{activatorEvent:f,active:p,activeNodeRect:m,containerNodeRect:v,draggingNodeRect:w.rect,over:x,overlayNodeRect:w.rect,scrollableAncestors:k,scrollableAncestorRects:R,transform:M,windowRect:A}),z=ev(m),B=SB({config:r,draggableNodes:b,droppableContainers:_,measuringConfiguration:C}),$=z?w.setRef:void 0;return Q.createElement(pB,null,Q.createElement(fB,{animation:B},p&&P?Q.createElement(vB,{key:P,id:p.id,ref:$,as:l,activatorEvent:f,adjustScale:e,className:u,transition:s,rect:z,style:{zIndex:d,...i},transform:O},n):null))});function Vs({label:t,options:e,selectedOptions:n,onSelectionChange:r,searchPlaceholder:i,id:s,width:a="200px"}){const[l,u]=T.useState(!1),[d,f]=T.useState(""),p=T.useRef(null);T.useEffect(()=>{const C=k=>{p.current&&!p.current.contains(k.target)&&u(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]);const m=e.filter(C=>C.toLowerCase().includes(d.toLowerCase())),v=m.length>0&&m.every(C=>n.includes(C)),b=C=>{if(C.preventDefault(),C.stopPropagation(),v){const k=n.filter(R=>!m.includes(R));r(k)}else{const k=[...new Set([...n,...m])];r(k)}},_=(C,k)=>{if(C.preventDefault(),C.stopPropagation(),n.includes(k)){const R=n.filter(A=>A!==k);r(R)}else{const R=[...n.filter(A=>A!==""),k];r(R)}},w=()=>{u(!0)},x=C=>{f(C.target.value)};return E.jsxs("div",{className:"relative",ref:p,style:{width:a},children:[E.jsxs("div",{className:"space-y-2",children:[E.jsxs(si,{htmlFor:s,children:[t,":"]}),E.jsx(ii,{type:"text",id:s,value:d,onChange:x,onFocus:w,placeholder:i})]}),l&&e.length>0&&E.jsxs("div",{className:"absolute top-full left-0 right-0 bg-white border border-gray-300 rounded-md shadow-lg z-10 max-h-60 overflow-y-auto",children:[E.jsx("div",{className:`px-3 py-1 hover:bg-gray-100 cursor-pointer border-b border-gray-100 ${v?"bg-navy-50 text-navy-800":""}`,onMouseDown:b,children:E.jsx("div",{className:"text-xs font-bold",children:"Tutti"})}),m.map(C=>E.jsx("div",{className:`px-3 py-1 hover:bg-gray-100 cursor-pointer border-b border-gray-100 last:border-b-0 ${n.includes(C)?"bg-navy-50 text-navy-800":""}`,onMouseDown:k=>_(k,C),children:E.jsx("div",{className:"text-xs font-normal",children:C})},C))]})]})}const CB=T.lazy(()=>Ll(()=>import("./TaskPoolDataTable-CSTxe3Ql.js"),[])),TB=T.lazy(()=>Ll(()=>import("./GanttChart-BHY54_9k.js"),[])),mS=()=>E.jsx("div",{className:"loading",children:"Caricamento componenti scheduler..."}),DB=({schedulingLoading:t})=>{if(!t.isScheduling&&!t.isRescheduling&&!t.isShunting&&!t.isNavigating)return null;const e=()=>t.isScheduling?"Programmazione lavoro...":t.isRescheduling?"Riprogrammazione lavoro...":t.isShunting?"Risoluzione conflitti...":t.isNavigating?"Navigazione...":"Operazione in corso...";return E.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:E.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-lg flex items-center space-x-3",children:[E.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),E.jsx("span",{className:"text-gray-700 font-medium",children:e()})]})})},kB=(t,e)=>{const n=document.querySelector(t);if(!n){Di("Grafico Gantt non trovato. Assicurati che il grafico sia visibile sullo schermo.");return}const r=Array.from(document.styleSheets);let i="";r.forEach(m=>{try{Array.from(m.cssRules||m.rules||[]).forEach(b=>{i+=b.cssText+`
`})}catch{}});const s=n.cloneNode(!0),a=`
    <!DOCTYPE html>
    <html>
      <head>
        <title>Grafico Gantt - ${e}</title>
        <style>
          ${i}
          body { 
            margin: 0; 
            padding: 20px; 
            font-family: Arial, sans-serif;
          }
          .calendar-section {
            width: 100%;
            overflow-x: auto;
          }
        </style>
      </head>
      <body>
        <div style="text-align: center; margin-bottom: 20px; font-size: 12px; font-weight: bold;">
          Grafico Gantt - ${e}
        </div>
        <div class="calendar-section">
          ${s.outerHTML}
        </div>
      </body>
    </html>
  `,l=new Blob([a],{type:"text/html"}),u=window.URL.createObjectURL(l),d=document.createElement("a");d.href=u;const f=new Date().toISOString().split("T")[0],p=new Date().toISOString().split("T")[1].split(".")[0].replace(/:/g,"-");d.download=`grafico-gantt-${f}-${p}.html`,document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(u)};function AB(){const{data:t=[],isLoading:e,error:n}=tf(),{data:r=[],isLoading:i,error:s}=ef(),{getOdpOrdersByWorkCenter:a,getScheduledOrders:l}=Xt(),{selectedWorkCenter:u,isLoading:d,isInitialized:f,showAlert:p,isEditMode:m,toggleEditMode:v,showConflictDialog:b,schedulingLoading:_,setDragPreview:w,clearDragPreview:x,dragPreview:C}=Yt(),{scheduleTask:k,unscheduleTask:R,scheduleTaskFromSlot:A,rescheduleTaskToSlot:M,validateSlotAvailability:P}=ai(),{init:O,cleanup:z}=pf(),B=rr(),$=uU(iS(Jm,{activationConstraint:{distance:0}}),iS(tT,{activationConstraint:{distance:0}})),[ee,re]=T.useState(()=>{const Z=new Date;return new Date(Date.UTC(Z.getUTCFullYear(),Z.getUTCMonth(),Z.getUTCDate()))}),[he,pe]=T.useState(null),ie=e||i||d,[oe,K]=T.useState(null),[q,Y]=T.useState(""),[F,G]=T.useState(""),[ne,le]=T.useState(""),ue={workCenter:[],department:[],machineType:[],machineName:[]};function ce(Z,ye){switch(ye.type){case"SET_FILTER":return{...Z,[ye.payload.filterName]:ye.payload.value};case"CLEAR_FILTERS":return ue;default:return Z}}const[Ee,se]=T.useReducer(ce,ue);T.useEffect(()=>(f||O(),()=>{z()}),[O,f,z]);const Me=T.useMemo(()=>u?u==="BOTH"?t:t.filter(Z=>Z.work_center===u):[],[u,t]),ze=T.useMemo(()=>Me.filter(ye=>ye.status==="SCHEDULED"),[Me,u]),jt=T.useMemo(()=>{if(performance.now(),!r||r.length===0)return{activeMachines:[],workCenters:[],departments:[],machineTypes:[],machineNames:[]};let Z=r;u&&u!==tt.BOTH&&(Z=r.filter(ut=>ut.work_center===u));const ye=Z.filter(ut=>ut.status===ki.ACTIVE);if(ye.length===0)return{activeMachines:[],workCenters:[],departments:[],machineTypes:[],machineNames:[]};const Fe=new Set,Ne=new Set,be=new Set,Se=new Set;for(const ut of ye)ut.work_center&&Fe.add(ut.work_center),ut.department&&Ne.add(ut.department),ut.machine_type&&be.add(ut.machine_type),ut.machine_name&&Se.add(ut.machine_name);const Re=Array.from(Fe).sort(),He=Array.from(Ne).sort(),Ue=Array.from(be).sort(),rt=Array.from(Se).sort();return performance.now(),{activeMachines:ye,workCenters:Re,departments:He,machineTypes:Ue,machineNames:rt}},[r,u]),Bt=T.useMemo(()=>{const{activeMachines:Z}=jt;let ye=Z;return Ee.workCenter.length>0&&(ye=ye.filter(Fe=>Ee.workCenter.includes(Fe.work_center))),Ee.department.length>0&&(ye=ye.filter(Fe=>Ee.department.includes(Fe.department))),Ee.machineType.length>0&&(ye=ye.filter(Fe=>Ee.machineType.includes(Fe.machine_type))),Ee.machineName.length>0&&(ye=ye.filter(Fe=>Ee.machineName.includes(Fe.machine_name))),ye},[jt,Ee]),zn=T.useCallback(async(Z,ye="Daily")=>{const{startSchedulingOperation:Fe,stopSchedulingOperation:Ne}=Yt.getState();try{Fe("navigate");let be;re(Se=>{if(Z==="today"){const Re=new Date,He=Re.getUTCFullYear(),Ue=Re.getUTCMonth(),rt=Re.getUTCDate();return be=new Date(Date.UTC(He,Ue,rt)),be}else if(Z==="prev"){if(ye==="Weekly")return be=ua(pI(Se,1),{weekStartsOn:1}),be;{const Re=new Date(Se);return Re.setUTCDate(Re.getUTCDate()-1),be=Re,be}}else if(Z==="next"){if(ye==="Weekly")return be=ua(qx(Se,1),{weekStartsOn:1}),be;{const Re=new Date(Se);return Re.setUTCDate(Re.getUTCDate()+1),be=Re,Re}}return be=Se,Se})}finally{Ne()}},[]),ge=T.useCallback(()=>{const Z=new Date,ye=Z.getUTCFullYear(),Fe=Z.getUTCMonth(),Ne=Z.getUTCDate(),be=new Date(Date.UTC(ye,Fe,Ne));return ee.getTime()===be.getTime()?"Oggi":vn(ee,"yyyy-MM-dd")},[ee]),Pe=T.useCallback(()=>{se({type:"CLEAR_FILTERS"})},[]),Ze=T.useCallback((Z,ye,Fe)=>{if(!Z.trim())return;let Ne=ze.find(be=>be[ye]===Z.trim());if(Ne||(Ne=ze.find(be=>be[ye]&&be[ye].toLowerCase().includes(Z.trim().toLowerCase()))),!Ne){p(`Lavoro non trovato per ${Fe}: ${Z}`,"warning");return}_t(Ne,ye,Fe,Z)},[ze,r,p]),_t=T.useCallback((Z,ye,Fe,Ne)=>{const be=r.find(Re=>Re.id===Z.scheduled_machine_id);if(!be){p("Macchina non trovata per questo lavoro","error");return}if(se({type:"SET_FILTER",payload:{filterName:"machineName",value:[be.machine_name]}}),se({type:"SET_FILTER",payload:{filterName:"workCenter",value:[be.work_center]}}),se({type:"SET_FILTER",payload:{filterName:"department",value:[be.department]}}),se({type:"SET_FILTER",payload:{filterName:"machineType",value:[be.machine_type]}}),Z.scheduled_start_time){const Re=new Date(Z.scheduled_start_time),He=Re.getUTCFullYear(),Ue=Re.getUTCMonth(),rt=Re.getUTCDate();re(new Date(Date.UTC(He,Ue,rt)))}ye==="odp_number"?Y(""):ye==="article_code"?G(""):ye==="nome_cliente"&&le("");const Se=Z[ye];p(`Lavoro trovato per ${Fe} "${Se}" su ${be.machine_name}`,"success")},[r,p,Y,G,le,re]),en=T.useRef(null),We=T.useRef(!1),xe=T.useCallback(Z=>{const ye=Z.active.data.current;ye&&ye.type==="task"?pe(ye.task):ye&&ye.type==="event"&&pe(ye.event)},[]),lt=T.useCallback(Z=>{const{over:ye}=Z;if(ye&&ye.data.current?.type==="slot"){const{machine:Fe,hour:Ne,minute:be,isUnavailable:Se,hasScheduledTask:Re}=ye.data.current;if(Se||Re){K(null),x();return}const He=`${Fe.id}-${Ne}-${be}`;if(K(He),he){const Ue=he.time_remaining||he.duration||1,rt=Math.ceil(Ue*4),ut=(Ne-6)*4+Math.floor(be/15);w({isActive:!0,startSlot:ut,durationSlots:rt,machineId:Fe.id})}}else ye&&ye.data.current?.type==="next-day"?(K("next-day-drop-zone"),x()):ye&&ye.data.current?.type==="previous-day"?(K("previous-day-drop-zone"),x()):(K(null),x())},[he,w,x]),Le=T.useCallback(async Z=>{if(performance.now(),en.current&&clearTimeout(en.current),We.current)return;pe(null),K(null),x();const{over:ye,active:Fe}=Z;if(!ye)return;const Ne=Fe.data.current,be=ye.data.current;if(!(!Ne||!be)){We.current=!0;try{await new Promise(Se=>{requestAnimationFrame(async()=>{const Re=performance.now();if(Ne.type==="task"&&be.type==="slot"){const He=Ne.task,{machine:Ue,hour:rt,minute:ut,isUnavailable:dr,hasScheduledTask:gt}=be;if(gt)return p("Impossibile pianificare il lavoro su uno slot temporale occupato","error"),Se();const it=await A(He.id,Ue,ee,rt,ut,null,B);it?.error?p(it.error,"error"):it?.conflict&&b(it)}else if(Ne.type==="event"&&be.type==="slot"){const He=Ne.event,{machine:Ue,hour:rt,minute:ut,isUnavailable:dr,hasScheduledTask:gt}=be;if(gt)return p("Impossibile riprogrammare il lavoro su uno slot temporale occupato","error"),Se();const it=await M(He.id,Ue,ee,rt,ut,B);it?.error?p(it.error,"error"):it?.conflict&&b(it)}else if(Ne.type==="event"&&be.type==="pool"){const He=Ne.event;R(He.id,B)}else(Ne.type==="task"||Ne.type==="event")&&be.type==="next-day"?p("Navigazione al giorno successivo completata","success"):(Ne.type==="task"||Ne.type==="event")&&be.type==="previous-day"&&p("Navigazione al giorno precedente completata","success");Se()})})}catch{p("Si  verificato un errore durante l'operazione di trascinamento","error")}finally{We.current=!1}}},[ee,A,M,R,p,b]);return ie?E.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:E.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-lg flex items-center space-x-3",children:[E.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),E.jsx("span",{className:"text-gray-700 font-medium",children:"Caricamento Scheduler Produzione..."})]})}):n||s?E.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:E.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-lg text-center",children:[E.jsx("div",{className:"text-red-600 mb-4",children:E.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 19.5c-.77.833.192 2.5 1.732 2.5z"})})}),E.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Errore nel caricamento dei dati"}),E.jsx("p",{className:"text-gray-600 mb-4",children:n?.message||s?.message||"Errore sconosciuto"}),E.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Riprova"})]})}):u?E.jsxs(E.Fragment,{children:[E.jsx(DB,{schedulingLoading:_}),E.jsxs(aB,{sensors:$,onDragStart:xe,onDragOver:lt,onDragEnd:Le,children:[E.jsxs("div",{className:`content-section ${m?"edit-mode":""}`,children:[E.jsxs("div",{className:"task-pool-section",children:[E.jsxs("div",{className:"task-pool-header",children:[E.jsx("h2",{className:"text-[10px] font-semibold text-gray-900",children:"Pool Lavori"}),E.jsx(Ii,{variant:m?"destructive":"default",size:"sm",onClick:v,title:m?"Disabilita modalit modifica":"Abilita modalit modifica",children:m?"Disabilita Modalit Modifica":"Abilita Modalit Modifica"})]}),E.jsx(T.Suspense,{fallback:E.jsx(mS,{}),children:E.jsx(CB,{})})]}),E.jsxs("div",{className:"section-controls",children:[E.jsx("div",{className:"task-pool-header",children:E.jsx("h2",{className:"text-[10px] font-semibold text-gray-900",children:"Filtri"})}),E.jsxs("div",{className:"filters-grid",children:[E.jsx("div",{className:"filters-actions-left",children:E.jsx(Ii,{variant:"secondary",size:"sm",onClick:Pe,title:"Clear all filters",children:"Cancella Filtri"})}),E.jsx(Vs,{label:"ODP",options:ze.map(Z=>Z.odp_number).filter(Boolean),selectedOptions:q?[q]:[],onSelectionChange:Z=>{Z.length>0?(Y(Z[0]),Ze(Z[0],"odp_number","ODP")):Y("")},searchPlaceholder:"Cerca ODP...",id:"odp_filter",width:"150px"}),E.jsx(Vs,{label:"Codice Articolo",options:ze.map(Z=>Z.article_code).filter(Boolean),selectedOptions:F?[F]:[],onSelectionChange:Z=>{Z.length>0?(G(Z[0]),Ze(Z[0],"article_code","codice articolo")):G("")},searchPlaceholder:"Cerca Articolo...",id:"article_filter",width:"150px"}),E.jsx(Vs,{label:"Nome Cliente",options:ze.map(Z=>Z.nome_cliente).filter(Boolean),selectedOptions:ne?[ne]:[],onSelectionChange:Z=>{Z.length>0?(le(Z[0]),Ze(Z[0],"nome_cliente","cliente")):le("")},searchPlaceholder:"Cerca Cliente...",id:"customer_filter",width:"150px"}),E.jsx(Vs,{label:"Centro di Lavoro",options:jt.workCenters,selectedOptions:Ee.workCenter,onSelectionChange:Z=>se({type:"SET_FILTER",payload:{filterName:"workCenter",value:Z}}),searchPlaceholder:"Cerca Centri di Lavoro",id:"work_center_filter",width:"150px"}),E.jsx(Vs,{label:"Reparto",options:jt.departments,selectedOptions:Ee.department,onSelectionChange:Z=>se({type:"SET_FILTER",payload:{filterName:"department",value:Z}}),searchPlaceholder:"Cerca Reparti",id:"department_filter",width:"150px"}),E.jsx(Vs,{label:"Tipo Macchina",options:jt.machineTypes,selectedOptions:Ee.machineType,onSelectionChange:Z=>se({type:"SET_FILTER",payload:{filterName:"machineType",value:Z}}),searchPlaceholder:"Cerca Tipi di Macchina",id:"machine_type_filter",width:"150px"}),E.jsx(Vs,{label:"Nome Macchina",options:jt.machineNames,selectedOptions:Ee.machineName,onSelectionChange:Z=>se({type:"SET_FILTER",payload:{filterName:"machineName",value:Z}}),searchPlaceholder:"Cerca Nomi Macchine",id:"machine_name_filter",width:"150px"}),E.jsx("div",{className:"filters-actions-right",children:E.jsx(Ii,{variant:"secondary",size:"sm",onClick:()=>kB(".calendar-section .calendar-grid-container",ge()),title:"Download exact Gantt chart as HTML file",children:"Scarica HTML"})})]})]}),E.jsxs("div",{className:"calendar-section relative",children:[E.jsx(T.Suspense,{fallback:E.jsx(mS,{}),children:E.jsx(TB,{machines:Bt,currentDate:ee,dropTargetId:oe,dragPreview:C,onNavigateToNextDay:Z=>zn("next",Z),onNavigateToPreviousDay:Z=>zn("prev",Z)})}),(_.isScheduling||_.isRescheduling||_.isShunting||_.isNavigating)&&E.jsx("div",{className:"absolute inset-0 bg-white z-40"})]})]}),E.jsx(EB,{children:he?E.jsx("div",{style:{background:"#1e293b",color:"#ffffff",padding:"4px 8px",borderRadius:"4px",fontSize:"10px",fontWeight:"400",zIndex:9999,position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%) rotate(3deg) scale(1.05)",border:"1px solid #2d3a4b",boxShadow:"0 8px 25px rgba(0,0,0,0.3)",pointerEvents:"none",minHeight:"15px",display:"flex",alignItems:"center",justifyContent:"center",userSelect:"none",whiteSpace:"nowrap"},children:he.odp_number}):null})]})]}):E.jsx("div",{className:"p-1 bg-white rounded shadow-sm border",children:E.jsx("div",{className:"text-center py-1 text-red-600 text-[10px]",children:"Seleziona un centro di lavoro per visualizzare i dati dello scheduler."})})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function dc(t){return t+.5|0}const vs=(t,e,n)=>Math.max(Math.min(t,n),e);function yl(t){return vs(dc(t*2.55),0,255)}function Ss(t){return vs(dc(t*255),0,255)}function Ci(t){return vs(dc(t/2.55)/100,0,1)}function vS(t){return vs(dc(t*100),0,100)}const xr={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},jg=[..."0123456789ABCDEF"],RB=t=>jg[t&15],OB=t=>jg[(t&240)>>4]+jg[t&15],Lu=t=>(t&240)>>4===(t&15),MB=t=>Lu(t.r)&&Lu(t.g)&&Lu(t.b)&&Lu(t.a);function NB(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&xr[t[1]]*17,g:255&xr[t[2]]*17,b:255&xr[t[3]]*17,a:e===5?xr[t[4]]*17:255}:(e===7||e===9)&&(n={r:xr[t[1]]<<4|xr[t[2]],g:xr[t[3]]<<4|xr[t[4]],b:xr[t[5]]<<4|xr[t[6]],a:e===9?xr[t[7]]<<4|xr[t[8]]:255})),n}const IB=(t,e)=>t<255?e(t):"";function PB(t){var e=MB(t)?RB:OB;return t?"#"+e(t.r)+e(t.g)+e(t.b)+IB(t.a,e):void 0}const LB=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function oT(t,e,n){const r=e*Math.min(n,1-n),i=(s,a=(s+t/30)%12)=>n-r*Math.max(Math.min(a-3,9-a,1),-1);return[i(0),i(8),i(4)]}function FB(t,e,n){const r=(i,s=(i+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function jB(t,e,n){const r=oT(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function zB(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}function tv(t){const n=t.r/255,r=t.g/255,i=t.b/255,s=Math.max(n,r,i),a=Math.min(n,r,i),l=(s+a)/2;let u,d,f;return s!==a&&(f=s-a,d=l>.5?f/(2-s-a):f/(s+a),u=zB(n,r,i,f,s),u=u*60+.5),[u|0,d||0,l]}function nv(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(Ss)}function rv(t,e,n){return nv(oT,t,e,n)}function HB(t,e,n){return nv(jB,t,e,n)}function UB(t,e,n){return nv(FB,t,e,n)}function lT(t){return(t%360+360)%360}function BB(t){const e=LB.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?yl(+e[5]):Ss(+e[5]));const i=lT(+e[2]),s=+e[3]/100,a=+e[4]/100;return e[1]==="hwb"?r=HB(i,s,a):e[1]==="hsv"?r=UB(i,s,a):r=rv(i,s,a),{r:r[0],g:r[1],b:r[2],a:n}}function WB(t,e){var n=tv(t);n[0]=lT(n[0]+e),n=rv(n),t.r=n[0],t.g=n[1],t.b=n[2]}function VB(t){if(!t)return;const e=tv(t),n=e[0],r=vS(e[1]),i=vS(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${Ci(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}const yS={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},bS={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function $B(){const t={},e=Object.keys(bS),n=Object.keys(yS);let r,i,s,a,l;for(r=0;r<e.length;r++){for(a=l=e[r],i=0;i<n.length;i++)s=n[i],l=l.replace(s,yS[s]);s=parseInt(bS[a],16),t[l]=[s>>16&255,s>>8&255,s&255]}return t}let Fu;function qB(t){Fu||(Fu=$B(),Fu.transparent=[0,0,0,0]);const e=Fu[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const GB=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function YB(t){const e=GB.exec(t);let n=255,r,i,s;if(e){if(e[7]!==r){const a=+e[7];n=e[8]?yl(a):vs(a*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?yl(r):vs(r,0,255)),i=255&(e[4]?yl(i):vs(i,0,255)),s=255&(e[6]?yl(s):vs(s,0,255)),{r,g:i,b:s,a:n}}}function QB(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Ci(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Vp=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Ya=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function KB(t,e,n){const r=Ya(Ci(t.r)),i=Ya(Ci(t.g)),s=Ya(Ci(t.b));return{r:Ss(Vp(r+n*(Ya(Ci(e.r))-r))),g:Ss(Vp(i+n*(Ya(Ci(e.g))-i))),b:Ss(Vp(s+n*(Ya(Ci(e.b))-s))),a:t.a+n*(e.a-t.a)}}function ju(t,e,n){if(t){let r=tv(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=rv(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function cT(t,e){return t&&Object.assign(e||{},t)}function _S(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Ss(t[3]))):(e=cT(t,{r:0,g:0,b:0,a:1}),e.a=Ss(e.a)),e}function ZB(t){return t.charAt(0)==="r"?YB(t):BB(t)}class Vl{constructor(e){if(e instanceof Vl)return e;const n=typeof e;let r;n==="object"?r=_S(e):n==="string"&&(r=NB(e)||qB(e)||ZB(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=cT(this._rgb);return e&&(e.a=Ci(e.a)),e}set rgb(e){this._rgb=_S(e)}rgbString(){return this._valid?QB(this._rgb):void 0}hexString(){return this._valid?PB(this._rgb):void 0}hslString(){return this._valid?VB(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,i=e.rgb;let s;const a=n===s?.5:n,l=2*a-1,u=r.a-i.a,d=((l*u===-1?l:(l+u)/(1+l*u))+1)/2;s=1-d,r.r=255&d*r.r+s*i.r+.5,r.g=255&d*r.g+s*i.g+.5,r.b=255&d*r.b+s*i.b+.5,r.a=a*r.a+(1-a)*i.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=KB(this._rgb,e._rgb,n)),this}clone(){return new Vl(this.rgb)}alpha(e){return this._rgb.a=Ss(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=dc(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return ju(this._rgb,2,e),this}darken(e){return ju(this._rgb,2,-e),this}saturate(e){return ju(this._rgb,1,e),this}desaturate(e){return ju(this._rgb,1,-e),this}rotate(e){return WB(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Si(){}const XB=(()=>{let t=0;return()=>t++})();function wt(t){return t==null}function cn(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Ke(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Rn(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Xr(t,e){return Rn(t)?t:e}function $e(t,e){return typeof t>"u"?e:t}const JB=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,uT=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Ct(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function ht(t,e,n,r){let i,s,a;if(cn(t))for(s=t.length,i=0;i<s;i++)e.call(n,t[i],i);else if(Ke(t))for(a=Object.keys(t),s=a.length,i=0;i<s;i++)e.call(n,t[a[i]],a[i])}function Fd(t,e){let n,r,i,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],s=e[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function jd(t){if(cn(t))return t.map(jd);if(Ke(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=jd(t[n[i]]);return e}return t}function dT(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function eW(t,e,n,r){if(!dT(t))return;const i=e[t],s=n[t];Ke(i)&&Ke(s)?$l(i,s,r):e[t]=jd(s)}function $l(t,e,n){const r=cn(e)?e:[e],i=r.length;if(!Ke(t))return t;n=n||{};const s=n.merger||eW;let a;for(let l=0;l<i;++l){if(a=r[l],!Ke(a))continue;const u=Object.keys(a);for(let d=0,f=u.length;d<f;++d)s(u[d],t,a,n)}return t}function Al(t,e){return $l(t,e,{merger:tW})}function tW(t,e,n){if(!dT(t))return;const r=e[t],i=n[t];Ke(r)&&Ke(i)?Al(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=jd(i))}const SS={"":t=>t,x:t=>t.x,y:t=>t.y};function nW(t){const e=t.split("."),n=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function rW(t){const e=nW(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function ql(t,e){return(SS[e]||(SS[e]=rW(e)))(t)}function iv(t){return t.charAt(0).toUpperCase()+t.slice(1)}const zd=t=>typeof t<"u",Ts=t=>typeof t=="function",wS=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function iW(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const pt=Math.PI,Ft=2*pt,sW=Ft+pt,Hd=Number.POSITIVE_INFINITY,aW=pt/180,un=pt/2,$s=pt/4,xS=pt*2/3,fT=Math.log10,ho=Math.sign;function Rl(t,e,n){return Math.abs(t-e)<n}function ES(t){const e=Math.round(t);t=Rl(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(fT(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function oW(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((i,s)=>i-s).pop(),e}function lW(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Gl(t){return!lW(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function cW(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function uW(t,e,n){let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Mi(t){return t*(pt/180)}function dW(t){return t*(180/pt)}function CS(t){if(!Rn(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function hT(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*pt&&(s+=Ft),{angle:s,distance:i}}function zg(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function fW(t,e){return(t-e+sW)%Ft-pt}function lr(t){return(t%Ft+Ft)%Ft}function Yl(t,e,n,r){const i=lr(t),s=lr(e),a=lr(n),l=lr(s-i),u=lr(a-i),d=lr(i-s),f=lr(i-a);return i===s||i===a||r&&s===a||l>u&&d<f}function Ln(t,e,n){return Math.max(e,Math.min(n,t))}function hW(t){return Ln(t,-32768,32767)}function na(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function sv(t,e,n){n=n||(a=>t[a]<e);let r=t.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,n(s)?i=s:r=s;return{lo:i,hi:r}}const ra=(t,e,n,r)=>sv(t,n,r?i=>{const s=t[i][e];return s<n||s===n&&t[i+1][e]===n}:i=>t[i][e]<n),pW=(t,e,n)=>sv(t,n,r=>t[r][e]>=n);function gW(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}const pT=["push","pop","shift","splice","unshift"];function mW(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),pT.forEach(n=>{const r="_onData"+iv(n),i=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const a=i.apply(this,s);return t._chartjs.listeners.forEach(l=>{typeof l[r]=="function"&&l[r](...s)}),a}})})}function TS(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(pT.forEach(s=>{delete t[s]}),delete t._chartjs)}function vW(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const gT=(function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame})();function mT(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,gT.call(window,()=>{r=!1,t.apply(e,n)}))}}function yW(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const av=t=>t==="start"?"left":t==="end"?"right":"center",Dn=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,bW=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function _W(t,e,n){const r=e.length;let i=0,s=r;if(t._sorted){const{iScale:a,vScale:l,_parsed:u}=t,d=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,f=a.axis,{min:p,max:m,minDefined:v,maxDefined:b}=a.getUserBounds();if(v){if(i=Math.min(ra(u,f,p).lo,n?r:ra(e,f,a.getPixelForValue(p)).lo),d){const _=u.slice(0,i+1).reverse().findIndex(w=>!wt(w[l.axis]));i-=Math.max(0,_)}i=Ln(i,0,r-1)}if(b){let _=Math.max(ra(u,a.axis,m,!0).hi+1,n?0:ra(e,f,a.getPixelForValue(m),!0).hi+1);if(d){const w=u.slice(_-1).findIndex(x=>!wt(x[l.axis]));_+=Math.max(0,w)}s=Ln(_,i,r)-i}else s=r-i}return{start:i,count:s}}function SW(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const zu=t=>t===0||t===1,DS=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Ft/n)),kS=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Ft/n)+1,Ol={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*un)+1,easeOutSine:t=>Math.sin(t*un),easeInOutSine:t=>-.5*(Math.cos(pt*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>zu(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>zu(t)?t:DS(t,.075,.3),easeOutElastic:t=>zu(t)?t:kS(t,.075,.3),easeInOutElastic(t){return zu(t)?t:t<.5?.5*DS(t*2,.1125,.45):.5+.5*kS(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Ol.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Ol.easeInBounce(t*2)*.5:Ol.easeOutBounce(t*2-1)*.5+.5};function ov(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function AS(t){return ov(t)?t:new Vl(t)}function $p(t){return ov(t)?t:new Vl(t).saturate(.5).darken(.1).hexString()}const wW=["x","y","borderWidth","radius","tension"],xW=["color","borderColor","backgroundColor"];function EW(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:xW},numbers:{type:"number",properties:wW}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function CW(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const RS=new Map;function TW(t,e){e=e||{};const n=t+JSON.stringify(e);let r=RS.get(n);return r||(r=new Intl.NumberFormat(t,e),RS.set(n,r)),r}function lv(t,e,n){return TW(e,n).format(t)}const DW={values(t){return cn(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let i,s=t;if(n.length>1){const d=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(d<1e-4||d>1e15)&&(i="scientific"),s=kW(t,n)}const a=fT(Math.abs(s)),l=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),u={notation:i,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(u,this.options.ticks.format),lv(t,r,u)}};function kW(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var vT={formatters:DW};function AW(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:vT.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const ha=Object.create(null),Hg=Object.create(null);function Ml(t,e){if(!e)return t;const n=e.split(".");for(let r=0,i=n.length;r<i;++r){const s=n[r];t=t[s]||(t[s]=Object.create(null))}return t}function qp(t,e,n){return typeof e=="string"?$l(Ml(t,e),n):$l(Ml(t,""),e)}class RW{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>$p(i.backgroundColor),this.hoverBorderColor=(r,i)=>$p(i.borderColor),this.hoverColor=(r,i)=>$p(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return qp(this,e,n)}get(e){return Ml(this,e)}describe(e,n){return qp(Hg,e,n)}override(e,n){return qp(ha,e,n)}route(e,n,r,i){const s=Ml(this,e),a=Ml(this,r),l="_"+n;Object.defineProperties(s,{[l]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const u=this[l],d=a[i];return Ke(u)?Object.assign({},d,u):$e(u,d)},set(u){this[l]=u}}})}apply(e){e.forEach(n=>n(this))}}var Qt=new RW({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[EW,CW,AW]);function OW(t){return!t||wt(t.size)||wt(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function OS(t,e,n,r,i){let s=e[i];return s||(s=e[i]=t.measureText(i).width,n.push(i)),s>r&&(r=s),r}function qs(t,e,n){const r=t.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function MS(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Ug(t,e,n,r){yT(t,e,n,r,null)}function yT(t,e,n,r,i){let s,a,l,u,d,f,p,m;const v=e.pointStyle,b=e.rotation,_=e.radius;let w=(b||0)*aW;if(v&&typeof v=="object"&&(s=v.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(w),t.drawImage(v,-v.width/2,-v.height/2,v.width,v.height),t.restore();return}if(!(isNaN(_)||_<=0)){switch(t.beginPath(),v){default:i?t.ellipse(n,r,i/2,_,0,0,Ft):t.arc(n,r,_,0,Ft),t.closePath();break;case"triangle":f=i?i/2:_,t.moveTo(n+Math.sin(w)*f,r-Math.cos(w)*_),w+=xS,t.lineTo(n+Math.sin(w)*f,r-Math.cos(w)*_),w+=xS,t.lineTo(n+Math.sin(w)*f,r-Math.cos(w)*_),t.closePath();break;case"rectRounded":d=_*.516,u=_-d,a=Math.cos(w+$s)*u,p=Math.cos(w+$s)*(i?i/2-d:u),l=Math.sin(w+$s)*u,m=Math.sin(w+$s)*(i?i/2-d:u),t.arc(n-p,r-l,d,w-pt,w-un),t.arc(n+m,r-a,d,w-un,w),t.arc(n+p,r+l,d,w,w+un),t.arc(n-m,r+a,d,w+un,w+pt),t.closePath();break;case"rect":if(!b){u=Math.SQRT1_2*_,f=i?i/2:u,t.rect(n-f,r-u,2*f,2*u);break}w+=$s;case"rectRot":p=Math.cos(w)*(i?i/2:_),a=Math.cos(w)*_,l=Math.sin(w)*_,m=Math.sin(w)*(i?i/2:_),t.moveTo(n-p,r-l),t.lineTo(n+m,r-a),t.lineTo(n+p,r+l),t.lineTo(n-m,r+a),t.closePath();break;case"crossRot":w+=$s;case"cross":p=Math.cos(w)*(i?i/2:_),a=Math.cos(w)*_,l=Math.sin(w)*_,m=Math.sin(w)*(i?i/2:_),t.moveTo(n-p,r-l),t.lineTo(n+p,r+l),t.moveTo(n+m,r-a),t.lineTo(n-m,r+a);break;case"star":p=Math.cos(w)*(i?i/2:_),a=Math.cos(w)*_,l=Math.sin(w)*_,m=Math.sin(w)*(i?i/2:_),t.moveTo(n-p,r-l),t.lineTo(n+p,r+l),t.moveTo(n+m,r-a),t.lineTo(n-m,r+a),w+=$s,p=Math.cos(w)*(i?i/2:_),a=Math.cos(w)*_,l=Math.sin(w)*_,m=Math.sin(w)*(i?i/2:_),t.moveTo(n-p,r-l),t.lineTo(n+p,r+l),t.moveTo(n+m,r-a),t.lineTo(n-m,r+a);break;case"line":a=i?i/2:Math.cos(w)*_,l=Math.sin(w)*_,t.moveTo(n-a,r-l),t.lineTo(n+a,r+l);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(w)*(i?i/2:_),r+Math.sin(w)*_);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Ql(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function _f(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Sf(t){t.restore()}function MW(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if(i==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else i==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function NW(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function IW(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),wt(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function PW(t,e,n,r,i){if(i.strikethrough||i.underline){const s=t.measureText(r),a=e-s.actualBoundingBoxLeft,l=e+s.actualBoundingBoxRight,u=n-s.actualBoundingBoxAscent,d=n+s.actualBoundingBoxDescent,f=i.strikethrough?(u+d)/2:d;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(a,f),t.lineTo(l,f),t.stroke()}}function LW(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Kl(t,e,n,r,i,s={}){const a=cn(e)?e:[e],l=s.strokeWidth>0&&s.strokeColor!=="";let u,d;for(t.save(),t.font=i.string,IW(t,s),u=0;u<a.length;++u)d=a[u],s.backdrop&&LW(t,s.backdrop),l&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),wt(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(d,n,r,s.maxWidth)),t.fillText(d,n,r,s.maxWidth),PW(t,n,r,d,s),r+=Number(i.lineHeight);t.restore()}function Bg(t,e){const{x:n,y:r,w:i,h:s,radius:a}=e;t.arc(n+a.topLeft,r+a.topLeft,a.topLeft,1.5*pt,pt,!0),t.lineTo(n,r+s-a.bottomLeft),t.arc(n+a.bottomLeft,r+s-a.bottomLeft,a.bottomLeft,pt,un,!0),t.lineTo(n+i-a.bottomRight,r+s),t.arc(n+i-a.bottomRight,r+s-a.bottomRight,a.bottomRight,un,0,!0),t.lineTo(n+i,r+a.topRight),t.arc(n+i-a.topRight,r+a.topRight,a.topRight,0,-un,!0),t.lineTo(n+a.topLeft,r)}const FW=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,jW=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function zW(t,e){const n=(""+t).match(FW);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const HW=t=>+t||0;function cv(t,e){const n={},r=Ke(e),i=r?Object.keys(e):e,s=Ke(t)?r?a=>$e(t[a],t[e[a]]):a=>t[a]:()=>t;for(const a of i)n[a]=HW(s(a));return n}function UW(t){return cv(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Nl(t){return cv(t,["topLeft","topRight","bottomLeft","bottomRight"])}function kr(t){const e=UW(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function An(t,e){t=t||{},e=e||Qt.font;let n=$e(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=$e(t.style,e.style);r&&!(""+r).match(jW)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:$e(t.family,e.family),lineHeight:zW($e(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:$e(t.weight,e.weight),string:""};return i.string=OW(i),i}function Hu(t,e,n,r){let i,s,a;for(i=0,s=t.length;i<s;++i)if(a=t[i],a!==void 0&&a!==void 0)return a}function BW(t,e,n){const{min:r,max:i}=t,s=uT(e,(i-r)/2),a=(l,u)=>n&&l===0?0:l+u;return{min:a(r,-Math.abs(s)),max:a(i,s)}}function Sa(t,e){return Object.assign(Object.create(t),e)}function uv(t,e=[""],n,r,i=()=>t[0]){const s=n||t;typeof r>"u"&&(r=wT("_fallback",t));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:r,_getTarget:i,override:l=>uv([l,...t],e,s,r)};return new Proxy(a,{deleteProperty(l,u){return delete l[u],delete l._keys,delete t[0][u],!0},get(l,u){return _T(l,u,()=>KW(u,e,t,l))},getOwnPropertyDescriptor(l,u){return Reflect.getOwnPropertyDescriptor(l._scopes[0],u)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(l,u){return IS(l).includes(u)},ownKeys(l){return IS(l)},set(l,u,d){const f=l._storage||(l._storage=i());return l[u]=f[u]=d,delete l._keys,!0}})}function po(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:bT(t,r),setContext:s=>po(t,s,n,r),override:s=>po(t.override(s),e,n,r)};return new Proxy(i,{deleteProperty(s,a){return delete s[a],delete t[a],!0},get(s,a,l){return _T(s,a,()=>VW(s,a,l))},getOwnPropertyDescriptor(s,a){return s._descriptors.allKeys?Reflect.has(t,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,a)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,a){return Reflect.has(t,a)},ownKeys(){return Reflect.ownKeys(t)},set(s,a,l){return t[a]=l,delete s[a],!0}})}function bT(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:Ts(n)?n:()=>n,isIndexable:Ts(r)?r:()=>r}}const WW=(t,e)=>t?t+iv(e):e,dv=(t,e)=>Ke(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function _T(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function VW(t,e,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:a}=t;let l=r[e];return Ts(l)&&a.isScriptable(e)&&(l=$W(e,l,t,n)),cn(l)&&l.length&&(l=qW(e,l,t,a.isIndexable)),dv(e,l)&&(l=po(l,i,s&&s[e],a)),l}function $W(t,e,n,r){const{_proxy:i,_context:s,_subProxy:a,_stack:l}=n;if(l.has(t))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+t);l.add(t);let u=e(s,a||r);return l.delete(t),dv(t,u)&&(u=fv(i._scopes,i,t,u)),u}function qW(t,e,n,r){const{_proxy:i,_context:s,_subProxy:a,_descriptors:l}=n;if(typeof s.index<"u"&&r(t))return e[s.index%e.length];if(Ke(e[0])){const u=e,d=i._scopes.filter(f=>f!==u);e=[];for(const f of u){const p=fv(d,i,t,f);e.push(po(p,s,a&&a[t],l))}}return e}function ST(t,e,n){return Ts(t)?t(e,n):t}const GW=(t,e)=>t===!0?e:typeof t=="string"?ql(e,t):void 0;function YW(t,e,n,r,i){for(const s of e){const a=GW(n,s);if(a){t.add(a);const l=ST(a._fallback,n,i);if(typeof l<"u"&&l!==n&&l!==r)return l}else if(a===!1&&typeof r<"u"&&n!==r)return null}return!1}function fv(t,e,n,r){const i=e._rootScopes,s=ST(e._fallback,n,r),a=[...t,...i],l=new Set;l.add(r);let u=NS(l,a,n,s||n,r);return u===null||typeof s<"u"&&s!==n&&(u=NS(l,a,s,u,r),u===null)?!1:uv(Array.from(l),[""],i,s,()=>QW(e,n,r))}function NS(t,e,n,r,i){for(;n;)n=YW(t,e,n,r,i);return n}function QW(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];return cn(i)&&Ke(n)?n:i||{}}function KW(t,e,n,r){let i;for(const s of e)if(i=wT(WW(s,t),n),typeof i<"u")return dv(t,i)?fv(n,r,t,i):i}function wT(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function IS(t){let e=t._keys;return e||(e=t._keys=ZW(t._scopes)),e}function ZW(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}const XW=Number.EPSILON||1e-14,go=(t,e)=>e<t.length&&!t[e].skip&&t[e],xT=t=>t==="x"?"y":"x";function JW(t,e,n,r){const i=t.skip?e:t,s=e,a=n.skip?e:n,l=zg(s,i),u=zg(a,s);let d=l/(l+u),f=u/(l+u);d=isNaN(d)?0:d,f=isNaN(f)?0:f;const p=r*d,m=r*f;return{previous:{x:s.x-p*(a.x-i.x),y:s.y-p*(a.y-i.y)},next:{x:s.x+m*(a.x-i.x),y:s.y+m*(a.y-i.y)}}}function eV(t,e,n){const r=t.length;let i,s,a,l,u,d=go(t,0);for(let f=0;f<r-1;++f)if(u=d,d=go(t,f+1),!(!u||!d)){if(Rl(e[f],0,XW)){n[f]=n[f+1]=0;continue}i=n[f]/e[f],s=n[f+1]/e[f],l=Math.pow(i,2)+Math.pow(s,2),!(l<=9)&&(a=3/Math.sqrt(l),n[f]=i*a*e[f],n[f+1]=s*a*e[f])}}function tV(t,e,n="x"){const r=xT(n),i=t.length;let s,a,l,u=go(t,0);for(let d=0;d<i;++d){if(a=l,l=u,u=go(t,d+1),!l)continue;const f=l[n],p=l[r];a&&(s=(f-a[n])/3,l[`cp1${n}`]=f-s,l[`cp1${r}`]=p-s*e[d]),u&&(s=(u[n]-f)/3,l[`cp2${n}`]=f+s,l[`cp2${r}`]=p+s*e[d])}}function nV(t,e="x"){const n=xT(e),r=t.length,i=Array(r).fill(0),s=Array(r);let a,l,u,d=go(t,0);for(a=0;a<r;++a)if(l=u,u=d,d=go(t,a+1),!!u){if(d){const f=d[e]-u[e];i[a]=f!==0?(d[n]-u[n])/f:0}s[a]=l?d?ho(i[a-1])!==ho(i[a])?0:(i[a-1]+i[a])/2:i[a-1]:i[a]}eV(t,i,s),tV(t,s,e)}function Uu(t,e,n){return Math.max(Math.min(t,n),e)}function rV(t,e){let n,r,i,s,a,l=Ql(t[0],e);for(n=0,r=t.length;n<r;++n)a=s,s=l,l=n<r-1&&Ql(t[n+1],e),s&&(i=t[n],a&&(i.cp1x=Uu(i.cp1x,e.left,e.right),i.cp1y=Uu(i.cp1y,e.top,e.bottom)),l&&(i.cp2x=Uu(i.cp2x,e.left,e.right),i.cp2y=Uu(i.cp2y,e.top,e.bottom)))}function iV(t,e,n,r,i){let s,a,l,u;if(e.spanGaps&&(t=t.filter(d=>!d.skip)),e.cubicInterpolationMode==="monotone")nV(t,i);else{let d=r?t[t.length-1]:t[0];for(s=0,a=t.length;s<a;++s)l=t[s],u=JW(d,l,t[Math.min(s+1,a-(r?0:1))%a],e.tension),l.cp1x=u.previous.x,l.cp1y=u.previous.y,l.cp2x=u.next.x,l.cp2y=u.next.y,d=l}e.capBezierPoints&&rV(t,n)}function hv(){return typeof window<"u"&&typeof document<"u"}function pv(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Ud(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const wf=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function sV(t,e){return wf(t).getPropertyValue(e)}const aV=["top","right","bottom","left"];function oa(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=aV[i];r[s]=parseFloat(t[e+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const oV=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function lV(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:s}=r;let a=!1,l,u;if(oV(i,s,t.target))l=i,u=s;else{const d=e.getBoundingClientRect();l=r.clientX-d.left,u=r.clientY-d.top,a=!0}return{x:l,y:u,box:a}}function Zs(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=wf(n),s=i.boxSizing==="border-box",a=oa(i,"padding"),l=oa(i,"border","width"),{x:u,y:d,box:f}=lV(t,n),p=a.left+(f&&l.left),m=a.top+(f&&l.top);let{width:v,height:b}=e;return s&&(v-=a.width+l.width,b-=a.height+l.height),{x:Math.round((u-p)/v*n.width/r),y:Math.round((d-m)/b*n.height/r)}}function cV(t,e,n){let r,i;if(e===void 0||n===void 0){const s=t&&pv(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const a=s.getBoundingClientRect(),l=wf(s),u=oa(l,"border","width"),d=oa(l,"padding");e=a.width-d.width-u.width,n=a.height-d.height-u.height,r=Ud(l.maxWidth,s,"clientWidth"),i=Ud(l.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:r||Hd,maxHeight:i||Hd}}const ys=t=>Math.round(t*10)/10;function uV(t,e,n,r){const i=wf(t),s=oa(i,"margin"),a=Ud(i.maxWidth,t,"clientWidth")||Hd,l=Ud(i.maxHeight,t,"clientHeight")||Hd,u=cV(t,e,n);let{width:d,height:f}=u;if(i.boxSizing==="content-box"){const m=oa(i,"border","width"),v=oa(i,"padding");d-=v.width+m.width,f-=v.height+m.height}return d=Math.max(0,d-s.width),f=Math.max(0,r?d/r:f-s.height),d=ys(Math.min(d,a,u.maxWidth)),f=ys(Math.min(f,l,u.maxHeight)),d&&!f&&(f=ys(d/2)),(e!==void 0||n!==void 0)&&r&&u.height&&f>u.height&&(f=u.height,d=ys(Math.floor(f*r))),{width:d,height:f}}function PS(t,e,n){const r=e||1,i=ys(t.height*r),s=ys(t.width*r);t.height=ys(t.height),t.width=ys(t.width);const a=t.canvas;return a.style&&(n||!a.style.height&&!a.style.width)&&(a.style.height=`${t.height}px`,a.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||a.height!==i||a.width!==s?(t.currentDevicePixelRatio=r,a.height=i,a.width=s,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const dV=(function(){let t=!1;try{const e={get passive(){return t=!0,!1}};hv()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t})();function LS(t,e){const n=sV(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Xs(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function fV(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function hV(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},a=Xs(t,i,n),l=Xs(i,s,n),u=Xs(s,e,n),d=Xs(a,l,n),f=Xs(l,u,n);return Xs(d,f,n)}const pV=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},gV=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function oo(t,e,n){return t?pV(e,n):gV()}function ET(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function CT(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function TT(t){return t==="angle"?{between:Yl,compare:fW,normalize:lr}:{between:na,compare:(e,n)=>e-n,normalize:e=>e}}function FS({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:i}}function mV(t,e,n){const{property:r,start:i,end:s}=n,{between:a,normalize:l}=TT(r),u=e.length;let{start:d,end:f,loop:p}=t,m,v;if(p){for(d+=u,f+=u,m=0,v=u;m<v&&a(l(e[d%u][r]),i,s);++m)d--,f--;d%=u,f%=u}return f<d&&(f+=u),{start:d,end:f,loop:p,style:t.style}}function DT(t,e,n){if(!n)return[t];const{property:r,start:i,end:s}=n,a=e.length,{compare:l,between:u,normalize:d}=TT(r),{start:f,end:p,loop:m,style:v}=mV(t,e,n),b=[];let _=!1,w=null,x,C,k;const R=()=>u(i,k,x)&&l(i,k)!==0,A=()=>l(s,x)===0||u(s,k,x),M=()=>_||R(),P=()=>!_||A();for(let O=f,z=f;O<=p;++O)C=e[O%a],!C.skip&&(x=d(C[r]),x!==k&&(_=u(x,i,s),w===null&&M()&&(w=l(x,i)===0?O:z),w!==null&&P()&&(b.push(FS({start:w,end:O,loop:m,count:a,style:v})),w=null),z=O,k=x));return w!==null&&b.push(FS({start:w,end:p,loop:m,count:a,style:v})),b}function kT(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const s=DT(r[i],t.points,e);s.length&&n.push(...s)}return n}function vV(t,e,n,r){let i=0,s=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(s+=i);s>i&&t[s%e].skip;)s--;return s%=e,{start:i,end:s}}function yV(t,e,n,r){const i=t.length,s=[];let a=e,l=t[e],u;for(u=e+1;u<=n;++u){const d=t[u%i];d.skip||d.stop?l.skip||(r=!1,s.push({start:e%i,end:(u-1)%i,loop:r}),e=a=d.stop?u:null):(a=u,l.skip&&(e=u)),l=d}return a!==null&&s.push({start:e%i,end:a%i,loop:r}),s}function bV(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const s=!!t._loop,{start:a,end:l}=vV(n,i,s,r);if(r===!0)return jS(t,[{start:a,end:l,loop:s}],n,e);const u=l<a?l+i:l,d=!!t._fullLoop&&a===0&&l===i-1;return jS(t,yV(n,a,u,d),n,e)}function jS(t,e,n,r){return!r||!r.setContext||!n?e:_V(t,e,n,r)}function _V(t,e,n,r){const i=t._chart.getContext(),s=zS(t.options),{_datasetIndex:a,options:{spanGaps:l}}=t,u=n.length,d=[];let f=s,p=e[0].start,m=p;function v(b,_,w,x){const C=l?-1:1;if(b!==_){for(b+=u;n[b%u].skip;)b-=C;for(;n[_%u].skip;)_+=C;b%u!==_%u&&(d.push({start:b%u,end:_%u,loop:w,style:x}),f=x,p=_%u)}}for(const b of e){p=l?p:b.start;let _=n[p%u],w;for(m=p+1;m<=b.end;m++){const x=n[m%u];w=zS(r.setContext(Sa(i,{type:"segment",p0:_,p1:x,p0DataIndex:(m-1)%u,p1DataIndex:m%u,datasetIndex:a}))),SV(w,f)&&v(p,m-1,b.loop,f),_=x,f=w}p<m-1&&v(p,m-1,b.loop,f)}return d}function zS(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function SV(t,e){if(!e)return!1;const n=[],r=function(i,s){return ov(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function Bu(t,e,n){return t.options.clip?t[n]:e[n]}function wV(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:Bu(n,e,"left"),right:Bu(n,e,"right"),top:Bu(r,e,"top"),bottom:Bu(r,e,"bottom")}:e}function AT(t,e){const n=e._clip;if(n.disabled)return!1;const r=wV(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class xV{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,i){const s=n.listeners[i],a=n.duration;s.forEach(l=>l({chart:e,initial:n.initial,numSteps:a,currentStep:Math.min(r-n.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=gT.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let a=s.length-1,l=!1,u;for(;a>=0;--a)u=s[a],u._active?(u._total>r.duration&&(r.duration=u._total),u.tick(e),l=!0):(s[a]=s[s.length-1],s.pop());l&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var wi=new xV;const HS="transparent",EV={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=AS(t||HS),i=r.valid&&AS(e||HS);return i&&i.valid?i.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class CV{constructor(e,n,r,i){const s=n[r];i=Hu([e.to,i,s,e.from]);const a=Hu([e.from,s,i]);this._active=!0,this._fn=e.fn||EV[e.type||typeof a],this._easing=Ol[e.easing]||Ol.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=a,this._to=i,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,a=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(a,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Hu([e.to,n,i,e.from]),this._from=Hu([e.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,i=this._prop,s=this._from,a=this._loop,l=this._to;let u;if(this._active=s!==l&&(a||n<r),!this._active){this._target[i]=l,this._notify(!0);return}if(n<0){this._target[i]=s;return}u=n/r%2,u=a&&u>1?2-u:u,u=this._easing(Math.min(1,Math.max(0,u))),this._target[i]=this._fn(s,l,u)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][n]()}}class RT{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Ke(e))return;const n=Object.keys(Qt.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!Ke(s))return;const a={};for(const l of n)a[l]=s[l];(cn(s.properties)&&s.properties||[i]).forEach(l=>{(l===i||!r.has(l))&&r.set(l,a)})})}_animateOptions(e,n){const r=n.options,i=DV(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&TV(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,n){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),a=Object.keys(n),l=Date.now();let u;for(u=a.length-1;u>=0;--u){const d=a[u];if(d.charAt(0)==="$")continue;if(d==="options"){i.push(...this._animateOptions(e,n));continue}const f=n[d];let p=s[d];const m=r.get(d);if(p)if(m&&p.active()){p.update(m,f,l);continue}else p.cancel();if(!m||!m.duration){e[d]=f;continue}s[d]=p=new CV(m,e,d,f),i.push(p)}return i}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return wi.add(this._chart,r),!0}}function TV(t,e){const n=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=t[r[i]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function DV(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function US(t,e){const n=t&&t.options||{},r=n.reverse,i=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function kV(t,e,n){if(n===!1)return!1;const r=US(t,n),i=US(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function AV(t){let e,n,r,i;return Ke(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:t===!1}}function OT(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function BS(t,e,n,r={}){const i=t.keys,s=r.mode==="single";let a,l,u,d;if(e===null)return;let f=!1;for(a=0,l=i.length;a<l;++a){if(u=+i[a],u===n){if(f=!0,r.all)continue;break}d=t.values[u],Rn(d)&&(s||e===0||ho(e)===ho(d))&&(e+=d)}return!f&&!r.all?0:e}function RV(t,e){const{iScale:n,vScale:r}=e,i=n.axis==="x"?"x":"y",s=r.axis==="x"?"x":"y",a=Object.keys(t),l=new Array(a.length);let u,d,f;for(u=0,d=a.length;u<d;++u)f=a[u],l[u]={[i]:f,[s]:t[f]};return l}function Gp(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function OV(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function MV(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function NV(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function WS(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=t[i.index];if(n&&s>0||!n&&s<0)return i.index}return null}function VS(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:s,vScale:a,index:l}=r,u=s.axis,d=a.axis,f=OV(s,a,r),p=e.length;let m;for(let v=0;v<p;++v){const b=e[v],{[u]:_,[d]:w}=b,x=b._stacks||(b._stacks={});m=x[d]=NV(i,f,_),m[l]=w,m._top=WS(m,a,!0,r.type),m._bottom=WS(m,a,!1,r.type);const C=m._visualValues||(m._visualValues={});C[l]=w}}function Yp(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function IV(t,e){return Sa(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function PV(t,e,n){return Sa(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function fl(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const i of e){const s=i._stacks;if(!s||s[r]===void 0||s[r][n]===void 0)return;delete s[r][n],s[r]._visualValues!==void 0&&s[r]._visualValues[n]!==void 0&&delete s[r]._visualValues[n]}}}const Qp=t=>t==="reset"||t==="none",$S=(t,e)=>e?t:Object.assign({},t),LV=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:OT(n,!0),values:null};class gv{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Gp(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&fl(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),i=(p,m,v,b)=>p==="x"?m:p==="r"?b:v,s=n.xAxisID=$e(r.xAxisID,Yp(e,"x")),a=n.yAxisID=$e(r.yAxisID,Yp(e,"y")),l=n.rAxisID=$e(r.rAxisID,Yp(e,"r")),u=n.indexAxis,d=n.iAxisID=i(u,s,a,l),f=n.vAxisID=i(u,a,s,l);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(a),n.rScale=this.getScaleForId(l),n.iScale=this.getScaleForId(d),n.vScale=this.getScaleForId(f)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&TS(this._data,this),e._stacked&&fl(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(Ke(n)){const i=this._cachedMeta;this._data=RV(n,i)}else if(r!==n){if(r){TS(r,this);const i=this._cachedMeta;fl(i),i._parsed=[]}n&&Object.isExtensible(n)&&mW(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=n._stacked;n._stacked=Gp(n.vScale,n),n.stack!==r.stack&&(i=!0,fl(n),n.stack=r.stack),this._resyncElements(e),(i||s!==n._stacked)&&(VS(this,n._parsed),n._stacked=Gp(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:a}=r,l=s.axis;let u=e===0&&n===i.length?!0:r._sorted,d=e>0&&r._parsed[e-1],f,p,m;if(this._parsing===!1)r._parsed=i,r._sorted=!0,m=i;else{cn(i[e])?m=this.parseArrayData(r,i,e,n):Ke(i[e])?m=this.parseObjectData(r,i,e,n):m=this.parsePrimitiveData(r,i,e,n);const v=()=>p[l]===null||d&&p[l]<d[l];for(f=0;f<n;++f)r._parsed[f+e]=p=m[f],u&&(v()&&(u=!1),d=p);r._sorted=u}a&&VS(this,m)}parsePrimitiveData(e,n,r,i){const{iScale:s,vScale:a}=e,l=s.axis,u=a.axis,d=s.getLabels(),f=s===a,p=new Array(i);let m,v,b;for(m=0,v=i;m<v;++m)b=m+r,p[m]={[l]:f||s.parse(d[b],b),[u]:a.parse(n[b],b)};return p}parseArrayData(e,n,r,i){const{xScale:s,yScale:a}=e,l=new Array(i);let u,d,f,p;for(u=0,d=i;u<d;++u)f=u+r,p=n[f],l[u]={x:s.parse(p[0],f),y:a.parse(p[1],f)};return l}parseObjectData(e,n,r,i){const{xScale:s,yScale:a}=e,{xAxisKey:l="x",yAxisKey:u="y"}=this._parsing,d=new Array(i);let f,p,m,v;for(f=0,p=i;f<p;++f)m=f+r,v=n[m],d[f]={x:s.parse(ql(v,l),m),y:a.parse(ql(v,u),m)};return d}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const i=this.chart,s=this._cachedMeta,a=n[e.axis],l={keys:OT(i,!0),values:n._stacks[e.axis]._visualValues};return BS(l,a,s.index,{mode:r})}updateRangeFromParsed(e,n,r,i){const s=r[n.axis];let a=s===null?NaN:s;const l=i&&r._stacks[n.axis];i&&l&&(i.values=l,a=BS(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}getMinMax(e,n){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&e===r.iScale,a=i.length,l=this._getOtherScale(e),u=LV(n,r,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:f,max:p}=MV(l);let m,v;function b(){v=i[m];const _=v[l.axis];return!Rn(v[e.axis])||f>_||p<_}for(m=0;m<a&&!(!b()&&(this.updateRangeFromParsed(d,e,v,u),s));++m);if(s){for(m=a-1;m>=0;--m)if(!b()){this.updateRangeFromParsed(d,e,v,u);break}}return d}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let i,s,a;for(i=0,s=n.length;i<s;++i)a=n[i][e.axis],Rn(a)&&r.push(a);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,i=n.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=AV($e(this.options.clip,kV(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],s=n.chartArea,a=[],l=this._drawStart||0,u=this._drawCount||i.length-l,d=this.options.drawActiveElementsOnTop;let f;for(r.dataset&&r.dataset.draw(e,s,l,u),f=l;f<l+u;++f){const p=i[f];p.hidden||(p.active&&d?a.push(p):p.draw(e,s))}for(f=0;f<a.length;++f)a[f].draw(e,s)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const a=this._cachedMeta.data[e];s=a.$context||(a.$context=PV(this.getContext(),e,a)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=IV(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const i=n==="active",s=this._cachedDataOpts,a=e+"-"+n,l=s[a],u=this.enableOptionSharing&&zd(r);if(l)return $S(l,u);const d=this.chart.config,f=d.datasetElementScopeKeys(this._type,e),p=i?[`${e}Hover`,"hover",e,""]:[e,""],m=d.getOptionScopes(this.getDataset(),f),v=Object.keys(Qt.elements[e]),b=()=>this.getContext(r,i,n),_=d.resolveNamedOptions(m,v,b,p);return _.$shared&&(_.$shared=u,s[a]=Object.freeze($S(_,u))),_}_resolveAnimations(e,n,r){const i=this.chart,s=this._cachedDataOpts,a=`animation-${n}`,l=s[a];if(l)return l;let u;if(i.options.animation!==!1){const f=this.chart.config,p=f.datasetAnimationScopeKeys(this._type,n),m=f.getOptionScopes(this.getDataset(),p);u=f.createResolver(m,this.getContext(e,r,n))}const d=new RT(i,u&&u.animations);return u&&u._cacheable&&(s[a]=Object.freeze(d)),d}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||Qp(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),i=this._sharedOptions,s=this.getSharedOptions(r),a=this.includeOptions(n,s)||s!==i;return this.updateSharedOptions(s,n,r),{sharedOptions:s,includeOptions:a}}updateElement(e,n,r,i){Qp(i)?Object.assign(e,r):this._resolveAnimations(n,i).update(e,r)}updateSharedOptions(e,n,r){e&&!Qp(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,i){e.active=i;const s=this.getStyle(n,i);this._resolveAnimations(n,r,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[l,u,d]of this._syncList)this[l](u,d);this._syncList=[];const i=r.length,s=n.length,a=Math.min(s,i);a&&this.parse(0,a),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,n,r=!0){const i=this._cachedMeta,s=i.data,a=e+n;let l;const u=d=>{for(d.length+=n,l=d.length-1;l>=a;l--)d[l]=d[l-n]};for(u(s),l=e;l<a;++l)s[l]=new this.dataElementType;this._parsing&&u(i._parsed),this.parse(e,n),r&&this.updateElements(s,e,n,"reset")}updateElements(e,n,r,i){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,n);r._stacked&&fl(r,i)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,i]=e;this[n](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function FV(t,e,n){let r=1,i=1,s=0,a=0;if(e<Ft){const l=t,u=l+e,d=Math.cos(l),f=Math.sin(l),p=Math.cos(u),m=Math.sin(u),v=(k,R,A)=>Yl(k,l,u,!0)?1:Math.max(R,R*n,A,A*n),b=(k,R,A)=>Yl(k,l,u,!0)?-1:Math.min(R,R*n,A,A*n),_=v(0,d,p),w=v(un,f,m),x=b(pt,d,p),C=b(pt+un,f,m);r=(_-x)/2,i=(w-C)/2,s=-(_+x)/2,a=-(w+C)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:a}}class jV extends gv{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data,{labels:{pointStyle:r,textAlign:i,color:s,useBorderRadius:a,borderRadius:l}}=e.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((u,d)=>{const p=e.getDatasetMeta(0).controller.getStyle(d);return{text:u,fillStyle:p.backgroundColor,fontColor:s,hidden:!e.getDataVisibility(d),lineDash:p.borderDash,lineDashOffset:p.borderDashOffset,lineJoin:p.borderJoinStyle,lineWidth:p.borderWidth,strokeStyle:p.borderColor,textAlign:i,pointStyle:r,borderRadius:a&&(l||p.borderRadius),index:d}}):[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}};constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=r;else{let s=u=>+r[u];if(Ke(r[e])){const{key:u="value"}=this._parsing;s=d=>+ql(r[d],u)}let a,l;for(a=e,l=e+n;a<l;++a)i._parsed[a]=s(a)}}_getRotation(){return Mi(this.options.rotation-90)}_getCircumference(){return Mi(this.options.circumference)}_getRotationExtents(){let e=Ft,n=-Ft;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const i=this.chart.getDatasetMeta(r).controller,s=i._getRotation(),a=i._getCircumference();e=Math.min(e,s),n=Math.max(n,s+a)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,i=this._cachedMeta,s=i.data,a=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,l=Math.max((Math.min(r.width,r.height)-a)/2,0),u=Math.min(JB(this.options.cutout,l),1),d=this._getRingWeight(this.index),{circumference:f,rotation:p}=this._getRotationExtents(),{ratioX:m,ratioY:v,offsetX:b,offsetY:_}=FV(p,f,u),w=(r.width-a)/m,x=(r.height-a)/v,C=Math.max(Math.min(w,x)/2,0),k=uT(this.options.radius,C),R=Math.max(k*u,0),A=(k-R)/this._getVisibleDatasetWeightTotal();this.offsetX=b*k,this.offsetY=_*k,i.total=this.calculateTotal(),this.outerRadius=k-A*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-A*d,0),this.updateElements(s,0,s.length,e)}_circumference(e,n){const r=this.options,i=this._cachedMeta,s=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*s/Ft)}updateElements(e,n,r,i){const s=i==="reset",a=this.chart,l=a.chartArea,d=a.options.animation,f=(l.left+l.right)/2,p=(l.top+l.bottom)/2,m=s&&d.animateScale,v=m?0:this.innerRadius,b=m?0:this.outerRadius,{sharedOptions:_,includeOptions:w}=this._getSharedOptions(n,i);let x=this._getRotation(),C;for(C=0;C<n;++C)x+=this._circumference(C,s);for(C=n;C<n+r;++C){const k=this._circumference(C,s),R=e[C],A={x:f+this.offsetX,y:p+this.offsetY,startAngle:x,endAngle:x+k,circumference:k,outerRadius:b,innerRadius:v};w&&(A.options=_||this.resolveDataElementOptions(C,R.active?"active":i)),x+=k,this.updateElement(R,C,A,i)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let r=0,i;for(i=0;i<n.length;i++){const s=e._parsed[i];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(i)&&!n[i].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?Ft*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=lv(n._parsed[e],r.options.locale);return{label:i[e]||"",value:s}}getMaxBorderWidth(e){let n=0;const r=this.chart;let i,s,a,l,u;if(!e){for(i=0,s=r.data.datasets.length;i<s;++i)if(r.isDatasetVisible(i)){a=r.getDatasetMeta(i),e=a.data,l=a.controller;break}}if(!e)return 0;for(i=0,s=e.length;i<s;++i)u=l.resolveDataElementOptions(i),u.borderAlign!=="inner"&&(n=Math.max(n,u.borderWidth||0,u.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,i=e.length;r<i;++r){const s=this.resolveDataElementOptions(r);n=Math.max(n,s.offset||0,s.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max($e(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class zV extends gv{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=n,a=this.chart._animationsDisabled;let{start:l,count:u}=_W(n,i,a);this._drawStart=l,this._drawCount=u,SW(n)&&(l=0,u=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const d=this.resolveDatasetElementOptions(e);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(r,void 0,{animated:!a,options:d},e),this.updateElements(i,l,u,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:a,vScale:l,_stacked:u,_dataset:d}=this._cachedMeta,{sharedOptions:f,includeOptions:p}=this._getSharedOptions(n,i),m=a.axis,v=l.axis,{spanGaps:b,segment:_}=this.options,w=Gl(b)?b:Number.POSITIVE_INFINITY,x=this.chart._animationsDisabled||s||i==="none",C=n+r,k=e.length;let R=n>0&&this.getParsed(n-1);for(let A=0;A<k;++A){const M=e[A],P=x?M:{};if(A<n||A>=C){P.skip=!0;continue}const O=this.getParsed(A),z=wt(O[v]),B=P[m]=a.getPixelForValue(O[m],A),$=P[v]=s||z?l.getBasePixel():l.getPixelForValue(u?this.applyStack(l,O,u):O[v],A);P.skip=isNaN(B)||isNaN($)||z,P.stop=A>0&&Math.abs(O[m]-R[m])>w,_&&(P.parsed=O,P.raw=d.data[A]),p&&(P.options=f||this.resolveDataElementOptions(A,M.active?"active":i)),x||this.updateElement(M,A,P,i),R=O}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),a=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,a)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}class HV extends jV{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}function Gs(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class mv{static override(e){Object.assign(mv.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Gs()}parse(){return Gs()}format(){return Gs()}add(){return Gs()}diff(){return Gs()}startOf(){return Gs()}endOf(){return Gs()}}var UV={_date:mv};function BV(t,e,n,r){const{controller:i,data:s,_sorted:a}=t,l=i._cachedMeta.iScale,u=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(l&&e===l.axis&&e!=="r"&&a&&s.length){const d=l._reversePixels?pW:ra;if(r){if(i._sharedOptions){const f=s[0],p=typeof f.getRange=="function"&&f.getRange(e);if(p){const m=d(s,e,n-p),v=d(s,e,n+p);return{lo:m.lo,hi:v.hi}}}}else{const f=d(s,e,n);if(u){const{vScale:p}=i._cachedMeta,{_parsed:m}=t,v=m.slice(0,f.lo+1).reverse().findIndex(_=>!wt(_[p.axis]));f.lo-=Math.max(0,v);const b=m.slice(f.hi).findIndex(_=>!wt(_[p.axis]));f.hi+=Math.max(0,b)}return f}}return{lo:0,hi:s.length-1}}function xf(t,e,n,r,i){const s=t.getSortedVisibleDatasetMetas(),a=n[e];for(let l=0,u=s.length;l<u;++l){const{index:d,data:f}=s[l],{lo:p,hi:m}=BV(s[l],e,a,i);for(let v=p;v<=m;++v){const b=f[v];b.skip||r(b,d,v)}}}function WV(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,i){const s=e?Math.abs(r.x-i.x):0,a=n?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(a,2))}}function Kp(t,e,n,r,i){const s=[];return!i&&!t.isPointInArea(e)||xf(t,n,e,function(l,u,d){!i&&!Ql(l,t.chartArea,0)||l.inRange(e.x,e.y,r)&&s.push({element:l,datasetIndex:u,index:d})},!0),s}function VV(t,e,n,r){let i=[];function s(a,l,u){const{startAngle:d,endAngle:f}=a.getProps(["startAngle","endAngle"],r),{angle:p}=hT(a,{x:e.x,y:e.y});Yl(p,d,f)&&i.push({element:a,datasetIndex:l,index:u})}return xf(t,n,e,s),i}function $V(t,e,n,r,i,s){let a=[];const l=WV(n);let u=Number.POSITIVE_INFINITY;function d(f,p,m){const v=f.inRange(e.x,e.y,i);if(r&&!v)return;const b=f.getCenterPoint(i);if(!(!!s||t.isPointInArea(b))&&!v)return;const w=l(e,b);w<u?(a=[{element:f,datasetIndex:p,index:m}],u=w):w===u&&a.push({element:f,datasetIndex:p,index:m})}return xf(t,n,e,d),a}function Zp(t,e,n,r,i,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!r?VV(t,e,n,i):$V(t,e,n,r,i,s)}function qS(t,e,n,r,i){const s=[],a=n==="x"?"inXRange":"inYRange";let l=!1;return xf(t,n,e,(u,d,f)=>{u[a]&&u[a](e[n],i)&&(s.push({element:u,datasetIndex:d,index:f}),l=l||u.inRange(e.x,e.y,i))}),r&&!l?[]:s}var qV={modes:{index(t,e,n,r){const i=Zs(e,t),s=n.axis||"x",a=n.includeInvisible||!1,l=n.intersect?Kp(t,i,s,r,a):Zp(t,i,s,!1,r,a),u=[];return l.length?(t.getSortedVisibleDatasetMetas().forEach(d=>{const f=l[0].index,p=d.data[f];p&&!p.skip&&u.push({element:p,datasetIndex:d.index,index:f})}),u):[]},dataset(t,e,n,r){const i=Zs(e,t),s=n.axis||"xy",a=n.includeInvisible||!1;let l=n.intersect?Kp(t,i,s,r,a):Zp(t,i,s,!1,r,a);if(l.length>0){const u=l[0].datasetIndex,d=t.getDatasetMeta(u).data;l=[];for(let f=0;f<d.length;++f)l.push({element:d[f],datasetIndex:u,index:f})}return l},point(t,e,n,r){const i=Zs(e,t),s=n.axis||"xy",a=n.includeInvisible||!1;return Kp(t,i,s,r,a)},nearest(t,e,n,r){const i=Zs(e,t),s=n.axis||"xy",a=n.includeInvisible||!1;return Zp(t,i,s,n.intersect,r,a)},x(t,e,n,r){const i=Zs(e,t);return qS(t,i,"x",n.intersect,r)},y(t,e,n,r){const i=Zs(e,t);return qS(t,i,"y",n.intersect,r)}}};const MT=["left","top","right","bottom"];function hl(t,e){return t.filter(n=>n.pos===e)}function GS(t,e){return t.filter(n=>MT.indexOf(n.pos)===-1&&n.box.axis===e)}function pl(t,e){return t.sort((n,r)=>{const i=e?r:n,s=e?n:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function GV(t){const e=[];let n,r,i,s,a,l;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],{position:s,options:{stack:a,stackWeight:l=1}}=i,e.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:a&&s+a,stackWeight:l});return e}function YV(t){const e={};for(const n of t){const{stack:r,pos:i,stackWeight:s}=n;if(!r||!MT.includes(i))continue;const a=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=s}return e}function QV(t,e){const n=YV(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,a,l;for(s=0,a=t.length;s<a;++s){l=t[s];const{fullSize:u}=l.box,d=n[l.stack],f=d&&l.stackWeight/d.weight;l.horizontal?(l.width=f?f*r:u&&e.availableWidth,l.height=i):(l.width=r,l.height=f?f*i:u&&e.availableHeight)}return n}function KV(t){const e=GV(t),n=pl(e.filter(d=>d.box.fullSize),!0),r=pl(hl(e,"left"),!0),i=pl(hl(e,"right")),s=pl(hl(e,"top"),!0),a=pl(hl(e,"bottom")),l=GS(e,"x"),u=GS(e,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(u).concat(a).concat(l),chartArea:hl(e,"chartArea"),vertical:r.concat(i).concat(u),horizontal:s.concat(a).concat(l)}}function YS(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function NT(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function ZV(t,e,n,r){const{pos:i,box:s}=n,a=t.maxPadding;if(!Ke(i)){n.size&&(t[i]-=n.size);const p=r[n.stack]||{size:0,count:1};p.size=Math.max(p.size,n.horizontal?s.height:s.width),n.size=p.size/p.count,t[i]+=n.size}s.getPadding&&NT(a,s.getPadding());const l=Math.max(0,e.outerWidth-YS(a,t,"left","right")),u=Math.max(0,e.outerHeight-YS(a,t,"top","bottom")),d=l!==t.w,f=u!==t.h;return t.w=l,t.h=u,n.horizontal?{same:d,other:f}:{same:f,other:d}}function XV(t){const e=t.maxPadding;function n(r){const i=Math.max(e[r]-t[r],0);return t[r]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function JV(t,e){const n=e.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(a=>{s[a]=Math.max(e[a],n[a])}),s}return r(t?["left","right"]:["top","bottom"])}function bl(t,e,n,r){const i=[];let s,a,l,u,d,f;for(s=0,a=t.length,d=0;s<a;++s){l=t[s],u=l.box,u.update(l.width||e.w,l.height||e.h,JV(l.horizontal,e));const{same:p,other:m}=ZV(e,n,l,r);d|=p&&i.length,f=f||m,u.fullSize||i.push(l)}return d&&bl(i,e,n,r)||f}function Wu(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function QS(t,e,n,r){const i=n.padding;let{x:s,y:a}=e;for(const l of t){const u=l.box,d=r[l.stack]||{placed:0,weight:1},f=l.stackWeight/d.weight||1;if(l.horizontal){const p=e.w*f,m=d.size||u.height;zd(d.start)&&(a=d.start),u.fullSize?Wu(u,i.left,a,n.outerWidth-i.right-i.left,m):Wu(u,e.left+d.placed,a,p,m),d.start=a,d.placed+=p,a=u.bottom}else{const p=e.h*f,m=d.size||u.width;zd(d.start)&&(s=d.start),u.fullSize?Wu(u,s,i.top,m,n.outerHeight-i.bottom-i.top):Wu(u,s,e.top+d.placed,m,p),d.start=s,d.placed+=p,s=u.right}}e.x=s,e.y=a}var Tr={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=kr(t.options.layout.padding),s=Math.max(e-i.width,0),a=Math.max(n-i.height,0),l=KV(t.boxes),u=l.vertical,d=l.horizontal;ht(t.boxes,_=>{typeof _.beforeLayout=="function"&&_.beforeLayout()});const f=u.reduce((_,w)=>w.box.options&&w.box.options.display===!1?_:_+1,0)||1,p=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:s,availableHeight:a,vBoxMaxWidth:s/2/f,hBoxMaxHeight:a/2}),m=Object.assign({},i);NT(m,kr(r));const v=Object.assign({maxPadding:m,w:s,h:a,x:i.left,y:i.top},i),b=QV(u.concat(d),p);bl(l.fullSize,v,p,b),bl(u,v,p,b),bl(d,v,p,b)&&bl(u,v,p,b),XV(v),QS(l.leftAndTop,v,p,b),v.x+=v.w,v.y+=v.h,QS(l.rightAndBottom,v,p,b),t.chartArea={left:v.left,top:v.top,right:v.left+v.w,bottom:v.top+v.h,height:v.h,width:v.w},ht(l.chartArea,_=>{const w=_.box;Object.assign(w,t.chartArea),w.update(v.w,v.h,{left:0,top:0,right:0,bottom:0})})}};class IT{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,i){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,i?Math.floor(n/i):r)}}isAttached(e){return!0}updateConfig(e){}}class e5 extends IT{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const ld="$chartjs",t5={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},KS=t=>t===null||t==="";function n5(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[ld]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",KS(i)){const s=LS(t,"width");s!==void 0&&(t.width=s)}if(KS(r))if(t.style.height==="")t.height=t.width/(e||2);else{const s=LS(t,"height");s!==void 0&&(t.height=s)}return t}const PT=dV?{passive:!0}:!1;function r5(t,e,n){t&&t.addEventListener(e,n,PT)}function i5(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,PT)}function s5(t,e){const n=t5[t.type]||t.type,{x:r,y:i}=Zs(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:i!==void 0?i:null}}function Bd(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function a5(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let a=!1;for(const l of s)a=a||Bd(l.addedNodes,r),a=a&&!Bd(l.removedNodes,r);a&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function o5(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let a=!1;for(const l of s)a=a||Bd(l.removedNodes,r),a=a&&!Bd(l.addedNodes,r);a&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const Zl=new Map;let ZS=0;function LT(){const t=window.devicePixelRatio;t!==ZS&&(ZS=t,Zl.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function l5(t,e){Zl.size||window.addEventListener("resize",LT),Zl.set(t,e)}function c5(t){Zl.delete(t),Zl.size||window.removeEventListener("resize",LT)}function u5(t,e,n){const r=t.canvas,i=r&&pv(r);if(!i)return;const s=mT((l,u)=>{const d=i.clientWidth;n(l,u),d<i.clientWidth&&n()},window),a=new ResizeObserver(l=>{const u=l[0],d=u.contentRect.width,f=u.contentRect.height;d===0&&f===0||s(d,f)});return a.observe(i),l5(t,s),a}function Xp(t,e,n){n&&n.disconnect(),e==="resize"&&c5(t)}function d5(t,e,n){const r=t.canvas,i=mT(s=>{t.ctx!==null&&n(s5(s,t))},t);return r5(r,e,i),i}class f5 extends IT{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(n5(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[ld])return!1;const r=n[ld].initial;["height","width"].forEach(s=>{const a=r[s];wt(a)?n.removeAttribute(s):n.setAttribute(s,a)});const i=r.style||{};return Object.keys(i).forEach(s=>{n.style[s]=i[s]}),n.width=n.width,delete n[ld],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const i=e.$proxies||(e.$proxies={}),a={attach:a5,detach:o5,resize:u5}[n]||d5;i[n]=a(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),i=r[n];if(!i)return;({attach:Xp,detach:Xp,resize:Xp}[n]||i5)(e,n,i),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,i){return uV(e,n,r,i)}isAttached(e){const n=e&&pv(e);return!!(n&&n.isConnected)}}function h5(t){return!hv()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?e5:f5}class Rs{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return Gl(this.x)&&Gl(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}}function p5(t,e){const n=t.options.ticks,r=g5(t),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?v5(e):[],a=s.length,l=s[0],u=s[a-1],d=[];if(a>i)return y5(e,d,s,a/i),d;const f=m5(s,e,i);if(a>0){let p,m;const v=a>1?Math.round((u-l)/(a-1)):null;for(Vu(e,d,f,wt(v)?0:l-v,l),p=0,m=a-1;p<m;p++)Vu(e,d,f,s[p],s[p+1]);return Vu(e,d,f,u,wt(v)?e.length:u+v),d}return Vu(e,d,f),d}function g5(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}function m5(t,e,n){const r=b5(t),i=e.length/n;if(!r)return Math.max(i,1);const s=oW(r);for(let a=0,l=s.length-1;a<l;a++){const u=s[a];if(u>i)return u}return Math.max(i,1)}function v5(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function y5(t,e,n,r){let i=0,s=n[0],a;for(r=Math.ceil(r),a=0;a<t.length;a++)a===s&&(e.push(t[a]),i++,s=n[i*r])}function Vu(t,e,n,r,i){const s=$e(r,0),a=Math.min($e(i,t.length),t.length);let l=0,u,d,f;for(n=Math.ceil(n),i&&(u=i-r,n=u/Math.floor(u/n)),f=s;f<0;)l++,f=Math.round(s+l*n);for(d=Math.max(s,0);d<a;d++)d===f&&(e.push(t[d]),l++,f=Math.round(s+l*n))}function b5(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const _5=t=>t==="left"?"right":t==="right"?"left":t,XS=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,JS=(t,e)=>Math.min(e||t,t);function ew(t,e){const n=[],r=t.length/e,i=t.length;let s=0;for(;s<i;s+=r)n.push(t[Math.floor(s)]);return n}function S5(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),s=t._startPixel,a=t._endPixel,l=1e-6;let u=t.getPixelForTick(i),d;if(!(n&&(r===1?d=Math.max(u-s,a-u):e===0?d=(t.getPixelForTick(1)-u)/2:d=(u-t.getPixelForTick(i-1))/2,u+=i<e?d:-d,u<s-l||u>a+l)))return u}function w5(t,e){ht(t,n=>{const r=n.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete n.data[r[s]];r.splice(0,i)}})}function gl(t){return t.drawTicks?t.tickLength:0}function tw(t,e){if(!t.display)return 0;const n=An(t.font,e),r=kr(t.padding);return(cn(t.text)?t.text.length:1)*n.lineHeight+r.height}function x5(t,e){return Sa(t,{scale:e,type:"scale"})}function E5(t,e,n){return Sa(t,{tick:n,index:e,type:"tick"})}function C5(t,e,n){let r=av(t);return(n&&e!=="right"||!n&&e==="right")&&(r=_5(r)),r}function T5(t,e,n,r){const{top:i,left:s,bottom:a,right:l,chart:u}=t,{chartArea:d,scales:f}=u;let p=0,m,v,b;const _=a-i,w=l-s;if(t.isHorizontal()){if(v=Dn(r,s,l),Ke(n)){const x=Object.keys(n)[0],C=n[x];b=f[x].getPixelForValue(C)+_-e}else n==="center"?b=(d.bottom+d.top)/2+_-e:b=XS(t,n,e);m=l-s}else{if(Ke(n)){const x=Object.keys(n)[0],C=n[x];v=f[x].getPixelForValue(C)-w+e}else n==="center"?v=(d.left+d.right)/2-w+e:v=XS(t,n,e);b=Dn(r,a,i),p=n==="left"?-un:un}return{titleX:v,titleY:b,maxWidth:m,rotation:p}}class To extends Rs{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:i}=this;return e=Xr(e,Number.POSITIVE_INFINITY),n=Xr(n,Number.NEGATIVE_INFINITY),r=Xr(r,Number.POSITIVE_INFINITY),i=Xr(i,Number.NEGATIVE_INFINITY),{min:Xr(e,r),max:Xr(n,i),minDefined:Rn(e),maxDefined:Rn(n)}}getMinMax(e){let{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),a;if(i&&s)return{min:n,max:r};const l=this.getMatchingVisibleMetas();for(let u=0,d=l.length;u<d;++u)a=l[u].controller.getMinMax(this,e),i||(n=Math.min(n,a.min)),s||(r=Math.max(r,a.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:Xr(n,Xr(r,n)),max:Xr(r,Xr(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ct(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:i,grace:s,ticks:a}=this.options,l=a.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=BW(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const u=l<this.ticks.length;this._convertTicksToLabels(u?ew(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=p5(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),u&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ct(this.options.afterUpdate,[this])}beforeSetDimensions(){Ct(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ct(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Ct(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ct(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=Ct(n.callback,[s.value,r,e],this)}afterTickToLabelConversion(){Ct(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ct(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=JS(this.ticks.length,e.ticks.maxTicksLimit),i=n.minRotation||0,s=n.maxRotation;let a=i,l,u,d;if(!this._isVisible()||!n.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const f=this._getLabelSizes(),p=f.widest.width,m=f.highest.height,v=Ln(this.chart.width-p,0,this.maxWidth);l=e.offset?this.maxWidth/r:v/(r-1),p+6>l&&(l=v/(r-(e.offset?.5:1)),u=this.maxHeight-gl(e.grid)-n.padding-tw(e.title,this.chart.options.font),d=Math.sqrt(p*p+m*m),a=dW(Math.min(Math.asin(Ln((f.highest.height+6)/l,-1,1)),Math.asin(Ln(u/d,-1,1))-Math.asin(Ln(m/d,-1,1)))),a=Math.max(i,Math.min(s,a))),this.labelRotation=a}afterCalculateLabelRotation(){Ct(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ct(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:i,grid:s}}=this,a=this._isVisible(),l=this.isHorizontal();if(a){const u=tw(i,n.options.font);if(l?(e.width=this.maxWidth,e.height=gl(s)+u):(e.height=this.maxHeight,e.width=gl(s)+u),r.display&&this.ticks.length){const{first:d,last:f,widest:p,highest:m}=this._getLabelSizes(),v=r.padding*2,b=Mi(this.labelRotation),_=Math.cos(b),w=Math.sin(b);if(l){const x=r.mirror?0:w*p.width+_*m.height;e.height=Math.min(this.maxHeight,e.height+x+v)}else{const x=r.mirror?0:_*p.width+w*m.height;e.width=Math.min(this.maxWidth,e.width+x+v)}this._calculatePadding(d,f,w,_)}}this._handleMargins(),l?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,i){const{ticks:{align:s,padding:a},position:l}=this.options,u=this.labelRotation!==0,d=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const f=this.getPixelForTick(0)-this.left,p=this.right-this.getPixelForTick(this.ticks.length-1);let m=0,v=0;u?d?(m=i*e.width,v=r*n.height):(m=r*e.height,v=i*n.width):s==="start"?v=n.width:s==="end"?m=e.width:s!=="inner"&&(m=e.width/2,v=n.width/2),this.paddingLeft=Math.max((m-f+a)*this.width/(this.width-f),0),this.paddingRight=Math.max((v-p+a)*this.width/(this.width-p),0)}else{let f=n.height/2,p=e.height/2;s==="start"?(f=0,p=e.height):s==="end"&&(f=n.height,p=0),this.paddingTop=f+a,this.paddingBottom=p+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ct(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)wt(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=ew(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:i,_longestTextCache:s}=this,a=[],l=[],u=Math.floor(n/JS(n,r));let d=0,f=0,p,m,v,b,_,w,x,C,k,R,A;for(p=0;p<n;p+=u){if(b=e[p].label,_=this._resolveTickFontOptions(p),i.font=w=_.string,x=s[w]=s[w]||{data:{},gc:[]},C=_.lineHeight,k=R=0,!wt(b)&&!cn(b))k=OS(i,x.data,x.gc,k,b),R=C;else if(cn(b))for(m=0,v=b.length;m<v;++m)A=b[m],!wt(A)&&!cn(A)&&(k=OS(i,x.data,x.gc,k,A),R+=C);a.push(k),l.push(R),d=Math.max(k,d),f=Math.max(R,f)}w5(s,n);const M=a.indexOf(d),P=l.indexOf(f),O=z=>({width:a[z]||0,height:l[z]||0});return{first:O(0),last:O(n-1),widest:O(M),highest:O(P),widths:a,heights:l}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return hW(this._alignToPixels?qs(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=E5(this.getContext(),e,r))}return this.$context||(this.$context=x5(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Mi(this.labelRotation),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),s=this._getLabelSizes(),a=e.autoSkipPadding||0,l=s?s.widest.width+a:0,u=s?s.highest.height+a:0;return this.isHorizontal()?u*r>l*i?l/r:u/i:u*i<l*r?u/r:l/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,i=this.options,{grid:s,position:a,border:l}=i,u=s.offset,d=this.isHorizontal(),p=this.ticks.length+(u?1:0),m=gl(s),v=[],b=l.setContext(this.getContext()),_=b.display?b.width:0,w=_/2,x=function(ie){return qs(r,ie,_)};let C,k,R,A,M,P,O,z,B,$,ee,re;if(a==="top")C=x(this.bottom),P=this.bottom-m,z=C-w,$=x(e.top)+w,re=e.bottom;else if(a==="bottom")C=x(this.top),$=e.top,re=x(e.bottom)-w,P=C+w,z=this.top+m;else if(a==="left")C=x(this.right),M=this.right-m,O=C-w,B=x(e.left)+w,ee=e.right;else if(a==="right")C=x(this.left),B=e.left,ee=x(e.right)-w,M=C+w,O=this.left+m;else if(n==="x"){if(a==="center")C=x((e.top+e.bottom)/2+.5);else if(Ke(a)){const ie=Object.keys(a)[0],oe=a[ie];C=x(this.chart.scales[ie].getPixelForValue(oe))}$=e.top,re=e.bottom,P=C+w,z=P+m}else if(n==="y"){if(a==="center")C=x((e.left+e.right)/2);else if(Ke(a)){const ie=Object.keys(a)[0],oe=a[ie];C=x(this.chart.scales[ie].getPixelForValue(oe))}M=C-w,O=M-m,B=e.left,ee=e.right}const he=$e(i.ticks.maxTicksLimit,p),pe=Math.max(1,Math.ceil(p/he));for(k=0;k<p;k+=pe){const ie=this.getContext(k),oe=s.setContext(ie),K=l.setContext(ie),q=oe.lineWidth,Y=oe.color,F=K.dash||[],G=K.dashOffset,ne=oe.tickWidth,le=oe.tickColor,ue=oe.tickBorderDash||[],ce=oe.tickBorderDashOffset;R=S5(this,k,u),R!==void 0&&(A=qs(r,R,q),d?M=O=B=ee=A:P=z=$=re=A,v.push({tx1:M,ty1:P,tx2:O,ty2:z,x1:B,y1:$,x2:ee,y2:re,width:q,color:Y,borderDash:F,borderDashOffset:G,tickWidth:ne,tickColor:le,tickBorderDash:ue,tickBorderDashOffset:ce}))}return this._ticksLength=p,this._borderValue=C,v}_computeLabelItems(e){const n=this.axis,r=this.options,{position:i,ticks:s}=r,a=this.isHorizontal(),l=this.ticks,{align:u,crossAlign:d,padding:f,mirror:p}=s,m=gl(r.grid),v=m+f,b=p?-f:v,_=-Mi(this.labelRotation),w=[];let x,C,k,R,A,M,P,O,z,B,$,ee,re="middle";if(i==="top")M=this.bottom-b,P=this._getXAxisLabelAlignment();else if(i==="bottom")M=this.top+b,P=this._getXAxisLabelAlignment();else if(i==="left"){const pe=this._getYAxisLabelAlignment(m);P=pe.textAlign,A=pe.x}else if(i==="right"){const pe=this._getYAxisLabelAlignment(m);P=pe.textAlign,A=pe.x}else if(n==="x"){if(i==="center")M=(e.top+e.bottom)/2+v;else if(Ke(i)){const pe=Object.keys(i)[0],ie=i[pe];M=this.chart.scales[pe].getPixelForValue(ie)+v}P=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")A=(e.left+e.right)/2-v;else if(Ke(i)){const pe=Object.keys(i)[0],ie=i[pe];A=this.chart.scales[pe].getPixelForValue(ie)}P=this._getYAxisLabelAlignment(m).textAlign}n==="y"&&(u==="start"?re="top":u==="end"&&(re="bottom"));const he=this._getLabelSizes();for(x=0,C=l.length;x<C;++x){k=l[x],R=k.label;const pe=s.setContext(this.getContext(x));O=this.getPixelForTick(x)+s.labelOffset,z=this._resolveTickFontOptions(x),B=z.lineHeight,$=cn(R)?R.length:1;const ie=$/2,oe=pe.color,K=pe.textStrokeColor,q=pe.textStrokeWidth;let Y=P;a?(A=O,P==="inner"&&(x===C-1?Y=this.options.reverse?"left":"right":x===0?Y=this.options.reverse?"right":"left":Y="center"),i==="top"?d==="near"||_!==0?ee=-$*B+B/2:d==="center"?ee=-he.highest.height/2-ie*B+B:ee=-he.highest.height+B/2:d==="near"||_!==0?ee=B/2:d==="center"?ee=he.highest.height/2-ie*B:ee=he.highest.height-$*B,p&&(ee*=-1),_!==0&&!pe.showLabelBackdrop&&(A+=B/2*Math.sin(_))):(M=O,ee=(1-$)*B/2);let F;if(pe.showLabelBackdrop){const G=kr(pe.backdropPadding),ne=he.heights[x],le=he.widths[x];let ue=ee-G.top,ce=0-G.left;switch(re){case"middle":ue-=ne/2;break;case"bottom":ue-=ne;break}switch(P){case"center":ce-=le/2;break;case"right":ce-=le;break;case"inner":x===C-1?ce-=le:x>0&&(ce-=le/2);break}F={left:ce,top:ue,width:le+G.width,height:ne+G.height,color:pe.backdropColor}}w.push({label:R,font:z,textOffset:ee,options:{rotation:_,color:oe,strokeColor:K,strokeWidth:q,textAlign:Y,textBaseline:re,translation:[A,M],backdrop:F}})}return w}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Mi(this.labelRotation))return e==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,a=this._getLabelSizes(),l=e+s,u=a.widest.width;let d,f;return n==="left"?i?(f=this.right+s,r==="near"?d="left":r==="center"?(d="center",f+=u/2):(d="right",f+=u)):(f=this.right-l,r==="near"?d="right":r==="center"?(d="center",f-=u/2):(d="left",f=this.left)):n==="right"?i?(f=this.left+s,r==="near"?d="right":r==="center"?(d="center",f-=u/2):(d="left",f-=u)):(f=this.left+l,r==="near"?d="left":r==="center"?(d="center",f+=u/2):(d="right",f=this.right)):d="right",{textAlign:d,x:f}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:i,width:s,height:a}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,i,s,a),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,a;const l=(u,d,f)=>{!f.width||!f.color||(r.save(),r.lineWidth=f.width,r.strokeStyle=f.color,r.setLineDash(f.borderDash||[]),r.lineDashOffset=f.borderDashOffset,r.beginPath(),r.moveTo(u.x,u.y),r.lineTo(d.x,d.y),r.stroke(),r.restore())};if(n.display)for(s=0,a=i.length;s<a;++s){const u=i[s];n.drawOnChartArea&&l({x:u.x1,y:u.y1},{x:u.x2,y:u.y2},u),n.drawTicks&&l({x:u.tx1,y:u.ty1},{x:u.tx2,y:u.ty2},{color:u.tickColor,width:u.tickWidth,borderDash:u.tickBorderDash,borderDashOffset:u.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),a=r.display?s.width:0;if(!a)return;const l=i.setContext(this.getContext(0)).lineWidth,u=this._borderValue;let d,f,p,m;this.isHorizontal()?(d=qs(e,this.left,a)-a/2,f=qs(e,this.right,l)+l/2,p=m=u):(p=qs(e,this.top,a)-a/2,m=qs(e,this.bottom,l)+l/2,d=f=u),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(d,p),n.lineTo(f,m),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&_f(r,i);const s=this.getLabelItems(e);for(const a of s){const l=a.options,u=a.font,d=a.label,f=a.textOffset;Kl(r,d,0,f,u,l)}i&&Sf(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:i}}=this;if(!r.display)return;const s=An(r.font),a=kr(r.padding),l=r.align;let u=s.lineHeight/2;n==="bottom"||n==="center"||Ke(n)?(u+=a.bottom,cn(r.text)&&(u+=s.lineHeight*(r.text.length-1))):u+=a.top;const{titleX:d,titleY:f,maxWidth:p,rotation:m}=T5(this,u,n,l);Kl(e,r.text,0,0,s,{color:r.color,maxWidth:p,rotation:m,textAlign:C5(l,n,i),textBaseline:"middle",translation:[d,f]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=$e(e.grid&&e.grid.z,-1),i=$e(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==To.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,a;for(s=0,a=n.length;s<a;++s){const l=n[s];l[r]===this.id&&(!e||l.type===e)&&i.push(l)}return i}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return An(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class $u{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;A5(n)&&(r=this.register(n));const i=this.items,s=e.id,a=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,D5(e,a,r),this.override&&Qt.override(e.id,e.overrides)),a}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,i=this.scope;r in n&&delete n[r],i&&r in Qt[i]&&(delete Qt[i][r],this.override&&delete ha[r])}}function D5(t,e,n){const r=$l(Object.create(null),[n?Qt.get(n):{},Qt.get(e),t.defaults]);Qt.set(e,r),t.defaultRoutes&&k5(e,t.defaultRoutes),t.descriptors&&Qt.describe(e,t.descriptors)}function k5(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),i=r.pop(),s=[t].concat(r).join("."),a=e[n].split("."),l=a.pop(),u=a.join(".");Qt.route(s,i,u,l)})}function A5(t){return"id"in t&&"defaults"in t}class R5{constructor(){this.controllers=new $u(gv,"datasets",!0),this.elements=new $u(Rs,"elements"),this.plugins=new $u(Object,"plugins"),this.scales=new $u(To,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):ht(i,a=>{const l=r||this._getRegistryForType(a);this._exec(e,l,a)})})}_exec(e,n,r){const i=iv(e);Ct(r["before"+i],[],r),n[e](r),Ct(r["after"+i],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const i=n.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var ti=new R5;class O5{constructor(){this._init=void 0}notify(e,n,r,i){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const s=i?this._descriptors(e).filter(i):this._descriptors(e),a=this._notify(s,e,n,r);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),a}_notify(e,n,r,i){i=i||{};for(const s of e){const a=s.plugin,l=a[r],u=[n,i,s.options];if(Ct(l,u,a)===!1&&i.cancelable)return!1}return!0}invalidate(){wt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,i=$e(r.options&&r.options.plugins,{}),s=M5(r);return i===!1&&!n?[]:I5(e,s,i,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,i=(s,a)=>s.filter(l=>!a.some(u=>l.plugin.id===u.plugin.id));this._notify(i(n,r),e,"stop"),this._notify(i(r,n),e,"start")}}function M5(t){const e={},n=[],r=Object.keys(ti.plugins.items);for(let s=0;s<r.length;s++)n.push(ti.getPlugin(r[s]));const i=t.plugins||[];for(let s=0;s<i.length;s++){const a=i[s];n.indexOf(a)===-1&&(n.push(a),e[a.id]=!0)}return{plugins:n,localIds:e}}function N5(t,e){return!e&&t===!1?null:t===!0?{}:t}function I5(t,{plugins:e,localIds:n},r,i){const s=[],a=t.getContext();for(const l of e){const u=l.id,d=N5(r[u],i);d!==null&&s.push({plugin:l,options:P5(t.config,{plugin:l,local:n[u]},d,a)})}return s}function P5(t,{plugin:e,local:n},r,i){const s=t.pluginScopeKeys(e),a=t.getOptionScopes(r,s);return n&&e.defaults&&a.push(e.defaults),t.createResolver(a,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Wg(t,e){const n=Qt.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function L5(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function F5(t,e){return t===e?"_index_":"_value_"}function nw(t){if(t==="x"||t==="y"||t==="r")return t}function j5(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Vg(t,...e){if(nw(t))return t;for(const n of e){const r=n.axis||j5(n.position)||t.length>1&&nw(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function rw(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function z5(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return rw(t,"x",n[0])||rw(t,"y",n[0])}return{}}function H5(t,e){const n=ha[t.type]||{scales:{}},r=e.scales||{},i=Wg(t.type,e),s=Object.create(null);return Object.keys(r).forEach(a=>{const l=r[a];if(!Ke(l))return console.error(`Invalid scale configuration for scale: ${a}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const u=Vg(a,l,z5(a,t),Qt.scales[l.type]),d=F5(u,i),f=n.scales||{};s[a]=Al(Object.create(null),[{axis:u},l,f[u],f[d]])}),t.data.datasets.forEach(a=>{const l=a.type||t.type,u=a.indexAxis||Wg(l,e),f=(ha[l]||{}).scales||{};Object.keys(f).forEach(p=>{const m=L5(p,u),v=a[m+"AxisID"]||m;s[v]=s[v]||Object.create(null),Al(s[v],[{axis:m},r[v],f[p]])})}),Object.keys(s).forEach(a=>{const l=s[a];Al(l,[Qt.scales[l.type],Qt.scale])}),s}function FT(t){const e=t.options||(t.options={});e.plugins=$e(e.plugins,{}),e.scales=H5(t,e)}function jT(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function U5(t){return t=t||{},t.data=jT(t.data),FT(t),t}const iw=new Map,zT=new Set;function qu(t,e){let n=iw.get(t);return n||(n=e(),iw.set(t,n),zT.add(n)),n}const ml=(t,e,n)=>{const r=ql(e,n);r!==void 0&&t.add(r)};class B5{constructor(e){this._config=U5(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=jT(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),FT(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return qu(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return qu(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return qu(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return qu(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let i=r.get(e);return(!i||n)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,n,r){const{options:i,type:s}=this,a=this._cachedScopes(e,r),l=a.get(n);if(l)return l;const u=new Set;n.forEach(f=>{e&&(u.add(e),f.forEach(p=>ml(u,e,p))),f.forEach(p=>ml(u,i,p)),f.forEach(p=>ml(u,ha[s]||{},p)),f.forEach(p=>ml(u,Qt,p)),f.forEach(p=>ml(u,Hg,p))});const d=Array.from(u);return d.length===0&&d.push(Object.create(null)),zT.has(n)&&a.set(n,d),d}chartOptionScopes(){const{options:e,type:n}=this;return[e,ha[n]||{},Qt.datasets[n]||{},{type:n},Qt,Hg]}resolveNamedOptions(e,n,r,i=[""]){const s={$shared:!0},{resolver:a,subPrefixes:l}=sw(this._resolverCache,e,i);let u=a;if(V5(a,n)){s.$shared=!1,r=Ts(r)?r():r;const d=this.createResolver(e,r,l);u=po(a,r,d)}for(const d of n)s[d]=u[d];return s}createResolver(e,n,r=[""],i){const{resolver:s}=sw(this._resolverCache,e,r);return Ke(n)?po(s,n,void 0,i):s}}function sw(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let s=r.get(i);return s||(s={resolver:uv(e,n),subPrefixes:n.filter(l=>!l.toLowerCase().includes("hover"))},r.set(i,s)),s}const W5=t=>Ke(t)&&Object.getOwnPropertyNames(t).some(e=>Ts(t[e]));function V5(t,e){const{isScriptable:n,isIndexable:r}=bT(t);for(const i of e){const s=n(i),a=r(i),l=(a||s)&&t[i];if(s&&(Ts(l)||W5(l))||a&&cn(l))return!0}return!1}var $5="4.5.1";const q5=["top","bottom","left","right","chartArea"];function aw(t,e){return t==="top"||t==="bottom"||q5.indexOf(t)===-1&&e==="x"}function ow(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function lw(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Ct(n&&n.onComplete,[t],e)}function G5(t){const e=t.chart,n=e.options.animation;Ct(n&&n.onProgress,[t],e)}function HT(t){return hv()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const cd={},cw=t=>{const e=HT(t);return Object.values(cd).filter(n=>n.canvas===e).pop()};function Y5(t,e,n){const r=Object.keys(t);for(const i of r){const s=+i;if(s>=e){const a=t[i];delete t[i],(n>0||s>e)&&(t[s+n]=a)}}}function Q5(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}let Ef=class{static defaults=Qt;static instances=cd;static overrides=ha;static registry=ti;static version=$5;static getChart=cw;static register(...e){ti.add(...e),uw()}static unregister(...e){ti.remove(...e),uw()}constructor(e,n){const r=this.config=new B5(n),i=HT(e),s=cw(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const a=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||h5(i)),this.platform.updateConfig(r);const l=this.platform.acquireContext(i,a.aspectRatio),u=l&&l.canvas,d=u&&u.height,f=u&&u.width;if(this.id=XB(),this.ctx=l,this.canvas=u,this.width=f,this.height=d,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new O5,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=yW(p=>this.update(p),a.resizeDelay||0),this._dataChanges=[],cd[this.id]=this,!l||!u){console.error("Failed to create chart: can't acquire context from the given item");return}wi.listen(this,"complete",lw),wi.listen(this,"progress",G5),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:i,_aspectRatio:s}=this;return wt(e)?n&&s?s:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return ti}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():PS(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return MS(this.canvas,this.ctx),this}stop(){return wi.stop(this),this}resize(e,n){wi.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(i,e,n,s),l=r.devicePixelRatio||this.platform.getDevicePixelRatio(),u=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,PS(this,l,!0)&&(this.notifyPlugins("resize",{size:a}),Ct(r.onResize,[this,a],this),this.attached&&this._doResize(u)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};ht(n,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,i=Object.keys(r).reduce((a,l)=>(a[l]=!1,a),{});let s=[];n&&(s=s.concat(Object.keys(n).map(a=>{const l=n[a],u=Vg(a,l),d=u==="r",f=u==="x";return{options:l,dposition:d?"chartArea":f?"bottom":"left",dtype:d?"radialLinear":f?"category":"linear"}}))),ht(s,a=>{const l=a.options,u=l.id,d=Vg(u,l),f=$e(l.type,a.dtype);(l.position===void 0||aw(l.position,d)!==aw(a.dposition))&&(l.position=a.dposition),i[u]=!0;let p=null;if(u in r&&r[u].type===f)p=r[u];else{const m=ti.getScale(f);p=new m({id:u,type:f,ctx:this.ctx,chart:this}),r[p.id]=p}p.init(l,e)}),ht(i,(a,l)=>{a||delete r[l]}),ht(r,a=>{Tr.configure(this,a,a.options),Tr.addBox(this,a)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((i,s)=>i.index-s.index),r>n){for(let i=n;i<r;++i)this._destroyDatasetMeta(i);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(ow("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,i)=>{n.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=n.length;r<i;r++){const s=n[r];let a=this.getDatasetMeta(r);const l=s.type||this.config.type;if(a.type&&a.type!==l&&(this._destroyDatasetMeta(r),a=this.getDatasetMeta(r)),a.type=l,a.indexAxis=s.indexAxis||Wg(l,this.options),a.order=s.order||0,a.index=r,a.label=""+s.label,a.visible=this.isDatasetVisible(r),a.controller)a.controller.updateIndex(r),a.controller.linkScales();else{const u=ti.getController(l),{datasetElementType:d,dataElementType:f}=Qt.datasets[l];Object.assign(u,{dataElementType:ti.getElement(f),datasetElementType:d&&ti.getElement(d)}),a.controller=new u(this,r),e.push(a.controller)}}return this._updateMetasets(),e}_resetElements(){ht(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let d=0,f=this.data.datasets.length;d<f;d++){const{controller:p}=this.getDatasetMeta(d),m=!i&&s.indexOf(p)===-1;p.buildOrUpdateElements(m),a=Math.max(+p.getMaxOverflow(),a)}a=this._minPadding=r.layout.autoPadding?a:0,this._updateLayout(a),i||ht(s,d=>{d.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(ow("z","_idx"));const{_active:l,_lastEvent:u}=this;u?this._eventHandler(u,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){ht(this.scales,e=>{Tr.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!wS(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of n){const a=r==="_removeElements"?-s:s;Y5(e,i,a)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=s=>new Set(e.filter(a=>a[0]===s).map((a,l)=>l+","+a.splice(1).join(","))),i=r(0);for(let s=1;s<n;s++)if(!wS(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Tr.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],ht(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,Ts(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(wi.has(this)?this.attached&&!wi.running(this)&&wi.start(this):(this.draw(),lw({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let i,s;for(i=0,s=n.length;i<s;++i){const a=n[i];(!e||a.visible)&&r.push(a)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r={meta:e,index:e.index,cancelable:!0},i=AT(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(i&&_f(n,i),e.controller.draw(),i&&Sf(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return Ql(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,i){const s=qV.modes[n];return typeof s=="function"?s(this,e,r,i):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let i=r.filter(s=>s&&s._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=Sa(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const i=r?"show":"hide",s=this.getDatasetMeta(e),a=s.controller._resolveAnimations(void 0,i);zd(n)?(s.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),a.update(s,{visible:r}),this.update(l=>l.datasetIndex===e?i:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),wi.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),MS(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete cd[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(s,a)=>{n.addEventListener(this,s,a),e[s]=a},i=(s,a,l)=>{s.offsetX=a,s.offsetY=l,this._eventHandler(s)};ht(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(u,d)=>{n.addEventListener(this,u,d),e[u]=d},i=(u,d)=>{e[u]&&(n.removeEventListener(this,u,d),delete e[u])},s=(u,d)=>{this.canvas&&this.resize(u,d)};let a;const l=()=>{i("attach",l),this.attached=!0,this.resize(),r("resize",s),r("detach",a)};a=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",l)},n.isAttached(this.canvas)?l():a()}unbindEvents(){ht(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},ht(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const i=r?"set":"remove";let s,a,l,u;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),l=0,u=e.length;l<u;++l){a=e[l];const d=a&&this.getDatasetMeta(a.datasetIndex).controller;d&&d[i+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:s,index:a})=>{const l=this.getDatasetMeta(s);if(!l)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:l.data[a],index:a}});!Fd(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const i=this.options.hover,s=(u,d)=>u.filter(f=>!d.some(p=>f.datasetIndex===p.datasetIndex&&f.index===p.index)),a=s(n,e),l=r?e:s(e,n);a.length&&this.updateHoverStyle(a,i.mode,!1),l.length&&i.mode&&this.updateHoverStyle(l,i.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},i=a=>(a.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:i=[],options:s}=this,a=n,l=this._getActiveElements(e,i,r,a),u=iW(e),d=Q5(e,this._lastEvent,r,u);r&&(this._lastEvent=null,Ct(s.onHover,[e,l,this],this),u&&Ct(s.onClick,[e,l,this],this));const f=!Fd(l,i);return(f||n)&&(this._active=l,this._updateHoverStyles(l,i,n)),this._lastEvent=d,f}_getActiveElements(e,n,r,i){if(e.type==="mouseout")return[];if(!r)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}};function uw(){return ht(Ef.instances,t=>t._plugins.invalidate())}function K5(t,e,n){const{startAngle:r,x:i,y:s,outerRadius:a,innerRadius:l,options:u}=e,{borderWidth:d,borderJoinStyle:f}=u,p=Math.min(d/a,lr(r-n));if(t.beginPath(),t.arc(i,s,a-d/2,r+p/2,n-p/2),l>0){const m=Math.min(d/l,lr(r-n));t.arc(i,s,l+d/2,n-m/2,r+m/2,!0)}else{const m=Math.min(d/2,a*lr(r-n));if(f==="round")t.arc(i,s,m,n-pt/2,r+pt/2,!0);else if(f==="bevel"){const v=2*m*m,b=-v*Math.cos(n+pt/2)+i,_=-v*Math.sin(n+pt/2)+s,w=v*Math.cos(r+pt/2)+i,x=v*Math.sin(r+pt/2)+s;t.lineTo(b,_),t.lineTo(w,x)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function Z5(t,e,n){const{startAngle:r,pixelMargin:i,x:s,y:a,outerRadius:l,innerRadius:u}=e;let d=i/l;t.beginPath(),t.arc(s,a,l,r-d,n+d),u>i?(d=i/u,t.arc(s,a,u,n+d,r-d,!0)):t.arc(s,a,i,n+un,r-un),t.closePath(),t.clip()}function X5(t){return cv(t,["outerStart","outerEnd","innerStart","innerEnd"])}function J5(t,e,n,r){const i=X5(t.options.borderRadius),s=(n-e)/2,a=Math.min(s,r*e/2),l=u=>{const d=(n-Math.min(s,u))*r/2;return Ln(u,0,Math.min(s,d))};return{outerStart:l(i.outerStart),outerEnd:l(i.outerEnd),innerStart:Ln(i.innerStart,0,a),innerEnd:Ln(i.innerEnd,0,a)}}function Qa(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function Wd(t,e,n,r,i,s){const{x:a,y:l,startAngle:u,pixelMargin:d,innerRadius:f}=e,p=Math.max(e.outerRadius+r+n-d,0),m=f>0?f+r+n+d:0;let v=0;const b=i-u;if(r){const pe=f>0?f-r:0,ie=p>0?p-r:0,oe=(pe+ie)/2,K=oe!==0?b*oe/(oe+r):b;v=(b-K)/2}const _=Math.max(.001,b*p-n/pt)/p,w=(b-_)/2,x=u+w+v,C=i-w-v,{outerStart:k,outerEnd:R,innerStart:A,innerEnd:M}=J5(e,m,p,C-x),P=p-k,O=p-R,z=x+k/P,B=C-R/O,$=m+A,ee=m+M,re=x+A/$,he=C-M/ee;if(t.beginPath(),s){const pe=(z+B)/2;if(t.arc(a,l,p,z,pe),t.arc(a,l,p,pe,B),R>0){const q=Qa(O,B,a,l);t.arc(q.x,q.y,R,B,C+un)}const ie=Qa(ee,C,a,l);if(t.lineTo(ie.x,ie.y),M>0){const q=Qa(ee,he,a,l);t.arc(q.x,q.y,M,C+un,he+Math.PI)}const oe=(C-M/m+(x+A/m))/2;if(t.arc(a,l,m,C-M/m,oe,!0),t.arc(a,l,m,oe,x+A/m,!0),A>0){const q=Qa($,re,a,l);t.arc(q.x,q.y,A,re+Math.PI,x-un)}const K=Qa(P,x,a,l);if(t.lineTo(K.x,K.y),k>0){const q=Qa(P,z,a,l);t.arc(q.x,q.y,k,x-un,z)}}else{t.moveTo(a,l);const pe=Math.cos(z)*p+a,ie=Math.sin(z)*p+l;t.lineTo(pe,ie);const oe=Math.cos(B)*p+a,K=Math.sin(B)*p+l;t.lineTo(oe,K)}t.closePath()}function e3(t,e,n,r,i){const{fullCircles:s,startAngle:a,circumference:l}=e;let u=e.endAngle;if(s){Wd(t,e,n,r,u,i);for(let d=0;d<s;++d)t.fill();isNaN(l)||(u=a+(l%Ft||Ft))}return Wd(t,e,n,r,u,i),t.fill(),u}function t3(t,e,n,r,i){const{fullCircles:s,startAngle:a,circumference:l,options:u}=e,{borderWidth:d,borderJoinStyle:f,borderDash:p,borderDashOffset:m,borderRadius:v}=u,b=u.borderAlign==="inner";if(!d)return;t.setLineDash(p||[]),t.lineDashOffset=m,b?(t.lineWidth=d*2,t.lineJoin=f||"round"):(t.lineWidth=d,t.lineJoin=f||"bevel");let _=e.endAngle;if(s){Wd(t,e,n,r,_,i);for(let w=0;w<s;++w)t.stroke();isNaN(l)||(_=a+(l%Ft||Ft))}b&&Z5(t,e,_),u.selfJoin&&_-a>=pt&&v===0&&f!=="miter"&&K5(t,e,_),s||(Wd(t,e,n,r,_,i),t.stroke())}class n3 extends Rs{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,n,r){const i=this.getProps(["x","y"],r),{angle:s,distance:a}=hT(i,{x:e,y:n}),{startAngle:l,endAngle:u,innerRadius:d,outerRadius:f,circumference:p}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),m=(this.options.spacing+this.options.borderWidth)/2,v=$e(p,u-l),b=Yl(s,l,u)&&l!==u,_=v>=Ft||b,w=na(a,d+m,f+m);return _&&w}getCenterPoint(e){const{x:n,y:r,startAngle:i,endAngle:s,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:u,spacing:d}=this.options,f=(i+s)/2,p=(a+l+d+u)/2;return{x:n+Math.cos(f)*p,y:r+Math.sin(f)*p}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:n,circumference:r}=this,i=(n.offset||0)/4,s=(n.spacing||0)/2,a=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=r>Ft?Math.floor(r/Ft):0,r===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const l=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(l)*i,Math.sin(l)*i);const u=1-Math.sin(Math.min(pt,r||0)),d=i*u;e.fillStyle=n.backgroundColor,e.strokeStyle=n.borderColor,e3(e,this,d,s,a),t3(e,this,d,s,a),e.restore()}}function UT(t,e,n=e){t.lineCap=$e(n.borderCapStyle,e.borderCapStyle),t.setLineDash($e(n.borderDash,e.borderDash)),t.lineDashOffset=$e(n.borderDashOffset,e.borderDashOffset),t.lineJoin=$e(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=$e(n.borderWidth,e.borderWidth),t.strokeStyle=$e(n.borderColor,e.borderColor)}function r3(t,e,n){t.lineTo(n.x,n.y)}function i3(t){return t.stepped?MW:t.tension||t.cubicInterpolationMode==="monotone"?NW:r3}function BT(t,e,n={}){const r=t.length,{start:i=0,end:s=r-1}=n,{start:a,end:l}=e,u=Math.max(i,a),d=Math.min(s,l),f=i<a&&s<a||i>l&&s>l;return{count:r,start:u,loop:e.loop,ilen:d<u&&!f?r+d-u:d-u}}function s3(t,e,n,r){const{points:i,options:s}=e,{count:a,start:l,loop:u,ilen:d}=BT(i,n,r),f=i3(s);let{move:p=!0,reverse:m}=r||{},v,b,_;for(v=0;v<=d;++v)b=i[(l+(m?d-v:v))%a],!b.skip&&(p?(t.moveTo(b.x,b.y),p=!1):f(t,_,b,m,s.stepped),_=b);return u&&(b=i[(l+(m?d:0))%a],f(t,_,b,m,s.stepped)),!!u}function a3(t,e,n,r){const i=e.points,{count:s,start:a,ilen:l}=BT(i,n,r),{move:u=!0,reverse:d}=r||{};let f=0,p=0,m,v,b,_,w,x;const C=R=>(a+(d?l-R:R))%s,k=()=>{_!==w&&(t.lineTo(f,w),t.lineTo(f,_),t.lineTo(f,x))};for(u&&(v=i[C(0)],t.moveTo(v.x,v.y)),m=0;m<=l;++m){if(v=i[C(m)],v.skip)continue;const R=v.x,A=v.y,M=R|0;M===b?(A<_?_=A:A>w&&(w=A),f=(p*f+R)/++p):(k(),t.lineTo(R,A),b=M,p=0,_=w=A),x=A}k()}function $g(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?a3:s3}function o3(t){return t.stepped?fV:t.tension||t.cubicInterpolationMode==="monotone"?hV:Xs}function l3(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),UT(t,e.options),t.stroke(i)}function c3(t,e,n,r){const{segments:i,options:s}=e,a=$g(e);for(const l of i)UT(t,s,l.style),t.beginPath(),a(t,e,l,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const u3=typeof Path2D=="function";function d3(t,e,n,r){u3&&!e.options.segment?l3(t,e,n,r):c3(t,e,n,r)}class Cf extends Rs{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;iV(this._points,r,e,i,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=bV(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,i=e[n],s=this.points,a=kT(this,{property:n,start:i,end:i});if(!a.length)return;const l=[],u=o3(r);let d,f;for(d=0,f=a.length;d<f;++d){const{start:p,end:m}=a[d],v=s[p],b=s[m];if(v===b){l.push(v);continue}const _=Math.abs((i-v[n])/(b[n]-v[n])),w=u(v,b,_,r.stepped);w[n]=e[n],l.push(w)}return l.length===1?l[0]:l}pathSegment(e,n,r){return $g(this)(e,this,n,r)}path(e,n,r){const i=this.segments,s=$g(this);let a=this._loop;n=n||0,r=r||this.points.length-n;for(const l of i)a&=s(e,this,l,{start:n,end:n+r-1});return!!a}draw(e,n,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),d3(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function dw(t,e,n,r){const i=t.options,{[n]:s}=t.getProps([n],r);return Math.abs(e-s)<i.radius+i.hitRadius}class f3 extends Rs{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,n,r){const i=this.options,{x:s,y:a}=this.getProps(["x","y"],r);return Math.pow(e-s,2)+Math.pow(n-a,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(e,n){return dw(this,e,"x",n)}inYRange(e,n){return dw(this,e,"y",n)}getCenterPoint(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}size(e){e=e||this.options||{};let n=e.radius||0;n=Math.max(n,n&&e.hoverRadius||0);const r=n&&e.borderWidth||0;return(n+r)*2}draw(e,n){const r=this.options;this.skip||r.radius<.1||!Ql(this,n,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,Ug(e,r,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function h3(t,e,n){const r=t.segments,i=t.points,s=e.points,a=[];for(const l of r){let{start:u,end:d}=l;d=Tf(u,d,i);const f=qg(n,i[u],i[d],l.loop);if(!e.segments){a.push({source:l,target:f,start:i[u],end:i[d]});continue}const p=kT(e,f);for(const m of p){const v=qg(n,s[m.start],s[m.end],m.loop),b=DT(l,i,v);for(const _ of b)a.push({source:_,target:m,start:{[n]:fw(f,v,"start",Math.max)},end:{[n]:fw(f,v,"end",Math.min)}})}}return a}function qg(t,e,n,r){if(r)return;let i=e[t],s=n[t];return t==="angle"&&(i=lr(i),s=lr(s)),{property:t,start:i,end:s}}function p3(t,e){const{x:n=null,y:r=null}=t||{},i=e.points,s=[];return e.segments.forEach(({start:a,end:l})=>{l=Tf(a,l,i);const u=i[a],d=i[l];r!==null?(s.push({x:u.x,y:r}),s.push({x:d.x,y:r})):n!==null&&(s.push({x:n,y:u.y}),s.push({x:n,y:d.y}))}),s}function Tf(t,e,n){for(;e>t;e--){const r=n[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function fw(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function WT(t,e){let n=[],r=!1;return cn(t)?(r=!0,n=t):n=p3(t,e),n.length?new Cf({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function hw(t){return t&&t.fill!==!1}function g3(t,e,n){let i=t[e].fill;const s=[e];let a;if(!n)return i;for(;i!==!1&&s.indexOf(i)===-1;){if(!Rn(i))return i;if(a=t[i],!a)return!1;if(a.visible)return i;s.push(i),i=a.fill}return!1}function m3(t,e,n){const r=_3(t);if(Ke(r))return isNaN(r.value)?!1:r;let i=parseFloat(r);return Rn(i)&&Math.floor(i)===i?v3(r[0],e,i,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function v3(t,e,n,r){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=r?!1:n}function y3(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:Ke(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function b3(t,e,n){let r;return t==="start"?r=n:t==="end"?r=e.options.reverse?e.min:e.max:Ke(t)?r=t.value:r=e.getBaseValue(),r}function _3(t){const e=t.options,n=e.fill;let r=$e(n&&n.target,n);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function S3(t){const{scale:e,index:n,line:r}=t,i=[],s=r.segments,a=r.points,l=w3(e,n);l.push(WT({x:null,y:e.bottom},r));for(let u=0;u<s.length;u++){const d=s[u];for(let f=d.start;f<=d.end;f++)x3(i,a[f],l)}return new Cf({points:i,options:{}})}function w3(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const s=r[i];if(s.index===e)break;s.hidden||n.unshift(s.dataset)}return n}function x3(t,e,n){const r=[];for(let i=0;i<n.length;i++){const s=n[i],{first:a,last:l,point:u}=E3(s,e,"x");if(!(!u||a&&l)){if(a)r.unshift(u);else if(t.push(u),!l)break}}t.push(...r)}function E3(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const i=r[n],s=t.segments,a=t.points;let l=!1,u=!1;for(let d=0;d<s.length;d++){const f=s[d],p=a[f.start][n],m=a[f.end][n];if(na(i,p,m)){l=i===p,u=i===m;break}}return{first:l,last:u,point:r}}class VT{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,r){const{x:i,y:s,radius:a}=this;return n=n||{start:0,end:Ft},e.arc(i,s,a,n.end,n.start,!0),!r.bounds}interpolate(e){const{x:n,y:r,radius:i}=this,s=e.angle;return{x:n+Math.cos(s)*i,y:r+Math.sin(s)*i,angle:s}}}function C3(t){const{chart:e,fill:n,line:r}=t;if(Rn(n))return T3(e,n);if(n==="stack")return S3(t);if(n==="shape")return!0;const i=D3(t);return i instanceof VT?i:WT(i,r)}function T3(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function D3(t){return(t.scale||{}).getPointPositionForValue?A3(t):k3(t)}function k3(t){const{scale:e={},fill:n}=t,r=y3(n,e);if(Rn(r)){const i=e.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}function A3(t){const{scale:e,fill:n}=t,r=e.options,i=e.getLabels().length,s=r.reverse?e.max:e.min,a=b3(n,e,s),l=[];if(r.grid.circular){const u=e.getPointPositionForValue(0,s);return new VT({x:u.x,y:u.y,radius:e.getDistanceFromCenterForValue(a)})}for(let u=0;u<i;++u)l.push(e.getPointPositionForValue(u,a));return l}function Jp(t,e,n){const r=C3(e),{chart:i,index:s,line:a,scale:l,axis:u}=e,d=a.options,f=d.fill,p=d.backgroundColor,{above:m=p,below:v=p}=f||{},b=i.getDatasetMeta(s),_=AT(i,b);r&&a.points.length&&(_f(t,n),R3(t,{line:a,target:r,above:m,below:v,area:n,scale:l,axis:u,clip:_}),Sf(t))}function R3(t,e){const{line:n,target:r,above:i,below:s,area:a,scale:l,clip:u}=e,d=n._loop?"angle":e.axis;t.save();let f=s;s!==i&&(d==="x"?(pw(t,r,a.top),eg(t,{line:n,target:r,color:i,scale:l,property:d,clip:u}),t.restore(),t.save(),pw(t,r,a.bottom)):d==="y"&&(gw(t,r,a.left),eg(t,{line:n,target:r,color:s,scale:l,property:d,clip:u}),t.restore(),t.save(),gw(t,r,a.right),f=i)),eg(t,{line:n,target:r,color:f,scale:l,property:d,clip:u}),t.restore()}function pw(t,e,n){const{segments:r,points:i}=e;let s=!0,a=!1;t.beginPath();for(const l of r){const{start:u,end:d}=l,f=i[u],p=i[Tf(u,d,i)];s?(t.moveTo(f.x,f.y),s=!1):(t.lineTo(f.x,n),t.lineTo(f.x,f.y)),a=!!e.pathSegment(t,l,{move:a}),a?t.closePath():t.lineTo(p.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function gw(t,e,n){const{segments:r,points:i}=e;let s=!0,a=!1;t.beginPath();for(const l of r){const{start:u,end:d}=l,f=i[u],p=i[Tf(u,d,i)];s?(t.moveTo(f.x,f.y),s=!1):(t.lineTo(n,f.y),t.lineTo(f.x,f.y)),a=!!e.pathSegment(t,l,{move:a}),a?t.closePath():t.lineTo(n,p.y)}t.lineTo(n,e.first().y),t.closePath(),t.clip()}function eg(t,e){const{line:n,target:r,property:i,color:s,scale:a,clip:l}=e,u=h3(n,r,i);for(const{source:d,target:f,start:p,end:m}of u){const{style:{backgroundColor:v=s}={}}=d,b=r!==!0;t.save(),t.fillStyle=v,O3(t,a,l,b&&qg(i,p,m)),t.beginPath();const _=!!n.pathSegment(t,d);let w;if(b){_?t.closePath():mw(t,r,m,i);const x=!!r.pathSegment(t,f,{move:_,reverse:!0});w=_&&x,w||mw(t,r,p,i)}t.closePath(),t.fill(w?"evenodd":"nonzero"),t.restore()}}function O3(t,e,n,r){const i=e.chart.chartArea,{property:s,start:a,end:l}=r||{};if(s==="x"||s==="y"){let u,d,f,p;s==="x"?(u=a,d=i.top,f=l,p=i.bottom):(u=i.left,d=a,f=i.right,p=l),t.beginPath(),n&&(u=Math.max(u,n.left),f=Math.min(f,n.right),d=Math.max(d,n.top),p=Math.min(p,n.bottom)),t.rect(u,d,f-u,p-d),t.clip()}}function mw(t,e,n,r){const i=e.interpolate(n,r);i&&t.lineTo(i.x,i.y)}var M3={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,i=[];let s,a,l,u;for(a=0;a<r;++a)s=t.getDatasetMeta(a),l=s.dataset,u=null,l&&l.options&&l instanceof Cf&&(u={visible:t.isDatasetVisible(a),index:a,fill:m3(l,a,r),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:l}),s.$filler=u,i.push(u);for(a=0;a<r;++a)u=i[a],!(!u||u.fill===!1)&&(u.fill=g3(i,a,n.propagate))},beforeDraw(t,e,n){const r=n.drawTime==="beforeDraw",i=t.getSortedVisibleDatasetMetas(),s=t.chartArea;for(let a=i.length-1;a>=0;--a){const l=i[a].$filler;l&&(l.line.updateControlPoints(s,l.axis),r&&l.fill&&Jp(t.ctx,l,s))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=t.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const s=r[i].$filler;hw(s)&&Jp(t.ctx,s,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;!hw(r)||n.drawTime!=="beforeDatasetDraw"||Jp(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const vw=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},N3=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class yw extends Rs{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Ct(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=An(r.font),s=i.size,a=this._computeTitleHeight(),{boxWidth:l,itemHeight:u}=vw(r,s);let d,f;n.font=i.string,this.isHorizontal()?(d=this.maxWidth,f=this._fitRows(a,s,l,u)+10):(f=this.maxHeight,d=this._fitCols(a,i,l,u)+10),this.width=Math.min(d,e.maxWidth||this.maxWidth),this.height=Math.min(f,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,i){const{ctx:s,maxWidth:a,options:{labels:{padding:l}}}=this,u=this.legendHitBoxes=[],d=this.lineWidths=[0],f=i+l;let p=e;s.textAlign="left",s.textBaseline="middle";let m=-1,v=-f;return this.legendItems.forEach((b,_)=>{const w=r+n/2+s.measureText(b.text).width;(_===0||d[d.length-1]+w+2*l>a)&&(p+=f,d[d.length-(_>0?0:1)]=0,v+=f,m++),u[_]={left:0,top:v,row:m,width:w,height:i},d[d.length-1]+=w+l}),p}_fitCols(e,n,r,i){const{ctx:s,maxHeight:a,options:{labels:{padding:l}}}=this,u=this.legendHitBoxes=[],d=this.columnSizes=[],f=a-e;let p=l,m=0,v=0,b=0,_=0;return this.legendItems.forEach((w,x)=>{const{itemWidth:C,itemHeight:k}=I3(r,n,s,w,i);x>0&&v+k+2*l>f&&(p+=m+l,d.push({width:m,height:v}),b+=m+l,_++,m=v=0),u[x]={left:b,top:v,col:_,width:C,height:k},m=Math.max(m,C),v+=k+l}),p+=m,d.push({width:m,height:v}),p}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:i},rtl:s}}=this,a=oo(s,this.left,this.width);if(this.isHorizontal()){let l=0,u=Dn(r,this.left+i,this.right-this.lineWidths[l]);for(const d of n)l!==d.row&&(l=d.row,u=Dn(r,this.left+i,this.right-this.lineWidths[l])),d.top+=this.top+e+i,d.left=a.leftForLtr(a.x(u),d.width),u+=d.width+i}else{let l=0,u=Dn(r,this.top+e+i,this.bottom-this.columnSizes[l].height);for(const d of n)d.col!==l&&(l=d.col,u=Dn(r,this.top+e+i,this.bottom-this.columnSizes[l].height)),d.top=u,d.left+=this.left+i,d.left=a.leftForLtr(a.x(d.left),d.width),u+=d.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;_f(e,this),this._draw(),Sf(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:i}=this,{align:s,labels:a}=e,l=Qt.color,u=oo(e.rtl,this.left,this.width),d=An(a.font),{padding:f}=a,p=d.size,m=p/2;let v;this.drawTitle(),i.textAlign=u.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=d.string;const{boxWidth:b,boxHeight:_,itemHeight:w}=vw(a,p),x=function(M,P,O){if(isNaN(b)||b<=0||isNaN(_)||_<0)return;i.save();const z=$e(O.lineWidth,1);if(i.fillStyle=$e(O.fillStyle,l),i.lineCap=$e(O.lineCap,"butt"),i.lineDashOffset=$e(O.lineDashOffset,0),i.lineJoin=$e(O.lineJoin,"miter"),i.lineWidth=z,i.strokeStyle=$e(O.strokeStyle,l),i.setLineDash($e(O.lineDash,[])),a.usePointStyle){const B={radius:_*Math.SQRT2/2,pointStyle:O.pointStyle,rotation:O.rotation,borderWidth:z},$=u.xPlus(M,b/2),ee=P+m;yT(i,B,$,ee,a.pointStyleWidth&&b)}else{const B=P+Math.max((p-_)/2,0),$=u.leftForLtr(M,b),ee=Nl(O.borderRadius);i.beginPath(),Object.values(ee).some(re=>re!==0)?Bg(i,{x:$,y:B,w:b,h:_,radius:ee}):i.rect($,B,b,_),i.fill(),z!==0&&i.stroke()}i.restore()},C=function(M,P,O){Kl(i,O.text,M,P+w/2,d,{strikethrough:O.hidden,textAlign:u.textAlign(O.textAlign)})},k=this.isHorizontal(),R=this._computeTitleHeight();k?v={x:Dn(s,this.left+f,this.right-r[0]),y:this.top+f+R,line:0}:v={x:this.left+f,y:Dn(s,this.top+R+f,this.bottom-n[0].height),line:0},ET(this.ctx,e.textDirection);const A=w+f;this.legendItems.forEach((M,P)=>{i.strokeStyle=M.fontColor,i.fillStyle=M.fontColor;const O=i.measureText(M.text).width,z=u.textAlign(M.textAlign||(M.textAlign=a.textAlign)),B=b+m+O;let $=v.x,ee=v.y;u.setWidth(this.width),k?P>0&&$+B+f>this.right&&(ee=v.y+=A,v.line++,$=v.x=Dn(s,this.left+f,this.right-r[v.line])):P>0&&ee+A>this.bottom&&($=v.x=$+n[v.line].width+f,v.line++,ee=v.y=Dn(s,this.top+R+f,this.bottom-n[v.line].height));const re=u.x($);if(x(re,ee,M),$=bW(z,$+b+m,k?$+B:this.right,e.rtl),C(u.x($),ee,M),k)v.x+=B+f;else if(typeof M.text!="string"){const he=d.lineHeight;v.y+=$T(M,he)+f}else v.y+=A}),CT(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=An(n.font),i=kr(n.padding);if(!n.display)return;const s=oo(e.rtl,this.left,this.width),a=this.ctx,l=n.position,u=r.size/2,d=i.top+u;let f,p=this.left,m=this.width;if(this.isHorizontal())m=Math.max(...this.lineWidths),f=this.top+d,p=Dn(e.align,p,this.right-m);else{const b=this.columnSizes.reduce((_,w)=>Math.max(_,w.height),0);f=d+Dn(e.align,this.top,this.bottom-b-e.labels.padding-this._computeTitleHeight())}const v=Dn(l,p,p+m);a.textAlign=s.textAlign(av(l)),a.textBaseline="middle",a.strokeStyle=n.color,a.fillStyle=n.color,a.font=r.string,Kl(a,n.text,v,f,r)}_computeTitleHeight(){const e=this.options.title,n=An(e.font),r=kr(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,i,s;if(na(e,this.left,this.right)&&na(n,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],na(e,i.left,i.left+i.width)&&na(n,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!F3(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,s=N3(i,r);i&&!s&&Ct(n.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&Ct(n.onHover,[e,r,this],this)}else r&&Ct(n.onClick,[e,r,this],this)}}function I3(t,e,n,r,i){const s=P3(r,t,e,n),a=L3(i,r,e.lineHeight);return{itemWidth:s,itemHeight:a}}function P3(t,e,n,r){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((s,a)=>s.length>a.length?s:a)),e+n.size/2+r.measureText(i).width}function L3(t,e,n){let r=t;return typeof e.text!="string"&&(r=$T(e,n)),r}function $T(t,e){const n=t.text?t.text.length:0;return e*n}function F3(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var j3={id:"legend",_element:yw,start(t,e,n){const r=t.legend=new yw({ctx:t.ctx,options:n,chart:t});Tr.configure(t,r,n),Tr.addBox(t,r)},stop(t){Tr.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;Tr.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:a,borderRadius:l}}=t.legend.options;return t._getSortedDatasetMetas().map(u=>{const d=u.controller.getStyle(n?0:void 0),f=kr(d.borderWidth);return{text:e[u.index].label,fillStyle:d.backgroundColor,fontColor:s,hidden:!u.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(f.width+f.height)/4,strokeStyle:d.borderColor,pointStyle:r||d.pointStyle,rotation:d.rotation,textAlign:i||d.textAlign,borderRadius:a&&(l||d.borderRadius),datasetIndex:u.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class qT extends Rs{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const i=cn(r.text)?r.text.length:1;this._padding=kr(r.padding);const s=i*An(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:i,right:s,options:a}=this,l=a.align;let u=0,d,f,p;return this.isHorizontal()?(f=Dn(l,r,s),p=n+e,d=s-r):(a.position==="left"?(f=r+e,p=Dn(l,i,n),u=pt*-.5):(f=s-e,p=Dn(l,n,i),u=pt*.5),d=i-n),{titleX:f,titleY:p,maxWidth:d,rotation:u}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=An(n.font),s=r.lineHeight/2+this._padding.top,{titleX:a,titleY:l,maxWidth:u,rotation:d}=this._drawArgs(s);Kl(e,n.text,0,0,r,{color:n.color,maxWidth:u,rotation:d,textAlign:av(n.align),textBaseline:"middle",translation:[a,l]})}}function z3(t,e){const n=new qT({ctx:t.ctx,options:e,chart:t});Tr.configure(t,n,e),Tr.addBox(t,n),t.titleBlock=n}var H3={id:"title",_element:qT,start(t,e,n){z3(t,n)},stop(t){const e=t.titleBlock;Tr.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;Tr.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const _l={average(t){if(!t.length)return!1;let e,n,r=new Set,i=0,s=0;for(e=0,n=t.length;e<n;++e){const l=t[e].element;if(l&&l.hasValue()){const u=l.tooltipPosition();r.add(u.x),i+=u.y,++s}}return s===0||r.size===0?!1:{x:[...r].reduce((l,u)=>l+u)/r.size,y:i/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,a,l;for(s=0,a=t.length;s<a;++s){const u=t[s].element;if(u&&u.hasValue()){const d=u.getCenterPoint(),f=zg(e,d);f<i&&(i=f,l=u)}}if(l){const u=l.tooltipPosition();n=u.x,r=u.y}return{x:n,y:r}}};function Jr(t,e){return e&&(cn(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function xi(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function U3(t,e){const{element:n,datasetIndex:r,index:i}=e,s=t.getDatasetMeta(r).controller,{label:a,value:l}=s.getLabelAndValue(i);return{chart:t,label:a,parsed:s.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:l,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function bw(t,e){const n=t.chart.ctx,{body:r,footer:i,title:s}=t,{boxWidth:a,boxHeight:l}=e,u=An(e.bodyFont),d=An(e.titleFont),f=An(e.footerFont),p=s.length,m=i.length,v=r.length,b=kr(e.padding);let _=b.height,w=0,x=r.reduce((R,A)=>R+A.before.length+A.lines.length+A.after.length,0);if(x+=t.beforeBody.length+t.afterBody.length,p&&(_+=p*d.lineHeight+(p-1)*e.titleSpacing+e.titleMarginBottom),x){const R=e.displayColors?Math.max(l,u.lineHeight):u.lineHeight;_+=v*R+(x-v)*u.lineHeight+(x-1)*e.bodySpacing}m&&(_+=e.footerMarginTop+m*f.lineHeight+(m-1)*e.footerSpacing);let C=0;const k=function(R){w=Math.max(w,n.measureText(R).width+C)};return n.save(),n.font=d.string,ht(t.title,k),n.font=u.string,ht(t.beforeBody.concat(t.afterBody),k),C=e.displayColors?a+2+e.boxPadding:0,ht(r,R=>{ht(R.before,k),ht(R.lines,k),ht(R.after,k)}),C=0,n.font=f.string,ht(t.footer,k),n.restore(),w+=b.width,{width:w,height:_}}function B3(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function W3(t,e,n,r){const{x:i,width:s}=r,a=n.caretSize+n.caretPadding;if(t==="left"&&i+s+a>e.width||t==="right"&&i-s-a<0)return!0}function V3(t,e,n,r){const{x:i,width:s}=n,{width:a,chartArea:{left:l,right:u}}=t;let d="center";return r==="center"?d=i<=(l+u)/2?"left":"right":i<=s/2?d="left":i>=a-s/2&&(d="right"),W3(d,t,e,n)&&(d="center"),d}function _w(t,e,n){const r=n.yAlign||e.yAlign||B3(t,n);return{xAlign:n.xAlign||e.xAlign||V3(t,e,n,r),yAlign:r}}function $3(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function q3(t,e,n){let{y:r,height:i}=t;return e==="top"?r+=n:e==="bottom"?r-=i+n:r-=i/2,r}function Sw(t,e,n,r){const{caretSize:i,caretPadding:s,cornerRadius:a}=t,{xAlign:l,yAlign:u}=n,d=i+s,{topLeft:f,topRight:p,bottomLeft:m,bottomRight:v}=Nl(a);let b=$3(e,l);const _=q3(e,u,d);return u==="center"?l==="left"?b+=d:l==="right"&&(b-=d):l==="left"?b-=Math.max(f,m)+i:l==="right"&&(b+=Math.max(p,v)+i),{x:Ln(b,0,r.width-e.width),y:Ln(_,0,r.height-e.height)}}function Gu(t,e,n){const r=kr(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function ww(t){return Jr([],xi(t))}function G3(t,e,n){return Sa(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function xw(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const GT={beforeTitle:Si,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:Si,beforeBody:Si,beforeLabel:Si,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return wt(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Si,afterBody:Si,beforeFooter:Si,footer:Si,afterFooter:Si};function Qn(t,e,n,r){const i=t[e].call(n,r);return typeof i>"u"?GT[e].call(n,r):i}class Ew extends Rs{static positioners=_l;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&n.options.animation&&r.animations,s=new RT(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=G3(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,i=Qn(r,"beforeTitle",this,e),s=Qn(r,"title",this,e),a=Qn(r,"afterTitle",this,e);let l=[];return l=Jr(l,xi(i)),l=Jr(l,xi(s)),l=Jr(l,xi(a)),l}getBeforeBody(e,n){return ww(Qn(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,i=[];return ht(e,s=>{const a={before:[],lines:[],after:[]},l=xw(r,s);Jr(a.before,xi(Qn(l,"beforeLabel",this,s))),Jr(a.lines,Qn(l,"label",this,s)),Jr(a.after,xi(Qn(l,"afterLabel",this,s))),i.push(a)}),i}getAfterBody(e,n){return ww(Qn(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,i=Qn(r,"beforeFooter",this,e),s=Qn(r,"footer",this,e),a=Qn(r,"afterFooter",this,e);let l=[];return l=Jr(l,xi(i)),l=Jr(l,xi(s)),l=Jr(l,xi(a)),l}_createItems(e){const n=this._active,r=this.chart.data,i=[],s=[],a=[];let l=[],u,d;for(u=0,d=n.length;u<d;++u)l.push(U3(this.chart,n[u]));return e.filter&&(l=l.filter((f,p,m)=>e.filter(f,p,m,r))),e.itemSort&&(l=l.sort((f,p)=>e.itemSort(f,p,r))),ht(l,f=>{const p=xw(e.callbacks,f);i.push(Qn(p,"labelColor",this,f)),s.push(Qn(p,"labelPointStyle",this,f)),a.push(Qn(p,"labelTextColor",this,f))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=a,this.dataPoints=l,l}update(e,n){const r=this.options.setContext(this.getContext()),i=this._active;let s,a=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const l=_l[r.position].call(this,i,this._eventPosition);a=this._createItems(r),this.title=this.getTitle(a,r),this.beforeBody=this.getBeforeBody(a,r),this.body=this.getBody(a,r),this.afterBody=this.getAfterBody(a,r),this.footer=this.getFooter(a,r);const u=this._size=bw(this,r),d=Object.assign({},l,u),f=_w(this.chart,r,d),p=Sw(r,d,f,this.chart);this.xAlign=f.xAlign,this.yAlign=f.yAlign,s={opacity:1,x:p.x,y:p.y,width:u.width,height:u.height,caretX:l.x,caretY:l.y}}this._tooltipItems=a,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,i){const s=this.getCaretPosition(e,r,i);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,r){const{xAlign:i,yAlign:s}=this,{caretSize:a,cornerRadius:l}=r,{topLeft:u,topRight:d,bottomLeft:f,bottomRight:p}=Nl(l),{x:m,y:v}=e,{width:b,height:_}=n;let w,x,C,k,R,A;return s==="center"?(R=v+_/2,i==="left"?(w=m,x=w-a,k=R+a,A=R-a):(w=m+b,x=w+a,k=R-a,A=R+a),C=w):(i==="left"?x=m+Math.max(u,f)+a:i==="right"?x=m+b-Math.max(d,p)-a:x=this.caretX,s==="top"?(k=v,R=k-a,w=x-a,C=x+a):(k=v+_,R=k+a,w=x+a,C=x-a),A=k),{x1:w,x2:x,x3:C,y1:k,y2:R,y3:A}}drawTitle(e,n,r){const i=this.title,s=i.length;let a,l,u;if(s){const d=oo(r.rtl,this.x,this.width);for(e.x=Gu(this,r.titleAlign,r),n.textAlign=d.textAlign(r.titleAlign),n.textBaseline="middle",a=An(r.titleFont),l=r.titleSpacing,n.fillStyle=r.titleColor,n.font=a.string,u=0;u<s;++u)n.fillText(i[u],d.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+l,u+1===s&&(e.y+=r.titleMarginBottom-l)}}_drawColorBox(e,n,r,i,s){const a=this.labelColors[r],l=this.labelPointStyles[r],{boxHeight:u,boxWidth:d}=s,f=An(s.bodyFont),p=Gu(this,"left",s),m=i.x(p),v=u<f.lineHeight?(f.lineHeight-u)/2:0,b=n.y+v;if(s.usePointStyle){const _={radius:Math.min(d,u)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},w=i.leftForLtr(m,d)+d/2,x=b+u/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,Ug(e,_,w,x),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,Ug(e,_,w,x)}else{e.lineWidth=Ke(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;const _=i.leftForLtr(m,d),w=i.leftForLtr(i.xPlus(m,1),d-2),x=Nl(a.borderRadius);Object.values(x).some(C=>C!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,Bg(e,{x:_,y:b,w:d,h:u,radius:x}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),Bg(e,{x:w,y:b+1,w:d-2,h:u-2,radius:x}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(_,b,d,u),e.strokeRect(_,b,d,u),e.fillStyle=a.backgroundColor,e.fillRect(w,b+1,d-2,u-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:i}=this,{bodySpacing:s,bodyAlign:a,displayColors:l,boxHeight:u,boxWidth:d,boxPadding:f}=r,p=An(r.bodyFont);let m=p.lineHeight,v=0;const b=oo(r.rtl,this.x,this.width),_=function(O){n.fillText(O,b.x(e.x+v),e.y+m/2),e.y+=m+s},w=b.textAlign(a);let x,C,k,R,A,M,P;for(n.textAlign=a,n.textBaseline="middle",n.font=p.string,e.x=Gu(this,w,r),n.fillStyle=r.bodyColor,ht(this.beforeBody,_),v=l&&w!=="right"?a==="center"?d/2+f:d+2+f:0,R=0,M=i.length;R<M;++R){for(x=i[R],C=this.labelTextColors[R],n.fillStyle=C,ht(x.before,_),k=x.lines,l&&k.length&&(this._drawColorBox(n,e,R,b,r),m=Math.max(p.lineHeight,u)),A=0,P=k.length;A<P;++A)_(k[A]),m=p.lineHeight;ht(x.after,_)}v=0,m=p.lineHeight,ht(this.afterBody,_),e.y-=s}drawFooter(e,n,r){const i=this.footer,s=i.length;let a,l;if(s){const u=oo(r.rtl,this.x,this.width);for(e.x=Gu(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=u.textAlign(r.footerAlign),n.textBaseline="middle",a=An(r.footerFont),n.fillStyle=r.footerColor,n.font=a.string,l=0;l<s;++l)n.fillText(i[l],u.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+r.footerSpacing}}drawBackground(e,n,r,i){const{xAlign:s,yAlign:a}=this,{x:l,y:u}=e,{width:d,height:f}=r,{topLeft:p,topRight:m,bottomLeft:v,bottomRight:b}=Nl(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(l+p,u),a==="top"&&this.drawCaret(e,n,r,i),n.lineTo(l+d-m,u),n.quadraticCurveTo(l+d,u,l+d,u+m),a==="center"&&s==="right"&&this.drawCaret(e,n,r,i),n.lineTo(l+d,u+f-b),n.quadraticCurveTo(l+d,u+f,l+d-b,u+f),a==="bottom"&&this.drawCaret(e,n,r,i),n.lineTo(l+v,u+f),n.quadraticCurveTo(l,u+f,l,u+f-v),a==="center"&&s==="left"&&this.drawCaret(e,n,r,i),n.lineTo(l,u+p),n.quadraticCurveTo(l,u,l+p,u),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const a=_l[e.position].call(this,this._active,this._eventPosition);if(!a)return;const l=this._size=bw(this,e),u=Object.assign({},a,this._size),d=_w(n,e,u),f=Sw(e,u,d,n);(i._to!==f.x||s._to!==f.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=l.width,this.height=l.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,f))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const a=kr(n.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&l&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,i,n),ET(e,n.textDirection),s.y+=a.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),CT(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,i=e.map(({datasetIndex:l,index:u})=>{const d=this.chart.getDatasetMeta(l);if(!d)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:d.data[u],index:u}}),s=!Fd(r,i),a=this._positionChanged(i,n);(s||a)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],a=this._getActiveElements(e,s,n,r),l=this._positionChanged(a,e),u=n||!Fd(a,s)||l;return u&&(this._active=a,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),u}_getActiveElements(e,n,r,i){const s=this.options;if(e.type==="mouseout")return[];if(!i)return n.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const a=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&a.reverse(),a}_positionChanged(e,n){const{caretX:r,caretY:i,options:s}=this,a=_l[s.position].call(this,e,n);return a!==!1&&(r!==a.x||i!==a.y)}}var Y3={id:"tooltip",_element:Ew,positioners:_l,afterInit(t,e,n){n&&(t.tooltip=new Ew({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:GT},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const Q3=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function K3(t,e,n,r){const i=t.indexOf(e);if(i===-1)return Q3(t,e,n,r);const s=t.lastIndexOf(e);return i!==s?n:i}const Z3=(t,e)=>t===null?null:Ln(Math.round(t),0,e);function Cw(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class X3 extends To{static id="category";static defaults={ticks:{callback:Cw}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:i,label:s}of n)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(wt(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:K3(r,e,$e(n,e),this._addedLabels),Z3(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let a=e;a<=n;a++)i.push({value:a});return i}getLabelForValue(e){return Cw.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function J3(t,e){const n=[],{bounds:i,step:s,min:a,max:l,precision:u,count:d,maxTicks:f,maxDigits:p,includeBounds:m}=t,v=s||1,b=f-1,{min:_,max:w}=e,x=!wt(a),C=!wt(l),k=!wt(d),R=(w-_)/(p+1);let A=ES((w-_)/b/v)*v,M,P,O,z;if(A<1e-14&&!x&&!C)return[{value:_},{value:w}];z=Math.ceil(w/A)-Math.floor(_/A),z>b&&(A=ES(z*A/b/v)*v),wt(u)||(M=Math.pow(10,u),A=Math.ceil(A*M)/M),i==="ticks"?(P=Math.floor(_/A)*A,O=Math.ceil(w/A)*A):(P=_,O=w),x&&C&&s&&cW((l-a)/s,A/1e3)?(z=Math.round(Math.min((l-a)/A,f)),A=(l-a)/z,P=a,O=l):k?(P=x?a:P,O=C?l:O,z=d-1,A=(O-P)/z):(z=(O-P)/A,Rl(z,Math.round(z),A/1e3)?z=Math.round(z):z=Math.ceil(z));const B=Math.max(CS(A),CS(P));M=Math.pow(10,wt(u)?B:u),P=Math.round(P*M)/M,O=Math.round(O*M)/M;let $=0;for(x&&(m&&P!==a?(n.push({value:a}),P<a&&$++,Rl(Math.round((P+$*A)*M)/M,a,Tw(a,R,t))&&$++):P<a&&$++);$<z;++$){const ee=Math.round((P+$*A)*M)/M;if(C&&ee>l)break;n.push({value:ee})}return C&&m&&O!==l?n.length&&Rl(n[n.length-1].value,l,Tw(l,R,t))?n[n.length-1].value=l:n.push({value:l}):(!C||O===l)&&n.push({value:O}),n}function Tw(t,e,{horizontal:n,minRotation:r}){const i=Mi(r),s=(n?Math.sin(i):Math.cos(i))||.001,a=.75*e*(""+t).length;return Math.min(e/s,a)}class e$ extends To{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return wt(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const a=u=>i=n?i:u,l=u=>s=r?s:u;if(e){const u=ho(i),d=ho(s);u<0&&d<0?l(0):u>0&&d>0&&a(0)}if(i===s){let u=s===0?1:Math.abs(s*.05);l(s+u),e||a(i-u)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,a=J3(i,s);return e.bounds==="ticks"&&uW(a,this,"value"),e.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-n)/Math.max(e.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return lv(e,this.chart.options.locale,this.options.ticks.format)}}class t$ extends e${static id="linear";static defaults={ticks:{callback:vT.formatters.numeric}};determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Rn(e)?e:0,this.max=Rn(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=Mi(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const Df={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Jn=Object.keys(Df);function Dw(t,e){return t-e}function kw(t,e){if(wt(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:s}=t._parseOpts;let a=e;return typeof r=="function"&&(a=r(a)),Rn(a)||(a=typeof r=="string"?n.parse(a,r):n.parse(a)),a===null?null:(i&&(a=i==="week"&&(Gl(s)||s===!0)?n.startOf(a,"isoWeek",s):n.startOf(a,i)),+a)}function Aw(t,e,n,r){const i=Jn.length;for(let s=Jn.indexOf(t);s<i-1;++s){const a=Df[Jn[s]],l=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((n-e)/(l*a.size))<=r)return Jn[s]}return Jn[i-1]}function n$(t,e,n,r,i){for(let s=Jn.length-1;s>=Jn.indexOf(n);s--){const a=Jn[s];if(Df[a].common&&t._adapter.diff(i,r,a)>=e-1)return a}return Jn[n?Jn.indexOf(n):0]}function r$(t){for(let e=Jn.indexOf(t)+1,n=Jn.length;e<n;++e)if(Df[Jn[e]].common)return Jn[e]}function Rw(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:i}=sv(n,e),s=n[r]>=e?n[r]:n[i];t[s]=!0}}function i$(t,e,n,r){const i=t._adapter,s=+i.startOf(e[0].value,r),a=e[e.length-1].value;let l,u;for(l=s;l<=a;l=+i.add(l,1,r))u=n[l],u>=0&&(e[u].major=!0);return e}function Ow(t,e,n){const r=[],i={},s=e.length;let a,l;for(a=0;a<s;++a)l=e[a],i[l]=a,r.push({value:l,major:!1});return s===0||!n?r:i$(t,r,i,n)}class Mw extends To{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),i=this._adapter=new UV._date(e.adapters.date);i.init(n),Al(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:kw(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:i,max:s,minDefined:a,maxDefined:l}=this.getUserBounds();function u(d){!a&&!isNaN(d.min)&&(i=Math.min(i,d.min)),!l&&!isNaN(d.max)&&(s=Math.max(s,d.max))}(!a||!l)&&(u(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&u(this.getMinMax(!1))),i=Rn(i)&&!isNaN(i)?i:+n.startOf(Date.now(),r),s=Rn(s)&&!isNaN(s)?s:+n.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,a=this.max,l=gW(i,s,a);return this._unit=n.unit||(r.autoSkip?Aw(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):n$(this,l.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:r$(this._unit),this.initOffsets(i),e.reverse&&l.reverse(),Ow(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,i,s;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?n=1-i:n=(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?r=s:r=(s-this.getDecimalForValue(e[e.length-2]))/2);const a=e.length<3?.5:.25;n=Ln(n,0,a),r=Ln(r,0,a),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,i=this.options,s=i.time,a=s.unit||Aw(s.minUnit,n,r,this._getLabelCapacity(n)),l=$e(i.ticks.stepSize,1),u=a==="week"?s.isoWeekday:!1,d=Gl(u)||u===!0,f={};let p=n,m,v;if(d&&(p=+e.startOf(p,"isoWeek",u)),p=+e.startOf(p,d?"day":a),e.diff(r,n,a)>1e5*l)throw new Error(n+" and "+r+" are too far apart with stepSize of "+l+" "+a);const b=i.ticks.source==="data"&&this.getDataTimestamps();for(m=p,v=0;m<r;m=+e.add(m,l,a),v++)Rw(f,m,b);return(m===r||i.bounds==="ticks"||v===1)&&Rw(f,m,b),Object.keys(f).sort(Dw).map(_=>+_)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const i=this.options.time.displayFormats,s=this._unit,a=n||i[s];return this._adapter.format(e,a)}_tickFormatFunction(e,n,r,i){const s=this.options,a=s.ticks.callback;if(a)return Ct(a,[e,n,r],this);const l=s.time.displayFormats,u=this._unit,d=this._majorUnit,f=u&&l[u],p=d&&l[d],m=r[n],v=d&&p&&m&&m.major;return this._adapter.format(e,i||(v?p:f))}generateTickLabels(e){let n,r,i;for(n=0,r=e.length;n<r;++n)i=e[n],i.label=this._tickFormatFunction(i.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,i=Mi(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(i),a=Math.sin(i),l=this._resolveTickFontOptions(0).size;return{w:r*s+l*a,h:r*a+l*s}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,i=r[n.unit]||r.millisecond,s=this._tickFormatFunction(e,0,Ow(this,[e],this._majorUnit),i),a=this._getLabelSize(s),l=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,r=i.length;n<r;++n)e=e.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const i=this.getLabels();for(n=0,r=i.length;n<r;++n)e.push(kw(this,i[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return vW(e.sort(Dw))}}function Yu(t,e,n){let r=0,i=t.length-1,s,a,l,u;n?(e>=t[r].pos&&e<=t[i].pos&&({lo:r,hi:i}=ra(t,"pos",e)),{pos:s,time:l}=t[r],{pos:a,time:u}=t[i]):(e>=t[r].time&&e<=t[i].time&&({lo:r,hi:i}=ra(t,"time",e)),{time:s,pos:l}=t[r],{time:a,pos:u}=t[i]);const d=a-s;return d?l+(u-l)*(e-s)/d:l}class O$ extends Mw{static id="timeseries";static defaults=Mw.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Yu(n,this.min),this._tableRange=Yu(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,i=[],s=[];let a,l,u,d,f;for(a=0,l=e.length;a<l;++a)d=e[a],d>=n&&d<=r&&i.push(d);if(i.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(a=0,l=i.length;a<l;++a)f=i[a+1],u=i[a-1],d=i[a],Math.round((f+u)/2)!==d&&s.push({time:d,pos:a/(l-1)});return s}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(Yu(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return Yu(this._table,r*this._tableRange+this._minPos,!0)}}const YT="label";function Nw(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function s$(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function QT(t,e){t.labels=e}function KT(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:YT;const r=[];t.datasets=e.map(i=>{const s=t.datasets.find(a=>a[n]===i[n]);return!s||!i.data||r.includes(s)?{...i}:(r.push(s),Object.assign(s,i),s)})}function a$(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:YT;const n={labels:[],datasets:[]};return QT(n,t.labels),KT(n,t.datasets,e),n}function o$(t,e){const{height:n=150,width:r=300,redraw:i=!1,datasetIdKey:s,type:a,data:l,options:u,plugins:d=[],fallbackContent:f,updateMode:p,...m}=t,v=T.useRef(null),b=T.useRef(null),_=()=>{v.current&&(b.current=new Ef(v.current,{type:a,data:a$(l,s),options:u&&{...u},plugins:d}),Nw(e,b.current))},w=()=>{Nw(e,null),b.current&&(b.current.destroy(),b.current=null)};return T.useEffect(()=>{!i&&b.current&&u&&s$(b.current,u)},[i,u]),T.useEffect(()=>{!i&&b.current&&QT(b.current.config.data,l.labels)},[i,l.labels]),T.useEffect(()=>{!i&&b.current&&l.datasets&&KT(b.current.config.data,l.datasets,s)},[i,l.datasets]),T.useEffect(()=>{b.current&&(i?(w(),setTimeout(_)):b.current.update(p))},[i,u,l.labels,l.datasets,p]),T.useEffect(()=>{b.current&&(w(),setTimeout(_))},[a]),T.useEffect(()=>(_(),()=>w()),[]),Q.createElement("canvas",{ref:v,role:"img",height:n,width:r,...m},f)}const l$=T.forwardRef(o$);function ZT(t,e){return Ef.register(e),T.forwardRef((n,r)=>Q.createElement(l$,{...n,ref:r,type:t}))}const c$=ZT("line",zV),u$=ZT("pie",HV);Ef.register(X3,t$,f3,Cf,H3,Y3,j3,n3,M3);function d$(){const{data:t=[],isLoading:e,error:n}=ef(),{data:r=[],isLoading:i,error:s}=tf(),{isInitialized:a}=Yt(),{init:l,cleanup:u}=pf(),d=e||i;T.useEffect(()=>(a||l(),()=>{u()}),[l,a,u]);const f=T.useMemo(()=>{if(d)return{};const b=t.reduce((q,Y)=>{const F=Y.work_center||"Unknown";return q[F]||(q[F]={[ki.ACTIVE]:0,[ki.INACTIVE]:0,[ki.MAINTENANCE]:0}),q[F][Y.status]=(q[F][Y.status]||0)+1,q},{}),_=new Date,w=new Date(_),x=_.getDay(),C=x===0?6:x-1;w.setUTCDate(_.getUTCDate()-C),w.setUTCHours(0,0,0,0);const k=r.filter(q=>q.completion_date?new Date(q.completion_date)>=w:!1).length,R=r.filter(q=>q.status==="IN PROGRESS"||q.status==="SCHEDULED").length,A=r.filter(q=>q.delivery_date?new Date(q.delivery_date)<_&&(q.quantity_completed||0)<(q.quantity||0):!1).length,M=t.filter(q=>q.status===ki.ACTIVE).length,P={},O=new Date(_);O.setUTCDate(_.getUTCDate()-7);const z=new Date(_);z.setUTCDate(_.getUTCDate()+7),r.forEach(q=>{if(q.scheduled_start_time){const Y=new Date(q.scheduled_start_time);if(Y>=O&&Y<=z){const F=Y.toISOString().split("T")[0];P[F]=(P[F]||0)+1}}});const B=r.filter(q=>q.scheduled_start_time?new Date(q.scheduled_start_time)>=w:!1),$=B.filter(q=>q.cost&&q.cost>0).map(q=>q.cost),ee=B.filter(q=>q.duration&&q.duration>0).map(q=>q.duration),re=$.length>0?$.reduce((q,Y)=>q+Y,0)/$.length:0,he=ee.length>0?ee.reduce((q,Y)=>q+Y,0)/ee.length:0,pe={},ie={},oe=["STAMPA","CONFEZIONAMENTO"],K=["ZANICA","BUSTO_GAROLFO"];return oe.forEach(q=>{const Y=q.toLowerCase();pe[Y]={},ie[Y]={},K.forEach(F=>{const G=F==="BUSTO_GAROLFO"?"busto_garolfo":F.toLowerCase(),ne=r.filter(se=>!se.work_center||!se.department?!1:se.work_center===F&&se.department===q),le=ne.filter(se=>se.cost&&se.cost>0).map(se=>se.cost),ue=le.length>0?le.reduce((se,Me)=>se+Me,0)/le.length:0,ce=ne.filter(se=>se.duration&&se.duration>0).map(se=>se.duration),Ee=ce.length>0?ce.reduce((se,Me)=>se+Me,0)/ce.length:0;pe[Y][G]=ue,ie[Y][G]=Ee})}),{machinesByWorkCenter:b,completedThisWeek:k,tasksInWip:R,delayedTasks:A,activeMachines:M,totalMachines:t.length,totalOrders:r.length,tasksPerDay:P,avgWeeklyCost:re,avgWeeklyDuration:he,weeklyOrdersCount:B.length,costMatrix:pe,durationMatrix:ie}},[t,r,d]),p=T.useMemo(()=>{if(!f.tasksPerDay)return null;const b=[],_=new Date;for(let w=-7;w<=7;w++){const x=new Date(_);x.setUTCDate(_.getUTCDate()+w);const C=x.toISOString().split("T")[0];b.push(C)}return{labels:b.map(w=>{const x=new Date(w);return vn(new Date(x),"dd/MM")}),datasets:[{label:"Lavori Iniziati",data:b.map(w=>f.tasksPerDay[w]||0),borderColor:"rgb(37, 99, 235)",backgroundColor:"rgba(37, 99, 235, 0.1)",tension:.4,borderWidth:2,pointBackgroundColor:"rgb(37, 99, 235)",pointBorderColor:"rgb(37, 99, 235)",pointRadius:4,pointHoverRadius:6,fill:!0}]}},[f.tasksPerDay]),m={responsive:!0,maintainAspectRatio:!1,interaction:{intersect:!1,mode:"index"},plugins:{legend:{display:!1},title:{display:!1},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"white",bodyColor:"white",borderColor:"rgba(255, 255, 255, 0.1)",borderWidth:1,cornerRadius:8,displayColors:!1}},scales:{y:{beginAtZero:!0,grid:{color:"rgba(156, 163, 175, 0.2)",drawBorder:!1},ticks:{stepSize:1,color:"rgba(156, 163, 175, 0.8)",font:{size:12,family:"Inter, sans-serif"},padding:8}},x:{grid:{color:"rgba(156, 163, 175, 0.2)",drawBorder:!1},ticks:{color:"rgba(156, 163, 175, 0.8)",font:{size:12,family:"Inter, sans-serif"},padding:8}}},elements:{point:{hoverBorderWidth:3}}},v={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{padding:10,usePointStyle:!0,font:{size:10}}}}};return d?E.jsx("div",{className:"p-1 bg-card rounded shadow-sm border",children:E.jsx("div",{className:"text-center py-1 text-muted-foreground text-[10px]",children:"Caricamento dashboard..."})}):n||s?E.jsx("div",{className:"p-1 bg-card rounded shadow-sm border",children:E.jsxs("div",{className:"text-center py-1 text-destructive text-[10px]",children:["Errore nel caricamento dei dati: ",n?.message||s?.message]})}):E.jsxs("div",{className:"space-y-6",children:[E.jsx("div",{className:"flex justify-between items-center",children:E.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Dashboard Produzione"})}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[E.jsxs(yr,{className:"p-6",children:[E.jsx(br,{className:"pb-2",children:E.jsx(_r,{className:"text-sm font-medium text-muted-foreground",children:"Macchine Totali"})}),E.jsxs(Sr,{children:[E.jsx("div",{className:"text-3xl font-bold text-foreground",children:f.totalMachines}),E.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Attive: ",f.activeMachines]})]})]}),E.jsxs(yr,{className:"p-6",children:[E.jsx(br,{className:"pb-2",children:E.jsx(_r,{className:"text-sm font-medium text-muted-foreground",children:"Ordini Totali"})}),E.jsxs(Sr,{children:[E.jsx("div",{className:"text-3xl font-bold text-foreground",children:f.totalOrders}),E.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Totali nel sistema"})]})]}),E.jsxs(yr,{className:"p-6",children:[E.jsx(br,{className:"pb-2",children:E.jsx(_r,{className:"text-sm font-medium text-muted-foreground",children:"Completati Questa Settimana"})}),E.jsxs(Sr,{children:[E.jsx("div",{className:"text-3xl font-bold text-foreground",children:f.completedThisWeek}),E.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Lavori completati"})]})]}),E.jsxs(yr,{className:"p-6",children:[E.jsx(br,{className:"pb-2",children:E.jsx(_r,{className:"text-sm font-medium text-muted-foreground",children:"Lavori in Corso"})}),E.jsxs(Sr,{children:[E.jsx("div",{className:"text-3xl font-bold text-foreground",children:f.tasksInWip}),E.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"In progress/scheduled"})]})]}),E.jsxs(yr,{className:"p-6 border-destructive/20 bg-destructive/5",children:[E.jsx(br,{className:"pb-2",children:E.jsx(_r,{className:"text-sm font-medium text-destructive",children:"Lavori Ritardati"})}),E.jsxs(Sr,{children:[E.jsx("div",{className:"text-3xl font-bold text-destructive",children:f.delayedTasks}),E.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Oltre la scadenza"})]})]})]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[E.jsxs(yr,{className:"p-6",children:[E.jsx(br,{className:"pb-2",children:E.jsx(_r,{className:"text-sm font-medium text-muted-foreground",children:"Ordini Settimanali"})}),E.jsxs(Sr,{children:[E.jsx("div",{className:"text-3xl font-bold text-foreground",children:f.weeklyOrdersCount}),E.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Questa Settimana"})]})]}),E.jsxs(yr,{className:"p-6",children:[E.jsx(br,{className:"pb-2",children:E.jsx(_r,{className:"text-sm font-medium text-muted-foreground",children:"Costo Medio"})}),E.jsxs(Sr,{children:[E.jsxs("div",{className:"text-3xl font-bold text-foreground",children:["",f.avgWeeklyCost.toFixed(2)]}),E.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Per Lavoro Questa Settimana"})]})]}),E.jsxs(yr,{className:"p-6",children:[E.jsx(br,{className:"pb-2",children:E.jsx(_r,{className:"text-sm font-medium text-muted-foreground",children:"Durata Media"})}),E.jsxs(Sr,{children:[E.jsxs("div",{className:"text-3xl font-bold text-foreground",children:[f.avgWeeklyDuration.toFixed(1),"h"]}),E.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Per Lavoro Questa Settimana"})]})]})]}),E.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[E.jsxs(yr,{children:[E.jsx(br,{children:E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx(_r,{children:"Lavori Iniziati per Giorno (14 giorni)"}),E.jsx("div",{className:"flex items-center gap-3 text-xs",children:E.jsxs("div",{className:"flex items-center gap-1",children:[E.jsx("span",{className:"inline-block w-3 h-1 bg-primary"})," Lavori"]})})]})}),E.jsx(Sr,{children:E.jsx("div",{className:"h-64",children:p&&E.jsx(c$,{data:p,options:m,height:256})})})]}),E.jsxs(yr,{children:[E.jsx(br,{children:E.jsx(_r,{children:"Macchine per Centro di Lavoro e Stato"})}),E.jsx(Sr,{children:E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(f.machinesByWorkCenter||{}).map(([b,_])=>{const w={labels:Object.keys(_).map(x=>x.charAt(0).toUpperCase()+x.slice(1).toLowerCase()),datasets:[{data:Object.values(_),backgroundColor:["rgba(37, 99, 235, 0.8)","rgba(107, 114, 128, 0.8)","rgba(156, 163, 175, 0.8)"],borderColor:["rgba(37, 99, 235, 1)","rgba(107, 114, 128, 1)","rgba(156, 163, 175, 1)"],borderWidth:2}]};return E.jsxs("div",{className:"text-center",children:[E.jsx("h4",{className:"text-sm font-medium text-foreground mb-2",children:b}),E.jsx("div",{className:"h-32",children:E.jsx(u$,{data:w,options:v,height:150})}),E.jsx("div",{className:"text-xs text-muted-foreground mt-2",children:Object.entries(_).map(([x,C])=>E.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[E.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:x==="ACTIVE"?"rgba(37, 99, 235, 0.8)":x==="INACTIVE"?"rgba(107, 114, 128, 0.8)":"rgba(156, 163, 175, 0.8)"}}),E.jsxs("span",{children:[x,": ",C]})]},x))})]},b)})})})]})]}),E.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[E.jsxs(yr,{children:[E.jsx(br,{children:E.jsx(_r,{children:"Costo Medio per Centro di Lavoro e Reparto"})}),E.jsx(Sr,{children:E.jsx("div",{className:"overflow-x-auto",children:E.jsxs("table",{className:"w-full",children:[E.jsx("thead",{children:E.jsxs("tr",{className:"border-b border-border",children:[E.jsx("th",{className:"text-left py-2 px-2 text-sm font-medium text-muted-foreground"}),E.jsx("th",{className:"text-left py-2 px-2 text-sm font-medium text-muted-foreground",children:"ZANICA"}),E.jsx("th",{className:"text-left py-2 px-2 text-sm font-medium text-muted-foreground",children:"BUSTO GAROLFO"})]})}),E.jsxs("tbody",{children:[E.jsxs("tr",{className:"border-b border-border",children:[E.jsx("td",{className:"py-2 px-2 text-sm font-medium text-muted-foreground",children:"STAMPA"}),E.jsxs("td",{className:"py-2 px-2 text-sm text-foreground",children:["",f.costMatrix?.stampa?.zanica?.toFixed(2)||"0.00"]}),E.jsxs("td",{className:"py-2 px-2 text-sm text-foreground",children:["",f.costMatrix?.stampa?.busto_garolfo?.toFixed(2)||"0.00"]})]}),E.jsxs("tr",{children:[E.jsx("td",{className:"py-2 px-2 text-sm font-medium text-muted-foreground",children:"CONFEZIONAMENTO"}),E.jsxs("td",{className:"py-2 px-2 text-sm text-foreground",children:["",f.costMatrix?.confezionamento?.zanica?.toFixed(2)||"0.00"]}),E.jsxs("td",{className:"py-2 px-2 text-sm text-foreground",children:["",f.costMatrix?.confezionamento?.busto_garolfo?.toFixed(2)||"0.00"]})]})]})]})})})]}),E.jsxs(yr,{children:[E.jsx(br,{children:E.jsx(_r,{children:"Durata Media per Centro di Lavoro e Reparto"})}),E.jsx(Sr,{children:E.jsx("div",{className:"overflow-x-auto",children:E.jsxs("table",{className:"w-full",children:[E.jsx("thead",{children:E.jsxs("tr",{className:"border-b border-border",children:[E.jsx("th",{className:"text-left py-2 px-2 text-sm font-medium text-muted-foreground"}),E.jsx("th",{className:"text-left py-2 px-2 text-sm font-medium text-muted-foreground",children:"ZANICA"}),E.jsx("th",{className:"text-left py-2 px-2 text-sm font-medium text-muted-foreground",children:"BUSTO GAROLFO"})]})}),E.jsxs("tbody",{children:[E.jsxs("tr",{className:"border-b border-border",children:[E.jsx("td",{className:"py-2 px-2 text-sm font-medium text-muted-foreground",children:"STAMPA"}),E.jsxs("td",{className:"py-2 px-2 text-sm text-foreground",children:[f.durationMatrix?.stampa?.zanica?.toFixed(1)||"0.0","h"]}),E.jsxs("td",{className:"py-2 px-2 text-sm text-foreground",children:[f.durationMatrix?.stampa?.busto_garolfo?.toFixed(1)||"0.0","h"]})]}),E.jsxs("tr",{children:[E.jsx("td",{className:"py-2 px-2 text-sm font-medium text-muted-foreground",children:"CONFEZIONAMENTO"}),E.jsxs("td",{className:"py-2 px-2 text-sm text-foreground",children:[f.durationMatrix?.confezionamento?.zanica?.toFixed(1)||"0.0","h"]}),E.jsxs("td",{className:"py-2 px-2 text-sm text-foreground",children:[f.durationMatrix?.confezionamento?.busto_garolfo?.toFixed(1)||"0.0","h"]})]})]})]})})})]})]})]})}const Iw=({children:t,className:e="",disabled:n=!1,type:r="button",onClick:i,variant:s="default",size:a="default",...l})=>{const u="inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",d={default:"bg-primary text-primary-foreground hover:bg-primary/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground"},f={default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3"};return E.jsx("button",{type:r,disabled:n,onClick:i,className:`${u} ${d[s]} ${f[a]} ${e}`,...l,children:t})},Pw=({className:t="",type:e="text",...n})=>E.jsx("input",{type:e,className:`flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${t}`,...n});function f$({title:t,logo:e,subtitle:n,isLoading:r=!1,error:i,onSubmit:s,onValidate:a,labels:l={signIn:"Sign In",email:"Email",password:"Password",forgotPassword:"Forgot Password?",signUp:"Sign Up",noAccount:"Don't have an account?",signingIn:"Signing in..."},showForgotPassword:u=!1,showSignUp:d=!1,forgotPasswordUrl:f="/forgot-password",signUpUrl:p="/signup",demoCredentials:m,additionalFields:v}){const[b,_]=T.useState({email:"",password:"",...m||{}}),[w,x]=T.useState({}),C=M=>{const{name:P,value:O}=M.target;_(z=>({...z,[P]:O})),w[P]&&x(z=>({...z,[P]:""}))},k=async M=>{M.preventDefault();const P={};if(b.email||(P.email="Email is required"),b.password||(P.password="Password is required"),a){const O=a(b);Object.assign(P,O)}if(Object.keys(P).length>0){x(P);return}try{await s(b)}catch(O){console.error("Login error:",O)}},R=M=>w[M]?E.jsx("p",{className:"text-sm text-red-600 mt-1",children:w[M]}):null;return E.jsx("div",{className:"min-h-screen flex",children:E.jsxs("div",{className:"container relative grid flex-col items-center justify-center sm:max-w-none lg:grid-cols-2 lg:px-0",children:[E.jsxs("div",{className:"relative hidden h-full flex-col bg-muted p-10 text-white dark:border-r lg:flex",style:{background:"#18181b"},children:[E.jsx("div",{className:"absolute inset-0 bg-zinc-900"}),E.jsxs("div",{className:"relative z-20 flex items-center text-lg font-medium",children:[e&&E.jsx("img",{className:"h-6 mr-2",src:e,alt:t}),t]}),n&&E.jsx("div",{className:"relative z-20 mt-auto",children:E.jsx("p",{className:"text-lg",children:n})})]}),E.jsx("div",{className:"lg:p-8",children:E.jsxs("div",{className:"mx-auto flex w-full flex-col justify-center space-y-6 sm:w-[350px]",children:[E.jsxs("div",{className:"flex flex-col space-y-2 text-center lg:hidden",children:[e&&E.jsx("img",{className:"h-8 mx-auto",src:e,alt:t}),E.jsx("h1",{className:"text-xl font-semibold",children:t})]}),E.jsx("div",{className:"flex flex-col space-y-2 text-center",children:E.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:l.signIn})}),E.jsxs("form",{onSubmit:k,className:"space-y-8",children:[E.jsxs("div",{className:"space-y-2",children:[E.jsx("label",{htmlFor:"email",className:"block text-sm font-medium",children:l.email}),E.jsx(Pw,{id:"email",name:"email",type:"email",value:b.email,onChange:C,className:w.email?"border-red-500":"",disabled:r,autoComplete:"email"}),R("email")]}),E.jsxs("div",{className:"space-y-2",children:[E.jsx("label",{htmlFor:"password",className:"block text-sm font-medium",children:l.password}),E.jsx(Pw,{id:"password",name:"password",type:"password",value:b.password,onChange:C,className:w.password?"border-red-500":"",disabled:r,autoComplete:"current-password"}),R("password")]}),v&&E.jsx("div",{className:"space-y-4",children:typeof v=="function"?v({formData:b,handleChange:C,formErrors:w,getFieldError:R,isLoading:r}):Q.cloneElement(v,{formData:b,handleChange:C,formErrors:w,getFieldError:R,isLoading:r})}),i&&E.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:E.jsxs("div",{className:"flex",children:[E.jsx("div",{className:"flex-shrink-0",children:E.jsx("span",{className:"text-red-400",children:""})}),E.jsx("div",{className:"ml-3",children:E.jsx("p",{className:"text-sm text-red-800",children:i})})]})}),E.jsx(Iw,{type:"submit",className:"w-full cursor-pointer",disabled:r,children:r?l.signingIn:l.signIn})]}),u&&E.jsx("a",{href:f,className:"text-sm text-center hover:underline block",children:l.forgotPassword}),d&&E.jsxs("div",{className:"text-center space-y-4",children:[E.jsxs("div",{className:"relative",children:[E.jsx("div",{className:"absolute inset-0 flex items-center",children:E.jsx("div",{className:"w-full border-t border-gray-300"})}),E.jsx("div",{className:"relative flex justify-center text-sm",children:E.jsx("span",{className:"px-2 bg-background text-muted-foreground",children:l.noAccount})})]}),E.jsx("a",{href:p,children:E.jsx(Iw,{variant:"outline",className:"w-full",children:l.signUp})})]}),m&&typeof import.meta<"u"&&!1]})})]})})}function h$(){const[t,e]=T.useState(!1),{signIn:n,error:r}=_o(),{setSelectedWorkCenter:i}=Yt(),s=ci(),{handleAsync:a}=ma("LoginPage"),l=f=>{const p={};return f.workCenter||(p.workCenter="Centro di lavoro richiesto"),p},u=async f=>{e(!0),await a(async()=>{(await n(f.email,f.password)).error||(i(f.workCenter),s("/",{replace:!0}))},{context:"Login",fallbackMessage:"Accesso fallito. Riprova.",onFinally:()=>e(!1)})},d=({formData:f,handleChange:p,formErrors:m,getFieldError:v,isLoading:b})=>E.jsxs("div",{className:"space-y-2",children:[E.jsx("label",{htmlFor:"workCenter",className:"block text-sm font-medium",children:"Centro di Lavoro *"}),E.jsxs("select",{name:"workCenter",value:f.workCenter||"",onChange:p,className:`flex h-9 w-full rounded-md border bg-transparent px-3 py-1 text-sm shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring ${m.workCenter?"border-red-500":"border-input"}`,disabled:b,children:[E.jsx("option",{value:"",children:"Seleziona un centro di lavoro"}),E.jsx("option",{value:tt.ZANICA,children:tt.ZANICA}),E.jsx("option",{value:tt.BUSTO_GAROLFO,children:tt.BUSTO_GAROLFO}),E.jsx("option",{value:tt.BOTH,children:tt.BOTH})]}),v("workCenter")]});return E.jsx(f$,{title:"Scheduler",logo:"/scheduler-logo.png",subtitle:"Sistema di gestione della produzione",isLoading:t,error:r,onSubmit:u,onValidate:l,additionalFields:d,labels:{signIn:"Accedi",email:"Indirizzo Email",password:"Password",forgotPassword:"Password dimenticata?",signUp:"Crea Account",noAccount:"Non hai un account?",signingIn:"Accesso in corso..."},demoCredentials:{email:"demo@example.com",password:"demo123",workCenter:tt.ZANICA}})}function p$(){const[t,e]=T.useState({email:"",password:"",confirmPassword:"",firstName:"",lastName:""}),[n,r]=T.useState(!1),[i,s]=T.useState({}),{signUp:a,error:l}=_o(),u=ci(),{handleAsync:d}=ma("SignupPage"),f=b=>{const{name:_,value:w}=b.target;e(x=>({...x,[_]:w})),i[_]&&s(x=>({...x,[_]:""}))},p=()=>{const b={};return t.email.trim()?/\S+@\S+\.\S+/.test(t.email)||(b.email="Inserisci un indirizzo email valido"):b.email="Email richiesta",t.password?t.password.length<6&&(b.password="La password deve essere di almeno 6 caratteri"):b.password="Password richiesta",t.confirmPassword?t.password!==t.confirmPassword&&(b.confirmPassword="Le password non coincidono"):b.confirmPassword="Conferma la tua password",t.firstName.trim()||(b.firstName="Nome richiesto"),t.lastName.trim()||(b.lastName="Cognome richiesto"),s(b),Object.keys(b).length===0},m=async b=>{b.preventDefault(),p()&&(r(!0),await d(async()=>{const _={first_name:t.firstName,last_name:t.lastName,full_name:`${t.firstName} ${t.lastName}`};(await a(t.email,t.password,_)).error||u("/",{replace:!0})},{context:"Signup",fallbackMessage:"Creazione account fallita. Riprova.",onFinally:()=>r(!1)}))},v=b=>i[b]?E.jsx("span",{className:"error-message",style:{color:"red",fontSize:"12px",marginTop:"4px"},children:i[b]}):null;return E.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-6 px-2 sm:px-6 lg:px-8",children:E.jsxs("div",{className:"max-w-md w-full space-y-4",children:[E.jsxs("div",{className:"text-center",children:[E.jsx("h1",{className:"text-[10px] font-bold text-gray-900",children:"Crea Account"}),E.jsx("p",{className:"mt-2 text-[10px] text-gray-600",children:"Registrati per iniziare con il tuo account"})]}),E.jsxs("form",{onSubmit:m,className:"mt-4 space-y-4",children:[E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[E.jsxs("div",{className:"space-y-2",children:[E.jsx(si,{htmlFor:"firstName",children:"Nome"}),E.jsx(ii,{type:"text",id:"firstName",name:"firstName",value:t.firstName,onChange:f,placeholder:"Inserisci il tuo nome",className:i.firstName?"border-red-500":"",disabled:n,autoComplete:"given-name"}),v("firstName")]}),E.jsxs("div",{className:"space-y-2",children:[E.jsx(si,{htmlFor:"lastName",children:"Cognome"}),E.jsx(ii,{type:"text",id:"lastName",name:"lastName",value:t.lastName,onChange:f,placeholder:"Inserisci il tuo cognome",className:i.lastName?"border-red-500":"",disabled:n,autoComplete:"family-name"}),v("lastName")]})]}),E.jsxs("div",{className:"space-y-2",children:[E.jsx(si,{htmlFor:"email",children:"Indirizzo Email"}),E.jsx(ii,{type:"email",id:"email",name:"email",value:t.email,onChange:f,placeholder:"Inserisci la tua email",className:i.email?"border-red-500":"",disabled:n,autoComplete:"email"}),v("email")]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[E.jsxs("div",{className:"space-y-2",children:[E.jsx(si,{htmlFor:"password",children:"Password"}),E.jsx(ii,{type:"password",id:"password",name:"password",value:t.password,onChange:f,placeholder:"Crea una password",className:i.password?"border-red-500":"",disabled:n,autoComplete:"new-password"}),v("password")]}),E.jsxs("div",{className:"space-y-2",children:[E.jsx(si,{htmlFor:"confirmPassword",children:"Conferma Password"}),E.jsx(ii,{type:"password",id:"confirmPassword",name:"confirmPassword",value:t.confirmPassword,onChange:f,placeholder:"Conferma la tua password",className:i.confirmPassword?"border-red-500":"",disabled:n,autoComplete:"new-password"}),v("confirmPassword")]})]}),l&&E.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-1",children:E.jsxs("div",{className:"flex",children:[E.jsx("div",{className:"flex-shrink-0",children:E.jsx("span",{className:"text-red-400",children:""})}),E.jsx("div",{className:"ml-3",children:E.jsx("p",{className:"text-[10px] text-red-800",children:l})})]})}),E.jsx(Ii,{type:"submit",size:"sm",className:"w-full",disabled:n,children:n?"Creazione Account...":"Crea Account"})]}),E.jsxs("div",{className:"text-center space-y-4",children:[E.jsxs("div",{className:"relative",children:[E.jsx("div",{className:"absolute inset-0 flex items-center",children:E.jsx("div",{className:"w-full border-t border-gray-300"})}),E.jsx("div",{className:"relative flex justify-center text-[10px]",children:E.jsx("span",{className:"px-1 bg-gray-50 text-gray-500",children:"Hai gi un account?"})})]}),E.jsx(er,{to:"/login",children:E.jsx(Ii,{variant:"outline",size:"sm",className:"w-full",children:"Accedi"})})]})]})})}function g$(){const[t,e]=T.useState(""),[n,r]=T.useState(!1),[i,s]=T.useState(!1),[a,l]=T.useState(""),{resetPassword:u}=_o(),{handleAsync:d}=ma("ForgotPasswordPage"),f=async p=>{if(p.preventDefault(),!t.trim()){l("Inserisci il tuo indirizzo email");return}if(!/\S+@\S+\.\S+/.test(t)){l("Inserisci un indirizzo email valido");return}r(!0),l(""),await d(async()=>{const m=await u(t);m.error?l(m.error||"Invio email di reset fallito"):s(!0)},{context:"Password Reset",fallbackMessage:"Invio email di reset fallito. Riprova.",onFinally:()=>r(!1)})};return i?E.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-2 sm:px-6 lg:px-8",children:E.jsxs("div",{className:"max-w-md w-full space-y-4",children:[E.jsxs("div",{className:"text-center",children:[E.jsx("h1",{className:"text-[10px] font-bold text-gray-900",children:"Controlla la Tua Email"}),E.jsxs("p",{className:"mt-2 text-[10px] text-gray-600",children:["Abbiamo inviato un link per il reset della password a ",t]})]}),E.jsx("div",{className:"bg-green-50 border border-green-200 rounded-md p-1",children:E.jsxs("div",{className:"flex",children:[E.jsx("div",{className:"flex-shrink-0",children:E.jsx("span",{className:"text-green-400 text-[10px]",children:""})}),E.jsx("div",{className:"ml-3",children:E.jsx("p",{className:"text-[10px] text-green-800",children:"Se non vedi l'email, controlla la cartella spam."})})]})}),E.jsx("div",{className:"text-center",children:E.jsx(er,{to:"/login",children:E.jsx(Ii,{size:"sm",className:"w-full",children:"Torna all'Accesso"})})})]})}):E.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-6 px-2 sm:px-6 lg:px-8",children:E.jsxs("div",{className:"max-w-md w-full space-y-4",children:[E.jsxs("div",{className:"text-center",children:[E.jsx("h1",{className:"text-[10px] font-bold text-gray-900",children:"Reset Password"}),E.jsx("p",{className:"mt-2 text-[10px] text-gray-600",children:"Inserisci la tua email per ricevere un link per il reset della password"})]}),E.jsxs("form",{onSubmit:f,className:"mt-4 space-y-4",children:[E.jsxs("div",{className:"space-y-2",children:[E.jsx(si,{htmlFor:"email",children:"Indirizzo Email"}),E.jsx(ii,{type:"email",id:"email",name:"email",value:t,onChange:p=>e(p.target.value),placeholder:"Inserisci la tua email",disabled:n,autoComplete:"email"})]}),a&&E.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-1",children:E.jsxs("div",{className:"flex",children:[E.jsx("div",{className:"flex-shrink-0",children:E.jsx("span",{className:"text-red-400",children:""})}),E.jsx("div",{className:"ml-3",children:E.jsx("p",{className:"text-[10px] text-red-800",children:a})})]})}),E.jsx(Ii,{type:"submit",size:"sm",className:"w-full",disabled:n,children:n?"Invio...":"Invia Link di Reset"})]}),E.jsx("div",{className:"text-center",children:E.jsx(er,{to:"/login",className:"text-[10px] text-navy-800 hover:text-navy-600",children:"Torna all'Accesso"})})]})})}const m$=`
  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }
`;if(typeof document<"u"){const t=document.createElement("style");t.textContent=m$,document.head.appendChild(t)}const v$=()=>{const{user:t,loading:e}=_o();return e?E.jsx("div",{className:"auth-loading",style:{padding:"20px",textAlign:"center"},children:E.jsxs("div",{className:"auth-loading__container",children:[E.jsx("div",{className:"auth-loading__spinner",style:{border:"4px solid #f3f3f3",borderTop:"4px solid #3498db",borderRadius:"50%",width:"40px",height:"40px",animation:"spin 2s linear infinite",margin:"0 auto 10px"}}),E.jsx("p",{children:"Checking authentication..."})]})}):t?E.jsx(Gw,{}):E.jsx(qw,{to:"/login",replace:!0})},y$=()=>{const t=Yt(),{confirmDialog:e={isOpen:!1,title:"",message:"",onConfirm:null,type:"danger"},conflictDialog:n={isOpen:!1,details:null},hideConfirmDialog:r=()=>{},hideConflictDialog:i=()=>{},showConflictDialog:s=()=>{},schedulingLoading:a={isScheduling:!1,isRescheduling:!1,isShunting:!1,isNavigating:!1,operationType:null,taskId:null},selectedWorkCenter:l="BOTH"}=t||{},{cleanup:u}=pf(),{resolveConflictByShunting:d,scheduleTaskFromSlot:f}=ai(),p=rr();return RI(),T.useEffect(()=>()=>{u()},[u]),E.jsxs("div",{className:"flex h-screen bg-background overflow-hidden",children:[E.jsx(oO,{}),E.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[E.jsx(lO,{}),E.jsx("main",{className:"flex-1 overflow-auto bg-background min-w-0",children:E.jsx("div",{className:"p-4",children:E.jsx(Gw,{})})})]}),E.jsx(O1,{position:"top-right",richColors:!0,closeButton:!0,duration:4e3}),e.isOpen&&(confirm(`${e.title}

${e.message}`)&&e.onConfirm?.(),r(),null),n.isOpen&&(()=>{const m=n.details?`Il lavoro "${n.details.draggedTask?.odp_number}" si sovrappone con "${n.details.conflictingTask?.odp_number}". Vuoi spostarlo a sinistra?`:"Conflitto rilevato. Vuoi spostare il task?",v=confirm(`${m}

OK = Sposta a Sinistra
Annulla = Sposta a Destra`);return v!==null?(async()=>{if(n.details){try{const b=n.details.schedulingParams?n.details.schedulingParams.originalConflict:n.details;console.log(" CONFLICT: Using resolveConflictByShunting",v?"left":"right");const _=await d(b,v?"left":"right",p);_.error?Di(_.error):ga("Task spostato con successo")}catch(b){console.error(" SHUNTING ERROR:",b),Di("Errore durante lo spostamento del task")}i()}})():i(),null})()]})};function b$(){return E.jsx(P1,{children:E.jsx(F1,{children:E.jsxs(VA,{children:[E.jsx(sn,{path:"/login",element:E.jsx(h$,{})}),E.jsx(sn,{path:"/signup",element:E.jsx(p$,{})}),E.jsx(sn,{path:"/forgot-password",element:E.jsx(g$,{})}),E.jsx(sn,{path:"/",element:E.jsx(v$,{}),children:E.jsxs(sn,{element:E.jsx(y$,{}),children:[E.jsx(sn,{index:!0,element:E.jsx(d$,{})}),E.jsx(sn,{path:"machinery",element:E.jsx(OI,{})}),E.jsx(sn,{path:"machinery/add",element:E.jsx(X0,{})}),E.jsx(sn,{path:"machinery/:id/edit",element:E.jsx(X0,{})}),E.jsx(sn,{path:"machinery/:machineId/calendar",element:E.jsx(UH,{})}),E.jsx(sn,{path:"phases",element:E.jsx(BH,{})}),E.jsx(sn,{path:"phases/add",element:E.jsx(tS,{})}),E.jsx(sn,{path:"phases/:id/edit",element:E.jsx(tS,{})}),E.jsx(sn,{path:"backlog",element:E.jsx(VH,{})}),E.jsx(sn,{path:"backlog/add",element:E.jsx(nS,{})}),E.jsx(sn,{path:"backlog/:id/edit",element:E.jsx(nS,{})}),E.jsx(sn,{path:"scheduler",element:E.jsx(AB,{})})]})}),E.jsx(sn,{path:"*",element:E.jsx(qw,{to:"/",replace:!0})})]})})})}const _$=new qR({defaultOptions:{queries:{staleTime:300*1e3,gcTime:600*1e3,retry:1,refetchOnWindowFocus:!1},mutations:{retry:1}}}),S$="/scheduler_demo/";Xk.createRoot(document.getElementById("root")).render(E.jsx(Q.StrictMode,{children:E.jsx(GR,{client:_$,children:E.jsx(hR,{basename:S$,children:E.jsx($1,{children:E.jsx(b$,{})})})})}));export{rM as A,Ii as B,sm as D,Q as R,x$ as S,ci as a,yg as b,E$ as c,A$ as d,k$ as e,C$ as f,ma as g,q0 as h,nc as i,E as j,vn as k,Xt as l,rr as m,lN as n,T$ as o,ai as p,ua as q,T as r,Ut as s,wn as t,Wi as u,Yt as v};

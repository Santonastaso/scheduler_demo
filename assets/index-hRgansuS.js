(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function zc(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function GE(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function r(){var i=!1;try{i=this instanceof r}catch{}return i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var gg={exports:{}},Vl={},mg={exports:{}},Ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I_;function KO(){if(I_)return Ge;I_=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;function g(L){return L===null||typeof L!="object"?null:(L=p&&L[p]||L["@@iterator"],typeof L=="function"?L:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,_={};function w(L,G,ne){this.props=L,this.context=G,this.refs=_,this.updater=ne||v}w.prototype.isReactComponent={},w.prototype.setState=function(L,G){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,G,"setState")},w.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function x(){}x.prototype=w.prototype;function C(L,G,ne){this.props=L,this.context=G,this.refs=_,this.updater=ne||v}var T=C.prototype=new x;T.constructor=C,y(T,w.prototype),T.isPureReactComponent=!0;var R=Array.isArray,D=Object.prototype.hasOwnProperty,O={current:null},M={key:!0,ref:!0,__self:!0,__source:!0};function I(L,G,ne){var le,ue={},ce=null,Ce=null;if(G!=null)for(le in G.ref!==void 0&&(Ce=G.ref),G.key!==void 0&&(ce=""+G.key),G)D.call(G,le)&&!M.hasOwnProperty(le)&&(ue[le]=G[le]);var se=arguments.length-2;if(se===1)ue.children=ne;else if(1<se){for(var Pe=Array(se),ze=0;ze<se;ze++)Pe[ze]=arguments[ze+2];ue.children=Pe}if(L&&L.defaultProps)for(le in se=L.defaultProps,se)ue[le]===void 0&&(ue[le]=se[le]);return{$$typeof:n,type:L,key:ce,ref:Ce,props:ue,_owner:O.current}}function F(L,G){return{$$typeof:n,type:L.type,key:G,ref:L.ref,props:L.props,_owner:L._owner}}function z(L){return typeof L=="object"&&L!==null&&L.$$typeof===n}function V(L){var G={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(ne){return G[ne]})}var ee=/\/+/g;function re(L,G){return typeof L=="object"&&L!==null&&L.key!=null?V(""+L.key):G.toString(36)}function fe(L,G,ne,le,ue){var ce=typeof L;(ce==="undefined"||ce==="boolean")&&(L=null);var Ce=!1;if(L===null)Ce=!0;else switch(ce){case"string":case"number":Ce=!0;break;case"object":switch(L.$$typeof){case n:case e:Ce=!0}}if(Ce)return Ce=L,ue=ue(Ce),L=le===""?"."+re(Ce,0):le,R(ue)?(ne="",L!=null&&(ne=L.replace(ee,"$&/")+"/"),fe(ue,G,ne,"",function(ze){return ze})):ue!=null&&(z(ue)&&(ue=F(ue,ne+(!ue.key||Ce&&Ce.key===ue.key?"":(""+ue.key).replace(ee,"$&/")+"/")+L)),G.push(ue)),1;if(Ce=0,le=le===""?".":le+":",R(L))for(var se=0;se<L.length;se++){ce=L[se];var Pe=le+re(ce,se);Ce+=fe(ce,G,ne,Pe,ue)}else if(Pe=g(L),typeof Pe=="function")for(L=Pe.call(L),se=0;!(ce=L.next()).done;)ce=ce.value,Pe=le+re(ce,se++),Ce+=fe(ce,G,ne,Pe,ue);else if(ce==="object")throw G=String(L),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return Ce}function pe(L,G,ne){if(L==null)return L;var le=[],ue=0;return fe(L,le,"","",function(ce){return G.call(ne,ce,ue++)}),le}function ie(L){if(L._status===-1){var G=L._result;G=G(),G.then(function(ne){(L._status===0||L._status===-1)&&(L._status=1,L._result=ne)},function(ne){(L._status===0||L._status===-1)&&(L._status=2,L._result=ne)}),L._status===-1&&(L._status=0,L._result=G)}if(L._status===1)return L._result.default;throw L._result}var ae={current:null},Q={transition:null},q={ReactCurrentDispatcher:ae,ReactCurrentBatchConfig:Q,ReactCurrentOwner:O};function Y(){throw Error("act(...) is not supported in production builds of React.")}return Ge.Children={map:pe,forEach:function(L,G,ne){pe(L,function(){G.apply(this,arguments)},ne)},count:function(L){var G=0;return pe(L,function(){G++}),G},toArray:function(L){return pe(L,function(G){return G})||[]},only:function(L){if(!z(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Ge.Component=w,Ge.Fragment=t,Ge.Profiler=i,Ge.PureComponent=C,Ge.StrictMode=r,Ge.Suspense=c,Ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q,Ge.act=Y,Ge.cloneElement=function(L,G,ne){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var le=y({},L.props),ue=L.key,ce=L.ref,Ce=L._owner;if(G!=null){if(G.ref!==void 0&&(ce=G.ref,Ce=O.current),G.key!==void 0&&(ue=""+G.key),L.type&&L.type.defaultProps)var se=L.type.defaultProps;for(Pe in G)D.call(G,Pe)&&!M.hasOwnProperty(Pe)&&(le[Pe]=G[Pe]===void 0&&se!==void 0?se[Pe]:G[Pe])}var Pe=arguments.length-2;if(Pe===1)le.children=ne;else if(1<Pe){se=Array(Pe);for(var ze=0;ze<Pe;ze++)se[ze]=arguments[ze+2];le.children=se}return{$$typeof:n,type:L.type,key:ue,ref:ce,props:le,_owner:Ce}},Ge.createContext=function(L){return L={$$typeof:o,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:s,_context:L},L.Consumer=L},Ge.createElement=I,Ge.createFactory=function(L){var G=I.bind(null,L);return G.type=L,G},Ge.createRef=function(){return{current:null}},Ge.forwardRef=function(L){return{$$typeof:l,render:L}},Ge.isValidElement=z,Ge.lazy=function(L){return{$$typeof:h,_payload:{_status:-1,_result:L},_init:ie}},Ge.memo=function(L,G){return{$$typeof:d,type:L,compare:G===void 0?null:G}},Ge.startTransition=function(L){var G=Q.transition;Q.transition={};try{L()}finally{Q.transition=G}},Ge.unstable_act=Y,Ge.useCallback=function(L,G){return ae.current.useCallback(L,G)},Ge.useContext=function(L){return ae.current.useContext(L)},Ge.useDebugValue=function(){},Ge.useDeferredValue=function(L){return ae.current.useDeferredValue(L)},Ge.useEffect=function(L,G){return ae.current.useEffect(L,G)},Ge.useId=function(){return ae.current.useId()},Ge.useImperativeHandle=function(L,G,ne){return ae.current.useImperativeHandle(L,G,ne)},Ge.useInsertionEffect=function(L,G){return ae.current.useInsertionEffect(L,G)},Ge.useLayoutEffect=function(L,G){return ae.current.useLayoutEffect(L,G)},Ge.useMemo=function(L,G){return ae.current.useMemo(L,G)},Ge.useReducer=function(L,G,ne){return ae.current.useReducer(L,G,ne)},Ge.useRef=function(L){return ae.current.useRef(L)},Ge.useState=function(L){return ae.current.useState(L)},Ge.useSyncExternalStore=function(L,G,ne){return ae.current.useSyncExternalStore(L,G,ne)},Ge.useTransition=function(){return ae.current.useTransition()},Ge.version="18.3.1",Ge}var M_;function Sv(){return M_||(M_=1,mg.exports=KO()),mg.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N_;function QO(){if(N_)return Vl;N_=1;var n=Sv(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(l,c,d){var h,p={},g=null,v=null;d!==void 0&&(g=""+d),c.key!==void 0&&(g=""+c.key),c.ref!==void 0&&(v=c.ref);for(h in c)r.call(c,h)&&!s.hasOwnProperty(h)&&(p[h]=c[h]);if(l&&l.defaultProps)for(h in c=l.defaultProps,c)p[h]===void 0&&(p[h]=c[h]);return{$$typeof:e,type:l,key:g,ref:v,props:p,_owner:i.current}}return Vl.Fragment=t,Vl.jsx=o,Vl.jsxs=o,Vl}var P_;function XO(){return P_||(P_=1,gg.exports=QO()),gg.exports}var E=XO(),k=Sv();const K=zc(k);var cd={},vg={exports:{}},tr={},yg={exports:{}},bg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j_;function ZO(){return j_||(j_=1,(function(n){function e(Q,q){var Y=Q.length;Q.push(q);e:for(;0<Y;){var L=Y-1>>>1,G=Q[L];if(0<i(G,q))Q[L]=q,Q[Y]=G,Y=L;else break e}}function t(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var q=Q[0],Y=Q.pop();if(Y!==q){Q[0]=Y;e:for(var L=0,G=Q.length,ne=G>>>1;L<ne;){var le=2*(L+1)-1,ue=Q[le],ce=le+1,Ce=Q[ce];if(0>i(ue,Y))ce<G&&0>i(Ce,ue)?(Q[L]=Ce,Q[ce]=Y,L=ce):(Q[L]=ue,Q[le]=Y,L=le);else if(ce<G&&0>i(Ce,Y))Q[L]=Ce,Q[ce]=Y,L=ce;else break e}}return q}function i(Q,q){var Y=Q.sortIndex-q.sortIndex;return Y!==0?Y:Q.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();n.unstable_now=function(){return o.now()-l}}var c=[],d=[],h=1,p=null,g=3,v=!1,y=!1,_=!1,w=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(Q){for(var q=t(d);q!==null;){if(q.callback===null)r(d);else if(q.startTime<=Q)r(d),q.sortIndex=q.expirationTime,e(c,q);else break;q=t(d)}}function R(Q){if(_=!1,T(Q),!y)if(t(c)!==null)y=!0,ie(D);else{var q=t(d);q!==null&&ae(R,q.startTime-Q)}}function D(Q,q){y=!1,_&&(_=!1,x(I),I=-1),v=!0;var Y=g;try{for(T(q),p=t(c);p!==null&&(!(p.expirationTime>q)||Q&&!V());){var L=p.callback;if(typeof L=="function"){p.callback=null,g=p.priorityLevel;var G=L(p.expirationTime<=q);q=n.unstable_now(),typeof G=="function"?p.callback=G:p===t(c)&&r(c),T(q)}else r(c);p=t(c)}if(p!==null)var ne=!0;else{var le=t(d);le!==null&&ae(R,le.startTime-q),ne=!1}return ne}finally{p=null,g=Y,v=!1}}var O=!1,M=null,I=-1,F=5,z=-1;function V(){return!(n.unstable_now()-z<F)}function ee(){if(M!==null){var Q=n.unstable_now();z=Q;var q=!0;try{q=M(!0,Q)}finally{q?re():(O=!1,M=null)}}else O=!1}var re;if(typeof C=="function")re=function(){C(ee)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,pe=fe.port2;fe.port1.onmessage=ee,re=function(){pe.postMessage(null)}}else re=function(){w(ee,0)};function ie(Q){M=Q,O||(O=!0,re())}function ae(Q,q){I=w(function(){Q(n.unstable_now())},q)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Q){Q.callback=null},n.unstable_continueExecution=function(){y||v||(y=!0,ie(D))},n.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<Q?Math.floor(1e3/Q):5},n.unstable_getCurrentPriorityLevel=function(){return g},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(Q){switch(g){case 1:case 2:case 3:var q=3;break;default:q=g}var Y=g;g=q;try{return Q()}finally{g=Y}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Q,q){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var Y=g;g=Q;try{return q()}finally{g=Y}},n.unstable_scheduleCallback=function(Q,q,Y){var L=n.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?L+Y:L):Y=L,Q){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=Y+G,Q={id:h++,callback:q,priorityLevel:Q,startTime:Y,expirationTime:G,sortIndex:-1},Y>L?(Q.sortIndex=Y,e(d,Q),t(c)===null&&Q===t(d)&&(_?(x(I),I=-1):_=!0,ae(R,Y-L))):(Q.sortIndex=G,e(c,Q),y||v||(y=!0,ie(D))),Q},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(Q){var q=g;return function(){var Y=g;g=q;try{return Q.apply(this,arguments)}finally{g=Y}}}})(bg)),bg}var L_;function JO(){return L_||(L_=1,yg.exports=ZO()),yg.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F_;function e1(){if(F_)return tr;F_=1;var n=Sv(),e=JO();function t(a){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+a,f=1;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f]);return"Minified React error #"+a+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(a,u){o(a,u),o(a+"Capture",u)}function o(a,u){for(i[a]=u,a=0;a<u.length;a++)r.add(u[a])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},p={};function g(a){return c.call(p,a)?!0:c.call(h,a)?!1:d.test(a)?p[a]=!0:(h[a]=!0,!1)}function v(a,u,f,m){if(f!==null&&f.type===0)return!1;switch(typeof u){case"function":case"symbol":return!0;case"boolean":return m?!1:f!==null?!f.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function y(a,u,f,m){if(u===null||typeof u>"u"||v(a,u,f,m))return!0;if(m)return!1;if(f!==null)switch(f.type){case 3:return!u;case 4:return u===!1;case 5:return isNaN(u);case 6:return isNaN(u)||1>u}return!1}function _(a,u,f,m,b,S,A){this.acceptsBooleans=u===2||u===3||u===4,this.attributeName=m,this.attributeNamespace=b,this.mustUseProperty=f,this.propertyName=a,this.type=u,this.sanitizeURL=S,this.removeEmptyString=A}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){w[a]=new _(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var u=a[0];w[u]=new _(u,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){w[a]=new _(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){w[a]=new _(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){w[a]=new _(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){w[a]=new _(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){w[a]=new _(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){w[a]=new _(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){w[a]=new _(a,5,!1,a.toLowerCase(),null,!1,!1)});var x=/[\-:]([a-z])/g;function C(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var u=a.replace(x,C);w[u]=new _(u,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var u=a.replace(x,C);w[u]=new _(u,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var u=a.replace(x,C);w[u]=new _(u,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){w[a]=new _(a,1,!1,a.toLowerCase(),null,!1,!1)}),w.xlinkHref=new _("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){w[a]=new _(a,1,!1,a.toLowerCase(),null,!0,!0)});function T(a,u,f,m){var b=w.hasOwnProperty(u)?w[u]:null;(b!==null?b.type!==0:m||!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(y(u,f,b,m)&&(f=null),m||b===null?g(u)&&(f===null?a.removeAttribute(u):a.setAttribute(u,""+f)):b.mustUseProperty?a[b.propertyName]=f===null?b.type===3?!1:"":f:(u=b.attributeName,m=b.attributeNamespace,f===null?a.removeAttribute(u):(b=b.type,f=b===3||b===4&&f===!0?"":""+f,m?a.setAttributeNS(m,u,f):a.setAttribute(u,f))))}var R=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,D=Symbol.for("react.element"),O=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),F=Symbol.for("react.profiler"),z=Symbol.for("react.provider"),V=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),re=Symbol.for("react.suspense"),fe=Symbol.for("react.suspense_list"),pe=Symbol.for("react.memo"),ie=Symbol.for("react.lazy"),ae=Symbol.for("react.offscreen"),Q=Symbol.iterator;function q(a){return a===null||typeof a!="object"?null:(a=Q&&a[Q]||a["@@iterator"],typeof a=="function"?a:null)}var Y=Object.assign,L;function G(a){if(L===void 0)try{throw Error()}catch(f){var u=f.stack.trim().match(/\n( *(at )?)/);L=u&&u[1]||""}return`
`+L+a}var ne=!1;function le(a,u){if(!a||ne)return"";ne=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(W){var m=W}Reflect.construct(a,[],u)}else{try{u.call()}catch(W){m=W}a.call(u.prototype)}else{try{throw Error()}catch(W){m=W}a()}}catch(W){if(W&&m&&typeof W.stack=="string"){for(var b=W.stack.split(`
`),S=m.stack.split(`
`),A=b.length-1,N=S.length-1;1<=A&&0<=N&&b[A]!==S[N];)N--;for(;1<=A&&0<=N;A--,N--)if(b[A]!==S[N]){if(A!==1||N!==1)do if(A--,N--,0>N||b[A]!==S[N]){var j=`
`+b[A].replace(" at new "," at ");return a.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",a.displayName)),j}while(1<=A&&0<=N);break}}}finally{ne=!1,Error.prepareStackTrace=f}return(a=a?a.displayName||a.name:"")?G(a):""}function ue(a){switch(a.tag){case 5:return G(a.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return a=le(a.type,!1),a;case 11:return a=le(a.type.render,!1),a;case 1:return a=le(a.type,!0),a;default:return""}}function ce(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case M:return"Fragment";case O:return"Portal";case F:return"Profiler";case I:return"StrictMode";case re:return"Suspense";case fe:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case V:return(a.displayName||"Context")+".Consumer";case z:return(a._context.displayName||"Context")+".Provider";case ee:var u=a.render;return a=a.displayName,a||(a=u.displayName||u.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case pe:return u=a.displayName||null,u!==null?u:ce(a.type)||"Memo";case ie:u=a._payload,a=a._init;try{return ce(a(u))}catch{}}return null}function Ce(a){var u=a.type;switch(a.tag){case 24:return"Cache";case 9:return(u.displayName||"Context")+".Consumer";case 10:return(u._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=u.render,a=a.displayName||a.name||"",u.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return u;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ce(u);case 8:return u===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u}return null}function se(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Pe(a){var u=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function ze(a){var u=Pe(a)?"checked":"value",f=Object.getOwnPropertyDescriptor(a.constructor.prototype,u),m=""+a[u];if(!a.hasOwnProperty(u)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var b=f.get,S=f.set;return Object.defineProperty(a,u,{configurable:!0,get:function(){return b.call(this)},set:function(A){m=""+A,S.call(this,A)}}),Object.defineProperty(a,u,{enumerable:f.enumerable}),{getValue:function(){return m},setValue:function(A){m=""+A},stopTracking:function(){a._valueTracker=null,delete a[u]}}}}function Wt(a){a._valueTracker||(a._valueTracker=ze(a))}function Gt(a){if(!a)return!1;var u=a._valueTracker;if(!u)return!0;var f=u.getValue(),m="";return a&&(m=Pe(a)?a.checked?"true":"false":a.value),a=m,a!==f?(u.setValue(a),!0):!1}function qn(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function ge(a,u){var f=u.checked;return Y({},u,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:f??a._wrapperState.initialChecked})}function Fe(a,u){var f=u.defaultValue==null?"":u.defaultValue,m=u.checked!=null?u.checked:u.defaultChecked;f=se(u.value!=null?u.value:f),a._wrapperState={initialChecked:m,initialValue:f,controlled:u.type==="checkbox"||u.type==="radio"?u.checked!=null:u.value!=null}}function et(a,u){u=u.checked,u!=null&&T(a,"checked",u,!1)}function xt(a,u){et(a,u);var f=se(u.value),m=u.type;if(f!=null)m==="number"?(f===0&&a.value===""||a.value!=f)&&(a.value=""+f):a.value!==""+f&&(a.value=""+f);else if(m==="submit"||m==="reset"){a.removeAttribute("value");return}u.hasOwnProperty("value")?qe(a,u.type,f):u.hasOwnProperty("defaultValue")&&qe(a,u.type,se(u.defaultValue)),u.checked==null&&u.defaultChecked!=null&&(a.defaultChecked=!!u.defaultChecked)}function on(a,u,f){if(u.hasOwnProperty("value")||u.hasOwnProperty("defaultValue")){var m=u.type;if(!(m!=="submit"&&m!=="reset"||u.value!==void 0&&u.value!==null))return;u=""+a._wrapperState.initialValue,f||u===a.value||(a.value=u),a.defaultValue=u}f=a.name,f!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,f!==""&&(a.name=f)}function qe(a,u,f){(u!=="number"||qn(a.ownerDocument)!==a)&&(f==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+f&&(a.defaultValue=""+f))}var Ee=Array.isArray;function dt(a,u,f,m){if(a=a.options,u){u={};for(var b=0;b<f.length;b++)u["$"+f[b]]=!0;for(f=0;f<a.length;f++)b=u.hasOwnProperty("$"+a[f].value),a[f].selected!==b&&(a[f].selected=b),b&&m&&(a[f].defaultSelected=!0)}else{for(f=""+se(f),u=null,b=0;b<a.length;b++){if(a[b].value===f){a[b].selected=!0,m&&(a[b].defaultSelected=!0);return}u!==null||a[b].disabled||(u=a[b])}u!==null&&(u.selected=!0)}}function Ue(a,u){if(u.dangerouslySetInnerHTML!=null)throw Error(t(91));return Y({},u,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function X(a,u){var f=u.value;if(f==null){if(f=u.children,u=u.defaultValue,f!=null){if(u!=null)throw Error(t(92));if(Ee(f)){if(1<f.length)throw Error(t(93));f=f[0]}u=f}u==null&&(u=""),f=u}a._wrapperState={initialValue:se(f)}}function ye(a,u){var f=se(u.value),m=se(u.defaultValue);f!=null&&(f=""+f,f!==a.value&&(a.value=f),u.defaultValue==null&&a.defaultValue!==f&&(a.defaultValue=f)),m!=null&&(a.defaultValue=""+m)}function Be(a){var u=a.textContent;u===a._wrapperState.initialValue&&u!==""&&u!==null&&(a.value=u)}function je(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function be(a,u){return a==null||a==="http://www.w3.org/1999/xhtml"?je(u):a==="http://www.w3.org/2000/svg"&&u==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var we,Ie=(function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(u,f,m,b){MSApp.execUnsafeLocalFunction(function(){return a(u,f,m,b)})}:a})(function(a,u){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=u;else{for(we=we||document.createElement("div"),we.innerHTML="<svg>"+u.valueOf().toString()+"</svg>",u=we.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;u.firstChild;)a.appendChild(u.firstChild)}});function $e(a,u){if(u){var f=a.firstChild;if(f&&f===a.lastChild&&f.nodeType===3){f.nodeValue=u;return}}a.textContent=u}var We={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ot=["Webkit","ms","Moz","O"];Object.keys(We).forEach(function(a){ot.forEach(function(u){u=u+a.charAt(0).toUpperCase()+a.substring(1),We[u]=We[a]})});function ft(a,u,f){return u==null||typeof u=="boolean"||u===""?"":f||typeof u!="number"||u===0||We.hasOwnProperty(a)&&We[a]?(""+u).trim():u+"px"}function wr(a,u){a=a.style;for(var f in u)if(u.hasOwnProperty(f)){var m=f.indexOf("--")===0,b=ft(f,u[f],m);f==="float"&&(f="cssFloat"),m?a.setProperty(f,b):a[f]=b}}var yt=Y({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function at(a,u){if(u){if(yt[a]&&(u.children!=null||u.dangerouslySetInnerHTML!=null))throw Error(t(137,a));if(u.dangerouslySetInnerHTML!=null){if(u.children!=null)throw Error(t(60));if(typeof u.dangerouslySetInnerHTML!="object"||!("__html"in u.dangerouslySetInnerHTML))throw Error(t(61))}if(u.style!=null&&typeof u.style!="object")throw Error(t(62))}}function Yt(a,u){if(a.indexOf("-")===-1)return typeof u.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ve=null;function Ke(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Gn=null,En=null,tt=null;function Kt(a){if(a=Rl(a)){if(typeof Gn!="function")throw Error(t(280));var u=a.stateNode;u&&(u=Eu(u),Gn(a.stateNode,a.type,u))}}function de(a){En?tt?tt.push(a):tt=[a]:En=a}function Le(){if(En){var a=En,u=tt;if(tt=En=null,Kt(a),u)for(a=0;a<u.length;a++)Kt(u[a])}}function Qe(a,u){return a(u)}function nt(){}var Vt=!1;function ht(a,u,f){if(Vt)return a(u,f);Vt=!0;try{return Qe(a,u,f)}finally{Vt=!1,(En!==null||tt!==null)&&(nt(),Le())}}function Me(a,u){var f=a.stateNode;if(f===null)return null;var m=Eu(f);if(m===null)return null;f=m[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(a=a.type,m=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!m;break e;default:a=!1}if(a)return null;if(f&&typeof f!="function")throw Error(t(231,u,typeof f));return f}var Qt=!1;if(l)try{var bt={};Object.defineProperty(bt,"passive",{get:function(){Qt=!0}}),window.addEventListener("test",bt,bt),window.removeEventListener("test",bt,bt)}catch{Qt=!1}function jt(a,u,f,m,b,S,A,N,j){var W=Array.prototype.slice.call(arguments,3);try{u.apply(f,W)}catch(J){this.onError(J)}}var Yn=!1,vn=null,Kn=!1,Ci=null,dl={onError:function(a){Yn=!0,vn=a}};function rR(a,u,f,m,b,S,A,N,j){Yn=!1,vn=null,jt.apply(dl,arguments)}function iR(a,u,f,m,b,S,A,N,j){if(rR.apply(this,arguments),Yn){if(Yn){var W=vn;Yn=!1,vn=null}else throw Error(t(198));Kn||(Kn=!0,Ci=W)}}function Qs(a){var u=a,f=a;if(a.alternate)for(;u.return;)u=u.return;else{a=u;do u=a,(u.flags&4098)!==0&&(f=u.return),a=u.return;while(a)}return u.tag===3?f:null}function tb(a){if(a.tag===13){var u=a.memoizedState;if(u===null&&(a=a.alternate,a!==null&&(u=a.memoizedState)),u!==null)return u.dehydrated}return null}function nb(a){if(Qs(a)!==a)throw Error(t(188))}function sR(a){var u=a.alternate;if(!u){if(u=Qs(a),u===null)throw Error(t(188));return u!==a?null:a}for(var f=a,m=u;;){var b=f.return;if(b===null)break;var S=b.alternate;if(S===null){if(m=b.return,m!==null){f=m;continue}break}if(b.child===S.child){for(S=b.child;S;){if(S===f)return nb(b),a;if(S===m)return nb(b),u;S=S.sibling}throw Error(t(188))}if(f.return!==m.return)f=b,m=S;else{for(var A=!1,N=b.child;N;){if(N===f){A=!0,f=b,m=S;break}if(N===m){A=!0,m=b,f=S;break}N=N.sibling}if(!A){for(N=S.child;N;){if(N===f){A=!0,f=S,m=b;break}if(N===m){A=!0,m=S,f=b;break}N=N.sibling}if(!A)throw Error(t(189))}}if(f.alternate!==m)throw Error(t(190))}if(f.tag!==3)throw Error(t(188));return f.stateNode.current===f?a:u}function rb(a){return a=sR(a),a!==null?ib(a):null}function ib(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var u=ib(a);if(u!==null)return u;a=a.sibling}return null}var sb=e.unstable_scheduleCallback,ob=e.unstable_cancelCallback,oR=e.unstable_shouldYield,aR=e.unstable_requestPaint,Xt=e.unstable_now,lR=e.unstable_getCurrentPriorityLevel,Pf=e.unstable_ImmediatePriority,ab=e.unstable_UserBlockingPriority,iu=e.unstable_NormalPriority,cR=e.unstable_LowPriority,lb=e.unstable_IdlePriority,su=null,si=null;function uR(a){if(si&&typeof si.onCommitFiberRoot=="function")try{si.onCommitFiberRoot(su,a,void 0,(a.current.flags&128)===128)}catch{}}var Br=Math.clz32?Math.clz32:fR,dR=Math.log,hR=Math.LN2;function fR(a){return a>>>=0,a===0?32:31-(dR(a)/hR|0)|0}var ou=64,au=4194304;function hl(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function lu(a,u){var f=a.pendingLanes;if(f===0)return 0;var m=0,b=a.suspendedLanes,S=a.pingedLanes,A=f&268435455;if(A!==0){var N=A&~b;N!==0?m=hl(N):(S&=A,S!==0&&(m=hl(S)))}else A=f&~b,A!==0?m=hl(A):S!==0&&(m=hl(S));if(m===0)return 0;if(u!==0&&u!==m&&(u&b)===0&&(b=m&-m,S=u&-u,b>=S||b===16&&(S&4194240)!==0))return u;if((m&4)!==0&&(m|=f&16),u=a.entangledLanes,u!==0)for(a=a.entanglements,u&=m;0<u;)f=31-Br(u),b=1<<f,m|=a[f],u&=~b;return m}function pR(a,u){switch(a){case 1:case 2:case 4:return u+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gR(a,u){for(var f=a.suspendedLanes,m=a.pingedLanes,b=a.expirationTimes,S=a.pendingLanes;0<S;){var A=31-Br(S),N=1<<A,j=b[A];j===-1?((N&f)===0||(N&m)!==0)&&(b[A]=pR(N,u)):j<=u&&(a.expiredLanes|=N),S&=~N}}function jf(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function cb(){var a=ou;return ou<<=1,(ou&4194240)===0&&(ou=64),a}function Lf(a){for(var u=[],f=0;31>f;f++)u.push(a);return u}function fl(a,u,f){a.pendingLanes|=u,u!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,u=31-Br(u),a[u]=f}function mR(a,u){var f=a.pendingLanes&~u;a.pendingLanes=u,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=u,a.mutableReadLanes&=u,a.entangledLanes&=u,u=a.entanglements;var m=a.eventTimes;for(a=a.expirationTimes;0<f;){var b=31-Br(f),S=1<<b;u[b]=0,m[b]=-1,a[b]=-1,f&=~S}}function Ff(a,u){var f=a.entangledLanes|=u;for(a=a.entanglements;f;){var m=31-Br(f),b=1<<m;b&u|a[m]&u&&(a[m]|=u),f&=~b}}var pt=0;function ub(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var db,Uf,hb,fb,pb,Bf=!1,cu=[],os=null,as=null,ls=null,pl=new Map,gl=new Map,cs=[],vR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gb(a,u){switch(a){case"focusin":case"focusout":os=null;break;case"dragenter":case"dragleave":as=null;break;case"mouseover":case"mouseout":ls=null;break;case"pointerover":case"pointerout":pl.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":gl.delete(u.pointerId)}}function ml(a,u,f,m,b,S){return a===null||a.nativeEvent!==S?(a={blockedOn:u,domEventName:f,eventSystemFlags:m,nativeEvent:S,targetContainers:[b]},u!==null&&(u=Rl(u),u!==null&&Uf(u)),a):(a.eventSystemFlags|=m,u=a.targetContainers,b!==null&&u.indexOf(b)===-1&&u.push(b),a)}function yR(a,u,f,m,b){switch(u){case"focusin":return os=ml(os,a,u,f,m,b),!0;case"dragenter":return as=ml(as,a,u,f,m,b),!0;case"mouseover":return ls=ml(ls,a,u,f,m,b),!0;case"pointerover":var S=b.pointerId;return pl.set(S,ml(pl.get(S)||null,a,u,f,m,b)),!0;case"gotpointercapture":return S=b.pointerId,gl.set(S,ml(gl.get(S)||null,a,u,f,m,b)),!0}return!1}function mb(a){var u=Xs(a.target);if(u!==null){var f=Qs(u);if(f!==null){if(u=f.tag,u===13){if(u=tb(f),u!==null){a.blockedOn=u,pb(a.priority,function(){hb(f)});return}}else if(u===3&&f.stateNode.current.memoizedState.isDehydrated){a.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}a.blockedOn=null}function uu(a){if(a.blockedOn!==null)return!1;for(var u=a.targetContainers;0<u.length;){var f=zf(a.domEventName,a.eventSystemFlags,u[0],a.nativeEvent);if(f===null){f=a.nativeEvent;var m=new f.constructor(f.type,f);Ve=m,f.target.dispatchEvent(m),Ve=null}else return u=Rl(f),u!==null&&Uf(u),a.blockedOn=f,!1;u.shift()}return!0}function vb(a,u,f){uu(a)&&f.delete(u)}function bR(){Bf=!1,os!==null&&uu(os)&&(os=null),as!==null&&uu(as)&&(as=null),ls!==null&&uu(ls)&&(ls=null),pl.forEach(vb),gl.forEach(vb)}function vl(a,u){a.blockedOn===u&&(a.blockedOn=null,Bf||(Bf=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,bR)))}function yl(a){function u(b){return vl(b,a)}if(0<cu.length){vl(cu[0],a);for(var f=1;f<cu.length;f++){var m=cu[f];m.blockedOn===a&&(m.blockedOn=null)}}for(os!==null&&vl(os,a),as!==null&&vl(as,a),ls!==null&&vl(ls,a),pl.forEach(u),gl.forEach(u),f=0;f<cs.length;f++)m=cs[f],m.blockedOn===a&&(m.blockedOn=null);for(;0<cs.length&&(f=cs[0],f.blockedOn===null);)mb(f),f.blockedOn===null&&cs.shift()}var Qo=R.ReactCurrentBatchConfig,du=!0;function _R(a,u,f,m){var b=pt,S=Qo.transition;Qo.transition=null;try{pt=1,Hf(a,u,f,m)}finally{pt=b,Qo.transition=S}}function wR(a,u,f,m){var b=pt,S=Qo.transition;Qo.transition=null;try{pt=4,Hf(a,u,f,m)}finally{pt=b,Qo.transition=S}}function Hf(a,u,f,m){if(du){var b=zf(a,u,f,m);if(b===null)sp(a,u,m,hu,f),gb(a,m);else if(yR(b,a,u,f,m))m.stopPropagation();else if(gb(a,m),u&4&&-1<vR.indexOf(a)){for(;b!==null;){var S=Rl(b);if(S!==null&&db(S),S=zf(a,u,f,m),S===null&&sp(a,u,m,hu,f),S===b)break;b=S}b!==null&&m.stopPropagation()}else sp(a,u,m,null,f)}}var hu=null;function zf(a,u,f,m){if(hu=null,a=Ke(m),a=Xs(a),a!==null)if(u=Qs(a),u===null)a=null;else if(f=u.tag,f===13){if(a=tb(u),a!==null)return a;a=null}else if(f===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;a=null}else u!==a&&(a=null);return hu=a,null}function yb(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lR()){case Pf:return 1;case ab:return 4;case iu:case cR:return 16;case lb:return 536870912;default:return 16}default:return 16}}var us=null,$f=null,fu=null;function bb(){if(fu)return fu;var a,u=$f,f=u.length,m,b="value"in us?us.value:us.textContent,S=b.length;for(a=0;a<f&&u[a]===b[a];a++);var A=f-a;for(m=1;m<=A&&u[f-m]===b[S-m];m++);return fu=b.slice(a,1<m?1-m:void 0)}function pu(a){var u=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&u===13&&(a=13)):a=u,a===10&&(a=13),32<=a||a===13?a:0}function gu(){return!0}function _b(){return!1}function dr(a){function u(f,m,b,S,A){this._reactName=f,this._targetInst=b,this.type=m,this.nativeEvent=S,this.target=A,this.currentTarget=null;for(var N in a)a.hasOwnProperty(N)&&(f=a[N],this[N]=f?f(S):S[N]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?gu:_b,this.isPropagationStopped=_b,this}return Y(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=gu)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=gu)},persist:function(){},isPersistent:gu}),u}var Xo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wf=dr(Xo),bl=Y({},Xo,{view:0,detail:0}),SR=dr(bl),Vf,qf,_l,mu=Y({},bl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yf,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==_l&&(_l&&a.type==="mousemove"?(Vf=a.screenX-_l.screenX,qf=a.screenY-_l.screenY):qf=Vf=0,_l=a),Vf)},movementY:function(a){return"movementY"in a?a.movementY:qf}}),wb=dr(mu),xR=Y({},mu,{dataTransfer:0}),ER=dr(xR),CR=Y({},bl,{relatedTarget:0}),Gf=dr(CR),TR=Y({},Xo,{animationName:0,elapsedTime:0,pseudoElement:0}),kR=dr(TR),AR=Y({},Xo,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),DR=dr(AR),RR=Y({},Xo,{data:0}),Sb=dr(RR),OR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},IR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},MR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function NR(a){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(a):(a=MR[a])?!!u[a]:!1}function Yf(){return NR}var PR=Y({},bl,{key:function(a){if(a.key){var u=OR[a.key]||a.key;if(u!=="Unidentified")return u}return a.type==="keypress"?(a=pu(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?IR[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yf,charCode:function(a){return a.type==="keypress"?pu(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?pu(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),jR=dr(PR),LR=Y({},mu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xb=dr(LR),FR=Y({},bl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yf}),UR=dr(FR),BR=Y({},Xo,{propertyName:0,elapsedTime:0,pseudoElement:0}),HR=dr(BR),zR=Y({},mu,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),$R=dr(zR),WR=[9,13,27,32],Kf=l&&"CompositionEvent"in window,wl=null;l&&"documentMode"in document&&(wl=document.documentMode);var VR=l&&"TextEvent"in window&&!wl,Eb=l&&(!Kf||wl&&8<wl&&11>=wl),Cb=" ",Tb=!1;function kb(a,u){switch(a){case"keyup":return WR.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ab(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Zo=!1;function qR(a,u){switch(a){case"compositionend":return Ab(u);case"keypress":return u.which!==32?null:(Tb=!0,Cb);case"textInput":return a=u.data,a===Cb&&Tb?null:a;default:return null}}function GR(a,u){if(Zo)return a==="compositionend"||!Kf&&kb(a,u)?(a=bb(),fu=$f=us=null,Zo=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return Eb&&u.locale!=="ko"?null:u.data;default:return null}}var YR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Db(a){var u=a&&a.nodeName&&a.nodeName.toLowerCase();return u==="input"?!!YR[a.type]:u==="textarea"}function Rb(a,u,f,m){de(m),u=wu(u,"onChange"),0<u.length&&(f=new Wf("onChange","change",null,f,m),a.push({event:f,listeners:u}))}var Sl=null,xl=null;function KR(a){Yb(a,0)}function vu(a){var u=ra(a);if(Gt(u))return a}function QR(a,u){if(a==="change")return u}var Ob=!1;if(l){var Qf;if(l){var Xf="oninput"in document;if(!Xf){var Ib=document.createElement("div");Ib.setAttribute("oninput","return;"),Xf=typeof Ib.oninput=="function"}Qf=Xf}else Qf=!1;Ob=Qf&&(!document.documentMode||9<document.documentMode)}function Mb(){Sl&&(Sl.detachEvent("onpropertychange",Nb),xl=Sl=null)}function Nb(a){if(a.propertyName==="value"&&vu(xl)){var u=[];Rb(u,xl,a,Ke(a)),ht(KR,u)}}function XR(a,u,f){a==="focusin"?(Mb(),Sl=u,xl=f,Sl.attachEvent("onpropertychange",Nb)):a==="focusout"&&Mb()}function ZR(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return vu(xl)}function JR(a,u){if(a==="click")return vu(u)}function eO(a,u){if(a==="input"||a==="change")return vu(u)}function tO(a,u){return a===u&&(a!==0||1/a===1/u)||a!==a&&u!==u}var Hr=typeof Object.is=="function"?Object.is:tO;function El(a,u){if(Hr(a,u))return!0;if(typeof a!="object"||a===null||typeof u!="object"||u===null)return!1;var f=Object.keys(a),m=Object.keys(u);if(f.length!==m.length)return!1;for(m=0;m<f.length;m++){var b=f[m];if(!c.call(u,b)||!Hr(a[b],u[b]))return!1}return!0}function Pb(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function jb(a,u){var f=Pb(a);a=0;for(var m;f;){if(f.nodeType===3){if(m=a+f.textContent.length,a<=u&&m>=u)return{node:f,offset:u-a};a=m}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=Pb(f)}}function Lb(a,u){return a&&u?a===u?!0:a&&a.nodeType===3?!1:u&&u.nodeType===3?Lb(a,u.parentNode):"contains"in a?a.contains(u):a.compareDocumentPosition?!!(a.compareDocumentPosition(u)&16):!1:!1}function Fb(){for(var a=window,u=qn();u instanceof a.HTMLIFrameElement;){try{var f=typeof u.contentWindow.location.href=="string"}catch{f=!1}if(f)a=u.contentWindow;else break;u=qn(a.document)}return u}function Zf(a){var u=a&&a.nodeName&&a.nodeName.toLowerCase();return u&&(u==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||u==="textarea"||a.contentEditable==="true")}function nO(a){var u=Fb(),f=a.focusedElem,m=a.selectionRange;if(u!==f&&f&&f.ownerDocument&&Lb(f.ownerDocument.documentElement,f)){if(m!==null&&Zf(f)){if(u=m.start,a=m.end,a===void 0&&(a=u),"selectionStart"in f)f.selectionStart=u,f.selectionEnd=Math.min(a,f.value.length);else if(a=(u=f.ownerDocument||document)&&u.defaultView||window,a.getSelection){a=a.getSelection();var b=f.textContent.length,S=Math.min(m.start,b);m=m.end===void 0?S:Math.min(m.end,b),!a.extend&&S>m&&(b=m,m=S,S=b),b=jb(f,S);var A=jb(f,m);b&&A&&(a.rangeCount!==1||a.anchorNode!==b.node||a.anchorOffset!==b.offset||a.focusNode!==A.node||a.focusOffset!==A.offset)&&(u=u.createRange(),u.setStart(b.node,b.offset),a.removeAllRanges(),S>m?(a.addRange(u),a.extend(A.node,A.offset)):(u.setEnd(A.node,A.offset),a.addRange(u)))}}for(u=[],a=f;a=a.parentNode;)a.nodeType===1&&u.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof f.focus=="function"&&f.focus(),f=0;f<u.length;f++)a=u[f],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var rO=l&&"documentMode"in document&&11>=document.documentMode,Jo=null,Jf=null,Cl=null,ep=!1;function Ub(a,u,f){var m=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;ep||Jo==null||Jo!==qn(m)||(m=Jo,"selectionStart"in m&&Zf(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Cl&&El(Cl,m)||(Cl=m,m=wu(Jf,"onSelect"),0<m.length&&(u=new Wf("onSelect","select",null,u,f),a.push({event:u,listeners:m}),u.target=Jo)))}function yu(a,u){var f={};return f[a.toLowerCase()]=u.toLowerCase(),f["Webkit"+a]="webkit"+u,f["Moz"+a]="moz"+u,f}var ea={animationend:yu("Animation","AnimationEnd"),animationiteration:yu("Animation","AnimationIteration"),animationstart:yu("Animation","AnimationStart"),transitionend:yu("Transition","TransitionEnd")},tp={},Bb={};l&&(Bb=document.createElement("div").style,"AnimationEvent"in window||(delete ea.animationend.animation,delete ea.animationiteration.animation,delete ea.animationstart.animation),"TransitionEvent"in window||delete ea.transitionend.transition);function bu(a){if(tp[a])return tp[a];if(!ea[a])return a;var u=ea[a],f;for(f in u)if(u.hasOwnProperty(f)&&f in Bb)return tp[a]=u[f];return a}var Hb=bu("animationend"),zb=bu("animationiteration"),$b=bu("animationstart"),Wb=bu("transitionend"),Vb=new Map,qb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ds(a,u){Vb.set(a,u),s(u,[a])}for(var np=0;np<qb.length;np++){var rp=qb[np],iO=rp.toLowerCase(),sO=rp[0].toUpperCase()+rp.slice(1);ds(iO,"on"+sO)}ds(Hb,"onAnimationEnd"),ds(zb,"onAnimationIteration"),ds($b,"onAnimationStart"),ds("dblclick","onDoubleClick"),ds("focusin","onFocus"),ds("focusout","onBlur"),ds(Wb,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oO=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tl));function Gb(a,u,f){var m=a.type||"unknown-event";a.currentTarget=f,iR(m,u,void 0,a),a.currentTarget=null}function Yb(a,u){u=(u&4)!==0;for(var f=0;f<a.length;f++){var m=a[f],b=m.event;m=m.listeners;e:{var S=void 0;if(u)for(var A=m.length-1;0<=A;A--){var N=m[A],j=N.instance,W=N.currentTarget;if(N=N.listener,j!==S&&b.isPropagationStopped())break e;Gb(b,N,W),S=j}else for(A=0;A<m.length;A++){if(N=m[A],j=N.instance,W=N.currentTarget,N=N.listener,j!==S&&b.isPropagationStopped())break e;Gb(b,N,W),S=j}}}if(Kn)throw a=Ci,Kn=!1,Ci=null,a}function At(a,u){var f=u[dp];f===void 0&&(f=u[dp]=new Set);var m=a+"__bubble";f.has(m)||(Kb(u,a,2,!1),f.add(m))}function ip(a,u,f){var m=0;u&&(m|=4),Kb(f,a,m,u)}var _u="_reactListening"+Math.random().toString(36).slice(2);function kl(a){if(!a[_u]){a[_u]=!0,r.forEach(function(f){f!=="selectionchange"&&(oO.has(f)||ip(f,!1,a),ip(f,!0,a))});var u=a.nodeType===9?a:a.ownerDocument;u===null||u[_u]||(u[_u]=!0,ip("selectionchange",!1,u))}}function Kb(a,u,f,m){switch(yb(u)){case 1:var b=_R;break;case 4:b=wR;break;default:b=Hf}f=b.bind(null,u,f,a),b=void 0,!Qt||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(b=!0),m?b!==void 0?a.addEventListener(u,f,{capture:!0,passive:b}):a.addEventListener(u,f,!0):b!==void 0?a.addEventListener(u,f,{passive:b}):a.addEventListener(u,f,!1)}function sp(a,u,f,m,b){var S=m;if((u&1)===0&&(u&2)===0&&m!==null)e:for(;;){if(m===null)return;var A=m.tag;if(A===3||A===4){var N=m.stateNode.containerInfo;if(N===b||N.nodeType===8&&N.parentNode===b)break;if(A===4)for(A=m.return;A!==null;){var j=A.tag;if((j===3||j===4)&&(j=A.stateNode.containerInfo,j===b||j.nodeType===8&&j.parentNode===b))return;A=A.return}for(;N!==null;){if(A=Xs(N),A===null)return;if(j=A.tag,j===5||j===6){m=S=A;continue e}N=N.parentNode}}m=m.return}ht(function(){var W=S,J=Ke(f),te=[];e:{var Z=Vb.get(a);if(Z!==void 0){var he=Wf,ve=a;switch(a){case"keypress":if(pu(f)===0)break e;case"keydown":case"keyup":he=jR;break;case"focusin":ve="focus",he=Gf;break;case"focusout":ve="blur",he=Gf;break;case"beforeblur":case"afterblur":he=Gf;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=wb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=ER;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=UR;break;case Hb:case zb:case $b:he=kR;break;case Wb:he=HR;break;case"scroll":he=SR;break;case"wheel":he=$R;break;case"copy":case"cut":case"paste":he=DR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=xb}var _e=(u&4)!==0,Zt=!_e&&a==="scroll",B=_e?Z!==null?Z+"Capture":null:Z;_e=[];for(var U=W,H;U!==null;){H=U;var oe=H.stateNode;if(H.tag===5&&oe!==null&&(H=oe,B!==null&&(oe=Me(U,B),oe!=null&&_e.push(Al(U,oe,H)))),Zt)break;U=U.return}0<_e.length&&(Z=new he(Z,ve,null,f,J),te.push({event:Z,listeners:_e}))}}if((u&7)===0){e:{if(Z=a==="mouseover"||a==="pointerover",he=a==="mouseout"||a==="pointerout",Z&&f!==Ve&&(ve=f.relatedTarget||f.fromElement)&&(Xs(ve)||ve[Ti]))break e;if((he||Z)&&(Z=J.window===J?J:(Z=J.ownerDocument)?Z.defaultView||Z.parentWindow:window,he?(ve=f.relatedTarget||f.toElement,he=W,ve=ve?Xs(ve):null,ve!==null&&(Zt=Qs(ve),ve!==Zt||ve.tag!==5&&ve.tag!==6)&&(ve=null)):(he=null,ve=W),he!==ve)){if(_e=wb,oe="onMouseLeave",B="onMouseEnter",U="mouse",(a==="pointerout"||a==="pointerover")&&(_e=xb,oe="onPointerLeave",B="onPointerEnter",U="pointer"),Zt=he==null?Z:ra(he),H=ve==null?Z:ra(ve),Z=new _e(oe,U+"leave",he,f,J),Z.target=Zt,Z.relatedTarget=H,oe=null,Xs(J)===W&&(_e=new _e(B,U+"enter",ve,f,J),_e.target=H,_e.relatedTarget=Zt,oe=_e),Zt=oe,he&&ve)t:{for(_e=he,B=ve,U=0,H=_e;H;H=ta(H))U++;for(H=0,oe=B;oe;oe=ta(oe))H++;for(;0<U-H;)_e=ta(_e),U--;for(;0<H-U;)B=ta(B),H--;for(;U--;){if(_e===B||B!==null&&_e===B.alternate)break t;_e=ta(_e),B=ta(B)}_e=null}else _e=null;he!==null&&Qb(te,Z,he,_e,!1),ve!==null&&Zt!==null&&Qb(te,Zt,ve,_e,!0)}}e:{if(Z=W?ra(W):window,he=Z.nodeName&&Z.nodeName.toLowerCase(),he==="select"||he==="input"&&Z.type==="file")var xe=QR;else if(Db(Z))if(Ob)xe=eO;else{xe=ZR;var ke=XR}else(he=Z.nodeName)&&he.toLowerCase()==="input"&&(Z.type==="checkbox"||Z.type==="radio")&&(xe=JR);if(xe&&(xe=xe(a,W))){Rb(te,xe,f,J);break e}ke&&ke(a,Z,W),a==="focusout"&&(ke=Z._wrapperState)&&ke.controlled&&Z.type==="number"&&qe(Z,"number",Z.value)}switch(ke=W?ra(W):window,a){case"focusin":(Db(ke)||ke.contentEditable==="true")&&(Jo=ke,Jf=W,Cl=null);break;case"focusout":Cl=Jf=Jo=null;break;case"mousedown":ep=!0;break;case"contextmenu":case"mouseup":case"dragend":ep=!1,Ub(te,f,J);break;case"selectionchange":if(rO)break;case"keydown":case"keyup":Ub(te,f,J)}var Ae;if(Kf)e:{switch(a){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else Zo?kb(a,f)&&(Oe="onCompositionEnd"):a==="keydown"&&f.keyCode===229&&(Oe="onCompositionStart");Oe&&(Eb&&f.locale!=="ko"&&(Zo||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&Zo&&(Ae=bb()):(us=J,$f="value"in us?us.value:us.textContent,Zo=!0)),ke=wu(W,Oe),0<ke.length&&(Oe=new Sb(Oe,a,null,f,J),te.push({event:Oe,listeners:ke}),Ae?Oe.data=Ae:(Ae=Ab(f),Ae!==null&&(Oe.data=Ae)))),(Ae=VR?qR(a,f):GR(a,f))&&(W=wu(W,"onBeforeInput"),0<W.length&&(J=new Sb("onBeforeInput","beforeinput",null,f,J),te.push({event:J,listeners:W}),J.data=Ae))}Yb(te,u)})}function Al(a,u,f){return{instance:a,listener:u,currentTarget:f}}function wu(a,u){for(var f=u+"Capture",m=[];a!==null;){var b=a,S=b.stateNode;b.tag===5&&S!==null&&(b=S,S=Me(a,f),S!=null&&m.unshift(Al(a,S,b)),S=Me(a,u),S!=null&&m.push(Al(a,S,b))),a=a.return}return m}function ta(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function Qb(a,u,f,m,b){for(var S=u._reactName,A=[];f!==null&&f!==m;){var N=f,j=N.alternate,W=N.stateNode;if(j!==null&&j===m)break;N.tag===5&&W!==null&&(N=W,b?(j=Me(f,S),j!=null&&A.unshift(Al(f,j,N))):b||(j=Me(f,S),j!=null&&A.push(Al(f,j,N)))),f=f.return}A.length!==0&&a.push({event:u,listeners:A})}var aO=/\r\n?/g,lO=/\u0000|\uFFFD/g;function Xb(a){return(typeof a=="string"?a:""+a).replace(aO,`
`).replace(lO,"")}function Su(a,u,f){if(u=Xb(u),Xb(a)!==u&&f)throw Error(t(425))}function xu(){}var op=null,ap=null;function lp(a,u){return a==="textarea"||a==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var cp=typeof setTimeout=="function"?setTimeout:void 0,cO=typeof clearTimeout=="function"?clearTimeout:void 0,Zb=typeof Promise=="function"?Promise:void 0,uO=typeof queueMicrotask=="function"?queueMicrotask:typeof Zb<"u"?function(a){return Zb.resolve(null).then(a).catch(dO)}:cp;function dO(a){setTimeout(function(){throw a})}function up(a,u){var f=u,m=0;do{var b=f.nextSibling;if(a.removeChild(f),b&&b.nodeType===8)if(f=b.data,f==="/$"){if(m===0){a.removeChild(b),yl(u);return}m--}else f!=="$"&&f!=="$?"&&f!=="$!"||m++;f=b}while(f);yl(u)}function hs(a){for(;a!=null;a=a.nextSibling){var u=a.nodeType;if(u===1||u===3)break;if(u===8){if(u=a.data,u==="$"||u==="$!"||u==="$?")break;if(u==="/$")return null}}return a}function Jb(a){a=a.previousSibling;for(var u=0;a;){if(a.nodeType===8){var f=a.data;if(f==="$"||f==="$!"||f==="$?"){if(u===0)return a;u--}else f==="/$"&&u++}a=a.previousSibling}return null}var na=Math.random().toString(36).slice(2),oi="__reactFiber$"+na,Dl="__reactProps$"+na,Ti="__reactContainer$"+na,dp="__reactEvents$"+na,hO="__reactListeners$"+na,fO="__reactHandles$"+na;function Xs(a){var u=a[oi];if(u)return u;for(var f=a.parentNode;f;){if(u=f[Ti]||f[oi]){if(f=u.alternate,u.child!==null||f!==null&&f.child!==null)for(a=Jb(a);a!==null;){if(f=a[oi])return f;a=Jb(a)}return u}a=f,f=a.parentNode}return null}function Rl(a){return a=a[oi]||a[Ti],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function ra(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(t(33))}function Eu(a){return a[Dl]||null}var hp=[],ia=-1;function fs(a){return{current:a}}function Dt(a){0>ia||(a.current=hp[ia],hp[ia]=null,ia--)}function Et(a,u){ia++,hp[ia]=a.current,a.current=u}var ps={},Dn=fs(ps),Qn=fs(!1),Zs=ps;function sa(a,u){var f=a.type.contextTypes;if(!f)return ps;var m=a.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===u)return m.__reactInternalMemoizedMaskedChildContext;var b={},S;for(S in f)b[S]=u[S];return m&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=u,a.__reactInternalMemoizedMaskedChildContext=b),b}function Xn(a){return a=a.childContextTypes,a!=null}function Cu(){Dt(Qn),Dt(Dn)}function e0(a,u,f){if(Dn.current!==ps)throw Error(t(168));Et(Dn,u),Et(Qn,f)}function t0(a,u,f){var m=a.stateNode;if(u=u.childContextTypes,typeof m.getChildContext!="function")return f;m=m.getChildContext();for(var b in m)if(!(b in u))throw Error(t(108,Ce(a)||"Unknown",b));return Y({},f,m)}function Tu(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||ps,Zs=Dn.current,Et(Dn,a),Et(Qn,Qn.current),!0}function n0(a,u,f){var m=a.stateNode;if(!m)throw Error(t(169));f?(a=t0(a,u,Zs),m.__reactInternalMemoizedMergedChildContext=a,Dt(Qn),Dt(Dn),Et(Dn,a)):Dt(Qn),Et(Qn,f)}var ki=null,ku=!1,fp=!1;function r0(a){ki===null?ki=[a]:ki.push(a)}function pO(a){ku=!0,r0(a)}function gs(){if(!fp&&ki!==null){fp=!0;var a=0,u=pt;try{var f=ki;for(pt=1;a<f.length;a++){var m=f[a];do m=m(!0);while(m!==null)}ki=null,ku=!1}catch(b){throw ki!==null&&(ki=ki.slice(a+1)),sb(Pf,gs),b}finally{pt=u,fp=!1}}return null}var oa=[],aa=0,Au=null,Du=0,Sr=[],xr=0,Js=null,Ai=1,Di="";function eo(a,u){oa[aa++]=Du,oa[aa++]=Au,Au=a,Du=u}function i0(a,u,f){Sr[xr++]=Ai,Sr[xr++]=Di,Sr[xr++]=Js,Js=a;var m=Ai;a=Di;var b=32-Br(m)-1;m&=~(1<<b),f+=1;var S=32-Br(u)+b;if(30<S){var A=b-b%5;S=(m&(1<<A)-1).toString(32),m>>=A,b-=A,Ai=1<<32-Br(u)+b|f<<b|m,Di=S+a}else Ai=1<<S|f<<b|m,Di=a}function pp(a){a.return!==null&&(eo(a,1),i0(a,1,0))}function gp(a){for(;a===Au;)Au=oa[--aa],oa[aa]=null,Du=oa[--aa],oa[aa]=null;for(;a===Js;)Js=Sr[--xr],Sr[xr]=null,Di=Sr[--xr],Sr[xr]=null,Ai=Sr[--xr],Sr[xr]=null}var hr=null,fr=null,Mt=!1,zr=null;function s0(a,u){var f=kr(5,null,null,0);f.elementType="DELETED",f.stateNode=u,f.return=a,u=a.deletions,u===null?(a.deletions=[f],a.flags|=16):u.push(f)}function o0(a,u){switch(a.tag){case 5:var f=a.type;return u=u.nodeType!==1||f.toLowerCase()!==u.nodeName.toLowerCase()?null:u,u!==null?(a.stateNode=u,hr=a,fr=hs(u.firstChild),!0):!1;case 6:return u=a.pendingProps===""||u.nodeType!==3?null:u,u!==null?(a.stateNode=u,hr=a,fr=null,!0):!1;case 13:return u=u.nodeType!==8?null:u,u!==null?(f=Js!==null?{id:Ai,overflow:Di}:null,a.memoizedState={dehydrated:u,treeContext:f,retryLane:1073741824},f=kr(18,null,null,0),f.stateNode=u,f.return=a,a.child=f,hr=a,fr=null,!0):!1;default:return!1}}function mp(a){return(a.mode&1)!==0&&(a.flags&128)===0}function vp(a){if(Mt){var u=fr;if(u){var f=u;if(!o0(a,u)){if(mp(a))throw Error(t(418));u=hs(f.nextSibling);var m=hr;u&&o0(a,u)?s0(m,f):(a.flags=a.flags&-4097|2,Mt=!1,hr=a)}}else{if(mp(a))throw Error(t(418));a.flags=a.flags&-4097|2,Mt=!1,hr=a}}}function a0(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;hr=a}function Ru(a){if(a!==hr)return!1;if(!Mt)return a0(a),Mt=!0,!1;var u;if((u=a.tag!==3)&&!(u=a.tag!==5)&&(u=a.type,u=u!=="head"&&u!=="body"&&!lp(a.type,a.memoizedProps)),u&&(u=fr)){if(mp(a))throw l0(),Error(t(418));for(;u;)s0(a,u),u=hs(u.nextSibling)}if(a0(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(t(317));e:{for(a=a.nextSibling,u=0;a;){if(a.nodeType===8){var f=a.data;if(f==="/$"){if(u===0){fr=hs(a.nextSibling);break e}u--}else f!=="$"&&f!=="$!"&&f!=="$?"||u++}a=a.nextSibling}fr=null}}else fr=hr?hs(a.stateNode.nextSibling):null;return!0}function l0(){for(var a=fr;a;)a=hs(a.nextSibling)}function la(){fr=hr=null,Mt=!1}function yp(a){zr===null?zr=[a]:zr.push(a)}var gO=R.ReactCurrentBatchConfig;function Ol(a,u,f){if(a=f.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(f._owner){if(f=f._owner,f){if(f.tag!==1)throw Error(t(309));var m=f.stateNode}if(!m)throw Error(t(147,a));var b=m,S=""+a;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===S?u.ref:(u=function(A){var N=b.refs;A===null?delete N[S]:N[S]=A},u._stringRef=S,u)}if(typeof a!="string")throw Error(t(284));if(!f._owner)throw Error(t(290,a))}return a}function Ou(a,u){throw a=Object.prototype.toString.call(u),Error(t(31,a==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":a))}function c0(a){var u=a._init;return u(a._payload)}function u0(a){function u(B,U){if(a){var H=B.deletions;H===null?(B.deletions=[U],B.flags|=16):H.push(U)}}function f(B,U){if(!a)return null;for(;U!==null;)u(B,U),U=U.sibling;return null}function m(B,U){for(B=new Map;U!==null;)U.key!==null?B.set(U.key,U):B.set(U.index,U),U=U.sibling;return B}function b(B,U){return B=xs(B,U),B.index=0,B.sibling=null,B}function S(B,U,H){return B.index=H,a?(H=B.alternate,H!==null?(H=H.index,H<U?(B.flags|=2,U):H):(B.flags|=2,U)):(B.flags|=1048576,U)}function A(B){return a&&B.alternate===null&&(B.flags|=2),B}function N(B,U,H,oe){return U===null||U.tag!==6?(U=cg(H,B.mode,oe),U.return=B,U):(U=b(U,H),U.return=B,U)}function j(B,U,H,oe){var xe=H.type;return xe===M?J(B,U,H.props.children,oe,H.key):U!==null&&(U.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===ie&&c0(xe)===U.type)?(oe=b(U,H.props),oe.ref=Ol(B,U,H),oe.return=B,oe):(oe=td(H.type,H.key,H.props,null,B.mode,oe),oe.ref=Ol(B,U,H),oe.return=B,oe)}function W(B,U,H,oe){return U===null||U.tag!==4||U.stateNode.containerInfo!==H.containerInfo||U.stateNode.implementation!==H.implementation?(U=ug(H,B.mode,oe),U.return=B,U):(U=b(U,H.children||[]),U.return=B,U)}function J(B,U,H,oe,xe){return U===null||U.tag!==7?(U=lo(H,B.mode,oe,xe),U.return=B,U):(U=b(U,H),U.return=B,U)}function te(B,U,H){if(typeof U=="string"&&U!==""||typeof U=="number")return U=cg(""+U,B.mode,H),U.return=B,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case D:return H=td(U.type,U.key,U.props,null,B.mode,H),H.ref=Ol(B,null,U),H.return=B,H;case O:return U=ug(U,B.mode,H),U.return=B,U;case ie:var oe=U._init;return te(B,oe(U._payload),H)}if(Ee(U)||q(U))return U=lo(U,B.mode,H,null),U.return=B,U;Ou(B,U)}return null}function Z(B,U,H,oe){var xe=U!==null?U.key:null;if(typeof H=="string"&&H!==""||typeof H=="number")return xe!==null?null:N(B,U,""+H,oe);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case D:return H.key===xe?j(B,U,H,oe):null;case O:return H.key===xe?W(B,U,H,oe):null;case ie:return xe=H._init,Z(B,U,xe(H._payload),oe)}if(Ee(H)||q(H))return xe!==null?null:J(B,U,H,oe,null);Ou(B,H)}return null}function he(B,U,H,oe,xe){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return B=B.get(H)||null,N(U,B,""+oe,xe);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case D:return B=B.get(oe.key===null?H:oe.key)||null,j(U,B,oe,xe);case O:return B=B.get(oe.key===null?H:oe.key)||null,W(U,B,oe,xe);case ie:var ke=oe._init;return he(B,U,H,ke(oe._payload),xe)}if(Ee(oe)||q(oe))return B=B.get(H)||null,J(U,B,oe,xe,null);Ou(U,oe)}return null}function ve(B,U,H,oe){for(var xe=null,ke=null,Ae=U,Oe=U=0,_n=null;Ae!==null&&Oe<H.length;Oe++){Ae.index>Oe?(_n=Ae,Ae=null):_n=Ae.sibling;var ct=Z(B,Ae,H[Oe],oe);if(ct===null){Ae===null&&(Ae=_n);break}a&&Ae&&ct.alternate===null&&u(B,Ae),U=S(ct,U,Oe),ke===null?xe=ct:ke.sibling=ct,ke=ct,Ae=_n}if(Oe===H.length)return f(B,Ae),Mt&&eo(B,Oe),xe;if(Ae===null){for(;Oe<H.length;Oe++)Ae=te(B,H[Oe],oe),Ae!==null&&(U=S(Ae,U,Oe),ke===null?xe=Ae:ke.sibling=Ae,ke=Ae);return Mt&&eo(B,Oe),xe}for(Ae=m(B,Ae);Oe<H.length;Oe++)_n=he(Ae,B,Oe,H[Oe],oe),_n!==null&&(a&&_n.alternate!==null&&Ae.delete(_n.key===null?Oe:_n.key),U=S(_n,U,Oe),ke===null?xe=_n:ke.sibling=_n,ke=_n);return a&&Ae.forEach(function(Es){return u(B,Es)}),Mt&&eo(B,Oe),xe}function _e(B,U,H,oe){var xe=q(H);if(typeof xe!="function")throw Error(t(150));if(H=xe.call(H),H==null)throw Error(t(151));for(var ke=xe=null,Ae=U,Oe=U=0,_n=null,ct=H.next();Ae!==null&&!ct.done;Oe++,ct=H.next()){Ae.index>Oe?(_n=Ae,Ae=null):_n=Ae.sibling;var Es=Z(B,Ae,ct.value,oe);if(Es===null){Ae===null&&(Ae=_n);break}a&&Ae&&Es.alternate===null&&u(B,Ae),U=S(Es,U,Oe),ke===null?xe=Es:ke.sibling=Es,ke=Es,Ae=_n}if(ct.done)return f(B,Ae),Mt&&eo(B,Oe),xe;if(Ae===null){for(;!ct.done;Oe++,ct=H.next())ct=te(B,ct.value,oe),ct!==null&&(U=S(ct,U,Oe),ke===null?xe=ct:ke.sibling=ct,ke=ct);return Mt&&eo(B,Oe),xe}for(Ae=m(B,Ae);!ct.done;Oe++,ct=H.next())ct=he(Ae,B,Oe,ct.value,oe),ct!==null&&(a&&ct.alternate!==null&&Ae.delete(ct.key===null?Oe:ct.key),U=S(ct,U,Oe),ke===null?xe=ct:ke.sibling=ct,ke=ct);return a&&Ae.forEach(function(YO){return u(B,YO)}),Mt&&eo(B,Oe),xe}function Zt(B,U,H,oe){if(typeof H=="object"&&H!==null&&H.type===M&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case D:e:{for(var xe=H.key,ke=U;ke!==null;){if(ke.key===xe){if(xe=H.type,xe===M){if(ke.tag===7){f(B,ke.sibling),U=b(ke,H.props.children),U.return=B,B=U;break e}}else if(ke.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===ie&&c0(xe)===ke.type){f(B,ke.sibling),U=b(ke,H.props),U.ref=Ol(B,ke,H),U.return=B,B=U;break e}f(B,ke);break}else u(B,ke);ke=ke.sibling}H.type===M?(U=lo(H.props.children,B.mode,oe,H.key),U.return=B,B=U):(oe=td(H.type,H.key,H.props,null,B.mode,oe),oe.ref=Ol(B,U,H),oe.return=B,B=oe)}return A(B);case O:e:{for(ke=H.key;U!==null;){if(U.key===ke)if(U.tag===4&&U.stateNode.containerInfo===H.containerInfo&&U.stateNode.implementation===H.implementation){f(B,U.sibling),U=b(U,H.children||[]),U.return=B,B=U;break e}else{f(B,U);break}else u(B,U);U=U.sibling}U=ug(H,B.mode,oe),U.return=B,B=U}return A(B);case ie:return ke=H._init,Zt(B,U,ke(H._payload),oe)}if(Ee(H))return ve(B,U,H,oe);if(q(H))return _e(B,U,H,oe);Ou(B,H)}return typeof H=="string"&&H!==""||typeof H=="number"?(H=""+H,U!==null&&U.tag===6?(f(B,U.sibling),U=b(U,H),U.return=B,B=U):(f(B,U),U=cg(H,B.mode,oe),U.return=B,B=U),A(B)):f(B,U)}return Zt}var ca=u0(!0),d0=u0(!1),Iu=fs(null),Mu=null,ua=null,bp=null;function _p(){bp=ua=Mu=null}function wp(a){var u=Iu.current;Dt(Iu),a._currentValue=u}function Sp(a,u,f){for(;a!==null;){var m=a.alternate;if((a.childLanes&u)!==u?(a.childLanes|=u,m!==null&&(m.childLanes|=u)):m!==null&&(m.childLanes&u)!==u&&(m.childLanes|=u),a===f)break;a=a.return}}function da(a,u){Mu=a,bp=ua=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&u)!==0&&(Zn=!0),a.firstContext=null)}function Er(a){var u=a._currentValue;if(bp!==a)if(a={context:a,memoizedValue:u,next:null},ua===null){if(Mu===null)throw Error(t(308));ua=a,Mu.dependencies={lanes:0,firstContext:a}}else ua=ua.next=a;return u}var to=null;function xp(a){to===null?to=[a]:to.push(a)}function h0(a,u,f,m){var b=u.interleaved;return b===null?(f.next=f,xp(u)):(f.next=b.next,b.next=f),u.interleaved=f,Ri(a,m)}function Ri(a,u){a.lanes|=u;var f=a.alternate;for(f!==null&&(f.lanes|=u),f=a,a=a.return;a!==null;)a.childLanes|=u,f=a.alternate,f!==null&&(f.childLanes|=u),f=a,a=a.return;return f.tag===3?f.stateNode:null}var ms=!1;function Ep(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function f0(a,u){a=a.updateQueue,u.updateQueue===a&&(u.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function Oi(a,u){return{eventTime:a,lane:u,tag:0,payload:null,callback:null,next:null}}function vs(a,u,f){var m=a.updateQueue;if(m===null)return null;if(m=m.shared,(lt&2)!==0){var b=m.pending;return b===null?u.next=u:(u.next=b.next,b.next=u),m.pending=u,Ri(a,f)}return b=m.interleaved,b===null?(u.next=u,xp(m)):(u.next=b.next,b.next=u),m.interleaved=u,Ri(a,f)}function Nu(a,u,f){if(u=u.updateQueue,u!==null&&(u=u.shared,(f&4194240)!==0)){var m=u.lanes;m&=a.pendingLanes,f|=m,u.lanes=f,Ff(a,f)}}function p0(a,u){var f=a.updateQueue,m=a.alternate;if(m!==null&&(m=m.updateQueue,f===m)){var b=null,S=null;if(f=f.firstBaseUpdate,f!==null){do{var A={eventTime:f.eventTime,lane:f.lane,tag:f.tag,payload:f.payload,callback:f.callback,next:null};S===null?b=S=A:S=S.next=A,f=f.next}while(f!==null);S===null?b=S=u:S=S.next=u}else b=S=u;f={baseState:m.baseState,firstBaseUpdate:b,lastBaseUpdate:S,shared:m.shared,effects:m.effects},a.updateQueue=f;return}a=f.lastBaseUpdate,a===null?f.firstBaseUpdate=u:a.next=u,f.lastBaseUpdate=u}function Pu(a,u,f,m){var b=a.updateQueue;ms=!1;var S=b.firstBaseUpdate,A=b.lastBaseUpdate,N=b.shared.pending;if(N!==null){b.shared.pending=null;var j=N,W=j.next;j.next=null,A===null?S=W:A.next=W,A=j;var J=a.alternate;J!==null&&(J=J.updateQueue,N=J.lastBaseUpdate,N!==A&&(N===null?J.firstBaseUpdate=W:N.next=W,J.lastBaseUpdate=j))}if(S!==null){var te=b.baseState;A=0,J=W=j=null,N=S;do{var Z=N.lane,he=N.eventTime;if((m&Z)===Z){J!==null&&(J=J.next={eventTime:he,lane:0,tag:N.tag,payload:N.payload,callback:N.callback,next:null});e:{var ve=a,_e=N;switch(Z=u,he=f,_e.tag){case 1:if(ve=_e.payload,typeof ve=="function"){te=ve.call(he,te,Z);break e}te=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=_e.payload,Z=typeof ve=="function"?ve.call(he,te,Z):ve,Z==null)break e;te=Y({},te,Z);break e;case 2:ms=!0}}N.callback!==null&&N.lane!==0&&(a.flags|=64,Z=b.effects,Z===null?b.effects=[N]:Z.push(N))}else he={eventTime:he,lane:Z,tag:N.tag,payload:N.payload,callback:N.callback,next:null},J===null?(W=J=he,j=te):J=J.next=he,A|=Z;if(N=N.next,N===null){if(N=b.shared.pending,N===null)break;Z=N,N=Z.next,Z.next=null,b.lastBaseUpdate=Z,b.shared.pending=null}}while(!0);if(J===null&&(j=te),b.baseState=j,b.firstBaseUpdate=W,b.lastBaseUpdate=J,u=b.shared.interleaved,u!==null){b=u;do A|=b.lane,b=b.next;while(b!==u)}else S===null&&(b.shared.lanes=0);io|=A,a.lanes=A,a.memoizedState=te}}function g0(a,u,f){if(a=u.effects,u.effects=null,a!==null)for(u=0;u<a.length;u++){var m=a[u],b=m.callback;if(b!==null){if(m.callback=null,m=f,typeof b!="function")throw Error(t(191,b));b.call(m)}}}var Il={},ai=fs(Il),Ml=fs(Il),Nl=fs(Il);function no(a){if(a===Il)throw Error(t(174));return a}function Cp(a,u){switch(Et(Nl,u),Et(Ml,a),Et(ai,Il),a=u.nodeType,a){case 9:case 11:u=(u=u.documentElement)?u.namespaceURI:be(null,"");break;default:a=a===8?u.parentNode:u,u=a.namespaceURI||null,a=a.tagName,u=be(u,a)}Dt(ai),Et(ai,u)}function ha(){Dt(ai),Dt(Ml),Dt(Nl)}function m0(a){no(Nl.current);var u=no(ai.current),f=be(u,a.type);u!==f&&(Et(Ml,a),Et(ai,f))}function Tp(a){Ml.current===a&&(Dt(ai),Dt(Ml))}var Lt=fs(0);function ju(a){for(var u=a;u!==null;){if(u.tag===13){var f=u.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||f.data==="$!"))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var kp=[];function Ap(){for(var a=0;a<kp.length;a++)kp[a]._workInProgressVersionPrimary=null;kp.length=0}var Lu=R.ReactCurrentDispatcher,Dp=R.ReactCurrentBatchConfig,ro=0,Ft=null,an=null,yn=null,Fu=!1,Pl=!1,jl=0,mO=0;function Rn(){throw Error(t(321))}function Rp(a,u){if(u===null)return!1;for(var f=0;f<u.length&&f<a.length;f++)if(!Hr(a[f],u[f]))return!1;return!0}function Op(a,u,f,m,b,S){if(ro=S,Ft=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,Lu.current=a===null||a.memoizedState===null?_O:wO,a=f(m,b),Pl){S=0;do{if(Pl=!1,jl=0,25<=S)throw Error(t(301));S+=1,yn=an=null,u.updateQueue=null,Lu.current=SO,a=f(m,b)}while(Pl)}if(Lu.current=Hu,u=an!==null&&an.next!==null,ro=0,yn=an=Ft=null,Fu=!1,u)throw Error(t(300));return a}function Ip(){var a=jl!==0;return jl=0,a}function li(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yn===null?Ft.memoizedState=yn=a:yn=yn.next=a,yn}function Cr(){if(an===null){var a=Ft.alternate;a=a!==null?a.memoizedState:null}else a=an.next;var u=yn===null?Ft.memoizedState:yn.next;if(u!==null)yn=u,an=a;else{if(a===null)throw Error(t(310));an=a,a={memoizedState:an.memoizedState,baseState:an.baseState,baseQueue:an.baseQueue,queue:an.queue,next:null},yn===null?Ft.memoizedState=yn=a:yn=yn.next=a}return yn}function Ll(a,u){return typeof u=="function"?u(a):u}function Mp(a){var u=Cr(),f=u.queue;if(f===null)throw Error(t(311));f.lastRenderedReducer=a;var m=an,b=m.baseQueue,S=f.pending;if(S!==null){if(b!==null){var A=b.next;b.next=S.next,S.next=A}m.baseQueue=b=S,f.pending=null}if(b!==null){S=b.next,m=m.baseState;var N=A=null,j=null,W=S;do{var J=W.lane;if((ro&J)===J)j!==null&&(j=j.next={lane:0,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),m=W.hasEagerState?W.eagerState:a(m,W.action);else{var te={lane:J,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null};j===null?(N=j=te,A=m):j=j.next=te,Ft.lanes|=J,io|=J}W=W.next}while(W!==null&&W!==S);j===null?A=m:j.next=N,Hr(m,u.memoizedState)||(Zn=!0),u.memoizedState=m,u.baseState=A,u.baseQueue=j,f.lastRenderedState=m}if(a=f.interleaved,a!==null){b=a;do S=b.lane,Ft.lanes|=S,io|=S,b=b.next;while(b!==a)}else b===null&&(f.lanes=0);return[u.memoizedState,f.dispatch]}function Np(a){var u=Cr(),f=u.queue;if(f===null)throw Error(t(311));f.lastRenderedReducer=a;var m=f.dispatch,b=f.pending,S=u.memoizedState;if(b!==null){f.pending=null;var A=b=b.next;do S=a(S,A.action),A=A.next;while(A!==b);Hr(S,u.memoizedState)||(Zn=!0),u.memoizedState=S,u.baseQueue===null&&(u.baseState=S),f.lastRenderedState=S}return[S,m]}function v0(){}function y0(a,u){var f=Ft,m=Cr(),b=u(),S=!Hr(m.memoizedState,b);if(S&&(m.memoizedState=b,Zn=!0),m=m.queue,Pp(w0.bind(null,f,m,a),[a]),m.getSnapshot!==u||S||yn!==null&&yn.memoizedState.tag&1){if(f.flags|=2048,Fl(9,_0.bind(null,f,m,b,u),void 0,null),bn===null)throw Error(t(349));(ro&30)!==0||b0(f,u,b)}return b}function b0(a,u,f){a.flags|=16384,a={getSnapshot:u,value:f},u=Ft.updateQueue,u===null?(u={lastEffect:null,stores:null},Ft.updateQueue=u,u.stores=[a]):(f=u.stores,f===null?u.stores=[a]:f.push(a))}function _0(a,u,f,m){u.value=f,u.getSnapshot=m,S0(u)&&x0(a)}function w0(a,u,f){return f(function(){S0(u)&&x0(a)})}function S0(a){var u=a.getSnapshot;a=a.value;try{var f=u();return!Hr(a,f)}catch{return!0}}function x0(a){var u=Ri(a,1);u!==null&&qr(u,a,1,-1)}function E0(a){var u=li();return typeof a=="function"&&(a=a()),u.memoizedState=u.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ll,lastRenderedState:a},u.queue=a,a=a.dispatch=bO.bind(null,Ft,a),[u.memoizedState,a]}function Fl(a,u,f,m){return a={tag:a,create:u,destroy:f,deps:m,next:null},u=Ft.updateQueue,u===null?(u={lastEffect:null,stores:null},Ft.updateQueue=u,u.lastEffect=a.next=a):(f=u.lastEffect,f===null?u.lastEffect=a.next=a:(m=f.next,f.next=a,a.next=m,u.lastEffect=a)),a}function C0(){return Cr().memoizedState}function Uu(a,u,f,m){var b=li();Ft.flags|=a,b.memoizedState=Fl(1|u,f,void 0,m===void 0?null:m)}function Bu(a,u,f,m){var b=Cr();m=m===void 0?null:m;var S=void 0;if(an!==null){var A=an.memoizedState;if(S=A.destroy,m!==null&&Rp(m,A.deps)){b.memoizedState=Fl(u,f,S,m);return}}Ft.flags|=a,b.memoizedState=Fl(1|u,f,S,m)}function T0(a,u){return Uu(8390656,8,a,u)}function Pp(a,u){return Bu(2048,8,a,u)}function k0(a,u){return Bu(4,2,a,u)}function A0(a,u){return Bu(4,4,a,u)}function D0(a,u){if(typeof u=="function")return a=a(),u(a),function(){u(null)};if(u!=null)return a=a(),u.current=a,function(){u.current=null}}function R0(a,u,f){return f=f!=null?f.concat([a]):null,Bu(4,4,D0.bind(null,u,a),f)}function jp(){}function O0(a,u){var f=Cr();u=u===void 0?null:u;var m=f.memoizedState;return m!==null&&u!==null&&Rp(u,m[1])?m[0]:(f.memoizedState=[a,u],a)}function I0(a,u){var f=Cr();u=u===void 0?null:u;var m=f.memoizedState;return m!==null&&u!==null&&Rp(u,m[1])?m[0]:(a=a(),f.memoizedState=[a,u],a)}function M0(a,u,f){return(ro&21)===0?(a.baseState&&(a.baseState=!1,Zn=!0),a.memoizedState=f):(Hr(f,u)||(f=cb(),Ft.lanes|=f,io|=f,a.baseState=!0),u)}function vO(a,u){var f=pt;pt=f!==0&&4>f?f:4,a(!0);var m=Dp.transition;Dp.transition={};try{a(!1),u()}finally{pt=f,Dp.transition=m}}function N0(){return Cr().memoizedState}function yO(a,u,f){var m=ws(a);if(f={lane:m,action:f,hasEagerState:!1,eagerState:null,next:null},P0(a))j0(u,f);else if(f=h0(a,u,f,m),f!==null){var b=Bn();qr(f,a,m,b),L0(f,u,m)}}function bO(a,u,f){var m=ws(a),b={lane:m,action:f,hasEagerState:!1,eagerState:null,next:null};if(P0(a))j0(u,b);else{var S=a.alternate;if(a.lanes===0&&(S===null||S.lanes===0)&&(S=u.lastRenderedReducer,S!==null))try{var A=u.lastRenderedState,N=S(A,f);if(b.hasEagerState=!0,b.eagerState=N,Hr(N,A)){var j=u.interleaved;j===null?(b.next=b,xp(u)):(b.next=j.next,j.next=b),u.interleaved=b;return}}catch{}finally{}f=h0(a,u,b,m),f!==null&&(b=Bn(),qr(f,a,m,b),L0(f,u,m))}}function P0(a){var u=a.alternate;return a===Ft||u!==null&&u===Ft}function j0(a,u){Pl=Fu=!0;var f=a.pending;f===null?u.next=u:(u.next=f.next,f.next=u),a.pending=u}function L0(a,u,f){if((f&4194240)!==0){var m=u.lanes;m&=a.pendingLanes,f|=m,u.lanes=f,Ff(a,f)}}var Hu={readContext:Er,useCallback:Rn,useContext:Rn,useEffect:Rn,useImperativeHandle:Rn,useInsertionEffect:Rn,useLayoutEffect:Rn,useMemo:Rn,useReducer:Rn,useRef:Rn,useState:Rn,useDebugValue:Rn,useDeferredValue:Rn,useTransition:Rn,useMutableSource:Rn,useSyncExternalStore:Rn,useId:Rn,unstable_isNewReconciler:!1},_O={readContext:Er,useCallback:function(a,u){return li().memoizedState=[a,u===void 0?null:u],a},useContext:Er,useEffect:T0,useImperativeHandle:function(a,u,f){return f=f!=null?f.concat([a]):null,Uu(4194308,4,D0.bind(null,u,a),f)},useLayoutEffect:function(a,u){return Uu(4194308,4,a,u)},useInsertionEffect:function(a,u){return Uu(4,2,a,u)},useMemo:function(a,u){var f=li();return u=u===void 0?null:u,a=a(),f.memoizedState=[a,u],a},useReducer:function(a,u,f){var m=li();return u=f!==void 0?f(u):u,m.memoizedState=m.baseState=u,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:u},m.queue=a,a=a.dispatch=yO.bind(null,Ft,a),[m.memoizedState,a]},useRef:function(a){var u=li();return a={current:a},u.memoizedState=a},useState:E0,useDebugValue:jp,useDeferredValue:function(a){return li().memoizedState=a},useTransition:function(){var a=E0(!1),u=a[0];return a=vO.bind(null,a[1]),li().memoizedState=a,[u,a]},useMutableSource:function(){},useSyncExternalStore:function(a,u,f){var m=Ft,b=li();if(Mt){if(f===void 0)throw Error(t(407));f=f()}else{if(f=u(),bn===null)throw Error(t(349));(ro&30)!==0||b0(m,u,f)}b.memoizedState=f;var S={value:f,getSnapshot:u};return b.queue=S,T0(w0.bind(null,m,S,a),[a]),m.flags|=2048,Fl(9,_0.bind(null,m,S,f,u),void 0,null),f},useId:function(){var a=li(),u=bn.identifierPrefix;if(Mt){var f=Di,m=Ai;f=(m&~(1<<32-Br(m)-1)).toString(32)+f,u=":"+u+"R"+f,f=jl++,0<f&&(u+="H"+f.toString(32)),u+=":"}else f=mO++,u=":"+u+"r"+f.toString(32)+":";return a.memoizedState=u},unstable_isNewReconciler:!1},wO={readContext:Er,useCallback:O0,useContext:Er,useEffect:Pp,useImperativeHandle:R0,useInsertionEffect:k0,useLayoutEffect:A0,useMemo:I0,useReducer:Mp,useRef:C0,useState:function(){return Mp(Ll)},useDebugValue:jp,useDeferredValue:function(a){var u=Cr();return M0(u,an.memoizedState,a)},useTransition:function(){var a=Mp(Ll)[0],u=Cr().memoizedState;return[a,u]},useMutableSource:v0,useSyncExternalStore:y0,useId:N0,unstable_isNewReconciler:!1},SO={readContext:Er,useCallback:O0,useContext:Er,useEffect:Pp,useImperativeHandle:R0,useInsertionEffect:k0,useLayoutEffect:A0,useMemo:I0,useReducer:Np,useRef:C0,useState:function(){return Np(Ll)},useDebugValue:jp,useDeferredValue:function(a){var u=Cr();return an===null?u.memoizedState=a:M0(u,an.memoizedState,a)},useTransition:function(){var a=Np(Ll)[0],u=Cr().memoizedState;return[a,u]},useMutableSource:v0,useSyncExternalStore:y0,useId:N0,unstable_isNewReconciler:!1};function $r(a,u){if(a&&a.defaultProps){u=Y({},u),a=a.defaultProps;for(var f in a)u[f]===void 0&&(u[f]=a[f]);return u}return u}function Lp(a,u,f,m){u=a.memoizedState,f=f(m,u),f=f==null?u:Y({},u,f),a.memoizedState=f,a.lanes===0&&(a.updateQueue.baseState=f)}var zu={isMounted:function(a){return(a=a._reactInternals)?Qs(a)===a:!1},enqueueSetState:function(a,u,f){a=a._reactInternals;var m=Bn(),b=ws(a),S=Oi(m,b);S.payload=u,f!=null&&(S.callback=f),u=vs(a,S,b),u!==null&&(qr(u,a,b,m),Nu(u,a,b))},enqueueReplaceState:function(a,u,f){a=a._reactInternals;var m=Bn(),b=ws(a),S=Oi(m,b);S.tag=1,S.payload=u,f!=null&&(S.callback=f),u=vs(a,S,b),u!==null&&(qr(u,a,b,m),Nu(u,a,b))},enqueueForceUpdate:function(a,u){a=a._reactInternals;var f=Bn(),m=ws(a),b=Oi(f,m);b.tag=2,u!=null&&(b.callback=u),u=vs(a,b,m),u!==null&&(qr(u,a,m,f),Nu(u,a,m))}};function F0(a,u,f,m,b,S,A){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(m,S,A):u.prototype&&u.prototype.isPureReactComponent?!El(f,m)||!El(b,S):!0}function U0(a,u,f){var m=!1,b=ps,S=u.contextType;return typeof S=="object"&&S!==null?S=Er(S):(b=Xn(u)?Zs:Dn.current,m=u.contextTypes,S=(m=m!=null)?sa(a,b):ps),u=new u(f,S),a.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=zu,a.stateNode=u,u._reactInternals=a,m&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=S),u}function B0(a,u,f,m){a=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(f,m),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(f,m),u.state!==a&&zu.enqueueReplaceState(u,u.state,null)}function Fp(a,u,f,m){var b=a.stateNode;b.props=f,b.state=a.memoizedState,b.refs={},Ep(a);var S=u.contextType;typeof S=="object"&&S!==null?b.context=Er(S):(S=Xn(u)?Zs:Dn.current,b.context=sa(a,S)),b.state=a.memoizedState,S=u.getDerivedStateFromProps,typeof S=="function"&&(Lp(a,u,S,f),b.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(u=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),u!==b.state&&zu.enqueueReplaceState(b,b.state,null),Pu(a,f,b,m),b.state=a.memoizedState),typeof b.componentDidMount=="function"&&(a.flags|=4194308)}function fa(a,u){try{var f="",m=u;do f+=ue(m),m=m.return;while(m);var b=f}catch(S){b=`
Error generating stack: `+S.message+`
`+S.stack}return{value:a,source:u,stack:b,digest:null}}function Up(a,u,f){return{value:a,source:null,stack:f??null,digest:u??null}}function Bp(a,u){try{console.error(u.value)}catch(f){setTimeout(function(){throw f})}}var xO=typeof WeakMap=="function"?WeakMap:Map;function H0(a,u,f){f=Oi(-1,f),f.tag=3,f.payload={element:null};var m=u.value;return f.callback=function(){Ku||(Ku=!0,tg=m),Bp(a,u)},f}function z0(a,u,f){f=Oi(-1,f),f.tag=3;var m=a.type.getDerivedStateFromError;if(typeof m=="function"){var b=u.value;f.payload=function(){return m(b)},f.callback=function(){Bp(a,u)}}var S=a.stateNode;return S!==null&&typeof S.componentDidCatch=="function"&&(f.callback=function(){Bp(a,u),typeof m!="function"&&(bs===null?bs=new Set([this]):bs.add(this));var A=u.stack;this.componentDidCatch(u.value,{componentStack:A!==null?A:""})}),f}function $0(a,u,f){var m=a.pingCache;if(m===null){m=a.pingCache=new xO;var b=new Set;m.set(u,b)}else b=m.get(u),b===void 0&&(b=new Set,m.set(u,b));b.has(f)||(b.add(f),a=LO.bind(null,a,u,f),u.then(a,a))}function W0(a){do{var u;if((u=a.tag===13)&&(u=a.memoizedState,u=u!==null?u.dehydrated!==null:!0),u)return a;a=a.return}while(a!==null);return null}function V0(a,u,f,m,b){return(a.mode&1)===0?(a===u?a.flags|=65536:(a.flags|=128,f.flags|=131072,f.flags&=-52805,f.tag===1&&(f.alternate===null?f.tag=17:(u=Oi(-1,1),u.tag=2,vs(f,u,1))),f.lanes|=1),a):(a.flags|=65536,a.lanes=b,a)}var EO=R.ReactCurrentOwner,Zn=!1;function Un(a,u,f,m){u.child=a===null?d0(u,null,f,m):ca(u,a.child,f,m)}function q0(a,u,f,m,b){f=f.render;var S=u.ref;return da(u,b),m=Op(a,u,f,m,S,b),f=Ip(),a!==null&&!Zn?(u.updateQueue=a.updateQueue,u.flags&=-2053,a.lanes&=~b,Ii(a,u,b)):(Mt&&f&&pp(u),u.flags|=1,Un(a,u,m,b),u.child)}function G0(a,u,f,m,b){if(a===null){var S=f.type;return typeof S=="function"&&!lg(S)&&S.defaultProps===void 0&&f.compare===null&&f.defaultProps===void 0?(u.tag=15,u.type=S,Y0(a,u,S,m,b)):(a=td(f.type,null,m,u,u.mode,b),a.ref=u.ref,a.return=u,u.child=a)}if(S=a.child,(a.lanes&b)===0){var A=S.memoizedProps;if(f=f.compare,f=f!==null?f:El,f(A,m)&&a.ref===u.ref)return Ii(a,u,b)}return u.flags|=1,a=xs(S,m),a.ref=u.ref,a.return=u,u.child=a}function Y0(a,u,f,m,b){if(a!==null){var S=a.memoizedProps;if(El(S,m)&&a.ref===u.ref)if(Zn=!1,u.pendingProps=m=S,(a.lanes&b)!==0)(a.flags&131072)!==0&&(Zn=!0);else return u.lanes=a.lanes,Ii(a,u,b)}return Hp(a,u,f,m,b)}function K0(a,u,f){var m=u.pendingProps,b=m.children,S=a!==null?a.memoizedState:null;if(m.mode==="hidden")if((u.mode&1)===0)u.memoizedState={baseLanes:0,cachePool:null,transitions:null},Et(ga,pr),pr|=f;else{if((f&1073741824)===0)return a=S!==null?S.baseLanes|f:f,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:a,cachePool:null,transitions:null},u.updateQueue=null,Et(ga,pr),pr|=a,null;u.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=S!==null?S.baseLanes:f,Et(ga,pr),pr|=m}else S!==null?(m=S.baseLanes|f,u.memoizedState=null):m=f,Et(ga,pr),pr|=m;return Un(a,u,b,f),u.child}function Q0(a,u){var f=u.ref;(a===null&&f!==null||a!==null&&a.ref!==f)&&(u.flags|=512,u.flags|=2097152)}function Hp(a,u,f,m,b){var S=Xn(f)?Zs:Dn.current;return S=sa(u,S),da(u,b),f=Op(a,u,f,m,S,b),m=Ip(),a!==null&&!Zn?(u.updateQueue=a.updateQueue,u.flags&=-2053,a.lanes&=~b,Ii(a,u,b)):(Mt&&m&&pp(u),u.flags|=1,Un(a,u,f,b),u.child)}function X0(a,u,f,m,b){if(Xn(f)){var S=!0;Tu(u)}else S=!1;if(da(u,b),u.stateNode===null)Wu(a,u),U0(u,f,m),Fp(u,f,m,b),m=!0;else if(a===null){var A=u.stateNode,N=u.memoizedProps;A.props=N;var j=A.context,W=f.contextType;typeof W=="object"&&W!==null?W=Er(W):(W=Xn(f)?Zs:Dn.current,W=sa(u,W));var J=f.getDerivedStateFromProps,te=typeof J=="function"||typeof A.getSnapshotBeforeUpdate=="function";te||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(N!==m||j!==W)&&B0(u,A,m,W),ms=!1;var Z=u.memoizedState;A.state=Z,Pu(u,m,A,b),j=u.memoizedState,N!==m||Z!==j||Qn.current||ms?(typeof J=="function"&&(Lp(u,f,J,m),j=u.memoizedState),(N=ms||F0(u,f,N,m,Z,j,W))?(te||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(u.flags|=4194308)):(typeof A.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=m,u.memoizedState=j),A.props=m,A.state=j,A.context=W,m=N):(typeof A.componentDidMount=="function"&&(u.flags|=4194308),m=!1)}else{A=u.stateNode,f0(a,u),N=u.memoizedProps,W=u.type===u.elementType?N:$r(u.type,N),A.props=W,te=u.pendingProps,Z=A.context,j=f.contextType,typeof j=="object"&&j!==null?j=Er(j):(j=Xn(f)?Zs:Dn.current,j=sa(u,j));var he=f.getDerivedStateFromProps;(J=typeof he=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(N!==te||Z!==j)&&B0(u,A,m,j),ms=!1,Z=u.memoizedState,A.state=Z,Pu(u,m,A,b);var ve=u.memoizedState;N!==te||Z!==ve||Qn.current||ms?(typeof he=="function"&&(Lp(u,f,he,m),ve=u.memoizedState),(W=ms||F0(u,f,W,m,Z,ve,j)||!1)?(J||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(m,ve,j),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(m,ve,j)),typeof A.componentDidUpdate=="function"&&(u.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof A.componentDidUpdate!="function"||N===a.memoizedProps&&Z===a.memoizedState||(u.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||N===a.memoizedProps&&Z===a.memoizedState||(u.flags|=1024),u.memoizedProps=m,u.memoizedState=ve),A.props=m,A.state=ve,A.context=j,m=W):(typeof A.componentDidUpdate!="function"||N===a.memoizedProps&&Z===a.memoizedState||(u.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||N===a.memoizedProps&&Z===a.memoizedState||(u.flags|=1024),m=!1)}return zp(a,u,f,m,S,b)}function zp(a,u,f,m,b,S){Q0(a,u);var A=(u.flags&128)!==0;if(!m&&!A)return b&&n0(u,f,!1),Ii(a,u,S);m=u.stateNode,EO.current=u;var N=A&&typeof f.getDerivedStateFromError!="function"?null:m.render();return u.flags|=1,a!==null&&A?(u.child=ca(u,a.child,null,S),u.child=ca(u,null,N,S)):Un(a,u,N,S),u.memoizedState=m.state,b&&n0(u,f,!0),u.child}function Z0(a){var u=a.stateNode;u.pendingContext?e0(a,u.pendingContext,u.pendingContext!==u.context):u.context&&e0(a,u.context,!1),Cp(a,u.containerInfo)}function J0(a,u,f,m,b){return la(),yp(b),u.flags|=256,Un(a,u,f,m),u.child}var $p={dehydrated:null,treeContext:null,retryLane:0};function Wp(a){return{baseLanes:a,cachePool:null,transitions:null}}function e_(a,u,f){var m=u.pendingProps,b=Lt.current,S=!1,A=(u.flags&128)!==0,N;if((N=A)||(N=a!==null&&a.memoizedState===null?!1:(b&2)!==0),N?(S=!0,u.flags&=-129):(a===null||a.memoizedState!==null)&&(b|=1),Et(Lt,b&1),a===null)return vp(u),a=u.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((u.mode&1)===0?u.lanes=1:a.data==="$!"?u.lanes=8:u.lanes=1073741824,null):(A=m.children,a=m.fallback,S?(m=u.mode,S=u.child,A={mode:"hidden",children:A},(m&1)===0&&S!==null?(S.childLanes=0,S.pendingProps=A):S=nd(A,m,0,null),a=lo(a,m,f,null),S.return=u,a.return=u,S.sibling=a,u.child=S,u.child.memoizedState=Wp(f),u.memoizedState=$p,a):Vp(u,A));if(b=a.memoizedState,b!==null&&(N=b.dehydrated,N!==null))return CO(a,u,A,m,N,b,f);if(S){S=m.fallback,A=u.mode,b=a.child,N=b.sibling;var j={mode:"hidden",children:m.children};return(A&1)===0&&u.child!==b?(m=u.child,m.childLanes=0,m.pendingProps=j,u.deletions=null):(m=xs(b,j),m.subtreeFlags=b.subtreeFlags&14680064),N!==null?S=xs(N,S):(S=lo(S,A,f,null),S.flags|=2),S.return=u,m.return=u,m.sibling=S,u.child=m,m=S,S=u.child,A=a.child.memoizedState,A=A===null?Wp(f):{baseLanes:A.baseLanes|f,cachePool:null,transitions:A.transitions},S.memoizedState=A,S.childLanes=a.childLanes&~f,u.memoizedState=$p,m}return S=a.child,a=S.sibling,m=xs(S,{mode:"visible",children:m.children}),(u.mode&1)===0&&(m.lanes=f),m.return=u,m.sibling=null,a!==null&&(f=u.deletions,f===null?(u.deletions=[a],u.flags|=16):f.push(a)),u.child=m,u.memoizedState=null,m}function Vp(a,u){return u=nd({mode:"visible",children:u},a.mode,0,null),u.return=a,a.child=u}function $u(a,u,f,m){return m!==null&&yp(m),ca(u,a.child,null,f),a=Vp(u,u.pendingProps.children),a.flags|=2,u.memoizedState=null,a}function CO(a,u,f,m,b,S,A){if(f)return u.flags&256?(u.flags&=-257,m=Up(Error(t(422))),$u(a,u,A,m)):u.memoizedState!==null?(u.child=a.child,u.flags|=128,null):(S=m.fallback,b=u.mode,m=nd({mode:"visible",children:m.children},b,0,null),S=lo(S,b,A,null),S.flags|=2,m.return=u,S.return=u,m.sibling=S,u.child=m,(u.mode&1)!==0&&ca(u,a.child,null,A),u.child.memoizedState=Wp(A),u.memoizedState=$p,S);if((u.mode&1)===0)return $u(a,u,A,null);if(b.data==="$!"){if(m=b.nextSibling&&b.nextSibling.dataset,m)var N=m.dgst;return m=N,S=Error(t(419)),m=Up(S,m,void 0),$u(a,u,A,m)}if(N=(A&a.childLanes)!==0,Zn||N){if(m=bn,m!==null){switch(A&-A){case 4:b=2;break;case 16:b=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:b=32;break;case 536870912:b=268435456;break;default:b=0}b=(b&(m.suspendedLanes|A))!==0?0:b,b!==0&&b!==S.retryLane&&(S.retryLane=b,Ri(a,b),qr(m,a,b,-1))}return ag(),m=Up(Error(t(421))),$u(a,u,A,m)}return b.data==="$?"?(u.flags|=128,u.child=a.child,u=FO.bind(null,a),b._reactRetry=u,null):(a=S.treeContext,fr=hs(b.nextSibling),hr=u,Mt=!0,zr=null,a!==null&&(Sr[xr++]=Ai,Sr[xr++]=Di,Sr[xr++]=Js,Ai=a.id,Di=a.overflow,Js=u),u=Vp(u,m.children),u.flags|=4096,u)}function t_(a,u,f){a.lanes|=u;var m=a.alternate;m!==null&&(m.lanes|=u),Sp(a.return,u,f)}function qp(a,u,f,m,b){var S=a.memoizedState;S===null?a.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:m,tail:f,tailMode:b}:(S.isBackwards=u,S.rendering=null,S.renderingStartTime=0,S.last=m,S.tail=f,S.tailMode=b)}function n_(a,u,f){var m=u.pendingProps,b=m.revealOrder,S=m.tail;if(Un(a,u,m.children,f),m=Lt.current,(m&2)!==0)m=m&1|2,u.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=u.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&t_(a,f,u);else if(a.tag===19)t_(a,f,u);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===u)break e;for(;a.sibling===null;){if(a.return===null||a.return===u)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}m&=1}if(Et(Lt,m),(u.mode&1)===0)u.memoizedState=null;else switch(b){case"forwards":for(f=u.child,b=null;f!==null;)a=f.alternate,a!==null&&ju(a)===null&&(b=f),f=f.sibling;f=b,f===null?(b=u.child,u.child=null):(b=f.sibling,f.sibling=null),qp(u,!1,b,f,S);break;case"backwards":for(f=null,b=u.child,u.child=null;b!==null;){if(a=b.alternate,a!==null&&ju(a)===null){u.child=b;break}a=b.sibling,b.sibling=f,f=b,b=a}qp(u,!0,f,null,S);break;case"together":qp(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function Wu(a,u){(u.mode&1)===0&&a!==null&&(a.alternate=null,u.alternate=null,u.flags|=2)}function Ii(a,u,f){if(a!==null&&(u.dependencies=a.dependencies),io|=u.lanes,(f&u.childLanes)===0)return null;if(a!==null&&u.child!==a.child)throw Error(t(153));if(u.child!==null){for(a=u.child,f=xs(a,a.pendingProps),u.child=f,f.return=u;a.sibling!==null;)a=a.sibling,f=f.sibling=xs(a,a.pendingProps),f.return=u;f.sibling=null}return u.child}function TO(a,u,f){switch(u.tag){case 3:Z0(u),la();break;case 5:m0(u);break;case 1:Xn(u.type)&&Tu(u);break;case 4:Cp(u,u.stateNode.containerInfo);break;case 10:var m=u.type._context,b=u.memoizedProps.value;Et(Iu,m._currentValue),m._currentValue=b;break;case 13:if(m=u.memoizedState,m!==null)return m.dehydrated!==null?(Et(Lt,Lt.current&1),u.flags|=128,null):(f&u.child.childLanes)!==0?e_(a,u,f):(Et(Lt,Lt.current&1),a=Ii(a,u,f),a!==null?a.sibling:null);Et(Lt,Lt.current&1);break;case 19:if(m=(f&u.childLanes)!==0,(a.flags&128)!==0){if(m)return n_(a,u,f);u.flags|=128}if(b=u.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),Et(Lt,Lt.current),m)break;return null;case 22:case 23:return u.lanes=0,K0(a,u,f)}return Ii(a,u,f)}var r_,Gp,i_,s_;r_=function(a,u){for(var f=u.child;f!==null;){if(f.tag===5||f.tag===6)a.appendChild(f.stateNode);else if(f.tag!==4&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return;f=f.return}f.sibling.return=f.return,f=f.sibling}},Gp=function(){},i_=function(a,u,f,m){var b=a.memoizedProps;if(b!==m){a=u.stateNode,no(ai.current);var S=null;switch(f){case"input":b=ge(a,b),m=ge(a,m),S=[];break;case"select":b=Y({},b,{value:void 0}),m=Y({},m,{value:void 0}),S=[];break;case"textarea":b=Ue(a,b),m=Ue(a,m),S=[];break;default:typeof b.onClick!="function"&&typeof m.onClick=="function"&&(a.onclick=xu)}at(f,m);var A;f=null;for(W in b)if(!m.hasOwnProperty(W)&&b.hasOwnProperty(W)&&b[W]!=null)if(W==="style"){var N=b[W];for(A in N)N.hasOwnProperty(A)&&(f||(f={}),f[A]="")}else W!=="dangerouslySetInnerHTML"&&W!=="children"&&W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&W!=="autoFocus"&&(i.hasOwnProperty(W)?S||(S=[]):(S=S||[]).push(W,null));for(W in m){var j=m[W];if(N=b?.[W],m.hasOwnProperty(W)&&j!==N&&(j!=null||N!=null))if(W==="style")if(N){for(A in N)!N.hasOwnProperty(A)||j&&j.hasOwnProperty(A)||(f||(f={}),f[A]="");for(A in j)j.hasOwnProperty(A)&&N[A]!==j[A]&&(f||(f={}),f[A]=j[A])}else f||(S||(S=[]),S.push(W,f)),f=j;else W==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,N=N?N.__html:void 0,j!=null&&N!==j&&(S=S||[]).push(W,j)):W==="children"?typeof j!="string"&&typeof j!="number"||(S=S||[]).push(W,""+j):W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&(i.hasOwnProperty(W)?(j!=null&&W==="onScroll"&&At("scroll",a),S||N===j||(S=[])):(S=S||[]).push(W,j))}f&&(S=S||[]).push("style",f);var W=S;(u.updateQueue=W)&&(u.flags|=4)}},s_=function(a,u,f,m){f!==m&&(u.flags|=4)};function Ul(a,u){if(!Mt)switch(a.tailMode){case"hidden":u=a.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?a.tail=null:f.sibling=null;break;case"collapsed":f=a.tail;for(var m=null;f!==null;)f.alternate!==null&&(m=f),f=f.sibling;m===null?u||a.tail===null?a.tail=null:a.tail.sibling=null:m.sibling=null}}function On(a){var u=a.alternate!==null&&a.alternate.child===a.child,f=0,m=0;if(u)for(var b=a.child;b!==null;)f|=b.lanes|b.childLanes,m|=b.subtreeFlags&14680064,m|=b.flags&14680064,b.return=a,b=b.sibling;else for(b=a.child;b!==null;)f|=b.lanes|b.childLanes,m|=b.subtreeFlags,m|=b.flags,b.return=a,b=b.sibling;return a.subtreeFlags|=m,a.childLanes=f,u}function kO(a,u,f){var m=u.pendingProps;switch(gp(u),u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return On(u),null;case 1:return Xn(u.type)&&Cu(),On(u),null;case 3:return m=u.stateNode,ha(),Dt(Qn),Dt(Dn),Ap(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(a===null||a.child===null)&&(Ru(u)?u.flags|=4:a===null||a.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,zr!==null&&(ig(zr),zr=null))),Gp(a,u),On(u),null;case 5:Tp(u);var b=no(Nl.current);if(f=u.type,a!==null&&u.stateNode!=null)i_(a,u,f,m,b),a.ref!==u.ref&&(u.flags|=512,u.flags|=2097152);else{if(!m){if(u.stateNode===null)throw Error(t(166));return On(u),null}if(a=no(ai.current),Ru(u)){m=u.stateNode,f=u.type;var S=u.memoizedProps;switch(m[oi]=u,m[Dl]=S,a=(u.mode&1)!==0,f){case"dialog":At("cancel",m),At("close",m);break;case"iframe":case"object":case"embed":At("load",m);break;case"video":case"audio":for(b=0;b<Tl.length;b++)At(Tl[b],m);break;case"source":At("error",m);break;case"img":case"image":case"link":At("error",m),At("load",m);break;case"details":At("toggle",m);break;case"input":Fe(m,S),At("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!S.multiple},At("invalid",m);break;case"textarea":X(m,S),At("invalid",m)}at(f,S),b=null;for(var A in S)if(S.hasOwnProperty(A)){var N=S[A];A==="children"?typeof N=="string"?m.textContent!==N&&(S.suppressHydrationWarning!==!0&&Su(m.textContent,N,a),b=["children",N]):typeof N=="number"&&m.textContent!==""+N&&(S.suppressHydrationWarning!==!0&&Su(m.textContent,N,a),b=["children",""+N]):i.hasOwnProperty(A)&&N!=null&&A==="onScroll"&&At("scroll",m)}switch(f){case"input":Wt(m),on(m,S,!0);break;case"textarea":Wt(m),Be(m);break;case"select":case"option":break;default:typeof S.onClick=="function"&&(m.onclick=xu)}m=b,u.updateQueue=m,m!==null&&(u.flags|=4)}else{A=b.nodeType===9?b:b.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=je(f)),a==="http://www.w3.org/1999/xhtml"?f==="script"?(a=A.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof m.is=="string"?a=A.createElement(f,{is:m.is}):(a=A.createElement(f),f==="select"&&(A=a,m.multiple?A.multiple=!0:m.size&&(A.size=m.size))):a=A.createElementNS(a,f),a[oi]=u,a[Dl]=m,r_(a,u,!1,!1),u.stateNode=a;e:{switch(A=Yt(f,m),f){case"dialog":At("cancel",a),At("close",a),b=m;break;case"iframe":case"object":case"embed":At("load",a),b=m;break;case"video":case"audio":for(b=0;b<Tl.length;b++)At(Tl[b],a);b=m;break;case"source":At("error",a),b=m;break;case"img":case"image":case"link":At("error",a),At("load",a),b=m;break;case"details":At("toggle",a),b=m;break;case"input":Fe(a,m),b=ge(a,m),At("invalid",a);break;case"option":b=m;break;case"select":a._wrapperState={wasMultiple:!!m.multiple},b=Y({},m,{value:void 0}),At("invalid",a);break;case"textarea":X(a,m),b=Ue(a,m),At("invalid",a);break;default:b=m}at(f,b),N=b;for(S in N)if(N.hasOwnProperty(S)){var j=N[S];S==="style"?wr(a,j):S==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,j!=null&&Ie(a,j)):S==="children"?typeof j=="string"?(f!=="textarea"||j!=="")&&$e(a,j):typeof j=="number"&&$e(a,""+j):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(i.hasOwnProperty(S)?j!=null&&S==="onScroll"&&At("scroll",a):j!=null&&T(a,S,j,A))}switch(f){case"input":Wt(a),on(a,m,!1);break;case"textarea":Wt(a),Be(a);break;case"option":m.value!=null&&a.setAttribute("value",""+se(m.value));break;case"select":a.multiple=!!m.multiple,S=m.value,S!=null?dt(a,!!m.multiple,S,!1):m.defaultValue!=null&&dt(a,!!m.multiple,m.defaultValue,!0);break;default:typeof b.onClick=="function"&&(a.onclick=xu)}switch(f){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(u.flags|=4)}u.ref!==null&&(u.flags|=512,u.flags|=2097152)}return On(u),null;case 6:if(a&&u.stateNode!=null)s_(a,u,a.memoizedProps,m);else{if(typeof m!="string"&&u.stateNode===null)throw Error(t(166));if(f=no(Nl.current),no(ai.current),Ru(u)){if(m=u.stateNode,f=u.memoizedProps,m[oi]=u,(S=m.nodeValue!==f)&&(a=hr,a!==null))switch(a.tag){case 3:Su(m.nodeValue,f,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&Su(m.nodeValue,f,(a.mode&1)!==0)}S&&(u.flags|=4)}else m=(f.nodeType===9?f:f.ownerDocument).createTextNode(m),m[oi]=u,u.stateNode=m}return On(u),null;case 13:if(Dt(Lt),m=u.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(Mt&&fr!==null&&(u.mode&1)!==0&&(u.flags&128)===0)l0(),la(),u.flags|=98560,S=!1;else if(S=Ru(u),m!==null&&m.dehydrated!==null){if(a===null){if(!S)throw Error(t(318));if(S=u.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(t(317));S[oi]=u}else la(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;On(u),S=!1}else zr!==null&&(ig(zr),zr=null),S=!0;if(!S)return u.flags&65536?u:null}return(u.flags&128)!==0?(u.lanes=f,u):(m=m!==null,m!==(a!==null&&a.memoizedState!==null)&&m&&(u.child.flags|=8192,(u.mode&1)!==0&&(a===null||(Lt.current&1)!==0?ln===0&&(ln=3):ag())),u.updateQueue!==null&&(u.flags|=4),On(u),null);case 4:return ha(),Gp(a,u),a===null&&kl(u.stateNode.containerInfo),On(u),null;case 10:return wp(u.type._context),On(u),null;case 17:return Xn(u.type)&&Cu(),On(u),null;case 19:if(Dt(Lt),S=u.memoizedState,S===null)return On(u),null;if(m=(u.flags&128)!==0,A=S.rendering,A===null)if(m)Ul(S,!1);else{if(ln!==0||a!==null&&(a.flags&128)!==0)for(a=u.child;a!==null;){if(A=ju(a),A!==null){for(u.flags|=128,Ul(S,!1),m=A.updateQueue,m!==null&&(u.updateQueue=m,u.flags|=4),u.subtreeFlags=0,m=f,f=u.child;f!==null;)S=f,a=m,S.flags&=14680066,A=S.alternate,A===null?(S.childLanes=0,S.lanes=a,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=A.childLanes,S.lanes=A.lanes,S.child=A.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=A.memoizedProps,S.memoizedState=A.memoizedState,S.updateQueue=A.updateQueue,S.type=A.type,a=A.dependencies,S.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),f=f.sibling;return Et(Lt,Lt.current&1|2),u.child}a=a.sibling}S.tail!==null&&Xt()>ma&&(u.flags|=128,m=!0,Ul(S,!1),u.lanes=4194304)}else{if(!m)if(a=ju(A),a!==null){if(u.flags|=128,m=!0,f=a.updateQueue,f!==null&&(u.updateQueue=f,u.flags|=4),Ul(S,!0),S.tail===null&&S.tailMode==="hidden"&&!A.alternate&&!Mt)return On(u),null}else 2*Xt()-S.renderingStartTime>ma&&f!==1073741824&&(u.flags|=128,m=!0,Ul(S,!1),u.lanes=4194304);S.isBackwards?(A.sibling=u.child,u.child=A):(f=S.last,f!==null?f.sibling=A:u.child=A,S.last=A)}return S.tail!==null?(u=S.tail,S.rendering=u,S.tail=u.sibling,S.renderingStartTime=Xt(),u.sibling=null,f=Lt.current,Et(Lt,m?f&1|2:f&1),u):(On(u),null);case 22:case 23:return og(),m=u.memoizedState!==null,a!==null&&a.memoizedState!==null!==m&&(u.flags|=8192),m&&(u.mode&1)!==0?(pr&1073741824)!==0&&(On(u),u.subtreeFlags&6&&(u.flags|=8192)):On(u),null;case 24:return null;case 25:return null}throw Error(t(156,u.tag))}function AO(a,u){switch(gp(u),u.tag){case 1:return Xn(u.type)&&Cu(),a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 3:return ha(),Dt(Qn),Dt(Dn),Ap(),a=u.flags,(a&65536)!==0&&(a&128)===0?(u.flags=a&-65537|128,u):null;case 5:return Tp(u),null;case 13:if(Dt(Lt),a=u.memoizedState,a!==null&&a.dehydrated!==null){if(u.alternate===null)throw Error(t(340));la()}return a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 19:return Dt(Lt),null;case 4:return ha(),null;case 10:return wp(u.type._context),null;case 22:case 23:return og(),null;case 24:return null;default:return null}}var Vu=!1,In=!1,DO=typeof WeakSet=="function"?WeakSet:Set,me=null;function pa(a,u){var f=a.ref;if(f!==null)if(typeof f=="function")try{f(null)}catch(m){qt(a,u,m)}else f.current=null}function Yp(a,u,f){try{f()}catch(m){qt(a,u,m)}}var o_=!1;function RO(a,u){if(op=du,a=Fb(),Zf(a)){if("selectionStart"in a)var f={start:a.selectionStart,end:a.selectionEnd};else e:{f=(f=a.ownerDocument)&&f.defaultView||window;var m=f.getSelection&&f.getSelection();if(m&&m.rangeCount!==0){f=m.anchorNode;var b=m.anchorOffset,S=m.focusNode;m=m.focusOffset;try{f.nodeType,S.nodeType}catch{f=null;break e}var A=0,N=-1,j=-1,W=0,J=0,te=a,Z=null;t:for(;;){for(var he;te!==f||b!==0&&te.nodeType!==3||(N=A+b),te!==S||m!==0&&te.nodeType!==3||(j=A+m),te.nodeType===3&&(A+=te.nodeValue.length),(he=te.firstChild)!==null;)Z=te,te=he;for(;;){if(te===a)break t;if(Z===f&&++W===b&&(N=A),Z===S&&++J===m&&(j=A),(he=te.nextSibling)!==null)break;te=Z,Z=te.parentNode}te=he}f=N===-1||j===-1?null:{start:N,end:j}}else f=null}f=f||{start:0,end:0}}else f=null;for(ap={focusedElem:a,selectionRange:f},du=!1,me=u;me!==null;)if(u=me,a=u.child,(u.subtreeFlags&1028)!==0&&a!==null)a.return=u,me=a;else for(;me!==null;){u=me;try{var ve=u.alternate;if((u.flags&1024)!==0)switch(u.tag){case 0:case 11:case 15:break;case 1:if(ve!==null){var _e=ve.memoizedProps,Zt=ve.memoizedState,B=u.stateNode,U=B.getSnapshotBeforeUpdate(u.elementType===u.type?_e:$r(u.type,_e),Zt);B.__reactInternalSnapshotBeforeUpdate=U}break;case 3:var H=u.stateNode.containerInfo;H.nodeType===1?H.textContent="":H.nodeType===9&&H.documentElement&&H.removeChild(H.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(oe){qt(u,u.return,oe)}if(a=u.sibling,a!==null){a.return=u.return,me=a;break}me=u.return}return ve=o_,o_=!1,ve}function Bl(a,u,f){var m=u.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var b=m=m.next;do{if((b.tag&a)===a){var S=b.destroy;b.destroy=void 0,S!==void 0&&Yp(u,f,S)}b=b.next}while(b!==m)}}function qu(a,u){if(u=u.updateQueue,u=u!==null?u.lastEffect:null,u!==null){var f=u=u.next;do{if((f.tag&a)===a){var m=f.create;f.destroy=m()}f=f.next}while(f!==u)}}function Kp(a){var u=a.ref;if(u!==null){var f=a.stateNode;switch(a.tag){case 5:a=f;break;default:a=f}typeof u=="function"?u(a):u.current=a}}function a_(a){var u=a.alternate;u!==null&&(a.alternate=null,a_(u)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(u=a.stateNode,u!==null&&(delete u[oi],delete u[Dl],delete u[dp],delete u[hO],delete u[fO])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function l_(a){return a.tag===5||a.tag===3||a.tag===4}function c_(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||l_(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Qp(a,u,f){var m=a.tag;if(m===5||m===6)a=a.stateNode,u?f.nodeType===8?f.parentNode.insertBefore(a,u):f.insertBefore(a,u):(f.nodeType===8?(u=f.parentNode,u.insertBefore(a,f)):(u=f,u.appendChild(a)),f=f._reactRootContainer,f!=null||u.onclick!==null||(u.onclick=xu));else if(m!==4&&(a=a.child,a!==null))for(Qp(a,u,f),a=a.sibling;a!==null;)Qp(a,u,f),a=a.sibling}function Xp(a,u,f){var m=a.tag;if(m===5||m===6)a=a.stateNode,u?f.insertBefore(a,u):f.appendChild(a);else if(m!==4&&(a=a.child,a!==null))for(Xp(a,u,f),a=a.sibling;a!==null;)Xp(a,u,f),a=a.sibling}var Cn=null,Wr=!1;function ys(a,u,f){for(f=f.child;f!==null;)u_(a,u,f),f=f.sibling}function u_(a,u,f){if(si&&typeof si.onCommitFiberUnmount=="function")try{si.onCommitFiberUnmount(su,f)}catch{}switch(f.tag){case 5:In||pa(f,u);case 6:var m=Cn,b=Wr;Cn=null,ys(a,u,f),Cn=m,Wr=b,Cn!==null&&(Wr?(a=Cn,f=f.stateNode,a.nodeType===8?a.parentNode.removeChild(f):a.removeChild(f)):Cn.removeChild(f.stateNode));break;case 18:Cn!==null&&(Wr?(a=Cn,f=f.stateNode,a.nodeType===8?up(a.parentNode,f):a.nodeType===1&&up(a,f),yl(a)):up(Cn,f.stateNode));break;case 4:m=Cn,b=Wr,Cn=f.stateNode.containerInfo,Wr=!0,ys(a,u,f),Cn=m,Wr=b;break;case 0:case 11:case 14:case 15:if(!In&&(m=f.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){b=m=m.next;do{var S=b,A=S.destroy;S=S.tag,A!==void 0&&((S&2)!==0||(S&4)!==0)&&Yp(f,u,A),b=b.next}while(b!==m)}ys(a,u,f);break;case 1:if(!In&&(pa(f,u),m=f.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=f.memoizedProps,m.state=f.memoizedState,m.componentWillUnmount()}catch(N){qt(f,u,N)}ys(a,u,f);break;case 21:ys(a,u,f);break;case 22:f.mode&1?(In=(m=In)||f.memoizedState!==null,ys(a,u,f),In=m):ys(a,u,f);break;default:ys(a,u,f)}}function d_(a){var u=a.updateQueue;if(u!==null){a.updateQueue=null;var f=a.stateNode;f===null&&(f=a.stateNode=new DO),u.forEach(function(m){var b=UO.bind(null,a,m);f.has(m)||(f.add(m),m.then(b,b))})}}function Vr(a,u){var f=u.deletions;if(f!==null)for(var m=0;m<f.length;m++){var b=f[m];try{var S=a,A=u,N=A;e:for(;N!==null;){switch(N.tag){case 5:Cn=N.stateNode,Wr=!1;break e;case 3:Cn=N.stateNode.containerInfo,Wr=!0;break e;case 4:Cn=N.stateNode.containerInfo,Wr=!0;break e}N=N.return}if(Cn===null)throw Error(t(160));u_(S,A,b),Cn=null,Wr=!1;var j=b.alternate;j!==null&&(j.return=null),b.return=null}catch(W){qt(b,u,W)}}if(u.subtreeFlags&12854)for(u=u.child;u!==null;)h_(u,a),u=u.sibling}function h_(a,u){var f=a.alternate,m=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(Vr(u,a),ci(a),m&4){try{Bl(3,a,a.return),qu(3,a)}catch(_e){qt(a,a.return,_e)}try{Bl(5,a,a.return)}catch(_e){qt(a,a.return,_e)}}break;case 1:Vr(u,a),ci(a),m&512&&f!==null&&pa(f,f.return);break;case 5:if(Vr(u,a),ci(a),m&512&&f!==null&&pa(f,f.return),a.flags&32){var b=a.stateNode;try{$e(b,"")}catch(_e){qt(a,a.return,_e)}}if(m&4&&(b=a.stateNode,b!=null)){var S=a.memoizedProps,A=f!==null?f.memoizedProps:S,N=a.type,j=a.updateQueue;if(a.updateQueue=null,j!==null)try{N==="input"&&S.type==="radio"&&S.name!=null&&et(b,S),Yt(N,A);var W=Yt(N,S);for(A=0;A<j.length;A+=2){var J=j[A],te=j[A+1];J==="style"?wr(b,te):J==="dangerouslySetInnerHTML"?Ie(b,te):J==="children"?$e(b,te):T(b,J,te,W)}switch(N){case"input":xt(b,S);break;case"textarea":ye(b,S);break;case"select":var Z=b._wrapperState.wasMultiple;b._wrapperState.wasMultiple=!!S.multiple;var he=S.value;he!=null?dt(b,!!S.multiple,he,!1):Z!==!!S.multiple&&(S.defaultValue!=null?dt(b,!!S.multiple,S.defaultValue,!0):dt(b,!!S.multiple,S.multiple?[]:"",!1))}b[Dl]=S}catch(_e){qt(a,a.return,_e)}}break;case 6:if(Vr(u,a),ci(a),m&4){if(a.stateNode===null)throw Error(t(162));b=a.stateNode,S=a.memoizedProps;try{b.nodeValue=S}catch(_e){qt(a,a.return,_e)}}break;case 3:if(Vr(u,a),ci(a),m&4&&f!==null&&f.memoizedState.isDehydrated)try{yl(u.containerInfo)}catch(_e){qt(a,a.return,_e)}break;case 4:Vr(u,a),ci(a);break;case 13:Vr(u,a),ci(a),b=a.child,b.flags&8192&&(S=b.memoizedState!==null,b.stateNode.isHidden=S,!S||b.alternate!==null&&b.alternate.memoizedState!==null||(eg=Xt())),m&4&&d_(a);break;case 22:if(J=f!==null&&f.memoizedState!==null,a.mode&1?(In=(W=In)||J,Vr(u,a),In=W):Vr(u,a),ci(a),m&8192){if(W=a.memoizedState!==null,(a.stateNode.isHidden=W)&&!J&&(a.mode&1)!==0)for(me=a,J=a.child;J!==null;){for(te=me=J;me!==null;){switch(Z=me,he=Z.child,Z.tag){case 0:case 11:case 14:case 15:Bl(4,Z,Z.return);break;case 1:pa(Z,Z.return);var ve=Z.stateNode;if(typeof ve.componentWillUnmount=="function"){m=Z,f=Z.return;try{u=m,ve.props=u.memoizedProps,ve.state=u.memoizedState,ve.componentWillUnmount()}catch(_e){qt(m,f,_e)}}break;case 5:pa(Z,Z.return);break;case 22:if(Z.memoizedState!==null){g_(te);continue}}he!==null?(he.return=Z,me=he):g_(te)}J=J.sibling}e:for(J=null,te=a;;){if(te.tag===5){if(J===null){J=te;try{b=te.stateNode,W?(S=b.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none"):(N=te.stateNode,j=te.memoizedProps.style,A=j!=null&&j.hasOwnProperty("display")?j.display:null,N.style.display=ft("display",A))}catch(_e){qt(a,a.return,_e)}}}else if(te.tag===6){if(J===null)try{te.stateNode.nodeValue=W?"":te.memoizedProps}catch(_e){qt(a,a.return,_e)}}else if((te.tag!==22&&te.tag!==23||te.memoizedState===null||te===a)&&te.child!==null){te.child.return=te,te=te.child;continue}if(te===a)break e;for(;te.sibling===null;){if(te.return===null||te.return===a)break e;J===te&&(J=null),te=te.return}J===te&&(J=null),te.sibling.return=te.return,te=te.sibling}}break;case 19:Vr(u,a),ci(a),m&4&&d_(a);break;case 21:break;default:Vr(u,a),ci(a)}}function ci(a){var u=a.flags;if(u&2){try{e:{for(var f=a.return;f!==null;){if(l_(f)){var m=f;break e}f=f.return}throw Error(t(160))}switch(m.tag){case 5:var b=m.stateNode;m.flags&32&&($e(b,""),m.flags&=-33);var S=c_(a);Xp(a,S,b);break;case 3:case 4:var A=m.stateNode.containerInfo,N=c_(a);Qp(a,N,A);break;default:throw Error(t(161))}}catch(j){qt(a,a.return,j)}a.flags&=-3}u&4096&&(a.flags&=-4097)}function OO(a,u,f){me=a,f_(a)}function f_(a,u,f){for(var m=(a.mode&1)!==0;me!==null;){var b=me,S=b.child;if(b.tag===22&&m){var A=b.memoizedState!==null||Vu;if(!A){var N=b.alternate,j=N!==null&&N.memoizedState!==null||In;N=Vu;var W=In;if(Vu=A,(In=j)&&!W)for(me=b;me!==null;)A=me,j=A.child,A.tag===22&&A.memoizedState!==null?m_(b):j!==null?(j.return=A,me=j):m_(b);for(;S!==null;)me=S,f_(S),S=S.sibling;me=b,Vu=N,In=W}p_(a)}else(b.subtreeFlags&8772)!==0&&S!==null?(S.return=b,me=S):p_(a)}}function p_(a){for(;me!==null;){var u=me;if((u.flags&8772)!==0){var f=u.alternate;try{if((u.flags&8772)!==0)switch(u.tag){case 0:case 11:case 15:In||qu(5,u);break;case 1:var m=u.stateNode;if(u.flags&4&&!In)if(f===null)m.componentDidMount();else{var b=u.elementType===u.type?f.memoizedProps:$r(u.type,f.memoizedProps);m.componentDidUpdate(b,f.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var S=u.updateQueue;S!==null&&g0(u,S,m);break;case 3:var A=u.updateQueue;if(A!==null){if(f=null,u.child!==null)switch(u.child.tag){case 5:f=u.child.stateNode;break;case 1:f=u.child.stateNode}g0(u,A,f)}break;case 5:var N=u.stateNode;if(f===null&&u.flags&4){f=N;var j=u.memoizedProps;switch(u.type){case"button":case"input":case"select":case"textarea":j.autoFocus&&f.focus();break;case"img":j.src&&(f.src=j.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(u.memoizedState===null){var W=u.alternate;if(W!==null){var J=W.memoizedState;if(J!==null){var te=J.dehydrated;te!==null&&yl(te)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}In||u.flags&512&&Kp(u)}catch(Z){qt(u,u.return,Z)}}if(u===a){me=null;break}if(f=u.sibling,f!==null){f.return=u.return,me=f;break}me=u.return}}function g_(a){for(;me!==null;){var u=me;if(u===a){me=null;break}var f=u.sibling;if(f!==null){f.return=u.return,me=f;break}me=u.return}}function m_(a){for(;me!==null;){var u=me;try{switch(u.tag){case 0:case 11:case 15:var f=u.return;try{qu(4,u)}catch(j){qt(u,f,j)}break;case 1:var m=u.stateNode;if(typeof m.componentDidMount=="function"){var b=u.return;try{m.componentDidMount()}catch(j){qt(u,b,j)}}var S=u.return;try{Kp(u)}catch(j){qt(u,S,j)}break;case 5:var A=u.return;try{Kp(u)}catch(j){qt(u,A,j)}}}catch(j){qt(u,u.return,j)}if(u===a){me=null;break}var N=u.sibling;if(N!==null){N.return=u.return,me=N;break}me=u.return}}var IO=Math.ceil,Gu=R.ReactCurrentDispatcher,Zp=R.ReactCurrentOwner,Tr=R.ReactCurrentBatchConfig,lt=0,bn=null,tn=null,Tn=0,pr=0,ga=fs(0),ln=0,Hl=null,io=0,Yu=0,Jp=0,zl=null,Jn=null,eg=0,ma=1/0,Mi=null,Ku=!1,tg=null,bs=null,Qu=!1,_s=null,Xu=0,$l=0,ng=null,Zu=-1,Ju=0;function Bn(){return(lt&6)!==0?Xt():Zu!==-1?Zu:Zu=Xt()}function ws(a){return(a.mode&1)===0?1:(lt&2)!==0&&Tn!==0?Tn&-Tn:gO.transition!==null?(Ju===0&&(Ju=cb()),Ju):(a=pt,a!==0||(a=window.event,a=a===void 0?16:yb(a.type)),a)}function qr(a,u,f,m){if(50<$l)throw $l=0,ng=null,Error(t(185));fl(a,f,m),((lt&2)===0||a!==bn)&&(a===bn&&((lt&2)===0&&(Yu|=f),ln===4&&Ss(a,Tn)),er(a,m),f===1&&lt===0&&(u.mode&1)===0&&(ma=Xt()+500,ku&&gs()))}function er(a,u){var f=a.callbackNode;gR(a,u);var m=lu(a,a===bn?Tn:0);if(m===0)f!==null&&ob(f),a.callbackNode=null,a.callbackPriority=0;else if(u=m&-m,a.callbackPriority!==u){if(f!=null&&ob(f),u===1)a.tag===0?pO(y_.bind(null,a)):r0(y_.bind(null,a)),uO(function(){(lt&6)===0&&gs()}),f=null;else{switch(ub(m)){case 1:f=Pf;break;case 4:f=ab;break;case 16:f=iu;break;case 536870912:f=lb;break;default:f=iu}f=T_(f,v_.bind(null,a))}a.callbackPriority=u,a.callbackNode=f}}function v_(a,u){if(Zu=-1,Ju=0,(lt&6)!==0)throw Error(t(327));var f=a.callbackNode;if(va()&&a.callbackNode!==f)return null;var m=lu(a,a===bn?Tn:0);if(m===0)return null;if((m&30)!==0||(m&a.expiredLanes)!==0||u)u=ed(a,m);else{u=m;var b=lt;lt|=2;var S=__();(bn!==a||Tn!==u)&&(Mi=null,ma=Xt()+500,oo(a,u));do try{PO();break}catch(N){b_(a,N)}while(!0);_p(),Gu.current=S,lt=b,tn!==null?u=0:(bn=null,Tn=0,u=ln)}if(u!==0){if(u===2&&(b=jf(a),b!==0&&(m=b,u=rg(a,b))),u===1)throw f=Hl,oo(a,0),Ss(a,m),er(a,Xt()),f;if(u===6)Ss(a,m);else{if(b=a.current.alternate,(m&30)===0&&!MO(b)&&(u=ed(a,m),u===2&&(S=jf(a),S!==0&&(m=S,u=rg(a,S))),u===1))throw f=Hl,oo(a,0),Ss(a,m),er(a,Xt()),f;switch(a.finishedWork=b,a.finishedLanes=m,u){case 0:case 1:throw Error(t(345));case 2:ao(a,Jn,Mi);break;case 3:if(Ss(a,m),(m&130023424)===m&&(u=eg+500-Xt(),10<u)){if(lu(a,0)!==0)break;if(b=a.suspendedLanes,(b&m)!==m){Bn(),a.pingedLanes|=a.suspendedLanes&b;break}a.timeoutHandle=cp(ao.bind(null,a,Jn,Mi),u);break}ao(a,Jn,Mi);break;case 4:if(Ss(a,m),(m&4194240)===m)break;for(u=a.eventTimes,b=-1;0<m;){var A=31-Br(m);S=1<<A,A=u[A],A>b&&(b=A),m&=~S}if(m=b,m=Xt()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*IO(m/1960))-m,10<m){a.timeoutHandle=cp(ao.bind(null,a,Jn,Mi),m);break}ao(a,Jn,Mi);break;case 5:ao(a,Jn,Mi);break;default:throw Error(t(329))}}}return er(a,Xt()),a.callbackNode===f?v_.bind(null,a):null}function rg(a,u){var f=zl;return a.current.memoizedState.isDehydrated&&(oo(a,u).flags|=256),a=ed(a,u),a!==2&&(u=Jn,Jn=f,u!==null&&ig(u)),a}function ig(a){Jn===null?Jn=a:Jn.push.apply(Jn,a)}function MO(a){for(var u=a;;){if(u.flags&16384){var f=u.updateQueue;if(f!==null&&(f=f.stores,f!==null))for(var m=0;m<f.length;m++){var b=f[m],S=b.getSnapshot;b=b.value;try{if(!Hr(S(),b))return!1}catch{return!1}}}if(f=u.child,u.subtreeFlags&16384&&f!==null)f.return=u,u=f;else{if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Ss(a,u){for(u&=~Jp,u&=~Yu,a.suspendedLanes|=u,a.pingedLanes&=~u,a=a.expirationTimes;0<u;){var f=31-Br(u),m=1<<f;a[f]=-1,u&=~m}}function y_(a){if((lt&6)!==0)throw Error(t(327));va();var u=lu(a,0);if((u&1)===0)return er(a,Xt()),null;var f=ed(a,u);if(a.tag!==0&&f===2){var m=jf(a);m!==0&&(u=m,f=rg(a,m))}if(f===1)throw f=Hl,oo(a,0),Ss(a,u),er(a,Xt()),f;if(f===6)throw Error(t(345));return a.finishedWork=a.current.alternate,a.finishedLanes=u,ao(a,Jn,Mi),er(a,Xt()),null}function sg(a,u){var f=lt;lt|=1;try{return a(u)}finally{lt=f,lt===0&&(ma=Xt()+500,ku&&gs())}}function so(a){_s!==null&&_s.tag===0&&(lt&6)===0&&va();var u=lt;lt|=1;var f=Tr.transition,m=pt;try{if(Tr.transition=null,pt=1,a)return a()}finally{pt=m,Tr.transition=f,lt=u,(lt&6)===0&&gs()}}function og(){pr=ga.current,Dt(ga)}function oo(a,u){a.finishedWork=null,a.finishedLanes=0;var f=a.timeoutHandle;if(f!==-1&&(a.timeoutHandle=-1,cO(f)),tn!==null)for(f=tn.return;f!==null;){var m=f;switch(gp(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&Cu();break;case 3:ha(),Dt(Qn),Dt(Dn),Ap();break;case 5:Tp(m);break;case 4:ha();break;case 13:Dt(Lt);break;case 19:Dt(Lt);break;case 10:wp(m.type._context);break;case 22:case 23:og()}f=f.return}if(bn=a,tn=a=xs(a.current,null),Tn=pr=u,ln=0,Hl=null,Jp=Yu=io=0,Jn=zl=null,to!==null){for(u=0;u<to.length;u++)if(f=to[u],m=f.interleaved,m!==null){f.interleaved=null;var b=m.next,S=f.pending;if(S!==null){var A=S.next;S.next=b,m.next=A}f.pending=m}to=null}return a}function b_(a,u){do{var f=tn;try{if(_p(),Lu.current=Hu,Fu){for(var m=Ft.memoizedState;m!==null;){var b=m.queue;b!==null&&(b.pending=null),m=m.next}Fu=!1}if(ro=0,yn=an=Ft=null,Pl=!1,jl=0,Zp.current=null,f===null||f.return===null){ln=1,Hl=u,tn=null;break}e:{var S=a,A=f.return,N=f,j=u;if(u=Tn,N.flags|=32768,j!==null&&typeof j=="object"&&typeof j.then=="function"){var W=j,J=N,te=J.tag;if((J.mode&1)===0&&(te===0||te===11||te===15)){var Z=J.alternate;Z?(J.updateQueue=Z.updateQueue,J.memoizedState=Z.memoizedState,J.lanes=Z.lanes):(J.updateQueue=null,J.memoizedState=null)}var he=W0(A);if(he!==null){he.flags&=-257,V0(he,A,N,S,u),he.mode&1&&$0(S,W,u),u=he,j=W;var ve=u.updateQueue;if(ve===null){var _e=new Set;_e.add(j),u.updateQueue=_e}else ve.add(j);break e}else{if((u&1)===0){$0(S,W,u),ag();break e}j=Error(t(426))}}else if(Mt&&N.mode&1){var Zt=W0(A);if(Zt!==null){(Zt.flags&65536)===0&&(Zt.flags|=256),V0(Zt,A,N,S,u),yp(fa(j,N));break e}}S=j=fa(j,N),ln!==4&&(ln=2),zl===null?zl=[S]:zl.push(S),S=A;do{switch(S.tag){case 3:S.flags|=65536,u&=-u,S.lanes|=u;var B=H0(S,j,u);p0(S,B);break e;case 1:N=j;var U=S.type,H=S.stateNode;if((S.flags&128)===0&&(typeof U.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(bs===null||!bs.has(H)))){S.flags|=65536,u&=-u,S.lanes|=u;var oe=z0(S,N,u);p0(S,oe);break e}}S=S.return}while(S!==null)}S_(f)}catch(xe){u=xe,tn===f&&f!==null&&(tn=f=f.return);continue}break}while(!0)}function __(){var a=Gu.current;return Gu.current=Hu,a===null?Hu:a}function ag(){(ln===0||ln===3||ln===2)&&(ln=4),bn===null||(io&268435455)===0&&(Yu&268435455)===0||Ss(bn,Tn)}function ed(a,u){var f=lt;lt|=2;var m=__();(bn!==a||Tn!==u)&&(Mi=null,oo(a,u));do try{NO();break}catch(b){b_(a,b)}while(!0);if(_p(),lt=f,Gu.current=m,tn!==null)throw Error(t(261));return bn=null,Tn=0,ln}function NO(){for(;tn!==null;)w_(tn)}function PO(){for(;tn!==null&&!oR();)w_(tn)}function w_(a){var u=C_(a.alternate,a,pr);a.memoizedProps=a.pendingProps,u===null?S_(a):tn=u,Zp.current=null}function S_(a){var u=a;do{var f=u.alternate;if(a=u.return,(u.flags&32768)===0){if(f=kO(f,u,pr),f!==null){tn=f;return}}else{if(f=AO(f,u),f!==null){f.flags&=32767,tn=f;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{ln=6,tn=null;return}}if(u=u.sibling,u!==null){tn=u;return}tn=u=a}while(u!==null);ln===0&&(ln=5)}function ao(a,u,f){var m=pt,b=Tr.transition;try{Tr.transition=null,pt=1,jO(a,u,f,m)}finally{Tr.transition=b,pt=m}return null}function jO(a,u,f,m){do va();while(_s!==null);if((lt&6)!==0)throw Error(t(327));f=a.finishedWork;var b=a.finishedLanes;if(f===null)return null;if(a.finishedWork=null,a.finishedLanes=0,f===a.current)throw Error(t(177));a.callbackNode=null,a.callbackPriority=0;var S=f.lanes|f.childLanes;if(mR(a,S),a===bn&&(tn=bn=null,Tn=0),(f.subtreeFlags&2064)===0&&(f.flags&2064)===0||Qu||(Qu=!0,T_(iu,function(){return va(),null})),S=(f.flags&15990)!==0,(f.subtreeFlags&15990)!==0||S){S=Tr.transition,Tr.transition=null;var A=pt;pt=1;var N=lt;lt|=4,Zp.current=null,RO(a,f),h_(f,a),nO(ap),du=!!op,ap=op=null,a.current=f,OO(f),aR(),lt=N,pt=A,Tr.transition=S}else a.current=f;if(Qu&&(Qu=!1,_s=a,Xu=b),S=a.pendingLanes,S===0&&(bs=null),uR(f.stateNode),er(a,Xt()),u!==null)for(m=a.onRecoverableError,f=0;f<u.length;f++)b=u[f],m(b.value,{componentStack:b.stack,digest:b.digest});if(Ku)throw Ku=!1,a=tg,tg=null,a;return(Xu&1)!==0&&a.tag!==0&&va(),S=a.pendingLanes,(S&1)!==0?a===ng?$l++:($l=0,ng=a):$l=0,gs(),null}function va(){if(_s!==null){var a=ub(Xu),u=Tr.transition,f=pt;try{if(Tr.transition=null,pt=16>a?16:a,_s===null)var m=!1;else{if(a=_s,_s=null,Xu=0,(lt&6)!==0)throw Error(t(331));var b=lt;for(lt|=4,me=a.current;me!==null;){var S=me,A=S.child;if((me.flags&16)!==0){var N=S.deletions;if(N!==null){for(var j=0;j<N.length;j++){var W=N[j];for(me=W;me!==null;){var J=me;switch(J.tag){case 0:case 11:case 15:Bl(8,J,S)}var te=J.child;if(te!==null)te.return=J,me=te;else for(;me!==null;){J=me;var Z=J.sibling,he=J.return;if(a_(J),J===W){me=null;break}if(Z!==null){Z.return=he,me=Z;break}me=he}}}var ve=S.alternate;if(ve!==null){var _e=ve.child;if(_e!==null){ve.child=null;do{var Zt=_e.sibling;_e.sibling=null,_e=Zt}while(_e!==null)}}me=S}}if((S.subtreeFlags&2064)!==0&&A!==null)A.return=S,me=A;else e:for(;me!==null;){if(S=me,(S.flags&2048)!==0)switch(S.tag){case 0:case 11:case 15:Bl(9,S,S.return)}var B=S.sibling;if(B!==null){B.return=S.return,me=B;break e}me=S.return}}var U=a.current;for(me=U;me!==null;){A=me;var H=A.child;if((A.subtreeFlags&2064)!==0&&H!==null)H.return=A,me=H;else e:for(A=U;me!==null;){if(N=me,(N.flags&2048)!==0)try{switch(N.tag){case 0:case 11:case 15:qu(9,N)}}catch(xe){qt(N,N.return,xe)}if(N===A){me=null;break e}var oe=N.sibling;if(oe!==null){oe.return=N.return,me=oe;break e}me=N.return}}if(lt=b,gs(),si&&typeof si.onPostCommitFiberRoot=="function")try{si.onPostCommitFiberRoot(su,a)}catch{}m=!0}return m}finally{pt=f,Tr.transition=u}}return!1}function x_(a,u,f){u=fa(f,u),u=H0(a,u,1),a=vs(a,u,1),u=Bn(),a!==null&&(fl(a,1,u),er(a,u))}function qt(a,u,f){if(a.tag===3)x_(a,a,f);else for(;u!==null;){if(u.tag===3){x_(u,a,f);break}else if(u.tag===1){var m=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(bs===null||!bs.has(m))){a=fa(f,a),a=z0(u,a,1),u=vs(u,a,1),a=Bn(),u!==null&&(fl(u,1,a),er(u,a));break}}u=u.return}}function LO(a,u,f){var m=a.pingCache;m!==null&&m.delete(u),u=Bn(),a.pingedLanes|=a.suspendedLanes&f,bn===a&&(Tn&f)===f&&(ln===4||ln===3&&(Tn&130023424)===Tn&&500>Xt()-eg?oo(a,0):Jp|=f),er(a,u)}function E_(a,u){u===0&&((a.mode&1)===0?u=1:(u=au,au<<=1,(au&130023424)===0&&(au=4194304)));var f=Bn();a=Ri(a,u),a!==null&&(fl(a,u,f),er(a,f))}function FO(a){var u=a.memoizedState,f=0;u!==null&&(f=u.retryLane),E_(a,f)}function UO(a,u){var f=0;switch(a.tag){case 13:var m=a.stateNode,b=a.memoizedState;b!==null&&(f=b.retryLane);break;case 19:m=a.stateNode;break;default:throw Error(t(314))}m!==null&&m.delete(u),E_(a,f)}var C_;C_=function(a,u,f){if(a!==null)if(a.memoizedProps!==u.pendingProps||Qn.current)Zn=!0;else{if((a.lanes&f)===0&&(u.flags&128)===0)return Zn=!1,TO(a,u,f);Zn=(a.flags&131072)!==0}else Zn=!1,Mt&&(u.flags&1048576)!==0&&i0(u,Du,u.index);switch(u.lanes=0,u.tag){case 2:var m=u.type;Wu(a,u),a=u.pendingProps;var b=sa(u,Dn.current);da(u,f),b=Op(null,u,m,a,b,f);var S=Ip();return u.flags|=1,typeof b=="object"&&b!==null&&typeof b.render=="function"&&b.$$typeof===void 0?(u.tag=1,u.memoizedState=null,u.updateQueue=null,Xn(m)?(S=!0,Tu(u)):S=!1,u.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,Ep(u),b.updater=zu,u.stateNode=b,b._reactInternals=u,Fp(u,m,a,f),u=zp(null,u,m,!0,S,f)):(u.tag=0,Mt&&S&&pp(u),Un(null,u,b,f),u=u.child),u;case 16:m=u.elementType;e:{switch(Wu(a,u),a=u.pendingProps,b=m._init,m=b(m._payload),u.type=m,b=u.tag=HO(m),a=$r(m,a),b){case 0:u=Hp(null,u,m,a,f);break e;case 1:u=X0(null,u,m,a,f);break e;case 11:u=q0(null,u,m,a,f);break e;case 14:u=G0(null,u,m,$r(m.type,a),f);break e}throw Error(t(306,m,""))}return u;case 0:return m=u.type,b=u.pendingProps,b=u.elementType===m?b:$r(m,b),Hp(a,u,m,b,f);case 1:return m=u.type,b=u.pendingProps,b=u.elementType===m?b:$r(m,b),X0(a,u,m,b,f);case 3:e:{if(Z0(u),a===null)throw Error(t(387));m=u.pendingProps,S=u.memoizedState,b=S.element,f0(a,u),Pu(u,m,null,f);var A=u.memoizedState;if(m=A.element,S.isDehydrated)if(S={element:m,isDehydrated:!1,cache:A.cache,pendingSuspenseBoundaries:A.pendingSuspenseBoundaries,transitions:A.transitions},u.updateQueue.baseState=S,u.memoizedState=S,u.flags&256){b=fa(Error(t(423)),u),u=J0(a,u,m,f,b);break e}else if(m!==b){b=fa(Error(t(424)),u),u=J0(a,u,m,f,b);break e}else for(fr=hs(u.stateNode.containerInfo.firstChild),hr=u,Mt=!0,zr=null,f=d0(u,null,m,f),u.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(la(),m===b){u=Ii(a,u,f);break e}Un(a,u,m,f)}u=u.child}return u;case 5:return m0(u),a===null&&vp(u),m=u.type,b=u.pendingProps,S=a!==null?a.memoizedProps:null,A=b.children,lp(m,b)?A=null:S!==null&&lp(m,S)&&(u.flags|=32),Q0(a,u),Un(a,u,A,f),u.child;case 6:return a===null&&vp(u),null;case 13:return e_(a,u,f);case 4:return Cp(u,u.stateNode.containerInfo),m=u.pendingProps,a===null?u.child=ca(u,null,m,f):Un(a,u,m,f),u.child;case 11:return m=u.type,b=u.pendingProps,b=u.elementType===m?b:$r(m,b),q0(a,u,m,b,f);case 7:return Un(a,u,u.pendingProps,f),u.child;case 8:return Un(a,u,u.pendingProps.children,f),u.child;case 12:return Un(a,u,u.pendingProps.children,f),u.child;case 10:e:{if(m=u.type._context,b=u.pendingProps,S=u.memoizedProps,A=b.value,Et(Iu,m._currentValue),m._currentValue=A,S!==null)if(Hr(S.value,A)){if(S.children===b.children&&!Qn.current){u=Ii(a,u,f);break e}}else for(S=u.child,S!==null&&(S.return=u);S!==null;){var N=S.dependencies;if(N!==null){A=S.child;for(var j=N.firstContext;j!==null;){if(j.context===m){if(S.tag===1){j=Oi(-1,f&-f),j.tag=2;var W=S.updateQueue;if(W!==null){W=W.shared;var J=W.pending;J===null?j.next=j:(j.next=J.next,J.next=j),W.pending=j}}S.lanes|=f,j=S.alternate,j!==null&&(j.lanes|=f),Sp(S.return,f,u),N.lanes|=f;break}j=j.next}}else if(S.tag===10)A=S.type===u.type?null:S.child;else if(S.tag===18){if(A=S.return,A===null)throw Error(t(341));A.lanes|=f,N=A.alternate,N!==null&&(N.lanes|=f),Sp(A,f,u),A=S.sibling}else A=S.child;if(A!==null)A.return=S;else for(A=S;A!==null;){if(A===u){A=null;break}if(S=A.sibling,S!==null){S.return=A.return,A=S;break}A=A.return}S=A}Un(a,u,b.children,f),u=u.child}return u;case 9:return b=u.type,m=u.pendingProps.children,da(u,f),b=Er(b),m=m(b),u.flags|=1,Un(a,u,m,f),u.child;case 14:return m=u.type,b=$r(m,u.pendingProps),b=$r(m.type,b),G0(a,u,m,b,f);case 15:return Y0(a,u,u.type,u.pendingProps,f);case 17:return m=u.type,b=u.pendingProps,b=u.elementType===m?b:$r(m,b),Wu(a,u),u.tag=1,Xn(m)?(a=!0,Tu(u)):a=!1,da(u,f),U0(u,m,b),Fp(u,m,b,f),zp(null,u,m,!0,a,f);case 19:return n_(a,u,f);case 22:return K0(a,u,f)}throw Error(t(156,u.tag))};function T_(a,u){return sb(a,u)}function BO(a,u,f,m){this.tag=a,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kr(a,u,f,m){return new BO(a,u,f,m)}function lg(a){return a=a.prototype,!(!a||!a.isReactComponent)}function HO(a){if(typeof a=="function")return lg(a)?1:0;if(a!=null){if(a=a.$$typeof,a===ee)return 11;if(a===pe)return 14}return 2}function xs(a,u){var f=a.alternate;return f===null?(f=kr(a.tag,u,a.key,a.mode),f.elementType=a.elementType,f.type=a.type,f.stateNode=a.stateNode,f.alternate=a,a.alternate=f):(f.pendingProps=u,f.type=a.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=a.flags&14680064,f.childLanes=a.childLanes,f.lanes=a.lanes,f.child=a.child,f.memoizedProps=a.memoizedProps,f.memoizedState=a.memoizedState,f.updateQueue=a.updateQueue,u=a.dependencies,f.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},f.sibling=a.sibling,f.index=a.index,f.ref=a.ref,f}function td(a,u,f,m,b,S){var A=2;if(m=a,typeof a=="function")lg(a)&&(A=1);else if(typeof a=="string")A=5;else e:switch(a){case M:return lo(f.children,b,S,u);case I:A=8,b|=8;break;case F:return a=kr(12,f,u,b|2),a.elementType=F,a.lanes=S,a;case re:return a=kr(13,f,u,b),a.elementType=re,a.lanes=S,a;case fe:return a=kr(19,f,u,b),a.elementType=fe,a.lanes=S,a;case ae:return nd(f,b,S,u);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case z:A=10;break e;case V:A=9;break e;case ee:A=11;break e;case pe:A=14;break e;case ie:A=16,m=null;break e}throw Error(t(130,a==null?a:typeof a,""))}return u=kr(A,f,u,b),u.elementType=a,u.type=m,u.lanes=S,u}function lo(a,u,f,m){return a=kr(7,a,m,u),a.lanes=f,a}function nd(a,u,f,m){return a=kr(22,a,m,u),a.elementType=ae,a.lanes=f,a.stateNode={isHidden:!1},a}function cg(a,u,f){return a=kr(6,a,null,u),a.lanes=f,a}function ug(a,u,f){return u=kr(4,a.children!==null?a.children:[],a.key,u),u.lanes=f,u.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},u}function zO(a,u,f,m,b){this.tag=u,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Lf(0),this.expirationTimes=Lf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lf(0),this.identifierPrefix=m,this.onRecoverableError=b,this.mutableSourceEagerHydrationData=null}function dg(a,u,f,m,b,S,A,N,j){return a=new zO(a,u,f,N,j),u===1?(u=1,S===!0&&(u|=8)):u=0,S=kr(3,null,null,u),a.current=S,S.stateNode=a,S.memoizedState={element:m,isDehydrated:f,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ep(S),a}function $O(a,u,f){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:O,key:m==null?null:""+m,children:a,containerInfo:u,implementation:f}}function k_(a){if(!a)return ps;a=a._reactInternals;e:{if(Qs(a)!==a||a.tag!==1)throw Error(t(170));var u=a;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(Xn(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(u!==null);throw Error(t(171))}if(a.tag===1){var f=a.type;if(Xn(f))return t0(a,f,u)}return u}function A_(a,u,f,m,b,S,A,N,j){return a=dg(f,m,!0,a,b,S,A,N,j),a.context=k_(null),f=a.current,m=Bn(),b=ws(f),S=Oi(m,b),S.callback=u??null,vs(f,S,b),a.current.lanes=b,fl(a,b,m),er(a,m),a}function rd(a,u,f,m){var b=u.current,S=Bn(),A=ws(b);return f=k_(f),u.context===null?u.context=f:u.pendingContext=f,u=Oi(S,A),u.payload={element:a},m=m===void 0?null:m,m!==null&&(u.callback=m),a=vs(b,u,A),a!==null&&(qr(a,b,A,S),Nu(a,b,A)),A}function id(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function D_(a,u){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var f=a.retryLane;a.retryLane=f!==0&&f<u?f:u}}function hg(a,u){D_(a,u),(a=a.alternate)&&D_(a,u)}function WO(){return null}var R_=typeof reportError=="function"?reportError:function(a){console.error(a)};function fg(a){this._internalRoot=a}sd.prototype.render=fg.prototype.render=function(a){var u=this._internalRoot;if(u===null)throw Error(t(409));rd(a,u,null,null)},sd.prototype.unmount=fg.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var u=a.containerInfo;so(function(){rd(null,a,null,null)}),u[Ti]=null}};function sd(a){this._internalRoot=a}sd.prototype.unstable_scheduleHydration=function(a){if(a){var u=fb();a={blockedOn:null,target:a,priority:u};for(var f=0;f<cs.length&&u!==0&&u<cs[f].priority;f++);cs.splice(f,0,a),f===0&&mb(a)}};function pg(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function od(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function O_(){}function VO(a,u,f,m,b){if(b){if(typeof m=="function"){var S=m;m=function(){var W=id(A);S.call(W)}}var A=A_(u,m,a,0,null,!1,!1,"",O_);return a._reactRootContainer=A,a[Ti]=A.current,kl(a.nodeType===8?a.parentNode:a),so(),A}for(;b=a.lastChild;)a.removeChild(b);if(typeof m=="function"){var N=m;m=function(){var W=id(j);N.call(W)}}var j=dg(a,0,!1,null,null,!1,!1,"",O_);return a._reactRootContainer=j,a[Ti]=j.current,kl(a.nodeType===8?a.parentNode:a),so(function(){rd(u,j,f,m)}),j}function ad(a,u,f,m,b){var S=f._reactRootContainer;if(S){var A=S;if(typeof b=="function"){var N=b;b=function(){var j=id(A);N.call(j)}}rd(u,A,a,b)}else A=VO(f,u,a,b,m);return id(A)}db=function(a){switch(a.tag){case 3:var u=a.stateNode;if(u.current.memoizedState.isDehydrated){var f=hl(u.pendingLanes);f!==0&&(Ff(u,f|1),er(u,Xt()),(lt&6)===0&&(ma=Xt()+500,gs()))}break;case 13:so(function(){var m=Ri(a,1);if(m!==null){var b=Bn();qr(m,a,1,b)}}),hg(a,1)}},Uf=function(a){if(a.tag===13){var u=Ri(a,134217728);if(u!==null){var f=Bn();qr(u,a,134217728,f)}hg(a,134217728)}},hb=function(a){if(a.tag===13){var u=ws(a),f=Ri(a,u);if(f!==null){var m=Bn();qr(f,a,u,m)}hg(a,u)}},fb=function(){return pt},pb=function(a,u){var f=pt;try{return pt=a,u()}finally{pt=f}},Gn=function(a,u,f){switch(u){case"input":if(xt(a,f),u=f.name,f.type==="radio"&&u!=null){for(f=a;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll("input[name="+JSON.stringify(""+u)+'][type="radio"]'),u=0;u<f.length;u++){var m=f[u];if(m!==a&&m.form===a.form){var b=Eu(m);if(!b)throw Error(t(90));Gt(m),xt(m,b)}}}break;case"textarea":ye(a,f);break;case"select":u=f.value,u!=null&&dt(a,!!f.multiple,u,!1)}},Qe=sg,nt=so;var qO={usingClientEntryPoint:!1,Events:[Rl,ra,Eu,de,Le,sg]},Wl={findFiberByHostInstance:Xs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},GO={bundleType:Wl.bundleType,version:Wl.version,rendererPackageName:Wl.rendererPackageName,rendererConfig:Wl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:R.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=rb(a),a===null?null:a.stateNode},findFiberByHostInstance:Wl.findFiberByHostInstance||WO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ld=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ld.isDisabled&&ld.supportsFiber)try{su=ld.inject(GO),si=ld}catch{}}return tr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qO,tr.createPortal=function(a,u){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pg(u))throw Error(t(200));return $O(a,u,null,f)},tr.createRoot=function(a,u){if(!pg(a))throw Error(t(299));var f=!1,m="",b=R_;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(m=u.identifierPrefix),u.onRecoverableError!==void 0&&(b=u.onRecoverableError)),u=dg(a,1,!1,null,null,f,!1,m,b),a[Ti]=u.current,kl(a.nodeType===8?a.parentNode:a),new fg(u)},tr.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var u=a._reactInternals;if(u===void 0)throw typeof a.render=="function"?Error(t(188)):(a=Object.keys(a).join(","),Error(t(268,a)));return a=rb(u),a=a===null?null:a.stateNode,a},tr.flushSync=function(a){return so(a)},tr.hydrate=function(a,u,f){if(!od(u))throw Error(t(200));return ad(null,a,u,!0,f)},tr.hydrateRoot=function(a,u,f){if(!pg(a))throw Error(t(405));var m=f!=null&&f.hydratedSources||null,b=!1,S="",A=R_;if(f!=null&&(f.unstable_strictMode===!0&&(b=!0),f.identifierPrefix!==void 0&&(S=f.identifierPrefix),f.onRecoverableError!==void 0&&(A=f.onRecoverableError)),u=A_(u,null,a,1,f??null,b,!1,S,A),a[Ti]=u.current,kl(a),m)for(a=0;a<m.length;a++)f=m[a],b=f._getVersion,b=b(f._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[f,b]:u.mutableSourceEagerHydrationData.push(f,b);return new sd(u)},tr.render=function(a,u,f){if(!od(u))throw Error(t(200));return ad(null,a,u,!1,f)},tr.unmountComponentAtNode=function(a){if(!od(a))throw Error(t(40));return a._reactRootContainer?(so(function(){ad(null,null,a,!1,function(){a._reactRootContainer=null,a[Ti]=null})}),!0):!1},tr.unstable_batchedUpdates=sg,tr.unstable_renderSubtreeIntoContainer=function(a,u,f,m){if(!od(f))throw Error(t(200));if(a==null||a._reactInternals===void 0)throw Error(t(38));return ad(a,u,f,!1,m)},tr.version="18.3.1-next-f1338f8080-20240426",tr}var U_;function YE(){if(U_)return vg.exports;U_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),vg.exports=e1(),vg.exports}var B_;function t1(){if(B_)return cd;B_=1;var n=YE();return cd.createRoot=n.createRoot,cd.hydrateRoot=n.hydrateRoot,cd}var n1=t1();const r1=zc(n1);/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var H_="popstate";function i1(n={}){function e(r,i){let{pathname:s,search:o,hash:l}=r.location;return vm("",{pathname:s,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:Sc(i)}return o1(e,t,null,n)}function Pt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Jr(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function s1(){return Math.random().toString(36).substring(2,10)}function z_(n,e){return{usr:n.state,key:n.key,idx:e}}function vm(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Ja(e):e,state:t,key:e&&e.key||r||s1()}}function Sc({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Ja(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function o1(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,l="POP",c=null,d=h();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function h(){return(o.state||{idx:null}).idx}function p(){l="POP";let w=h(),x=w==null?null:w-d;d=w,c&&c({action:l,location:_.location,delta:x})}function g(w,x){l="PUSH";let C=vm(_.location,w,x);d=h()+1;let T=z_(C,d),R=_.createHref(C);try{o.pushState(T,"",R)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;i.location.assign(R)}s&&c&&c({action:l,location:_.location,delta:1})}function v(w,x){l="REPLACE";let C=vm(_.location,w,x);d=h();let T=z_(C,d),R=_.createHref(C);o.replaceState(T,"",R),s&&c&&c({action:l,location:_.location,delta:0})}function y(w){return a1(w)}let _={get action(){return l},get location(){return n(i,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(H_,p),c=w,()=>{i.removeEventListener(H_,p),c=null}},createHref(w){return e(i,w)},createURL:y,encodeLocation(w){let x=y(w);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:g,replace:v,go(w){return o.go(w)}};return _}function a1(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Pt(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Sc(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function KE(n,e,t="/"){return l1(n,e,t,!1)}function l1(n,e,t,r){let i=typeof e=="string"?Ja(e):e,s=Ji(i.pathname||"/",t);if(s==null)return null;let o=QE(n);c1(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=_1(s);l=y1(o[c],d,r)}return l}function QE(n,e=[],t=[],r="",i=!1){let s=(o,l,c=i,d)=>{let h={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(r)&&c)return;Pt(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length)}let p=Yi([r,h.relativePath]),g=t.concat(h);o.children&&o.children.length>0&&(Pt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),QE(o.children,e,g,p,c)),!(o.path==null&&!o.index)&&e.push({path:p,score:m1(p,o.index),routesMeta:g})};return n.forEach((o,l)=>{if(o.path===""||!o.path?.includes("?"))s(o,l);else for(let c of XE(o.path))s(o,l,!0,c)}),e}function XE(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=XE(r.join("/")),l=[];return l.push(...o.map(c=>c===""?s:[s,c].join("/"))),i&&l.push(...o),l.map(c=>n.startsWith("/")&&c===""?"/":c)}function c1(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:v1(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var u1=/^:[\w-]+$/,d1=3,h1=2,f1=1,p1=10,g1=-2,$_=n=>n==="*";function m1(n,e){let t=n.split("/"),r=t.length;return t.some($_)&&(r+=g1),e&&(r+=h1),t.filter(i=>!$_(i)).reduce((i,s)=>i+(u1.test(s)?d1:s===""?f1:p1),r)}function v1(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function y1(n,e,t=!1){let{routesMeta:r}=n,i={},s="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],d=l===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",p=dh({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},h),g=c.route;if(!p&&d&&t&&!r[r.length-1].route.index&&(p=dh({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:Yi([s,p.pathname]),pathnameBase:E1(Yi([s,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(s=Yi([s,p.pathnameBase]))}return o}function dh(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=b1(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((d,{paramName:h,isOptional:p},g)=>{if(h==="*"){let y=l[g]||"";o=s.slice(0,s.length-y.length).replace(/(.)\/+$/,"$1")}const v=l[g];return p&&!v?d[h]=void 0:d[h]=(v||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:o,pattern:n}}function b1(n,e=!1,t=!0){Jr(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function _1(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Jr(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Ji(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function w1(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Ja(n):n;return{pathname:t?t.startsWith("/")?t:S1(t,e):e,search:C1(r),hash:T1(i)}}function S1(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function _g(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function x1(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function xv(n){let e=x1(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function Ev(n,e,t,r=!1){let i;typeof n=="string"?i=Ja(n):(i={...n},Pt(!i.pathname||!i.pathname.includes("?"),_g("?","pathname","search",i)),Pt(!i.pathname||!i.pathname.includes("#"),_g("#","pathname","hash",i)),Pt(!i.search||!i.search.includes("#"),_g("#","search","hash",i)));let s=n===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=t;else{let p=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;i.pathname=g.join("/")}l=p>=0?e[p]:"/"}let c=w1(i,l),d=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}var Yi=n=>n.join("/").replace(/\/\/+/g,"/"),E1=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),C1=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,T1=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function k1(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var ZE=["POST","PUT","PATCH","DELETE"];new Set(ZE);var A1=["GET",...ZE];new Set(A1);var el=k.createContext(null);el.displayName="DataRouter";var Qh=k.createContext(null);Qh.displayName="DataRouterState";k.createContext(!1);var JE=k.createContext({isTransitioning:!1});JE.displayName="ViewTransition";var D1=k.createContext(new Map);D1.displayName="Fetchers";var R1=k.createContext(null);R1.displayName="Await";var ri=k.createContext(null);ri.displayName="Navigation";var $c=k.createContext(null);$c.displayName="Location";var Ur=k.createContext({outlet:null,matches:[],isDataRoute:!1});Ur.displayName="Route";var Cv=k.createContext(null);Cv.displayName="RouteError";function O1(n,{relative:e}={}){Pt(tl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=k.useContext(ri),{hash:i,pathname:s,search:o}=Wc(n,{relative:e}),l=s;return t!=="/"&&(l=s==="/"?t:Yi([t,s])),r.createHref({pathname:l,search:o,hash:i})}function tl(){return k.useContext($c)!=null}function ns(){return Pt(tl(),"useLocation() may be used only in the context of a <Router> component."),k.useContext($c).location}var eC="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function tC(n){k.useContext(ri).static||k.useLayoutEffect(n)}function xi(){let{isDataRoute:n}=k.useContext(Ur);return n?q1():I1()}function I1(){Pt(tl(),"useNavigate() may be used only in the context of a <Router> component.");let n=k.useContext(el),{basename:e,navigator:t}=k.useContext(ri),{matches:r}=k.useContext(Ur),{pathname:i}=ns(),s=JSON.stringify(xv(r)),o=k.useRef(!1);return tC(()=>{o.current=!0}),k.useCallback((c,d={})=>{if(Jr(o.current,eC),!o.current)return;if(typeof c=="number"){t.go(c);return}let h=Ev(c,JSON.parse(s),i,d.relative==="path");n==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Yi([e,h.pathname])),(d.replace?t.replace:t.push)(h,d.state,d)},[e,t,s,i,n])}var M1=k.createContext(null);function N1(n){let e=k.useContext(Ur).outlet;return k.useMemo(()=>e&&k.createElement(M1.Provider,{value:n},e),[e,n])}function Xh(){let{matches:n}=k.useContext(Ur),e=n[n.length-1];return e?e.params:{}}function Wc(n,{relative:e}={}){let{matches:t}=k.useContext(Ur),{pathname:r}=ns(),i=JSON.stringify(xv(t));return k.useMemo(()=>Ev(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function P1(n,e){return nC(n,e)}function nC(n,e,t,r,i){Pt(tl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=k.useContext(ri),{matches:o}=k.useContext(Ur),l=o[o.length-1],c=l?l.params:{},d=l?l.pathname:"/",h=l?l.pathnameBase:"/",p=l&&l.route;{let C=p&&p.path||"";rC(d,!p||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let g=ns(),v;if(e){let C=typeof e=="string"?Ja(e):e;Pt(h==="/"||C.pathname?.startsWith(h),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${C.pathname}" was given in the \`location\` prop.`),v=C}else v=g;let y=v.pathname||"/",_=y;if(h!=="/"){let C=h.replace(/^\//,"").split("/");_="/"+y.replace(/^\//,"").split("/").slice(C.length).join("/")}let w=KE(n,{pathname:_});Jr(p||w!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),Jr(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=B1(w&&w.map(C=>Object.assign({},C,{params:Object.assign({},c,C.params),pathname:Yi([h,s.encodeLocation?s.encodeLocation(C.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?h:Yi([h,s.encodeLocation?s.encodeLocation(C.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathnameBase])})),o,t,r,i);return e&&x?k.createElement($c.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},x):x}function j1(){let n=V1(),e=k1(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",n),o=k.createElement(k.Fragment,null,k.createElement("p",null,"💿 Hey developer 👋"),k.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.createElement("code",{style:s},"ErrorBoundary")," or"," ",k.createElement("code",{style:s},"errorElement")," prop on your route.")),k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),t?k.createElement("pre",{style:i},t):null,o)}var L1=k.createElement(j1,null),F1=class extends k.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.unstable_onError?this.props.unstable_onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?k.createElement(Ur.Provider,{value:this.props.routeContext},k.createElement(Cv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function U1({routeContext:n,match:e,children:t}){let r=k.useContext(el);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),k.createElement(Ur.Provider,{value:n},t)}function B1(n,e=[],t=null,r=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,o=t?.errors;if(o!=null){let d=s.findIndex(h=>h.route.id&&o?.[h.route.id]!==void 0);Pt(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,d+1))}let l=!1,c=-1;if(t)for(let d=0;d<s.length;d++){let h=s[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:p,errors:g}=t,v=h.route.loader&&!p.hasOwnProperty(h.route.id)&&(!g||g[h.route.id]===void 0);if(h.route.lazy||v){l=!0,c>=0?s=s.slice(0,c+1):s=[s[0]];break}}}return s.reduceRight((d,h,p)=>{let g,v=!1,y=null,_=null;t&&(g=o&&h.route.id?o[h.route.id]:void 0,y=h.route.errorElement||L1,l&&(c<0&&p===0?(rC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,_=null):c===p&&(v=!0,_=h.route.hydrateFallbackElement||null)));let w=e.concat(s.slice(0,p+1)),x=()=>{let C;return g?C=y:v?C=_:h.route.Component?C=k.createElement(h.route.Component,null):h.route.element?C=h.route.element:C=d,k.createElement(U1,{match:h,routeContext:{outlet:d,matches:w,isDataRoute:t!=null},children:C})};return t&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?k.createElement(F1,{location:t.location,revalidation:t.revalidation,component:y,error:g,children:x(),routeContext:{outlet:null,matches:w,isDataRoute:!0},unstable_onError:r}):x()},null)}function Tv(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function H1(n){let e=k.useContext(el);return Pt(e,Tv(n)),e}function z1(n){let e=k.useContext(Qh);return Pt(e,Tv(n)),e}function $1(n){let e=k.useContext(Ur);return Pt(e,Tv(n)),e}function kv(n){let e=$1(n),t=e.matches[e.matches.length-1];return Pt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function W1(){return kv("useRouteId")}function V1(){let n=k.useContext(Cv),e=z1("useRouteError"),t=kv("useRouteError");return n!==void 0?n:e.errors?.[t]}function q1(){let{router:n}=H1("useNavigate"),e=kv("useNavigate"),t=k.useRef(!1);return tC(()=>{t.current=!0}),k.useCallback(async(i,s={})=>{Jr(t.current,eC),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...s}))},[n,e])}var W_={};function rC(n,e,t){!e&&!W_[n]&&(W_[n]=!0,Jr(!1,t))}k.memo(G1);function G1({routes:n,future:e,state:t,unstable_onError:r}){return nC(n,void 0,t,r,e)}function iC({to:n,replace:e,state:t,relative:r}){Pt(tl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=k.useContext(ri);Jr(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=k.useContext(Ur),{pathname:o}=ns(),l=xi(),c=Ev(n,xv(s),o,r==="path"),d=JSON.stringify(c);return k.useEffect(()=>{l(JSON.parse(d),{replace:e,state:t,relative:r})},[l,d,r,e,t]),null}function sC(n){return N1(n.context)}function un(n){Pt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Y1({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:s=!1}){Pt(!tl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=n.replace(/^\/*/,"/"),l=k.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof t=="string"&&(t=Ja(t));let{pathname:c="/",search:d="",hash:h="",state:p=null,key:g="default"}=t,v=k.useMemo(()=>{let y=Ji(c,o);return y==null?null:{location:{pathname:y,search:d,hash:h,state:p,key:g},navigationType:r}},[o,c,d,h,p,g,r]);return Jr(v!=null,`<Router basename="${o}"> is not able to match the URL "${c}${d}${h}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:k.createElement(ri.Provider,{value:l},k.createElement($c.Provider,{children:e,value:v}))}function K1({children:n,location:e}){return P1(ym(n),e)}function ym(n,e=[]){let t=[];return k.Children.forEach(n,(r,i)=>{if(!k.isValidElement(r))return;let s=[...e,i];if(r.type===k.Fragment){t.push.apply(t,ym(r.props.children,s));return}Pt(r.type===un,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Pt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=ym(r.props.children,s)),t.push(o)}),t}var Qd="get",Xd="application/x-www-form-urlencoded";function Zh(n){return n!=null&&typeof n.tagName=="string"}function Q1(n){return Zh(n)&&n.tagName.toLowerCase()==="button"}function X1(n){return Zh(n)&&n.tagName.toLowerCase()==="form"}function Z1(n){return Zh(n)&&n.tagName.toLowerCase()==="input"}function J1(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function eI(n,e){return n.button===0&&(!e||e==="_self")&&!J1(n)}var ud=null;function tI(){if(ud===null)try{new FormData(document.createElement("form"),0),ud=!1}catch{ud=!0}return ud}var nI=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function wg(n){return n!=null&&!nI.has(n)?(Jr(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Xd}"`),null):n}function rI(n,e){let t,r,i,s,o;if(X1(n)){let l=n.getAttribute("action");r=l?Ji(l,e):null,t=n.getAttribute("method")||Qd,i=wg(n.getAttribute("enctype"))||Xd,s=new FormData(n)}else if(Q1(n)||Z1(n)&&(n.type==="submit"||n.type==="image")){let l=n.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=n.getAttribute("formaction")||l.getAttribute("action");if(r=c?Ji(c,e):null,t=n.getAttribute("formmethod")||l.getAttribute("method")||Qd,i=wg(n.getAttribute("formenctype"))||wg(l.getAttribute("enctype"))||Xd,s=new FormData(l,n),!tI()){let{name:d,type:h,value:p}=n;if(h==="image"){let g=d?`${d}.`:"";s.append(`${g}x`,"0"),s.append(`${g}y`,"0")}else d&&s.append(d,p)}}else{if(Zh(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Qd,r=null,i=Xd,o=n}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Av(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function iI(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&Ji(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function sI(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function oI(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function aI(n,e,t){let r=await Promise.all(n.map(async i=>{let s=e.routes[i.route.id];if(s){let o=await sI(s,t);return o.links?o.links():[]}return[]}));return dI(r.flat(1).filter(oI).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function V_(n,e,t,r,i,s){let o=(c,d)=>t[d]?c.route.id!==t[d].route.id:!0,l=(c,d)=>t[d].pathname!==c.pathname||t[d].route.path?.endsWith("*")&&t[d].params["*"]!==c.params["*"];return s==="assets"?e.filter((c,d)=>o(c,d)||l(c,d)):s==="data"?e.filter((c,d)=>{let h=r.routes[c.route.id];if(!h||!h.hasLoader)return!1;if(o(c,d)||l(c,d))return!0;if(c.route.shouldRevalidate){let p=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function lI(n,e,{includeHydrateFallback:t}={}){return cI(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function cI(n){return[...new Set(n)]}function uI(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function dI(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let s=JSON.stringify(uI(i));return t.has(s)||(t.add(s),r.push({key:s,link:i})),r},[])}function oC(){let n=k.useContext(el);return Av(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function hI(){let n=k.useContext(Qh);return Av(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Dv=k.createContext(void 0);Dv.displayName="FrameworkContext";function aC(){let n=k.useContext(Dv);return Av(n,"You must render this element inside a <HydratedRouter> element"),n}function fI(n,e){let t=k.useContext(Dv),[r,i]=k.useState(!1),[s,o]=k.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:h,onTouchStart:p}=e,g=k.useRef(null);k.useEffect(()=>{if(n==="render"&&o(!0),n==="viewport"){let _=x=>{x.forEach(C=>{o(C.isIntersecting)})},w=new IntersectionObserver(_,{threshold:.5});return g.current&&w.observe(g.current),()=>{w.disconnect()}}},[n]),k.useEffect(()=>{if(r){let _=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(_)}}},[r]);let v=()=>{i(!0)},y=()=>{i(!1),o(!1)};return t?n!=="intent"?[s,g,{}]:[s,g,{onFocus:ql(l,v),onBlur:ql(c,y),onMouseEnter:ql(d,v),onMouseLeave:ql(h,y),onTouchStart:ql(p,v)}]:[!1,g,{}]}function ql(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function pI({page:n,...e}){let{router:t}=oC(),r=k.useMemo(()=>KE(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?k.createElement(mI,{page:n,matches:r,...e}):null}function gI(n){let{manifest:e,routeModules:t}=aC(),[r,i]=k.useState([]);return k.useEffect(()=>{let s=!1;return aI(n,e,t).then(o=>{s||i(o)}),()=>{s=!0}},[n,e,t]),r}function mI({page:n,matches:e,...t}){let r=ns(),{manifest:i,routeModules:s}=aC(),{basename:o}=oC(),{loaderData:l,matches:c}=hI(),d=k.useMemo(()=>V_(n,e,c,i,r,"data"),[n,e,c,i,r]),h=k.useMemo(()=>V_(n,e,c,i,r,"assets"),[n,e,c,i,r]),p=k.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let y=new Set,_=!1;if(e.forEach(x=>{let C=i.routes[x.route.id];!C||!C.hasLoader||(!d.some(T=>T.route.id===x.route.id)&&x.route.id in l&&s[x.route.id]?.shouldRevalidate||C.hasClientLoader?_=!0:y.add(x.route.id))}),y.size===0)return[];let w=iI(n,o,"data");return _&&y.size>0&&w.searchParams.set("_routes",e.filter(x=>y.has(x.route.id)).map(x=>x.route.id).join(",")),[w.pathname+w.search]},[o,l,r,i,d,e,n,s]),g=k.useMemo(()=>lI(h,i),[h,i]),v=gI(h);return k.createElement(k.Fragment,null,p.map(y=>k.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...t})),g.map(y=>k.createElement("link",{key:y,rel:"modulepreload",href:y,...t})),v.map(({key:y,link:_})=>k.createElement("link",{key:y,nonce:t.nonce,..._})))}function vI(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var lC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{lC&&(window.__reactRouterVersion="7.9.4")}catch{}function yI({basename:n,children:e,window:t}){let r=k.useRef();r.current==null&&(r.current=i1({window:t,v5Compat:!0}));let i=r.current,[s,o]=k.useState({action:i.action,location:i.location}),l=k.useCallback(c=>{k.startTransition(()=>o(c))},[o]);return k.useLayoutEffect(()=>i.listen(l),[i,l]),k.createElement(Y1,{basename:n,children:e,location:s.location,navigationType:s.action,navigator:i})}var cC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ar=k.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:l,target:c,to:d,preventScrollReset:h,viewTransition:p,...g},v){let{basename:y}=k.useContext(ri),_=typeof d=="string"&&cC.test(d),w,x=!1;if(typeof d=="string"&&_&&(w=d,lC))try{let F=new URL(window.location.href),z=d.startsWith("//")?new URL(F.protocol+d):new URL(d),V=Ji(z.pathname,y);z.origin===F.origin&&V!=null?d=V+z.search+z.hash:x=!0}catch{Jr(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let C=O1(d,{relative:i}),[T,R,D]=fI(r,g),O=SI(d,{replace:o,state:l,target:c,preventScrollReset:h,relative:i,viewTransition:p});function M(F){e&&e(F),F.defaultPrevented||O(F)}let I=k.createElement("a",{...g,...D,href:w||C,onClick:x||s?e:M,ref:vI(v,R),target:c,"data-discover":!_&&t==="render"?"true":void 0});return T&&!_?k.createElement(k.Fragment,null,I,k.createElement(pI,{page:C})):I});ar.displayName="Link";var bI=k.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:l,children:c,...d},h){let p=Wc(o,{relative:d.relative}),g=ns(),v=k.useContext(Qh),{navigator:y,basename:_}=k.useContext(ri),w=v!=null&&kI(p)&&l===!0,x=y.encodeLocation?y.encodeLocation(p).pathname:p.pathname,C=g.pathname,T=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;t||(C=C.toLowerCase(),T=T?T.toLowerCase():null,x=x.toLowerCase()),T&&_&&(T=Ji(T,_)||T);const R=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let D=C===x||!i&&C.startsWith(x)&&C.charAt(R)==="/",O=T!=null&&(T===x||!i&&T.startsWith(x)&&T.charAt(x.length)==="/"),M={isActive:D,isPending:O,isTransitioning:w},I=D?e:void 0,F;typeof r=="function"?F=r(M):F=[r,D?"active":null,O?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let z=typeof s=="function"?s(M):s;return k.createElement(ar,{...d,"aria-current":I,className:F,ref:h,style:z,to:o,viewTransition:l},typeof c=="function"?c(M):c)});bI.displayName="NavLink";var _I=k.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:s,method:o=Qd,action:l,onSubmit:c,relative:d,preventScrollReset:h,viewTransition:p,...g},v)=>{let y=CI(),_=TI(l,{relative:d}),w=o.toLowerCase()==="get"?"get":"post",x=typeof l=="string"&&cC.test(l),C=T=>{if(c&&c(T),T.defaultPrevented)return;T.preventDefault();let R=T.nativeEvent.submitter,D=R?.getAttribute("formmethod")||o;y(R||T.currentTarget,{fetcherKey:e,method:D,navigate:t,replace:i,state:s,relative:d,preventScrollReset:h,viewTransition:p})};return k.createElement("form",{ref:v,method:w,action:_,onSubmit:r?c:C,...g,"data-discover":!x&&n==="render"?"true":void 0})});_I.displayName="Form";function wI(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function uC(n){let e=k.useContext(el);return Pt(e,wI(n)),e}function SI(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:s,viewTransition:o}={}){let l=xi(),c=ns(),d=Wc(n,{relative:s});return k.useCallback(h=>{if(eI(h,e)){h.preventDefault();let p=t!==void 0?t:Sc(c)===Sc(d);l(n,{replace:p,state:r,preventScrollReset:i,relative:s,viewTransition:o})}},[c,l,d,t,r,e,n,i,s,o])}var xI=0,EI=()=>`__${String(++xI)}__`;function CI(){let{router:n}=uC("useSubmit"),{basename:e}=k.useContext(ri),t=W1();return k.useCallback(async(r,i={})=>{let{action:s,method:o,encType:l,formData:c,body:d}=rI(r,e);if(i.navigate===!1){let h=i.fetcherKey||EI();await n.fetch(h,t,i.action||s,{preventScrollReset:i.preventScrollReset,formData:c,body:d,formMethod:i.method||o,formEncType:i.encType||l,flushSync:i.flushSync})}else await n.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:c,body:d,formMethod:i.method||o,formEncType:i.encType||l,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function TI(n,{relative:e}={}){let{basename:t}=k.useContext(ri),r=k.useContext(Ur);Pt(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...Wc(n||".",{relative:e})},o=ns();if(n==null){s.search=o.search;let l=new URLSearchParams(s.search),c=l.getAll("index");if(c.some(h=>h==="")){l.delete("index"),c.filter(p=>p).forEach(p=>l.append("index",p));let h=l.toString();s.search=h?`?${h}`:""}}return(!n||n===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(s.pathname=s.pathname==="/"?t:Yi([t,s.pathname])),Sc(s)}function kI(n,{relative:e}={}){let t=k.useContext(JE);Pt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=uC("useViewTransitionState"),i=Wc(n,{relative:e});if(!t.isTransitioning)return!1;let s=Ji(t.currentLocation.pathname,r)||t.currentLocation.pathname,o=Ji(t.nextLocation.pathname,r)||t.nextLocation.pathname;return dh(i.pathname,o)!=null||dh(i.pathname,s)!=null}var Hi=YE();const AI=zc(Hi);var nl=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},DI={setTimeout:(n,e)=>setTimeout(n,e),clearTimeout:n=>clearTimeout(n),setInterval:(n,e)=>setInterval(n,e),clearInterval:n=>clearInterval(n)},RI=class{#e=DI;#t=!1;setTimeoutProvider(n){this.#e=n}setTimeout(n,e){return this.#e.setTimeout(n,e)}clearTimeout(n){this.#e.clearTimeout(n)}setInterval(n,e){return this.#e.setInterval(n,e)}clearInterval(n){this.#e.clearInterval(n)}},Co=new RI;function OI(n){setTimeout(n,0)}var No=typeof window>"u"||"Deno"in globalThis;function Hn(){}function II(n,e){return typeof n=="function"?n(e):n}function bm(n){return typeof n=="number"&&n>=0&&n!==1/0}function dC(n,e){return Math.max(n+(e||0)-Date.now(),0)}function Ls(n,e){return typeof n=="function"?n(e):n}function Nr(n,e){return typeof n=="function"?n(e):n}function q_(n,e){const{type:t="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:l}=n;if(o){if(r){if(e.queryHash!==Rv(o,e.options))return!1}else if(!xc(e.queryKey,o))return!1}if(t!=="all"){const c=e.isActive();if(t==="active"&&!c||t==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||i&&i!==e.state.fetchStatus||s&&!s(e))}function G_(n,e){const{exact:t,status:r,predicate:i,mutationKey:s}=n;if(s){if(!e.options.mutationKey)return!1;if(t){if(Po(e.options.mutationKey)!==Po(s))return!1}else if(!xc(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function Rv(n,e){return(e?.queryKeyHashFn||Po)(n)}function Po(n){return JSON.stringify(n,(e,t)=>_m(t)?Object.keys(t).sort().reduce((r,i)=>(r[i]=t[i],r),{}):t)}function xc(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>xc(n[t],e[t])):!1}var MI=Object.prototype.hasOwnProperty;function hC(n,e){if(n===e)return n;const t=Y_(n)&&Y_(e);if(!t&&!(_m(n)&&_m(e)))return e;const i=(t?n:Object.keys(n)).length,s=t?e:Object.keys(e),o=s.length,l=t?new Array(o):{};let c=0;for(let d=0;d<o;d++){const h=t?d:s[d],p=n[h],g=e[h];if(p===g){l[h]=p,(t?d<i:MI.call(n,h))&&c++;continue}if(p===null||g===null||typeof p!="object"||typeof g!="object"){l[h]=g;continue}const v=hC(p,g);l[h]=v,v===p&&c++}return i===o&&c===i?n:l}function hh(n,e){if(!e||Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}function Y_(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function _m(n){if(!K_(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!K_(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function K_(n){return Object.prototype.toString.call(n)==="[object Object]"}function NI(n){return new Promise(e=>{Co.setTimeout(e,n)})}function wm(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?hC(n,e):e}function PI(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function jI(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var Ov=Symbol();function fC(n,e){return!n.queryFn&&e?.initialPromise?()=>e.initialPromise:!n.queryFn||n.queryFn===Ov?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}function pC(n,e){return typeof n=="function"?n(...e):!!n}var LI=class extends nl{#e;#t;#n;constructor(){super(),this.#n=n=>{if(!No&&window.addEventListener){const e=()=>n();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(n){this.#n=n,this.#t?.(),this.#t=n(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(n){this.#e!==n&&(this.#e=n,this.onFocus())}onFocus(){const n=this.isFocused();this.listeners.forEach(e=>{e(n)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},Iv=new LI;function Sm(){let n,e;const t=new Promise((i,s)=>{n=i,e=s});t.status="pending",t.catch(()=>{});function r(i){Object.assign(t,i),delete t.resolve,delete t.reject}return t.resolve=i=>{r({status:"fulfilled",value:i}),n(i)},t.reject=i=>{r({status:"rejected",reason:i}),e(i)},t}var FI=OI;function UI(){let n=[],e=0,t=l=>{l()},r=l=>{l()},i=FI;const s=l=>{e?n.push(l):i(()=>{t(l)})},o=()=>{const l=n;n=[],l.length&&i(()=>{r(()=>{l.forEach(c=>{t(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||o()}return c},batchCalls:l=>(...c)=>{s(()=>{l(...c)})},schedule:s,setNotifyFunction:l=>{t=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{i=l}}}var pn=UI(),BI=class extends nl{#e=!0;#t;#n;constructor(){super(),this.#n=n=>{if(!No&&window.addEventListener){const e=()=>n(!0),t=()=>n(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",t,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(n){this.#n=n,this.#t?.(),this.#t=n(this.setOnline.bind(this))}setOnline(n){this.#e!==n&&(this.#e=n,this.listeners.forEach(t=>{t(n)}))}isOnline(){return this.#e}},fh=new BI;function HI(n){return Math.min(1e3*2**n,3e4)}function gC(n){return(n??"online")==="online"?fh.isOnline():!0}var xm=class extends Error{constructor(n){super("CancelledError"),this.revert=n?.revert,this.silent=n?.silent}};function mC(n){let e=!1,t=0,r;const i=Sm(),s=()=>i.status!=="pending",o=_=>{if(!s()){const w=new xm(_);g(w),n.onCancel?.(w)}},l=()=>{e=!0},c=()=>{e=!1},d=()=>Iv.isFocused()&&(n.networkMode==="always"||fh.isOnline())&&n.canRun(),h=()=>gC(n.networkMode)&&n.canRun(),p=_=>{s()||(r?.(),i.resolve(_))},g=_=>{s()||(r?.(),i.reject(_))},v=()=>new Promise(_=>{r=w=>{(s()||d())&&_(w)},n.onPause?.()}).then(()=>{r=void 0,s()||n.onContinue?.()}),y=()=>{if(s())return;let _;const w=t===0?n.initialPromise:void 0;try{_=w??n.fn()}catch(x){_=Promise.reject(x)}Promise.resolve(_).then(p).catch(x=>{if(s())return;const C=n.retry??(No?0:3),T=n.retryDelay??HI,R=typeof T=="function"?T(t,x):T,D=C===!0||typeof C=="number"&&t<C||typeof C=="function"&&C(t,x);if(e||!D){g(x);return}t++,n.onFail?.(t,x),NI(R).then(()=>d()?void 0:v()).then(()=>{e?g(x):y()})})};return{promise:i,status:()=>i.status,cancel:o,continue:()=>(r?.(),i),cancelRetry:l,continueRetry:c,canStart:h,start:()=>(h()?y():v().then(y),i)}}var vC=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),bm(this.gcTime)&&(this.#e=Co.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(No?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Co.clearTimeout(this.#e),this.#e=void 0)}},zI=class extends vC{#e;#t;#n;#i;#r;#o;#a;constructor(n){super(),this.#a=!1,this.#o=n.defaultOptions,this.setOptions(n.options),this.observers=[],this.#i=n.client,this.#n=this.#i.getQueryCache(),this.queryKey=n.queryKey,this.queryHash=n.queryHash,this.#e=Q_(this.options),this.state=n.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(n){if(this.options={...this.#o,...n},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const e=Q_(this.options);e.data!==void 0&&(this.setData(e.data,{updatedAt:e.dataUpdatedAt,manual:!0}),this.#e=e)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(n,e){const t=wm(this.state.data,n,this.options);return this.#s({data:t,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),t}setState(n,e){this.#s({type:"setState",state:n,setStateOptions:e})}cancel(n){const e=this.#r?.promise;return this.#r?.cancel(n),e?e.then(Hn).catch(Hn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(n=>Nr(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Ov||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>Ls(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!dC(this.state.dataUpdatedAt,n)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(e=>e!==n),this.observers.length||(this.#r&&(this.#a?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}async fetch(n,e){if(this.state.fetchStatus!=="idle"&&this.#r?.status()!=="rejected"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(n&&this.setOptions(n),!this.options.queryFn){const l=this.observers.find(c=>c.options.queryFn);l&&this.setOptions(l.options)}const t=new AbortController,r=l=>{Object.defineProperty(l,"signal",{enumerable:!0,get:()=>(this.#a=!0,t.signal)})},i=()=>{const l=fC(this.options,e),d=(()=>{const h={client:this.#i,queryKey:this.queryKey,meta:this.meta};return r(h),h})();return this.#a=!1,this.options.persister?this.options.persister(l,d,this):l(d)},o=(()=>{const l={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#i,state:this.state,fetchFn:i};return r(l),l})();this.options.behavior?.onFetch(o,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==o.fetchOptions?.meta)&&this.#s({type:"fetch",meta:o.fetchOptions?.meta}),this.#r=mC({initialPromise:e?.initialPromise,fn:o.fetchFn,onCancel:l=>{l instanceof xm&&l.revert&&this.setState({...this.#t,fetchStatus:"idle"}),t.abort()},onFail:(l,c)=>{this.#s({type:"failed",failureCount:l,error:c})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0});try{const l=await this.#r.start();if(l===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(l),this.#n.config.onSuccess?.(l,this),this.#n.config.onSettled?.(l,this.state.error,this),l}catch(l){if(l instanceof xm){if(l.silent)return this.#r.promise;if(l.revert){if(this.state.data===void 0)throw l;return this.state.data}}throw this.#s({type:"error",error:l}),this.#n.config.onError?.(l,this),this.#n.config.onSettled?.(this.state.data,l,this),l}finally{this.scheduleGc()}}#s(n){const e=t=>{switch(n.type){case"failed":return{...t,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,...yC(t.data,this.options),fetchMeta:n.meta??null};case"success":const r={...t,data:n.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=n.manual?r:void 0,r;case"error":const i=n.error;return{...t,error:i,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...n.state}}};this.state=e(this.state),pn.batch(()=>{this.observers.forEach(t=>{t.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:n})})}};function yC(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:gC(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function Q_(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var $I=class extends nl{constructor(n,e){super(),this.options=e,this.#e=n,this.#s=null,this.#a=Sm(),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#n=void 0;#i=void 0;#r;#o;#a;#s;#g;#h;#f;#c;#u;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),X_(this.#t,this.options)?this.#d():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Em(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Em(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#_(),this.#w(),this.#t.removeObserver(this)}setOptions(n){const e=this.options,t=this.#t;if(this.options=this.#e.defaultQueryOptions(n),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Nr(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#S(),this.#t.setOptions(this.options),e._defaulted&&!hh(this.options,e)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const r=this.hasListeners();r&&Z_(this.#t,t,this.options,e)&&this.#d(),this.updateResult(),r&&(this.#t!==t||Nr(this.options.enabled,this.#t)!==Nr(e.enabled,this.#t)||Ls(this.options.staleTime,this.#t)!==Ls(e.staleTime,this.#t))&&this.#m();const i=this.#v();r&&(this.#t!==t||Nr(this.options.enabled,this.#t)!==Nr(e.enabled,this.#t)||i!==this.#l)&&this.#y(i)}getOptimisticResult(n){const e=this.#e.getQueryCache().build(this.#e,n),t=this.createResult(e,n);return VI(this,t)&&(this.#i=t,this.#o=this.options,this.#r=this.#t.state),t}getCurrentResult(){return this.#i}trackResult(n,e){return new Proxy(n,{get:(t,r)=>(this.trackProp(r),e?.(r),r==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#a.status==="pending"&&this.#a.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(t,r))})}trackProp(n){this.#p.add(n)}getCurrentQuery(){return this.#t}refetch({...n}={}){return this.fetch({...n})}fetchOptimistic(n){const e=this.#e.defaultQueryOptions(n),t=this.#e.getQueryCache().build(this.#e,e);return t.fetch().then(()=>this.createResult(t,e))}fetch(n){return this.#d({...n,cancelRefetch:n.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#i))}#d(n){this.#S();let e=this.#t.fetch(this.options,n);return n?.throwOnError||(e=e.catch(Hn)),e}#m(){this.#_();const n=Ls(this.options.staleTime,this.#t);if(No||this.#i.isStale||!bm(n))return;const t=dC(this.#i.dataUpdatedAt,n)+1;this.#c=Co.setTimeout(()=>{this.#i.isStale||this.updateResult()},t)}#v(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#y(n){this.#w(),this.#l=n,!(No||Nr(this.options.enabled,this.#t)===!1||!bm(this.#l)||this.#l===0)&&(this.#u=Co.setInterval(()=>{(this.options.refetchIntervalInBackground||Iv.isFocused())&&this.#d()},this.#l))}#b(){this.#m(),this.#y(this.#v())}#_(){this.#c&&(Co.clearTimeout(this.#c),this.#c=void 0)}#w(){this.#u&&(Co.clearInterval(this.#u),this.#u=void 0)}createResult(n,e){const t=this.#t,r=this.options,i=this.#i,s=this.#r,o=this.#o,c=n!==t?n.state:this.#n,{state:d}=n;let h={...d},p=!1,g;if(e._optimisticResults){const I=this.hasListeners(),F=!I&&X_(n,e),z=I&&Z_(n,t,e,r);(F||z)&&(h={...h,...yC(d.data,n.options)}),e._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:v,errorUpdatedAt:y,status:_}=h;g=h.data;let w=!1;if(e.placeholderData!==void 0&&g===void 0&&_==="pending"){let I;i?.isPlaceholderData&&e.placeholderData===o?.placeholderData?(I=i.data,w=!0):I=typeof e.placeholderData=="function"?e.placeholderData(this.#f?.state.data,this.#f):e.placeholderData,I!==void 0&&(_="success",g=wm(i?.data,I,e),p=!0)}if(e.select&&g!==void 0&&!w)if(i&&g===s?.data&&e.select===this.#g)g=this.#h;else try{this.#g=e.select,g=e.select(g),g=wm(i?.data,g,e),this.#h=g,this.#s=null}catch(I){this.#s=I}this.#s&&(v=this.#s,g=this.#h,y=Date.now(),_="error");const x=h.fetchStatus==="fetching",C=_==="pending",T=_==="error",R=C&&x,D=g!==void 0,M={status:_,fetchStatus:h.fetchStatus,isPending:C,isSuccess:_==="success",isError:T,isInitialLoading:R,isLoading:R,data:g,dataUpdatedAt:h.dataUpdatedAt,error:v,errorUpdatedAt:y,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>c.dataUpdateCount||h.errorUpdateCount>c.errorUpdateCount,isFetching:x,isRefetching:x&&!C,isLoadingError:T&&!D,isPaused:h.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:T&&D,isStale:Mv(n,e),refetch:this.refetch,promise:this.#a,isEnabled:Nr(e.enabled,n)!==!1};if(this.options.experimental_prefetchInRender){const I=V=>{M.status==="error"?V.reject(M.error):M.data!==void 0&&V.resolve(M.data)},F=()=>{const V=this.#a=M.promise=Sm();I(V)},z=this.#a;switch(z.status){case"pending":n.queryHash===t.queryHash&&I(z);break;case"fulfilled":(M.status==="error"||M.data!==z.value)&&F();break;case"rejected":(M.status!=="error"||M.error!==z.reason)&&F();break}}return M}updateResult(){const n=this.#i,e=this.createResult(this.#t,this.options);if(this.#r=this.#t.state,this.#o=this.options,this.#r.data!==void 0&&(this.#f=this.#t),hh(e,n))return;this.#i=e;const t=()=>{if(!n)return!0;const{notifyOnChangeProps:r}=this.options,i=typeof r=="function"?r():r;if(i==="all"||!i&&!this.#p.size)return!0;const s=new Set(i??this.#p);return this.options.throwOnError&&s.add("error"),Object.keys(this.#i).some(o=>{const l=o;return this.#i[l]!==n[l]&&s.has(l)})};this.#x({listeners:t()})}#S(){const n=this.#e.getQueryCache().build(this.#e,this.options);if(n===this.#t)return;const e=this.#t;this.#t=n,this.#n=n.state,this.hasListeners()&&(e?.removeObserver(this),n.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#x(n){pn.batch(()=>{n.listeners&&this.listeners.forEach(e=>{e(this.#i)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function WI(n,e){return Nr(e.enabled,n)!==!1&&n.state.data===void 0&&!(n.state.status==="error"&&e.retryOnMount===!1)}function X_(n,e){return WI(n,e)||n.state.data!==void 0&&Em(n,e,e.refetchOnMount)}function Em(n,e,t){if(Nr(e.enabled,n)!==!1&&Ls(e.staleTime,n)!=="static"){const r=typeof t=="function"?t(n):t;return r==="always"||r!==!1&&Mv(n,e)}return!1}function Z_(n,e,t,r){return(n!==e||Nr(r.enabled,n)===!1)&&(!t.suspense||n.state.status!=="error")&&Mv(n,t)}function Mv(n,e){return Nr(e.enabled,n)!==!1&&n.isStaleByTime(Ls(e.staleTime,n))}function VI(n,e){return!hh(n.getCurrentResult(),e)}function J_(n){return{onFetch:(e,t)=>{const r=e.options,i=e.fetchOptions?.meta?.fetchMore?.direction,s=e.state.data?.pages||[],o=e.state.data?.pageParams||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let h=!1;const p=y=>{Object.defineProperty(y,"signal",{enumerable:!0,get:()=>(e.signal.aborted?h=!0:e.signal.addEventListener("abort",()=>{h=!0}),e.signal)})},g=fC(e.options,e.fetchOptions),v=async(y,_,w)=>{if(h)return Promise.reject();if(_==null&&y.pages.length)return Promise.resolve(y);const C=(()=>{const O={client:e.client,queryKey:e.queryKey,pageParam:_,direction:w?"backward":"forward",meta:e.options.meta};return p(O),O})(),T=await g(C),{maxPages:R}=e.options,D=w?jI:PI;return{pages:D(y.pages,T,R),pageParams:D(y.pageParams,_,R)}};if(i&&s.length){const y=i==="backward",_=y?qI:ew,w={pages:s,pageParams:o},x=_(r,w);l=await v(w,x,y)}else{const y=n??s.length;do{const _=c===0?o[0]??r.initialPageParam:ew(r,l);if(c>0&&_==null)break;l=await v(l,_),c++}while(c<y)}return l};e.options.persister?e.fetchFn=()=>e.options.persister?.(d,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t):e.fetchFn=d}}}function ew(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function qI(n,{pages:e,pageParams:t}){return e.length>0?n.getPreviousPageParam?.(e[0],e,t[0],t):void 0}var GI=class extends vC{#e;#t;#n;#i;constructor(n){super(),this.#e=n.client,this.mutationId=n.mutationId,this.#n=n.mutationCache,this.#t=[],this.state=n.state||bC(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){this.#t.includes(n)||(this.#t.push(n),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){this.#t=this.#t.filter(e=>e!==n),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#i?.continue()??this.execute(this.state.variables)}async execute(n){const e=()=>{this.#r({type:"continue"})},t={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#i=mC({fn:()=>this.options.mutationFn?this.options.mutationFn(n,t):Promise.reject(new Error("No mutationFn found")),onFail:(s,o)=>{this.#r({type:"failed",failureCount:s,error:o})},onPause:()=>{this.#r({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const r=this.state.status==="pending",i=!this.#i.canStart();try{if(r)e();else{this.#r({type:"pending",variables:n,isPaused:i}),await this.#n.config.onMutate?.(n,this,t);const o=await this.options.onMutate?.(n,t);o!==this.state.context&&this.#r({type:"pending",context:o,variables:n,isPaused:i})}const s=await this.#i.start();return await this.#n.config.onSuccess?.(s,n,this.state.context,this,t),await this.options.onSuccess?.(s,n,this.state.context,t),await this.#n.config.onSettled?.(s,null,this.state.variables,this.state.context,this,t),await this.options.onSettled?.(s,null,n,this.state.context,t),this.#r({type:"success",data:s}),s}catch(s){try{throw await this.#n.config.onError?.(s,n,this.state.context,this,t),await this.options.onError?.(s,n,this.state.context,t),await this.#n.config.onSettled?.(void 0,s,this.state.variables,this.state.context,this,t),await this.options.onSettled?.(void 0,s,n,this.state.context,t),s}finally{this.#r({type:"error",error:s})}}finally{this.#n.runNext(this)}}#r(n){const e=t=>{switch(n.type){case"failed":return{...t,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...t,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:n.error,failureCount:t.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=e(this.state),pn.batch(()=>{this.#t.forEach(t=>{t.onMutationUpdate(n)}),this.#n.notify({mutation:this,type:"updated",action:n})})}};function bC(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var YI=class extends nl{constructor(n={}){super(),this.config=n,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(n,e,t){const r=new GI({client:n,mutationCache:this,mutationId:++this.#n,options:n.defaultMutationOptions(e),state:t});return this.add(r),r}add(n){this.#e.add(n);const e=dd(n);if(typeof e=="string"){const t=this.#t.get(e);t?t.push(n):this.#t.set(e,[n])}this.notify({type:"added",mutation:n})}remove(n){if(this.#e.delete(n)){const e=dd(n);if(typeof e=="string"){const t=this.#t.get(e);if(t)if(t.length>1){const r=t.indexOf(n);r!==-1&&t.splice(r,1)}else t[0]===n&&this.#t.delete(e)}}this.notify({type:"removed",mutation:n})}canRun(n){const e=dd(n);if(typeof e=="string"){const r=this.#t.get(e)?.find(i=>i.state.status==="pending");return!r||r===n}else return!0}runNext(n){const e=dd(n);return typeof e=="string"?this.#t.get(e)?.find(r=>r!==n&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){pn.batch(()=>{this.#e.forEach(n=>{this.notify({type:"removed",mutation:n})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(n){const e={exact:!0,...n};return this.getAll().find(t=>G_(e,t))}findAll(n={}){return this.getAll().filter(e=>G_(n,e))}notify(n){pn.batch(()=>{this.listeners.forEach(e=>{e(n)})})}resumePausedMutations(){const n=this.getAll().filter(e=>e.state.isPaused);return pn.batch(()=>Promise.all(n.map(e=>e.continue().catch(Hn))))}};function dd(n){return n.options.scope?.id}var KI=class extends nl{#e;#t=void 0;#n;#i;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#r()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const t=this.options;this.options=this.#e.defaultMutationOptions(e),hh(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),t?.mutationKey&&this.options.mutationKey&&Po(t.mutationKey)!==Po(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(e){this.#r(),this.#o(e)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#r(),this.#o()}mutate(e,t){return this.#i=t,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(e)}#r(){const e=this.#n?.state??bC();this.#t={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#o(e){pn.batch(()=>{if(this.#i&&this.hasListeners()){const t=this.#t.variables,r=this.#t.context,i={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};e?.type==="success"?(this.#i.onSuccess?.(e.data,t,r,i),this.#i.onSettled?.(e.data,null,t,r,i)):e?.type==="error"&&(this.#i.onError?.(e.error,t,r,i),this.#i.onSettled?.(void 0,e.error,t,r,i))}this.listeners.forEach(t=>{t(this.#t)})})}},QI=class extends nl{constructor(n={}){super(),this.config=n,this.#e=new Map}#e;build(n,e,t){const r=e.queryKey,i=e.queryHash??Rv(r,e);let s=this.get(i);return s||(s=new zI({client:n,queryKey:r,queryHash:i,options:n.defaultQueryOptions(e),state:t,defaultOptions:n.getQueryDefaults(r)}),this.add(s)),s}add(n){this.#e.has(n.queryHash)||(this.#e.set(n.queryHash,n),this.notify({type:"added",query:n}))}remove(n){const e=this.#e.get(n.queryHash);e&&(n.destroy(),e===n&&this.#e.delete(n.queryHash),this.notify({type:"removed",query:n}))}clear(){pn.batch(()=>{this.getAll().forEach(n=>{this.remove(n)})})}get(n){return this.#e.get(n)}getAll(){return[...this.#e.values()]}find(n){const e={exact:!0,...n};return this.getAll().find(t=>q_(e,t))}findAll(n={}){const e=this.getAll();return Object.keys(n).length>0?e.filter(t=>q_(n,t)):e}notify(n){pn.batch(()=>{this.listeners.forEach(e=>{e(n)})})}onFocus(){pn.batch(()=>{this.getAll().forEach(n=>{n.onFocus()})})}onOnline(){pn.batch(()=>{this.getAll().forEach(n=>{n.onOnline()})})}},XI=class{#e;#t;#n;#i;#r;#o;#a;#s;constructor(n={}){this.#e=n.queryCache||new QI,this.#t=n.mutationCache||new YI,this.#n=n.defaultOptions||{},this.#i=new Map,this.#r=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#a=Iv.subscribe(async n=>{n&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#s=fh.subscribe(async n=>{n&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#a?.(),this.#a=void 0,this.#s?.(),this.#s=void 0)}isFetching(n){return this.#e.findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return this.#t.findAll({...n,status:"pending"}).length}getQueryData(n){const e=this.defaultQueryOptions({queryKey:n});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=this.#e.build(this,e),r=t.state.data;return r===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(Ls(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(n){return this.#e.findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),s=this.#e.get(r.queryHash)?.state.data,o=II(e,s);if(o!==void 0)return this.#e.build(this,r).setData(o,{...t,manual:!0})}setQueriesData(n,e,t){return pn.batch(()=>this.#e.findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){const e=this.defaultQueryOptions({queryKey:n});return this.#e.get(e.queryHash)?.state}removeQueries(n){const e=this.#e;pn.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=this.#e;return pn.batch(()=>(t.findAll(n).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},r=pn.batch(()=>this.#e.findAll(n).map(i=>i.cancel(t)));return Promise.all(r).then(Hn).catch(Hn)}invalidateQueries(n,e={}){return pn.batch(()=>(this.#e.findAll(n).forEach(t=>{t.invalidate()}),n?.refetchType==="none"?Promise.resolve():this.refetchQueries({...n,type:n?.refetchType??n?.type??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},r=pn.batch(()=>this.#e.findAll(n).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,t);return t.throwOnError||(s=s.catch(Hn)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(Hn)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=this.#e.build(this,e);return t.isStaleByTime(Ls(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(Hn).catch(Hn)}fetchInfiniteQuery(n){return n.behavior=J_(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(Hn).catch(Hn)}ensureInfiniteQueryData(n){return n.behavior=J_(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return fh.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(n){this.#n=n}setQueryDefaults(n,e){this.#i.set(Po(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...this.#i.values()],t={};return e.forEach(r=>{xc(n,r.queryKey)&&Object.assign(t,r.defaultOptions)}),t}setMutationDefaults(n,e){this.#r.set(Po(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...this.#r.values()],t={};return e.forEach(r=>{xc(n,r.mutationKey)&&Object.assign(t,r.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...this.#n.queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=Rv(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Ov&&(e.enabled=!1),e}defaultMutationOptions(n){return n?._defaulted?n:{...this.#n.mutations,...n?.mutationKey&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},_C=k.createContext(void 0),ur=n=>{const e=k.useContext(_C);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},ZI=({client:n,children:e})=>(k.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),E.jsx(_C.Provider,{value:n,children:e})),wC=k.createContext(!1),JI=()=>k.useContext(wC);wC.Provider;function eM(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}var tM=k.createContext(eM()),nM=()=>k.useContext(tM),rM=(n,e)=>{(n.suspense||n.throwOnError||n.experimental_prefetchInRender)&&(e.isReset()||(n.retryOnMount=!1))},iM=n=>{k.useEffect(()=>{n.clearReset()},[n])},sM=({result:n,errorResetBoundary:e,throwOnError:t,query:r,suspense:i})=>n.isError&&!e.isReset()&&!n.isFetching&&r&&(i&&n.data===void 0||pC(t,[n.error,r])),oM=n=>{if(n.suspense){const t=i=>i==="static"?i:Math.max(i??1e3,1e3),r=n.staleTime;n.staleTime=typeof r=="function"?(...i)=>t(r(...i)):t(r),typeof n.gcTime=="number"&&(n.gcTime=Math.max(n.gcTime,1e3))}},aM=(n,e)=>n.isLoading&&n.isFetching&&!e,lM=(n,e)=>n?.suspense&&e.isPending,tw=(n,e,t)=>e.fetchOptimistic(n).catch(()=>{t.clearReset()});function cM(n,e,t){const r=JI(),i=nM(),s=ur(),o=s.defaultQueryOptions(n);s.getDefaultOptions().queries?._experimental_beforeQuery?.(o),o._optimisticResults=r?"isRestoring":"optimistic",oM(o),rM(o,i),iM(i);const l=!s.getQueryCache().get(o.queryHash),[c]=k.useState(()=>new e(s,o)),d=c.getOptimisticResult(o),h=!r&&n.subscribed!==!1;if(k.useSyncExternalStore(k.useCallback(p=>{const g=h?c.subscribe(pn.batchCalls(p)):Hn;return c.updateResult(),g},[c,h]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),k.useEffect(()=>{c.setOptions(o)},[o,c]),lM(o,d))throw tw(o,c,i);if(sM({result:d,errorResetBoundary:i,throwOnError:o.throwOnError,query:s.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw d.error;return s.getDefaultOptions().queries?._experimental_afterQuery?.(o,d),o.experimental_prefetchInRender&&!No&&aM(d,r)&&(l?tw(o,c,i):s.getQueryCache().get(o.queryHash)?.promise)?.catch(Hn).finally(()=>{c.updateResult()}),o.notifyOnChangeProps?d:c.trackResult(d)}function Bo(n,e){return cM(n,$I)}function rs(n,e){const t=ur(),[r]=k.useState(()=>new KI(t,n));k.useEffect(()=>{r.setOptions(n)},[r,n]);const i=k.useSyncExternalStore(k.useCallback(o=>r.subscribe(pn.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),s=k.useCallback((o,l)=>{r.mutate(o,l).catch(Hn)},[r]);if(i.error&&pC(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}function uM(n){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}const dM=n=>{switch(n){case"success":return pM;case"info":return mM;case"warning":return gM;case"error":return vM;default:return null}},hM=Array(12).fill(0),fM=({visible:n,className:e})=>K.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":n},K.createElement("div",{className:"sonner-spinner"},hM.map((t,r)=>K.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),pM=K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},K.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),gM=K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},K.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),mM=K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},K.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),vM=K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},K.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),yM=K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},K.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),K.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),bM=()=>{const[n,e]=K.useState(document.hidden);return K.useEffect(()=>{const t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n};let Cm=1;class _M{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:r,...i}=e,s=typeof e?.id=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Cm++,o=this.toasts.find(c=>c.id===s),l=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),o?this.toasts=this.toasts.map(c=>c.id===s?(this.publish({...c,...e,id:s,title:r}),{...c,...e,id:s,dismissible:l,title:r}):c):this.addToast({title:r,...i,dismissible:l,id:s}),s},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const i=Promise.resolve(e instanceof Function?e():e);let s=r!==void 0,o;const l=i.then(async d=>{if(o=["resolve",d],K.isValidElement(d))s=!1,this.create({id:r,type:"default",message:d});else if(SM(d)&&!d.ok){s=!1;const p=typeof t.error=="function"?await t.error(`HTTP error! status: ${d.status}`):t.error,g=typeof t.description=="function"?await t.description(`HTTP error! status: ${d.status}`):t.description,y=typeof p=="object"&&!K.isValidElement(p)?p:{message:p};this.create({id:r,type:"error",description:g,...y})}else if(d instanceof Error){s=!1;const p=typeof t.error=="function"?await t.error(d):t.error,g=typeof t.description=="function"?await t.description(d):t.description,y=typeof p=="object"&&!K.isValidElement(p)?p:{message:p};this.create({id:r,type:"error",description:g,...y})}else if(t.success!==void 0){s=!1;const p=typeof t.success=="function"?await t.success(d):t.success,g=typeof t.description=="function"?await t.description(d):t.description,y=typeof p=="object"&&!K.isValidElement(p)?p:{message:p};this.create({id:r,type:"success",description:g,...y})}}).catch(async d=>{if(o=["reject",d],t.error!==void 0){s=!1;const h=typeof t.error=="function"?await t.error(d):t.error,p=typeof t.description=="function"?await t.description(d):t.description,v=typeof h=="object"&&!K.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:p,...v})}}).finally(()=>{s&&(this.dismiss(r),r=void 0),t.finally==null||t.finally.call(t)}),c=()=>new Promise((d,h)=>l.then(()=>o[0]==="reject"?h(o[1]):d(o[1])).catch(h));return typeof r!="string"&&typeof r!="number"?{unwrap:c}:Object.assign(r,{unwrap:c})},this.custom=(e,t)=>{const r=t?.id||Cm++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const sr=new _M,wM=(n,e)=>{const t=e?.id||Cm++;return sr.addToast({title:n,...e,id:t}),t},SM=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",xM=wM,EM=()=>sr.toasts,CM=()=>sr.getActiveToasts();Object.assign(xM,{success:sr.success,info:sr.info,warning:sr.warning,error:sr.error,custom:sr.custom,message:sr.message,promise:sr.promise,dismiss:sr.dismiss,loading:sr.loading},{getHistory:EM,getToasts:CM});uM("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function hd(n){return n.label!==void 0}const TM=3,kM="24px",AM="16px",nw=4e3,DM=356,RM=14,OM=45,IM=200;function ui(...n){return n.filter(Boolean).join(" ")}function MM(n){const[e,t]=n.split("-"),r=[];return e&&r.push(e),t&&r.push(t),r}const NM=n=>{var e,t,r,i,s,o,l,c,d;const{invert:h,toast:p,unstyled:g,interacting:v,setHeights:y,visibleToasts:_,heights:w,index:x,toasts:C,expanded:T,removeToast:R,defaultRichColors:D,closeButton:O,style:M,cancelButtonStyle:I,actionButtonStyle:F,className:z="",descriptionClassName:V="",duration:ee,position:re,gap:fe,expandByDefault:pe,classNames:ie,icons:ae,closeButtonAriaLabel:Q="Close toast"}=n,[q,Y]=K.useState(null),[L,G]=K.useState(null),[ne,le]=K.useState(!1),[ue,ce]=K.useState(!1),[Ce,se]=K.useState(!1),[Pe,ze]=K.useState(!1),[Wt,Gt]=K.useState(!1),[qn,ge]=K.useState(0),[Fe,et]=K.useState(0),xt=K.useRef(p.duration||ee||nw),on=K.useRef(null),qe=K.useRef(null),Ee=x===0,dt=x+1<=_,Ue=p.type,X=p.dismissible!==!1,ye=p.className||"",Be=p.descriptionClassName||"",je=K.useMemo(()=>w.findIndex(de=>de.toastId===p.id)||0,[w,p.id]),be=K.useMemo(()=>{var de;return(de=p.closeButton)!=null?de:O},[p.closeButton,O]),we=K.useMemo(()=>p.duration||ee||nw,[p.duration,ee]),Ie=K.useRef(0),$e=K.useRef(0),We=K.useRef(0),ot=K.useRef(null),[ft,wr]=re.split("-"),yt=K.useMemo(()=>w.reduce((de,Le,Qe)=>Qe>=je?de:de+Le.height,0),[w,je]),at=bM(),Yt=p.invert||h,Ve=Ue==="loading";$e.current=K.useMemo(()=>je*fe+yt,[je,yt]),K.useEffect(()=>{xt.current=we},[we]),K.useEffect(()=>{le(!0)},[]),K.useEffect(()=>{const de=qe.current;if(de){const Le=de.getBoundingClientRect().height;return et(Le),y(Qe=>[{toastId:p.id,height:Le,position:p.position},...Qe]),()=>y(Qe=>Qe.filter(nt=>nt.toastId!==p.id))}},[y,p.id]),K.useLayoutEffect(()=>{if(!ne)return;const de=qe.current,Le=de.style.height;de.style.height="auto";const Qe=de.getBoundingClientRect().height;de.style.height=Le,et(Qe),y(nt=>nt.find(ht=>ht.toastId===p.id)?nt.map(ht=>ht.toastId===p.id?{...ht,height:Qe}:ht):[{toastId:p.id,height:Qe,position:p.position},...nt])},[ne,p.title,p.description,y,p.id,p.jsx,p.action,p.cancel]);const Ke=K.useCallback(()=>{ce(!0),ge($e.current),y(de=>de.filter(Le=>Le.toastId!==p.id)),setTimeout(()=>{R(p)},IM)},[p,R,y,$e]);K.useEffect(()=>{if(p.promise&&Ue==="loading"||p.duration===1/0||p.type==="loading")return;let de;return T||v||at?(()=>{if(We.current<Ie.current){const nt=new Date().getTime()-Ie.current;xt.current=xt.current-nt}We.current=new Date().getTime()})():(()=>{xt.current!==1/0&&(Ie.current=new Date().getTime(),de=setTimeout(()=>{p.onAutoClose==null||p.onAutoClose.call(p,p),Ke()},xt.current))})(),()=>clearTimeout(de)},[T,v,p,Ue,at,Ke]),K.useEffect(()=>{p.delete&&(Ke(),p.onDismiss==null||p.onDismiss.call(p,p))},[Ke,p.delete]);function Gn(){var de;if(ae?.loading){var Le;return K.createElement("div",{className:ui(ie?.loader,p==null||(Le=p.classNames)==null?void 0:Le.loader,"sonner-loader"),"data-visible":Ue==="loading"},ae.loading)}return K.createElement(fM,{className:ui(ie?.loader,p==null||(de=p.classNames)==null?void 0:de.loader),visible:Ue==="loading"})}const En=p.icon||ae?.[Ue]||dM(Ue);var tt,Kt;return K.createElement("li",{tabIndex:0,ref:qe,className:ui(z,ye,ie?.toast,p==null||(e=p.classNames)==null?void 0:e.toast,ie?.default,ie?.[Ue],p==null||(t=p.classNames)==null?void 0:t[Ue]),"data-sonner-toast":"","data-rich-colors":(tt=p.richColors)!=null?tt:D,"data-styled":!(p.jsx||p.unstyled||g),"data-mounted":ne,"data-promise":!!p.promise,"data-swiped":Wt,"data-removed":ue,"data-visible":dt,"data-y-position":ft,"data-x-position":wr,"data-index":x,"data-front":Ee,"data-swiping":Ce,"data-dismissible":X,"data-type":Ue,"data-invert":Yt,"data-swipe-out":Pe,"data-swipe-direction":L,"data-expanded":!!(T||pe&&ne),"data-testid":p.testId,style:{"--index":x,"--toasts-before":x,"--z-index":C.length-x,"--offset":`${ue?qn:$e.current}px`,"--initial-height":pe?"auto":`${Fe}px`,...M,...p.style},onDragEnd:()=>{se(!1),Y(null),ot.current=null},onPointerDown:de=>{de.button!==2&&(Ve||!X||(on.current=new Date,ge($e.current),de.target.setPointerCapture(de.pointerId),de.target.tagName!=="BUTTON"&&(se(!0),ot.current={x:de.clientX,y:de.clientY})))},onPointerUp:()=>{var de,Le,Qe;if(Pe||!X)return;ot.current=null;const nt=Number(((de=qe.current)==null?void 0:de.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Vt=Number(((Le=qe.current)==null?void 0:Le.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),ht=new Date().getTime()-((Qe=on.current)==null?void 0:Qe.getTime()),Me=q==="x"?nt:Vt,Qt=Math.abs(Me)/ht;if(Math.abs(Me)>=OM||Qt>.11){ge($e.current),p.onDismiss==null||p.onDismiss.call(p,p),G(q==="x"?nt>0?"right":"left":Vt>0?"down":"up"),Ke(),ze(!0);return}else{var bt,jt;(bt=qe.current)==null||bt.style.setProperty("--swipe-amount-x","0px"),(jt=qe.current)==null||jt.style.setProperty("--swipe-amount-y","0px")}Gt(!1),se(!1),Y(null)},onPointerMove:de=>{var Le,Qe,nt;if(!ot.current||!X||((Le=window.getSelection())==null?void 0:Le.toString().length)>0)return;const ht=de.clientY-ot.current.y,Me=de.clientX-ot.current.x;var Qt;const bt=(Qt=n.swipeDirections)!=null?Qt:MM(re);!q&&(Math.abs(Me)>1||Math.abs(ht)>1)&&Y(Math.abs(Me)>Math.abs(ht)?"x":"y");let jt={x:0,y:0};const Yn=vn=>1/(1.5+Math.abs(vn)/20);if(q==="y"){if(bt.includes("top")||bt.includes("bottom"))if(bt.includes("top")&&ht<0||bt.includes("bottom")&&ht>0)jt.y=ht;else{const vn=ht*Yn(ht);jt.y=Math.abs(vn)<Math.abs(ht)?vn:ht}}else if(q==="x"&&(bt.includes("left")||bt.includes("right")))if(bt.includes("left")&&Me<0||bt.includes("right")&&Me>0)jt.x=Me;else{const vn=Me*Yn(Me);jt.x=Math.abs(vn)<Math.abs(Me)?vn:Me}(Math.abs(jt.x)>0||Math.abs(jt.y)>0)&&Gt(!0),(Qe=qe.current)==null||Qe.style.setProperty("--swipe-amount-x",`${jt.x}px`),(nt=qe.current)==null||nt.style.setProperty("--swipe-amount-y",`${jt.y}px`)}},be&&!p.jsx&&Ue!=="loading"?K.createElement("button",{"aria-label":Q,"data-disabled":Ve,"data-close-button":!0,onClick:Ve||!X?()=>{}:()=>{Ke(),p.onDismiss==null||p.onDismiss.call(p,p)},className:ui(ie?.closeButton,p==null||(r=p.classNames)==null?void 0:r.closeButton)},(Kt=ae?.close)!=null?Kt:yM):null,(Ue||p.icon||p.promise)&&p.icon!==null&&(ae?.[Ue]!==null||p.icon)?K.createElement("div",{"data-icon":"",className:ui(ie?.icon,p==null||(i=p.classNames)==null?void 0:i.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||Gn():null,p.type!=="loading"?En:null):null,K.createElement("div",{"data-content":"",className:ui(ie?.content,p==null||(s=p.classNames)==null?void 0:s.content)},K.createElement("div",{"data-title":"",className:ui(ie?.title,p==null||(o=p.classNames)==null?void 0:o.title)},p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title),p.description?K.createElement("div",{"data-description":"",className:ui(V,Be,ie?.description,p==null||(l=p.classNames)==null?void 0:l.description)},typeof p.description=="function"?p.description():p.description):null),K.isValidElement(p.cancel)?p.cancel:p.cancel&&hd(p.cancel)?K.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||I,onClick:de=>{hd(p.cancel)&&X&&(p.cancel.onClick==null||p.cancel.onClick.call(p.cancel,de),Ke())},className:ui(ie?.cancelButton,p==null||(c=p.classNames)==null?void 0:c.cancelButton)},p.cancel.label):null,K.isValidElement(p.action)?p.action:p.action&&hd(p.action)?K.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||F,onClick:de=>{hd(p.action)&&(p.action.onClick==null||p.action.onClick.call(p.action,de),!de.defaultPrevented&&Ke())},className:ui(ie?.actionButton,p==null||(d=p.classNames)==null?void 0:d.actionButton)},p.action.label):null)};function rw(){if(typeof window>"u"||typeof document>"u")return"ltr";const n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function PM(n,e){const t={};return[n,e].forEach((r,i)=>{const s=i===1,o=s?"--mobile-offset":"--offset",l=s?AM:kM;function c(d){["top","right","bottom","left"].forEach(h=>{t[`${o}-${h}`]=typeof d=="number"?`${d}px`:d})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(d=>{r[d]===void 0?t[`${o}-${d}`]=l:t[`${o}-${d}`]=typeof r[d]=="number"?`${r[d]}px`:r[d]}):c(l)}),t}const jM=K.forwardRef(function(e,t){const{id:r,invert:i,position:s="bottom-right",hotkey:o=["altKey","KeyT"],expand:l,closeButton:c,className:d,offset:h,mobileOffset:p,theme:g="light",richColors:v,duration:y,style:_,visibleToasts:w=TM,toastOptions:x,dir:C=rw(),gap:T=RM,icons:R,containerAriaLabel:D="Notifications"}=e,[O,M]=K.useState([]),I=K.useMemo(()=>r?O.filter(ne=>ne.toasterId===r):O.filter(ne=>!ne.toasterId),[O,r]),F=K.useMemo(()=>Array.from(new Set([s].concat(I.filter(ne=>ne.position).map(ne=>ne.position)))),[I,s]),[z,V]=K.useState([]),[ee,re]=K.useState(!1),[fe,pe]=K.useState(!1),[ie,ae]=K.useState(g!=="system"?g:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Q=K.useRef(null),q=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),Y=K.useRef(null),L=K.useRef(!1),G=K.useCallback(ne=>{M(le=>{var ue;return(ue=le.find(ce=>ce.id===ne.id))!=null&&ue.delete||sr.dismiss(ne.id),le.filter(({id:ce})=>ce!==ne.id)})},[]);return K.useEffect(()=>sr.subscribe(ne=>{if(ne.dismiss){requestAnimationFrame(()=>{M(le=>le.map(ue=>ue.id===ne.id?{...ue,delete:!0}:ue))});return}setTimeout(()=>{AI.flushSync(()=>{M(le=>{const ue=le.findIndex(ce=>ce.id===ne.id);return ue!==-1?[...le.slice(0,ue),{...le[ue],...ne},...le.slice(ue+1)]:[ne,...le]})})})}),[O]),K.useEffect(()=>{if(g!=="system"){ae(g);return}if(g==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ae("dark"):ae("light")),typeof window>"u")return;const ne=window.matchMedia("(prefers-color-scheme: dark)");try{ne.addEventListener("change",({matches:le})=>{ae(le?"dark":"light")})}catch{ne.addListener(({matches:ue})=>{try{ae(ue?"dark":"light")}catch(ce){console.error(ce)}})}},[g]),K.useEffect(()=>{O.length<=1&&re(!1)},[O]),K.useEffect(()=>{const ne=le=>{var ue;if(o.every(se=>le[se]||le.code===se)){var Ce;re(!0),(Ce=Q.current)==null||Ce.focus()}le.code==="Escape"&&(document.activeElement===Q.current||(ue=Q.current)!=null&&ue.contains(document.activeElement))&&re(!1)};return document.addEventListener("keydown",ne),()=>document.removeEventListener("keydown",ne)},[o]),K.useEffect(()=>{if(Q.current)return()=>{Y.current&&(Y.current.focus({preventScroll:!0}),Y.current=null,L.current=!1)}},[Q.current]),K.createElement("section",{ref:t,"aria-label":`${D} ${q}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},F.map((ne,le)=>{var ue;const[ce,Ce]=ne.split("-");return I.length?K.createElement("ol",{key:ne,dir:C==="auto"?rw():C,tabIndex:-1,ref:Q,className:d,"data-sonner-toaster":!0,"data-sonner-theme":ie,"data-y-position":ce,"data-x-position":Ce,style:{"--front-toast-height":`${((ue=z[0])==null?void 0:ue.height)||0}px`,"--width":`${DM}px`,"--gap":`${T}px`,..._,...PM(h,p)},onBlur:se=>{L.current&&!se.currentTarget.contains(se.relatedTarget)&&(L.current=!1,Y.current&&(Y.current.focus({preventScroll:!0}),Y.current=null))},onFocus:se=>{se.target instanceof HTMLElement&&se.target.dataset.dismissible==="false"||L.current||(L.current=!0,Y.current=se.relatedTarget)},onMouseEnter:()=>re(!0),onMouseMove:()=>re(!0),onMouseLeave:()=>{fe||re(!1)},onDragEnd:()=>re(!1),onPointerDown:se=>{se.target instanceof HTMLElement&&se.target.dataset.dismissible==="false"||pe(!0)},onPointerUp:()=>pe(!1)},I.filter(se=>!se.position&&le===0||se.position===ne).map((se,Pe)=>{var ze,Wt;return K.createElement(NM,{key:se.id,icons:R,index:Pe,toast:se,defaultRichColors:v,duration:(ze=x?.duration)!=null?ze:y,className:x?.className,descriptionClassName:x?.descriptionClassName,invert:i,visibleToasts:w,closeButton:(Wt=x?.closeButton)!=null?Wt:c,interacting:fe,position:ne,style:x?.style,unstyled:x?.unstyled,classNames:x?.classNames,cancelButtonStyle:x?.cancelButtonStyle,actionButtonStyle:x?.actionButtonStyle,closeButtonAriaLabel:x?.closeButtonAriaLabel,removeToast:G,toasts:I.filter(Gt=>Gt.position==se.position),heights:z.filter(Gt=>Gt.position==se.position),setHeights:V,expandByDefault:l,gap:T,expanded:ee,swipeDirections:e.swipeDirections})})):null}))}),zi=n=>{console.error("Error:",n),alert(`Error: ${n}`)},Ho=n=>{console.log("Success:",n),alert(`Success: ${n}`)},tc=n=>{console.warn("Warning:",n),alert(`Warning: ${n}`)},LM=(n,e="info")=>{console.log(`${e.toUpperCase()}:`,n),alert(`${e.toUpperCase()}: ${n}`)},FM=n=>{console.error("Validation Error:",n),alert(`Validation Error: ${n}`)},Qr=n=>{console.error("API Error:",n);const e=n?.message||"An API error occurred";return zi(e),{error:e}},Ki=({children:n,className:e="",disabled:t=!1,type:r="button",onClick:i,variant:s="default",size:o="default",...l})=>E.jsx("button",{type:r,disabled:t,onClick:i,className:`px-4 py-2 rounded bg-blue-500 text-white hover:bg-blue-600 disabled:opacity-50 ${e}`,...l,children:n}),yi=({className:n="",type:e="text",...t})=>E.jsx("input",{type:e,className:`flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${n}`,...t}),bi=({className:n="",...e})=>E.jsx("label",{className:`text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 ${n}`,...e}),Ar=({className:n="",...e})=>E.jsx("div",{className:`rounded-lg border bg-card text-card-foreground shadow-sm ${n}`,...e}),Dr=({className:n="",...e})=>E.jsx("div",{className:`flex flex-col space-y-1.5 p-6 ${n}`,...e}),Rr=({className:n="",...e})=>E.jsx("h3",{className:`text-2xl font-semibold leading-none tracking-tight ${n}`,...e}),Or=({className:n="",...e})=>E.jsx("div",{className:`p-6 pt-0 ${n}`,...e}),Nv=({data:n=[],columns:e=[],...t})=>E.jsx("div",{className:"rounded-md border",children:E.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"DataTable component not available - shared package removed"})}),zo=n=>({handleAsync:async(e,t={})=>{try{return await e()}catch(r){throw console.error(`Error in ${n}:`,r),t.onFinally&&t.onFinally(),r}}}),UM=()=>({isOpen:!1,toggle:()=>{},open:()=>{},close:()=>{}}),BM=({children:n,...e})=>E.jsx("div",{...e,children:n}),HM=()=>E.jsx("div",{className:"text-sm text-muted-foreground",children:"Theme Switch"});class zM extends K.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t)}render(){return this.state.hasError?E.jsx("div",{className:"flex items-center justify-center min-h-screen",children:E.jsxs("div",{className:"text-center",children:[E.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Something went wrong"}),E.jsx("p",{className:"text-muted-foreground",children:"Please refresh the page or contact support."})]})}):this.props.children}}const $M=({title:n,...e})=>E.jsx("header",{className:"border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:E.jsx("div",{className:"container flex h-14 items-center",children:E.jsx("h1",{className:"text-lg font-semibold",children:n||"Application"})})}),Jh=({children:n,...e})=>E.jsxs("form",{className:"space-y-4",...e,children:[E.jsx("div",{className:"p-4 text-center text-muted-foreground border rounded",children:"GenericForm component not available - shared package removed"}),n]}),Pv=n=>({items:[],loading:!1,error:null,fetchItems:()=>Promise.resolve([]),addItem:()=>Promise.resolve(),updateItem:()=>Promise.resolve(),deleteItem:()=>Promise.resolve()}),WM=()=>({theme:"light",sidebarOpen:!1,toggleSidebar:()=>{}});class VM{constructor(e){this.tableName=e}async getAll(){return[]}async getById(e){return null}async create(e){return e}async update(e,t){return t}async delete(e){return!0}}class Q8 extends VM{}const X8=n=>({useGetAll:()=>({data:[],loading:!1,error:null}),useGetById:()=>({data:null,loading:!1,error:null}),useCreate:()=>({mutate:()=>{},loading:!1}),useUpdate:()=>({mutate:()=>{},loading:!1}),useDelete:()=>({mutate:()=>{},loading:!1})}),Bt={},it={ZANICA:"Zanica",BUSTO_GAROLFO:"Busto Garolfo",BOTH:"Both Centers"},$i={MAINTENANCE:"maintenance"},ya={},ba={},iw={},Z8=n=>{if(!n)return"";try{return new Date(n).toLocaleDateString()}catch{return n.toString()}};var Tm=function(n,e){return Tm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},Tm(n,e)};function SC(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Tm(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var ph=function(){return ph=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},ph.apply(this,arguments)};function rl(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function xC(n,e,t,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,r);else for(var l=n.length-1;l>=0;l--)(o=n[l])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s}function EC(n,e){return function(t,r){e(t,r,n)}}function CC(n,e,t,r,i,s){function o(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var l=r.kind,c=l==="getter"?"get":l==="setter"?"set":"value",d=!e&&n?r.static?n:n.prototype:null,h=e||(d?Object.getOwnPropertyDescriptor(d,r.name):{}),p,g=!1,v=t.length-1;v>=0;v--){var y={};for(var _ in r)y[_]=_==="access"?{}:r[_];for(var _ in r.access)y.access[_]=r.access[_];y.addInitializer=function(x){if(g)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(x||null))};var w=(0,t[v])(l==="accessor"?{get:h.get,set:h.set}:h[c],y);if(l==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(p=o(w.get))&&(h.get=p),(p=o(w.set))&&(h.set=p),(p=o(w.init))&&i.unshift(p)}else(p=o(w))&&(l==="field"?i.unshift(p):h[c]=p)}d&&Object.defineProperty(d,r.name,h),g=!0}function TC(n,e,t){for(var r=arguments.length>2,i=0;i<e.length;i++)t=r?e[i].call(n,t):e[i].call(n);return r?t:void 0}function kC(n){return typeof n=="symbol"?n:"".concat(n)}function AC(n,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(n,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}function DC(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function Se(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function l(h){try{d(r.next(h))}catch(p){o(p)}}function c(h){try{d(r.throw(h))}catch(p){o(p)}}function d(h){h.done?s(h.value):i(h.value).then(l,c)}d((r=r.apply(n,e||[])).next())})}function RC(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(h){return c([d,h])}}function c(d){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,d[0]&&(t=0)),t;)try{if(r=1,i&&(s=d[0]&2?i.return:d[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,d[1])).done)return s;switch(i=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,i=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){t.label=d[1];break}if(d[0]===6&&t.label<s[1]){t.label=s[1],s=d;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(d);break}s[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(n,t)}catch(h){d=[6,h],i=0}finally{r=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}var ef=Object.create?(function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}):(function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]});function OC(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&ef(e,n,t)}function gh(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function jv(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return s}function IC(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(jv(arguments[e]));return n}function MC(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),i=0,e=0;e<t;e++)for(var s=arguments[e],o=0,l=s.length;o<l;o++,i++)r[i]=s[o];return r}function NC(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))}function Wa(n){return this instanceof Wa?(this.v=n,this):new Wa(n)}function PC(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(v){return function(y){return Promise.resolve(y).then(v,p)}}function l(v,y){r[v]&&(i[v]=function(_){return new Promise(function(w,x){s.push([v,_,w,x])>1||c(v,_)})},y&&(i[v]=y(i[v])))}function c(v,y){try{d(r[v](y))}catch(_){g(s[0][3],_)}}function d(v){v.value instanceof Wa?Promise.resolve(v.value.v).then(h,p):g(s[0][2],v)}function h(v){c("next",v)}function p(v){c("throw",v)}function g(v,y){v(y),s.shift(),s.length&&c(s[0][0],s[0][1])}}function jC(n){var e,t;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=n[i]?function(o){return(t=!t)?{value:Wa(n[i](o)),done:!1}:s?s(o):o}:s}}function LC(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof gh=="function"?gh(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(l,c){o=n[s](o),i(l,c,o.done,o.value)})}}function i(s,o,l,c){Promise.resolve(c).then(function(d){s({value:d,done:l})},o)}}function FC(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}var qM=Object.create?(function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}):function(n,e){n.default=e},km=function(n){return km=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},km(n)};function UC(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t=km(n),r=0;r<t.length;r++)t[r]!=="default"&&ef(e,n,t[r]);return qM(e,n),e}function BC(n){return n&&n.__esModule?n:{default:n}}function HC(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)}function zC(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t}function $C(n,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?e===n:n.has(e)}function WC(n,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,i;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],t&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),n.stack.push({value:e,dispose:r,async:t})}else t&&n.stack.push({async:!0});return e}var GM=typeof SuppressedError=="function"?SuppressedError:function(n,e,t){var r=new Error(t);return r.name="SuppressedError",r.error=n,r.suppressed=e,r};function VC(n){function e(s){n.error=n.hasError?new GM(s,n.error,"An error was suppressed during disposal."):s,n.hasError=!0}var t,r=0;function i(){for(;t=n.stack.pop();)try{if(!t.async&&r===1)return r=0,n.stack.push(t),Promise.resolve().then(i);if(t.dispose){var s=t.dispose.call(t.value);if(t.async)return r|=2,Promise.resolve(s).then(i,function(o){return e(o),i()})}else r|=1}catch(o){e(o)}if(r===1)return n.hasError?Promise.reject(n.error):Promise.resolve();if(n.hasError)throw n.error}return i()}function qC(n,e){return typeof n=="string"&&/^\.\.?\//.test(n)?n.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(t,r,i,s,o){return r?e?".jsx":".js":i&&(!s||!o)?t:i+s+"."+o.toLowerCase()+"js"}):n}const YM={__extends:SC,__assign:ph,__rest:rl,__decorate:xC,__param:EC,__esDecorate:CC,__runInitializers:TC,__propKey:kC,__setFunctionName:AC,__metadata:DC,__awaiter:Se,__generator:RC,__createBinding:ef,__exportStar:OC,__values:gh,__read:jv,__spread:IC,__spreadArrays:MC,__spreadArray:NC,__await:Wa,__asyncGenerator:PC,__asyncDelegator:jC,__asyncValues:LC,__makeTemplateObject:FC,__importStar:UC,__importDefault:BC,__classPrivateFieldGet:HC,__classPrivateFieldSet:zC,__classPrivateFieldIn:$C,__addDisposableResource:WC,__disposeResources:VC,__rewriteRelativeImportExtension:qC},KM=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:WC,get __assign(){return ph},__asyncDelegator:jC,__asyncGenerator:PC,__asyncValues:LC,__await:Wa,__awaiter:Se,__classPrivateFieldGet:HC,__classPrivateFieldIn:$C,__classPrivateFieldSet:zC,__createBinding:ef,__decorate:xC,__disposeResources:VC,__esDecorate:CC,__exportStar:OC,__extends:SC,__generator:RC,__importDefault:BC,__importStar:UC,__makeTemplateObject:FC,__metadata:DC,__param:EC,__propKey:kC,__read:jv,__rest:rl,__rewriteRelativeImportExtension:qC,__runInitializers:TC,__setFunctionName:AC,__spread:IC,__spreadArray:NC,__spreadArrays:MC,__values:gh,default:YM},Symbol.toStringTag,{value:"Module"})),QM="modulepreload",XM=function(n){return"/scheduler_demo/"+n},sw={},ei=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let c=function(d){return Promise.all(d.map(h=>Promise.resolve(h).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");i=c(t.map(d=>{if(d=XM(d),d in sw)return;sw[d]=!0;const h=d.endsWith(".css"),p=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${p}`))return;const g=document.createElement("link");if(g.rel=h?"stylesheet":QM,h||(g.as="script"),g.crossOrigin="",g.href=d,l&&g.setAttribute("nonce",l),document.head.appendChild(g),h)return new Promise((v,y)=>{g.addEventListener("load",v),g.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${d}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})},ZM=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ei(async()=>{const{default:r}=await Promise.resolve().then(()=>$o);return{default:r}},[]).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class Lv extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class ow extends Lv{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class aw extends Lv{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class lw extends Lv{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Am;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(Am||(Am={}));class JM{constructor(e,{headers:t={},customFetch:r,region:i=Am.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=ZM(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Se(this,arguments,void 0,function*(t,r={}){var i;try{const{headers:s,method:o,body:l,signal:c}=r;let d={},{region:h}=r;h||(h=this.region);const p=new URL(`${this.url}/${t}`);h&&h!=="any"&&(d["x-region"]=h,p.searchParams.set("forceFunctionRegion",h));let g;l&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)?typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(d["Content-Type"]="application/octet-stream",g=l):typeof l=="string"?(d["Content-Type"]="text/plain",g=l):typeof FormData<"u"&&l instanceof FormData?g=l:(d["Content-Type"]="application/json",g=JSON.stringify(l)):g=l;const v=yield this.fetch(p.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},d),this.headers),s),body:g,signal:c}).catch(x=>{throw x.name==="AbortError"?x:new ow(x)}),y=v.headers.get("x-relay-error");if(y&&y==="true")throw new aw(v);if(!v.ok)throw new lw(v);let _=((i=v.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),w;return _==="application/json"?w=yield v.json():_==="application/octet-stream"||_==="application/pdf"?w=yield v.blob():_==="text/event-stream"?w=v:_==="multipart/form-data"?w=yield v.formData():w=yield v.text(),{data:w,error:null,response:v}}catch(s){return s instanceof Error&&s.name==="AbortError"?{data:null,error:new ow(s)}:{data:null,error:s,response:s instanceof lw||s instanceof aw?s.context:void 0}}})}}var Mn={};const il=GE(KM);var fd={},pd={},gd={},md={},vd={},eN=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Va=eN();const tN=Va.fetch,GC=Va.fetch.bind(Va),YC=Va.Headers,nN=Va.Request,rN=Va.Response,$o=Object.freeze(Object.defineProperty({__proto__:null,Headers:YC,Request:nN,Response:rN,default:GC,fetch:tN},Symbol.toStringTag,{value:"Module"})),iN=GE($o);var yd={},cw;function KC(){if(cw)return yd;cw=1,Object.defineProperty(yd,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return yd.default=n,yd}var uw;function QC(){if(uw)return vd;uw=1,Object.defineProperty(vd,"__esModule",{value:!0});const n=il,e=n.__importDefault(iN),t=n.__importDefault(KC());class r{constructor(s){var o,l;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(o=s.shouldThrowOnError)!==null&&o!==void 0?o:!1,this.signal=s.signal,this.isMaybeSingle=(l=s.isMaybeSingle)!==null&&l!==void 0?l:!1,s.fetch?this.fetch=s.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,o){return this.headers=new Headers(this.headers),this.headers.set(s,o),this}then(s,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const l=this.fetch;let c=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{var h,p,g,v;let y=null,_=null,w=null,x=d.status,C=d.statusText;if(d.ok){if(this.method!=="HEAD"){const O=await d.text();O===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((h=this.headers.get("Accept"))===null||h===void 0)&&h.includes("application/vnd.pgrst.plan+text"))?_=O:_=JSON.parse(O))}const R=(p=this.headers.get("Prefer"))===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),D=(g=d.headers.get("content-range"))===null||g===void 0?void 0:g.split("/");R&&D&&D.length>1&&(w=parseInt(D[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(_)&&(_.length>1?(y={code:"PGRST116",details:`Results contain ${_.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},_=null,w=null,x=406,C="Not Acceptable"):_.length===1?_=_[0]:_=null)}else{const R=await d.text();try{y=JSON.parse(R),Array.isArray(y)&&d.status===404&&(_=[],y=null,x=200,C="OK")}catch{d.status===404&&R===""?(x=204,C="No Content"):y={message:R}}if(y&&this.isMaybeSingle&&(!((v=y?.details)===null||v===void 0)&&v.includes("0 rows"))&&(y=null,x=200,C="OK"),y&&this.shouldThrowOnError)throw new t.default(y)}return{error:y,data:_,count:w,status:x,statusText:C}});return this.shouldThrowOnError||(c=c.catch(d=>{var h,p,g;return{error:{message:`${(h=d?.name)!==null&&h!==void 0?h:"FetchError"}: ${d?.message}`,details:`${(p=d?.stack)!==null&&p!==void 0?p:""}`,hint:"",code:`${(g=d?.code)!==null&&g!==void 0?g:""}`},data:null,count:null,status:0,statusText:""}})),c.then(s,o)}returns(){return this}overrideTypes(){return this}}return vd.default=r,vd}var dw;function XC(){if(dw)return md;dw=1,Object.defineProperty(md,"__esModule",{value:!0});const e=il.__importDefault(QC());class t extends e.default{select(i){let s=!1;const o=(i??"*").split("").map(l=>/\s/.test(l)&&!s?"":(l==='"'&&(s=!s),l)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:s=!0,nullsFirst:o,foreignTable:l,referencedTable:c=l}={}){const d=c?`${c}.order`:"order",h=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${h?`${h},`:""}${i}.${s?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:s,referencedTable:o=s}={}){const l=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(l,`${i}`),this}range(i,s,{foreignTable:o,referencedTable:l=o}={}){const c=typeof l>"u"?"offset":`${l}.offset`,d=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${i}`),this.url.searchParams.set(d,`${s-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:s=!1,settings:o=!1,buffers:l=!1,wal:c=!1,format:d="text"}={}){var h;const p=[i?"analyze":null,s?"verbose":null,o?"settings":null,l?"buffers":null,c?"wal":null].filter(Boolean).join("|"),g=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${d}; for="${g}"; options=${p};`),d==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return md.default=t,md}var hw;function Fv(){if(hw)return gd;hw=1,Object.defineProperty(gd,"__esModule",{value:!0});const e=il.__importDefault(XC());class t extends e.default{eq(i,s){return this.url.searchParams.append(i,`eq.${s}`),this}neq(i,s){return this.url.searchParams.append(i,`neq.${s}`),this}gt(i,s){return this.url.searchParams.append(i,`gt.${s}`),this}gte(i,s){return this.url.searchParams.append(i,`gte.${s}`),this}lt(i,s){return this.url.searchParams.append(i,`lt.${s}`),this}lte(i,s){return this.url.searchParams.append(i,`lte.${s}`),this}like(i,s){return this.url.searchParams.append(i,`like.${s}`),this}likeAllOf(i,s){return this.url.searchParams.append(i,`like(all).{${s.join(",")}}`),this}likeAnyOf(i,s){return this.url.searchParams.append(i,`like(any).{${s.join(",")}}`),this}ilike(i,s){return this.url.searchParams.append(i,`ilike.${s}`),this}ilikeAllOf(i,s){return this.url.searchParams.append(i,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(i,s){return this.url.searchParams.append(i,`ilike(any).{${s.join(",")}}`),this}is(i,s){return this.url.searchParams.append(i,`is.${s}`),this}in(i,s){const o=Array.from(new Set(s)).map(l=>typeof l=="string"&&new RegExp("[,()]").test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(i,`in.(${o})`),this}contains(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cs.{${s.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(s)}`),this}containedBy(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cd.{${s.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(s)}`),this}rangeGt(i,s){return this.url.searchParams.append(i,`sr.${s}`),this}rangeGte(i,s){return this.url.searchParams.append(i,`nxl.${s}`),this}rangeLt(i,s){return this.url.searchParams.append(i,`sl.${s}`),this}rangeLte(i,s){return this.url.searchParams.append(i,`nxr.${s}`),this}rangeAdjacent(i,s){return this.url.searchParams.append(i,`adj.${s}`),this}overlaps(i,s){return typeof s=="string"?this.url.searchParams.append(i,`ov.${s}`):this.url.searchParams.append(i,`ov.{${s.join(",")}}`),this}textSearch(i,s,{config:o,type:l}={}){let c="";l==="plain"?c="pl":l==="phrase"?c="ph":l==="websearch"&&(c="w");const d=o===void 0?"":`(${o})`;return this.url.searchParams.append(i,`${c}fts${d}.${s}`),this}match(i){return Object.entries(i).forEach(([s,o])=>{this.url.searchParams.append(s,`eq.${o}`)}),this}not(i,s,o){return this.url.searchParams.append(i,`not.${s}.${o}`),this}or(i,{foreignTable:s,referencedTable:o=s}={}){const l=o?`${o}.or`:"or";return this.url.searchParams.append(l,`(${i})`),this}filter(i,s,o){return this.url.searchParams.append(i,`${s}.${o}`),this}}return gd.default=t,gd}var fw;function ZC(){if(fw)return pd;fw=1,Object.defineProperty(pd,"__esModule",{value:!0});const e=il.__importDefault(Fv());class t{constructor(i,{headers:s={},schema:o,fetch:l}){this.url=i,this.headers=new Headers(s),this.schema=o,this.fetch=l}select(i,s){const{head:o=!1,count:l}=s??{},c=o?"HEAD":"GET";let d=!1;const h=(i??"*").split("").map(p=>/\s/.test(p)&&!d?"":(p==='"'&&(d=!d),p)).join("");return this.url.searchParams.set("select",h),l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:s,defaultToNull:o=!0}={}){var l;const c="POST";if(s&&this.headers.append("Prefer",`count=${s}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const d=i.reduce((h,p)=>h.concat(Object.keys(p)),[]);if(d.length>0){const h=[...new Set(d)].map(p=>`"${p}"`);this.url.searchParams.set("columns",h.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(i,{onConflict:s,ignoreDuplicates:o=!1,count:l,defaultToNull:c=!0}={}){var d;const h="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),s!==void 0&&this.url.searchParams.set("on_conflict",s),l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const p=i.reduce((g,v)=>g.concat(Object.keys(v)),[]);if(p.length>0){const g=[...new Set(p)].map(v=>`"${v}"`);this.url.searchParams.set("columns",g.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}update(i,{count:s}={}){var o;const l="PATCH";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:i}={}){var s;const o="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}}return pd.default=t,pd}var pw;function sN(){if(pw)return fd;pw=1,Object.defineProperty(fd,"__esModule",{value:!0});const n=il,e=n.__importDefault(ZC()),t=n.__importDefault(Fv());class r{constructor(s,{headers:o={},schema:l,fetch:c}={}){this.url=s,this.headers=new Headers(o),this.schemaName=l,this.fetch=c}from(s){const o=new URL(`${this.url}/${s}`);return new e.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(s){return new r(this.url,{headers:this.headers,schema:s,fetch:this.fetch})}rpc(s,o={},{head:l=!1,get:c=!1,count:d}={}){var h;let p;const g=new URL(`${this.url}/rpc/${s}`);let v;l||c?(p=l?"HEAD":"GET",Object.entries(o).filter(([_,w])=>w!==void 0).map(([_,w])=>[_,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([_,w])=>{g.searchParams.append(_,w)})):(p="POST",v=o);const y=new Headers(this.headers);return d&&y.set("Prefer",`count=${d}`),new t.default({method:p,url:g,headers:y,schema:this.schemaName,body:v,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}}return fd.default=r,fd}var gw;function oN(){if(gw)return Mn;gw=1,Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.PostgrestError=Mn.PostgrestBuilder=Mn.PostgrestTransformBuilder=Mn.PostgrestFilterBuilder=Mn.PostgrestQueryBuilder=Mn.PostgrestClient=void 0;const n=il,e=n.__importDefault(sN());Mn.PostgrestClient=e.default;const t=n.__importDefault(ZC());Mn.PostgrestQueryBuilder=t.default;const r=n.__importDefault(Fv());Mn.PostgrestFilterBuilder=r.default;const i=n.__importDefault(XC());Mn.PostgrestTransformBuilder=i.default;const s=n.__importDefault(QC());Mn.PostgrestBuilder=s.default;const o=n.__importDefault(KC());return Mn.PostgrestError=o.default,Mn.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:s.default,PostgrestError:o.default},Mn}var aN=oN();const lN=zc(aN),{PostgrestClient:cN,PostgrestQueryBuilder:J8,PostgrestFilterBuilder:eY,PostgrestTransformBuilder:tY,PostgrestBuilder:nY,PostgrestError:rY}=lN;class uN{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const r=t.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const r=this.getWebSocketConstructor();return new r(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const dN="2.76.1",hN=`realtime-js/${dN}`,fN="1.0.0",Dm=1e4,pN=1e3,gN=100;var oc;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(oc||(oc={}));var dn;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(dn||(dn={}));var Kr;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Kr||(Kr={}));var Rm;(function(n){n.websocket="websocket"})(Rm||(Rm={}));var So;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(So||(So={}));class mN{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const i=t.getUint8(1),s=t.getUint8(2);let o=this.HEADER_LENGTH+2;const l=r.decode(e.slice(o,o+i));o=o+i;const c=r.decode(e.slice(o,o+s));o=o+s;const d=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class JC{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ct;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Ct||(Ct={}));const mw=(n,e,t={})=>{var r;const i=(r=t.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((s,o)=>(s[o]=vN(o,n,e,i),s),{}):{}},vN=(n,e,t,r)=>{const i=e.find(l=>l.name===n),s=i?.type,o=t[n];return s&&!r.includes(s)?eT(s,o):Om(o)},eT=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return wN(e,t)}switch(n){case Ct.bool:return yN(e);case Ct.float4:case Ct.float8:case Ct.int2:case Ct.int4:case Ct.int8:case Ct.numeric:case Ct.oid:return bN(e);case Ct.json:case Ct.jsonb:return _N(e);case Ct.timestamp:return SN(e);case Ct.abstime:case Ct.date:case Ct.daterange:case Ct.int4range:case Ct.int8range:case Ct.money:case Ct.reltime:case Ct.text:case Ct.time:case Ct.timestamptz:case Ct.timetz:case Ct.tsrange:case Ct.tstzrange:return Om(e);default:return Om(e)}},Om=n=>n,yN=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},bN=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},_N=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},wN=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let s;const o=n.slice(1,t);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(l=>eT(e,l))}return n},SN=n=>typeof n=="string"?n.replace(" ","T"):n,tT=n=>{const e=new URL(n);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Sg{constructor(e,t,r={},i=Dm){this.channel=e,this.event=t,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var vw;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(vw||(vw={}));class ac{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ac.syncState(this.state,i,s,o),this.pendingDiffs.forEach(c=>{this.state=ac.syncDiff(this.state,c,s,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=ac.syncDiff(this.state,i,s,o),l())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,i){const s=this.cloneDeep(e),o=this.transformState(t),l={},c={};return this.map(s,(d,h)=>{o[d]||(c[d]=h)}),this.map(o,(d,h)=>{const p=s[d];if(p){const g=h.map(w=>w.presence_ref),v=p.map(w=>w.presence_ref),y=h.filter(w=>v.indexOf(w.presence_ref)<0),_=p.filter(w=>g.indexOf(w.presence_ref)<0);y.length>0&&(l[d]=y),_.length>0&&(c[d]=_)}else l[d]=h}),this.syncDiff(s,{joins:l,leaves:c},r,i)}static syncDiff(e,t,r,i){const{joins:s,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(l,c)=>{var d;const h=(d=e[l])!==null&&d!==void 0?d:[];if(e[l]=this.cloneDeep(c),h.length>0){const p=e[l].map(v=>v.presence_ref),g=h.filter(v=>p.indexOf(v.presence_ref)<0);e[l].unshift(...g)}r(l,h,c)}),this.map(o,(l,c)=>{let d=e[l];if(!d)return;const h=c.map(p=>p.presence_ref);d=d.filter(p=>h.indexOf(p.presence_ref)<0),e[l]=d,i(l,d,c),d.length===0&&delete e[l]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const i=e[r];return"metas"in i?t[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[r]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var yw;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(yw||(yw={}));var lc;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(lc||(lc={}));var Fi;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(Fi||(Fi={}));class Uv{constructor(e,t={config:{}},r){var i,s;if(this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=dn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Sg(this,Kr.join,this.params,this.timeout),this.rejoinTimer=new JC(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=dn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=dn.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=dn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=dn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=dn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Kr.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new ac(this),this.broadcastEndpointURL=tT(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var r,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==dn.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,d=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(v=>v.filter))!==null&&i!==void 0?i:[],h=!!this.bindings[lc.PRESENCE]&&this.bindings[lc.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,p={},g={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:h}),postgres_changes:d,private:c};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(v=>e?.(Fi.CHANNEL_ERROR,v)),this._onClose(()=>e?.(Fi.CLOSED)),this.updateJoinPayload(Object.assign({config:g},p)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:v})=>{var y;if(this.socket.setAuth(),v===void 0){e?.(Fi.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,w=(y=_?.length)!==null&&y!==void 0?y:0,x=[];for(let C=0;C<w;C++){const T=_[C],{filter:{event:R,schema:D,table:O,filter:M}}=T,I=v&&v[C];if(I&&I.event===R&&I.schema===D&&I.table===O&&I.filter===M)x.push(Object.assign(Object.assign({},T),{id:I.id}));else{this.unsubscribe(),this.state=dn.errored,e?.(Fi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,e&&e(Fi.SUBSCRIBED);return}}).receive("error",v=>{this.state=dn.errored,e?.(Fi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{e?.(Fi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===dn.joined&&e===lc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async httpSend(e,t,r={}){var i;const s=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(t==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:s,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const d=await l.json();c=d.error||d.message||c}catch{}return Promise.reject(new Error(c))}async send(e,t={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=d.body)===null||i===void 0?void 0:i.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,l,c;const d=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&s("ok"),d.receive("ok",()=>s("ok")),d.receive("error",()=>s("error")),d.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=dn.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Kr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new Sg(this,Kr.leave,{},e),r.receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=dn.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(s),o}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Sg(this,e,t,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>gN){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var i,s;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:d,join:h}=Kr;if(r&&[l,c,d,h].indexOf(o)>=0&&r!==this._joinRef())return;let g=this._onMessage(o,t,r);if(t&&!g)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(v=>{var y,_,w;return((y=v.filter)===null||y===void 0?void 0:y.event)==="*"||((w=(_=v.filter)===null||_===void 0?void 0:_.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(v=>v.callback(g,r)):(s=this.bindings[o])===null||s===void 0||s.filter(v=>{var y,_,w,x,C,T;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in v){const R=v.id,D=(y=v.filter)===null||y===void 0?void 0:y.event;return R&&((_=t.ids)===null||_===void 0?void 0:_.includes(R))&&(D==="*"||D?.toLocaleLowerCase()===((w=t.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const R=(C=(x=v?.filter)===null||x===void 0?void 0:x.event)===null||C===void 0?void 0:C.toLocaleLowerCase();return R==="*"||R===((T=t?.event)===null||T===void 0?void 0:T.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===o}).map(v=>{if(typeof g=="object"&&"ids"in g){const y=g.data,{schema:_,table:w,commit_timestamp:x,type:C,errors:T}=y;g=Object.assign(Object.assign({},{schema:_,table:w,commit_timestamp:x,eventType:C,new:{},old:{},errors:T}),this._getPayloadRecords(y))}v.callback(g,r)})}_isClosed(){return this.state===dn.closed}_isJoined(){return this.state===dn.joined}_isJoining(){return this.state===dn.joining}_isLeaving(){return this.state===dn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const i=e.toLocaleLowerCase(),s={type:i,filter:t,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&Uv.isEqual(i.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Kr.close,{},e)}_onError(e){this._on(Kr.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=dn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=mw(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=mw(e.columns,e.old_record)),t}}const xg=()=>{},bd={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},xN=[1e3,2e3,5e3,1e4],EN=1e4,CN=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class TN{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Dm,this.transport=null,this.heartbeatIntervalMs=bd.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=xg,this.ref=0,this.reconnectTimer=null,this.logger=xg,this.conn=null,this.sendBuffer=[],this.serializer=new mN,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let s;return i?s=i:typeof fetch>"u"?s=(...o)=>ei(async()=>{const{default:l}=await Promise.resolve().then(()=>$o);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):s=fetch,(...o)=>s(...o)},!(!((r=t?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${Rm.websocket}`,this.httpEndpoint=tT(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=uN.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:fN}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case oc.connecting:return So.Connecting;case oc.open:return So.Open;case oc.closing:return So.Closing;default:return So.Closed}}isConnected(){return this.connectionState()===So.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new Uv(`realtime:${e}`,t,this);return this.channels.push(s),s}}push(e){const{topic:t,event:r,payload:i,ref:s}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${t} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(pN,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},bd.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:s,ref:o}=t,l=o?`(${o})`:"",c=s.status||"";this.log("receive",`${c} ${r} ${i} ${l}`.trim(),s),this.channels.filter(d=>d._isMember(r)).forEach(d=>d._trigger(i,s,o)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Kr.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${r}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([CN],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{const i={access_token:t,version:hN};t&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(Kr.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new JC(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},bd.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,i,s,o,l,c,d,h;if(this.transport=(t=e?.transport)!==null&&t!==void 0?t:null,this.timeout=(r=e?.timeout)!==null&&r!==void 0?r:Dm,this.heartbeatIntervalMs=(i=e?.heartbeatIntervalMs)!==null&&i!==void 0?i:bd.HEARTBEAT_INTERVAL,this.worker=(s=e?.worker)!==null&&s!==void 0?s:!1,this.accessToken=(o=e?.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=e?.heartbeatCallback)!==null&&l!==void 0?l:xg,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e?.reconnectAfterMs)!==null&&c!==void 0?c:(p=>xN[p-1]||EN),this.encode=(d=e?.encode)!==null&&d!==void 0?d:((p,g)=>g(JSON.stringify(p))),this.decode=(h=e?.decode)!==null&&h!==void 0?h:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class Bv extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ut(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class kN extends Bv{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Im extends Bv{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}const Hv=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ei(async()=>{const{default:r}=await Promise.resolve().then(()=>$o);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},AN=()=>Se(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ei(()=>Promise.resolve().then(()=>$o),void 0)).Response:Response}),Mm=n=>{if(Array.isArray(n))return n.map(t=>Mm(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const i=t.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=Mm(r)}),e},DN=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},Eg=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),RN=(n,e,t)=>Se(void 0,void 0,void 0,function*(){const r=yield AN();n instanceof r&&!t?.noResolveJson?n.json().then(i=>{const s=n.status||500,o=i?.statusCode||s+"";e(new kN(Eg(i),s,o))}).catch(i=>{e(new Im(Eg(i),i))}):e(new Im(Eg(n),n))}),ON=(n,e,t,r)=>{const i={method:n,headers:e?.headers||{}};return n==="GET"||!r?i:(DN(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(r)):i.body=r,e?.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),t))};function Vc(n,e,t,r,i,s){return Se(this,void 0,void 0,function*(){return new Promise((o,l)=>{n(t,ON(e,r,i,s)).then(c=>{if(!c.ok)throw c;return r?.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>RN(c,l,r))})})}function Ec(n,e,t,r){return Se(this,void 0,void 0,function*(){return Vc(n,"GET",e,t,r)})}function Yr(n,e,t,r,i){return Se(this,void 0,void 0,function*(){return Vc(n,"POST",e,r,i,t)})}function Nm(n,e,t,r,i){return Se(this,void 0,void 0,function*(){return Vc(n,"PUT",e,r,i,t)})}function IN(n,e,t,r){return Se(this,void 0,void 0,function*(){return Vc(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function zv(n,e,t,r,i){return Se(this,void 0,void 0,function*(){return Vc(n,"DELETE",e,r,i,t)})}class MN{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return Se(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ut(e))return{data:null,error:e};throw e}})}}var nT;class NN{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[nT]="BlobDownloadBuilder",this.promise=null}asStream(){return new MN(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Se(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ut(e))return{data:null,error:e};throw e}})}}nT=Symbol.toStringTag;const PN={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},bw={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class jN{constructor(e,t={},r,i){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=Hv(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,r,i){return Se(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},bw),i);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),c&&s.append("metadata",this.encodeMetadata(c)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",o.cacheControl),c&&s.append("metadata",this.encodeMetadata(c))):(s=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),i?.headers&&(l=Object.assign(Object.assign({},l),i.headers));const d=this._removeEmptyFolders(t),h=this._getFinalPath(d),p=yield(e=="PUT"?Nm:Yr)(this.fetch,`${this.url}/object/${h}`,s,Object.assign({headers:l},o?.duplex?{duplex:o.duplex}:{}));return{data:{path:d,id:p.Id,fullPath:p.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ut(s))return{data:null,error:s};throw s}})}upload(e,t,r){return Se(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,i){return Se(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",t);try{let c;const d=Object.assign({upsert:bw.upsert},i),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",d.cacheControl)):(c=r,h["cache-control"]=`max-age=${d.cacheControl}`,h["content-type"]=d.contentType);const p=yield Nm(this.fetch,l.toString(),c,{headers:h});return{data:{path:s,fullPath:p.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ut(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return Se(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);t?.upsert&&(i["x-upsert"]="true");const s=yield Yr(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+s.url),l=o.searchParams.get("token");if(!l)throw new Bv("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ut(r))return{data:null,error:r};throw r}})}update(e,t,r){return Se(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return Se(this,void 0,void 0,function*(){try{return{data:yield Yr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ut(i))return{data:null,error:i};throw i}})}copy(e,t,r){return Se(this,void 0,void 0,function*(){try{return{data:{path:(yield Yr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ut(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,r){return Se(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield Yr(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ut(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,r){return Se(this,void 0,void 0,function*(){try{const i=yield Yr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ut(i))return{data:null,error:i};throw i}})}download(e,t){const i=typeof t?.transform<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString(t?.transform||{}),o=s?`?${s}`:"",l=this._getFinalPath(e),c=()=>Ec(this.fetch,`${this.url}/${i}/${l}${o}`,{headers:this.headers,noResolveJson:!0});return new NN(c,this.shouldThrowOnError)}info(e){return Se(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield Ec(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Mm(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ut(r))return{data:null,error:r};throw r}})}exists(e){return Se(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield IN(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ut(r)&&r instanceof Im){const i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),i=[],s=t?.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&i.push(s);const l=typeof t?.transform<"u"?"render/image":"object",c=this.transformOptsToQueryString(t?.transform||{});c!==""&&i.push(c);let d=i.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${d}`)}}}remove(e){return Se(this,void 0,void 0,function*(){try{return{data:yield zv(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ut(t))return{data:null,error:t};throw t}})}list(e,t,r){return Se(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},PN),t),{prefix:e||""});return{data:yield Yr(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ut(i))return{data:null,error:i};throw i}})}listV2(e,t){return Se(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Yr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ut(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const rT="2.76.1",iT={"X-Client-Info":`storage-js/${rT}`};class LN{constructor(e,t={},r,i){this.shouldThrowOnError=!1;const s=new URL(e);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},iT),t),this.fetch=Hv(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Se(this,void 0,void 0,function*(){try{return{data:yield Ec(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ut(e))return{data:null,error:e};throw e}})}getBucket(e){return Se(this,void 0,void 0,function*(){try{return{data:yield Ec(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ut(t))return{data:null,error:t};throw t}})}createBucket(e){return Se(this,arguments,void 0,function*(t,r={public:!1}){try{return{data:yield Yr(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ut(i))return{data:null,error:i};throw i}})}updateBucket(e,t){return Se(this,void 0,void 0,function*(){try{return{data:yield Nm(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ut(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Se(this,void 0,void 0,function*(){try{return{data:yield Yr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ut(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Se(this,void 0,void 0,function*(){try{return{data:yield zv(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ut(t))return{data:null,error:t};throw t}})}}class FN{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},iT),t),this.fetch=Hv(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Se(this,void 0,void 0,function*(){try{return{data:yield Yr(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ut(t))return{data:null,error:t};throw t}})}listBuckets(e){return Se(this,void 0,void 0,function*(){try{const t=new URLSearchParams;e?.limit!==void 0&&t.set("limit",e.limit.toString()),e?.offset!==void 0&&t.set("offset",e.offset.toString()),e?.sortColumn&&t.set("sortColumn",e.sortColumn),e?.sortOrder&&t.set("sortOrder",e.sortOrder),e?.search&&t.set("search",e.search);const r=t.toString(),i=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`,s=yield Ec(this.fetch,i,{headers:this.headers});return{data:Array.isArray(s)?s.filter(l=>l.type==="ANALYTICS"):[],error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ut(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Se(this,void 0,void 0,function*(){try{return{data:yield zv(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ut(t))return{data:null,error:t};throw t}})}}const $v={"X-Client-Info":`storage-js/${rT}`,"Content-Type":"application/json"};class sT extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function vr(n){return typeof n=="object"&&n!==null&&"__isStorageVectorsError"in n}class Cg extends sT{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class UN extends sT{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}}var _w;(function(n){n.InternalError="InternalError",n.S3VectorConflictException="S3VectorConflictException",n.S3VectorNotFoundException="S3VectorNotFoundException",n.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",n.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",n.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(_w||(_w={}));const Wv=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ei(async()=>{const{default:r}=await Promise.resolve().then(()=>$o);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},BN=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},ww=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),HN=(n,e,t)=>Se(void 0,void 0,void 0,function*(){if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!t?.noResolveJson){const i=n.status||500,s=n;if(typeof s.json=="function")s.json().then(o=>{const l=o?.statusCode||o?.code||i+"";e(new Cg(ww(o),i,l))}).catch(()=>{const o=i+"",l=s.statusText||`HTTP ${i} error`;e(new Cg(l,i,o))});else{const o=i+"",l=s.statusText||`HTTP ${i} error`;e(new Cg(l,i,o))}}else e(new UN(ww(n),n))}),zN=(n,e,t,r)=>{const i={method:n,headers:e?.headers||{}};return r?(BN(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(r)):i.body=r,Object.assign(Object.assign({},i),t)):i};function $N(n,e,t,r,i,s){return Se(this,void 0,void 0,function*(){return new Promise((o,l)=>{n(t,zN(e,r,i,s)).then(c=>{if(!c.ok)throw c;if(r?.noResolveJson)return c;const d=c.headers.get("content-type");return!d||!d.includes("application/json")?{}:c.json()}).then(c=>o(c)).catch(c=>HN(c,l,r))})})}function yr(n,e,t,r,i){return Se(this,void 0,void 0,function*(){return $N(n,"POST",e,r,i,t)})}class WN{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},$v),t),this.fetch=Wv(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return Se(this,void 0,void 0,function*(){try{return{data:(yield yr(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(vr(t))return{data:null,error:t};throw t}})}getIndex(e,t){return Se(this,void 0,void 0,function*(){try{return{data:yield yr(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(vr(r))return{data:null,error:r};throw r}})}listIndexes(e){return Se(this,void 0,void 0,function*(){try{return{data:yield yr(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(vr(t))return{data:null,error:t};throw t}})}deleteIndex(e,t){return Se(this,void 0,void 0,function*(){try{return{data:(yield yr(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(vr(r))return{data:null,error:r};throw r}})}}class VN{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},$v),t),this.fetch=Wv(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return Se(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield yr(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(vr(t))return{data:null,error:t};throw t}})}getVectors(e){return Se(this,void 0,void 0,function*(){try{return{data:yield yr(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(vr(t))return{data:null,error:t};throw t}})}listVectors(e){return Se(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield yr(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(vr(t))return{data:null,error:t};throw t}})}queryVectors(e){return Se(this,void 0,void 0,function*(){try{return{data:yield yr(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(vr(t))return{data:null,error:t};throw t}})}deleteVectors(e){return Se(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield yr(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(vr(t))return{data:null,error:t};throw t}})}}class qN{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},$v),t),this.fetch=Wv(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Se(this,void 0,void 0,function*(){try{return{data:(yield yr(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(vr(t))return{data:null,error:t};throw t}})}getBucket(e){return Se(this,void 0,void 0,function*(){try{return{data:yield yr(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(vr(t))return{data:null,error:t};throw t}})}listBuckets(){return Se(this,arguments,void 0,function*(e={}){try{return{data:yield yr(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(vr(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Se(this,void 0,void 0,function*(){try{return{data:(yield yr(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(vr(t))return{data:null,error:t};throw t}})}}class GN extends qN{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new YN(this.url,this.headers,e,this.fetch)}}class YN extends WN{constructor(e,t,r,i){super(e,t,i),this.vectorBucketName=r}createIndex(e){const t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Se(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Se(this,arguments,void 0,function*(t={}){return e.listIndexes.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Se(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Se(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new KN(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class KN extends VN{constructor(e,t,r,i,s){super(e,t,s),this.vectorBucketName=r,this.indexName=i}putVectors(e){const t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Se(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Se(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Se(this,arguments,void 0,function*(t={}){return e.listVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Se(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Se(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class QN extends LN{constructor(e,t={},r,i){super(e,t,r,i)}from(e){return new jN(this.url,this.headers,e,this.fetch)}get vectors(){return new GN(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new FN(this.url+"/iceberg",this.headers,this.fetch)}}const XN="2.76.1";let nc="";typeof Deno<"u"?nc="deno":typeof document<"u"?nc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?nc="react-native":nc="node";const ZN={"X-Client-Info":`supabase-js-${nc}/${XN}`},JN={headers:ZN},eP={schema:"public"},tP={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},nP={},rP=n=>{let e;return n?e=n:typeof fetch>"u"?e=GC:e=fetch,(...t)=>e(...t)},iP=()=>typeof Headers>"u"?YC:Headers,sP=(n,e,t)=>{const r=rP(t),i=iP();return async(s,o)=>{var l;const c=(l=await e())!==null&&l!==void 0?l:n;let d=new i(o?.headers);return d.has("apikey")||d.set("apikey",n),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),r(s,Object.assign(Object.assign({},o),{headers:d}))}};function oP(n){return n.endsWith("/")?n:n+"/"}function aP(n,e){var t,r;const{db:i,auth:s,realtime:o,global:l}=n,{db:c,auth:d,realtime:h,global:p}=e,g={db:Object.assign(Object.assign({},c),i),auth:Object.assign(Object.assign({},d),s),realtime:Object.assign(Object.assign({},h),o),storage:{},global:Object.assign(Object.assign(Object.assign({},p),l),{headers:Object.assign(Object.assign({},(t=p?.headers)!==null&&t!==void 0?t:{}),(r=l?.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return n.accessToken?g.accessToken=n.accessToken:delete g.accessToken,g}function lP(n){const e=n?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(oP(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const oT="2.76.1",Da=30*1e3,Pm=3,Tg=Pm*Da,cP="http://localhost:9999",uP="supabase.auth.token",dP={"X-Client-Info":`gotrue-js/${oT}`},jm="X-Supabase-Api-Version",aT={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},hP=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,fP=600*1e3;class Cc extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function De(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class pP extends Cc{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function gP(n){return De(n)&&n.name==="AuthApiError"}class xo extends Cc{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Vs extends Cc{constructor(e,t,r,i){super(e,r,i),this.name=t,this.status=r}}class ks extends Vs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function mP(n){return De(n)&&n.name==="AuthSessionMissingError"}class _a extends Vs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class _d extends Vs{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class wd extends Vs{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function vP(n){return De(n)&&n.name==="AuthImplicitGrantRedirectError"}class Sw extends Vs{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Lm extends Vs{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function kg(n){return De(n)&&n.name==="AuthRetryableFetchError"}class xw extends Vs{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class Fm extends Vs{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const mh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ew=` 	
\r=`.split(""),yP=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<Ew.length;e+=1)n[Ew[e].charCodeAt(0)]=-2;for(let e=0;e<mh.length;e+=1)n[mh[e].charCodeAt(0)]=e;return n})();function Cw(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(mh[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(mh[r]),e.queuedBits-=6}}function lT(n,e,t){const r=yP[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function Tw(n){const e=[],t=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{wP(o,r,t)};for(let o=0;o<n.length;o+=1)lT(n.charCodeAt(o),i,s);return e.join("")}function bP(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function _P(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(n.charCodeAt(t+1)-56320&65535|i)+65536,t+=1}bP(r,e)}}function wP(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let r=1;r<6;r+=1)if((n>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function ja(n){const e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<n.length;i+=1)lT(n.charCodeAt(i),t,r);return new Uint8Array(e)}function SP(n){const e=[];return _P(n,t=>e.push(t)),new Uint8Array(e)}function To(n){const e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};return n.forEach(i=>Cw(i,t,r)),Cw(null,t,r),e.join("")}function xP(n){return Math.round(Date.now()/1e3)+n}function EP(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const gr=()=>typeof window<"u"&&typeof document<"u",co={tested:!1,writable:!1},cT=()=>{if(!gr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(co.tested)return co.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),co.tested=!0,co.writable=!0}catch{co.tested=!0,co.writable=!1}return co.writable};function CP(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return t.searchParams.forEach((r,i)=>{e[i]=r}),e}const uT=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ei(async()=>{const{default:r}=await Promise.resolve().then(()=>$o);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},TP=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Ra=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},uo=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Cs=async(n,e)=>{await n.removeItem(e)};class tf{constructor(){this.promise=new tf.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}tf.promiseConstructor=Promise;function Ag(n){const e=n.split(".");if(e.length!==3)throw new Fm("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!hP.test(e[r]))throw new Fm("JWT not in base64url format");return{header:JSON.parse(Tw(e[0])),payload:JSON.parse(Tw(e[1])),signature:ja(e[2]),raw:{header:e[0],payload:e[1]}}}async function kP(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function AP(n,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await n(s);if(!e(s,null,o)){r(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function DP(n){return("0"+n.toString(16)).substr(-2)}function RP(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let i="";for(let s=0;s<56;s++)i+=t.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,DP).join("")}async function OP(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function IP(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await OP(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function wa(n,e,t=!1){const r=RP();let i=r;t&&(i+="/PASSWORD_RECOVERY"),await Ra(n,`${e}-code-verifier`,i);const s=await IP(r);return[s,r===s?"plain":"s256"]}const MP=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function NP(n){const e=n.headers.get(jm);if(!e||!e.match(MP))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function PP(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function jP(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const LP=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Sa(n){if(!LP.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Dg(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const r=t.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function kw(n){return JSON.parse(JSON.stringify(n))}const mo=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),FP=[502,503,504];async function Aw(n){var e;if(!TP(n))throw new Lm(mo(n),0);if(FP.includes(n.status))throw new Lm(mo(n),n.status);let t;try{t=await n.json()}catch(s){throw new xo(mo(s),s)}let r;const i=NP(n);if(i&&i.getTime()>=aT["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new xw(mo(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new ks}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new xw(mo(t),n.status,t.weak_password.reasons);throw new pP(mo(t),n.status||500,r)}const UP=(n,e,t,r)=>{const i={method:n,headers:e?.headers||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};async function Ne(n,e,t,r){var i;const s=Object.assign({},r?.headers);s[jm]||(s[jm]=aT["2024-01-01"].name),r?.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await BP(n,e,t+l,{headers:s,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(c):{data:Object.assign({},c),error:null}}async function BP(n,e,t,r,i,s){const o=UP(e,r,i,s);let l;try{l=await n(t,Object.assign({},o))}catch(c){throw console.error(c),new Lm(mo(c),0)}if(l.ok||await Aw(l),r?.noResolveJson)return l;try{return await l.json()}catch(c){await Aw(c)}}function Gr(n){var e;let t=null;$P(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=xP(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function Dw(n){const e=Gr(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function Os(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function HP(n){return{data:n,error:null}}function zP(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s}=n,o=rl(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function Rw(n){return n}function $P(n){return n.access_token&&n.refresh_token&&n.expires_in}const Rg=["global","local","others"];class WP{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=uT(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=Rg[0]){if(Rg.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Rg.join(", ")}`);try{return await Ne(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(De(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await Ne(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Os})}catch(r){if(De(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=rl(e,["options"]),i=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),await Ne(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:zP,redirectTo:t?.redirectTo})}catch(t){if(De(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Ne(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Os})}catch(t){if(De(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,i,s,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},h=await Ne(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Rw});if(h.error)throw h.error;const p=await h.json(),g=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,v=(c=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return v.length>0&&(v.forEach(y=>{const _=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(y.split(";")[1].split("=")[1]);d[`${w}Page`]=_}),d.total=parseInt(g)),{data:Object.assign(Object.assign({},p),d),error:null}}catch(d){if(De(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){Sa(e);try{return await Ne(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Os})}catch(t){if(De(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Sa(e);try{return await Ne(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Os})}catch(r){if(De(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){Sa(e);try{return await Ne(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Os})}catch(r){if(De(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Sa(e.userId);try{const{data:t,error:r}=await Ne(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:r}}catch(t){if(De(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Sa(e.userId),Sa(e.id);try{return{data:await Ne(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(De(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,r,i,s,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},h=await Ne(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Rw});if(h.error)throw h.error;const p=await h.json(),g=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,v=(c=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return v.length>0&&(v.forEach(y=>{const _=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(y.split(";")[1].split("=")[1]);d[`${w}Page`]=_}),d.total=parseInt(g)),{data:Object.assign(Object.assign({},p),d),error:null}}catch(d){if(De(d))return{data:{clients:[]},error:d};throw d}}async _createOAuthClient(e){try{return await Ne(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(De(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await Ne(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(De(t))return{data:null,error:t};throw t}}async _deleteOAuthClient(e){try{return await Ne(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(De(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await Ne(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(De(t))return{data:null,error:t};throw t}}}function Ow(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}const xa={debug:!!(globalThis&&cT()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class dT extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class VP extends dT{}async function qP(n,e,t){xa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),xa.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){xa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return await t()}finally{xa.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}}else{if(e===0)throw xa.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new VP(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(xa.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function GP(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function hT(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function YP(n){return parseInt(n,16)}function KP(n){const e=new TextEncoder().encode(n);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function QP(n){var e;const{chainId:t,domain:r,expirationTime:i,issuedAt:s=new Date,nonce:o,notBefore:l,requestId:c,resources:d,scheme:h,uri:p,version:g}=n;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(g!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${g}`);if(!((e=n.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const v=hT(n.address),y=h?`${h}://${r}`:r,_=n.statement?`${n.statement}
`:"",w=`${y} wants you to sign in with your Ethereum account:
${v}

${_}`;let x=`URI: ${p}
Version: ${g}
Chain ID: ${t}${o?`
Nonce: ${o}`:""}
Issued At: ${s.toISOString()}`;if(i&&(x+=`
Expiration Time: ${i.toISOString()}`),l&&(x+=`
Not Before: ${l.toISOString()}`),c&&(x+=`
Request ID: ${c}`),d){let C=`
Resources:`;for(const T of d){if(!T||typeof T!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${T}`);C+=`
- ${T}`}x+=C}return`${w}
${x}`}class nn extends Error{constructor({message:e,code:t,cause:r,name:i}){var s;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(s=i??(r instanceof Error?r.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=t}}class vh extends nn{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function XP({error:n,options:e}){var t,r,i;const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new nn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((t=s.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new nn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(e.mediation==="conditional"&&((r=s.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new nn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new nn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new nn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new nn({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return s.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new nn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new nn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const o=window.location.hostname;if(fT(o)){if(s.rp.id!==o)return new nn({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new nn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new nn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new nn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new nn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function ZP({error:n,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new nn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new nn({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const r=window.location.hostname;if(fT(r)){if(t.rpId!==r)return new nn({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new nn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new nn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new nn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class JP{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const ej=new JP;function tj(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:e,user:t,excludeCredentials:r}=n,i=rl(n,["challenge","user","excludeCredentials"]),s=ja(e).buffer,o=Object.assign(Object.assign({},t),{id:ja(t.id).buffer}),l=Object.assign(Object.assign({},i),{challenge:s,user:o});if(r&&r.length>0){l.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const d=r[c];l.excludeCredentials[c]=Object.assign(Object.assign({},d),{id:ja(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return l}function nj(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:e,allowCredentials:t}=n,r=rl(n,["challenge","allowCredentials"]),i=ja(e).buffer,s=Object.assign(Object.assign({},r),{challenge:i});if(t&&t.length>0){s.allowCredentials=new Array(t.length);for(let o=0;o<t.length;o++){const l=t[o];s.allowCredentials[o]=Object.assign(Object.assign({},l),{id:ja(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return s}function rj(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n;return{id:n.id,rawId:n.id,response:{attestationObject:To(new Uint8Array(n.response.attestationObject)),clientDataJSON:To(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function ij(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n,r=n.getClientExtensionResults(),i=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:To(new Uint8Array(i.authenticatorData)),clientDataJSON:To(new Uint8Array(i.clientDataJSON)),signature:To(new Uint8Array(i.signature)),userHandle:i.userHandle?To(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function fT(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function Iw(){var n,e;return!!(gr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function sj(n){try{const e=await navigator.credentials.create(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new vh("Browser returned unexpected credential type",e)}:{data:null,error:new vh("Empty credential response",e)}}catch(e){return{data:null,error:XP({error:e,options:n})}}}async function oj(n){try{const e=await navigator.credentials.get(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new vh("Browser returned unexpected credential type",e)}:{data:null,error:new vh("Empty credential response",e)}}catch(e){return{data:null,error:ZP({error:e,options:n})}}}const aj={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},lj={userVerification:"preferred",hints:["security-key"]};function yh(...n){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),t=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of n)if(i)for(const s in i){const o=i[s];if(o!==void 0)if(Array.isArray(o))r[s]=o;else if(t(o))r[s]=o;else if(e(o)){const l=r[s];e(l)?r[s]=yh(l,o):r[s]=yh(o)}else r[s]=o}return r}function cj(n,e){return yh(aj,n,e||{})}function uj(n,e){return yh(lj,n,e||{})}class dj{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:r,signal:i},s){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!o)return{data:null,error:l};const c=i??ej.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:d}=o.webauthn.credential_options.publicKey;d.name||(d.name=`${d.id}:${r}`),d.displayName||(d.displayName=d.name)}switch(o.webauthn.type){case"create":{const d=cj(o.webauthn.credential_options.publicKey,s?.create),{data:h,error:p}=await sj({publicKey:d,signal:c});return h?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:p}}case"request":{const d=uj(o.webauthn.credential_options.publicKey,s?.request),{data:h,error:p}=await oj(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:d,signal:c}));return h?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:p}}}}catch(o){return De(o)?{data:null,error:o}:{data:null,error:new xo("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:t,webauthn:r}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}},s){if(!t)return{data:null,error:new Cc("rpId is required for WebAuthn authentication")};try{if(!Iw())return{data:null,error:new xo("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:r},signal:i},{request:s});if(!o)return{data:null,error:l};const{webauthn:c}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:c.type,rpId:t,rpOrigins:r,credential_response:c.credential_response}})}catch(o){return De(o)?{data:null,error:o}:{data:null,error:new xo("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i},s){if(!t)return{data:null,error:new Cc("rpId is required for WebAuthn registration")};try{if(!Iw())return{data:null,error:new xo("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(h=>{var p;return(p=h.data)===null||p===void 0?void 0:p.all.find(g=>g.factor_type==="webauthn"&&g.friendly_name===e&&g.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h?.id}):void 0),{data:null,error:l};const{data:c,error:d}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:t,rpOrigins:r},signal:i},{create:s});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:t,rpOrigins:r,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:d}}catch(o){return De(o)?{data:null,error:o}:{data:null,error:new xo("Unexpected error in register",o)}}}}GP();const hj={url:cP,storageKey:uP,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:dP,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Mw(n,e,t){return await t()}const Ea={};class Tc{get jwks(){var e,t;return(t=(e=Ea[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Ea[this.storageKey]=Object.assign(Object.assign({},Ea[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Ea[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ea[this.storageKey]=Object.assign(Object.assign({},Ea[this.storageKey]),{cachedAt:e})}constructor(e){var t,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Tc.nextInstanceID,Tc.nextInstanceID+=1,this.instanceID>0&&gr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},hj),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new WP({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=uT(i.fetch),this.lock=i.lock||Mw,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:gr()&&(!((t=globalThis?.navigator)===null||t===void 0)&&t.locks)?this.lock=qP:this.lock=Mw,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new dj(this)},this.persistSession?(i.storage?this.storage=i.storage:cT()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ow(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Ow(this.memoryStorage)),gr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${oT}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=CP(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),gr()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(t,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),vP(s)){const c=(e=s.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:l}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return De(t)?{error:t}:{error:new xo("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,i;try{const s=await Ne(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e?.options)===null||i===void 0?void 0:i.captchaToken}},xform:Gr}),{data:o,error:l}=s;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(s){if(De(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var t,r,i;try{let s;if("email"in e){const{email:h,password:p,options:g}=e;let v=null,y=null;this.flowType==="pkce"&&([v,y]=await wa(this.storage,this.storageKey)),s=await Ne(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:g?.emailRedirectTo,body:{email:h,password:p,data:(t=g?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:g?.captchaToken},code_challenge:v,code_challenge_method:y},xform:Gr})}else if("phone"in e){const{phone:h,password:p,options:g}=e;s=await Ne(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:p,data:(r=g?.data)!==null&&r!==void 0?r:{},channel:(i=g?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:Gr})}else throw new _d("You must provide either an email or phone number and a password");const{data:o,error:l}=s;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(s){if(De(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let t;if("email"in e){const{email:s,password:o,options:l}=e;t=await Ne(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:Dw})}else if("phone"in e){const{phone:s,password:o,options:l}=e;t=await Ne(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:Dw})}else throw new _d("You must provide either an email or phone number and a password");const{data:r,error:i}=t;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new _a}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(t){if(De(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,r,i,s,o,l,c,d,h,p,g;let v,y;if("message"in e)v=e.message,y=e.signature;else{const{chain:_,wallet:w,statement:x,options:C}=e;let T;if(gr())if(typeof w=="object")T=w;else{const F=window;if("ethereum"in F&&typeof F.ethereum=="object"&&"request"in F.ethereum&&typeof F.ethereum.request=="function")T=F.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!C?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");T=w}const R=new URL((t=C?.url)!==null&&t!==void 0?t:window.location.href),D=await T.request({method:"eth_requestAccounts"}).then(F=>F).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!D||D.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const O=hT(D[0]);let M=(r=C?.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!M){const F=await T.request({method:"eth_chainId"});M=YP(F)}const I={domain:R.host,address:O,statement:x,uri:R.href,version:"1",chainId:M,nonce:(i=C?.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(o=(s=C?.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=C?.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=C?.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(d=C?.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(h=C?.signInWithEthereum)===null||h===void 0?void 0:h.resources};v=QP(I),y=await T.request({method:"personal_sign",params:[KP(v),O]})}try{const{data:_,error:w}=await Ne(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:v,signature:y},!((p=e.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:Gr});if(w)throw w;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new _a}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:w})}catch(_){if(De(_))return{data:{user:null,session:null},error:_};throw _}}async signInWithSolana(e){var t,r,i,s,o,l,c,d,h,p,g,v;let y,_;if("message"in e)y=e.message,_=e.signature;else{const{chain:w,wallet:x,statement:C,options:T}=e;let R;if(gr())if(typeof x=="object")R=x;else{const O=window;if("solana"in O&&typeof O.solana=="object"&&("signIn"in O.solana&&typeof O.solana.signIn=="function"||"signMessage"in O.solana&&typeof O.solana.signMessage=="function"))R=O.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!T?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");R=x}const D=new URL((t=T?.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in R&&R.signIn){const O=await R.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},T?.signInWithSolana),{version:"1",domain:D.host,uri:D.href}),C?{statement:C}:null));let M;if(Array.isArray(O)&&O[0]&&typeof O[0]=="object")M=O[0];else if(O&&typeof O=="object"&&"signedMessage"in O&&"signature"in O)M=O;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in M&&"signature"in M&&(typeof M.signedMessage=="string"||M.signedMessage instanceof Uint8Array)&&M.signature instanceof Uint8Array)y=typeof M.signedMessage=="string"?M.signedMessage:new TextDecoder().decode(M.signedMessage),_=M.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in R)||typeof R.signMessage!="function"||!("publicKey"in R)||typeof R!="object"||!R.publicKey||!("toBase58"in R.publicKey)||typeof R.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${D.host} wants you to sign in with your Solana account:`,R.publicKey.toBase58(),...C?["",C,""]:[""],"Version: 1",`URI: ${D.href}`,`Issued At: ${(i=(r=T?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=T?.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${T.signInWithSolana.notBefore}`]:[],...!((o=T?.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${T.signInWithSolana.expirationTime}`]:[],...!((l=T?.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${T.signInWithSolana.chainId}`]:[],...!((c=T?.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${T.signInWithSolana.nonce}`]:[],...!((d=T?.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${T.signInWithSolana.requestId}`]:[],...!((p=(h=T?.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||p===void 0)&&p.length?["Resources",...T.signInWithSolana.resources.map(M=>`- ${M}`)]:[]].join(`
`);const O=await R.signMessage(new TextEncoder().encode(y),"utf8");if(!O||!(O instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=O}}try{const{data:w,error:x}=await Ne(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:To(_)},!((g=e.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:Gr});if(x)throw x;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new _a}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:x})}catch(w){if(De(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(e){const t=await uo(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(t??"").split("/");try{const{data:s,error:o}=await Ne(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Gr});if(await Cs(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new _a}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(De(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:t,provider:r,token:i,access_token:s,nonce:o}=e,l=await Ne(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:Gr}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new _a}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(t){if(De(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,i,s,o;try{if("email"in e){const{email:l,options:c}=e;let d=null,h=null;this.flowType==="pkce"&&([d,h]=await wa(this.storage,this.storageKey));const{error:p}=await Ne(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(t=c?.data)!==null&&t!==void 0?t:{},create_user:(r=c?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},code_challenge:d,code_challenge_method:h},redirectTo:c?.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in e){const{phone:l,options:c}=e,{data:d,error:h}=await Ne(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(i=c?.data)!==null&&i!==void 0?i:{},create_user:(s=c?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},channel:(o=c?.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:d?.message_id},error:h}}throw new _d("You must provide either an email or phone number.")}catch(l){if(De(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var t,r;try{let i,s;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await Ne(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:Gr});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,d=o.user;return c?.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(De(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var t,r,i;try{let s=null,o=null;return this.flowType==="pkce"&&([s,o]=await wa(this.storage,this.storageKey)),await Ne(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:HP})}catch(s){if(De(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new ks;const{error:i}=await Ne(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(De(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:o}=await Ne(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s?.captchaToken}},redirectTo:s?.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:o,error:l}=await Ne(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s?.captchaToken}}});return{data:{user:null,session:null,messageId:o?.message_id},error:l}}throw new _d("You must provide either an email or phone number and a type")}catch(t){if(De(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await uo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Tg:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await uo(this.userStorage,this.storageKey+"-user");o?.user?e.user=o.user:e.user=Dg()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,d,h)=>(!o&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,h))})}return{data:{session:e},error:null}}const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ne(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Os}):await this._useSession(async t=>{var r,i,s;const{data:o,error:l}=t;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ks}:await Ne(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:Os})})}catch(t){if(De(t))return mP(t)&&(await this._removeSession(),await Cs(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new ks;const o=i.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await wa(this.storage,this.storageKey));const{data:d,error:h}=await Ne(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Os});if(h)throw h;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(De(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ks;const t=Date.now()/1e3;let r=t,i=!0,s=null;const{payload:o}=Ag(e.access_token);if(o.exp&&(r=o.exp,i=r<=t),i){const{data:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};s=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;s={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(t){if(De(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:o,error:l}=t;if(l)throw l;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new ks;const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(De(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!gr())throw new wd("No browser detected.");if(e.error||e.error_description||e.error_code)throw new wd(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Sw("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new wd("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Sw("No code detected.");const{data:C,error:T}=await this._exchangeCodeForSession(e.code);if(T)throw T;const R=new URL(window.location.href);return R.searchParams.delete("code"),window.history.replaceState(window.history.state,"",R.toString()),{data:{session:C.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:l,expires_at:c,token_type:d}=e;if(!s||!l||!o||!d)throw new wd("No session defined in URL");const h=Math.round(Date.now()/1e3),p=parseInt(l);let g=h+p;c&&(g=parseInt(c));const v=g-h;v*1e3<=Da&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${p}s`);const y=g-p;h-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,g,h):h-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,g,h);const{data:_,error:w}=await this._getUser(s);if(w)throw w;const x={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:p,expires_at:g,refresh_token:o,token_type:d,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:e.type},error:null}}catch(r){if(De(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await uo(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:i,error:s}=t;if(s)return{error:s};const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(gP(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Cs(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=EP(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,i;try{const{data:{session:s},error:o}=t;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,t={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await wa(this.storage,this.storageKey,!0));try{return await Ne(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(De(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(De(t))return{data:null,error:t};throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:r,error:i}=await this._useSession(async s=>{var o,l,c,d,h;const{data:p,error:g}=s;if(g)throw g;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Ne(this.fetch,"GET",v,{headers:this.headers,jwt:(h=(d=p.session)===null||d===void 0?void 0:d.access_token)!==null&&h!==void 0?h:void 0})});if(i)throw i;return gr()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r?.url),{data:{provider:e.provider,url:r?.url},error:null}}catch(r){if(De(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var r;try{const{error:i,data:{session:s}}=t;if(i)throw i;const{options:o,provider:l,token:c,access_token:d,nonce:h}=e,p=await Ne(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=s?.access_token)!==null&&r!==void 0?r:void 0,body:{provider:l,id_token:c,access_token:d,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:Gr}),{data:g,error:v}=p;return v?{data:{user:null,session:null},error:v}:!g||!g.session||!g.user?{data:{user:null,session:null},error:new _a}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("USER_UPDATED",g.session)),{data:g,error:v})}catch(i){if(De(i))return{data:{user:null,session:null},error:i};throw i}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,i;const{data:s,error:o}=t;if(o)throw o;return await Ne(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(De(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await AP(async i=>(i>0&&await kP(200*Math.pow(2,i-1)),this._debug(t,"refreshing attempt",i),await Ne(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Gr})),(i,s)=>{const o=200*Math.pow(2,i);return s&&kg(s)&&Date.now()+o-r<Da})}catch(r){if(this._debug(t,"error",r),De(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),gr()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await uo(this.storage,this.storageKey);if(i&&this.userStorage){let o=await uo(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await Ra(this.userStorage,this.storageKey+"-user",o)),i.user=(e=o?.user)!==null&&e!==void 0?e:Dg()}else if(i&&!i.user&&!i.user){const o=await uo(this.storage,this.storageKey+"-user");o&&o?.user?(i.user=o.user,await Cs(this.storage,this.storageKey+"-user"),await Ra(this.storage,this.storageKey,i)):i.user=Dg()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const s=((t=i.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Tg;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${Tg}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),kg(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(i.access_token);!l&&o?.user?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new ks;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new tf;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new ks;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const l={data:s.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(s){if(this._debug(i,"error",s),De(s)){const o={data:null,error:s};return kg(s)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,t)}catch(c){s.push(c)}});if(await Promise.all(o),s.length>0){for(let l=0;l<s.length;l+=1)console.error(s[l]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&t.user&&await Ra(this.userStorage,this.storageKey+"-user",{user:t.user});const i=Object.assign({},t);delete i.user;const s=kw(i);await Ra(this.storage,this.storageKey,s)}else{const i=kw(t);await Ra(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Cs(this.storage,this.storageKey),await Cs(this.storage,this.storageKey+"-code-verifier"),await Cs(this.storage,this.storageKey+"-user"),this.userStorage&&await Cs(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&gr()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Da);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/Da);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Da}ms, refresh threshold is ${Pm} ticks`),i<=Pm&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof dT)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!gr()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const i=[`provider=${encodeURIComponent(t)}`];if(r?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,o]=await wa(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(l.toString())}if(r?.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r?.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;return s?{data:null,error:s}:await Ne(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(De(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,i;const{data:s,error:o}=t;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:c,error:d}=await Ne(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=s?.session)===null||r===void 0?void 0:r.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&c.type==="totp"&&(!((i=c?.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(t){if(De(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;if(s)return{data:null,error:s};const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?rj(e.webauthn.credential_response):ij(e.webauthn.credential_response)})}:{code:e.code}),{data:l,error:c}=await Ne(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:c})})}catch(t){if(De(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;if(s)return{data:null,error:s};const o=await Ne(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:tj(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:nj(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(De(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(e=t?.factors)!==null&&e!==void 0?e:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Ag(i.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((r=(t=i.user.factors)===null||t===void 0?void 0:t.filter(p=>p.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const h=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:h},error:null}}))}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(l=>l.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(l=>l.kid===e),r&&this.jwks_cached_at+fP>i)return r;const{data:s,error:o}=await Ne(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,r=s.keys.find(l=>l.kid===e),!r)?null:r}async getClaims(e,t={}){try{let r=e;if(!r){const{data:v,error:y}=await this.getSession();if(y||!v.session)return{data:null,error:y};r=v.session.access_token}const{header:i,payload:s,signature:o,raw:{header:l,payload:c}}=Ag(r);t?.allowExpired||PP(s.exp);const d=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,t?.keys?{keys:t.keys}:t?.jwks);if(!d){const{error:v}=await this.getUser(r);if(v)throw v;return{data:{claims:s,header:i,signature:o},error:null}}const h=jP(i.alg),p=await crypto.subtle.importKey("jwk",d,h,!0,["verify"]);if(!await crypto.subtle.verify(h,p,o,SP(`${l}.${c}`)))throw new Fm("Invalid JWT signature");return{data:{claims:s,header:i,signature:o},error:null}}catch(r){if(De(r))return{data:null,error:r};throw r}}}Tc.nextInstanceID=0;const fj=Tc;class pj extends fj{constructor(e){super(e)}}class gj{constructor(e,t,r){var i,s,o;this.supabaseUrl=e,this.supabaseKey=t;const l=lP(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,d={db:eP,realtime:nP,auth:Object.assign(Object.assign({},tP),{storageKey:c}),global:JN},h=aP(r??{},d);this.storageKey=(i=h.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=h.global.headers)!==null&&s!==void 0?s:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(p,g)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(g)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=sP(t,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new cN(new URL("rest/v1",l).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new QN(this.storageUrl.href,this.headers,this.fetch,r?.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new JM(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,userStorage:s,storageKey:o,flowType:l,lock:c,debug:d},h,p){const g={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new pj({url:this.authUrl.href,headers:Object.assign(Object.assign({},g),h),storageKey:o,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,userStorage:s,flowType:l,lock:c,debug:d,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new TN(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r?.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const mj=(n,e,t)=>new gj(n,e,t);function vj(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const e=n.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}vj()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const yj="https://wufsjkzyjxgvualcaftn.supabase.co",bj="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind1ZnNqa3p5anhndnVhbGNhZnRuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE0NzAyNzAsImV4cCI6MjA3NzA0NjI3MH0.cq8pGstXbA3OzgPbkJNRrQT39ROA4t9N3czLSIWpjUs",Tt=mj(yj,bj,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),cn=n=>n?(console.error("Supabase error:",n),n.message?n.message:"An unknown database error occurred"):null,pT=k.createContext({}),_j=({children:n})=>{const[e,t]=k.useState(null),[r,i]=k.useState(!0),[s,o]=k.useState(null);k.useEffect(()=>{(async()=>{const{data:{session:v},error:y}=await Tt.auth.getSession();y?(console.error("Error getting session:",y),o(y.message)):t(v?.user??null),i(!1)})();const{data:{subscription:g}}=Tt.auth.onAuthStateChange(async(v,y)=>{console.log("Auth state changed:",v,y),t(y?.user??null),i(!1),o(null)});return()=>g.unsubscribe()},[]);const h={user:e,loading:r,error:s,signIn:async(p,g)=>{try{i(!0),o(null);const{data:v,error:y}=await Tt.auth.signInWithPassword({email:p,password:g});return y?(o(y.message),{error:y.message}):{error:null,user:v.user}}catch(v){const y=v.message||"An error occurred during sign in";return o(y),{error:y}}finally{i(!1)}},signUp:async(p,g)=>{try{i(!0),o(null);const{data:v,error:y}=await Tt.auth.signUp({email:p,password:g});return y?(o(y.message),{error:y.message}):{error:null,user:v.user}}catch(v){const y=v.message||"An error occurred during sign up";return o(y),{error:y}}finally{i(!1)}},signOut:async()=>{try{i(!0);const{error:p}=await Tt.auth.signOut();p&&o(p.message)}catch(p){o(p.message||"An error occurred during sign out")}finally{i(!1)}}};return E.jsx(pT.Provider,{value:h,children:n})},Wo=()=>{const n=k.useContext(pT);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wj=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Sj=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),Nw=n=>{const e=Sj(n);return e.charAt(0).toUpperCase()+e.slice(1)},gT=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),xj=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ej={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cj=k.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...l},c)=>k.createElement("svg",{ref:c,...Ej,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:gT("lucide",i),...!s&&!xj(l)&&{"aria-hidden":"true"},...l},[...o.map(([d,h])=>k.createElement(d,h)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qc=(n,e)=>{const t=k.forwardRef(({className:r,...i},s)=>k.createElement(Cj,{ref:s,iconNode:e,className:gT(`lucide-${wj(Nw(n))}`,`lucide-${n}`,r),...i}));return t.displayName=Nw(n),t};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tj=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],kj=qc("calendar",Tj);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aj=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Dj=qc("clock",Aj);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Oj=qc("file-text",Rj);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ij=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],Mj=qc("house",Ij);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nj=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Pj=qc("settings",Nj);function jj(){const{user:n}=Wo(),e=ns(),[t,r]=k.useState({backlog:e.pathname.startsWith("/backlog"),machinery:e.pathname.startsWith("/machinery"),phases:e.pathname.startsWith("/phases"),scheduler:e.pathname.startsWith("/scheduler")}),i=[{href:"/",label:"Dashboard",icon:Mj},{section:"backlog",label:"Backlog",icon:Oj,subLinks:[{href:"/backlog",label:"Lista Backlog"},{href:"/backlog/add",label:"Nuovo Backlog"}]},{section:"machinery",label:"Macchinari",icon:Pj,subLinks:[{href:"/machinery",label:"Lista Macchinari"},{href:"/machinery/add",label:"Nuovo Macchinario"}]},{section:"phases",label:"Fasi",icon:Dj,subLinks:[{href:"/phases",label:"Lista Fasi"},{href:"/phases/add",label:"Nuova Fase"}]},{href:"/scheduler",label:"Scheduler",icon:kj}];return n?E.jsx("div",{className:"w-16 bg-secondary shadow-sm border-r border-border min-h-screen",children:E.jsx("div",{className:"flex flex-col items-center py-4 space-y-4",children:i.map(s=>{const o=s.icon,l=e.pathname===s.href;return E.jsx(ar,{to:s.href||"#",className:`p-3 rounded-lg transition-colors ${l?"bg-primary/10 text-primary":"text-muted-foreground hover:text-foreground hover:bg-accent"}`,title:s.label,children:E.jsx(o,{className:"h-6 w-6"})},s.href||s.section)})})}):E.jsxs("nav",{className:"w-64 bg-secondary shadow-sm border-r border-border h-screen flex flex-col",children:[E.jsx("div",{className:"p-4 border-b border-border",children:E.jsx(ar,{to:"/login",className:"flex items-center justify-center",children:E.jsx("span",{className:"text-xl font-bold text-primary",children:"SCHEDULER"})})}),E.jsxs("div",{className:"flex-1 p-4",children:[E.jsx("h3",{className:"text-xs font-semibold text-secondary-foreground uppercase tracking-wider mb-4",children:"NAVIGATION"}),E.jsxs("div",{className:"space-y-2",children:[E.jsx(ar,{to:"/login",className:"flex items-center space-x-3 px-3 py-2 rounded-lg text-muted-foreground hover:text-foreground hover:bg-accent transition-colors",children:E.jsx("span",{className:"font-medium",children:"Accedi"})}),E.jsx(ar,{to:"/signup",className:"flex items-center space-x-3 px-3 py-2 rounded-lg text-muted-foreground hover:text-foreground hover:bg-accent transition-colors",children:E.jsx("span",{className:"font-medium",children:"Registrati"})})]})]})]})}function Lj(){const{user:n,signOut:e}=Wo(),{toggle:t}=UM();return E.jsx($M,{title:"Scheduler Demo",user:{name:n?.email?.split("@")[0]||"User",email:n?.email,avatar:n?.avatar_url},onLogout:()=>e(),onRefresh:()=>window.location.reload(),onToggleSidebar:t,rightContent:E.jsx(HM,{})})}const Pw=n=>{let e;const t=new Set,r=(d,h)=>{const p=typeof d=="function"?d(e):d;if(!Object.is(p,e)){const g=e;e=h??(typeof p!="object"||p===null)?p:Object.assign({},e,p),t.forEach(v=>v(e,g))}},i=()=>e,l={setState:r,getState:i,getInitialState:()=>c,subscribe:d=>(t.add(d),()=>t.delete(d))},c=e=n(r,i,l);return l},Fj=(n=>n?Pw(n):Pw),Uj=n=>n;function Bj(n,e=Uj){const t=K.useSyncExternalStore(n.subscribe,K.useCallback(()=>e(n.getState()),[n,e]),K.useCallback(()=>e(n.getInitialState()),[n,e]));return K.useDebugValue(t),t}const jw=n=>{const e=Fj(n),t=r=>Bj(e,r);return Object.assign(t,e),t},sl=(n=>n?jw(n):jw),Ot={MACHINE:{DEPARTMENT:"STAMPA",WORK_CENTER:"ZANICA",MIN_WEB_WIDTH:"100",MAX_WEB_WIDTH:"1000",MIN_BAG_HEIGHT:"50",MAX_BAG_HEIGHT:"500",SETUP_TIME_STANDARD:"0.5",CHANGEOVER_COLOR:"0.25",CHANGEOVER_MATERIAL:"0.75",ACTIVE_SHIFTS:["T1"],STATUS:"ACTIVE"},PHASE:{DEPARTMENT:"STAMPA",NUMERO_PERSONE:1,WORK_CENTER:"ZANICA",V_STAMPA:6e3,T_SETUP_STAMPA:.5,COSTO_H_STAMPA:50,V_CONF:1e3,T_SETUP_CONF:.25,COSTO_H_CONF:40},ORDER:{SEAL_SIDES:3,QUANTITY_COMPLETED:0},OFF_TIME:{START_TIME:"09:00",END_TIME:"17:00"}},Hj={MAX_TASK_SEGMENTS:50},Sd={MINUTES_PER_HOUR:60,MILLISECONDS_PER_MINUTE:60*1e3},Jt=sl((n,e)=>({isLoading:!1,isInitialized:!1,selectedWorkCenter:localStorage.getItem("selectedWorkCenter")||it.BOTH,isEditMode:!1,schedulingLoading:{isScheduling:!1,isRescheduling:!1,isShunting:!1,isNavigating:!1,operationType:null,taskId:null},confirmDialog:{isOpen:!1,title:"",message:"",onConfirm:null,type:"danger"},conflictDialog:{isOpen:!1,details:null},dragPreview:{isActive:!1,startSlot:null,durationSlots:0,machineId:null},getLoadingState:()=>e().isLoading,getInitializationState:()=>e().isInitialized,getSelectedWorkCenter:()=>e().selectedWorkCenter,getEditMode:()=>e().isEditMode,getConfirmDialog:()=>e().confirmDialog,getConflictDialog:()=>e().conflictDialog,getSchedulingLoading:()=>e().schedulingLoading,getDragPreview:()=>e().dragPreview,setLoading:t=>n({isLoading:t}),setInitialized:t=>n({isInitialized:t}),setSelectedWorkCenter:t=>{localStorage.setItem("selectedWorkCenter",t),n({selectedWorkCenter:t})},toggleEditMode:()=>n(t=>({isEditMode:!t.isEditMode})),setEditMode:t=>n({isEditMode:t}),setSchedulingLoading:t=>n({schedulingLoading:t}),startSchedulingOperation:(t,r=null)=>n({schedulingLoading:{isScheduling:t==="schedule",isRescheduling:t==="reschedule",isShunting:t==="shunt",isNavigating:t==="navigate",operationType:t,taskId:r}}),stopSchedulingOperation:()=>n({schedulingLoading:{isScheduling:!1,isRescheduling:!1,isShunting:!1,isNavigating:!1,operationType:null,taskId:null}}),showConfirmDialog:(t,r,i,s="danger")=>n({confirmDialog:{isOpen:!0,title:t,message:r,onConfirm:i,type:s}}),hideConfirmDialog:()=>n({confirmDialog:{isOpen:!1,title:"",message:"",onConfirm:null,type:"danger"}}),showConflictDialog:t=>n({conflictDialog:{isOpen:!0,details:t}}),hideConflictDialog:()=>n({conflictDialog:{isOpen:!1,details:null}}),setDragPreview:t=>n({dragPreview:t}),clearDragPreview:()=>n({dragPreview:{isActive:!1,startSlot:null,durationSlots:0,machineId:null}}),showAlert:(t,r="info")=>{LM(t,r)},reset:()=>n({isLoading:!1,isInitialized:!1,selectedWorkCenter:it.BOTH,isEditMode:!1,schedulingLoading:{isScheduling:!1,isRescheduling:!1,isShunting:!1,isNavigating:!1,operationType:null,taskId:null},confirmDialog:{isOpen:!1,title:"",message:"",onConfirm:null,type:"danger"},conflictDialog:{isOpen:!1,details:null},dragPreview:{isActive:!1,startSlot:null,durationSlots:0,machineId:null}})})),mT=()=>{const n=k.useCallback(d=>{if(!d||!d.department)return{isValid:!1,error:"Invalid phase data"};const{department:h}=d;if(h==="STAMPA"){const p=parseFloat(d.v_stampa);if(isNaN(p)||p<=0)return{isValid:!1,error:"Velocità di stampa non valida. Inserisci un valore maggiore di zero."}}else if(h==="CONFEZIONAMENTO"){const p=parseFloat(d.v_conf);if(isNaN(p)||p<=0)return{isValid:!1,error:"Velocità di confezionamento non valida. Inserisci un valore maggiore di zero."}}else return{isValid:!1,error:"Reparto non riconosciuto"};return{isValid:!0}},[]),e=k.useCallback((d,h,p)=>{if(!d||!h||d.department==="STAMPA"&&!p||!n(d).isValid)return null;try{const{department:v}=d;if(v==="STAMPA"){const y=parseFloat(d.v_stampa),_=parseFloat(d.t_setup_stampa)||0,w=parseFloat(d.costo_h_stampa)||0;if(isNaN(y)||y<=0)return null;const C=p*h/1e3/y,T=C+_,R=T*w;return{totals:{duration:T,cost:R},breakdown:{print:{time:C,cost:C*w},setup:{time:_,cost:_*w}}}}else if(v==="CONFEZIONAMENTO"){const y=parseFloat(d.v_conf),_=parseFloat(d.t_setup_conf)||0,w=parseFloat(d.costo_h_conf)||0;if(isNaN(y)||y<=0)return null;const x=h/y,C=_,T=x+C,R=T*w;return{totals:{duration:T,cost:R},breakdown:{package:{time:x,cost:x*w},setup:{time:C,cost:C*w}}}}return null}catch{return null}},[n]),t=k.useCallback(d=>d&&(d.startsWith("P05")||d.startsWith("ISP05"))?"BUSTO_GAROLFO":"ZANICA",[]),r=k.useCallback(d=>d&&d.startsWith("P0")?"CONFEZIONAMENTO":"STAMPA",[]),i=k.useCallback(d=>({STAMPA:["DIGITAL_PRINT","FLEXO_PRINT","ROTOGRAVURE"],CONFEZIONAMENTO:["DOYPACK","PLURI_PIU","MONO_PIU","CONFEZIONAMENTO_TRADIZIONALE","CONFEZIONAMENTO_POLVERI"]})[d]||[],[]),s=k.useCallback((d,h)=>{const g={DIGITAL_PRINT:"DIGI",FLEXO_PRINT:"FLEX",ROTOGRAVURE:"ROTO",DOYPACK:"DOYP",PLURI_PIU:"PLUR",MONO_PIU:"MONO",CONFEZIONAMENTO_TRADIZIONALE:"CONFTRAD",CONFEZIONAMENTO_POLVERI:"CONFPOL"}[d]||"MACH",v=h==="BUSTO_GAROLFO"?"BGF":"ZAN",y=Date.now().toString(36);return`${g}_${v}_${y}`},[]),o=k.useCallback((d,h)=>!(h<0||h>d),[]),l=k.useCallback((d,h)=>!d||d===0?0:Math.round(h*100/d),[]),c=k.useCallback((d,h)=>!d||d===0?0:!h||h===0?d:Math.round(d*(1-h/100)*100)/100,[]);return{calculateProductionMetrics:e,validatePhaseParameters:n,autoDetermineWorkCenter:t,autoDetermineDepartment:r,getValidMachineTypes:i,generateMachineId:s,validateQuantityCompleted:o,calculateCompletionRate:l,calculateTimeRemaining:c}};var Og,Lw;function zj(){if(Lw)return Og;Lw=1;function n(x){this._maxSize=x,this.clear()}n.prototype.clear=function(){this._size=0,this._values=Object.create(null)},n.prototype.get=function(x){return this._values[x]},n.prototype.set=function(x,C){return this._size>=this._maxSize&&this.clear(),x in this._values||this._size++,this._values[x]=C};var e=/[^.^\]^[]+|(?=\[\]|\.\.)/g,t=/^\d+$/,r=/^\d/,i=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,s=/^\s*(['"]?)(.*?)(\1)\s*$/,o=512,l=new n(o),c=new n(o),d=new n(o);Og={Cache:n,split:p,normalizePath:h,setter:function(x){var C=h(x);return c.get(x)||c.set(x,function(R,D){for(var O=0,M=C.length,I=R;O<M-1;){var F=C[O];if(F==="__proto__"||F==="constructor"||F==="prototype")return R;I=I[C[O++]]}I[C[O]]=D})},getter:function(x,C){var T=h(x);return d.get(x)||d.set(x,function(D){for(var O=0,M=T.length;O<M;)if(D!=null||!C)D=D[T[O++]];else return;return D})},join:function(x){return x.reduce(function(C,T){return C+(v(T)||t.test(T)?"["+T+"]":(C?".":"")+T)},"")},forEach:function(x,C,T){g(Array.isArray(x)?x:p(x),C,T)}};function h(x){return l.get(x)||l.set(x,p(x).map(function(C){return C.replace(s,"$2")}))}function p(x){return x.match(e)||[""]}function g(x,C,T){var R=x.length,D,O,M,I;for(O=0;O<R;O++)D=x[O],D&&(w(D)&&(D='"'+D+'"'),I=v(D),M=!I&&/^\d+$/.test(D),C.call(T,D,I,M,O,x))}function v(x){return typeof x=="string"&&x&&["'",'"'].indexOf(x.charAt(0))!==-1}function y(x){return x.match(r)&&!x.match(t)}function _(x){return i.test(x)}function w(x){return!v(x)&&(y(x)||_(x))}return Og}var Ro=zj(),Ig,Fw;function $j(){if(Fw)return Ig;Fw=1;const n=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['’](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['’](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['’](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,e=h=>h.match(n)||[],t=h=>h[0].toUpperCase()+h.slice(1),r=(h,p)=>e(h).join(p).toLowerCase(),i=h=>e(h).reduce((p,g)=>`${p}${p?g[0].toUpperCase()+g.slice(1).toLowerCase():g.toLowerCase()}`,"");return Ig={words:e,upperFirst:t,camelCase:i,pascalCase:h=>t(i(h)),snakeCase:h=>r(h,"_"),kebabCase:h=>r(h,"-"),sentenceCase:h=>t(r(h," ")),titleCase:h=>e(h).map(t).join(" ")},Ig}var Mg=$j(),xd={exports:{}},Uw;function Wj(){if(Uw)return xd.exports;Uw=1,xd.exports=function(i){return n(e(i),i)},xd.exports.array=n;function n(i,s){var o=i.length,l=new Array(o),c={},d=o,h=t(s),p=r(i);for(s.forEach(function(v){if(!p.has(v[0])||!p.has(v[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});d--;)c[d]||g(i[d],d,new Set);return l;function g(v,y,_){if(_.has(v)){var w;try{w=", node was:"+JSON.stringify(v)}catch{w=""}throw new Error("Cyclic dependency"+w)}if(!p.has(v))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(v));if(!c[y]){c[y]=!0;var x=h.get(v)||new Set;if(x=Array.from(x),y=x.length){_.add(v);do{var C=x[--y];g(C,p.get(C),_)}while(y);_.delete(v)}l[--o]=v}}}function e(i){for(var s=new Set,o=0,l=i.length;o<l;o++){var c=i[o];s.add(c[0]),s.add(c[1])}return Array.from(s)}function t(i){for(var s=new Map,o=0,l=i.length;o<l;o++){var c=i[o];s.has(c[0])||s.set(c[0],new Set),s.has(c[1])||s.set(c[1],new Set),s.get(c[0]).add(c[1])}return s}function r(i){for(var s=new Map,o=0,l=i.length;o<l;o++)s.set(i[o],o);return s}return xd.exports}var Vj=Wj();const qj=zc(Vj),Gj=Object.prototype.toString,Yj=Error.prototype.toString,Kj=RegExp.prototype.toString,Qj=typeof Symbol<"u"?Symbol.prototype.toString:()=>"",Xj=/^Symbol\((.*)\)(.*)$/;function Zj(n){return n!=+n?"NaN":n===0&&1/n<0?"-0":""+n}function Bw(n,e=!1){if(n==null||n===!0||n===!1)return""+n;const t=typeof n;if(t==="number")return Zj(n);if(t==="string")return e?`"${n}"`:n;if(t==="function")return"[Function "+(n.name||"anonymous")+"]";if(t==="symbol")return Qj.call(n).replace(Xj,"Symbol($1)");const r=Gj.call(n).slice(8,-1);return r==="Date"?isNaN(n.getTime())?""+n:n.toISOString(n):r==="Error"||n instanceof Error?"["+Yj.call(n)+"]":r==="RegExp"?Kj.call(n):null}function Qi(n,e){let t=Bw(n,e);return t!==null?t:JSON.stringify(n,function(r,i){let s=Bw(this[r],e);return s!==null?s:i},2)}function vT(n){return n==null?[]:[].concat(n)}let yT,bT,_T,Jj=/\$\{\s*(\w+)\s*\}/g;yT=Symbol.toStringTag;class Hw{constructor(e,t,r,i){this.name=void 0,this.message=void 0,this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=void 0,this.inner=void 0,this[yT]="Error",this.name="ValidationError",this.value=t,this.path=r,this.type=i,this.errors=[],this.inner=[],vT(e).forEach(s=>{if(zn.isError(s)){this.errors.push(...s.errors);const o=s.inner.length?s.inner:[s];this.inner.push(...o)}else this.errors.push(s)}),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0]}}bT=Symbol.hasInstance;_T=Symbol.toStringTag;class zn extends Error{static formatError(e,t){const r=t.label||t.path||"this";return t=Object.assign({},t,{path:r,originalPath:t.path}),typeof e=="string"?e.replace(Jj,(i,s)=>Qi(t[s])):typeof e=="function"?e(t):e}static isError(e){return e&&e.name==="ValidationError"}constructor(e,t,r,i,s){const o=new Hw(e,t,r,i);if(s)return o;super(),this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=[],this.inner=[],this[_T]="Error",this.name=o.name,this.message=o.message,this.type=o.type,this.value=o.value,this.path=o.path,this.errors=o.errors,this.inner=o.inner,Error.captureStackTrace&&Error.captureStackTrace(this,zn)}static[bT](e){return Hw[Symbol.hasInstance](e)||super[Symbol.hasInstance](e)}}let mi={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:n,type:e,value:t,originalValue:r})=>{const i=r!=null&&r!==t?` (cast from the value \`${Qi(r,!0)}\`).`:".";return e!=="mixed"?`${n} must be a \`${e}\` type, but the final value was: \`${Qi(t,!0)}\``+i:`${n} must match the configured type. The validated value was: \`${Qi(t,!0)}\``+i}},rr={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",datetime:"${path} must be a valid ISO date-time",datetime_precision:"${path} must be a valid ISO date-time with a sub-second precision of exactly ${precision} digits",datetime_offset:'${path} must be a valid ISO date-time with UTC "Z" timezone',trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},As={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},Um={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},eL={isValue:"${path} field must be ${value}"},Zd={noUnknown:"${path} field has unspecified keys: ${unknown}",exact:"${path} object contains unknown properties: ${properties}"},Jd={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},tL={notType:n=>{const{path:e,value:t,spec:r}=n,i=r.types.length;if(Array.isArray(t)){if(t.length<i)return`${e} tuple value has too few items, expected a length of ${i} but got ${t.length} for value: \`${Qi(t,!0)}\``;if(t.length>i)return`${e} tuple value has too many items, expected a length of ${i} but got ${t.length} for value: \`${Qi(t,!0)}\``}return zn.formatError(mi.notType,n)}};Object.assign(Object.create(null),{mixed:mi,string:rr,number:As,date:Um,object:Zd,array:Jd,boolean:eL,tuple:tL});const nf=n=>n&&n.__isYupSchema__;class bh{static fromOptions(e,t){if(!t.then&&!t.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:r,then:i,otherwise:s}=t,o=typeof r=="function"?r:(...l)=>l.every(c=>c===r);return new bh(e,(l,c)=>{var d;let h=o(...l)?i:s;return(d=h?.(c))!=null?d:c})}constructor(e,t){this.fn=void 0,this.refs=e,this.refs=e,this.fn=t}resolve(e,t){let r=this.refs.map(s=>s.getValue(t?.value,t?.parent,t?.context)),i=this.fn(r,e,t);if(i===void 0||i===e)return e;if(!nf(i))throw new TypeError("conditions must return a schema object");return i.resolve(t)}}const Ed={context:"$",value:"."};class Vo{constructor(e,t={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,typeof e!="string")throw new TypeError("ref must be a string, got: "+e);if(this.key=e.trim(),e==="")throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===Ed.context,this.isValue=this.key[0]===Ed.value,this.isSibling=!this.isContext&&!this.isValue;let r=this.isContext?Ed.context:this.isValue?Ed.value:"";this.path=this.key.slice(r.length),this.getter=this.path&&Ro.getter(this.path,!0),this.map=t.map}getValue(e,t,r){let i=this.isContext?r:this.isValue?e:t;return this.getter&&(i=this.getter(i||{})),this.map&&(i=this.map(i)),i}cast(e,t){return this.getValue(e,t?.parent,t?.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(e){return e&&e.__isYupRef}}Vo.prototype.__isYupRef=!0;const Wi=n=>n==null;function Ca(n){function e({value:t,path:r="",options:i,originalValue:s,schema:o},l,c){const{name:d,test:h,params:p,message:g,skipAbsent:v}=n;let{parent:y,context:_,abortEarly:w=o.spec.abortEarly,disableStackTrace:x=o.spec.disableStackTrace}=i;const C={value:t,parent:y,context:_};function T(V={}){const ee=wT(Object.assign({value:t,originalValue:s,label:o.spec.label,path:V.path||r,spec:o.spec,disableStackTrace:V.disableStackTrace||x},p,V.params),C),re=new zn(zn.formatError(V.message||g,ee),t,ee.path,V.type||d,ee.disableStackTrace);return re.params=ee,re}const R=w?l:c;let D={path:r,parent:y,type:d,from:i.from,createError:T,resolve(V){return ST(V,C)},options:i,originalValue:s,schema:o};const O=V=>{zn.isError(V)?R(V):V?c(null):R(T())},M=V=>{zn.isError(V)?R(V):l(V)};if(v&&Wi(t))return O(!0);let F;try{var z;if(F=h.call(D,t,D),typeof((z=F)==null?void 0:z.then)=="function"){if(i.sync)throw new Error(`Validation test of type: "${D.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`);return Promise.resolve(F).then(O,M)}}catch(V){M(V);return}O(F)}return e.OPTIONS=n,e}function wT(n,e){if(!n)return n;for(const t of Object.keys(n))n[t]=ST(n[t],e);return n}function ST(n,e){return Vo.isRef(n)?n.getValue(e.value,e.parent,e.context):n}function nL(n,e,t,r=t){let i,s,o;return e?(Ro.forEach(e,(l,c,d)=>{let h=c?l.slice(1,l.length-1):l;n=n.resolve({context:r,parent:i,value:t});let p=n.type==="tuple",g=d?parseInt(h,10):0;if(n.innerType||p){if(p&&!d)throw new Error(`Yup.reach cannot implicitly index into a tuple type. the path part "${o}" must contain an index to the tuple element, e.g. "${o}[0]"`);if(t&&g>=t.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${l}, in the path: ${e}. because there is no value at that index. `);i=t,t=t&&t[g],n=p?n.spec.types[g]:n.innerType}if(!d){if(!n.fields||!n.fields[h])throw new Error(`The schema does not contain the path: ${e}. (failed at: ${o} which is a type: "${n.type}")`);i=t,t=t&&t[h],n=n.fields[h]}s=h,o=c?"["+l+"]":"."+l}),{schema:n,parent:i,parentPath:s}):{parent:i,parentPath:e,schema:n}}class _h extends Set{describe(){const e=[];for(const t of this.values())e.push(Vo.isRef(t)?t.describe():t);return e}resolveAll(e){let t=[];for(const r of this.values())t.push(e(r));return t}clone(){return new _h(this.values())}merge(e,t){const r=this.clone();return e.forEach(i=>r.add(i)),t.forEach(i=>r.delete(i)),r}}function Ia(n,e=new Map){if(nf(n)||!n||typeof n!="object")return n;if(e.has(n))return e.get(n);let t;if(n instanceof Date)t=new Date(n.getTime()),e.set(n,t);else if(n instanceof RegExp)t=new RegExp(n),e.set(n,t);else if(Array.isArray(n)){t=new Array(n.length),e.set(n,t);for(let r=0;r<n.length;r++)t[r]=Ia(n[r],e)}else if(n instanceof Map){t=new Map,e.set(n,t);for(const[r,i]of n.entries())t.set(r,Ia(i,e))}else if(n instanceof Set){t=new Set,e.set(n,t);for(const r of n)t.add(Ia(r,e))}else if(n instanceof Object){t={},e.set(n,t);for(const[r,i]of Object.entries(n))t[r]=Ia(i,e)}else throw Error(`Unable to clone ${n}`);return t}function rL(n){if(!(n!=null&&n.length))return;const e=[];let t="",r=!1,i=!1;for(let s=0;s<n.length;s++){const o=n[s];if(o==="["&&!i){t&&(e.push(...t.split(".").filter(Boolean)),t=""),r=!0;continue}if(o==="]"&&!i){t&&(/^\d+$/.test(t)?e.push(t):e.push(t.replace(/^"|"$/g,"")),t=""),r=!1;continue}if(o==='"'){i=!i;continue}if(o==="."&&!r&&!i){t&&(e.push(t),t="");continue}t+=o}return t&&e.push(...t.split(".").filter(Boolean)),e}function iL(n,e){const t=e?`${e}.${n.path}`:n.path;return n.errors.map(r=>({message:r,path:rL(t)}))}function xT(n,e){var t;if(!((t=n.inner)!=null&&t.length)&&n.errors.length)return iL(n,e);const r=e?`${e}.${n.path}`:n.path;return n.inner.flatMap(i=>xT(i,r))}class Lr{constructor(e){this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new _h,this._blacklist=new _h,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation(()=>{this.typeError(mi.notType)}),this.type=e.type,this._typeCheck=e.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,disableStackTrace:!1,nullable:!1,optional:!0,coerce:!0},e?.spec),this.withMutation(t=>{t.nonNullable()})}get _type(){return this.type}clone(e){if(this._mutate)return e&&Object.assign(this.spec,e),this;const t=Object.create(Object.getPrototypeOf(this));return t.type=this.type,t._typeCheck=this._typeCheck,t._whitelist=this._whitelist.clone(),t._blacklist=this._blacklist.clone(),t.internalTests=Object.assign({},this.internalTests),t.exclusiveTests=Object.assign({},this.exclusiveTests),t.deps=[...this.deps],t.conditions=[...this.conditions],t.tests=[...this.tests],t.transforms=[...this.transforms],t.spec=Ia(Object.assign({},this.spec,e)),t}label(e){let t=this.clone();return t.spec.label=e,t}meta(...e){if(e.length===0)return this.spec.meta;let t=this.clone();return t.spec.meta=Object.assign(t.spec.meta||{},e[0]),t}withMutation(e){let t=this._mutate;this._mutate=!0;let r=e(this);return this._mutate=t,r}concat(e){if(!e||e===this)return this;if(e.type!==this.type&&this.type!=="mixed")throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${e.type}`);let t=this,r=e.clone();const i=Object.assign({},t.spec,r.spec);return r.spec=i,r.internalTests=Object.assign({},t.internalTests,r.internalTests),r._whitelist=t._whitelist.merge(e._whitelist,e._blacklist),r._blacklist=t._blacklist.merge(e._blacklist,e._whitelist),r.tests=t.tests,r.exclusiveTests=t.exclusiveTests,r.withMutation(s=>{e.tests.forEach(o=>{s.test(o.OPTIONS)})}),r.transforms=[...t.transforms,...r.transforms],r}isType(e){return e==null?!!(this.spec.nullable&&e===null||this.spec.optional&&e===void 0):this._typeCheck(e)}resolve(e){let t=this;if(t.conditions.length){let r=t.conditions;t=t.clone(),t.conditions=[],t=r.reduce((i,s)=>s.resolve(i,e),t),t=t.resolve(e)}return t}resolveOptions(e){var t,r,i,s;return Object.assign({},e,{from:e.from||[],strict:(t=e.strict)!=null?t:this.spec.strict,abortEarly:(r=e.abortEarly)!=null?r:this.spec.abortEarly,recursive:(i=e.recursive)!=null?i:this.spec.recursive,disableStackTrace:(s=e.disableStackTrace)!=null?s:this.spec.disableStackTrace})}cast(e,t={}){let r=this.resolve(Object.assign({},t,{value:e})),i=t.assert==="ignore-optionality",s=r._cast(e,t);if(t.assert!==!1&&!r.isType(s)){if(i&&Wi(s))return s;let o=Qi(e),l=Qi(s);throw new TypeError(`The value of ${t.path||"field"} could not be cast to a value that satisfies the schema type: "${r.type}". 

attempted value: ${o} 
`+(l!==o?`result of cast: ${l}`:""))}return s}_cast(e,t){let r=e===void 0?e:this.transforms.reduce((i,s)=>s.call(this,i,e,this,t),e);return r===void 0&&(r=this.getDefault(t)),r}_validate(e,t={},r,i){let{path:s,originalValue:o=e,strict:l=this.spec.strict}=t,c=e;l||(c=this._cast(c,Object.assign({assert:!1},t)));let d=[];for(let h of Object.values(this.internalTests))h&&d.push(h);this.runTests({path:s,value:c,originalValue:o,options:t,tests:d},r,h=>{if(h.length)return i(h,c);this.runTests({path:s,value:c,originalValue:o,options:t,tests:this.tests},r,i)})}runTests(e,t,r){let i=!1,{tests:s,value:o,originalValue:l,path:c,options:d}=e,h=_=>{i||(i=!0,t(_,o))},p=_=>{i||(i=!0,r(_,o))},g=s.length,v=[];if(!g)return p([]);let y={value:o,originalValue:l,path:c,options:d,schema:this};for(let _=0;_<s.length;_++){const w=s[_];w(y,h,function(C){C&&(Array.isArray(C)?v.push(...C):v.push(C)),--g<=0&&p(v)})}}asNestedTest({key:e,index:t,parent:r,parentPath:i,originalParent:s,options:o}){const l=e??t;if(l==null)throw TypeError("Must include `key` or `index` for nested validations");const c=typeof l=="number";let d=r[l];const h=Object.assign({},o,{strict:!0,parent:r,value:d,originalValue:s[l],key:void 0,[c?"index":"key"]:l,path:c||l.includes(".")?`${i||""}[${c?l:`"${l}"`}]`:(i?`${i}.`:"")+e});return(p,g,v)=>this.resolve(h)._validate(d,h,g,v)}validate(e,t){var r;let i=this.resolve(Object.assign({},t,{value:e})),s=(r=t?.disableStackTrace)!=null?r:i.spec.disableStackTrace;return new Promise((o,l)=>i._validate(e,t,(c,d)=>{zn.isError(c)&&(c.value=d),l(c)},(c,d)=>{c.length?l(new zn(c,d,void 0,void 0,s)):o(d)}))}validateSync(e,t){var r;let i=this.resolve(Object.assign({},t,{value:e})),s,o=(r=t?.disableStackTrace)!=null?r:i.spec.disableStackTrace;return i._validate(e,Object.assign({},t,{sync:!0}),(l,c)=>{throw zn.isError(l)&&(l.value=c),l},(l,c)=>{if(l.length)throw new zn(l,e,void 0,void 0,o);s=c}),s}isValid(e,t){return this.validate(e,t).then(()=>!0,r=>{if(zn.isError(r))return!1;throw r})}isValidSync(e,t){try{return this.validateSync(e,t),!0}catch(r){if(zn.isError(r))return!1;throw r}}_getDefault(e){let t=this.spec.default;return t==null?t:typeof t=="function"?t.call(this,e):Ia(t)}getDefault(e){return this.resolve(e||{})._getDefault(e)}default(e){return arguments.length===0?this._getDefault():this.clone({default:e})}strict(e=!0){return this.clone({strict:e})}nullability(e,t){const r=this.clone({nullable:e});return r.internalTests.nullable=Ca({message:t,name:"nullable",test(i){return i===null?this.schema.spec.nullable:!0}}),r}optionality(e,t){const r=this.clone({optional:e});return r.internalTests.optionality=Ca({message:t,name:"optionality",test(i){return i===void 0?this.schema.spec.optional:!0}}),r}optional(){return this.optionality(!0)}defined(e=mi.defined){return this.optionality(!1,e)}nullable(){return this.nullability(!0)}nonNullable(e=mi.notNull){return this.nullability(!1,e)}required(e=mi.required){return this.clone().withMutation(t=>t.nonNullable(e).defined(e))}notRequired(){return this.clone().withMutation(e=>e.nullable().optional())}transform(e){let t=this.clone();return t.transforms.push(e),t}test(...e){let t;if(e.length===1?typeof e[0]=="function"?t={test:e[0]}:t=e[0]:e.length===2?t={name:e[0],test:e[1]}:t={name:e[0],message:e[1],test:e[2]},t.message===void 0&&(t.message=mi.default),typeof t.test!="function")throw new TypeError("`test` is a required parameters");let r=this.clone(),i=Ca(t),s=t.exclusive||t.name&&r.exclusiveTests[t.name]===!0;if(t.exclusive&&!t.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return t.name&&(r.exclusiveTests[t.name]=!!t.exclusive),r.tests=r.tests.filter(o=>!(o.OPTIONS.name===t.name&&(s||o.OPTIONS.test===i.OPTIONS.test))),r.tests.push(i),r}when(e,t){!Array.isArray(e)&&typeof e!="string"&&(t=e,e=".");let r=this.clone(),i=vT(e).map(s=>new Vo(s));return i.forEach(s=>{s.isSibling&&r.deps.push(s.key)}),r.conditions.push(typeof t=="function"?new bh(i,t):bh.fromOptions(i,t)),r}typeError(e){let t=this.clone();return t.internalTests.typeError=Ca({message:e,name:"typeError",skipAbsent:!0,test(r){return this.schema._typeCheck(r)?!0:this.createError({params:{type:this.schema.type}})}}),t}oneOf(e,t=mi.oneOf){let r=this.clone();return e.forEach(i=>{r._whitelist.add(i),r._blacklist.delete(i)}),r.internalTests.whiteList=Ca({message:t,name:"oneOf",skipAbsent:!0,test(i){let s=this.schema._whitelist,o=s.resolveAll(this.resolve);return o.includes(i)?!0:this.createError({params:{values:Array.from(s).join(", "),resolved:o}})}}),r}notOneOf(e,t=mi.notOneOf){let r=this.clone();return e.forEach(i=>{r._blacklist.add(i),r._whitelist.delete(i)}),r.internalTests.blacklist=Ca({message:t,name:"notOneOf",test(i){let s=this.schema._blacklist,o=s.resolveAll(this.resolve);return o.includes(i)?this.createError({params:{values:Array.from(s).join(", "),resolved:o}}):!0}}),r}strip(e=!0){let t=this.clone();return t.spec.strip=e,t}describe(e){const t=(e?this.resolve(e):this).clone(),{label:r,meta:i,optional:s,nullable:o}=t.spec;return{meta:i,label:r,optional:s,nullable:o,default:t.getDefault(e),type:t.type,oneOf:t._whitelist.describe(),notOneOf:t._blacklist.describe(),tests:t.tests.filter((c,d,h)=>h.findIndex(p=>p.OPTIONS.name===c.OPTIONS.name)===d).map(c=>{const d=c.OPTIONS.params&&e?wT(Object.assign({},c.OPTIONS.params),e):c.OPTIONS.params;return{name:c.OPTIONS.name,params:d}})}}get"~standard"(){const e=this;return{version:1,vendor:"yup",async validate(r){try{return{value:await e.validate(r,{abortEarly:!1})}}catch(i){if(i instanceof zn)return{issues:xT(i)};throw i}}}}}Lr.prototype.__isYupSchema__=!0;for(const n of["validate","validateSync"])Lr.prototype[`${n}At`]=function(e,t,r={}){const{parent:i,parentPath:s,schema:o}=nL(this,e,t,r.context);return o[n](i&&i[s],Object.assign({},r,{parent:i,path:e}))};for(const n of["equals","is"])Lr.prototype[n]=Lr.prototype.oneOf;for(const n of["not","nope"])Lr.prototype[n]=Lr.prototype.notOneOf;const sL=/^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,.](\d{1,}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;function oL(n){const e=Bm(n);if(!e)return Date.parse?Date.parse(n):Number.NaN;if(e.z===void 0&&e.plusMinus===void 0)return new Date(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond).valueOf();let t=0;return e.z!=="Z"&&e.plusMinus!==void 0&&(t=e.hourOffset*60+e.minuteOffset,e.plusMinus==="+"&&(t=0-t)),Date.UTC(e.year,e.month,e.day,e.hour,e.minute+t,e.second,e.millisecond)}function Bm(n){var e,t;const r=sL.exec(n);return r?{year:Ni(r[1]),month:Ni(r[2],1)-1,day:Ni(r[3],1),hour:Ni(r[4]),minute:Ni(r[5]),second:Ni(r[6]),millisecond:r[7]?Ni(r[7].substring(0,3)):0,precision:(e=(t=r[7])==null?void 0:t.length)!=null?e:void 0,z:r[8]||void 0,plusMinus:r[9]||void 0,hourOffset:Ni(r[10]),minuteOffset:Ni(r[11])}:null}function Ni(n,e=0){return Number(n)||e}let aL=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,lL=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,cL=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,uL="^\\d{4}-\\d{2}-\\d{2}",dL="\\d{2}:\\d{2}:\\d{2}",hL="(([+-]\\d{2}(:?\\d{2})?)|Z)",fL=new RegExp(`${uL}T${dL}(\\.\\d+)?${hL}$`),pL=n=>Wi(n)||n===n.trim(),gL={}.toString();function ir(){return new ET}class ET extends Lr{constructor(){super({type:"string",check(e){return e instanceof String&&(e=e.valueOf()),typeof e=="string"}}),this.withMutation(()=>{this.transform((e,t)=>{if(!this.spec.coerce||this.isType(e)||Array.isArray(e))return e;const r=e!=null&&e.toString?e.toString():e;return r===gL?e:r})})}required(e){return super.required(e).withMutation(t=>t.test({message:e||mi.required,name:"required",skipAbsent:!0,test:r=>!!r.length}))}notRequired(){return super.notRequired().withMutation(e=>(e.tests=e.tests.filter(t=>t.OPTIONS.name!=="required"),e))}length(e,t=rr.length){return this.test({message:t,name:"length",exclusive:!0,params:{length:e},skipAbsent:!0,test(r){return r.length===this.resolve(e)}})}min(e,t=rr.min){return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(r){return r.length>=this.resolve(e)}})}max(e,t=rr.max){return this.test({name:"max",exclusive:!0,message:t,params:{max:e},skipAbsent:!0,test(r){return r.length<=this.resolve(e)}})}matches(e,t){let r=!1,i,s;return t&&(typeof t=="object"?{excludeEmptyString:r=!1,message:i,name:s}=t:i=t),this.test({name:s||"matches",message:i||rr.matches,params:{regex:e},skipAbsent:!0,test:o=>o===""&&r||o.search(e)!==-1})}email(e=rr.email){return this.matches(aL,{name:"email",message:e,excludeEmptyString:!0})}url(e=rr.url){return this.matches(lL,{name:"url",message:e,excludeEmptyString:!0})}uuid(e=rr.uuid){return this.matches(cL,{name:"uuid",message:e,excludeEmptyString:!1})}datetime(e){let t="",r,i;return e&&(typeof e=="object"?{message:t="",allowOffset:r=!1,precision:i=void 0}=e:t=e),this.matches(fL,{name:"datetime",message:t||rr.datetime,excludeEmptyString:!0}).test({name:"datetime_offset",message:t||rr.datetime_offset,params:{allowOffset:r},skipAbsent:!0,test:s=>{if(!s||r)return!0;const o=Bm(s);return o?!!o.z:!1}}).test({name:"datetime_precision",message:t||rr.datetime_precision,params:{precision:i},skipAbsent:!0,test:s=>{if(!s||i==null)return!0;const o=Bm(s);return o?o.precision===i:!1}})}ensure(){return this.default("").transform(e=>e===null?"":e)}trim(e=rr.trim){return this.transform(t=>t!=null?t.trim():t).test({message:e,name:"trim",test:pL})}lowercase(e=rr.lowercase){return this.transform(t=>Wi(t)?t:t.toLowerCase()).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:t=>Wi(t)||t===t.toLowerCase()})}uppercase(e=rr.uppercase){return this.transform(t=>Wi(t)?t:t.toUpperCase()).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:t=>Wi(t)||t===t.toUpperCase()})}}ir.prototype=ET.prototype;let mL=n=>n!=+n;function hn(){return new CT}class CT extends Lr{constructor(){super({type:"number",check(e){return e instanceof Number&&(e=e.valueOf()),typeof e=="number"&&!mL(e)}}),this.withMutation(()=>{this.transform((e,t)=>{if(!this.spec.coerce)return e;let r=e;if(typeof r=="string"){if(r=r.replace(/\s/g,""),r==="")return NaN;r=+r}return this.isType(r)||r===null?r:parseFloat(r)})})}min(e,t=As.min){return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(r){return r>=this.resolve(e)}})}max(e,t=As.max){return this.test({message:t,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(r){return r<=this.resolve(e)}})}lessThan(e,t=As.lessThan){return this.test({message:t,name:"max",exclusive:!0,params:{less:e},skipAbsent:!0,test(r){return r<this.resolve(e)}})}moreThan(e,t=As.moreThan){return this.test({message:t,name:"min",exclusive:!0,params:{more:e},skipAbsent:!0,test(r){return r>this.resolve(e)}})}positive(e=As.positive){return this.moreThan(0,e)}negative(e=As.negative){return this.lessThan(0,e)}integer(e=As.integer){return this.test({name:"integer",message:e,skipAbsent:!0,test:t=>Number.isInteger(t)})}truncate(){return this.transform(e=>Wi(e)?e:e|0)}round(e){var t;let r=["ceil","floor","round","trunc"];if(e=((t=e)==null?void 0:t.toLowerCase())||"round",e==="trunc")return this.truncate();if(r.indexOf(e.toLowerCase())===-1)throw new TypeError("Only valid options for round() are: "+r.join(", "));return this.transform(i=>Wi(i)?i:Math[e](i))}}hn.prototype=CT.prototype;let TT=new Date(""),vL=n=>Object.prototype.toString.call(n)==="[object Date]";function cc(){return new Gc}class Gc extends Lr{constructor(){super({type:"date",check(e){return vL(e)&&!isNaN(e.getTime())}}),this.withMutation(()=>{this.transform((e,t)=>!this.spec.coerce||this.isType(e)||e===null?e:(e=oL(e),isNaN(e)?Gc.INVALID_DATE:new Date(e)))})}prepareParam(e,t){let r;if(Vo.isRef(e))r=e;else{let i=this.cast(e);if(!this._typeCheck(i))throw new TypeError(`\`${t}\` must be a Date or a value that can be \`cast()\` to a Date`);r=i}return r}min(e,t=Um.min){let r=this.prepareParam(e,"min");return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(i){return i>=this.resolve(r)}})}max(e,t=Um.max){let r=this.prepareParam(e,"max");return this.test({message:t,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(i){return i<=this.resolve(r)}})}}Gc.INVALID_DATE=TT;cc.prototype=Gc.prototype;cc.INVALID_DATE=TT;function yL(n,e=[]){let t=[],r=new Set,i=new Set(e.map(([o,l])=>`${o}-${l}`));function s(o,l){let c=Ro.split(o)[0];r.add(c),i.has(`${l}-${c}`)||t.push([l,c])}for(const o of Object.keys(n)){let l=n[o];r.add(o),Vo.isRef(l)&&l.isSibling?s(l.path,o):nf(l)&&"deps"in l&&l.deps.forEach(c=>s(c,o))}return qj.array(Array.from(r),t).reverse()}function zw(n,e){let t=1/0;return n.some((r,i)=>{var s;if((s=e.path)!=null&&s.includes(r))return t=i,!0}),t}function kT(n){return(e,t)=>zw(n,e)-zw(n,t)}const AT=(n,e,t)=>{if(typeof n!="string")return n;let r=n;try{r=JSON.parse(n)}catch{}return t.isType(r)?r:n};function eh(n){if("fields"in n){const e={};for(const[t,r]of Object.entries(n.fields))e[t]=eh(r);return n.setFields(e)}if(n.type==="array"){const e=n.optional();return e.innerType&&(e.innerType=eh(e.innerType)),e}return n.type==="tuple"?n.optional().clone({types:n.spec.types.map(eh)}):"optional"in n?n.optional():n}const bL=(n,e)=>{const t=[...Ro.normalizePath(e)];if(t.length===1)return t[0]in n;let r=t.pop(),i=Ro.getter(Ro.join(t),!0)(n);return!!(i&&r in i)};let $w=n=>Object.prototype.toString.call(n)==="[object Object]";function Ww(n,e){let t=Object.keys(n.fields);return Object.keys(e).filter(r=>t.indexOf(r)===-1)}const _L=kT([]);function qs(n){return new DT(n)}class DT extends Lr{constructor(e){super({type:"object",check(t){return $w(t)||typeof t=="function"}}),this.fields=Object.create(null),this._sortErrors=_L,this._nodes=[],this._excludedEdges=[],this.withMutation(()=>{e&&this.shape(e)})}_cast(e,t={}){var r;let i=super._cast(e,t);if(i===void 0)return this.getDefault(t);if(!this._typeCheck(i))return i;let s=this.fields,o=(r=t.stripUnknown)!=null?r:this.spec.noUnknown,l=[].concat(this._nodes,Object.keys(i).filter(p=>!this._nodes.includes(p))),c={},d=Object.assign({},t,{parent:c,__validating:t.__validating||!1}),h=!1;for(const p of l){let g=s[p],v=p in i,y=i[p];if(g){let _;d.path=(t.path?`${t.path}.`:"")+p,g=g.resolve({value:y,context:t.context,parent:c});let w=g instanceof Lr?g.spec:void 0,x=w?.strict;if(w!=null&&w.strip){h=h||p in i;continue}_=!t.__validating||!x?g.cast(y,d):y,_!==void 0&&(c[p]=_)}else v&&!o&&(c[p]=y);(v!==p in c||c[p]!==y)&&(h=!0)}return h?c:i}_validate(e,t={},r,i){let{from:s=[],originalValue:o=e,recursive:l=this.spec.recursive}=t;t.from=[{schema:this,value:o},...s],t.__validating=!0,t.originalValue=o,super._validate(e,t,r,(c,d)=>{if(!l||!$w(d)){i(c,d);return}o=o||d;let h=[];for(let p of this._nodes){let g=this.fields[p];!g||Vo.isRef(g)||h.push(g.asNestedTest({options:t,key:p,parent:d,parentPath:t.path,originalParent:o}))}this.runTests({tests:h,value:d,originalValue:o,options:t},r,p=>{i(p.sort(this._sortErrors).concat(c),d)})})}clone(e){const t=super.clone(e);return t.fields=Object.assign({},this.fields),t._nodes=this._nodes,t._excludedEdges=this._excludedEdges,t._sortErrors=this._sortErrors,t}concat(e){let t=super.concat(e),r=t.fields;for(let[i,s]of Object.entries(this.fields)){const o=r[i];r[i]=o===void 0?s:o}return t.withMutation(i=>i.setFields(r,[...this._excludedEdges,...e._excludedEdges]))}_getDefault(e){if("default"in this.spec)return super._getDefault(e);if(!this._nodes.length)return;let t={};return this._nodes.forEach(r=>{var i;const s=this.fields[r];let o=e;(i=o)!=null&&i.value&&(o=Object.assign({},o,{parent:o.value,value:o.value[r]})),t[r]=s&&"getDefault"in s?s.getDefault(o):void 0}),t}setFields(e,t){let r=this.clone();return r.fields=e,r._nodes=yL(e,t),r._sortErrors=kT(Object.keys(e)),t&&(r._excludedEdges=t),r}shape(e,t=[]){return this.clone().withMutation(r=>{let i=r._excludedEdges;return t.length&&(Array.isArray(t[0])||(t=[t]),i=[...r._excludedEdges,...t]),r.setFields(Object.assign(r.fields,e),i)})}partial(){const e={};for(const[t,r]of Object.entries(this.fields))e[t]="optional"in r&&r.optional instanceof Function?r.optional():r;return this.setFields(e)}deepPartial(){return eh(this)}pick(e){const t={};for(const r of e)this.fields[r]&&(t[r]=this.fields[r]);return this.setFields(t,this._excludedEdges.filter(([r,i])=>e.includes(r)&&e.includes(i)))}omit(e){const t=[];for(const r of Object.keys(this.fields))e.includes(r)||t.push(r);return this.pick(t)}from(e,t,r){let i=Ro.getter(e,!0);return this.transform(s=>{if(!s)return s;let o=s;return bL(s,e)&&(o=Object.assign({},s),r||delete o[e],o[t]=i(s)),o})}json(){return this.transform(AT)}exact(e){return this.test({name:"exact",exclusive:!0,message:e||Zd.exact,test(t){if(t==null)return!0;const r=Ww(this.schema,t);return r.length===0||this.createError({params:{properties:r.join(", ")}})}})}stripUnknown(){return this.clone({noUnknown:!0})}noUnknown(e=!0,t=Zd.noUnknown){typeof e!="boolean"&&(t=e,e=!0);let r=this.test({name:"noUnknown",exclusive:!0,message:t,test(i){if(i==null)return!0;const s=Ww(this.schema,i);return!e||s.length===0||this.createError({params:{unknown:s.join(", ")}})}});return r.spec.noUnknown=e,r}unknown(e=!0,t=Zd.noUnknown){return this.noUnknown(!e,t)}transformKeys(e){return this.transform(t=>{if(!t)return t;const r={};for(const i of Object.keys(t))r[e(i)]=t[i];return r})}camelCase(){return this.transformKeys(Mg.camelCase)}snakeCase(){return this.transformKeys(Mg.snakeCase)}constantCase(){return this.transformKeys(e=>Mg.snakeCase(e).toUpperCase())}describe(e){const t=(e?this.resolve(e):this).clone(),r=super.describe(e);r.fields={};for(const[s,o]of Object.entries(t.fields)){var i;let l=e;(i=l)!=null&&i.value&&(l=Object.assign({},l,{parent:l.value,value:l.value[s]})),r.fields[s]=o.describe(l)}return r}}qs.prototype=DT.prototype;function RT(n){return new OT(n)}class OT extends Lr{constructor(e){super({type:"array",spec:{types:e},check(t){return Array.isArray(t)}}),this.innerType=void 0,this.innerType=e}_cast(e,t){const r=super._cast(e,t);if(!this._typeCheck(r)||!this.innerType)return r;let i=!1;const s=r.map((o,l)=>{const c=this.innerType.cast(o,Object.assign({},t,{path:`${t.path||""}[${l}]`,parent:r,originalValue:o,value:o,index:l}));return c!==o&&(i=!0),c});return i?s:r}_validate(e,t={},r,i){var s;let o=this.innerType,l=(s=t.recursive)!=null?s:this.spec.recursive;t.originalValue!=null&&t.originalValue,super._validate(e,t,r,(c,d)=>{var h;if(!l||!o||!this._typeCheck(d)){i(c,d);return}let p=new Array(d.length);for(let v=0;v<d.length;v++){var g;p[v]=o.asNestedTest({options:t,index:v,parent:d,parentPath:t.path,originalParent:(g=t.originalValue)!=null?g:e})}this.runTests({value:d,tests:p,originalValue:(h=t.originalValue)!=null?h:e,options:t},r,v=>i(v.concat(c),d))})}clone(e){const t=super.clone(e);return t.innerType=this.innerType,t}json(){return this.transform(AT)}concat(e){let t=super.concat(e);return t.innerType=this.innerType,e.innerType&&(t.innerType=t.innerType?t.innerType.concat(e.innerType):e.innerType),t}of(e){let t=this.clone();if(!nf(e))throw new TypeError("`array.of()` sub-schema must be a valid yup schema not: "+Qi(e));return t.innerType=e,t.spec=Object.assign({},t.spec,{types:e}),t}length(e,t=Jd.length){return this.test({message:t,name:"length",exclusive:!0,params:{length:e},skipAbsent:!0,test(r){return r.length===this.resolve(e)}})}min(e,t){return t=t||Jd.min,this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(r){return r.length>=this.resolve(e)}})}max(e,t){return t=t||Jd.max,this.test({message:t,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(r){return r.length<=this.resolve(e)}})}ensure(){return this.default(()=>[]).transform((e,t)=>this._typeCheck(e)?e:t==null?[]:[].concat(t))}compact(e){let t=e?(r,i,s)=>!e(r,i,s):r=>!!r;return this.transform(r=>r!=null?r.filter(t):r)}describe(e){const t=(e?this.resolve(e):this).clone(),r=super.describe(e);if(t.innerType){var i;let s=e;(i=s)!=null&&i.value&&(s=Object.assign({},s,{parent:s.value,value:s.value[0]})),r.innerType=t.innerType.describe(s)}return r}}RT.prototype=OT.prototype;const Ht=ir().required("This field is required");hn().required("This field is required").min(0,"Value must be at least 0");const pi=hn().nullable().transform(n=>isNaN(n)?null:n).min(0,"Value must be at least 0"),wL=n=>n.bag_width&&n.bag_step?n.bag_width>=n.bag_step:!0,SL=qs({machine_name:Ht.min(2,"Machine name must be at least 2 characters").max(100,"Machine name must be at most 100 characters").matches(/^[a-zA-Z0-9\s\-_]+$/,"Machine name can only contain letters, numbers, spaces, hyphens, and underscores"),machine_type:Ht,department:Ht.oneOf(["STAMPA","CONFEZIONAMENTO"],"Invalid department"),work_center:Ht.oneOf(["ZANICA","BUSTO_GAROLFO"],"Invalid work center"),status:Ht.oneOf(["ACTIVE","INACTIVE"],"Invalid status"),min_web_width:pi,max_web_width:pi,min_bag_height:pi,max_bag_height:pi,standard_speed:pi,setup_time_standard:pi,changeover_color:pi,changeover_material:pi,active_shifts:RT().of(ir().oneOf(["T1","T2","T3"]))}).test("web-width-logic","Minimum web width cannot exceed maximum web width",function(n){return n.min_web_width&&n.max_web_width?n.min_web_width<=n.max_web_width:!0}).test("bag-height-logic","Minimum bag height cannot exceed maximum bag height",function(n){return n.min_bag_height&&n.max_bag_height?n.min_bag_height<=n.max_bag_height:!0}),xL=qs({name:Ht.min(2,"Phase name must be at least 2 characters").max(100,"Phase name must be at most 100 characters"),department:Ht.oneOf(["STAMPA","CONFEZIONAMENTO"],"Invalid department"),work_center:Ht.oneOf(["ZANICA","BUSTO_GAROLFO"],"Invalid work center"),numero_persone:hn().required("Number of people is required").min(1,"Number of people must be at least 1"),bag_width:pi,bag_step:pi,v_stampa:hn().nullable().transform(n=>isNaN(n)?null:n).when("department",{is:"STAMPA",then:n=>n.min(0,"Printing speed must be greater than 0")}),t_setup_stampa:hn().nullable().transform(n=>isNaN(n)?null:n).when("department",{is:"STAMPA",then:n=>n.min(0,"Setup time cannot be negative")}),costo_h_stampa:hn().nullable().transform(n=>isNaN(n)?null:n).when("department",{is:"STAMPA",then:n=>n.min(0,"Hourly cost cannot be negative")}),v_conf:hn().nullable().transform(n=>isNaN(n)?null:n).when("department",{is:"CONFEZIONAMENTO",then:n=>n.min(0,"Packaging speed must be greater than 0")}),t_setup_conf:hn().nullable().transform(n=>isNaN(n)?null:n).when("department",{is:"CONFEZIONAMENTO",then:n=>n.min(0,"Setup time cannot be negative")}),costo_h_conf:hn().nullable().transform(n=>isNaN(n)?null:n).when("department",{is:"CONFEZIONAMENTO",then:n=>n.min(0,"Hourly cost cannot be negative")})}).test("bag-width-step-logic","Bag width cannot be less than bag step",wL),Vw=qs({odp_number:Ht.min(1,"Il numero ODP è obbligatorio"),article_code:Ht.min(1,"Il codice articolo è obbligatorio"),work_center:Ht.oneOf(["ZANICA","BUSTO_GAROLFO"],"Seleziona un centro di lavoro valido"),nome_cliente:Ht.min(1,"Il nome del cliente è obbligatorio"),quantity:hn().required("La quantità è obbligatoria").min(0,"La quantità deve essere maggiore o uguale a 0").typeError("La quantità deve essere un numero valido"),delivery_date:cc().required("La data di consegna è obbligatoria").typeError("Inserisci una data di consegna valida"),customer_order_ref:Ht.min(1,"Il riferimento ordine cliente è obbligatorio"),department:Ht.oneOf(["STAMPA","CONFEZIONAMENTO"],"Seleziona un reparto valido"),status:ir().oneOf(["NOT SCHEDULED","SCHEDULED","IN PROGRESS","COMPLETED","CANCELLED"],"Stato non valido").default("NOT SCHEDULED"),quantity_completed:hn().min(0,"La quantità completata deve essere maggiore o uguale a 0").default(0),production_lot:ir().nullable(),description:ir().nullable(),bag_height:hn().nullable().transform(n=>isNaN(n)?null:n).min(0,"L'altezza busta deve essere maggiore o uguale a 0"),bag_width:hn().nullable().transform(n=>isNaN(n)?null:n).min(0,"La larghezza busta deve essere maggiore o uguale a 0"),bag_step:hn().nullable().transform(n=>isNaN(n)?null:n).min(0,"Il passo busta deve essere maggiore o uguale a 0"),seal_sides:hn().nullable().transform(n=>isNaN(n)?null:n).oneOf([3,4],"I lati di sigillatura devono essere 3 o 4"),product_type:ir().nullable().oneOf(["CREMA","LIQUIDO","POLVERI"],"Seleziona un tipo di prodotto valido"),internal_customer_code:ir().nullable().test("not-empty-if-provided","Il codice cliente interno non può essere vuoto",function(n){return!n||n.trim().length>0}),external_customer_code:ir().nullable().test("not-empty-if-provided","Il codice cliente esterno non può essere vuoto",function(n){return!n||n.trim().length>0}),fase:ir().nullable(),duration:hn().nullable().transform(n=>isNaN(n)?null:n).min(0,"La durata deve essere maggiore o uguale a 0"),cost:hn().nullable().transform(n=>isNaN(n)?null:n).min(0,"Il costo deve essere maggiore o uguale a 0"),scheduled_start_time:cc().nullable(),scheduled_end_time:cc().nullable(),scheduled_machine_id:ir().nullable(),user_notes:ir().nullable(),asd_notes:ir().nullable(),material_availability_global:hn().nullable().transform(n=>isNaN(n)?null:n).min(0,"Material availability must be between 0 and 100").max(100,"Material availability must be between 0 and 100")}).test("bag-width-step-logic","La larghezza busta non può essere minore del passo busta",function(n){return n.bag_width&&n.bag_step?n.bag_width>=n.bag_step:!0}).test("quantity-completed-logic","La quantità completata non può superare la quantità totale",function(n){return n.quantity&&n.quantity_completed!==void 0?n.quantity_completed<=n.quantity:!0}).test("scheduled-time-order","L'ora di fine programmata deve essere dopo l'ora di inizio",function(n){return n.scheduled_start_time&&n.scheduled_end_time?new Date(n.scheduled_end_time)>new Date(n.scheduled_start_time):!0}).test("scheduling-logic","I campi di programmazione devono essere tutti forniti o tutti nulli",function(n){const e=!!n.scheduled_start_time,t=!!n.scheduled_end_time,r=!!n.scheduled_machine_id;return e&&t&&r||!e&&!t&&!r}),EL=qs({startDate:Ht,startTime:Ht,endDate:Ht,endTime:Ht}).test("date-logic","End date cannot be before start date",function(n){return n.startDate&&n.endDate?new Date(n.startDate)<=new Date(n.endDate):!0}).test("time-logic","End time must be after start time when dates are the same",function(n){return n.startDate&&n.endDate&&n.startDate===n.endDate&&n.startTime&&n.endTime?n.startTime<n.endTime:!0}),CL=qs({email:Ht.email("Please enter a valid email address"),password:Ht.min(6,"Password must be at least 6 characters")}),TL=qs({email:Ht.email("Please enter a valid email address"),password:Ht.min(6,"Password must be at least 6 characters"),confirmPassword:ir().required("Please confirm your password")}).test("passwords-match","Passwords must match",function(n){return n.password===n.confirmPassword}),kL=qs({email:Ht.email("Please enter a valid email address")}),AL=(n,e)=>{try{return e.validateSync(n,{abortEarly:!1}),{isValid:!0,errors:{}}}catch(t){const r={};return t.inner.forEach(i=>{r[i.path]=i.message}),{isValid:!1,errors:r}}},DL={MACHINE:SL,PHASE:xL,ORDER:Vw,BACKLOG:Vw,OFF_TIME:EL,LOGIN:CL,SIGNUP:TL,FORGOT_PASSWORD:kL},RL=()=>{const n=k.useCallback((g,v)=>{const y=DL[v];if(!y)throw new Error(`Unknown schema type: ${v}`);return AL(g,y)},[]),e=k.useCallback(g=>n(g,"MACHINE"),[n]),t=k.useCallback(g=>n(g,"PHASE"),[n]),r=k.useCallback(g=>n(g,"ORDER"),[n]),i=k.useCallback(g=>n(g,"OFF_TIME"),[n]),s=k.useCallback((g,v)=>n(g,v),[n]),o=k.useCallback((g,v)=>{const y={};return v.some(w=>w.scheduled_machine_id===g)&&(y.general="Cannot delete machine with scheduled tasks. Please unschedule all tasks first."),{isValid:Object.keys(y).length===0,errors:y}},[]),l=k.useCallback(g=>{const v={};return g?(g.quantity_completed>0&&(v.general="Cannot delete order that has started production"),g.scheduled_machine_id&&(v.general="Cannot delete scheduled order. Please unschedule first."),{isValid:Object.keys(v).length===0,errors:v}):(v.general="Order is required",{isValid:!1,errors:v})},[]),c=k.useCallback((g,v,y,_)=>{const w={};return g?v?!y||!_?(w.general="Start and end times are required",{isValid:!1,errors:w}):(v.status!=="ACTIVE"&&(w.general=`Machine ${v.machine_name} is not active`),g.scheduled_machine_id&&g.scheduled_machine_id!==v.id&&(w.general="Order is already scheduled on a different machine"),g.fase||(w.general="Order must have a production phase selected"),(!g.quantity||g.quantity<=0)&&(w.general="Order must have a valid quantity"),(!g.duration||g.duration<=0)&&(w.general="Order must have calculated duration"),{isValid:Object.keys(w).length===0,errors:w}):(w.general="Machine is required",{isValid:!1,errors:w}):(w.general="Order is required",{isValid:!1,errors:w})},[]),d=k.useCallback((g,v)=>{const y={};if(!g)return y.general="Please select a production phase",{isValid:!1,errors:y};v.department&&g.department!==v.department&&(y.general=`Selected phase is for ${g.department} department, but order is for ${v.department}`),v.work_center&&g.work_center!==v.work_center&&(y.general=`Selected phase is for ${g.work_center} work center, but order is for ${v.work_center}`);const _=t(g);return _.isValid||Object.assign(y,_.errors),{isValid:Object.keys(y).length===0,errors:y}},[t]),h=k.useCallback((g,v)=>{if(g.status!=="ACTIVE")return!1;const y=g.active_shifts||[];if(y.length===0)return!1;const _=v.getUTCHours();return y.some(x=>{switch(x){case"T1":return _>=6&&_<14;case"T2":return _>=14&&_<22;case"T3":return _>=22||_<6;default:return!1}})},[]),p=k.useCallback(g=>({name:g?.machine_name||"Unknown Machine",type:g?.machine_type||"Unknown Type",department:g?.department||"Unknown Department",workCenter:g?.work_center||"Unknown Work Center",status:g?.status||"UNKNOWN",isActive:g?.status==="ACTIVE"}),[]);return{validate:n,validateMachine:e,validatePhase:t,validateOrder:r,validateOffTime:i,validateAuth:s,validateMachineDeletion:o,validateOrderDeletion:l,validateOrderScheduling:c,validatePhaseSelection:d,isMachineAvailable:h,getMachineDisplayInfo:p}},Ma=sl((n,e)=>({phases:[],getPhases:()=>e().phases,getPhaseById:t=>e().phases.find(r=>r.id===t),setPhases:t=>n({phases:t||[]}),cleanupDuplicatePhases:()=>{const t=e(),r=[],i=new Set;t.phases.forEach(s=>{i.has(s.id)||(i.add(s.id),r.push(s))}),n({phases:r})},reset:()=>n({phases:[]})})),OL=(n,e,t=null)=>{const{entities:r}=Ma(),[i,s]=k.useState(""),[o,l]=k.useState(!1),[c,d]=k.useState(null),[h,p]=k.useState({}),g=k.useRef(null),v=k.useMemo(()=>!r||r.length===0?[]:n||e?r.filter(R=>(!n||R.department===n)&&(!e||R.work_center===e)).filter(R=>R.name.toLowerCase().includes(i.toLowerCase())):[],[i,n,e,r]);k.useEffect(()=>{if(t&&r&&r.length>0&&!c){const T=r.find(R=>R.id===t);T&&(d(T),s(T.name),p({v_stampa:T.v_stampa||null,t_setup_stampa:T.t_setup_stampa||null,costo_h_stampa:T.costo_h_stampa||null,v_conf:T.v_conf||null,t_setup_conf:T.t_setup_conf||null,costo_h_conf:T.costo_h_conf||null}))}},[t,r,c]),k.useEffect(()=>()=>{g.current&&clearTimeout(g.current)},[]);const y=k.useCallback((T,R)=>{const D=R===""?null:parseFloat(R);p(O=>({...O,[T]:D}))},[]),_=k.useCallback((T,R,D)=>{R("fase",T.id),d(T),s(T.name),l(!1),D("fase"),p({v_stampa:T.v_stampa||null,t_setup_stampa:T.t_setup_stampa||null,costo_h_stampa:T.costo_h_stampa||null,v_conf:T.v_conf||null,t_setup_conf:T.t_setup_conf||null,costo_h_conf:T.costo_h_conf||null})},[]),w=k.useCallback(()=>{s(""),d(null),p({})},[]),x=k.useCallback(()=>{g.current&&clearTimeout(g.current),g.current=setTimeout(()=>l(!1),150)},[]);return k.useMemo(()=>({phaseSearch:i,setPhaseSearch:s,isDropdownVisible:o,setIsDropdownVisible:l,selectedPhase:c,setSelectedPhase:d,filteredPhases:v,editablePhaseParams:h,setEditablePhaseParams:p,handlePhaseParamChange:y,handlePhaseSelect:_,resetPhaseData:w,handleBlur:x,blurTimeoutRef:g}),[i,o,c,v,h,p,y,_,w,x])},IL={APP:{FIRST_DAY_OF_WEEK:1}},ML=Object.prototype.toString;function NL(n,e){return ML.call(n)===`[object ${e}]`}function IT(n){return NL(n,"Object")}function Vv(n){return!!(n&&n.then&&typeof n.then=="function")}function PL(n){return typeof n=="number"&&n!==n}function Cd(n){return n&&n.Math==Math?n:void 0}const kn=typeof globalThis=="object"&&Cd(globalThis)||typeof window=="object"&&Cd(window)||typeof self=="object"&&Cd(self)||typeof global=="object"&&Cd(global)||(function(){return this})()||{};function MT(n,e,t){const r=t||kn,i=r.__SENTRY__=r.__SENTRY__||{};return i[n]||(i[n]=e())}const NT=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,jL="Sentry Logger ",qw=["debug","info","warn","error","log","assert","trace"],Gw={};function PT(n){if(!("console"in kn))return n();const e=kn.console,t={},r=Object.keys(Gw);r.forEach(i=>{const s=Gw[i];t[i]=e[i],e[i]=s});try{return n()}finally{r.forEach(i=>{e[i]=t[i]})}}function LL(){let n=!1;const e={enable:()=>{n=!0},disable:()=>{n=!1},isEnabled:()=>n};return NT?qw.forEach(t=>{e[t]=(...r)=>{n&&PT(()=>{kn.console[t](`${jL}[${t}]:`,...r)})}}):qw.forEach(t=>{e[t]=()=>{}}),e}const zt=LL();function Xr(n){return Hm(n,new Map)}function Hm(n,e){if(FL(n)){const t=e.get(n);if(t!==void 0)return t;const r={};e.set(n,r);for(const i of Object.keys(n))typeof n[i]<"u"&&(r[i]=Hm(n[i],e));return r}if(Array.isArray(n)){const t=e.get(n);if(t!==void 0)return t;const r=[];return e.set(n,r),n.forEach(i=>{r.push(Hm(i,e))}),r}return n}function FL(n){if(!IT(n))return!1;try{const e=Object.getPrototypeOf(n).constructor.name;return!e||e==="Object"}catch{return!0}}const Ng="<anonymous>";function UL(n){try{return!n||typeof n!="function"?Ng:n.name||Ng}catch{return Ng}}const th={},Yw={};function jT(n,e){th[n]=th[n]||[],th[n].push(e)}function LT(n,e){Yw[n]||(e(),Yw[n]=!0)}function FT(n,e){const t=n&&th[n];if(t)for(const r of t)try{r(e)}catch(i){NT&&zt.error(`Error while triggering instrumentation handler.
Type: ${n}
Name: ${UL(r)}
Error:`,i)}}function cr(){const n=kn,e=n.crypto||n.msCrypto;let t=()=>Math.random()*16;try{if(e&&e.randomUUID)return e.randomUUID().replace(/-/g,"");e&&e.getRandomValues&&(t=()=>{const r=new Uint8Array(1);return e.getRandomValues(r),r[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,r=>(r^(t()&15)>>r/4).toString(16))}function BL(n){return Array.isArray(n)?n:[n]}let Td=null;function HL(n){const e="error";jT(e,n),LT(e,zL)}function zL(){Td=kn.onerror,kn.onerror=function(n,e,t,r,i){return FT("error",{column:r,error:i,line:t,msg:n,url:e}),Td&&!Td.__SENTRY_LOADER__?Td.apply(this,arguments):!1},kn.onerror.__SENTRY_INSTRUMENTED__=!0}let kd=null;function $L(n){const e="unhandledrejection";jT(e,n),LT(e,WL)}function WL(){kd=kn.onunhandledrejection,kn.onunhandledrejection=function(n){return FT("unhandledrejection",n),kd&&!kd.__SENTRY_LOADER__?kd.apply(this,arguments):!0},kn.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}function VL(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function qL(){return!VL()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function ko(n,e){return n.require(e)}function GL(n){let e;try{e=ko(module,n)}catch{}try{const{cwd:t}=ko(module,"process");e=ko(module,`${t()}/node_modules/${n}`)}catch{}return e}var Ui;(function(n){n[n.PENDING=0]="PENDING";const t=1;n[n.RESOLVED=t]="RESOLVED";const r=2;n[n.REJECTED=r]="REJECTED"})(Ui||(Ui={}));class Ds{constructor(e){Ds.prototype.__init.call(this),Ds.prototype.__init2.call(this),Ds.prototype.__init3.call(this),Ds.prototype.__init4.call(this),this._state=Ui.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(t){this._reject(t)}}then(e,t){return new Ds((r,i)=>{this._handlers.push([!1,s=>{if(!e)r(s);else try{r(e(s))}catch(o){i(o)}},s=>{if(!t)i(s);else try{r(t(s))}catch(o){i(o)}}]),this._executeHandlers()})}catch(e){return this.then(t=>t,e)}finally(e){return new Ds((t,r)=>{let i,s;return this.then(o=>{s=!1,i=o,e&&e()},o=>{s=!0,i=o,e&&e()}).then(()=>{if(s){r(i);return}t(i)})})}__init(){this._resolve=e=>{this._setResult(Ui.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(Ui.REJECTED,e)}}__init3(){this._setResult=(e,t)=>{if(this._state===Ui.PENDING){if(Vv(t)){t.then(this._resolve,this._reject);return}this._state=e,this._value=t,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===Ui.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach(t=>{t[0]||(this._state===Ui.RESOLVED&&t[1](this._value),this._state===Ui.REJECTED&&t[2](this._value),t[0]=!0)})}}}const UT=1e3;function qv(){return Date.now()/UT}function YL(){const{performance:n}=kn;if(!n||!n.now)return qv;const e=Date.now()-n.now(),t=n.timeOrigin==null?e:n.timeOrigin;return()=>(t+n.now())/UT}const rf=YL();(()=>{const{performance:n}=kn;if(!n||!n.now)return;const e=3600*1e3,t=n.now(),r=Date.now(),i=n.timeOrigin?Math.abs(n.timeOrigin+t-r):e,s=i<e,o=n.timing&&n.timing.navigationStart,c=typeof o=="number"?Math.abs(o+t-r):e,d=c<e;return s||d?i<=c?n.timeOrigin:o:r})();function KL(n=cr(),e=cr().substring(16),t){let r="";return t!==void 0&&(r=t?"-1":"-0"),`${n}-${e}${r}`}const Sn=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,BT="production";function QL(){return MT("globalEventProcessors",()=>[])}function zm(n,e,t,r=0){return new Ds((i,s)=>{const o=n[r];if(e===null||typeof o!="function")i(e);else{const l=o({...e},t);Sn&&o.id&&l===null&&zt.log(`Event processor "${o.id}" dropped event`),Vv(l)?l.then(c=>zm(n,c,t,r+1).then(i)).then(null,s):zm(n,l,t,r+1).then(i).then(null,s)}})}function XL(n){const e=rf(),t={sid:cr(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>JL(t)};return n&&sf(t,n),t}function sf(n,e={}){if(e.user&&(!n.ipAddress&&e.user.ip_address&&(n.ipAddress=e.user.ip_address),!n.did&&!e.did&&(n.did=e.user.id||e.user.email||e.user.username)),n.timestamp=e.timestamp||rf(),e.abnormal_mechanism&&(n.abnormal_mechanism=e.abnormal_mechanism),e.ignoreDuration&&(n.ignoreDuration=e.ignoreDuration),e.sid&&(n.sid=e.sid.length===32?e.sid:cr()),e.init!==void 0&&(n.init=e.init),!n.did&&e.did&&(n.did=`${e.did}`),typeof e.started=="number"&&(n.started=e.started),n.ignoreDuration)n.duration=void 0;else if(typeof e.duration=="number")n.duration=e.duration;else{const t=n.timestamp-n.started;n.duration=t>=0?t:0}e.release&&(n.release=e.release),e.environment&&(n.environment=e.environment),!n.ipAddress&&e.ipAddress&&(n.ipAddress=e.ipAddress),!n.userAgent&&e.userAgent&&(n.userAgent=e.userAgent),typeof e.errors=="number"&&(n.errors=e.errors),e.status&&(n.status=e.status)}function ZL(n,e){let t={};n.status==="ok"&&(t={status:"exited"}),sf(n,t)}function JL(n){return Xr({sid:`${n.sid}`,init:n.init,started:new Date(n.started*1e3).toISOString(),timestamp:new Date(n.timestamp*1e3).toISOString(),status:n.status,errors:n.errors,did:typeof n.did=="number"||typeof n.did=="string"?`${n.did}`:void 0,duration:n.duration,abnormal_mechanism:n.abnormal_mechanism,attrs:{release:n.release,environment:n.environment,ip_address:n.ipAddress,user_agent:n.userAgent}})}const e2=0,HT=1;function Gv(n){const{spanId:e,traceId:t}=n.spanContext(),{data:r,op:i,parent_span_id:s,status:o,tags:l,origin:c}=Bs(n);return Xr({data:r,op:i,parent_span_id:s,span_id:e,status:o,tags:l,trace_id:t,origin:c})}function zT(n){const{traceId:e,spanId:t}=n.spanContext(),r=WT(n);return KL(e,t,r)}function $T(n){return typeof n=="number"?Kw(n):Array.isArray(n)?n[0]+n[1]/1e9:n instanceof Date?Kw(n.getTime()):rf()}function Kw(n){return n>9999999999?n/1e3:n}function Bs(n){return t2(n)?n.getSpanJSON():typeof n.toJSON=="function"?n.toJSON():{}}function t2(n){return typeof n.getSpanJSON=="function"}function WT(n){const{traceFlags:e}=n.spanContext();return!!(e&HT)}function VT(){return of().getClient()}function n2(){return of().getScope()}function wh(n){return n.transaction}function r2(n,e,t){const r=e.getOptions(),{publicKey:i}=e.getDsn()||{},{segment:s}=t&&t.getUser()||{},o=Xr({environment:r.environment||BT,release:r.release,user_segment:s,public_key:i,trace_id:n});return e.emit&&e.emit("createDsc",o),o}function $m(n){const e=VT();if(!e)return{};const t=r2(Bs(n).trace_id||"",e,n2()),r=wh(n);if(!r)return t;const i=r&&r._frozenDynamicSamplingContext;if(i)return i;const{sampleRate:s,source:o}=r.metadata;s!=null&&(t.sample_rate=`${s}`);const l=Bs(r);return o&&o!=="url"&&(t.transaction=l.description),t.sampled=String(WT(r)),e.emit&&e.emit("createDsc",t),t}function i2(n,e){const{fingerprint:t,span:r,breadcrumbs:i,sdkProcessingMetadata:s}=e;s2(n,e),r&&l2(n,r),c2(n,t),o2(n,i),a2(n,s)}function s2(n,e){const{extra:t,tags:r,user:i,contexts:s,level:o,transactionName:l}=e,c=Xr(t);c&&Object.keys(c).length&&(n.extra={...c,...n.extra});const d=Xr(r);d&&Object.keys(d).length&&(n.tags={...d,...n.tags});const h=Xr(i);h&&Object.keys(h).length&&(n.user={...h,...n.user});const p=Xr(s);p&&Object.keys(p).length&&(n.contexts={...p,...n.contexts}),o&&(n.level=o),l&&(n.transaction=l)}function o2(n,e){const t=[...n.breadcrumbs||[],...e];n.breadcrumbs=t.length?t:void 0}function a2(n,e){n.sdkProcessingMetadata={...n.sdkProcessingMetadata,...e}}function l2(n,e){n.contexts={trace:Gv(e),...n.contexts};const t=wh(e);if(t){n.sdkProcessingMetadata={dynamicSamplingContext:$m(e),...n.sdkProcessingMetadata};const r=Bs(t).description;r&&(n.tags={transaction:r,...n.tags})}}function c2(n,e){n.fingerprint=n.fingerprint?BL(n.fingerprint):[],e&&(n.fingerprint=n.fingerprint.concat(e)),n.fingerprint&&!n.fingerprint.length&&delete n.fingerprint}const u2=100;class La{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=Qw()}static clone(e){return e?e.clone():new La}clone(){const e=new La;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},e._user=this._user,e._level=this._level,e._span=this._span,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e}setClient(e){this._client=e}getClient(){return this._client}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&sf(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return t===null?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this._span;return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const t=typeof e=="function"?e(this):e;if(t instanceof La){const r=t.getScopeData();this._tags={...this._tags,...r.tags},this._extra={...this._extra,...r.extra},this._contexts={...this._contexts,...r.contexts},r.user&&Object.keys(r.user).length&&(this._user=r.user),r.level&&(this._level=r.level),r.fingerprint.length&&(this._fingerprint=r.fingerprint),t.getRequestSession()&&(this._requestSession=t.getRequestSession()),r.propagationContext&&(this._propagationContext=r.propagationContext)}else if(IT(t)){const r=e;this._tags={...this._tags,...r.tags},this._extra={...this._extra,...r.extra},this._contexts={...this._contexts,...r.contexts},r.user&&(this._user=r.user),r.level&&(this._level=r.level),r.fingerprint&&(this._fingerprint=r.fingerprint),r.requestSession&&(this._requestSession=r.requestSession),r.propagationContext&&(this._propagationContext=r.propagationContext)}return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=Qw(),this}addBreadcrumb(e,t){const r=typeof t=="number"?t:u2;if(r<=0)return this;const i={timestamp:qv(),...e},s=this._breadcrumbs;return s.push(i),this._breadcrumbs=s.length>r?s.slice(-r):s,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){const{_breadcrumbs:e,_attachments:t,_contexts:r,_tags:i,_extra:s,_user:o,_level:l,_fingerprint:c,_eventProcessors:d,_propagationContext:h,_sdkProcessingMetadata:p,_transactionName:g,_span:v}=this;return{breadcrumbs:e,attachments:t,contexts:r,tags:i,extra:s,user:o,level:l,fingerprint:c||[],eventProcessors:d,propagationContext:h,sdkProcessingMetadata:p,transactionName:g,span:v}}applyToEvent(e,t={},r=[]){i2(e,this.getScopeData());const i=[...r,...QL(),...this._eventProcessors];return zm(i,e,t)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){const r=t&&t.event_id?t.event_id:cr();if(!this._client)return zt.warn("No client configured on scope - will not capture exception!"),r;const i=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:i,...t,event_id:r},this),r}captureMessage(e,t,r){const i=r&&r.event_id?r.event_id:cr();if(!this._client)return zt.warn("No client configured on scope - will not capture message!"),i;const s=new Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:s,...r,event_id:i},this),i}captureEvent(e,t){const r=t&&t.event_id?t.event_id:cr();return this._client?(this._client.captureEvent(e,{...t,event_id:r},this),r):(zt.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}function Qw(){return{traceId:cr(),spanId:cr().substring(16)}}const d2="7.120.4",qT=parseFloat(d2),h2=100;class GT{constructor(e,t,r,i=qT){this._version=i;let s;t?s=t:(s=new La,s.setClient(e));let o;r?o=r:(o=new La,o.setClient(e)),this._stack=[{scope:s}],e&&this.bindClient(e),this._isolationScope=o}isOlderThan(e){return this._version<e}bindClient(e){const t=this.getStackTop();t.client=e,t.scope.setClient(e),e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return this.getStack().length<=1?!1:!!this.getStack().pop()}withScope(e){const t=this.pushScope();let r;try{r=e(t)}catch(i){throw this.popScope(),i}return Vv(r)?r.then(i=>(this.popScope(),i),i=>{throw this.popScope(),i}):(this.popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,t){const r=this._lastEventId=t&&t.event_id?t.event_id:cr(),i=new Error("Sentry syntheticException");return this.getScope().captureException(e,{originalException:e,syntheticException:i,...t,event_id:r}),r}captureMessage(e,t,r){const i=this._lastEventId=r&&r.event_id?r.event_id:cr(),s=new Error(e);return this.getScope().captureMessage(e,t,{originalException:e,syntheticException:s,...r,event_id:i}),i}captureEvent(e,t){const r=t&&t.event_id?t.event_id:cr();return e.type||(this._lastEventId=r),this.getScope().captureEvent(e,{...t,event_id:r}),r}lastEventId(){return this._lastEventId}addBreadcrumb(e,t){const{scope:r,client:i}=this.getStackTop();if(!i)return;const{beforeBreadcrumb:s=null,maxBreadcrumbs:o=h2}=i.getOptions&&i.getOptions()||{};if(o<=0)return;const c={timestamp:qv(),...e},d=s?PT(()=>s(c,t)):c;d!==null&&(i.emit&&i.emit("beforeAddBreadcrumb",d,t),r.addBreadcrumb(d,o))}setUser(e){this.getScope().setUser(e),this.getIsolationScope().setUser(e)}setTags(e){this.getScope().setTags(e),this.getIsolationScope().setTags(e)}setExtras(e){this.getScope().setExtras(e),this.getIsolationScope().setExtras(e)}setTag(e,t){this.getScope().setTag(e,t),this.getIsolationScope().setTag(e,t)}setExtra(e,t){this.getScope().setExtra(e,t),this.getIsolationScope().setExtra(e,t)}setContext(e,t){this.getScope().setContext(e,t),this.getIsolationScope().setContext(e,t)}configureScope(e){const{scope:t,client:r}=this.getStackTop();r&&e(t)}run(e){const t=Xw(this);try{e(this)}finally{Xw(t)}}getIntegration(e){const t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch{return Sn&&zt.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,t){const r=this._callExtensionMethod("startTransaction",e,t);return Sn&&!r&&(this.getClient()?zt.warn(`Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':
Sentry.addTracingExtensions();
Sentry.init({...});
`):zt.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")),r}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){const t=this.getStackTop().scope,r=t.getSession();r&&ZL(r),this._sendSessionUpdate(),t.setSession()}startSession(e){const{scope:t,client:r}=this.getStackTop(),{release:i,environment:s=BT}=r&&r.getOptions()||{},{userAgent:o}=kn.navigator||{},l=XL({release:i,environment:s,user:t.getUser(),...o&&{userAgent:o},...e}),c=t.getSession&&t.getSession();return c&&c.status==="ok"&&sf(c,{status:"exited"}),this.endSession(),t.setSession(l),l}shouldSendDefaultPii(){const e=this.getClient(),t=e&&e.getOptions();return!!(t&&t.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:t}=this.getStackTop(),r=e.getSession();r&&t&&t.captureSession&&t.captureSession(r)}_callExtensionMethod(e,...t){const i=ol().__SENTRY__;if(i&&i.extensions&&typeof i.extensions[e]=="function")return i.extensions[e].apply(this,t);Sn&&zt.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function ol(){return kn.__SENTRY__=kn.__SENTRY__||{extensions:{},hub:void 0},kn}function Xw(n){const e=ol(),t=Wm(e);return YT(e,n),t}function of(){const n=ol();if(n.__SENTRY__&&n.__SENTRY__.acs){const e=n.__SENTRY__.acs.getCurrentHub();if(e)return e}return f2(n)}function f2(n=ol()){return(!p2(n)||Wm(n).isOlderThan(qT))&&YT(n,new GT),Wm(n)}function p2(n){return!!(n&&n.__SENTRY__&&n.__SENTRY__.hub)}function Wm(n){return MT("hub",()=>new GT,n)}function YT(n,e){if(!n)return!1;const t=n.__SENTRY__=n.__SENTRY__||{};return t.hub=e,!0}function g2(n){return(n||of()).getScope().getTransaction()}let Zw=!1;function m2(){Zw||(Zw=!0,HL(Vm),$L(Vm))}function Vm(){const n=g2();if(n){const e="internal_error";Sn&&zt.log(`[Tracing] Transaction: ${e} -> Global error occured`),n.setStatus(e)}}Vm.tag="sentry_tracingErrorCallback";var Jw;(function(n){n.Ok="ok";const t="deadline_exceeded";n.DeadlineExceeded=t;const r="unauthenticated";n.Unauthenticated=r;const i="permission_denied";n.PermissionDenied=i;const s="not_found";n.NotFound=s;const o="resource_exhausted";n.ResourceExhausted=o;const l="invalid_argument";n.InvalidArgument=l;const c="unimplemented";n.Unimplemented=c;const d="unavailable";n.Unavailable=d;const h="internal_error";n.InternalError=h;const p="unknown_error";n.UnknownError=p;const g="cancelled";n.Cancelled=g;const v="already_exists";n.AlreadyExists=v;const y="failed_precondition";n.FailedPrecondition=y;const _="aborted";n.Aborted=_;const w="out_of_range";n.OutOfRange=w;const x="data_loss";n.DataLoss=x})(Jw||(Jw={}));function v2(n){if(n<400&&n>=100)return"ok";if(n>=400&&n<500)switch(n){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(n>=500&&n<600)switch(n){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}function y2(n,e){n.setTag("http.status_code",String(e)),n.setData("http.response.status_code",e);const t=v2(e);t!=="unknown_error"&&n.setStatus(t)}function b2(n){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const e=VT(),t=n||e&&e.getOptions();return!!t&&(t.enableTracing||"tracesSampleRate"in t||"tracesSampler"in t)}const _2="_sentryScope",w2="_sentryIsolationScope";function S2(n){return{scope:n[_2],isolationScope:n[w2]}}const Pg="sentry.source",Na="sentry.sample_rate",Ad="sentry.op",Dd="sentry.origin",x2="profile_id";class E2{constructor(e=1e3){this._maxlen=e,this.spans=[]}add(e){this.spans.length>this._maxlen?e.spanRecorder=void 0:this.spans.push(e)}}class Yv{constructor(e={}){this._traceId=e.traceId||cr(),this._spanId=e.spanId||cr().substring(16),this._startTime=e.startTimestamp||rf(),this.tags=e.tags?{...e.tags}:{},this.data=e.data?{...e.data}:{},this.instrumenter=e.instrumenter||"sentry",this._attributes={},this.setAttributes({[Dd]:e.origin||"manual",[Ad]:e.op,...e.attributes}),this._name=e.name||e.description,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.status&&(this._status=e.status),e.endTimestamp&&(this._endTime=e.endTimestamp),e.exclusiveTime!==void 0&&(this._exclusiveTime=e.exclusiveTime),this._measurements=e.measurements?{...e.measurements}:{}}get name(){return this._name||""}set name(e){this.updateName(e)}get description(){return this._name}set description(e){this._name=e}get traceId(){return this._traceId}set traceId(e){this._traceId=e}get spanId(){return this._spanId}set spanId(e){this._spanId=e}set parentSpanId(e){this._parentSpanId=e}get parentSpanId(){return this._parentSpanId}get sampled(){return this._sampled}set sampled(e){this._sampled=e}get attributes(){return this._attributes}set attributes(e){this._attributes=e}get startTimestamp(){return this._startTime}set startTimestamp(e){this._startTime=e}get endTimestamp(){return this._endTime}set endTimestamp(e){this._endTime=e}get status(){return this._status}set status(e){this._status=e}get op(){return this._attributes[Ad]}set op(e){this.setAttribute(Ad,e)}get origin(){return this._attributes[Dd]}set origin(e){this.setAttribute(Dd,e)}spanContext(){const{_spanId:e,_traceId:t,_sampled:r}=this;return{spanId:e,traceId:t,traceFlags:r?HT:e2}}startChild(e){const t=new Yv({...e,parentSpanId:this._spanId,sampled:this._sampled,traceId:this._traceId});t.spanRecorder=this.spanRecorder,t.spanRecorder&&t.spanRecorder.add(t);const r=wh(this);if(t.transaction=r,Sn&&r){const i=e&&e.op||"< unknown op >",s=Bs(t).description||"< unknown name >",o=r.spanContext().spanId,l=`[Tracing] Starting '${i}' span on transaction '${s}' (${o}).`;zt.log(l),this._logMessage=l}return t}setTag(e,t){return this.tags={...this.tags,[e]:t},this}setData(e,t){return this.data={...this.data,[e]:t},this}setAttribute(e,t){t===void 0?delete this._attributes[e]:this._attributes[e]=t}setAttributes(e){Object.keys(e).forEach(t=>this.setAttribute(t,e[t]))}setStatus(e){return this._status=e,this}setHttpStatus(e){return y2(this,e),this}setName(e){this.updateName(e)}updateName(e){return this._name=e,this}isSuccess(){return this._status==="ok"}finish(e){return this.end(e)}end(e){if(this._endTime)return;const t=wh(this);if(Sn&&t&&t.spanContext().spanId!==this._spanId){const r=this._logMessage;r&&zt.log(r.replace("Starting","Finishing"))}this._endTime=$T(e)}toTraceparent(){return zT(this)}toContext(){return Xr({data:this._getData(),description:this._name,endTimestamp:this._endTime,op:this.op,parentSpanId:this._parentSpanId,sampled:this._sampled,spanId:this._spanId,startTimestamp:this._startTime,status:this._status,tags:this.tags,traceId:this._traceId})}updateWithContext(e){return this.data=e.data||{},this._name=e.name||e.description,this._endTime=e.endTimestamp,this.op=e.op,this._parentSpanId=e.parentSpanId,this._sampled=e.sampled,this._spanId=e.spanId||this._spanId,this._startTime=e.startTimestamp||this._startTime,this._status=e.status,this.tags=e.tags||{},this._traceId=e.traceId||this._traceId,this}getTraceContext(){return Gv(this)}getSpanJSON(){return Xr({data:this._getData(),description:this._name,op:this._attributes[Ad],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:this._status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[Dd],_metrics_summary:void 0,profile_id:this._attributes[x2],exclusive_time:this._exclusiveTime,measurements:Object.keys(this._measurements).length>0?this._measurements:void 0})}isRecording(){return!this._endTime&&!!this._sampled}toJSON(){return this.getSpanJSON()}_getData(){const{data:e,_attributes:t}=this,r=Object.keys(e).length>0,i=Object.keys(t).length>0;if(!(!r&&!i))return r&&i?{...e,...t}:r?e:t}}class C2 extends Yv{constructor(e,t){super(e),this._contexts={},this._hub=t||of(),this._name=e.name||"",this._metadata={...e.metadata},this._trimEnd=e.trimEnd,this.transaction=this;const r=this._metadata.dynamicSamplingContext;r&&(this._frozenDynamicSamplingContext={...r})}get name(){return this._name}set name(e){this.setName(e)}get metadata(){return{source:"custom",spanMetadata:{},...this._metadata,...this._attributes[Pg]&&{source:this._attributes[Pg]},...this._attributes[Na]&&{sampleRate:this._attributes[Na]}}}set metadata(e){this._metadata=e}setName(e,t="custom"){this._name=e,this.setAttribute(Pg,t)}updateName(e){return this._name=e,this}initSpanRecorder(e=1e3){this.spanRecorder||(this.spanRecorder=new E2(e)),this.spanRecorder.add(this)}setContext(e,t){t===null?delete this._contexts[e]:this._contexts[e]=t}setMeasurement(e,t,r=""){this._measurements[e]={value:t,unit:r}}setMetadata(e){this._metadata={...this._metadata,...e}}end(e){const t=$T(e),r=this._finishTransaction(t);if(r)return this._hub.captureEvent(r)}toContext(){const e=super.toContext();return Xr({...e,name:this._name,trimEnd:this._trimEnd})}updateWithContext(e){return super.updateWithContext(e),this._name=e.name||"",this._trimEnd=e.trimEnd,this}getDynamicSamplingContext(){return $m(this)}setHub(e){this._hub=e}getProfileId(){if(this._contexts!==void 0&&this._contexts.profile!==void 0)return this._contexts.profile.profile_id}_finishTransaction(e){if(this._endTime!==void 0)return;this._name||(Sn&&zt.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>"),super.end(e);const t=this._hub.getClient();if(t&&t.emit&&t.emit("finishTransaction",this),this._sampled!==!0){Sn&&zt.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),t&&t.recordDroppedEvent("sample_rate","transaction");return}const r=this.spanRecorder?this.spanRecorder.spans.filter(h=>h!==this&&Bs(h).timestamp):[];if(this._trimEnd&&r.length>0){const h=r.map(p=>Bs(p).timestamp).filter(Boolean);this._endTime=h.reduce((p,g)=>p>g?p:g)}const{scope:i,isolationScope:s}=S2(this),{metadata:o}=this,{source:l}=o,c={contexts:{...this._contexts,trace:Gv(this)},spans:r,start_timestamp:this._startTime,tags:this.tags,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{...o,capturedSpanScope:i,capturedSpanIsolationScope:s,...Xr({dynamicSamplingContext:$m(this)})},_metrics_summary:void 0,...l&&{transaction_info:{source:l}}};return Object.keys(this._measurements).length>0&&(Sn&&zt.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),c.measurements=this._measurements),Sn&&zt.log(`[Tracing] Finishing ${this.op} transaction: ${this._name}.`),c}}function T2(n,e,t){if(!b2(e))return n.sampled=!1,n;if(n.sampled!==void 0)return n.setAttribute(Na,Number(n.sampled)),n;let r;return typeof e.tracesSampler=="function"?(r=e.tracesSampler(t),n.setAttribute(Na,Number(r))):t.parentSampled!==void 0?r=t.parentSampled:typeof e.tracesSampleRate<"u"?(r=e.tracesSampleRate,n.setAttribute(Na,Number(r))):(r=1,n.setAttribute(Na,r)),k2(r)?r?(n.sampled=Math.random()<r,n.sampled?(Sn&&zt.log(`[Tracing] starting ${n.op} transaction - ${Bs(n).description}`),n):(Sn&&zt.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(r)})`),n)):(Sn&&zt.log(`[Tracing] Discarding transaction because ${typeof e.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),n.sampled=!1,n):(Sn&&zt.warn("[Tracing] Discarding transaction because of invalid sample rate."),n.sampled=!1,n)}function k2(n){return PL(n)||!(typeof n=="number"||typeof n=="boolean")?(Sn&&zt.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(n)} of type ${JSON.stringify(typeof n)}.`),!1):n<0||n>1?(Sn&&zt.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${n}.`),!1):!0}function A2(){const e=this.getScope().getSpan();return e?{"sentry-trace":zT(e)}:{}}function D2(n,e){const t=this.getClient(),r=t&&t.getOptions()||{},i=r.instrumenter||"sentry",s=n.instrumenter||"sentry";i!==s&&(Sn&&zt.error(`A transaction was started with instrumenter=\`${s}\`, but the SDK is configured with the \`${i}\` instrumenter.
The transaction will not be sampled. Please use the ${i} instrumentation to start transactions.`),n.sampled=!1);let o=new C2(n,this);return o=T2(o,r,{name:n.name,parentSampled:n.parentSampled,transactionContext:n,attributes:{...n.data,...n.attributes},...e}),o.isRecording()&&o.initSpanRecorder(r._experiments&&r._experiments.maxSpans),t&&t.emit&&t.emit("startTransaction",o),o}function R2(){const n=ol();n.__SENTRY__&&(n.__SENTRY__.extensions=n.__SENTRY__.extensions||{},n.__SENTRY__.extensions.startTransaction||(n.__SENTRY__.extensions.startTransaction=D2),n.__SENTRY__.extensions.traceHeaders||(n.__SENTRY__.extensions.traceHeaders=A2),m2())}function O2(){const n=ol();if(!n.__SENTRY__)return;const e={mongodb(){const r=ko(module,"./node/integrations/mongo");return new r.Mongo},mongoose(){const r=ko(module,"./node/integrations/mongo");return new r.Mongo},mysql(){const r=ko(module,"./node/integrations/mysql");return new r.Mysql},pg(){const r=ko(module,"./node/integrations/postgres");return new r.Postgres}},t=Object.keys(e).filter(r=>!!GL(r)).map(r=>{try{return e[r]()}catch{return}}).filter(r=>r);t.length>0&&(n.__SENTRY__.integrations=[...n.__SENTRY__.integrations||[],...t])}function I2(){R2(),qL()&&O2()}(typeof __SENTRY_TRACING__>"u"||__SENTRY_TRACING__)&&I2();const He={VALIDATION_ERROR:"VALIDATION_ERROR",NETWORK_ERROR:"NETWORK_ERROR",AUTHENTICATION_ERROR:"AUTHENTICATION_ERROR",AUTHORIZATION_ERROR:"AUTHORIZATION_ERROR",NOT_FOUND_ERROR:"NOT_FOUND_ERROR",SERVER_ERROR:"SERVER_ERROR",BUSINESS_LOGIC_ERROR:"BUSINESS_LOGIC_ERROR",UNKNOWN_ERROR:"UNKNOWN_ERROR"},eS={[He.VALIDATION_ERROR]:"I dati inseriti non sono validi. Controlla i campi evidenziati.",[He.NETWORK_ERROR]:"Errore di connessione. Verifica la tua connessione internet.",[He.AUTHENTICATION_ERROR]:"Sessione scaduta. Effettua nuovamente l'accesso.",[He.AUTHORIZATION_ERROR]:"Non hai i permessi per eseguire questa operazione.",[He.NOT_FOUND_ERROR]:"La risorsa richiesta non è stata trovata.",[He.SERVER_ERROR]:"Errore del server. Riprova più tardi.",[He.BUSINESS_LOGIC_ERROR]:"Operazione non consentita dalle regole di business.",[He.UNKNOWN_ERROR]:"Si è verificato un errore imprevisto."};class Xe extends Error{constructor(e,t=He.UNKNOWN_ERROR,r=500,i={}){super(e),this.name="AppError",this.type=t,this.statusCode=r,this.context=i,this.timestamp=new Date().toISOString(),this.userMessage=eS[t]||eS[He.UNKNOWN_ERROR]}toJSON(){return{message:this.message,type:this.type,statusCode:this.statusCode,context:this.context,timestamp:this.timestamp,userMessage:this.userMessage}}}const KT=6048e5,M2=864e5,N2=36e5,tS=Symbol.for("constructDateFrom");function wi(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&tS in n?n[tS](e):n instanceof Date?new n.constructor(e):new Date(e)}function An(n,e){return wi(e||n,n)}function Yc(n,e,t){const r=An(n,t?.in);return isNaN(e)?wi(n,NaN):(e&&r.setDate(r.getDate()+e),r)}function P2(n,e,t){return wi(n,+An(n)+e)}function nS(n,e,t){return P2(n,e*N2)}let j2={};function af(){return j2}function jo(n,e){const t=af(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,i=An(n,e?.in),s=i.getDay(),o=(s<r?7:0)+s-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function Sh(n,e){return jo(n,{...e,weekStartsOn:1})}function QT(n,e){const t=An(n,e?.in),r=t.getFullYear(),i=wi(t,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const s=Sh(i),o=wi(t,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const l=Sh(o);return t.getTime()>=s.getTime()?r+1:t.getTime()>=l.getTime()?r:r-1}function rS(n){const e=An(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function L2(n,...e){const t=wi.bind(null,e.find(r=>typeof r=="object"));return e.map(t)}function iS(n,e){const t=An(n,e?.in);return t.setHours(0,0,0,0),t}function F2(n,e,t){const[r,i]=L2(t?.in,n,e),s=iS(r),o=iS(i),l=+s-rS(s),c=+o-rS(o);return Math.round((l-c)/M2)}function U2(n,e){const t=QT(n,e),r=wi(n,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Sh(r)}function XT(n,e,t){return Yc(n,e*7,t)}function B2(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function H2(n){return!(!B2(n)&&typeof n!="number"||isNaN(+An(n)))}function z2(n,e){const t=An(n,e?.in),r=t.getFullYear();return t.setFullYear(r+1,0,0),t.setHours(23,59,59,999),t}function ZT(n,e){const t=An(n,e?.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}const $2={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},W2=(n,e,t)=>{let r;const i=$2[n];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function jg(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const V2={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},q2={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},G2={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Y2={date:jg({formats:V2,defaultWidth:"full"}),time:jg({formats:q2,defaultWidth:"full"}),dateTime:jg({formats:G2,defaultWidth:"full"})},K2={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Q2=(n,e,t,r)=>K2[n];function Gl(n){return(e,t)=>{const r=t?.context?String(t.context):"standalone";let i;if(r==="formatting"&&n.formattingValues){const o=n.defaultFormattingWidth||n.defaultWidth,l=t?.width?String(t.width):o;i=n.formattingValues[l]||n.formattingValues[o]}else{const o=n.defaultWidth,l=t?.width?String(t.width):n.defaultWidth;i=n.values[l]||n.values[o]}const s=n.argumentCallback?n.argumentCallback(e):e;return i[s]}}const X2={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Z2={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},J2={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},eF={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},tF={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},nF={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},rF=(n,e)=>{const t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},iF={ordinalNumber:rF,era:Gl({values:X2,defaultWidth:"wide"}),quarter:Gl({values:Z2,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Gl({values:J2,defaultWidth:"wide"}),day:Gl({values:eF,defaultWidth:"wide"}),dayPeriod:Gl({values:tF,defaultWidth:"wide",formattingValues:nF,defaultFormattingWidth:"wide"})};function Yl(n){return(e,t={})=>{const r=t.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],l=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],c=Array.isArray(l)?oF(l,p=>p.test(o)):sF(l,p=>p.test(o));let d;d=n.valueCallback?n.valueCallback(c):c,d=t.valueCallback?t.valueCallback(d):d;const h=e.slice(o.length);return{value:d,rest:h}}}function sF(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function oF(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function aF(n){return(e,t={})=>{const r=e.match(n.matchPattern);if(!r)return null;const i=r[0],s=e.match(n.parsePattern);if(!s)return null;let o=n.valueCallback?n.valueCallback(s[0]):s[0];o=t.valueCallback?t.valueCallback(o):o;const l=e.slice(i.length);return{value:o,rest:l}}}const lF=/^(\d+)(th|st|nd|rd)?/i,cF=/\d+/i,uF={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},dF={any:[/^b/i,/^(a|c)/i]},hF={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},fF={any:[/1/i,/2/i,/3/i,/4/i]},pF={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},gF={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},mF={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},vF={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},yF={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},bF={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},_F={ordinalNumber:aF({matchPattern:lF,parsePattern:cF,valueCallback:n=>parseInt(n,10)}),era:Yl({matchPatterns:uF,defaultMatchWidth:"wide",parsePatterns:dF,defaultParseWidth:"any"}),quarter:Yl({matchPatterns:hF,defaultMatchWidth:"wide",parsePatterns:fF,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Yl({matchPatterns:pF,defaultMatchWidth:"wide",parsePatterns:gF,defaultParseWidth:"any"}),day:Yl({matchPatterns:mF,defaultMatchWidth:"wide",parsePatterns:vF,defaultParseWidth:"any"}),dayPeriod:Yl({matchPatterns:yF,defaultMatchWidth:"any",parsePatterns:bF,defaultParseWidth:"any"})},wF={code:"en-US",formatDistance:W2,formatLong:Y2,formatRelative:Q2,localize:iF,match:_F,options:{weekStartsOn:0,firstWeekContainsDate:1}};function SF(n,e){const t=An(n,e?.in);return F2(t,ZT(t))+1}function xF(n,e){const t=An(n,e?.in),r=+Sh(t)-+U2(t);return Math.round(r/KT)+1}function JT(n,e){const t=An(n,e?.in),r=t.getFullYear(),i=af(),s=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,o=wi(e?.in||n,0);o.setFullYear(r+1,0,s),o.setHours(0,0,0,0);const l=jo(o,e),c=wi(e?.in||n,0);c.setFullYear(r,0,s),c.setHours(0,0,0,0);const d=jo(c,e);return+t>=+l?r+1:+t>=+d?r:r-1}function EF(n,e){const t=af(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??t.firstWeekContainsDate??t.locale?.options?.firstWeekContainsDate??1,i=JT(n,e),s=wi(e?.in||n,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),jo(s,e)}function CF(n,e){const t=An(n,e?.in),r=+jo(t,e)-+EF(t,e);return Math.round(r/KT)+1}function gt(n,e){const t=n<0?"-":"",r=Math.abs(n).toString().padStart(e,"0");return t+r}const Ts={y(n,e){const t=n.getFullYear(),r=t>0?t:1-t;return gt(e==="yy"?r%100:r,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):gt(t+1,2)},d(n,e){return gt(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return gt(n.getHours()%12||12,e.length)},H(n,e){return gt(n.getHours(),e.length)},m(n,e){return gt(n.getMinutes(),e.length)},s(n,e){return gt(n.getSeconds(),e.length)},S(n,e){const t=e.length,r=n.getMilliseconds(),i=Math.trunc(r*Math.pow(10,t-3));return gt(i,e.length)}},Ta={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},sS={G:function(n,e,t){const r=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const r=n.getFullYear(),i=r>0?r:1-r;return t.ordinalNumber(i,{unit:"year"})}return Ts.y(n,e)},Y:function(n,e,t,r){const i=JT(n,r),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return gt(o,2)}return e==="Yo"?t.ordinalNumber(s,{unit:"year"}):gt(s,e.length)},R:function(n,e){const t=QT(n);return gt(t,e.length)},u:function(n,e){const t=n.getFullYear();return gt(t,e.length)},Q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return gt(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return gt(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,e,t){const r=n.getMonth();switch(e){case"M":case"MM":return Ts.M(n,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(n,e,t){const r=n.getMonth();switch(e){case"L":return String(r+1);case"LL":return gt(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(n,e,t,r){const i=CF(n,r);return e==="wo"?t.ordinalNumber(i,{unit:"week"}):gt(i,e.length)},I:function(n,e,t){const r=xF(n);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):gt(r,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):Ts.d(n,e)},D:function(n,e,t){const r=SF(n);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):gt(r,e.length)},E:function(n,e,t){const r=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(n,e,t,r){const i=n.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return gt(s,2);case"eo":return t.ordinalNumber(s,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});case"eeee":default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(n,e,t,r){const i=n.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return gt(s,e.length);case"co":return t.ordinalNumber(s,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});case"cccc":default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(n,e,t){const r=n.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return gt(i,e.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(n,e,t){const i=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(n,e,t){const r=n.getHours();let i;switch(r===12?i=Ta.noon:r===0?i=Ta.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(n,e,t){const r=n.getHours();let i;switch(r>=17?i=Ta.evening:r>=12?i=Ta.afternoon:r>=4?i=Ta.morning:i=Ta.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let r=n.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return Ts.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):Ts.H(n,e)},K:function(n,e,t){const r=n.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):gt(r,e.length)},k:function(n,e,t){let r=n.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):gt(r,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):Ts.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):Ts.s(n,e)},S:function(n,e){return Ts.S(n,e)},X:function(n,e,t){const r=n.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return aS(r);case"XXXX":case"XX":return vo(r);case"XXXXX":case"XXX":default:return vo(r,":")}},x:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"x":return aS(r);case"xxxx":case"xx":return vo(r);case"xxxxx":case"xxx":default:return vo(r,":")}},O:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+oS(r,":");case"OOOO":default:return"GMT"+vo(r,":")}},z:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+oS(r,":");case"zzzz":default:return"GMT"+vo(r,":")}},t:function(n,e,t){const r=Math.trunc(+n/1e3);return gt(r,e.length)},T:function(n,e,t){return gt(+n,e.length)}};function oS(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=Math.trunc(r/60),s=r%60;return s===0?t+String(i):t+String(i)+e+gt(s,2)}function aS(n,e){return n%60===0?(n>0?"-":"+")+gt(Math.abs(n)/60,2):vo(n,e)}function vo(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=gt(Math.trunc(r/60),2),s=gt(r%60,2);return t+i+e+s}const lS=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},ek=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},TF=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],r=t[1],i=t[2];if(!i)return lS(n,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",lS(r,e)).replace("{{time}}",ek(i,e))},kF={p:ek,P:TF},AF=/^D+$/,DF=/^Y+$/,RF=["D","DD","YY","YYYY"];function OF(n){return AF.test(n)}function IF(n){return DF.test(n)}function MF(n,e,t){const r=NF(n,e,t);if(console.warn(r),RF.includes(n))throw new RangeError(r)}function NF(n,e,t){const r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const PF=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,jF=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,LF=/^'([^]*?)'?$/,FF=/''/g,UF=/[a-zA-Z]/;function xn(n,e,t){const r=af(),i=r.locale??wF,s=r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,o=r.weekStartsOn??r.locale?.options?.weekStartsOn??0,l=An(n,t?.in);if(!H2(l))throw new RangeError("Invalid time value");let c=e.match(jF).map(h=>{const p=h[0];if(p==="p"||p==="P"){const g=kF[p];return g(h,i.formatLong)}return h}).join("").match(PF).map(h=>{if(h==="''")return{isToken:!1,value:"'"};const p=h[0];if(p==="'")return{isToken:!1,value:BF(h)};if(sS[p])return{isToken:!0,value:h};if(p.match(UF))throw new RangeError("Format string contains an unescaped latin alphabet character `"+p+"`");return{isToken:!1,value:h}});i.localize.preprocessor&&(c=i.localize.preprocessor(l,c));const d={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return c.map(h=>{if(!h.isToken)return h.value;const p=h.value;(IF(p)||OF(p))&&MF(p,e,String(n));const g=sS[p[0]];return g(l,p,i.localize,d)}).join("")}function BF(n){const e=n.match(LF);return e?e[1].replace(FF,"'"):n}function HF(n,e){return An(n,e?.in).getDay()}function zF(n,e){return+An(n)>+An(e)}function $F(n,e,t){return XT(n,-1,t)}class WF{async init(){try{const{error:e}=await Tt.from("machines").select("count").limit(1);if(e)throw new Xe(`API initialization failed: ${e.message}`,He.SERVER_ERROR,500,e,"API.init");return!0}catch(e){throw e instanceof Xe?e:new Xe(`API initialization failed: ${e.message}`,He.SERVER_ERROR,500,e,"API.init")}}async getMachines(){try{const{data:e,error:t}=await Tt.from("machines").select("*").order("machine_name");if(t)throw t;return e||[]}catch(e){throw new Xe(`Failed to get machines: ${e.message}`,He.SERVER_ERROR,500,e,"API.getMachines")}}async addMachine(e){try{const{data:t,error:r}=await Tt.from("machines").insert([e]).select().single();if(r)throw r;return t}catch(t){throw new Xe(`Failed to add machine: ${cn(t)}`,He.SERVER_ERROR,500,t,"API.addMachine")}}async updateMachine(e,t){try{const{data:r,error:i}=await Tt.from("machines").update(t).eq("id",e).select().single();if(i)throw i;return r}catch(r){throw new Xe(`Failed to update machine: ${cn(r)}`,He.SERVER_ERROR,500,r,"API.updateMachine")}}async removeMachine(e){try{const{error:t}=await Tt.from("machines").delete().eq("id",e);if(t)throw t;return!0}catch(t){throw new Xe(`Failed to remove machine: ${cn(t)}`,He.SERVER_ERROR,500,t,"API.removeMachine")}}async getOdpOrders(){try{const{data:e,error:t}=await Tt.from("odp_orders").select("*").order("created_at",{ascending:!1});if(t)throw t;return e||[]}catch(e){throw new Xe(`Failed to fetch ODP orders: ${cn(e)}`,He.SERVER_ERROR,500,e,"API.getOdpOrders")}}async getOdpOrder(e){try{const{data:t,error:r}=await Tt.from("odp_orders").select("*").eq("id",e).single();if(r)throw r;return t}catch(t){throw new Xe(`Failed to fetch ODP order: ${cn(t)}`,He.SERVER_ERROR,500,t,"API.getOdpOrder")}}async addOdpOrder(e){try{const{data:t,error:r}=await Tt.from("odp_orders").insert([e]).select().single();if(r)throw r;return t}catch(t){throw new Xe(`Failed to add ODP order: ${cn(t)}`,He.SERVER_ERROR,500,t,"API.addOdpOrder")}}async updateOdpOrder(e,t){try{const{data:r,error:i}=await Tt.from("odp_orders").update(t).eq("id",e).select().single();if(i)throw i;return r}catch(r){throw new Xe(`Failed to update ODP order: ${cn(r)}`,He.SERVER_ERROR,500,r,"API.updateOdpOrder")}}async removeOdpOrder(e){try{const{error:t}=await Tt.from("odp_orders").delete().eq("id",e);if(t)throw t;return!0}catch(t){throw new Xe(`Failed to remove ODP order: ${cn(t)}`,He.SERVER_ERROR,500,t,"API.removeOdpOrder")}}async getPhases(){try{const{data:e,error:t}=await Tt.from("phases").select("*").order("name");if(t)throw t;return e||[]}catch(e){throw new Xe(`Failed to fetch phases: ${cn(e)}`,He.SERVER_ERROR,500,e,"API.getPhases")}}async addPhase(e){try{const{data:t,error:r}=await Tt.from("phases").insert([e]).select().single();if(r)throw r;return t}catch(t){throw new Xe(`Failed to add phase: ${cn(t)}`,He.SERVER_ERROR,500,t,"API.addPhase")}}async updatePhase(e,t){try{const{data:r,error:i}=await Tt.from("phases").update(t).eq("id",e).select().single();if(i)throw i;return r}catch(r){throw new Xe(`Failed to update phase: ${cn(r)}`,He.SERVER_ERROR,500,r,"API.updatePhase")}}async removePhase(e){try{const{error:t}=await Tt.from("phases").delete().eq("id",e);if(t)throw t;return!0}catch(t){throw new Xe(`Failed to remove phase: ${cn(t)}`,He.SERVER_ERROR,500,t,"API.removePhase")}}async getMachineAvailabilityForDateRange(e,t,r){try{const{data:i,error:s}=await Tt.from("machine_availability").select("*").eq("machine_id",e).gte("date",t).lte("date",r).order("date");if(s)throw s;return i||[]}catch(i){throw new Xe(`Failed to fetch machine availability for date range: ${cn(i)}`,He.SERVER_ERROR,500,i,"API.getMachineAvailabilityForDateRange")}}async getMachineAvailabilityForDate(e,t){try{const{data:r,error:i}=await Tt.from("machine_availability").select("*").eq("machine_id",e).eq("date",t).maybeSingle();if(i)throw i;return r||null}catch(r){throw new Xe(`Failed to fetch machine availability: ${cn(r)}`,He.SERVER_ERROR,500,r,"API.getMachineAvailabilityForDate")}}async getMachineAvailability(e,t){try{return(await this.getMachineAvailabilityForDate(e,t))?.unavailable_hours||[]}catch{return[]}}async setMachineAvailability(e,t,r){try{const{data:i,error:s}=await Tt.from("machine_availability").upsert([{machine_id:e,date:t,unavailable_hours:r}],{onConflict:"machine_id,date"}).select().single();if(s)throw s;return i}catch(i){throw new Xe(`Failed to set machine availability: ${cn(i)}`,He.SERVER_ERROR,500,i,"API.setMachineAvailability")}}async getMachineAvailabilityForDateAllMachines(e){try{const{data:t,error:r}=await Tt.from("machine_availability").select("*").eq("date",e);if(r)throw r;return t||[]}catch(t){throw new Xe(`Failed to fetch machine availability for all machines: ${cn(t)}`,He.SERVER_ERROR,500,t,"API.getMachineAvailabilityForDateAllMachines")}}async getEventsByDate(e){try{const{data:t,error:r}=await Tt.from("machine_availability").select("*").eq("date",e);if(r)throw r;return t||[]}catch(t){throw new Xe(`Failed to fetch events by date: ${cn(t)}`,He.SERVER_ERROR,500,t,"API.getEventsByDate")}}async setUnavailableHoursForRange(e,t,r,i,s){try{const o=parseInt(i.split(":")[0]),l=parseInt(s.split(":")[0]),c=[];for(let v=o;v<l;v++)c.push(v.toString());const d=new Date(t),h=new Date(r);let p=new Date(d);const g=[];for(;p<=h;){const v=xn(p,"yyyy-MM-dd"),_=(await this.getMachineAvailabilityForDate(e,v))?.unavailable_hours||[],w=[...new Set([..._,...c])].sort((C,T)=>parseInt(C)-parseInt(T)),x=await this.setMachineAvailability(e,v,w);g.push(x),p=Yc(p,1)}return g}catch(o){throw new Xe(`Failed to set unavailable hours for range: ${cn(o)}`,He.SERVER_ERROR,500,o,"API.setUnavailableHoursForRange")}}async bulkUpsertMachineAvailability(e){try{const{error:t}=await Tt.from("machine_availability").upsert(e,{onConflict:"machine_id,date"});if(t)throw t;return{success:!0}}catch(t){throw new Xe(`Failed to bulk set machine availability: ${cn(t)}`,He.SERVER_ERROR,500,t,"API.bulkUpsertMachineAvailability")}}setupRealtimeSubscriptions(e,t,r){return Tt.channel("table-db-changes").on("postgres_changes",{event:"*",schema:"public",table:"odp_orders"},e).on("postgres_changes",{event:"*",schema:"public",table:"machines"},t).on("postgres_changes",{event:"*",schema:"public",table:"phases"},r).subscribe(s=>{})}cleanupRealtimeSubscriptions(e){if(e)try{e.unsubscribe()}catch{}}}const rt=new WF,qm=Object.freeze(Object.defineProperty({__proto__:null,apiService:rt},Symbol.toStringTag,{value:"Module"}));function VF(n,e){const t=HF(e),r=new Set;if(t===0||t===6){for(let l=0;l<24;l++)r.add(l.toString());return Array.from(r)}for(let l=0;l<24;l++)r.add(l.toString());const{work_center:i,department:s,active_shifts:o=[]}=n;return o.forEach(l=>{if(l==="T3"){r.clear();return}if(l==="T2")for(let c=6;c<22;c++)r.delete(c.toString());if(l==="T1"){if(i===it.BUSTO_GAROLFO){for(let c=8;c<12;c++)r.delete(c.toString());for(let c=14;c<18;c++)r.delete(c.toString())}else if(i===it.ZANICA)if(s===Bt.PACKAGING){for(let c=8;c<12;c++)r.delete(c.toString());for(let c=13;c<17;c++)r.delete(c.toString())}else{for(let c=8;c<12;c++)r.delete(c.toString());for(let c=13;c<17;c++)r.delete(c.toString())}}}),Array.from(r).sort((l,c)=>parseInt(l)-parseInt(c))}function qF(n,e){const t=[],r=ZT(new Date(e,0,1)),i=z2(new Date(e,11,31));for(const s of n){let o=new Date(r);for(;!zF(o,i);){const l=VF(s,o);l.length>0&&t.push({machine_id:s.id,date:xn(o,"yyyy-MM-dd"),unavailable_hours:l}),o=Yc(o,1)}}return t}const st={machines:["machines"],machine:n=>["machines",n],machinesByWorkCenter:n=>["machines","workCenter",n],orders:["orders"],order:n=>["orders",n],phases:["phases"],phase:n=>["phases",n],machineAvailability:(n,e,t)=>["machineAvailability",n,e,t],machineAvailabilityForDate:(n,e)=>["machineAvailability",n,"date",e],machineAvailabilityForDateAllMachines:n=>["machineAvailability","allMachines",n]},lf=()=>Bo({queryKey:st.machines,queryFn:()=>rt.getMachines(),staleTime:120*1e3}),GF=n=>Bo({queryKey:st.machinesByWorkCenter(n),queryFn:()=>rt.getMachines().then(e=>n===it.BOTH?e:e.filter(t=>t.work_center===n)),staleTime:120*1e3}),YF=()=>{const n=ur();return rs({mutationFn:async e=>{const t=await rt.addMachine(e);try{const r=new Date().getUTCFullYear(),i=qF([t],r);i.length>0&&await rt.bulkUpsertMachineAvailability(i),Ho(`Machine "${t?.machine_name||"Unknown"}" added and calendar set successfully`)}catch(r){tc(`Machine added, but failed to set calendar: ${r.message}`)}return t},onSuccess:e=>{n.invalidateQueries({queryKey:st.machines}),n.invalidateQueries({queryKey:st.machinesByWorkCenter()}),n.setQueryData(st.machines,t=>t?[...t,e]:[e])}})},KF=()=>{const n=ur();return rs({mutationFn:({id:e,updates:t})=>rt.updateMachine(e,t),onSuccess:(e,{id:t})=>{n.invalidateQueries({queryKey:st.machines}),n.invalidateQueries({queryKey:st.machinesByWorkCenter()}),n.setQueryData(st.machines,r=>r?.map(i=>i.id===t?{...i,...e}:i)),n.setQueryData(st.machine(t),e),Ho(`Machine "${e?.machine_name||"Unknown"}" updated successfully`)}})},QF=()=>{const n=ur();return rs({mutationFn:async e=>{const t=await rt.getMachines().then(r=>r.find(i=>i.id===e));return await rt.removeMachine(e),t},onSuccess:e=>{n.invalidateQueries({queryKey:st.machines}),n.invalidateQueries({queryKey:st.machinesByWorkCenter()}),n.setQueryData(st.machines,t=>t?.filter(r=>r.id!==e.id)),n.removeQueries({queryKey:st.machine(e.id)}),Ho(`Machine "${e?.machine_name||"Unknown"}" deleted successfully`)}})},cf=()=>Bo({queryKey:st.orders,queryFn:()=>rt.getOdpOrders(),staleTime:60*1e3}),XF=n=>Bo({queryKey:st.order(n),queryFn:async()=>{try{return await rt.getOdpOrder(n)}catch{const r=(await rt.getOdpOrders()).find(i=>i.id===n);if(!r)throw new Error(`Order with id ${n} not found`);return r}},enabled:!!n,staleTime:60*1e3}),ZF=()=>{const n=ur();return rs({mutationFn:e=>rt.addOdpOrder(e),onSuccess:e=>{n.invalidateQueries({queryKey:st.orders}),n.setQueryData(st.orders,t=>t?[e,...t]:[e])}})},JF=()=>{const n=ur();return rs({mutationFn:({id:e,updates:t})=>rt.updateOdpOrder(e,t),onSuccess:(e,{id:t})=>{n.invalidateQueries({queryKey:st.orders}),n.setQueryData(st.orders,r=>r?.map(i=>i.id===t?{...i,...e}:i)),n.setQueryData(st.order(t),e)}})},eU=()=>{const n=ur();return rs({mutationFn:e=>rt.removeOdpOrder(e),onSuccess:(e,t)=>{n.invalidateQueries({queryKey:st.orders}),n.setQueryData(st.orders,r=>r?.filter(i=>i.id!==t)),n.removeQueries({queryKey:st.order(t)})}})},Kv=()=>Bo({queryKey:st.phases,queryFn:()=>rt.getPhases(),staleTime:300*1e3}),tU=n=>Bo({queryKey:st.phase(n),queryFn:()=>rt.getPhases().then(e=>e.find(t=>t.id===n)),enabled:!!n,staleTime:300*1e3}),nU=()=>{const n=ur();return rs({mutationFn:e=>rt.addPhase(e),onSuccess:e=>{n.invalidateQueries({queryKey:st.phases}),n.setQueryData(st.phases,t=>t?[...t,e]:[e])}})},rU=()=>{const n=ur();return rs({mutationFn:({id:e,updates:t})=>rt.updatePhase(e,t),onSuccess:(e,{id:t})=>{n.invalidateQueries({queryKey:st.phases}),n.setQueryData(st.phases,r=>r?.map(i=>i.id===t?{...i,...e}:i)),n.setQueryData(st.phase(t),e)}})},iU=()=>{const n=ur();return rs({mutationFn:e=>rt.removePhase(e),onSuccess:(e,t)=>{n.invalidateQueries({queryKey:st.phases}),n.setQueryData(st.phases,r=>r?.filter(i=>i.id!==t)),n.removeQueries({queryKey:st.phase(t)})}})},iY=n=>Bo({queryKey:st.machineAvailabilityForDateAllMachines(n),queryFn:()=>rt.getMachineAvailabilityForDateAllMachines(n),enabled:!!n,staleTime:30*1e3}),Vi=sl((n,e)=>({machines:[],getMachines:()=>e().machines,getMachineById:t=>e().machines.find(r=>r.id===t),getMachinesByWorkCenter:t=>t==="BOTH"?e().machines:e().machines.filter(r=>r.work_center===t),setMachines:t=>n({machines:t||[]}),cleanupDuplicateMachines:()=>{const t=e(),r=[],i=new Set;t.machines.forEach(s=>{i.has(s.id)||(i.add(s.id),r.push(s))}),n({machines:r})},reset:()=>n({machines:[]})})),rn=sl((n,e)=>({odpOrders:[],getOdpOrders:()=>e().odpOrders,getOrderById:t=>e().odpOrders.find(r=>r.id===t),getScheduledOrders:()=>e().odpOrders.filter(t=>t.status==="SCHEDULED"),getUnscheduledOrders:()=>e().odpOrders.filter(t=>t.status==="NOT SCHEDULED"),getOdpOrdersByWorkCenter:t=>t==="BOTH"?e().odpOrders:e().odpOrders.filter(r=>r.work_center===t),setOdpOrders:t=>n({odpOrders:t||[]}),cleanupDuplicateOrders:()=>{const t=e(),r=[],i=new Set;t.odpOrders.forEach(s=>{i.has(s.id)||(i.add(s.id),r.push(s))}),n({odpOrders:r})},reset:()=>n({odpOrders:[]})})),sU=()=>{const{data:n,isLoading:e,error:t}=lf(),{data:r,isLoading:i,error:s}=cf(),{data:o,isLoading:l,error:c}=Kv(),{setMachines:d}=Vi(),{setOdpOrders:h}=rn(),{setPhases:p}=Ma();return k.useEffect(()=>{n&&!e&&!t&&d(n)},[n,e,t,d]),k.useEffect(()=>{r&&!i&&!s&&h(r)},[r,i,s,h]),k.useEffect(()=>{o&&!l&&!c&&p(o)},[o,l,c,p]),{isLoading:e||i||l,errors:{machines:t,orders:s,phases:c}}};function oU(){const{selectedWorkCenter:n,showConfirmDialog:e}=Jt(),t=xi(),{data:r=[],isLoading:i,error:s}=GF(n),o=QF(),{handleAsync:l}=zo("MachineryListPage");if(s)return E.jsxs("div",{className:"text-center py-2 text-red-600 text-[10px]",children:["Errore nel caricamento delle macchine: ",s.message]});const c=k.useMemo(()=>[{header:"Nome Macchina",accessorKey:"machine_name"},{header:"Centro di Lavoro",accessorKey:"work_center"},{header:"Reparto",accessorKey:"department"},{header:"Stato",accessorKey:"status"},{header:"Larghezza Min (mm)",accessorKey:"min_web_width"},{header:"Larghezza Max (mm)",accessorKey:"max_web_width"},{header:"Altezza Min (mm)",accessorKey:"min_bag_height"},{header:"Altezza Max (mm)",accessorKey:"max_bag_height"},{header:"Velocità Std",accessorKey:"standard_speed"},{header:"Setup (h)",accessorKey:"setup_time_standard"},{header:"Cambio Colore (h)",accessorKey:"changeover_color"},{header:"Cambio Materiale (h)",accessorKey:"changeover_material"},{header:"Turni Attivi",accessorKey:"active_shifts",cell:p=>Array.isArray(p.getValue())?p.getValue().join(", "):""},{header:"Calendario",accessorKey:"id",cell:p=>E.jsx(ar,{to:`/machinery/${p.getValue()}/calendar`,className:"inline-flex items-center px-1 py-1 border border-gray-300 rounded shadow-sm text-[10px] font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Visualizza Calendario"})}],[]),d=p=>{t(`/machinery/${p.id}/edit`)},h=async p=>{e("Elimina Macchina",`Sei sicuro di voler eliminare "${p.machine_name}"? Questa azione non può essere annullata.`,async()=>{await l(async()=>{await o.mutateAsync(p.id)},{context:"Delete Machine",fallbackMessage:"Eliminazione macchina fallita"})},"danger")};return i?E.jsx("div",{children:"Caricamento dati macchine..."}):n?E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("h1",{className:"text-2xl font-semibold text-foreground",children:"Lista Macchine"}),E.jsx(ar,{to:"/machinery/new",className:"inline-flex items-center px-4 py-2 border border-border rounded-md text-sm font-medium text-foreground bg-background hover:bg-muted",children:"Aggiungi Macchina"})]}),E.jsx(Nv,{columns:c,data:r,onEditRow:d,onDeleteRow:h,enableGlobalSearch:!1})]}):E.jsx("div",{className:"text-center py-2 text-red-600 text-[10px]",children:"Seleziona un centro di lavoro per visualizzare i dati delle macchine."})}const Qv=Pv(),Gm=Pv(),is=WM(),uf=Pv();class aU{constructor(e,t){this.get=e,this.set=t}setSplitTaskInfo=(e,t)=>{this.set(r=>({splitTasksInfo:{...r.splitTasksInfo,[e]:t}}))};getSplitTaskInfo=e=>{const t=this.get().splitTasksInfo[e];if(t&&t.segments)return t;const{getOrderById:r}=rn.getState(),i=r(e);if(i&&i.description&&i.status==="SCHEDULED")try{const s=JSON.parse(i.description);if(s.segments&&Array.isArray(s.segments))return setTimeout(()=>{this.setSplitTaskInfo(e,s)},0),s}catch{}return null};clearSplitTaskInfo=e=>{this.set(t=>{const r={...t.splitTasksInfo};return delete r[e],{splitTasksInfo:r}})};updateTaskWithSplitInfo=async(e,t,r=null,i=null,s=null)=>{const{apiService:o}=await ei(async()=>{const{apiService:l}=await Promise.resolve().then(()=>qm);return{apiService:l}},void 0);if(t){this.setSplitTaskInfo(e,t);const c={description:JSON.stringify(t),status:"SCHEDULED"};if(r&&(c.scheduled_start_time=r.toISOString()),i&&(c.scheduled_end_time=i.toISOString()),s&&(c.scheduled_machine_id=s),!(c.scheduled_start_time&&c.scheduled_end_time&&c.scheduled_machine_id))if(!c.scheduled_start_time&&!c.scheduled_end_time&&!c.scheduled_machine_id)delete c.scheduled_start_time,delete c.scheduled_end_time,delete c.scheduled_machine_id,c.status="NOT SCHEDULED";else{const{getOrderById:h}=rn.getState(),p=h(e);p&&(c.scheduled_start_time||(c.scheduled_start_time=p.scheduled_start_time),c.scheduled_end_time||(c.scheduled_end_time=p.scheduled_end_time),c.scheduled_machine_id||(c.scheduled_machine_id=p.scheduled_machine_id))}const d=await o.updateOdpOrder(e,c);this.updateSplitTaskInfo(e,d)}else{this.clearSplitTaskInfo(e);const l=await o.updateOdpOrder(e,{description:""});this.updateSplitTaskInfo(e,l)}};updateSplitTaskInfo=(e,t)=>{if(this.clearSplitTaskInfo(e),t.description&&t.status==="SCHEDULED")try{const r=JSON.parse(t.description);r.segments&&Array.isArray(r.segments)?this.validateSegments(r.segments.map(s=>({start:new Date(s.start),end:new Date(s.end),duration:s.duration}))).isValid?this.setSplitTaskInfo(e,r):this.clearSplitTaskInfo(e):this.clearSplitTaskInfo(e)}catch{this.clearSplitTaskInfo(e)}else this.clearSplitTaskInfo(e)};restoreSplitTaskInfo=()=>{const{getOdpOrders:e}=rn.getState(),t=e(),r={};let i=0;t.forEach(s=>{if(s.description&&s.status==="SCHEDULED")try{const o=JSON.parse(s.description);o.segments&&Array.isArray(o.segments)&&(r[s.id]=o,i++)}catch{}}),this.set({splitTasksInfo:r})};validateSegments=e=>{if(!Array.isArray(e)||e.length===0)return{isValid:!1,error:"Segments must be a non-empty array"};for(let t=0;t<e.length;t++){const r=e[t];if(!r.start||!r.end||r.duration===void 0)return{isValid:!1,error:`Segment ${t} missing required properties (start, end, duration)`};const i=new Date(r.start),s=new Date(r.end);if(isNaN(i.getTime())||isNaN(s.getTime()))return{isValid:!1,error:`Segment ${t} has invalid date values`};if(s<=i)return{isValid:!1,error:`Segment ${t} end time must be after start time`};if(r.duration<=0)return{isValid:!1,error:`Segment ${t} duration must be positive`};if(t>0){const o=e[t-1],l=new Date(o.end);if(i<l)return{isValid:!1,error:`Segment ${t} overlaps with previous segment`}}}return{isValid:!0}};createSegmentInfo=(e,t)=>{const r=this.validateSegments(e);if(!r.isValid)throw new Error(`Invalid segments: ${r.error}`);return{totalSegments:e.length,segments:e.map(i=>({start:i.start.toISOString(),end:i.end.toISOString(),duration:i.duration})),originalDuration:t,wasSplit:e.length>1}};getTaskOccupiedSegments=e=>{const t=this.getSplitTaskInfo(e.id);if(t&&t.segments)return t.segments.map(r=>({start:new Date(r.start),end:new Date(r.end),duration:r.duration}));if(e.description)try{const r=JSON.parse(e.description);if(r.segments&&Array.isArray(r.segments))return r.segments.map(i=>({start:new Date(i.start),end:new Date(i.end),duration:i.duration}))}catch{}if(e.scheduled_start_time){const r=new Date(e.scheduled_start_time),i=e.time_remaining||e.duration||1,s=new Date(r.getTime()+i*60*60*1e3);return[{start:r,end:s,duration:i}]}return[]};doTimeRangesOverlap=(e,t,r,i)=>e<i&&t>r;checkTaskOverlap=(e,t,r)=>{const i=this.getTaskOccupiedSegments(r);for(const s of i)if(this.doTimeRangesOverlap(e,t,s.start,s.end))return{hasOverlap:!0,conflictingSegment:s,existingTask:r};return{hasOverlap:!1}};checkMachineOverlaps=(e,t,r,i=null,s=[])=>{const{getOdpOrders:o}=rn.getState(),l=[i,...s].filter(h=>h),d=o().filter(h=>h.scheduled_machine_id===r&&h.status==="SCHEDULED"&&!l.includes(h.id)&&h.scheduled_start_time&&h.scheduled_end_time&&h.scheduled_machine_id).sort((h,p)=>{const g=this.getTaskOccupiedSegments(h),v=this.getTaskOccupiedSegments(p),y=g.length>0?g[0].start:new Date(h.scheduled_start_time),_=v.length>0?v[0].start:new Date(p.scheduled_start_time);return y.getTime()-_.getTime()});for(const h of d){const p=this.checkTaskOverlap(e,t,h);if(p.hasOverlap)return{hasOverlap:!0,conflictingTask:h,conflictingSegment:p.conflictingSegment}}return{hasOverlap:!1}};migrateExistingTasksToSegmentFormat=async()=>{const{getOdpOrders:e}=rn.getState(),t=e();for(const r of t)if(r.status==="SCHEDULED"&&r.scheduled_start_time){const i=this.getSplitTaskInfo(r.id);if(i&&i.segments)continue;if(r.description)try{const h=JSON.parse(r.description);if(h.segments&&Array.isArray(h.segments)){this.setSplitTaskInfo(r.id,h);continue}}catch{}const s=new Date(r.scheduled_start_time),o=r.time_remaining||r.duration||1,l=new Date(s.getTime()+o*60*60*1e3),c=[{start:s,end:l,duration:o}],d=this.createSegmentInfo(c,o);await this.updateTaskWithSplitInfo(r.id,d)}};verifyAllTasksHaveSegmentInfo=()=>{const{getOdpOrders:e}=rn.getState(),r=e().filter(s=>s.status==="SCHEDULED"),i=[];for(const s of r){const o=this.getSplitTaskInfo(s.id);(!o||!o.segments)&&i.push({id:s.id,odp_number:s.odp_number,description:s.description})}return{totalScheduledTasks:r.length,tasksWithSegments:r.length-i.length,tasksWithoutSegments:i}}}class lU{constructor(e,t,r,i){this.get=e,this.set=t,this.splitTaskManager=r,this.machineAvailabilityManager=i}createAbsoluteDate=(e,t,r,i=0,s=0)=>new Date(Date.UTC(e,t-1,r,i,s,0,0));splitTaskAcrossAvailableSlots=(e,t,r,i)=>{try{const s=[];let o=new Date(e),l=t,c=!0;for(;c;){c=!1;for(const d of i)if(o>=d.start&&o<d.end){o=new Date(d.end),c=!0;break}}for(;l>0;){let d=null,h=null,p=null;for(const g of i){const v=new Date(g.start),y=new Date(g.end);v>=o&&(!d||v<h)&&(d=g,h=v,p=y)}if(d){const g=(h.getTime()-o.getTime())/36e5;if(g>0){const y=Math.min(g,l),_=new Date(o.getTime()+y*60*60*1e3);s.push({start:new Date(o),end:_,duration:y}),l-=y}o=new Date(p);let v=!0;for(;v;){v=!1;for(const y of i)if(o>=y.start&&o<y.end){o=new Date(y.end),v=!0;break}}}else{const g=new Date(o.getTime()+l*60*60*1e3);s.push({start:new Date(o),end:g,duration:l}),l=0}if(s.length>Hj.MAX_TASK_SEGMENTS){console.warn("Task splitting exceeded maximum segments limit");break}}return s}catch(s){return console.error("Error in splitTaskAcrossAvailableSlots:",s),[]}};splitTaskAcrossAvailableSlotsBackward=(e,t,r,i)=>{try{const s=[];let o=new Date(e),l=t,c=!0;for(;c;){c=!1;for(const h of i)if(o>h.start&&o<=h.end){o=new Date(h.start),c=!0;break}}for(;l>0;){let h=null,p=null,g=null;for(const C of i){const T=new Date(C.start),R=new Date(C.end);R<=o&&(!h||R>g)&&(h=C,p=T,g=R)}let v;h?v=new Date(g):v=new Date(o.getTime()-l*60*60*1e3);let y=!0;for(;y;){y=!1;for(const C of i)if(v<C.end&&v>=C.start){v=new Date(C.end),y=!0;break}}const _=(o.getTime()-v.getTime())/(1e3*60*60);if(_<=0){o=h?new Date(p):new Date(o.getTime()-3600*1e3);continue}const w=Math.min(_,l),x=new Date(o.getTime()-w*60*60*1e3);s.push({start:x,end:new Date(o),duration:w}),l-=w,o=new Date(x)}return s.reverse()}catch(s){return console.error("Error in splitTaskAcrossAvailableSlotsBackward:",s),[]}};collectUnavailableSlots=(e,t,r)=>{const i=[],s=this.createAbsoluteDate(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate()),o=this.createAbsoluteDate(t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate()),l=new Date(o);l.setUTCDate(l.getUTCDate()+7);let c=new Date(s);for(;c<=l;){const d=xn(c,"yyyy-MM-dd"),h=this.get().machineAvailability[d];if(h&&Array.isArray(h)){const p=h.find(g=>g.machine_id===r);if(p&&p.unavailable_hours&&Array.isArray(p.unavailable_hours)){const[g,v,y]=d.split("-").map(Number);for(const _ of p.unavailable_hours){const w=this.createAbsoluteDate(g,v,y,parseInt(_),0),x=new Date(w.getTime()+3600*1e3);i.push({start:w,end:x,hour:parseInt(_),date:d})}}}c.setUTCDate(c.getUTCDate()+1)}return i.sort((d,h)=>d.start.getTime()-h.start.getTime())};loadMachineAvailabilityForExtendedRange=async(e,t,r)=>{const i=this.createAbsoluteDate(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate()),s=new Date(e.getTime()+t*60*60*1e3),o=this.createAbsoluteDate(s.getUTCFullYear(),s.getUTCMonth()+1,s.getUTCDate()),l=new Date(o);l.setUTCDate(l.getUTCDate()+7);let c=new Date(i);for(;c<=l;){const d=xn(c,"yyyy-MM-dd");await this.machineAvailabilityManager.loadMachineAvailabilityForDate(d),c.setUTCDate(c.getUTCDate()+1)}return l};loadMachineAvailabilityForBackwardRange=async(e,t,r)=>{const i=this.createAbsoluteDate(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate()),s=new Date(e.getTime()-t*60*60*1e3),o=this.createAbsoluteDate(s.getUTCFullYear(),s.getUTCMonth()+1,s.getUTCDate()),l=new Date(o);l.setUTCDate(l.getUTCDate()-7);let c=new Date(l);for(;c<=i;){const d=xn(c,"yyyy-MM-dd");await this.machineAvailabilityManager.loadMachineAvailabilityForDate(d),c.setUTCDate(c.getUTCDate()+1)}return{taskStartDateWithBuffer:l,taskEndDate:i}};checkSegmentsForOverlaps=(e,t,r,i=[])=>{[r,...i].filter(s=>s);for(const s of e){const o=this.splitTaskManager.checkMachineOverlaps(s.start,s.end,t,r,i);if(o.hasOverlap)return{hasOverlap:!0,conflictingSegment:s,conflictingTask:o.conflictingTask,conflictingExistingSegment:o.conflictingSegment}}return{hasOverlap:!1}};scheduleTaskWithSplitting=async(e,t,r,i,s=[])=>{const o=await this.loadMachineAvailabilityForExtendedRange(t,r,i),l=this.collectUnavailableSlots(t,o,i),c=new Date(t.getTime()+r*60*60*1e3);if(l.some(h=>t<h.end&&c>h.start)){const h=this.splitTaskAcrossAvailableSlots(t,r,i,l);if(h.length>0){const p=this.checkSegmentsForOverlaps(h,i,e,s);if(p.hasOverlap)return{conflict:!0,conflictingTask:p.conflictingTask,conflictingSegment:p.conflictingExistingSegment,proposedSegments:h};const g=h[0],v=h[h.length-1];if(!g?.start||!v?.end)return console.error("Invalid segments returned from splitTaskAcrossAvailableSlots:",h),null;const y=this.splitTaskManager.createSegmentInfo(h,r);return await this.splitTaskManager.updateTaskWithSplitInfo(e,y,g.start,v.end,i),{startTime:g.start,endTime:v.end,wasSplit:!0,segments:h,originalDuration:r}}}else{const h=[{start:t,end:c,duration:r}],p=this.checkSegmentsForOverlaps(h,i,e,s);if(p.hasOverlap)return{conflict:!0,conflictingTask:p.conflictingTask,conflictingSegment:p.conflictingExistingSegment,proposedSegments:h};const g=this.splitTaskManager.createSegmentInfo(h,r);return await this.splitTaskManager.updateTaskWithSplitInfo(e,g,t,c,i),{startTime:t,endTime:c,wasSplit:!1,segments:h,originalDuration:r}}return null};scheduleTaskEndingAtWithSplitting=async(e,t,r,i,s=[])=>{const{taskStartDateWithBuffer:o,taskEndDate:l}=await this.loadMachineAvailabilityForBackwardRange(t,r,i),c=this.collectUnavailableSlots(o,l,i),d=this.splitTaskAcrossAvailableSlotsBackward(t,r,i,c);if(d.length===0)return null;const h=this.checkSegmentsForOverlaps(d,i,e,s);if(h.hasOverlap)return{conflict:!0,conflictingTask:h.conflictingTask,conflictingSegment:h.conflictingExistingSegment,proposedSegments:d};const p=this.splitTaskManager.createSegmentInfo(d,r),g=d[0],v=d[d.length-1];return!g?.start||!v?.end?(console.error("Invalid segments returned from splitTaskAcrossAvailableSlotsBackward:",d),null):(await this.splitTaskManager.updateTaskWithSplitInfo(e,p,g.start,v.end,i),{startTime:g.start,endTime:v.end,wasSplit:d.length>1,segments:d,originalDuration:r})};handleTaskDurationShrinking=async(e,t,r,i={})=>{try{console.log("🔄 DURATION SHRINKING: Starting cascading rescheduling for task",e),console.log("📊 DURATION SHRINKING: New duration:",t,"hours");const{getOrderById:s,getOdpOrders:o}=rn.getState(),{getMachineById:l}=Vi.getState(),c=s(e),d=l(r),h=o();if(!c||!d)return{success:!1,error:"Task or machine not found"};if(!c.scheduled_start_time||!c.scheduled_end_time)return{success:!1,error:"Task is not scheduled"};const p=new Date(c.scheduled_start_time),g=c.duration,v=new Date(p.getTime()+g*60*60*1e3);console.log("📅 DURATION SHRINKING: Original end time (pre-shrinking):",v.toISOString()),console.log("📅 DURATION SHRINKING: Original duration:",g,"New duration:",t);const y=this.findCascadingChain(e,v,r,h);console.log("🔄 DURATION SHRINKING: Found cascading chain of",y.length,"tasks to reschedule"),console.log("📋 DURATION SHRINKING: Chain tasks:",y.map(I=>I.odp_number));const _=c.quantity_completed/c.quantity||0,w=t*(1-_);console.log("📊 DURATION SHRINKING: Calculated time_remaining:",w,"from new duration:",t,"and progress:",_),console.log("📊 DURATION SHRINKING: Progress calculation:",c.quantity_completed,"/",c.quantity,"=",_),console.log("🔄 DURATION SHRINKING: Rescheduling original task with new time_remaining");const x=await this.scheduleTaskWithSplitting(e,p,w,r,[]);if(!x)return console.error("❌ DURATION SHRINKING: Failed to reschedule original task"),{success:!1,error:"Failed to reschedule original task. Not enough space available.",rescheduledTasks:[]};if(x.conflict)return console.error("❌ DURATION SHRINKING: Conflict detected while rescheduling original task"),{success:!1,error:"Conflict detected while rescheduling original task. Consider using conflict resolution.",rescheduledTasks:[]};await this.splitTaskManager.updateTaskWithSplitInfo(e,x.segments?{segments:x.segments,totalSegments:x.segments.length,originalDuration:x.originalDuration||w,wasSplit:x.wasSplit||!1}:null,x.startTime,x.endTime,r);const C={duration:t,time_remaining:w,...i};console.log("💾 DURATION SHRINKING: Final update data:",C),await rt.updateOdpOrder(e,C);const T=[{id:e,odp_number:c.odp_number,new_start_time:x.startTime.toISOString(),new_end_time:x.endTime.toISOString(),was_split:x.wasSplit}];let R=new Date(x.endTime);const D=R.getUTCMinutes(),O=Math.ceil(D/15)*15;O===60?R.setUTCHours(R.getUTCHours()+1,0,0,0):R.setUTCMinutes(O,0,0);for(const I of y){console.log("🔄 DURATION SHRINKING: Rescheduling task",I.odp_number,"to start at",R.toISOString());const F=await this.scheduleTaskWithSplitting(I.id,R,I.time_remaining||I.duration||1,r,[e]);if(!F)return console.error("❌ DURATION SHRINKING: Failed to reschedule task",I.odp_number),{success:!1,error:`Failed to reschedule task ${I.odp_number}. Not enough space available.`,rescheduledTasks:T};if(F.conflict)return console.error("❌ DURATION SHRINKING: Conflict detected while rescheduling task",I.odp_number),{success:!1,error:`Conflict detected while rescheduling task ${I.odp_number}. Consider using conflict resolution.`,rescheduledTasks:T};await this.splitTaskManager.updateTaskWithSplitInfo(I.id,F.segments?{segments:F.segments,totalSegments:F.segments.length,originalDuration:F.originalDuration||I.time_remaining||I.duration||1,wasSplit:F.wasSplit||!1}:null,F.startTime,F.endTime,r),T.push({id:I.id,odp_number:I.odp_number,new_start_time:F.startTime.toISOString(),new_end_time:F.endTime.toISOString(),was_split:F.wasSplit}),R=new Date(F.endTime);const z=R.getUTCMinutes(),V=Math.ceil(z/15)*15;V===60?R.setUTCHours(R.getUTCHours()+1,0,0,0):R.setUTCMinutes(V,0,0)}console.log("✅ DURATION SHRINKING: Successfully rescheduled",T.length,"tasks");const M=s(e);return{success:!0,message:`Successfully rescheduled ${T.length} tasks due to duration reduction`,rescheduledTasks:T,updatedTask:M}}catch(s){return console.error("❌ DURATION SHRINKING ERROR:",s),{success:!1,error:s.message||"Unknown error during duration shrinking",rescheduledTasks:[]}}};findCascadingChain=(e,t,r,i)=>{const s=[],o=new Set,l=i.filter(h=>h.scheduled_machine_id===r&&h.status==="SCHEDULED"&&h.id!==e&&h.scheduled_start_time).sort((h,p)=>new Date(h.scheduled_start_time)-new Date(p.scheduled_start_time)),c=l.filter(h=>{const g=(new Date(h.scheduled_start_time).getTime()-t.getTime())/(1e3*60);return g>=0&&g<=15});console.log("🔍 DURATION SHRINKING: Initial candidates within 15 minutes:",c.map(h=>h.odp_number));const d=h=>{for(const p of l){if(o.has(p.id))continue;const g=new Date(p.scheduled_start_time),v=(g.getTime()-h.getTime())/(1e3*60);if(v>=0&&v<=15){o.add(p.id),s.push(p);const y=p.time_remaining||p.duration||1,_=new Date(g.getTime()+y*60*60*1e3);console.log("🔗 DURATION SHRINKING: Added to chain:",p.odp_number,"ends at",_.toISOString()),d(_)}}};return d(t),console.log("📋 DURATION SHRINKING: Complete chain found:",s.map(h=>h.odp_number)),s}}class cU{constructor(e,t,r,i){this.get=e,this.set=t,this.schedulingLogic=r,this.splitTaskManager=i}getTaskDurationMinutes=e=>Math.round((e.time_remaining||e.duration||1)*Sd.MINUTES_PER_HOUR);getTaskEndTime=e=>{const t=new Date(e.scheduled_start_time),r=this.getTaskDurationMinutes(e);return new Date(t.getTime()+r*Sd.MILLISECONDS_PER_MINUTE)};addMinutesToDate=(e,t)=>new Date(e.getTime()+t*Sd.MILLISECONDS_PER_MINUTE);roundUpToNext15MinSlot=e=>{const t=e.getUTCMinutes(),r=e.getUTCHours(),i=Math.ceil(t/15)*15,s=new Date(e);return i===Sd.MINUTES_PER_HOUR?s.setUTCHours(r+1,0,0,0):s.setUTCMinutes(i,0,0),s};scheduleTaskWithSplittingForShunt=async(e,t,r)=>await this.scheduleTaskWithSplittingForShuntExcluding(e,t,r,[e.id]);scheduleTaskWithSplittingForShuntExcluding=async(e,t,r,i,s=3)=>{const o=this.getTaskDurationMinutes(e)/60,l=i.filter(d=>d!==e.id),c=await this.schedulingLogic.scheduleTaskWithSplitting(e.id,t,o,r.id,l);return c&&!c.conflict?{startTime:c.startTime,endTime:c.endTime,wasSplit:c.wasSplit}:c&&c.conflict?(console.log(`🔄 CASCADING SHUNT: Task ${e.odp_number} conflicts with ${c.conflictingTask?.odp_number}, attempting cascading resolution`),s>0?await this.handleCascadingConflict(e,t,r,i,c,s-1):(console.warn(`⚠️ CASCADING SHUNT: Max depth reached for task ${e.odp_number}, returning conflict info`),{conflict:!0,conflictingTask:c.conflictingTask,conflictingSegment:c.conflictingSegment,proposedSegments:c.proposedSegments})):c?{startTime:t,endTime:this.addMinutesToDate(t,this.getTaskDurationMinutes(e)),wasSplit:!1}:null};handleCascadingConflict=async(e,t,r,i,s,o)=>{const l=s.conflictingTask,c=s.conflictingSegment;console.log(`🔄 CASCADING SHUNT: Attempting to shunt conflicting task ${l?.odp_number} to resolve conflict with ${e.odp_number}`);const d=new Date(t.getTime()+this.getTaskDurationMinutes(e)*60*1e3),h=this.roundUpToNext15MinSlot(d),p=[...i,l.id];try{const g=await this.scheduleTaskWithSplittingForShuntExcluding(l,h,r,p,o);if(g&&!g.conflict){console.log(`✅ CASCADING SHUNT: Successfully shunted conflicting task ${l.odp_number}`),await this.updateTaskSchedule(l.id,g.startTime,g.endTime);const v=await this.scheduleTaskWithSplittingForShuntExcluding(e,t,r,p,o);return v&&!v.conflict?(console.log(`✅ CASCADING SHUNT: Successfully scheduled original task ${e.odp_number} after resolving conflicts`),v):(console.warn(`⚠️ CASCADING SHUNT: Original task ${e.odp_number} still conflicts after shunting conflicting task`),v||{conflict:!0,conflictingTask:l,conflictingSegment:c,proposedSegments:s.proposedSegments})}else return console.warn(`⚠️ CASCADING SHUNT: Could not shunt conflicting task ${l?.odp_number}`),g||{conflict:!0,conflictingTask:l,conflictingSegment:c,proposedSegments:s.proposedSegments}}catch(g){return console.error("❌ CASCADING SHUNT: Error during cascading conflict resolution:",g),{conflict:!0,conflictingTask:l,conflictingSegment:c,proposedSegments:s.proposedSegments}}};updateTaskSchedule=async(e,t,r)=>{try{const{updateOrder:i}=rn.getState();await i(e,{scheduled_start_time:t.toISOString(),scheduled_end_time:r.toISOString()})}catch(i){console.error(`❌ CASCADING SHUNT: Failed to update task ${e} schedule:`,i)}};checkShuntingOverlaps=(e,t,r,i=[])=>{const s=r.filter(o=>o.scheduled_machine_id===t&&o.status==="SCHEDULED"&&!i.includes(o.id));for(const o of e)for(const l of s){const c=this.splitTaskManager.checkTaskOverlap(o.start,o.end,l);if(c.hasOverlap)return{hasOverlap:!0,conflictingTask:l,conflictingSegment:c.conflictingSegment,newTaskSegment:o}}return{hasOverlap:!1}};resolveConflictByShunting=async(e,t,r,i)=>{try{const{conflictingTask:s,proposedStartTime:o,machine:l}=e,c=new Date(o),d=r.filter(D=>D.scheduled_machine_id===l.id&&D.status==="SCHEDULED"&&D.id!==i.id).sort((D,O)=>{const M=this.splitTaskManager.getTaskOccupiedSegments(D),I=this.splitTaskManager.getTaskOccupiedSegments(O),F=M.length>0?M[0].start:new Date(D.scheduled_start_time),z=I.length>0?I[0].start:new Date(O.scheduled_start_time);return F-z}),h=d.findIndex(D=>D.id===s.id);if(h===-1)throw new Xe("Conflicting task not found",He.BUSINESS_LOGIC_ERROR,400,null,"ConflictResolution.resolveConflictByShunting");const p=this.getTaskDurationMinutes(i),g=[];let v=!1;if(t==="right")for(let D=h;D<d.length&&!v;D++){const O=d[D];if(g.push(O),D<d.length-1){const M=d[D+1],I=this.splitTaskManager.getTaskOccupiedSegments(O),F=this.splitTaskManager.getTaskOccupiedSegments(M);if(I.length>0&&F.length>0){const z=Math.max(...I.map(re=>re.end.getTime())),V=Math.min(...F.map(re=>re.start.getTime()));Math.floor((V-z)/(60*1e3))>=p&&(v=!0)}}else v=!0}else for(let D=h;D>=0&&!v;D--){const O=d[D];if(g.unshift(O),D>0){const M=d[D-1],I=this.splitTaskManager.getTaskOccupiedSegments(M),F=this.splitTaskManager.getTaskOccupiedSegments(O);if(I.length>0&&F.length>0){const z=Math.max(...I.map(re=>re.end.getTime())),V=Math.min(...F.map(re=>re.start.getTime()));Math.floor((V-z)/(60*1e3))>=p&&(v=!0)}}else{const M=this.splitTaskManager.getTaskOccupiedSegments(O);if(M.length>0){const I=Math.min(...M.map(V=>V.start.getTime())),F=new Date(I);if(F.setUTCHours(6,0,0,0),Math.floor((I-F.getTime())/(60*1e3))>=p)v=!0;else{const V=new Date(I),ee=new Date(V);ee.setUTCHours(6,0,0,0),V.getTime()>ee.getTime()&&(v=!0)}}}}const y=new Set,_=new Set;for(const D of g)y.add(D.id),_.add(D.id);_.add(i.id);let w=0;const x=10;for(;w<x;){w++;let D=!1;const O=Array.from(y);for(const M of O){const I=d.find(re=>re.id===M)||i;if(!I)continue;let F;if(t==="right"){const re=new Date(c.getTime()+p*60*1e3);if(F=this.roundUpToNext15MinSlot(re),I.id!==i.id){const fe=Array.from(y).indexOf(M);if(fe>0){const pe=Array.from(y)[fe-1],ie=d.find(q=>q.id===pe)||i,ae=this.getTaskDurationMinutes(ie),Q=new Date(F.getTime()+ae*60*1e3);F=this.roundUpToNext15MinSlot(Q)}}}else{const re=c,fe=this.getTaskDurationMinutes(I);F=this.roundUpToNext15MinSlot(this.addMinutesToDate(re,-fe))}const z=this.getTaskDurationMinutes(I)/60,V=this.schedulingLogic.collectUnavailableSlots(F,new Date(F.getTime()+z*60*60*1e3),l.id);if(V.some(re=>F<re.end&&new Date(F.getTime()+z*60*60*1e3)>re.start)){const re=this.schedulingLogic.splitTaskAcrossAvailableSlots(F,z,l.id,V);for(const fe of re)for(const pe of d)!_.has(pe.id)&&pe.id!==I.id&&this.splitTaskManager.checkTaskOverlap(fe.start,fe.end,pe).hasOverlap&&(_.add(pe.id),y.add(pe.id),D=!0)}else{const re=new Date(F.getTime()+z*60*60*1e3);for(const fe of d)!_.has(fe.id)&&fe.id!==I.id&&this.splitTaskManager.checkTaskOverlap(F,re,fe).hasOverlap&&(_.add(fe.id),y.add(fe.id),D=!0)}}if(!D)break}if(w>=x)throw console.error(`🚨 SHUNTING ERROR: Maximum iterations (${x}) reached, possible infinite loop`),new Xe("Too many conflicts detected during shunting",He.BUSINESS_LOGIC_ERROR,400,null,"ConflictResolution.resolveConflictByShunting");const C=d.filter(D=>y.has(D.id));if(g.length=0,g.push(...C),!v&&g.length===d.length){const D=this.getTaskDurationMinutes(i),O=g.length,M=l.machine_name||"Unknown Machine";console.warn(`⚠️ SHUNTING WARNING: No gap found for ${D} minutes on machine ${M}`),console.warn(`⚠️ All ${O} tasks on machine would need to be moved`),console.warn("⚠️ Attempting to schedule at earliest possible time...");const I=d[0],F=this.splitTaskManager.getTaskOccupiedSegments(I);if(F.length>0){const z=Math.min(...F.map(ee=>ee.start.getTime())),V=new Date(z);if(V.setUTCHours(6,0,0,0),V.getTime()<z)v=!0;else throw console.error(`❌ SHUNTING FAILED: No space even at 6 AM on machine ${M}`),console.error("❌ Consider: 1) Moving to different machine, 2) Reducing task duration, 3) Scheduling on different day"),new Xe(`Non c'è spazio sufficiente per spostare i lavori. Il task ${i.odp_number} (${D} minuti) richiederebbe di spostare tutti i ${O} lavori sulla macchina ${M}. Prova a: 1) Spostare su una macchina diversa, 2) Ridurre la durata del task, 3) Programmare in un giorno diverso.`,He.BUSINESS_LOGIC_ERROR,400,null,"ConflictResolution.resolveConflictByShunting")}else throw new Xe(`Non c'è spazio sufficiente per spostare i lavori. Il task ${i.odp_number} (${D} minuti) richiederebbe di spostare tutti i ${O} lavori sulla macchina ${M}. Prova a: 1) Spostare su una macchina diversa, 2) Ridurre la durata del task, 3) Programmare in un giorno diverso.`,He.BUSINESS_LOGIC_ERROR,400,null,"ConflictResolution.resolveConflictByShunting")}const T=[];let R=null;if(t==="right"){const D=new Date(c),O=[...Array.from(_)];if(R=await this.scheduleTaskWithSplittingForShuntExcluding(i,D,l,O),R&&R.conflict)return console.warn(`⚠️ CASCADING SHUNT: Dragged task ${i.odp_number} still has conflicts after cascading resolution`),{error:`Impossibile programmare il task ${i.odp_number} alla posizione richiesta. Conflitti non risolvibili automaticamente.`,conflict:R.conflict,conflictingTask:R.conflictingTask,conflictingSegment:R.conflictingSegment};let M=R.endTime?this.roundUpToNext15MinSlot(R.endTime):new Date;for(const I of g){const F=[...Array.from(_)],z=await this.scheduleTaskWithSplittingForShuntExcluding(I,M,l,F);if(!z)throw console.error(`❌ Failed to schedule task ${I.odp_number} at ${M.toISOString()}`),new Xe(`Impossibile programmare il task ${I.odp_number} alla posizione richiesta. Non c'è spazio sufficiente.`,He.BUSINESS_LOGIC_ERROR,400,null,"ConflictResolution.resolveConflictByShunting");if(z&&z.conflict){console.warn(`⚠️ CASCADING SHUNT: Task ${I.odp_number} still has conflicts after cascading resolution`);continue}T.push({id:I.id,scheduled_start_time:z.startTime?.toISOString(),scheduled_end_time:z.endTime?.toISOString()}),z.endTime&&(M=this.roundUpToNext15MinSlot(z.endTime))}}else{const D=new Date(c);let O=this.roundUpToNext15MinSlot(this.addMinutesToDate(D,-1));for(let M=g.length-1;M>=0;M--){const I=g[M],F=[...Array.from(_)],z=await this.schedulingLogic.scheduleTaskEndingAtWithSplitting(I.id,O,this.getTaskDurationMinutes(I)/60,l.id,F);if(!z)throw console.error(`❌ Failed to schedule task ${I.odp_number} ending at ${O.toISOString()}`),new Xe(`Impossibile programmare il task ${I.odp_number} alla posizione richiesta. Non c'è spazio sufficiente.`,He.BUSINESS_LOGIC_ERROR,400,null,"ConflictResolution.resolveConflictByShunting");if(z&&z.conflict){console.warn(`⚠️ CASCADING SHUNT: Task ${I.odp_number} still has conflicts after cascading resolution (LEFT direction)`);continue}T.push({id:I.id,scheduled_start_time:z.startTime?.toISOString(),scheduled_end_time:z.endTime?.toISOString()}),z.startTime&&(O=this.roundUpToNext15MinSlot(this.addMinutesToDate(z.startTime,-1)))}}if(!R){const D=new Date(c),O=[...Array.from(_)];R=await this.scheduleTaskWithSplittingForShuntExcluding(i,D,l,O)}if(!R)throw console.error(`❌ Failed to schedule dragged task ${i.odp_number} at ${proposedStart.toISOString()}`),new Xe(`Impossibile programmare il task ${i.odp_number} alla posizione richiesta. Non c'è spazio sufficiente.`,He.BUSINESS_LOGIC_ERROR,400,null,"ConflictResolution.resolveConflictByShunting");T.push({id:i.id,scheduled_machine_id:l.id,scheduled_start_time:R.startTime?.toISOString(),scheduled_end_time:R.endTime?.toISOString(),status:"SCHEDULED"});for(const D of T)await rt.updateOdpOrder(D.id,D);return Jt.getState().hideConflictDialog(),Jt.getState().showAlert("Lavori riprogrammati con successo","success"),{success:!0}}catch(s){return console.error("❌ SHUNTING ERROR:",s),{error:(s instanceof Xe?s:new Xe(s.message||"Errore durante la riprogrammazione",He.BUSINESS_LOGIC_ERROR,400,s,"ConflictResolution.resolveConflictByShunting")).message}}}}class uU{constructor(e,t){this.get=e,this.set=t,this.updateLocks=new Map}getLockKey=(e,t)=>`${e}-${t}`;acquireLock=async(e,t)=>{const r=this.getLockKey(e,t);this.updateLocks.has(r)&&await this.updateLocks.get(r);let i;const s=new Promise(o=>{i=o});return this.updateLocks.set(r,s),i};releaseLock=(e,t)=>{const r=this.getLockKey(e,t);this.updateLocks.delete(r)};loadMachineAvailabilityForDate=async e=>{const{machineAvailability:t}=this.get();if(!t[e]?._loading&&!(t[e]&&t[e].length>=0)){this.set(r=>({machineAvailability:{...r.machineAvailability,[e]:{_loading:!0}}}));try{const r=await rt.getMachineAvailabilityForDateAllMachines(e);this.set(i=>({machineAvailability:{...i.machineAvailability,[e]:r||[]}}))}catch(r){throw this.set(i=>{const s={...i.machineAvailability};return s[e]&&delete s[e]._loading,{machineAvailability:s}}),r}}};loadMachineAvailabilityForDateRange=async(e,t,r)=>{const i=t instanceof Date?xn(t,"yyyy-MM-dd"):t,s=r instanceof Date?xn(r,"yyyy-MM-dd"):r;try{const o=await rt.getMachineAvailabilityForDateRange(e,i,s);return this.set(l=>{const c={...l.machineAvailability};return Array.isArray(o)&&o.forEach(d=>{if(d.date&&d.unavailable_hours){const h=d.date;c[h]||(c[h]=[]);const p=c[h].find(g=>g.machine_id===e);p?p.unavailable_hours=d.unavailable_hours:c[h].push({machine_id:e,date:h,unavailable_hours:d.unavailable_hours})}}),{machineAvailability:c}}),o}catch(o){throw o}};getMachineAvailability=async(e,t)=>{try{const r=this.get().machineAvailability[t];if(r&&Array.isArray(r)){const s=r.find(o=>o.machine_id===e);if(s)return s.unavailable_hours||[]}const i=await rt.getMachineAvailabilityForDate(e,t);if(i){const s=(i.unavailable_hours||[]).map(o=>o.toString());return this.set(o=>{const l={...o.machineAvailability};l[t]||(l[t]=[]);const c=l[t].find(d=>d.machine_id===e);return c?c.unavailable_hours=s:l[t].push({machine_id:e,date:t,unavailable_hours:s}),{machineAvailability:l}}),s}return[]}catch{return[]}};loadMachineAvailabilityForMachine=async(e,t,r)=>{const i={};try{try{await rt.getMachineAvailabilityForDate("test","2025-01-01")}catch{return{}}let s=new Date(t);for(;s<=r;){const o=xn(s,"yyyy-MM-dd");this.get().machineAvailability[o]||await this.loadMachineAvailabilityForDate(o);const c=this.get().machineAvailability[o];if(Array.isArray(c)){const d=c.find(h=>h.machine_id===e);d&&(i[o]=d.unavailable_hours||[])}s=Yc(s,1)}return i}catch{return{}}};isTimeSlotUnavailable=async(e,t,r)=>(await this.getMachineAvailability(e,t)).includes(r.toString());setMachineAvailability=async(e,t,r)=>{const i=await this.acquireLock(e,t);try{const{getOdpOrders:s}=rn.getState(),o=s().filter(g=>g.scheduled_machine_id===e&&g.status==="SCHEDULED"&&g.scheduled_start_time&&g.scheduled_end_time),[l,c,d]=t.split("-").map(Number),h=new Date(Date.UTC(l,c-1,d)),p=new Date(h.getTime()+1440*60*1e3);for(const g of o){const v=new Date(g.scheduled_start_time),y=new Date(g.scheduled_end_time);if(v<p&&y>h)for(const _ of r){const w=new Date(h.getTime()+parseInt(_)*60*60*1e3),x=new Date(w.getTime()+3600*1e3);if(w<y&&x>v)throw new Xe(`Cannot set machine unavailable during scheduled task: ${g.odp_number}`,He.BUSINESS_LOGIC_ERROR,400,null,"MachineAvailabilityManager.setMachineUnavailability")}}return await rt.setMachineAvailability(e,t,r),this.set(g=>{const v={...g.machineAvailability};v[t]||(v[t]=[]);const y=v[t].find(_=>_.machine_id===e);return y?y.unavailable_hours=r:v[t].push({machine_id:e,date:t,unavailable_hours:r}),{machineAvailability:v}}),Jt.getState().showAlert(`Machine availability updated successfully for ${t}`,"success"),!0}catch(s){const o=Qr(s);throw Jt.getState().showAlert(o.message,"error"),o}finally{i(),this.releaseLock(e,t)}};toggleMachineHourAvailability=async(e,t,r)=>{const i=await this.acquireLock(e,t);try{const s=await this.getMachineAvailability(e,t),o=r.toString();let l;return s.includes(o)?l=s.filter(c=>c!==o):l=[...s,o].sort((c,d)=>parseInt(c)-parseInt(d)),await rt.setMachineAvailability(e,t,l),this.set(c=>{const d={...c.machineAvailability};d[t]||(d[t]=[]);const h=d[t].find(p=>p.machine_id===e);return h?h.unavailable_hours=l:d[t].push({machine_id:e,date:t,unavailable_hours:l}),{machineAvailability:d}}),Jt.getState().showAlert(`Time slot ${o}:00 updated successfully`,"success"),!0}catch(s){const o=Qr(s);throw Jt.getState().showAlert(o.message,"error"),o}finally{i(),this.releaseLock(e,t)}};setMachineUnavailability=async(e,t,r,i,s)=>{try{const o=await rt.setUnavailableHoursForRange(e,t,r,i,s),l=new Date(t),c=new Date(r),d=await this.loadMachineAvailabilityForDateRange(e,l,c);return d&&Array.isArray(d)&&this.set(h=>{const p={...h.machineAvailability};return d.forEach(g=>{if(g.date&&g.unavailable_hours){const v=xn(new Date(g.date),"yyyy-MM-dd");p[v]||(p[v]=[]);const y=p[v].find(_=>_.machine_id===e);y?y.unavailable_hours=g.unavailable_hours:p[v].push({machine_id:e,date:v,unavailable_hours:g.unavailable_hours})}}),{machineAvailability:p}}),o}catch(o){throw o}};isMachineAvailabilityAccessible=async()=>{try{return await rt.getMachineAvailabilityForDateAllMachines("2025-01-01"),!0}catch{return!1}};getMachineAvailabilityStatus=async()=>{try{const e=await this.isMachineAvailabilityAccessible();return{accessible:e,message:e?"Table is accessible":"Table is not accessible - check permissions or table existence"}}catch(e){return{accessible:!1,message:`Error checking table: ${e.message}`}}};initializeEmptyMachineAvailability=()=>{const{machineAvailability:e}=this.get(),t={...e};this.set({machineAvailability:t})}}const _i=sl((n,e)=>{const t=new aU(e,n),r=new uU(e,n),i=new lU(e,n,t,r),s=new cU(e,n,i,t);return{machineAvailability:{},shuntPreview:null,splitTasksInfo:{},getMachineAvailabilityState:()=>e().machineAvailability,getSplitTaskInfo:o=>t.getSplitTaskInfo(o),setMachineAvailabilityState:o=>n({machineAvailability:o}),setShuntPreview:o=>n({shuntPreview:o}),clearShuntPreview:()=>n({shuntPreview:null}),setSplitTaskInfo:t.setSplitTaskInfo,clearSplitTaskInfo:t.clearSplitTaskInfo,updateSplitTaskInfo:t.updateSplitTaskInfo,restoreSplitTaskInfo:t.restoreSplitTaskInfo,updateTaskWithSplitInfo:t.updateTaskWithSplitInfo,getTaskOccupiedSegments:t.getTaskOccupiedSegments,checkTaskOverlap:t.checkTaskOverlap,checkMachineOverlaps:t.checkMachineOverlaps,migrateExistingTasksToSegmentFormat:t.migrateExistingTasksToSegmentFormat,verifyAllTasksHaveSegmentInfo:t.verifyAllTasksHaveSegmentInfo,createAbsoluteDate:i.createAbsoluteDate,splitTaskAcrossAvailableSlots:i.splitTaskAcrossAvailableSlots,collectUnavailableSlots:i.collectUnavailableSlots,scheduleTaskWithSplitting:i.scheduleTaskWithSplitting,findAdjacentTasksChain:i.findAdjacentTasksChain,handleTaskDurationShrinking:i.handleTaskDurationShrinking,scheduleTaskFromSlot:async(o,l,c,d,h,p=null,g=null)=>{const{startSchedulingOperation:v,stopSchedulingOperation:y}=Jt.getState();try{v("schedule",o);const{getOrderById:_,getOdpOrders:w}=rn.getState(),{getMachineById:x}=Vi.getState(),C=_(o),T=x(l.id),R=w();if(!C||!T)return{error:"Task or machine not found"};const D=c.getUTCFullYear(),O=c.getUTCMonth()+1,M=c.getUTCDate(),I=i.createAbsoluteDate(D,O,M,d,h),F=p||C.time_remaining||C.duration||1;console.log("🎯 SCHEDULER: Using duration:",F,"overrideDuration:",p);const z={machine:l.id,start_time:I.toISOString(),end_time:nS(I,F).toISOString()};console.log("🎯 SCHEDULER: Calling scheduleTask with:",{taskId:o,scheduleData:z,overrideDuration:p});const V=await e().scheduleTask(o,z,R,p,g);return console.log("🎯 SCHEDULER: scheduleTask result:",V),V}catch(_){return{error:Qr(_).message}}finally{y()}},rescheduleTaskToSlot:async(o,l,c,d,h,p=null)=>{const{startSchedulingOperation:g,stopSchedulingOperation:v}=Jt.getState();try{g("reschedule",o);const{getOrderById:y,getOdpOrders:_}=rn.getState(),{getMachineById:w}=Vi.getState(),x=y(o),C=w(l.id),T=_();if(!x||!C)return{error:"Event or machine not found"};const R=c.getUTCFullYear(),D=c.getUTCMonth()+1,O=c.getUTCDate(),M=i.createAbsoluteDate(R,D,O,d,h),I=x.time_remaining||x.duration||1,F={machine:l.id,start_time:M.toISOString(),end_time:nS(M,I).toISOString()};return await e().scheduleTask(o,F,T,null,p)}catch(y){return{error:Qr(y).message}}finally{v()}},scheduleTask:async(o,l,c=null,d=null,h=null)=>{try{console.log("🎯 SCHEDULER: scheduleTask called with:",{taskId:o,eventData:l,overrideDuration:d});const{getOrderById:p,getOdpOrders:g}=rn.getState(),{getMachineById:v}=Vi.getState(),y=p(o),_=v(l.machine),w=c||g();if(console.log("🎯 SCHEDULER: Task found:",y?.odp_number,"Machine found:",_?.name),y&&_&&y.work_center&&_.work_center&&y.work_center!==_.work_center)return{error:`Work center mismatch: task requires '${y.work_center}' but machine is '${_.work_center}'`};const x=new Date(l.start_time),C=d||y.time_remaining||y.duration||1;console.log("🎯 SCHEDULER: scheduleTask using duration:",C,"overrideDuration:",d),console.log("🎯 SCHEDULER: Calling scheduleTaskWithSplitting with:",{taskId:o,newStart:x.toISOString(),timeRemainingHours:C,machineId:l.machine});const T=await i.scheduleTaskWithSplitting(o,x,C,l.machine);if(console.log("🎯 SCHEDULER: scheduleTaskWithSplitting result:",T),!T)return{error:"No available time slots found for this task"};if(T.conflict)return{conflict:!0,conflictingTask:T.conflictingTask,draggedTask:y,proposedStartTime:l.start_time,proposedEndTime:l.end_time,machine:_,conflictingSegment:T.conflictingSegment,proposedSegments:T.proposedSegments,tasks:w};l.start_time=T.startTime.toISOString(),l.end_time=T.endTime.toISOString();const R={scheduled_machine_id:l.machine,scheduled_start_time:l.start_time,scheduled_end_time:l.end_time,status:"SCHEDULED"};if(T.segments){const M={segments:T.segments,totalSegments:T.segments.length,originalDuration:T.originalDuration||y.time_remaining||y.duration||1,wasSplit:T.wasSplit||!1};R.description=JSON.stringify(M)}const{apiService:D}=await ei(async()=>{const{apiService:M}=await Promise.resolve().then(()=>qm);return{apiService:M}},void 0),O=await D.updateOdpOrder(o,R);if(T.segments){const M={segments:T.segments,totalSegments:T.segments.length,originalDuration:T.originalDuration||y.time_remaining||y.duration||1,wasSplit:T.wasSplit||!1};t.setSplitTaskInfo(o,M)}return h&&(h.invalidateQueries({queryKey:["orders"]}),h.invalidateQueries({queryKey:["orders",o]})),{success:!0,updatedTask:O,schedulingResult:T}}catch(p){return{error:Qr(p).message}}},unscheduleTask:async(o,l=null)=>{const{startSchedulingOperation:c,stopSchedulingOperation:d}=Jt.getState();try{c("unschedule",o),t.clearSplitTaskInfo(o);const h={scheduled_machine_id:null,scheduled_start_time:null,scheduled_end_time:null,status:"NOT SCHEDULED",description:""},{apiService:p}=await ei(async()=>{const{apiService:g}=await Promise.resolve().then(()=>qm);return{apiService:g}},void 0);return await p.updateOdpOrder(o,h),l&&(l.invalidateQueries({queryKey:["orders"]}),l.invalidateQueries({queryKey:["orders",o]})),{success:!0}}catch(h){return{error:Qr(h).message}}finally{d()}},loadMachineAvailabilityForDate:r.loadMachineAvailabilityForDate,loadMachineAvailabilityForDateRange:r.loadMachineAvailabilityForDateRange,getMachineAvailability:r.getMachineAvailability,loadMachineAvailabilityForMachine:r.loadMachineAvailabilityForMachine,isTimeSlotUnavailable:r.isTimeSlotUnavailable,setMachineAvailability:r.setMachineAvailability,toggleMachineHourAvailability:r.toggleMachineHourAvailability,setMachineUnavailability:r.setMachineUnavailability,isMachineAvailabilityAccessible:r.isMachineAvailabilityAccessible,getMachineAvailabilityStatus:r.getMachineAvailabilityStatus,initializeEmptyMachineAvailability:r.initializeEmptyMachineAvailability,resolveConflictByShunting:async(o,l,c=null)=>{const{startSchedulingOperation:d,stopSchedulingOperation:h}=Jt.getState();try{d("shunt",o.draggedTask?.id);const{getOdpOrders:p}=rn.getState(),g=p(),v=await s.resolveConflictByShunting(o,l,g,o.draggedTask);if(v&&!v.error&&c){console.log("🔄 SHUNTING: Invalidating React Query cache to refresh UI");const y=[c.invalidateQueries({queryKey:["orders"]}),c.invalidateQueries({queryKey:["machines"]})];o.draggedTask?.id&&y.push(c.invalidateQueries({queryKey:["orders",o.draggedTask.id]})),await Promise.all(y)}return v}catch(p){return console.error("❌ SHUNTING ERROR in scheduler store:",p),{error:p.message||"Errore durante lo spostamento del task"}}finally{h()}},validateSlotAvailability:async(o,l,c,d)=>{try{const h=xn(l,"yyyy-MM-dd");if(await e().isTimeSlotUnavailable(o.id,h,c))return{error:"Cannot schedule task on unavailable time slot"};const{getOdpOrders:g}=rn.getState(),v=new Date(l);v.setUTCHours(c,d,0,0);const y=new Date(v.getTime()+3600*1e3),_=g().filter(w=>w.scheduled_machine_id===o.id&&w.status==="SCHEDULED"&&w.scheduled_start_time);for(const w of _){const x=new Date(w.scheduled_start_time),C=w.time_remaining||w.duration||1,T=new Date(x.getTime()+C*60*60*1e3);if(v<T&&y>x)return{error:"Cannot schedule task on occupied time slot"}}return{success:!0}}catch(h){return{error:Qr(h).message}}},getEventsByDate:async o=>{try{return await rt.getEventsByDate(o)}catch{return[]}},reset:()=>n({machineAvailability:{},shuntPreview:null,splitTasksInfo:{}})}}),Ir={validationSchema:"MACHINE",addButtonText:"Aggiungi Macchina",editButtonText:"Aggiorna Macchina",addLoadingText:"Aggiunta...",editLoadingText:"Aggiornamento...",addContext:"Add Machine",editContext:"Update Machine",addErrorMessage:"Aggiunta macchina fallita",editErrorMessage:"Aggiornamento macchina fallita",sections:[{title:"Identificazione",fields:[{name:"department",label:"Department",type:"select",required:!0,options:[{value:Bt.PRINTING,label:Bt.PRINTING},{value:Bt.PACKAGING,label:Bt.PACKAGING}],defaultValue:Ot.MACHINE.DEPARTMENT,validation:{required:"Department is required"}},{name:"machine_type",label:"Machine Type",type:"select",required:!0,placeholder:"Seleziona tipo macchina",options:[],conditional:n=>n===Bt.PRINTING||n===Bt.PACKAGING,validation:{required:"Machine type is required"}},{name:"machine_name",label:"Machine Name",type:"text",required:!0,placeholder:"Nome descrittivo",validation:{required:"Machine name is required",minLength:{value:2,message:"Machine name must be at least 2 characters"},maxLength:{value:100,message:"Machine name must be at most 100 characters"},pattern:{value:/^[a-zA-Z0-9\s\-_]+$/,message:"Machine name can only contain letters, numbers, spaces, hyphens, and underscores"}}},{name:"work_center",label:"Work Center",type:"select",required:!0,placeholder:"Seleziona un centro di lavoro",options:[{value:it.ZANICA,label:it.ZANICA},{value:it.BUSTO_GAROLFO,label:it.BUSTO_GAROLFO}],defaultValue:Ot.MACHINE.WORK_CENTER,helpText:"Il centro di lavoro è pre-impostato.",validation:{required:"Work center is required"}}]},{title:"Capacità Tecniche",fields:[{name:"min_web_width",label:"Min Web Width (mm)",type:"number",required:!0,defaultValue:Ot.MACHINE.MIN_WEB_WIDTH,validation:{required:"Min web width is required",min:{value:1,message:"Min web width must be at least 1"}}},{name:"max_web_width",label:"Max Web Width (mm)",type:"number",required:!0,defaultValue:Ot.MACHINE.MAX_WEB_WIDTH,validation:{required:"Max web width is required",min:{value:1,message:"Max web width must be at least 1"}}},{name:"min_bag_height",label:"Min Bag Height (mm)",type:"number",required:!0,defaultValue:Ot.MACHINE.MIN_BAG_HEIGHT,validation:{required:"Min bag height is required",min:{value:1,message:"Min bag height must be at least 1"}}},{name:"max_bag_height",label:"Max Bag Height (mm)",type:"number",required:!0,defaultValue:Ot.MACHINE.MAX_BAG_HEIGHT,validation:{required:"Max bag height is required",min:{value:1,message:"Max bag height must be at least 1"}}}]},{title:"Performance",fields:[{name:"standard_speed",label:"Standard Speed",type:"number",required:!0,placeholder:"pz/h o mt/h",validation:{required:"Standard speed is required",min:{value:1,message:"Standard speed must be at least 1"}}},{name:"setup_time_standard",label:"Setup Time Standard (h)",type:"number",required:!0,defaultValue:Ot.MACHINE.SETUP_TIME_STANDARD,validation:{required:"Setup time is required",min:{value:0,message:"Setup time must be at least 0"}}},{name:"changeover_color",label:"Changeover Color (h)",type:"number",required:!0,defaultValue:Ot.MACHINE.CHANGEOVER_COLOR,conditional:(n,e,t)=>t("department")===Bt.PRINTING,validation:{required:"Changeover color time is required",min:{value:0,message:"Changeover color time must be at least 0"}}},{name:"changeover_material",label:"Material Changeover (h)",type:"number",required:!0,defaultValue:Ot.MACHINE.CHANGEOVER_MATERIAL,conditional:(n,e,t)=>t("department")===Bt.PACKAGING,validation:{required:"Changeover material time is required",min:{value:0,message:"Changeover material time must be at least 0"}}}]},{title:"Disponibilità",fields:[{name:"active_shifts",label:"Active Shifts",type:"checkbox",required:!1,defaultValue:Ot.MACHINE.ACTIVE_SHIFTS,options:[{value:ba.T1,label:ba.T1},{value:ba.T2,label:ba.T2},{value:ba.T3,label:ba.T3}]},{name:"status",label:"Status",type:"select",required:!0,defaultValue:Ot.MACHINE.STATUS,options:[{value:$i.ACTIVE,label:$i.ACTIVE},{value:$i.INACTIVE,label:$i.INACTIVE}],validation:{required:"Status is required"}}]}]},di={validationSchema:"PHASE",addButtonText:"Aggiungi Fase",editButtonText:"Aggiorna Fase",addLoadingText:"Aggiunta Fase...",editLoadingText:"Aggiornamento Fase...",addContext:"Add Phase",editContext:"Update Phase",addErrorMessage:"Aggiunta fase fallita",editErrorMessage:"Aggiornamento fase fallita",sections:[{title:"Informazioni Fase",fields:[{name:"name",label:"Nome Fase",type:"text",required:!0,placeholder:"es. Stampa Alta Velocità"},{name:"department",label:"Tipo Fase",type:"select",required:!0,options:[{value:Bt.PRINTING,label:Bt.PRINTING},{value:Bt.PACKAGING,label:Bt.PACKAGING}],defaultValue:Ot.PHASE.DEPARTMENT},{name:"numero_persone",label:"Numero di Persone Richieste",type:"number",required:!0,defaultValue:Ot.PHASE.NUMERO_PERSONE},{name:"work_center",label:"Centro di Lavoro",type:"select",required:!0,options:[{value:it.ZANICA,label:it.ZANICA},{value:it.BUSTO_GAROLFO,label:it.BUSTO_GAROLFO}],defaultValue:Ot.PHASE.WORK_CENTER,helpText:"Il centro di lavoro è impostato in base alla tua selezione di accesso"}]},{title:"Parametri Stampa",fields:[{name:"v_stampa",label:"Velocità Stampa (mt/h)",type:"number",required:!0,defaultValue:Ot.PHASE.V_STAMPA,conditional:(n,e,t)=>t("department")===Bt.PRINTING},{name:"t_setup_stampa",label:"Tempo Setup (ore)",type:"number",required:!0,defaultValue:Ot.PHASE.T_SETUP_STAMPA,conditional:(n,e,t)=>t("department")===Bt.PRINTING},{name:"costo_h_stampa",label:"Costo Orario (€/h)",type:"number",required:!0,defaultValue:Ot.PHASE.COSTO_H_STAMPA,conditional:(n,e,t)=>t("department")===Bt.PRINTING}]},{title:"Parametri Confezionamento",fields:[{name:"v_conf",label:"Velocità Confezionamento (pz/h)",type:"number",required:!0,defaultValue:Ot.PHASE.V_CONF,conditional:(n,e,t)=>t("department")===Bt.PACKAGING},{name:"t_setup_conf",label:"Tempo Setup (ore)",type:"number",required:!0,defaultValue:Ot.PHASE.T_SETUP_CONF,conditional:(n,e,t)=>t("department")===Bt.PACKAGING},{name:"costo_h_conf",label:"Costo Orario (€/h)",type:"number",required:!0,defaultValue:Ot.PHASE.COSTO_H_CONF,conditional:(n,e,t)=>t("department")===Bt.PACKAGING}]},{title:"Descrizione Fase",fields:[{name:"contenuto_fase",label:"Descrizione Contenuto Fase",type:"textarea",required:!0,placeholder:"Descrivi il contenuto della fase e i requisiti...",rows:3}],gridCols:"grid-cols-1"}]},dU={validationSchema:"ORDER",addButtonText:"Aggiungi al Backlog",editButtonText:"Aggiorna Ordine",addLoadingText:"Aggiunta...",editLoadingText:"Aggiornamento...",addContext:"Add Order",editContext:"Update Order",addErrorMessage:"Aggiunta ordine fallita",editErrorMessage:"Aggiornamento ordine fallito",sections:[{title:"Identificazione",fields:[{name:"odp_number",label:"Numero ODP",type:"text",required:!0,placeholder:"Inserisci numero ODP"},{name:"article_code",label:"Codice Articolo",type:"article_code",required:!0,placeholder:"Inserisci codice articolo"},{name:"production_lot",label:"Codice Articolo Esterno",type:"text",required:!0,placeholder:"Inserisci codice articolo esterno"},{name:"work_center",label:"Centro di Lavoro",type:"select",required:!0,placeholder:"Seleziona centro di lavoro",options:[{value:it.ZANICA,label:it.ZANICA},{value:it.BUSTO_GAROLFO,label:it.BUSTO_GAROLFO}],conditional:(n,e,t)=>!0},{name:"nome_cliente",label:"Nome Cliente",type:"text",required:!0,placeholder:"Inserisci nome cliente"}]},{title:"Specifiche Tecniche",fields:[{name:"bag_height",label:"Altezza Busta (mm)",type:"number",required:!1,placeholder:"Inserisci altezza busta"},{name:"bag_width",label:"Larghezza Busta (mm)",type:"number",required:!1,placeholder:"Inserisci larghezza busta"},{name:"bag_step",label:"Passo Busta (mm)",type:"number",required:!1,placeholder:"Inserisci passo busta"},{name:"seal_sides",label:"Lati Sigillatura",type:"select",required:!1,placeholder:"Seleziona...",options:[{value:"3",label:"3"},{value:"4",label:"4"}],defaultValue:Ot.ORDER.SEAL_SIDES},{name:"product_type",label:"Tipo Prodotto",type:"select",required:!1,placeholder:"Seleziona...",options:[{value:ya.CREMA,label:ya.CREMA},{value:ya.LIQUIDO,label:ya.LIQUIDO},{value:ya.POLVERI,label:ya.POLVERI}]},{name:"quantity",label:"Quantità",type:"number",required:!0,placeholder:"Inserisci quantità"},{name:"quantity_completed",label:"Q.tà Completata",type:"number",required:!0,defaultValue:Ot.ORDER.QUANTITY_COMPLETED}]},{title:"Dati Commerciali",fields:[{name:"internal_customer_code",label:"Lotto FLEXI",type:"text",required:!0,placeholder:"Inserisci lotto FLEXI"},{name:"external_customer_code",label:"Lotto Cliente",type:"text",required:!0,placeholder:"Inserisci lotto cliente"},{name:"customer_order_ref",label:"Riferimento Cliente",type:"text",required:!0,placeholder:"Inserisci riferimento cliente"},{name:"user_notes",label:"Note Libere",type:"textarea",required:!1,placeholder:"Inserisci note libere per l'ordine...",rows:3},{name:"asd_notes",label:"Note ASD",type:"textarea",required:!1,placeholder:"Inserisci note ASD per l'ordine...",rows:3}],gridCols:"grid-cols-2 md:grid-cols-3"},{title:"Dati Lavorazione & Pianificazione",fields:[{name:"department",label:"Reparto",type:"text",required:!0,readOnly:!0,className:"bg-gray-50"},{name:"phase_search",label:"Cerca Fase di Produzione",type:"phase_search",required:!0},{name:"delivery_date",label:"Data di Consegna",type:"datetime-local",required:!0}]},{title:"Disponibilità Materiali",fields:[{name:"material_availability_global",label:"Disponibilità Materiale Globale (%)",type:"number",required:!1,placeholder:"Inserisci percentuale disponibilità (0-100)",min:0,max:100}]}],customFields:{phase_parameters:{type:"phase_parameters",label:"Parametri Fase Selezionata"},calculation_results:{type:"calculation_results",label:"Risultati Calcolo Produzione"}},customValidation:n=>{const e={};return{isValid:Object.keys(e).length===0,errors:e}}},Lg={validationSchema:"OFF_TIME",addButtonText:"Imposta Non Disponibilità",editButtonText:"Aggiorna Non Disponibilità",addLoadingText:"Impostazione...",editLoadingText:"Aggiornamento...",addContext:"Set Machine Unavailability",editContext:"Update Machine Unavailability",addErrorMessage:"Impostazione indisponibilità macchina fallita",editErrorMessage:"Aggiornamento indisponibilità macchina fallita",sections:[{title:"Periodo di Non Disponibilità",fields:[{name:"startDate",label:"Data Inizio",type:"date",required:!0,defaultValue:""},{name:"startTime",label:"Ora Inizio",type:"time",required:!0,defaultValue:Ot.OFF_TIME.START_TIME},{name:"endDate",label:"Data Fine",type:"date",required:!0,defaultValue:""},{name:"endTime",label:"Ora Fine",type:"time",required:!0,defaultValue:Ot.OFF_TIME.END_TIME}]}],customValidation:n=>{const e={};if(n.startDate&&n.endDate){const t=new Date(n.startDate);new Date(n.endDate)<t&&(e.endDate=iw.END_DATE_BEFORE_START),n.startDate===n.endDate&&n.startTime&&n.endTime&&n.startTime>=n.endTime&&(e.endTime=iw.END_TIME_BEFORE_START)}return{isValid:Object.keys(e).length===0,errors:e}}};function hU({machineToEdit:n,onSuccess:e}){const{selectedWorkCenter:t}=is(),{getValidMachineTypes:r}=mT(),i=YF(),s=KF(),o=!!n,l=k.useMemo(()=>{const p={...Ir};return p.sections[0].fields[1].options=[...r("STAMPA").map(g=>({value:g,label:g})),...r("CONFEZIONAMENTO").map(g=>({value:g,label:g}))],p.sections[0].fields[1].placeholder="Seleziona tipo macchina",t!==it.BOTH&&(p.sections[0].fields[3].disabled=!0,p.sections[0].fields[3].defaultValue=t,p.sections[0].fields[3].helpText="Il centro di lavoro è pre-impostato."),p},[r,t]),c=k.useMemo(()=>({department:n?.department||Ir.sections[0].fields[0].defaultValue,machine_type:n?.machine_type||"",machine_name:n?.machine_name||"",work_center:n?.work_center||(t===it.BOTH?Ir.sections[0].fields[3].defaultValue:t),min_web_width:n?.min_web_width||Ir.sections[1].fields[0].defaultValue,max_web_width:n?.max_web_width||Ir.sections[1].fields[1].defaultValue,min_bag_height:n?.min_bag_height||Ir.sections[1].fields[2].defaultValue,max_bag_height:n?.max_bag_height||Ir.sections[1].fields[3].defaultValue,standard_speed:n?.standard_speed||"",setup_time_standard:n?.setup_time_standard||Ir.sections[2].fields[1].defaultValue,changeover_color:n?.changeover_color||Ir.sections[2].fields[2].defaultValue,changeover_material:n?.changeover_material||Ir.sections[2].fields[3].defaultValue,active_shifts:n?.active_shifts||Ir.sections[3].fields[0].defaultValue,status:n?.status||Ir.sections[3].fields[1].defaultValue}),[t,n]),d=async p=>{o?await s.mutateAsync({id:n.id,updates:p}):await i.mutateAsync(p),e&&e()},h=i.isPending||s.isPending;return E.jsx(Jh,{config:l,initialData:c,onSubmit:d,onSuccess:e,isEditMode:o,isLoading:h})}function fU({title:n,children:e}){return E.jsx("div",{className:"sticky top-0 z-10 bg-background border-b border-border px-2 py-3 mb-2",children:E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("div",{className:"flex items-center",children:n&&E.jsx("h2",{className:"text-[10px] font-semibold text-gray-900",children:n})}),e]})})}function cS(){const{id:n}=Xh(),e=xi(),{getMachineById:t}=Qv(),{selectedWorkCenter:r}=is(),{isLoading:i,isInitialized:s,init:o,cleanup:l}=uf(),c=!!n,d=c?t(n):null;return k.useEffect(()=>(s||o(),()=>{l()}),[o,s,l]),k.useEffect(()=>{c&&!i&&!d&&e("/machinery",{replace:!0})},[c,i,d,e]),i?E.jsx("div",{children:"Caricamento..."}):c&&!d?E.jsx("div",{className:"text-center py-2 text-red-600 text-[10px]",children:"Macchina non trovata."}):r?E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("h1",{className:"text-2xl font-semibold text-foreground",children:c?`Modifica Macchina: ${d?.machine_name}`:"Aggiungi Nuova Macchina"}),c&&E.jsx(ar,{to:`/machinery/${n}/calendar`,className:"inline-flex items-center px-4 py-2 border border-border rounded-md text-sm font-medium text-foreground bg-background hover:bg-muted",children:"Visualizza Calendario"})]}),E.jsx(hU,{machineToEdit:d})]}):E.jsx("div",{className:"text-center py-2 text-red-600 text-[10px]",children:"Seleziona un centro di lavoro per gestire le macchine."})}function pU({machineId:n,currentDate:e,onSuccess:t}){const{setMachineUnavailability:r}=_i(),{showAlert:i}=is(),s=k.useMemo(()=>{const l=new Date,c=Yc(l,1);return{startDate:xn(l,"yyyy-MM-dd"),endDate:xn(c,"yyyy-MM-dd"),startTime:Lg.sections[0].fields[1].defaultValue,endTime:Lg.sections[0].fields[3].defaultValue}},[e]),o=async l=>{await r(n,l.startDate,l.endDate,l.startTime,l.endTime),i("Indisponibilità macchina impostata con successo!","success"),t&&t()};return E.jsx(Jh,{config:Lg,initialData:s,onSubmit:o,onSuccess:t,className:"p-1 bg-white rounded-lg shadow-sm border"})}var df,Re,tk,nk,qa,Eo,uS,rk,ik,xh={},sk=[],gU=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function Is(n,e){for(var t in e)n[t]=e[t];return n}function ok(n){var e=n.parentNode;e&&e.removeChild(n)}function P(n,e,t){var r,i,s,o={};for(s in e)s=="key"?r=e[s]:s=="ref"?i=e[s]:o[s]=e[s];if(arguments.length>2&&(o.children=arguments.length>3?df.call(arguments,2):t),typeof n=="function"&&n.defaultProps!=null)for(s in n.defaultProps)o[s]===void 0&&(o[s]=n.defaultProps[s]);return nh(n,o,r,i,null)}function nh(n,e,t,r,i){var s={type:n,props:e,key:t,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:i??++tk};return i==null&&Re.vnode!=null&&Re.vnode(s),s}function Wn(){return{current:null}}function _t(n){return n.children}function mU(n,e,t,r,i){var s;for(s in t)s==="children"||s==="key"||s in e||Eh(n,s,null,t[s],r);for(s in e)i&&typeof e[s]!="function"||s==="children"||s==="key"||s==="value"||s==="checked"||t[s]===e[s]||Eh(n,s,e[s],t[s],r)}function dS(n,e,t){e[0]==="-"?n.setProperty(e,t??""):n[e]=t==null?"":typeof t!="number"||gU.test(e)?t:t+"px"}function Eh(n,e,t,r,i){var s;e:if(e==="style")if(typeof t=="string")n.style.cssText=t;else{if(typeof r=="string"&&(n.style.cssText=r=""),r)for(e in r)t&&e in t||dS(n.style,e,"");if(t)for(e in t)r&&t[e]===r[e]||dS(n.style,e,t[e])}else if(e[0]==="o"&&e[1]==="n")s=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in n?e.toLowerCase().slice(2):e.slice(2),n.l||(n.l={}),n.l[e+s]=t,t?r||n.addEventListener(e,s?fS:hS,s):n.removeEventListener(e,s?fS:hS,s);else if(e!=="dangerouslySetInnerHTML"){if(i)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="width"&&e!=="height"&&e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in n)try{n[e]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&e.indexOf("-")==-1?n.removeAttribute(e):n.setAttribute(e,t))}}function hS(n){qa=!0;try{return this.l[n.type+!1](Re.event?Re.event(n):n)}finally{qa=!1}}function fS(n){qa=!0;try{return this.l[n.type+!0](Re.event?Re.event(n):n)}finally{qa=!1}}function br(n,e){this.props=n,this.context=e}function kc(n,e){if(e==null)return n.__?kc(n.__,n.__.__k.indexOf(n)+1):null;for(var t;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null)return t.__e;return typeof n.type=="function"?kc(n):null}function ak(n){var e,t;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null){n.__e=n.__c.base=t.__e;break}return ak(n)}}function vU(n){qa?setTimeout(n):rk(n)}function Ym(n){(!n.__d&&(n.__d=!0)&&Eo.push(n)&&!Ch.__r++||uS!==Re.debounceRendering)&&((uS=Re.debounceRendering)||vU)(Ch)}function Ch(){var n,e,t,r,i,s,o,l;for(Eo.sort(function(c,d){return c.__v.__b-d.__v.__b});n=Eo.shift();)n.__d&&(e=Eo.length,r=void 0,i=void 0,o=(s=(t=n).__v).__e,(l=t.__P)&&(r=[],(i=Is({},s)).__v=s.__v+1,Xv(l,s,i,t.__n,l.ownerSVGElement!==void 0,s.__h!=null?[o]:null,r,o??kc(s),s.__h),hk(r,s),s.__e!=o&&ak(s)),Eo.length>e&&Eo.sort(function(c,d){return c.__v.__b-d.__v.__b}));Ch.__r=0}function lk(n,e,t,r,i,s,o,l,c,d){var h,p,g,v,y,_,w,x=r&&r.__k||sk,C=x.length;for(t.__k=[],h=0;h<e.length;h++)if((v=t.__k[h]=(v=e[h])==null||typeof v=="boolean"?null:typeof v=="string"||typeof v=="number"||typeof v=="bigint"?nh(null,v,null,null,v):Array.isArray(v)?nh(_t,{children:v},null,null,null):v.__b>0?nh(v.type,v.props,v.key,v.ref?v.ref:null,v.__v):v)!=null){if(v.__=t,v.__b=t.__b+1,(g=x[h])===null||g&&v.key==g.key&&v.type===g.type)x[h]=void 0;else for(p=0;p<C;p++){if((g=x[p])&&v.key==g.key&&v.type===g.type){x[p]=void 0;break}g=null}Xv(n,v,g=g||xh,i,s,o,l,c,d),y=v.__e,(p=v.ref)&&g.ref!=p&&(w||(w=[]),g.ref&&w.push(g.ref,null,v),w.push(p,v.__c||y,v)),y!=null?(_==null&&(_=y),typeof v.type=="function"&&v.__k===g.__k?v.__d=c=ck(v,c,n):c=uk(n,v,g,x,y,c),typeof t.type=="function"&&(t.__d=c)):c&&g.__e==c&&c.parentNode!=n&&(c=kc(g))}for(t.__e=_,h=C;h--;)x[h]!=null&&(typeof t.type=="function"&&x[h].__e!=null&&x[h].__e==t.__d&&(t.__d=dk(r).nextSibling),pk(x[h],x[h]));if(w)for(h=0;h<w.length;h++)fk(w[h],w[++h],w[++h])}function ck(n,e,t){for(var r,i=n.__k,s=0;i&&s<i.length;s++)(r=i[s])&&(r.__=n,e=typeof r.type=="function"?ck(r,e,t):uk(t,r,r,i,r.__e,e));return e}function Th(n,e){return e=e||[],n==null||typeof n=="boolean"||(Array.isArray(n)?n.some(function(t){Th(t,e)}):e.push(n)),e}function uk(n,e,t,r,i,s){var o,l,c;if(e.__d!==void 0)o=e.__d,e.__d=void 0;else if(t==null||i!=s||i.parentNode==null)e:if(s==null||s.parentNode!==n)n.appendChild(i),o=null;else{for(l=s,c=0;(l=l.nextSibling)&&c<r.length;c+=1)if(l==i)break e;n.insertBefore(i,s),o=s}return o!==void 0?o:i.nextSibling}function dk(n){var e,t,r;if(n.type==null||typeof n.type=="string")return n.__e;if(n.__k){for(e=n.__k.length-1;e>=0;e--)if((t=n.__k[e])&&(r=dk(t)))return r}return null}function Xv(n,e,t,r,i,s,o,l,c){var d,h,p,g,v,y,_,w,x,C,T,R,D,O,M,I=e.type;if(e.constructor!==void 0)return null;t.__h!=null&&(c=t.__h,l=e.__e=t.__e,e.__h=null,s=[l]),(d=Re.__b)&&d(e);try{e:if(typeof I=="function"){if(w=e.props,x=(d=I.contextType)&&r[d.__c],C=d?x?x.props.value:d.__:r,t.__c?_=(h=e.__c=t.__c).__=h.__E:("prototype"in I&&I.prototype.render?e.__c=h=new I(w,C):(e.__c=h=new br(w,C),h.constructor=I,h.render=bU),x&&x.sub(h),h.props=w,h.state||(h.state={}),h.context=C,h.__n=r,p=h.__d=!0,h.__h=[],h._sb=[]),h.__s==null&&(h.__s=h.state),I.getDerivedStateFromProps!=null&&(h.__s==h.state&&(h.__s=Is({},h.__s)),Is(h.__s,I.getDerivedStateFromProps(w,h.__s))),g=h.props,v=h.state,h.__v=e,p)I.getDerivedStateFromProps==null&&h.componentWillMount!=null&&h.componentWillMount(),h.componentDidMount!=null&&h.__h.push(h.componentDidMount);else{if(I.getDerivedStateFromProps==null&&w!==g&&h.componentWillReceiveProps!=null&&h.componentWillReceiveProps(w,C),!h.__e&&h.shouldComponentUpdate!=null&&h.shouldComponentUpdate(w,h.__s,C)===!1||e.__v===t.__v){for(e.__v!==t.__v&&(h.props=w,h.state=h.__s,h.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.forEach(function(F){F&&(F.__=e)}),T=0;T<h._sb.length;T++)h.__h.push(h._sb[T]);h._sb=[],h.__h.length&&o.push(h);break e}h.componentWillUpdate!=null&&h.componentWillUpdate(w,h.__s,C),h.componentDidUpdate!=null&&h.__h.push(function(){h.componentDidUpdate(g,v,y)})}if(h.context=C,h.props=w,h.__P=n,R=Re.__r,D=0,"prototype"in I&&I.prototype.render){for(h.state=h.__s,h.__d=!1,R&&R(e),d=h.render(h.props,h.state,h.context),O=0;O<h._sb.length;O++)h.__h.push(h._sb[O]);h._sb=[]}else do h.__d=!1,R&&R(e),d=h.render(h.props,h.state,h.context),h.state=h.__s;while(h.__d&&++D<25);h.state=h.__s,h.getChildContext!=null&&(r=Is(Is({},r),h.getChildContext())),p||h.getSnapshotBeforeUpdate==null||(y=h.getSnapshotBeforeUpdate(g,v)),M=d!=null&&d.type===_t&&d.key==null?d.props.children:d,lk(n,Array.isArray(M)?M:[M],e,t,r,i,s,o,l,c),h.base=e.__e,e.__h=null,h.__h.length&&o.push(h),_&&(h.__E=h.__=null),h.__e=!1}else s==null&&e.__v===t.__v?(e.__k=t.__k,e.__e=t.__e):e.__e=yU(t.__e,e,t,r,i,s,o,c);(d=Re.diffed)&&d(e)}catch(F){e.__v=null,(c||s!=null)&&(e.__e=l,e.__h=!!c,s[s.indexOf(l)]=null),Re.__e(F,e,t)}}function hk(n,e){Re.__c&&Re.__c(e,n),n.some(function(t){try{n=t.__h,t.__h=[],n.some(function(r){r.call(t)})}catch(r){Re.__e(r,t.__v)}})}function yU(n,e,t,r,i,s,o,l){var c,d,h,p=t.props,g=e.props,v=e.type,y=0;if(v==="svg"&&(i=!0),s!=null){for(;y<s.length;y++)if((c=s[y])&&"setAttribute"in c==!!v&&(v?c.localName===v:c.nodeType===3)){n=c,s[y]=null;break}}if(n==null){if(v===null)return document.createTextNode(g);n=i?document.createElementNS("http://www.w3.org/2000/svg",v):document.createElement(v,g.is&&g),s=null,l=!1}if(v===null)p===g||l&&n.data===g||(n.data=g);else{if(s=s&&df.call(n.childNodes),d=(p=t.props||xh).dangerouslySetInnerHTML,h=g.dangerouslySetInnerHTML,!l){if(s!=null)for(p={},y=0;y<n.attributes.length;y++)p[n.attributes[y].name]=n.attributes[y].value;(h||d)&&(h&&(d&&h.__html==d.__html||h.__html===n.innerHTML)||(n.innerHTML=h&&h.__html||""))}if(mU(n,g,p,i,l),h)e.__k=[];else if(y=e.props.children,lk(n,Array.isArray(y)?y:[y],e,t,r,i&&v!=="foreignObject",s,o,s?s[0]:t.__k&&kc(t,0),l),s!=null)for(y=s.length;y--;)s[y]!=null&&ok(s[y]);l||("value"in g&&(y=g.value)!==void 0&&(y!==n.value||v==="progress"&&!y||v==="option"&&y!==p.value)&&Eh(n,"value",y,p.value,!1),"checked"in g&&(y=g.checked)!==void 0&&y!==n.checked&&Eh(n,"checked",y,p.checked,!1))}return n}function fk(n,e,t){try{typeof n=="function"?n(e):n.current=e}catch(r){Re.__e(r,t)}}function pk(n,e,t){var r,i;if(Re.unmount&&Re.unmount(n),(r=n.ref)&&(r.current&&r.current!==n.__e||fk(r,null,e)),(r=n.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(s){Re.__e(s,e)}r.base=r.__P=null,n.__c=void 0}if(r=n.__k)for(i=0;i<r.length;i++)r[i]&&pk(r[i],e,t||typeof n.type!="function");t||n.__e==null||ok(n.__e),n.__=n.__e=n.__d=void 0}function bU(n,e,t){return this.constructor(n,t)}function Ac(n,e,t){var r,i,s;Re.__&&Re.__(n,e),i=(r=!1)?null:e.__k,s=[],Xv(e,n=e.__k=P(_t,null,[n]),i||xh,xh,e.ownerSVGElement!==void 0,i?null:e.firstChild?df.call(e.childNodes):null,s,i?i.__e:e.firstChild,r),hk(s,n)}function _U(n,e){var t={__c:e="__cC"+ik++,__:n,Consumer:function(r,i){return r.children(i)},Provider:function(r){var i,s;return this.getChildContext||(i=[],(s={})[e]=this,this.getChildContext=function(){return s},this.shouldComponentUpdate=function(o){this.props.value!==o.value&&i.some(function(l){l.__e=!0,Ym(l)})},this.sub=function(o){i.push(o);var l=o.componentWillUnmount;o.componentWillUnmount=function(){i.splice(i.indexOf(o),1),l&&l.call(o)}}),r.children}};return t.Provider.__=t.Consumer.contextType=t}df=sk.slice,Re={__e:function(n,e,t,r){for(var i,s,o;e=e.__;)if((i=e.__c)&&!i.__)try{if((s=i.constructor)&&s.getDerivedStateFromError!=null&&(i.setState(s.getDerivedStateFromError(n)),o=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(n,r||{}),o=i.__d),o)return i.__E=i}catch(l){n=l}throw n}},tk=0,nk=function(n){return n!=null&&n.constructor===void 0},qa=!1,br.prototype.setState=function(n,e){var t;t=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Is({},this.state),typeof n=="function"&&(n=n(Is({},t),this.props)),n&&Is(t,n),n!=null&&this.__v&&(e&&this._sb.push(e),Ym(this))},br.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),Ym(this))},br.prototype.render=_t,Eo=[],rk=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ch.__r=0,ik=0;var vi,Fg,pS,gk=[],Ug=[],gS=Re.__b,mS=Re.__r,vS=Re.diffed,yS=Re.__c,bS=Re.unmount;function wU(){for(var n;n=gk.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(rh),n.__H.__h.forEach(Km),n.__H.__h=[]}catch(e){n.__H.__h=[],Re.__e(e,n.__v)}}Re.__b=function(n){vi=null,gS&&gS(n)},Re.__r=function(n){mS&&mS(n);var e=(vi=n.__c).__H;e&&(Fg===vi?(e.__h=[],vi.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.__V=Ug,t.__N=t.i=void 0})):(e.__h.forEach(rh),e.__h.forEach(Km),e.__h=[])),Fg=vi},Re.diffed=function(n){vS&&vS(n);var e=n.__c;e&&e.__H&&(e.__H.__h.length&&(gk.push(e)!==1&&pS===Re.requestAnimationFrame||((pS=Re.requestAnimationFrame)||SU)(wU)),e.__H.__.forEach(function(t){t.i&&(t.__H=t.i),t.__V!==Ug&&(t.__=t.__V),t.i=void 0,t.__V=Ug})),Fg=vi=null},Re.__c=function(n,e){e.some(function(t){try{t.__h.forEach(rh),t.__h=t.__h.filter(function(r){return!r.__||Km(r)})}catch(r){e.some(function(i){i.__h&&(i.__h=[])}),e=[],Re.__e(r,t.__v)}}),yS&&yS(n,e)},Re.unmount=function(n){bS&&bS(n);var e,t=n.__c;t&&t.__H&&(t.__H.__.forEach(function(r){try{rh(r)}catch(i){e=i}}),t.__H=void 0,e&&Re.__e(e,t.__v))};var _S=typeof requestAnimationFrame=="function";function SU(n){var e,t=function(){clearTimeout(r),_S&&cancelAnimationFrame(e),setTimeout(n)},r=setTimeout(t,100);_S&&(e=requestAnimationFrame(t))}function rh(n){var e=vi,t=n.__c;typeof t=="function"&&(n.__c=void 0,t()),vi=e}function Km(n){var e=vi;n.__c=n.__(),vi=e}function xU(n,e){for(var t in e)n[t]=e[t];return n}function wS(n,e){for(var t in n)if(t!=="__source"&&!(t in e))return!0;for(var r in e)if(r!=="__source"&&n[r]!==e[r])return!0;return!1}function SS(n){this.props=n}(SS.prototype=new br).isPureReactComponent=!0,SS.prototype.shouldComponentUpdate=function(n,e){return wS(this.props,n)||wS(this.state,e)};var xS=Re.__b;Re.__b=function(n){n.type&&n.type.__f&&n.ref&&(n.props.ref=n.ref,n.ref=null),xS&&xS(n)};var EU=Re.__e;Re.__e=function(n,e,t,r){if(n.then){for(var i,s=e;s=s.__;)if((i=s.__c)&&i.__c)return e.__e==null&&(e.__e=t.__e,e.__k=t.__k),i.__c(n,e)}EU(n,e,t,r)};var ES=Re.unmount;function mk(n,e,t){return n&&(n.__c&&n.__c.__H&&(n.__c.__H.__.forEach(function(r){typeof r.__c=="function"&&r.__c()}),n.__c.__H=null),(n=xU({},n)).__c!=null&&(n.__c.__P===t&&(n.__c.__P=e),n.__c=null),n.__k=n.__k&&n.__k.map(function(r){return mk(r,e,t)})),n}function vk(n,e,t){return n&&(n.__v=null,n.__k=n.__k&&n.__k.map(function(r){return vk(r,e,t)}),n.__c&&n.__c.__P===e&&(n.__e&&t.insertBefore(n.__e,n.__d),n.__c.__e=!0,n.__c.__P=t)),n}function Bg(){this.__u=0,this.t=null,this.__b=null}function yk(n){var e=n.__.__c;return e&&e.__a&&e.__a(n)}function Rd(){this.u=null,this.o=null}Re.unmount=function(n){var e=n.__c;e&&e.__R&&e.__R(),e&&n.__h===!0&&(n.type=null),ES&&ES(n)},(Bg.prototype=new br).__c=function(n,e){var t=e.__c,r=this;r.t==null&&(r.t=[]),r.t.push(t);var i=yk(r.__v),s=!1,o=function(){s||(s=!0,t.__R=null,i?i(l):l())};t.__R=o;var l=function(){if(!--r.__u){if(r.state.__a){var d=r.state.__a;r.__v.__k[0]=vk(d,d.__c.__P,d.__c.__O)}var h;for(r.setState({__a:r.__b=null});h=r.t.pop();)h.forceUpdate()}},c=e.__h===!0;r.__u++||c||r.setState({__a:r.__b=r.__v.__k[0]}),n.then(o,o)},Bg.prototype.componentWillUnmount=function(){this.t=[]},Bg.prototype.render=function(n,e){if(this.__b){if(this.__v.__k){var t=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=mk(this.__b,t,r.__O=r.__P)}this.__b=null}var i=e.__a&&P(_t,null,n.fallback);return i&&(i.__h=null),[P(_t,null,e.__a?null:n.children),i]};var CS=function(n,e,t){if(++t[1]===t[0]&&n.o.delete(e),n.props.revealOrder&&(n.props.revealOrder[0]!=="t"||!n.o.size))for(t=n.u;t;){for(;t.length>3;)t.pop()();if(t[1]<t[0])break;n.u=t=t[2]}};function CU(n){return this.getChildContext=function(){return n.context},n.children}function TU(n){var e=this,t=n.i;e.componentWillUnmount=function(){Ac(null,e.l),e.l=null,e.i=null},e.i&&e.i!==t&&e.componentWillUnmount(),n.__v?(e.l||(e.i=t,e.l={nodeType:1,parentNode:t,childNodes:[],appendChild:function(r){this.childNodes.push(r),e.i.appendChild(r)},insertBefore:function(r,i){this.childNodes.push(r),e.i.appendChild(r)},removeChild:function(r){this.childNodes.splice(this.childNodes.indexOf(r)>>>1,1),e.i.removeChild(r)}}),Ac(P(CU,{context:e.context},n.__v),e.l)):e.l&&e.componentWillUnmount()}function kU(n,e){var t=P(TU,{__v:n,i:e});return t.containerInfo=e,t}(Rd.prototype=new br).__a=function(n){var e=this,t=yk(e.__v),r=e.o.get(n);return r[0]++,function(i){var s=function(){e.props.revealOrder?(r.push(i),CS(e,n,r)):i()};t?t(s):s()}},Rd.prototype.render=function(n){this.u=null,this.o=new Map;var e=Th(n.children);n.revealOrder&&n.revealOrder[0]==="b"&&e.reverse();for(var t=e.length;t--;)this.o.set(e[t],this.u=[1,0,this.u]);return n.children},Rd.prototype.componentDidUpdate=Rd.prototype.componentDidMount=function(){var n=this;this.o.forEach(function(e,t){CS(n,t,e)})};var AU=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,DU=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,RU=typeof document<"u",OU=function(n){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(n)};br.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(n){Object.defineProperty(br.prototype,n,{configurable:!0,get:function(){return this["UNSAFE_"+n]},set:function(e){Object.defineProperty(this,n,{configurable:!0,writable:!0,value:e})}})});var TS=Re.event;function IU(){}function MU(){return this.cancelBubble}function NU(){return this.defaultPrevented}Re.event=function(n){return TS&&(n=TS(n)),n.persist=IU,n.isPropagationStopped=MU,n.isDefaultPrevented=NU,n.nativeEvent=n};var kS={configurable:!0,get:function(){return this.class}},AS=Re.vnode;Re.vnode=function(n){var e=n.type,t=n.props,r=t;if(typeof e=="string"){var i=e.indexOf("-")===-1;for(var s in r={},t){var o=t[s];RU&&s==="children"&&e==="noscript"||s==="value"&&"defaultValue"in t&&o==null||(s==="defaultValue"&&"value"in t&&t.value==null?s="value":s==="download"&&o===!0?o="":/ondoubleclick/i.test(s)?s="ondblclick":/^onchange(textarea|input)/i.test(s+e)&&!OU(t.type)?s="oninput":/^onfocus$/i.test(s)?s="onfocusin":/^onblur$/i.test(s)?s="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(s)?s=s.toLowerCase():i&&DU.test(s)?s=s.replace(/[A-Z0-9]/g,"-$&").toLowerCase():o===null&&(o=void 0),/^oninput$/i.test(s)&&(s=s.toLowerCase(),r[s]&&(s="oninputCapture")),r[s]=o)}e=="select"&&r.multiple&&Array.isArray(r.value)&&(r.value=Th(t.children).forEach(function(l){l.props.selected=r.value.indexOf(l.props.value)!=-1})),e=="select"&&r.defaultValue!=null&&(r.value=Th(t.children).forEach(function(l){l.props.selected=r.multiple?r.defaultValue.indexOf(l.props.value)!=-1:r.defaultValue==l.props.value})),n.props=r,t.class!=t.className&&(kS.enumerable="className"in t,t.className!=null&&(r.class=t.className),Object.defineProperty(r,"className",kS))}n.$$typeof=AU,AS&&AS(n)};var DS=Re.__r;Re.__r=function(n){DS&&DS(n),n.__c};const bk=[],Qm=new Map;function hf(n){bk.push(n),Qm.forEach(e=>{wk(e,n)})}function PU(n){n.isConnected&&n.getRootNode&&_k(n.getRootNode())}function _k(n){let e=Qm.get(n);if(!e||!e.isConnected){if(e=n.querySelector("style[data-fullcalendar]"),!e){e=document.createElement("style"),e.setAttribute("data-fullcalendar","");const t=LU();t&&(e.nonce=t);const r=n===document?document.head:n,i=n===document?r.querySelector("script,link[rel=stylesheet],link[as=style],style"):r.firstChild;r.insertBefore(e,i)}Qm.set(n,e),jU(e)}}function jU(n){for(const e of bk)wk(n,e)}function wk(n,e){const{sheet:t}=n,r=t.cssRules.length;e.split("}").forEach((i,s)=>{i=i.trim(),i&&t.insertRule(i+"}",r+s)})}let Hg;function LU(){return Hg===void 0&&(Hg=FU()),Hg}function FU(){const n=document.querySelector('meta[name="csp-nonce"]');if(n&&n.hasAttribute("content"))return n.getAttribute("content");const e=document.querySelector("script[nonce]");return e&&e.nonce||""}typeof document<"u"&&_k(document);var UU=':root{--fc-small-font-size:.85em;--fc-page-bg-color:#fff;--fc-neutral-bg-color:hsla(0,0%,82%,.3);--fc-neutral-text-color:grey;--fc-border-color:#ddd;--fc-button-text-color:#fff;--fc-button-bg-color:#2c3e50;--fc-button-border-color:#2c3e50;--fc-button-hover-bg-color:#1e2b37;--fc-button-hover-border-color:#1a252f;--fc-button-active-bg-color:#1a252f;--fc-button-active-border-color:#151e27;--fc-event-bg-color:#3788d8;--fc-event-border-color:#3788d8;--fc-event-text-color:#fff;--fc-event-selected-overlay-color:rgba(0,0,0,.25);--fc-more-link-bg-color:#d0d0d0;--fc-more-link-text-color:inherit;--fc-event-resizer-thickness:8px;--fc-event-resizer-dot-total-width:8px;--fc-event-resizer-dot-border-width:1px;--fc-non-business-color:hsla(0,0%,84%,.3);--fc-bg-event-color:#8fdf82;--fc-bg-event-opacity:0.3;--fc-highlight-color:rgba(188,232,241,.3);--fc-today-bg-color:rgba(255,220,40,.15);--fc-now-indicator-color:red}.fc-not-allowed,.fc-not-allowed .fc-event{cursor:not-allowed}.fc{display:flex;flex-direction:column;font-size:1em}.fc,.fc *,.fc :after,.fc :before{box-sizing:border-box}.fc table{border-collapse:collapse;border-spacing:0;font-size:1em}.fc th{text-align:center}.fc td,.fc th{padding:0;vertical-align:top}.fc a[data-navlink]{cursor:pointer}.fc a[data-navlink]:hover{text-decoration:underline}.fc-direction-ltr{direction:ltr;text-align:left}.fc-direction-rtl{direction:rtl;text-align:right}.fc-theme-standard td,.fc-theme-standard th{border:1px solid var(--fc-border-color)}.fc-liquid-hack td,.fc-liquid-hack th{position:relative}@font-face{font-family:fcicons;font-style:normal;font-weight:400;src:url("data:application/x-font-ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMg8SBfAAAAC8AAAAYGNtYXAXVtKNAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZgYydxIAAAF4AAAFNGhlYWQUJ7cIAAAGrAAAADZoaGVhB20DzAAABuQAAAAkaG10eCIABhQAAAcIAAAALGxvY2ED4AU6AAAHNAAAABhtYXhwAA8AjAAAB0wAAAAgbmFtZXsr690AAAdsAAABhnBvc3QAAwAAAAAI9AAAACAAAwPAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpBgPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6Qb//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAWIAjQKeAskAEwAAJSc3NjQnJiIHAQYUFwEWMjc2NCcCnuLiDQ0MJAz/AA0NAQAMJAwNDcni4gwjDQwM/wANIwz/AA0NDCMNAAAAAQFiAI0CngLJABMAACUBNjQnASYiBwYUHwEHBhQXFjI3AZ4BAA0N/wAMJAwNDeLiDQ0MJAyNAQAMIw0BAAwMDSMM4uINIwwNDQAAAAIA4gC3Ax4CngATACcAACUnNzY0JyYiDwEGFB8BFjI3NjQnISc3NjQnJiIPAQYUHwEWMjc2NCcB87e3DQ0MIw3VDQ3VDSMMDQ0BK7e3DQ0MJAzVDQ3VDCQMDQ3zuLcMJAwNDdUNIwzWDAwNIwy4twwkDA0N1Q0jDNYMDA0jDAAAAgDiALcDHgKeABMAJwAAJTc2NC8BJiIHBhQfAQcGFBcWMjchNzY0LwEmIgcGFB8BBwYUFxYyNwJJ1Q0N1Q0jDA0Nt7cNDQwjDf7V1Q0N1QwkDA0Nt7cNDQwkDLfWDCMN1Q0NDCQMt7gMIw0MDNYMIw3VDQ0MJAy3uAwjDQwMAAADAFUAAAOrA1UAMwBoAHcAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMhMjY1NCYjISIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAAVYRGRkR/qoRGRkRA1UFBAUOCQkVDAsZDf2rDRkLDBUJCA4FBQUFBQUOCQgVDAsZDQJVDRkLDBUJCQ4FBAVVAgECBQMCBwQECAX9qwQJAwQHAwMFAQICAgIBBQMDBwQDCQQCVQUIBAQHAgMFAgEC/oAZEhEZGRESGQAAAAADAFUAAAOrA1UAMwBoAIkAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMzFRQWMzI2PQEzMjY1NCYrATU0JiMiBh0BIyIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAgBkSEhmAERkZEYAZEhIZgBEZGREDVQUEBQ4JCRUMCxkN/asNGQsMFQkIDgUFBQUFBQ4JCBUMCxkNAlUNGQsMFQkJDgUEBVUCAQIFAwIHBAQIBf2rBAkDBAcDAwUBAgICAgEFAwMHBAMJBAJVBQgEBAcCAwUCAQL+gIASGRkSgBkSERmAEhkZEoAZERIZAAABAOIAjQMeAskAIAAAExcHBhQXFjI/ARcWMjc2NC8BNzY0JyYiDwEnJiIHBhQX4uLiDQ0MJAzi4gwkDA0N4uINDQwkDOLiDCQMDQ0CjeLiDSMMDQ3h4Q0NDCMN4uIMIw0MDOLiDAwNIwwAAAABAAAAAQAAa5n0y18PPPUACwQAAAAAANivOVsAAAAA2K85WwAAAAADqwNVAAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAOrAAEAAAAAAAAAAAAAAAAAAAALBAAAAAAAAAAAAAAAAgAAAAQAAWIEAAFiBAAA4gQAAOIEAABVBAAAVQQAAOIAAAAAAAoAFAAeAEQAagCqAOoBngJkApoAAQAAAAsAigADAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApGZjaWNvbnMAZgBjAGkAYwBvAG4Ac1ZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGZjaWNvbnMAZgBjAGkAYwBvAG4Ac2ZjaWNvbnMAZgBjAGkAYwBvAG4Ac1JlZ3VsYXIAUgBlAGcAdQBsAGEAcmZjaWNvbnMAZgBjAGkAYwBvAG4Ac0ZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=") format("truetype")}.fc-icon{speak:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:inline-block;font-family:fcicons!important;font-style:normal;font-variant:normal;font-weight:400;height:1em;line-height:1;text-align:center;text-transform:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:1em}.fc-icon-chevron-left:before{content:"\\e900"}.fc-icon-chevron-right:before{content:"\\e901"}.fc-icon-chevrons-left:before{content:"\\e902"}.fc-icon-chevrons-right:before{content:"\\e903"}.fc-icon-minus-square:before{content:"\\e904"}.fc-icon-plus-square:before{content:"\\e905"}.fc-icon-x:before{content:"\\e906"}.fc .fc-button{border-radius:0;font-family:inherit;font-size:inherit;line-height:inherit;margin:0;overflow:visible;text-transform:none}.fc .fc-button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}.fc .fc-button{-webkit-appearance:button}.fc .fc-button:not(:disabled){cursor:pointer}.fc .fc-button{background-color:transparent;border:1px solid transparent;border-radius:.25em;display:inline-block;font-size:1em;font-weight:400;line-height:1.5;padding:.4em .65em;text-align:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle}.fc .fc-button:hover{text-decoration:none}.fc .fc-button:focus{box-shadow:0 0 0 .2rem rgba(44,62,80,.25);outline:0}.fc .fc-button:disabled{opacity:.65}.fc .fc-button-primary{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:hover{background-color:var(--fc-button-hover-bg-color);border-color:var(--fc-button-hover-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:disabled{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button-primary:not(:disabled).fc-button-active,.fc .fc-button-primary:not(:disabled):active{background-color:var(--fc-button-active-bg-color);border-color:var(--fc-button-active-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:not(:disabled).fc-button-active:focus,.fc .fc-button-primary:not(:disabled):active:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button .fc-icon{font-size:1.5em;vertical-align:middle}.fc .fc-button-group{display:inline-flex;position:relative;vertical-align:middle}.fc .fc-button-group>.fc-button{flex:1 1 auto;position:relative}.fc .fc-button-group>.fc-button.fc-button-active,.fc .fc-button-group>.fc-button:active,.fc .fc-button-group>.fc-button:focus,.fc .fc-button-group>.fc-button:hover{z-index:1}.fc-direction-ltr .fc-button-group>.fc-button:not(:first-child){border-bottom-left-radius:0;border-top-left-radius:0;margin-left:-1px}.fc-direction-ltr .fc-button-group>.fc-button:not(:last-child){border-bottom-right-radius:0;border-top-right-radius:0}.fc-direction-rtl .fc-button-group>.fc-button:not(:first-child){border-bottom-right-radius:0;border-top-right-radius:0;margin-right:-1px}.fc-direction-rtl .fc-button-group>.fc-button:not(:last-child){border-bottom-left-radius:0;border-top-left-radius:0}.fc .fc-toolbar{align-items:center;display:flex;justify-content:space-between}.fc .fc-toolbar.fc-header-toolbar{margin-bottom:1.5em}.fc .fc-toolbar.fc-footer-toolbar{margin-top:1.5em}.fc .fc-toolbar-title{font-size:1.75em;margin:0}.fc-direction-ltr .fc-toolbar>*>:not(:first-child){margin-left:.75em}.fc-direction-rtl .fc-toolbar>*>:not(:first-child){margin-right:.75em}.fc-direction-rtl .fc-toolbar-ltr{flex-direction:row-reverse}.fc .fc-scroller{-webkit-overflow-scrolling:touch;position:relative}.fc .fc-scroller-liquid{height:100%}.fc .fc-scroller-liquid-absolute{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-scroller-harness{direction:ltr;overflow:hidden;position:relative}.fc .fc-scroller-harness-liquid{height:100%}.fc-direction-rtl .fc-scroller-harness>.fc-scroller{direction:rtl}.fc-theme-standard .fc-scrollgrid{border:1px solid var(--fc-border-color)}.fc .fc-scrollgrid,.fc .fc-scrollgrid table{table-layout:fixed;width:100%}.fc .fc-scrollgrid table{border-left-style:hidden;border-right-style:hidden;border-top-style:hidden}.fc .fc-scrollgrid{border-bottom-width:0;border-collapse:separate;border-right-width:0}.fc .fc-scrollgrid-liquid{height:100%}.fc .fc-scrollgrid-section,.fc .fc-scrollgrid-section table,.fc .fc-scrollgrid-section>td{height:1px}.fc .fc-scrollgrid-section-liquid>td{height:100%}.fc .fc-scrollgrid-section>*{border-left-width:0;border-top-width:0}.fc .fc-scrollgrid-section-footer>*,.fc .fc-scrollgrid-section-header>*{border-bottom-width:0}.fc .fc-scrollgrid-section-body table,.fc .fc-scrollgrid-section-footer table{border-bottom-style:hidden}.fc .fc-scrollgrid-section-sticky>*{background:var(--fc-page-bg-color);position:sticky;z-index:3}.fc .fc-scrollgrid-section-header.fc-scrollgrid-section-sticky>*{top:0}.fc .fc-scrollgrid-section-footer.fc-scrollgrid-section-sticky>*{bottom:0}.fc .fc-scrollgrid-sticky-shim{height:1px;margin-bottom:-1px}.fc-sticky{position:sticky}.fc .fc-view-harness{flex-grow:1;position:relative}.fc .fc-view-harness-active>.fc-view{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-col-header-cell-cushion{display:inline-block;padding:2px 4px}.fc .fc-bg-event,.fc .fc-highlight,.fc .fc-non-business{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-non-business{background:var(--fc-non-business-color)}.fc .fc-bg-event{background:var(--fc-bg-event-color);opacity:var(--fc-bg-event-opacity)}.fc .fc-bg-event .fc-event-title{font-size:var(--fc-small-font-size);font-style:italic;margin:.5em}.fc .fc-highlight{background:var(--fc-highlight-color)}.fc .fc-cell-shaded,.fc .fc-day-disabled{background:var(--fc-neutral-bg-color)}a.fc-event,a.fc-event:hover{text-decoration:none}.fc-event.fc-event-draggable,.fc-event[href]{cursor:pointer}.fc-event .fc-event-main{position:relative;z-index:2}.fc-event-dragging:not(.fc-event-selected){opacity:.75}.fc-event-dragging.fc-event-selected{box-shadow:0 2px 7px rgba(0,0,0,.3)}.fc-event .fc-event-resizer{display:none;position:absolute;z-index:4}.fc-event-selected .fc-event-resizer,.fc-event:hover .fc-event-resizer{display:block}.fc-event-selected .fc-event-resizer{background:var(--fc-page-bg-color);border-color:inherit;border-radius:calc(var(--fc-event-resizer-dot-total-width)/2);border-style:solid;border-width:var(--fc-event-resizer-dot-border-width);height:var(--fc-event-resizer-dot-total-width);width:var(--fc-event-resizer-dot-total-width)}.fc-event-selected .fc-event-resizer:before{bottom:-20px;content:"";left:-20px;position:absolute;right:-20px;top:-20px}.fc-event-selected,.fc-event:focus{box-shadow:0 2px 5px rgba(0,0,0,.2)}.fc-event-selected:before,.fc-event:focus:before{bottom:0;content:"";left:0;position:absolute;right:0;top:0;z-index:3}.fc-event-selected:after,.fc-event:focus:after{background:var(--fc-event-selected-overlay-color);bottom:-1px;content:"";left:-1px;position:absolute;right:-1px;top:-1px;z-index:1}.fc-h-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-h-event .fc-event-main{color:var(--fc-event-text-color)}.fc-h-event .fc-event-main-frame{display:flex}.fc-h-event .fc-event-time{max-width:100%;overflow:hidden}.fc-h-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-width:0}.fc-h-event .fc-event-title{display:inline-block;left:0;max-width:100%;overflow:hidden;right:0;vertical-align:top}.fc-h-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-start),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-end){border-bottom-left-radius:0;border-left-width:0;border-top-left-radius:0}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-end),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-start){border-bottom-right-radius:0;border-right-width:0;border-top-right-radius:0}.fc-h-event:not(.fc-event-selected) .fc-event-resizer{bottom:0;top:0;width:var(--fc-event-resizer-thickness)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end{cursor:w-resize;left:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start{cursor:e-resize;right:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-h-event.fc-event-selected .fc-event-resizer{margin-top:calc(var(--fc-event-resizer-dot-total-width)*-.5);top:50%}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-start,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-end{left:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-end,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-start{right:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc .fc-popover{box-shadow:0 2px 6px rgba(0,0,0,.15);position:absolute;z-index:9999}.fc .fc-popover-header{align-items:center;display:flex;flex-direction:row;justify-content:space-between;padding:3px 4px}.fc .fc-popover-title{margin:0 2px}.fc .fc-popover-close{cursor:pointer;font-size:1.1em;opacity:.65}.fc-theme-standard .fc-popover{background:var(--fc-page-bg-color);border:1px solid var(--fc-border-color)}.fc-theme-standard .fc-popover-header{background:var(--fc-neutral-bg-color)}';hf(UU);class Zv{constructor(e){this.drainedOption=e,this.isRunning=!1,this.isDirty=!1,this.pauseDepths={},this.timeoutId=0}request(e){this.isDirty=!0,this.isPaused()||(this.clearTimeout(),e==null?this.tryDrain():this.timeoutId=setTimeout(this.tryDrain.bind(this),e))}pause(e=""){let{pauseDepths:t}=this;t[e]=(t[e]||0)+1,this.clearTimeout()}resume(e="",t){let{pauseDepths:r}=this;e in r&&(t?delete r[e]:(r[e]-=1,r[e]<=0&&delete r[e]),this.tryDrain())}isPaused(){return Object.keys(this.pauseDepths).length}tryDrain(){if(!this.isRunning&&!this.isPaused()){for(this.isRunning=!0;this.isDirty;)this.isDirty=!1,this.drained();this.isRunning=!1}}clear(){this.clearTimeout(),this.isDirty=!1,this.pauseDepths={}}clearTimeout(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=0)}drained(){this.drainedOption&&this.drainedOption()}}function Jv(n){n.parentNode&&n.parentNode.removeChild(n)}function Pn(n,e){if(n.closest)return n.closest(e);if(!document.documentElement.contains(n))return null;do{if(BU(n,e))return n;n=n.parentElement||n.parentNode}while(n!==null&&n.nodeType===1);return null}function BU(n,e){return(n.matches||n.matchesSelector||n.msMatchesSelector).call(n,e)}function HU(n,e){let t=n instanceof HTMLElement?[n]:n,r=[];for(let i=0;i<t.length;i+=1){let s=t[i].querySelectorAll(e);for(let o=0;o<s.length;o+=1)r.push(s[o])}return r}const zU=/(top|left|right|bottom|width|height)$/i;function uc(n,e){for(let t in e)Sk(n,t,e[t])}function Sk(n,e,t){t==null?n.style[e]="":typeof t=="number"&&zU.test(e)?n.style[e]=`${t}px`:n.style[e]=t}function xk(n){var e,t;return(t=(e=n.composedPath)===null||e===void 0?void 0:e.call(n)[0])!==null&&t!==void 0?t:n.target}let RS=0;function Fs(){return RS+=1,"fc-dom-"+RS}function ff(n){n.preventDefault()}function $U(n,e){return t=>{let r=Pn(t.target,n);r&&e.call(r,t,r)}}function Ek(n,e,t,r){let i=$U(t,r);return n.addEventListener(e,i),()=>{n.removeEventListener(e,i)}}function WU(n,e,t,r){let i;return Ek(n,"mouseover",e,(s,o)=>{if(o!==i){i=o,t(s,o);let l=c=>{i=null,r(c,o),o.removeEventListener("mouseleave",l)};o.addEventListener("mouseleave",l)}})}const OS=["webkitTransitionEnd","otransitionend","oTransitionEnd","msTransitionEnd","transitionend"];function VU(n,e){let t=r=>{e(r),OS.forEach(i=>{n.removeEventListener(i,t)})};OS.forEach(r=>{n.addEventListener(r,t)})}function Ck(n){return Object.assign({onClick:n},Tk(n))}function Tk(n){return{tabIndex:0,onKeyDown(e){(e.key==="Enter"||e.key===" ")&&(n(e),e.preventDefault())}}}let IS=0;function qo(){return IS+=1,String(IS)}function ey(){document.body.classList.add("fc-not-allowed")}function ty(){document.body.classList.remove("fc-not-allowed")}function qU(n){n.style.userSelect="none",n.style.webkitUserSelect="none",n.addEventListener("selectstart",ff)}function GU(n){n.style.userSelect="",n.style.webkitUserSelect="",n.removeEventListener("selectstart",ff)}function YU(n){n.addEventListener("contextmenu",ff)}function KU(n){n.removeEventListener("contextmenu",ff)}function QU(n){let e=[],t=[],r,i;for(typeof n=="string"?t=n.split(/\s*,\s*/):typeof n=="function"?t=[n]:Array.isArray(n)&&(t=n),r=0;r<t.length;r+=1)i=t[r],typeof i=="string"?e.push(i.charAt(0)==="-"?{field:i.substring(1),order:-1}:{field:i,order:1}):typeof i=="function"&&e.push({func:i});return e}function XU(n,e,t){let r,i;for(r=0;r<t.length;r+=1)if(i=ZU(n,e,t[r]),i)return i;return 0}function ZU(n,e,t){return t.func?t.func(n,e):JU(n[t.field],e[t.field])*(t.order||1)}function JU(n,e){return!n&&!e?0:e==null?-1:n==null?1:typeof n=="string"||typeof e=="string"?String(n).localeCompare(String(e)):n-e}function Fa(n,e){let t=String(n);return"000".substr(0,e-t.length)+t}function dc(n,e,t){return typeof n=="function"?n(...e):typeof n=="string"?e.reduce((r,i,s)=>r.replace("$"+s,i||""),n):t}function eB(n,e){return n-e}function ih(n){return n%1===0}function tB(n){let e=n.querySelector(".fc-scrollgrid-shrink-frame"),t=n.querySelector(".fc-scrollgrid-shrink-cushion");if(!e)throw new Error("needs fc-scrollgrid-shrink-frame className");if(!t)throw new Error("needs fc-scrollgrid-shrink-cushion className");return n.getBoundingClientRect().width-e.getBoundingClientRect().width+t.getBoundingClientRect().width}const MS=["years","months","days","milliseconds"],nB=/^(-?)(?:(\d+)\.)?(\d+):(\d\d)(?::(\d\d)(?:\.(\d\d\d))?)?/;function Ze(n,e){return typeof n=="string"?rB(n):typeof n=="object"&&n?NS(n):typeof n=="number"?NS({[e||"milliseconds"]:n}):null}function rB(n){let e=nB.exec(n);if(e){let t=e[1]?-1:1;return{years:0,months:0,days:t*(e[2]?parseInt(e[2],10):0),milliseconds:t*((e[3]?parseInt(e[3],10):0)*60*60*1e3+(e[4]?parseInt(e[4],10):0)*60*1e3+(e[5]?parseInt(e[5],10):0)*1e3+(e[6]?parseInt(e[6],10):0))}}return null}function NS(n){let e={years:n.years||n.year||0,months:n.months||n.month||0,days:n.days||n.day||0,milliseconds:(n.hours||n.hour||0)*60*60*1e3+(n.minutes||n.minute||0)*60*1e3+(n.seconds||n.second||0)*1e3+(n.milliseconds||n.millisecond||n.ms||0)},t=n.weeks||n.week;return t&&(e.days+=t*7,e.specifiedWeeks=!0),e}function iB(n,e){return n.years===e.years&&n.months===e.months&&n.days===e.days&&n.milliseconds===e.milliseconds}function Xm(n,e){return{years:n.years+e.years,months:n.months+e.months,days:n.days+e.days,milliseconds:n.milliseconds+e.milliseconds}}function sB(n,e){return{years:n.years-e.years,months:n.months-e.months,days:n.days-e.days,milliseconds:n.milliseconds-e.milliseconds}}function oB(n,e){return{years:n.years*e,months:n.months*e,days:n.days*e,milliseconds:n.milliseconds*e}}function aB(n){return Ua(n)/365}function lB(n){return Ua(n)/30}function Ua(n){return Zr(n)/864e5}function Zr(n){return n.years*(365*864e5)+n.months*(30*864e5)+n.days*864e5+n.milliseconds}function ny(n,e){let t=null;for(let r=0;r<MS.length;r+=1){let i=MS[r];if(e[i]){let s=n[i]/e[i];if(!ih(s)||t!==null&&t!==s)return null;t=s}else if(n[i])return null}return t}function Zm(n){let e=n.milliseconds;if(e){if(e%1e3!==0)return{unit:"millisecond",value:e};if(e%(1e3*60)!==0)return{unit:"second",value:e/1e3};if(e%(1e3*60*60)!==0)return{unit:"minute",value:e/(1e3*60)};if(e)return{unit:"hour",value:e/(1e3*60*60)}}return n.days?n.specifiedWeeks&&n.days%7===0?{unit:"week",value:n.days/7}:{unit:"day",value:n.days}:n.months?{unit:"month",value:n.months}:n.years?{unit:"year",value:n.years}:{unit:"millisecond",value:0}}function Hs(n,e,t){if(n===e)return!0;let r=n.length,i;if(r!==e.length)return!1;for(i=0;i<r;i+=1)if(!(t?t(n[i],e[i]):n[i]===e[i]))return!1;return!0}const cB=["sun","mon","tue","wed","thu","fri","sat"];function PS(n,e){let t=Ms(n);return t[2]+=e*7,lr(t)}function sn(n,e){let t=Ms(n);return t[2]+=e,lr(t)}function zs(n,e){let t=Ms(n);return t[6]+=e,lr(t)}function uB(n,e){return Gs(n,e)/7}function Gs(n,e){return(e.valueOf()-n.valueOf())/(1e3*60*60*24)}function dB(n,e){return(e.valueOf()-n.valueOf())/(1e3*60*60)}function hB(n,e){return(e.valueOf()-n.valueOf())/(1e3*60)}function fB(n,e){return(e.valueOf()-n.valueOf())/1e3}function pB(n,e){let t=St(n),r=St(e);return{years:0,months:0,days:Math.round(Gs(t,r)),milliseconds:e.valueOf()-r.valueOf()-(n.valueOf()-t.valueOf())}}function gB(n,e){let t=kh(n,e);return t!==null&&t%7===0?t/7:null}function kh(n,e){return Ns(n)===Ns(e)?Math.round(Gs(n,e)):null}function St(n){return lr([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()])}function mB(n){return lr([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours()])}function vB(n){return lr([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes()])}function yB(n){return lr([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds()])}function bB(n,e,t){let r=n.getUTCFullYear(),i=zg(n,r,e,t);if(i<1)return zg(n,r-1,e,t);let s=zg(n,r+1,e,t);return s>=1?Math.min(i,s):i}function zg(n,e,t,r){let i=lr([e,0,1+_B(e,t,r)]),s=St(n),o=Math.round(Gs(i,s));return Math.floor(o/7)+1}function _B(n,e,t){let r=7+e-t;return-((7+lr([n,0,r]).getUTCDay()-e)%7)+r-1}function jS(n){return[n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()]}function LS(n){return new Date(n[0],n[1]||0,n[2]==null?1:n[2],n[3]||0,n[4]||0,n[5]||0)}function Ms(n){return[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.getUTCMilliseconds()]}function lr(n){return n.length===1&&(n=n.concat([0])),new Date(Date.UTC(...n))}function kk(n){return!isNaN(n.valueOf())}function Ns(n){return n.getUTCHours()*1e3*60*60+n.getUTCMinutes()*1e3*60+n.getUTCSeconds()*1e3+n.getUTCMilliseconds()}function Ak(n,e,t=!1){let r=n.toISOString();return r=r.replace(".000",""),t&&(r=r.replace("T00:00:00Z","")),r.length>10&&(e==null?r=r.replace("Z",""):e!==0&&(r=r.replace("Z",ry(e,!0)))),r}function Kc(n){return n.toISOString().replace(/T.*$/,"")}function wB(n){return n.toISOString().match(/^\d{4}-\d{2}/)[0]}function SB(n){return Fa(n.getUTCHours(),2)+":"+Fa(n.getUTCMinutes(),2)+":"+Fa(n.getUTCSeconds(),2)}function ry(n,e=!1){let t=n<0?"-":"+",r=Math.abs(n),i=Math.floor(r/60),s=Math.round(r%60);return e?`${t+Fa(i,2)}:${Fa(s,2)}`:`GMT${t}${i}${s?`:${Fa(s,2)}`:""}`}function Te(n,e,t){let r,i;return function(...s){if(!r)i=n.apply(this,s);else if(!Hs(r,s)){let o=n.apply(this,s);(!e||!e(o,i))&&(i=o)}return r=s,i}}function sh(n,e,t){let r,i;return s=>(r?ti(r,s)||(i=n.call(this,s)):i=n.call(this,s),r=s,i)}const $g={week:3,separator:9,omitZeroMinute:9,meridiem:9,omitCommas:9},Ah={timeZoneName:7,era:6,year:5,month:4,day:2,weekday:2,hour:1,minute:1,second:1},Od=/\s*([ap])\.?m\.?/i,xB=/,/g,EB=/\s+/g,CB=/\u200e/g,TB=/UTC|GMT/;class kB{constructor(e){let t={},r={},i=9;for(let s in e)s in $g?(r[s]=e[s],$g[s]<9&&(i=Math.min($g[s],i))):(t[s]=e[s],s in Ah&&(i=Math.min(Ah[s],i)));this.standardDateProps=t,this.extendedSettings=r,this.smallestUnitNum=i,this.buildFormattingFunc=Te(FS)}format(e,t){return this.buildFormattingFunc(this.standardDateProps,this.extendedSettings,t)(e)}formatRange(e,t,r,i){let{standardDateProps:s,extendedSettings:o}=this,l=MB(e.marker,t.marker,r.calendarSystem);if(!l)return this.format(e,r);let c=l;c>1&&(s.year==="numeric"||s.year==="2-digit")&&(s.month==="numeric"||s.month==="2-digit")&&(s.day==="numeric"||s.day==="2-digit")&&(c=1);let d=this.format(e,r),h=this.format(t,r);if(d===h)return d;let p=NB(s,c),g=FS(p,o,r),v=g(e),y=g(t),_=PB(d,v,h,y),w=o.separator||i||r.defaultSeparator||"";return _?_.before+v+w+y+_.after:d+w+h}getSmallestUnit(){switch(this.smallestUnitNum){case 7:case 6:case 5:return"year";case 4:return"month";case 3:return"week";case 2:return"day";default:return"time"}}}function FS(n,e,t){let r=Object.keys(n).length;return r===1&&n.timeZoneName==="short"?i=>ry(i.timeZoneOffset):r===0&&e.week?i=>IB(t.computeWeekNumber(i.marker),t.weekText,t.weekTextLong,t.locale,e.week):AB(n,e,t)}function AB(n,e,t){n=Object.assign({},n),e=Object.assign({},e),DB(n,e),n.timeZone="UTC";let r=new Intl.DateTimeFormat(t.locale.codes,n),i;if(e.omitZeroMinute){let s=Object.assign({},n);delete s.minute,i=new Intl.DateTimeFormat(t.locale.codes,s)}return s=>{let{marker:o}=s,l;i&&!o.getUTCMinutes()?l=i:l=r;let c=l.format(o);return RB(c,s,n,e,t)}}function DB(n,e){n.timeZoneName&&(n.hour||(n.hour="2-digit"),n.minute||(n.minute="2-digit")),n.timeZoneName==="long"&&(n.timeZoneName="short"),e.omitZeroMinute&&(n.second||n.millisecond)&&delete e.omitZeroMinute}function RB(n,e,t,r,i){return n=n.replace(CB,""),t.timeZoneName==="short"&&(n=OB(n,i.timeZone==="UTC"||e.timeZoneOffset==null?"UTC":ry(e.timeZoneOffset))),r.omitCommas&&(n=n.replace(xB,"").trim()),r.omitZeroMinute&&(n=n.replace(":00","")),r.meridiem===!1?n=n.replace(Od,"").trim():r.meridiem==="narrow"?n=n.replace(Od,(s,o)=>o.toLocaleLowerCase()):r.meridiem==="short"?n=n.replace(Od,(s,o)=>`${o.toLocaleLowerCase()}m`):r.meridiem==="lowercase"&&(n=n.replace(Od,s=>s.toLocaleLowerCase())),n=n.replace(EB," "),n=n.trim(),n}function OB(n,e){let t=!1;return n=n.replace(TB,()=>(t=!0,e)),t||(n+=` ${e}`),n}function IB(n,e,t,r,i){let s=[];return i==="long"?s.push(t):(i==="short"||i==="narrow")&&s.push(e),(i==="long"||i==="short")&&s.push(" "),s.push(r.simpleNumberFormat.format(n)),r.options.direction==="rtl"&&s.reverse(),s.join("")}function MB(n,e,t){return t.getMarkerYear(n)!==t.getMarkerYear(e)?5:t.getMarkerMonth(n)!==t.getMarkerMonth(e)?4:t.getMarkerDay(n)!==t.getMarkerDay(e)?2:Ns(n)!==Ns(e)?1:0}function NB(n,e){let t={};for(let r in n)(!(r in Ah)||Ah[r]<=e)&&(t[r]=n[r]);return t}function PB(n,e,t,r){let i=0;for(;i<n.length;){let s=n.indexOf(e,i);if(s===-1)break;let o=n.substr(0,s);i=s+e.length;let l=n.substr(i),c=0;for(;c<t.length;){let d=t.indexOf(r,c);if(d===-1)break;let h=t.substr(0,d);c=d+r.length;let p=t.substr(c);if(o===h&&l===p)return{before:o,after:l}}}return null}function US(n,e){let t=e.markerToArray(n.marker);return{marker:n.marker,timeZoneOffset:n.timeZoneOffset,array:t,year:t[0],month:t[1],day:t[2],hour:t[3],minute:t[4],second:t[5],millisecond:t[6]}}function Dh(n,e,t,r){let i=US(n,t.calendarSystem),s=e?US(e,t.calendarSystem):null;return{date:i,start:i,end:s,timeZone:t.timeZone,localeCodes:t.locale.codes,defaultSeparator:r||t.defaultSeparator}}class jB{constructor(e){this.cmdStr=e}format(e,t,r){return t.cmdFormatter(this.cmdStr,Dh(e,null,t,r))}formatRange(e,t,r,i){return r.cmdFormatter(this.cmdStr,Dh(e,t,r,i))}}class LB{constructor(e){this.func=e}format(e,t,r){return this.func(Dh(e,null,t,r))}formatRange(e,t,r,i){return this.func(Dh(e,t,r,i))}}function It(n){return typeof n=="object"&&n?new kB(n):typeof n=="string"?new jB(n):typeof n=="function"?new LB(n):null}const BS={navLinkDayClick:$,navLinkWeekClick:$,duration:Ze,bootstrapFontAwesome:$,buttonIcons:$,customButtons:$,defaultAllDayEventDuration:Ze,defaultTimedEventDuration:Ze,nextDayThreshold:Ze,scrollTime:Ze,scrollTimeReset:Boolean,slotMinTime:Ze,slotMaxTime:Ze,dayPopoverFormat:It,slotDuration:Ze,snapDuration:Ze,headerToolbar:$,footerToolbar:$,defaultRangeSeparator:String,titleRangeSeparator:String,forceEventDuration:Boolean,dayHeaders:Boolean,dayHeaderFormat:It,dayHeaderClassNames:$,dayHeaderContent:$,dayHeaderDidMount:$,dayHeaderWillUnmount:$,dayCellClassNames:$,dayCellContent:$,dayCellDidMount:$,dayCellWillUnmount:$,initialView:String,aspectRatio:Number,weekends:Boolean,weekNumberCalculation:$,weekNumbers:Boolean,weekNumberClassNames:$,weekNumberContent:$,weekNumberDidMount:$,weekNumberWillUnmount:$,editable:Boolean,viewClassNames:$,viewDidMount:$,viewWillUnmount:$,nowIndicator:Boolean,nowIndicatorSnap:$,nowIndicatorClassNames:$,nowIndicatorContent:$,nowIndicatorDidMount:$,nowIndicatorWillUnmount:$,showNonCurrentDates:Boolean,lazyFetching:Boolean,startParam:String,endParam:String,timeZoneParam:String,timeZone:String,locales:$,locale:$,themeSystem:String,dragRevertDuration:Number,dragScroll:Boolean,allDayMaintainDuration:Boolean,unselectAuto:Boolean,dropAccept:$,eventOrder:QU,eventOrderStrict:Boolean,handleWindowResize:Boolean,windowResizeDelay:Number,longPressDelay:Number,eventDragMinDistance:Number,expandRows:Boolean,height:$,contentHeight:$,direction:String,weekNumberFormat:It,eventResizableFromStart:Boolean,displayEventTime:Boolean,displayEventEnd:Boolean,weekText:String,weekTextLong:String,progressiveEventRendering:Boolean,businessHours:$,initialDate:$,now:$,eventDataTransform:$,stickyHeaderDates:$,stickyFooterScrollbar:$,viewHeight:$,defaultAllDay:Boolean,eventSourceFailure:$,eventSourceSuccess:$,eventDisplay:String,eventStartEditable:Boolean,eventDurationEditable:Boolean,eventOverlap:$,eventConstraint:$,eventAllow:$,eventBackgroundColor:String,eventBorderColor:String,eventTextColor:String,eventColor:String,eventClassNames:$,eventContent:$,eventDidMount:$,eventWillUnmount:$,selectConstraint:$,selectOverlap:$,selectAllow:$,droppable:Boolean,unselectCancel:String,slotLabelFormat:$,slotLaneClassNames:$,slotLaneContent:$,slotLaneDidMount:$,slotLaneWillUnmount:$,slotLabelClassNames:$,slotLabelContent:$,slotLabelDidMount:$,slotLabelWillUnmount:$,dayMaxEvents:$,dayMaxEventRows:$,dayMinWidth:Number,slotLabelInterval:Ze,allDayText:String,allDayClassNames:$,allDayContent:$,allDayDidMount:$,allDayWillUnmount:$,slotMinWidth:Number,navLinks:Boolean,eventTimeFormat:It,rerenderDelay:Number,moreLinkText:$,moreLinkHint:$,selectMinDistance:Number,selectable:Boolean,selectLongPressDelay:Number,eventLongPressDelay:Number,selectMirror:Boolean,eventMaxStack:Number,eventMinHeight:Number,eventMinWidth:Number,eventShortHeight:Number,slotEventOverlap:Boolean,plugins:$,firstDay:Number,dayCount:Number,dateAlignment:String,dateIncrement:Ze,hiddenDays:$,fixedWeekCount:Boolean,validRange:$,visibleRange:$,titleFormat:$,eventInteractive:Boolean,noEventsText:String,viewHint:$,navLinkHint:$,closeHint:String,timeHint:String,eventHint:String,moreLinkClick:$,moreLinkClassNames:$,moreLinkContent:$,moreLinkDidMount:$,moreLinkWillUnmount:$,monthStartFormat:It,handleCustomRendering:$,customRenderingMetaMap:$,customRenderingReplaces:Boolean},hc={eventDisplay:"auto",defaultRangeSeparator:" - ",titleRangeSeparator:" – ",defaultTimedEventDuration:"01:00:00",defaultAllDayEventDuration:{day:1},forceEventDuration:!1,nextDayThreshold:"00:00:00",dayHeaders:!0,initialView:"",aspectRatio:1.35,headerToolbar:{start:"title",center:"",end:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"local",editable:!1,nowIndicator:!1,scrollTime:"06:00:00",scrollTimeReset:!0,slotMinTime:"00:00:00",slotMaxTime:"24:00:00",showNonCurrentDates:!0,lazyFetching:!0,startParam:"start",endParam:"end",timeZoneParam:"timeZone",timeZone:"local",locales:[],locale:"",themeSystem:"standard",dragRevertDuration:500,dragScroll:!0,allDayMaintainDuration:!1,unselectAuto:!0,dropAccept:"*",eventOrder:"start,-duration,allDay,title",dayPopoverFormat:{month:"long",day:"numeric",year:"numeric"},handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1e3,eventDragMinDistance:5,expandRows:!1,navLinks:!1,selectable:!1,eventMinHeight:15,eventMinWidth:30,eventShortHeight:30,monthStartFormat:{month:"long",day:"numeric"},nowIndicatorSnap:"auto"},HS={datesSet:$,eventsSet:$,eventAdd:$,eventChange:$,eventRemove:$,windowResize:$,eventClick:$,eventMouseEnter:$,eventMouseLeave:$,select:$,unselect:$,loading:$,_unmount:$,_beforeprint:$,_afterprint:$,_noEventDrop:$,_noEventResize:$,_resize:$,_scrollRequest:$},zS={buttonText:$,buttonHints:$,views:$,plugins:$,initialEvents:$,events:$,eventSources:$},yo={headerToolbar:bo,footerToolbar:bo,buttonText:bo,buttonHints:bo,buttonIcons:bo,dateIncrement:bo,plugins:Id,events:Id,eventSources:Id,resources:Id};function bo(n,e){return typeof n=="object"&&typeof e=="object"&&n&&e?ti(n,e):n===e}function Id(n,e){return Array.isArray(n)&&Array.isArray(e)?Hs(n,e):n===e}const FB={type:String,component:$,buttonText:String,buttonTextKey:String,dateProfileGeneratorClass:$,usesMinMaxTime:Boolean,classNames:$,content:$,didMount:$,willUnmount:$};function Wg(n){return sy(n,yo)}function iy(n,e){let t={},r={};for(let i in e)i in n&&(t[i]=e[i](n[i]));for(let i in n)i in e||(r[i]=n[i]);return{refined:t,extra:r}}function $(n){return n}const{hasOwnProperty:Rh}=Object.prototype;function sy(n,e){let t={};if(e){for(let r in e)if(e[r]===bo){let i=[];for(let s=n.length-1;s>=0;s-=1){let o=n[s][r];if(typeof o=="object"&&o)i.unshift(o);else if(o!==void 0){t[r]=o;break}}i.length&&(t[r]=sy(i))}}for(let r=n.length-1;r>=0;r-=1){let i=n[r];for(let s in i)s in t||(t[s]=i[s])}return t}function Lo(n,e){let t={};for(let r in n)e(n[r],r)&&(t[r]=n[r]);return t}function es(n,e){let t={};for(let r in n)t[r]=e(n[r],r);return t}function Dk(n){let e={};for(let t of n)e[t]=!0;return e}function oy(n){let e=[];for(let t in n)e.push(n[t]);return e}function ti(n,e){if(n===e)return!0;for(let t in n)if(Rh.call(n,t)&&!(t in e))return!1;for(let t in e)if(Rh.call(e,t)&&n[t]!==e[t])return!1;return!0}const UB=/^on[A-Z]/;function BB(n,e){const t=HB(n,e);for(let r of t)if(!UB.test(r))return!1;return!0}function HB(n,e){let t=[];for(let r in n)Rh.call(n,r)&&(r in e||t.push(r));for(let r in e)Rh.call(e,r)&&n[r]!==e[r]&&t.push(r);return t}function Vg(n,e,t={}){if(n===e)return!0;for(let r in e)if(!(r in n&&zB(n[r],e[r],t[r])))return!1;for(let r in n)if(!(r in e))return!1;return!0}function zB(n,e,t){return n===e||t===!0?!0:t?t(n,e):!1}function $B(n,e=0,t,r=1){let i=[];t==null&&(t=Object.keys(n).length);for(let s=e;s<t;s+=r){let o=n[s];o!==void 0&&i.push(o)}return i}let Rk={};function WB(n,e){Rk[n]=e}function VB(n){return new Rk[n]}class qB{getMarkerYear(e){return e.getUTCFullYear()}getMarkerMonth(e){return e.getUTCMonth()}getMarkerDay(e){return e.getUTCDate()}arrayToMarker(e){return lr(e)}markerToArray(e){return Ms(e)}}WB("gregory",qB);const GB=/^\s*(\d{4})(-?(\d{2})(-?(\d{2})([T ](\d{2}):?(\d{2})(:?(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/;function YB(n){let e=GB.exec(n);if(e){let t=new Date(Date.UTC(Number(e[1]),e[3]?Number(e[3])-1:0,Number(e[5]||1),Number(e[7]||0),Number(e[8]||0),Number(e[10]||0),e[12]?+`0.${e[12]}`*1e3:0));if(kk(t)){let r=null;return e[13]&&(r=(e[15]==="-"?-1:1)*(Number(e[16]||0)*60+Number(e[18]||0))),{marker:t,isTimeUnspecified:!e[6],timeZoneOffset:r}}}return null}class KB{constructor(e){let t=this.timeZone=e.timeZone,r=t!=="local"&&t!=="UTC";e.namedTimeZoneImpl&&r&&(this.namedTimeZoneImpl=new e.namedTimeZoneImpl(t)),this.canComputeOffset=!!(!r||this.namedTimeZoneImpl),this.calendarSystem=VB(e.calendarSystem),this.locale=e.locale,this.weekDow=e.locale.week.dow,this.weekDoy=e.locale.week.doy,e.weekNumberCalculation==="ISO"&&(this.weekDow=1,this.weekDoy=4),typeof e.firstDay=="number"&&(this.weekDow=e.firstDay),typeof e.weekNumberCalculation=="function"&&(this.weekNumberFunc=e.weekNumberCalculation),this.weekText=e.weekText!=null?e.weekText:e.locale.options.weekText,this.weekTextLong=(e.weekTextLong!=null?e.weekTextLong:e.locale.options.weekTextLong)||this.weekText,this.cmdFormatter=e.cmdFormatter,this.defaultSeparator=e.defaultSeparator}createMarker(e){let t=this.createMarkerMeta(e);return t===null?null:t.marker}createNowMarker(){return this.canComputeOffset?this.timestampToMarker(new Date().valueOf()):lr(jS(new Date))}createMarkerMeta(e){if(typeof e=="string")return this.parse(e);let t=null;return typeof e=="number"?t=this.timestampToMarker(e):e instanceof Date?(e=e.valueOf(),isNaN(e)||(t=this.timestampToMarker(e))):Array.isArray(e)&&(t=lr(e)),t===null||!kk(t)?null:{marker:t,isTimeUnspecified:!1,forcedTzo:null}}parse(e){let t=YB(e);if(t===null)return null;let{marker:r}=t,i=null;return t.timeZoneOffset!==null&&(this.canComputeOffset?r=this.timestampToMarker(r.valueOf()-t.timeZoneOffset*60*1e3):i=t.timeZoneOffset),{marker:r,isTimeUnspecified:t.isTimeUnspecified,forcedTzo:i}}getYear(e){return this.calendarSystem.getMarkerYear(e)}getMonth(e){return this.calendarSystem.getMarkerMonth(e)}getDay(e){return this.calendarSystem.getMarkerDay(e)}add(e,t){let r=this.calendarSystem.markerToArray(e);return r[0]+=t.years,r[1]+=t.months,r[2]+=t.days,r[6]+=t.milliseconds,this.calendarSystem.arrayToMarker(r)}subtract(e,t){let r=this.calendarSystem.markerToArray(e);return r[0]-=t.years,r[1]-=t.months,r[2]-=t.days,r[6]-=t.milliseconds,this.calendarSystem.arrayToMarker(r)}addYears(e,t){let r=this.calendarSystem.markerToArray(e);return r[0]+=t,this.calendarSystem.arrayToMarker(r)}addMonths(e,t){let r=this.calendarSystem.markerToArray(e);return r[1]+=t,this.calendarSystem.arrayToMarker(r)}diffWholeYears(e,t){let{calendarSystem:r}=this;return Ns(e)===Ns(t)&&r.getMarkerDay(e)===r.getMarkerDay(t)&&r.getMarkerMonth(e)===r.getMarkerMonth(t)?r.getMarkerYear(t)-r.getMarkerYear(e):null}diffWholeMonths(e,t){let{calendarSystem:r}=this;return Ns(e)===Ns(t)&&r.getMarkerDay(e)===r.getMarkerDay(t)?r.getMarkerMonth(t)-r.getMarkerMonth(e)+(r.getMarkerYear(t)-r.getMarkerYear(e))*12:null}greatestWholeUnit(e,t){let r=this.diffWholeYears(e,t);return r!==null?{unit:"year",value:r}:(r=this.diffWholeMonths(e,t),r!==null?{unit:"month",value:r}:(r=gB(e,t),r!==null?{unit:"week",value:r}:(r=kh(e,t),r!==null?{unit:"day",value:r}:(r=dB(e,t),ih(r)?{unit:"hour",value:r}:(r=hB(e,t),ih(r)?{unit:"minute",value:r}:(r=fB(e,t),ih(r)?{unit:"second",value:r}:{unit:"millisecond",value:t.valueOf()-e.valueOf()}))))))}countDurationsBetween(e,t,r){let i;return r.years&&(i=this.diffWholeYears(e,t),i!==null)?i/aB(r):r.months&&(i=this.diffWholeMonths(e,t),i!==null)?i/lB(r):r.days&&(i=kh(e,t),i!==null)?i/Ua(r):(t.valueOf()-e.valueOf())/Zr(r)}startOf(e,t){return t==="year"?this.startOfYear(e):t==="month"?this.startOfMonth(e):t==="week"?this.startOfWeek(e):t==="day"?St(e):t==="hour"?mB(e):t==="minute"?vB(e):t==="second"?yB(e):null}startOfYear(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e)])}startOfMonth(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e)])}startOfWeek(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e),e.getUTCDate()-(e.getUTCDay()-this.weekDow+7)%7])}computeWeekNumber(e){return this.weekNumberFunc?this.weekNumberFunc(this.toDate(e)):bB(e,this.weekDow,this.weekDoy)}format(e,t,r={}){return t.format({marker:e,timeZoneOffset:r.forcedTzo!=null?r.forcedTzo:this.offsetForMarker(e)},this)}formatRange(e,t,r,i={}){return i.isEndExclusive&&(t=zs(t,-1)),r.formatRange({marker:e,timeZoneOffset:i.forcedStartTzo!=null?i.forcedStartTzo:this.offsetForMarker(e)},{marker:t,timeZoneOffset:i.forcedEndTzo!=null?i.forcedEndTzo:this.offsetForMarker(t)},this,i.defaultSeparator)}formatIso(e,t={}){let r=null;return t.omitTimeZoneOffset||(t.forcedTzo!=null?r=t.forcedTzo:r=this.offsetForMarker(e)),Ak(e,r,t.omitTime)}timestampToMarker(e){return this.timeZone==="local"?lr(jS(new Date(e))):this.timeZone==="UTC"||!this.namedTimeZoneImpl?new Date(e):lr(this.namedTimeZoneImpl.timestampToArray(e))}offsetForMarker(e){return this.timeZone==="local"?-LS(Ms(e)).getTimezoneOffset():this.timeZone==="UTC"?0:this.namedTimeZoneImpl?this.namedTimeZoneImpl.offsetForArray(Ms(e)):null}toDate(e,t){return this.timeZone==="local"?LS(Ms(e)):this.timeZone==="UTC"?new Date(e.valueOf()):this.namedTimeZoneImpl?new Date(e.valueOf()-this.namedTimeZoneImpl.offsetForArray(Ms(e))*1e3*60):new Date(e.valueOf()-(t||0))}}class Qc{constructor(e){this.iconOverrideOption&&this.setIconOverride(e[this.iconOverrideOption])}setIconOverride(e){let t,r;if(typeof e=="object"&&e){t=Object.assign({},this.iconClasses);for(r in e)t[r]=this.applyIconOverridePrefix(e[r]);this.iconClasses=t}else e===!1&&(this.iconClasses={})}applyIconOverridePrefix(e){let t=this.iconOverridePrefix;return t&&e.indexOf(t)!==0&&(e=t+e),e}getClass(e){return this.classes[e]||""}getIconClass(e,t){let r;return t&&this.rtlIconClasses?r=this.rtlIconClasses[e]||this.iconClasses[e]:r=this.iconClasses[e],r?`${this.baseIconClass} ${r}`:""}getCustomButtonIconClass(e){let t;return this.iconOverrideCustomButtonOption&&(t=e[this.iconOverrideCustomButtonOption],t)?`${this.baseIconClass} ${this.applyIconOverridePrefix(t)}`:""}}Qc.prototype.classes={};Qc.prototype.iconClasses={};Qc.prototype.baseIconClass="";Qc.prototype.iconOverridePrefix="";function Oh(n){n();let e=Re.debounceRendering,t=[];function r(i){t.push(i)}for(Re.debounceRendering=r,Ac(P(QB,{}),document.createElement("div"));t.length;)t.shift()();Re.debounceRendering=e}class QB extends br{render(){return P("div",{})}componentDidMount(){this.setState({})}}function Ok(n){let e=_U(n),t=e.Provider;return e.Provider=function(){let r=!this.getChildContext,i=t.apply(this,arguments);if(r){let s=[];this.shouldComponentUpdate=o=>{this.props.value!==o.value&&s.forEach(l=>{l.context=o.value,l.forceUpdate()})},this.sub=o=>{s.push(o);let l=o.componentWillUnmount;o.componentWillUnmount=()=>{s.splice(s.indexOf(o),1),l&&l.call(o)}}}return i},e}class XB{constructor(e,t,r,i){this.execFunc=e,this.emitter=t,this.scrollTime=r,this.scrollTimeReset=i,this.handleScrollRequest=s=>{this.queuedRequest=Object.assign({},this.queuedRequest||{},s),this.drain()},t.on("_scrollRequest",this.handleScrollRequest),this.fireInitialScroll()}detach(){this.emitter.off("_scrollRequest",this.handleScrollRequest)}update(e){e&&this.scrollTimeReset?this.fireInitialScroll():this.drain()}fireInitialScroll(){this.handleScrollRequest({time:this.scrollTime})}drain(){this.queuedRequest&&this.execFunc(this.queuedRequest)&&(this.queuedRequest=null)}}const ss=Ok({});function ZB(n,e,t,r,i,s,o,l,c,d,h,p,g,v){return{dateEnv:i,nowManager:s,options:t,pluginHooks:l,emitter:h,dispatch:c,getCurrentData:d,calendarApi:p,viewSpec:n,viewApi:e,dateProfileGenerator:r,theme:o,isRtl:t.direction==="rtl",addResizeHandler(y){h.on("_resize",y)},removeResizeHandler(y){h.off("_resize",y)},createScrollResponder(y){return new XB(y,h,Ze(t.scrollTime),t.scrollTimeReset)},registerInteractiveComponent:g,unregisterInteractiveComponent:v}}class Go extends br{shouldComponentUpdate(e,t){return!Vg(this.props,e,this.propEquality)||!Vg(this.state,t,this.stateEquality)}safeSetState(e){Vg(this.state,Object.assign(Object.assign({},this.state),e),this.stateEquality)||this.setState(e)}}Go.addPropsEquality=JB;Go.addStateEquality=eH;Go.contextType=ss;Go.prototype.propEquality={};Go.prototype.stateEquality={};class ut extends Go{}ut.contextType=ss;function JB(n){let e=Object.create(this.prototype.propEquality);Object.assign(e,n),this.prototype.propEquality=e}function eH(n){let e=Object.create(this.prototype.stateEquality);Object.assign(e,n),this.prototype.stateEquality=e}function Si(n,e){typeof n=="function"?n(e):n&&(n.current=e)}class ay extends ut{constructor(){super(...arguments),this.id=qo(),this.queuedDomNodes=[],this.currentDomNodes=[],this.handleEl=e=>{const{options:t}=this.context,{generatorName:r}=this.props;(!t.customRenderingReplaces||!Jm(r,t))&&this.updateElRef(e)},this.updateElRef=e=>{this.props.elRef&&Si(this.props.elRef,e)}}render(){const{props:e,context:t}=this,{options:r}=t,{customGenerator:i,defaultGenerator:s,renderProps:o}=e,l=Ik(e,[],this.handleEl);let c=!1,d,h=[],p;if(i!=null){const g=typeof i=="function"?i(o,P):i;if(g===!0)c=!0;else{const v=g&&typeof g=="object";v&&"html"in g?l.dangerouslySetInnerHTML={__html:g.html}:v&&"domNodes"in g?h=Array.prototype.slice.call(g.domNodes):(v?nk(g):typeof g!="function")?d=g:p=g}}else c=!Jm(e.generatorName,r);return c&&s&&(d=s(o)),this.queuedDomNodes=h,this.currentGeneratorMeta=p,P(e.elTag,l,d)}componentDidMount(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentDidUpdate(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentWillUnmount(){this.triggerCustomRendering(!1)}triggerCustomRendering(e){var t;const{props:r,context:i}=this,{handleCustomRendering:s,customRenderingMetaMap:o}=i.options;if(s){const l=(t=this.currentGeneratorMeta)!==null&&t!==void 0?t:o?.[r.generatorName];l&&s(Object.assign(Object.assign({id:this.id,isActive:e,containerEl:this.base,reportNewContainerEl:this.updateElRef,generatorMeta:l},r),{elClasses:(r.elClasses||[]).filter(tH)}))}}applyQueueudDomNodes(){const{queuedDomNodes:e,currentDomNodes:t}=this,r=this.base;if(!Hs(e,t)){t.forEach(Jv);for(let i of e)r.appendChild(i);this.currentDomNodes=e}}}ay.addPropsEquality({elClasses:Hs,elStyle:ti,elAttrs:BB,renderProps:ti});function Jm(n,e){var t;return!!(e.handleCustomRendering&&n&&(!((t=e.customRenderingMetaMap)===null||t===void 0)&&t[n]))}function Ik(n,e,t){const r=Object.assign(Object.assign({},n.elAttrs),{ref:t});return(n.elClasses||e)&&(r.className=(n.elClasses||[]).concat(e||[]).concat(r.className||[]).filter(Boolean).join(" ")),n.elStyle&&(r.style=n.elStyle),r}function tH(n){return!!n}const Mk=Ok(0);class Fn extends br{constructor(){super(...arguments),this.InnerContent=nH.bind(void 0,this),this.handleEl=e=>{this.el=e,this.props.elRef&&(Si(this.props.elRef,e),e&&this.didMountMisfire&&this.componentDidMount())}}render(){const{props:e}=this,t=rH(e.classNameGenerator,e.renderProps);if(e.children){const r=Ik(e,t,this.handleEl),i=e.children(this.InnerContent,e.renderProps,r);return e.elTag?P(e.elTag,r,i):i}else return P(ay,Object.assign(Object.assign({},e),{elRef:this.handleEl,elTag:e.elTag||"div",elClasses:(e.elClasses||[]).concat(t),renderId:this.context}))}componentDidMount(){var e,t;this.el?(t=(e=this.props).didMount)===null||t===void 0||t.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el})):this.didMountMisfire=!0}componentWillUnmount(){var e,t;(t=(e=this.props).willUnmount)===null||t===void 0||t.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el}))}}Fn.contextType=Mk;function nH(n,e){const t=n.props;return P(ay,Object.assign({renderProps:t.renderProps,generatorName:t.generatorName,customGenerator:t.customGenerator,defaultGenerator:t.defaultGenerator,renderId:n.context},e))}function rH(n,e){const t=typeof n=="function"?n(e):n||[];return typeof t=="string"?[t]:t}class Dc extends ut{render(){let{props:e,context:t}=this,{options:r}=t,i={view:t.viewApi};return P(Fn,{elRef:e.elRef,elTag:e.elTag||"div",elAttrs:e.elAttrs,elClasses:[...Nk(e.viewSpec),...e.elClasses||[]],elStyle:e.elStyle,renderProps:i,classNameGenerator:r.viewClassNames,generatorName:void 0,didMount:r.viewDidMount,willUnmount:r.viewWillUnmount},()=>e.children)}}function Nk(n){return[`fc-${n.type}-view`,"fc-view"]}function iH(n,e){let t=null,r=null;return n.start&&(t=e.createMarker(n.start)),n.end&&(r=e.createMarker(n.end)),!t&&!r||t&&r&&r<t?null:{start:t,end:r}}function $S(n,e){let t=[],{start:r}=e,i,s;for(n.sort(sH),i=0;i<n.length;i+=1)s=n[i],s.start>r&&t.push({start:r,end:s.start}),s.end>r&&(r=s.end);return r<e.end&&t.push({start:r,end:e.end}),t}function sH(n,e){return n.start.valueOf()-e.start.valueOf()}function $s(n,e){let{start:t,end:r}=n,i=null;return e.start!==null&&(t===null?t=e.start:t=new Date(Math.max(t.valueOf(),e.start.valueOf()))),e.end!=null&&(r===null?r=e.end:r=new Date(Math.min(r.valueOf(),e.end.valueOf()))),(t===null||r===null||t<r)&&(i={start:t,end:r}),i}function oH(n,e){return(n.start===null?null:n.start.valueOf())===(e.start===null?null:e.start.valueOf())&&(n.end===null?null:n.end.valueOf())===(e.end===null?null:e.end.valueOf())}function ly(n,e){return(n.end===null||e.start===null||n.end>e.start)&&(n.start===null||e.end===null||n.start<e.end)}function pf(n,e){return(n.start===null||e.start!==null&&e.start>=n.start)&&(n.end===null||e.end!==null&&e.end<=n.end)}function Xi(n,e){return(n.start===null||e>=n.start)&&(n.end===null||e<n.end)}function aH(n,e){return e.start!=null&&n<e.start?e.start:e.end!=null&&n>=e.end?new Date(e.end.valueOf()-1):n}function Pk(n){let e=Math.floor(Gs(n.start,n.end))||1,t=St(n.start),r=sn(t,e);return{start:t,end:r}}function cy(n,e=Ze(0)){let t=null,r=null;if(n.end){r=St(n.end);let i=n.end.valueOf()-r.valueOf();i&&i>=Zr(e)&&(r=sn(r,1))}return n.start&&(t=St(n.start),r&&r<=t&&(r=sn(t,1))),{start:t,end:r}}function lH(n){let e=cy(n);return Gs(e.start,e.end)>1}function Pa(n,e,t,r){return r==="year"?Ze(t.diffWholeYears(n,e),"year"):r==="month"?Ze(t.diffWholeMonths(n,e),"month"):pB(n,e)}class jk{constructor(e){this.props=e,this.initHiddenDays()}buildPrev(e,t,r){let{dateEnv:i}=this.props,s=i.subtract(i.startOf(t,e.currentRangeUnit),e.dateIncrement);return this.build(s,-1,r)}buildNext(e,t,r){let{dateEnv:i}=this.props,s=i.add(i.startOf(t,e.currentRangeUnit),e.dateIncrement);return this.build(s,1,r)}build(e,t,r=!0){let{props:i}=this,s,o,l,c,d,h;return s=this.buildValidRange(),s=this.trimHiddenDays(s),r&&(e=aH(e,s)),o=this.buildCurrentRangeInfo(e,t),l=/^(year|month|week|day)$/.test(o.unit),c=this.buildRenderRange(this.trimHiddenDays(o.range),o.unit,l),c=this.trimHiddenDays(c),d=c,i.showNonCurrentDates||(d=$s(d,o.range)),d=this.adjustActiveRange(d),d=$s(d,s),h=ly(o.range,s),Xi(c,e)||(e=c.start),{currentDate:e,validRange:s,currentRange:o.range,currentRangeUnit:o.unit,isRangeAllDay:l,activeRange:d,renderRange:c,slotMinTime:i.slotMinTime,slotMaxTime:i.slotMaxTime,isValid:h,dateIncrement:this.buildDateIncrement(o.duration)}}buildValidRange(){let e=this.props.validRangeInput,t=typeof e=="function"?e.call(this.props.calendarApi,this.props.dateEnv.toDate(this.props.nowManager.getDateMarker())):e;return this.refineRange(t)||{start:null,end:null}}buildCurrentRangeInfo(e,t){let{props:r}=this,i=null,s=null,o=null,l;return r.duration?(i=r.duration,s=r.durationUnit,o=this.buildRangeFromDuration(e,t,i,s)):(l=this.props.dayCount)?(s="day",o=this.buildRangeFromDayCount(e,t,l)):(o=this.buildCustomVisibleRange(e))?s=r.dateEnv.greatestWholeUnit(o.start,o.end).unit:(i=this.getFallbackDuration(),s=Zm(i).unit,o=this.buildRangeFromDuration(e,t,i,s)),{duration:i,unit:s,range:o}}getFallbackDuration(){return Ze({day:1})}adjustActiveRange(e){let{dateEnv:t,usesMinMaxTime:r,slotMinTime:i,slotMaxTime:s}=this.props,{start:o,end:l}=e;return r&&(Ua(i)<0&&(o=St(o),o=t.add(o,i)),Ua(s)>1&&(l=St(l),l=sn(l,-1),l=t.add(l,s))),{start:o,end:l}}buildRangeFromDuration(e,t,r,i){let{dateEnv:s,dateAlignment:o}=this.props,l,c,d;if(!o){let{dateIncrement:p}=this.props;p&&Zr(p)<Zr(r)?o=Zm(p).unit:o=i}Ua(r)<=1&&this.isHiddenDay(l)&&(l=this.skipHiddenDays(l,t),l=St(l));function h(){l=s.startOf(e,o),c=s.add(l,r),d={start:l,end:c}}return h(),this.trimHiddenDays(d)||(e=this.skipHiddenDays(e,t),h()),d}buildRangeFromDayCount(e,t,r){let{dateEnv:i,dateAlignment:s}=this.props,o=0,l=e,c;s&&(l=i.startOf(l,s)),l=St(l),l=this.skipHiddenDays(l,t),c=l;do c=sn(c,1),this.isHiddenDay(c)||(o+=1);while(o<r);return{start:l,end:c}}buildCustomVisibleRange(e){let{props:t}=this,r=t.visibleRangeInput,i=typeof r=="function"?r.call(t.calendarApi,t.dateEnv.toDate(e)):r,s=this.refineRange(i);return s&&(s.start==null||s.end==null)?null:s}buildRenderRange(e,t,r){return e}buildDateIncrement(e){let{dateIncrement:t}=this.props,r;return t||((r=this.props.dateAlignment)?Ze(1,r):e||Ze({days:1}))}refineRange(e){if(e){let t=iH(e,this.props.dateEnv);return t&&(t=cy(t)),t}return null}initHiddenDays(){let e=this.props.hiddenDays||[],t=[],r=0,i;for(this.props.weekends===!1&&e.push(0,6),i=0;i<7;i+=1)(t[i]=e.indexOf(i)!==-1)||(r+=1);if(!r)throw new Error("invalid hiddenDays");this.isHiddenDayHash=t}trimHiddenDays(e){let{start:t,end:r}=e;return t&&(t=this.skipHiddenDays(t)),r&&(r=this.skipHiddenDays(r,-1,!0)),t==null||r==null||t<r?{start:t,end:r}:null}isHiddenDay(e){return e instanceof Date&&(e=e.getUTCDay()),this.isHiddenDayHash[e]}skipHiddenDays(e,t=1,r=!1){for(;this.isHiddenDayHash[(e.getUTCDay()+(r?t:0)+7)%7];)e=sn(e,t);return e}}function uy(n,e,t,r){return{instanceId:qo(),defId:n,range:e,forcedStartTzo:t??null,forcedEndTzo:r??null}}function cH(n,e,t,r){for(let i=0;i<r.length;i+=1){let s=r[i].parse(n,t);if(s){let{allDay:o}=n;return o==null&&(o=e,o==null&&(o=s.allDayGuess,o==null&&(o=!1))),{allDay:o,duration:s.duration,typeData:s.typeData,typeId:i}}}return null}function Fo(n,e,t){let{dateEnv:r,pluginHooks:i,options:s}=t,{defs:o,instances:l}=n;l=Lo(l,c=>!o[c.defId].recurringDef);for(let c in o){let d=o[c];if(d.recurringDef){let{duration:h}=d.recurringDef;h||(h=d.allDay?s.defaultAllDayEventDuration:s.defaultTimedEventDuration);let p=uH(d,h,e,r,i.recurringTypes);for(let g of p){let v=uy(c,{start:g,end:r.add(g,h)});l[v.instanceId]=v}}}return{defs:o,instances:l}}function uH(n,e,t,r,i){let o=i[n.recurringDef.typeId].expand(n.recurringDef.typeData,{start:r.subtract(t.start,e),end:t.end},r);return n.allDay&&(o=o.map(St)),o}const oh={id:String,groupId:String,title:String,url:String,interactive:Boolean},Lk={start:$,end:$,date:$,allDay:Boolean},dH=Object.assign(Object.assign(Object.assign({},oh),Lk),{extendedProps:$});function Fk(n,e,t,r,i=dy(t),s,o){let{refined:l,extra:c}=Uk(n,t,i),d=fH(e,t),h=cH(l,d,t.dateEnv,t.pluginHooks.recurringTypes);if(h){let g=ev(l,c,e?e.sourceId:"",h.allDay,!!h.duration,t,s);return g.recurringDef={typeId:h.typeId,typeData:h.typeData,duration:h.duration},{def:g,instance:null}}let p=hH(l,d,t,r);if(p){let g=ev(l,c,e?e.sourceId:"",p.allDay,p.hasEnd,t,s),v=uy(g.defId,p.range,p.forcedStartTzo,p.forcedEndTzo);return o&&g.publicId&&o[g.publicId]&&(v.instanceId=o[g.publicId]),{def:g,instance:v}}return null}function Uk(n,e,t=dy(e)){return iy(n,t)}function dy(n){return Object.assign(Object.assign(Object.assign({},Ih),dH),n.pluginHooks.eventRefiners)}function ev(n,e,t,r,i,s,o){let l={title:n.title||"",groupId:n.groupId||"",publicId:n.id||"",url:n.url||"",recurringDef:null,defId:(o&&n.id?o[n.id]:"")||qo(),sourceId:t,allDay:r,hasEnd:i,interactive:n.interactive,ui:Mh(n,s),extendedProps:Object.assign(Object.assign({},n.extendedProps||{}),e)};for(let c of s.pluginHooks.eventDefMemberAdders)Object.assign(l,c(n));return Object.freeze(l.ui.classNames),Object.freeze(l.extendedProps),l}function hH(n,e,t,r){let{allDay:i}=n,s,o=null,l=!1,c,d=null,h=n.start!=null?n.start:n.date;if(s=t.dateEnv.createMarkerMeta(h),s)o=s.marker;else if(!r)return null;return n.end!=null&&(c=t.dateEnv.createMarkerMeta(n.end)),i==null&&(e!=null?i=e:i=(!s||s.isTimeUnspecified)&&(!c||c.isTimeUnspecified)),i&&o&&(o=St(o)),c&&(d=c.marker,i&&(d=St(d)),o&&d<=o&&(d=null)),d?l=!0:r||(l=t.options.forceEventDuration||!1,d=t.dateEnv.add(o,i?t.options.defaultAllDayEventDuration:t.options.defaultTimedEventDuration)),{allDay:i,hasEnd:l,range:{start:o,end:d},forcedStartTzo:s?s.forcedTzo:null,forcedEndTzo:c?c.forcedTzo:null}}function fH(n,e){let t=null;return n&&(t=n.defaultAllDay),t==null&&(t=e.options.defaultAllDay),t}function Rc(n,e,t,r,i,s){let o=_r(),l=dy(t);for(let c of n){let d=Fk(c,e,t,r,l,i,s);d&&tv(d,o)}return o}function tv(n,e=_r()){return e.defs[n.def.defId]=n.def,n.instance&&(e.instances[n.instance.instanceId]=n.instance),e}function hy(n,e){let t=n.instances[e];if(t){let r=n.defs[t.defId],i=gf(n,s=>pH(r,s));return i.defs[r.defId]=r,i.instances[t.instanceId]=t,i}return _r()}function pH(n,e){return!!(n.groupId&&n.groupId===e.groupId)}function _r(){return{defs:{},instances:{}}}function fy(n,e){return{defs:Object.assign(Object.assign({},n.defs),e.defs),instances:Object.assign(Object.assign({},n.instances),e.instances)}}function gf(n,e){let t=Lo(n.defs,e),r=Lo(n.instances,i=>t[i.defId]);return{defs:t,instances:r}}function gH(n,e){let{defs:t,instances:r}=n,i={},s={};for(let o in t)e.defs[o]||(i[o]=t[o]);for(let o in r)!e.instances[o]&&i[r[o].defId]&&(s[o]=r[o]);return{defs:i,instances:s}}function mH(n,e){return Array.isArray(n)?Rc(n,null,e,!0):typeof n=="object"&&n?Rc([n],null,e,!0):n!=null?String(n):null}function WS(n){return Array.isArray(n)?n:typeof n=="string"?n.split(/\s+/):[]}const Ih={display:String,editable:Boolean,startEditable:Boolean,durationEditable:Boolean,constraint:$,overlap:$,allow:$,className:WS,classNames:WS,color:String,backgroundColor:String,borderColor:String,textColor:String},vH={display:null,startEditable:null,durationEditable:null,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]};function Mh(n,e){let t=mH(n.constraint,e);return{display:n.display||null,startEditable:n.startEditable!=null?n.startEditable:n.editable,durationEditable:n.durationEditable!=null?n.durationEditable:n.editable,constraints:t!=null?[t]:[],overlap:n.overlap!=null?n.overlap:null,allows:n.allow!=null?[n.allow]:[],backgroundColor:n.backgroundColor||n.color||"",borderColor:n.borderColor||n.color||"",textColor:n.textColor||"",classNames:(n.className||[]).concat(n.classNames||[])}}function Bk(n){return n.reduce(yH,vH)}function yH(n,e){return{display:e.display!=null?e.display:n.display,startEditable:e.startEditable!=null?e.startEditable:n.startEditable,durationEditable:e.durationEditable!=null?e.durationEditable:n.durationEditable,constraints:n.constraints.concat(e.constraints),overlap:typeof e.overlap=="boolean"?e.overlap:n.overlap,allows:n.allows.concat(e.allows),backgroundColor:e.backgroundColor||n.backgroundColor,borderColor:e.borderColor||n.borderColor,textColor:e.textColor||n.textColor,classNames:n.classNames.concat(e.classNames)}}const bH={id:String,defaultAllDay:Boolean,url:String,format:String,events:$,eventDataTransform:$,success:$,failure:$};function Hk(n,e,t=zk(e)){let r;if(typeof n=="string"?r={url:n}:typeof n=="function"||Array.isArray(n)?r={events:n}:typeof n=="object"&&n&&(r=n),r){let{refined:i,extra:s}=iy(r,t),o=_H(i,e);if(o)return{_raw:n,isFetching:!1,latestFetchId:"",fetchRange:null,defaultAllDay:i.defaultAllDay,eventDataTransform:i.eventDataTransform,success:i.success,failure:i.failure,publicId:i.id||"",sourceId:qo(),sourceDefId:o.sourceDefId,meta:o.meta,ui:Mh(i,e),extendedProps:s}}return null}function zk(n){return Object.assign(Object.assign(Object.assign({},Ih),bH),n.pluginHooks.eventSourceRefiners)}function _H(n,e){let t=e.pluginHooks.eventSourceDefs;for(let r=t.length-1;r>=0;r-=1){let s=t[r].parseMeta(n);if(s)return{sourceDefId:r,meta:s}}return null}function wH(n,e,t,r,i){switch(e.type){case"RECEIVE_EVENTS":return SH(n,t[e.sourceId],e.fetchId,e.fetchRange,e.rawEvents,i);case"RESET_RAW_EVENTS":return xH(n,t[e.sourceId],e.rawEvents,r.activeRange,i);case"ADD_EVENTS":return EH(n,e.eventStore,r?r.activeRange:null,i);case"RESET_EVENTS":return e.eventStore;case"MERGE_EVENTS":return fy(n,e.eventStore);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return r?Fo(n,r.activeRange,i):n;case"REMOVE_EVENTS":return gH(n,e.eventStore);case"REMOVE_EVENT_SOURCE":return Wk(n,e.sourceId);case"REMOVE_ALL_EVENT_SOURCES":return gf(n,s=>!s.sourceId);case"REMOVE_ALL_EVENTS":return _r();default:return n}}function SH(n,e,t,r,i,s){if(e&&t===e.latestFetchId){let o=Rc($k(i,e,s),e,s);return r&&(o=Fo(o,r,s)),fy(Wk(n,e.sourceId),o)}return n}function xH(n,e,t,r,i){const{defIdMap:s,instanceIdMap:o}=TH(n);let l=Rc($k(t,e,i),e,i,!1,s,o);return Fo(l,r,i)}function $k(n,e,t){let r=t.options.eventDataTransform,i=e?e.eventDataTransform:null;return i&&(n=VS(n,i)),r&&(n=VS(n,r)),n}function VS(n,e){let t;if(!e)t=n;else{t=[];for(let r of n){let i=e(r);i?t.push(i):i==null&&t.push(r)}}return t}function EH(n,e,t,r){return t&&(e=Fo(e,t,r)),fy(n,e)}function qS(n,e,t){let{defs:r}=n,i=es(n.instances,s=>r[s.defId].allDay?s:Object.assign(Object.assign({},s),{range:{start:t.createMarker(e.toDate(s.range.start,s.forcedStartTzo)),end:t.createMarker(e.toDate(s.range.end,s.forcedEndTzo))},forcedStartTzo:t.canComputeOffset?null:s.forcedStartTzo,forcedEndTzo:t.canComputeOffset?null:s.forcedEndTzo}));return{defs:r,instances:i}}function Wk(n,e){return gf(n,t=>t.sourceId!==e)}function CH(n,e){return{defs:n.defs,instances:Lo(n.instances,t=>!e[t.instanceId])}}function TH(n){const{defs:e,instances:t}=n,r={},i={};for(let s in e){const o=e[s],{publicId:l}=o;l&&(r[l]=s)}for(let s in t){const o=t[s],l=e[o.defId],{publicId:c}=l;c&&(i[c]=s)}return{defIdMap:r,instanceIdMap:i}}class mf{constructor(){this.handlers={},this.thisContext=null}setThisContext(e){this.thisContext=e}setOptions(e){this.options=e}on(e,t){kH(this.handlers,e,t)}off(e,t){AH(this.handlers,e,t)}trigger(e,...t){let r=this.handlers[e]||[],i=this.options&&this.options[e],s=[].concat(i||[],r);for(let o of s)o.apply(this.thisContext,t)}hasHandlers(e){return!!(this.handlers[e]&&this.handlers[e].length||this.options&&this.options[e])}}function kH(n,e,t){(n[e]||(n[e]=[])).push(t)}function AH(n,e,t){t?n[e]&&(n[e]=n[e].filter(r=>r!==t)):delete n[e]}const DH={startTime:"09:00",endTime:"17:00",daysOfWeek:[1,2,3,4,5],display:"inverse-background",classNames:"fc-non-business",groupId:"_businessHours"};function RH(n,e){return Rc(OH(n),null,e)}function OH(n){let e;return n===!0?e=[{}]:Array.isArray(n)?e=n.filter(t=>t.daysOfWeek):typeof n=="object"&&n?e=[n]:e=[],e=e.map(t=>Object.assign(Object.assign({},DH),t)),e}function Vk(n,e,t){t.emitter.trigger("select",Object.assign(Object.assign({},py(n,t)),{jsEvent:e?e.origEvent:null,view:t.viewApi||t.calendarApi.view}))}function IH(n,e){e.emitter.trigger("unselect",{jsEvent:n?n.origEvent:null,view:e.viewApi||e.calendarApi.view})}function py(n,e){let t={};for(let r of e.pluginHooks.dateSpanTransforms)Object.assign(t,r(n,e));return Object.assign(t,qH(n,e.dateEnv)),t}function GS(n,e,t){let{dateEnv:r,options:i}=t,s=e;return n?(s=St(s),s=r.add(s,i.defaultAllDayEventDuration)):s=r.add(s,i.defaultTimedEventDuration),s}function gy(n,e,t,r){let i=Nh(n.defs,e),s=_r();for(let o in n.defs){let l=n.defs[o];s.defs[o]=MH(l,i[o],t,r)}for(let o in n.instances){let l=n.instances[o],c=s.defs[l.defId];s.instances[o]=NH(l,c,i[l.defId],t,r)}return s}function MH(n,e,t,r){let i=t.standardProps||{};i.hasEnd==null&&e.durationEditable&&(t.startDelta||t.endDelta)&&(i.hasEnd=!0);let s=Object.assign(Object.assign(Object.assign({},n),i),{ui:Object.assign(Object.assign({},n.ui),i.ui)});t.extendedProps&&(s.extendedProps=Object.assign(Object.assign({},s.extendedProps),t.extendedProps));for(let o of r.pluginHooks.eventDefMutationAppliers)o(s,t,r);return!s.hasEnd&&r.options.forceEventDuration&&(s.hasEnd=!0),s}function NH(n,e,t,r,i){let{dateEnv:s}=i,o=r.standardProps&&r.standardProps.allDay===!0,l=r.standardProps&&r.standardProps.hasEnd===!1,c=Object.assign({},n);return o&&(c.range=Pk(c.range)),r.datesDelta&&t.startEditable&&(c.range={start:s.add(c.range.start,r.datesDelta),end:s.add(c.range.end,r.datesDelta)}),r.startDelta&&t.durationEditable&&(c.range={start:s.add(c.range.start,r.startDelta),end:c.range.end}),r.endDelta&&t.durationEditable&&(c.range={start:c.range.start,end:s.add(c.range.end,r.endDelta)}),l&&(c.range={start:c.range.start,end:GS(e.allDay,c.range.start,i)}),e.allDay&&(c.range={start:St(c.range.start),end:St(c.range.end)}),c.range.end<c.range.start&&(c.range.end=GS(e.allDay,c.range.start,i)),c}class Oa{constructor(e,t){this.context=e,this.internalEventSource=t}remove(){this.context.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:this.internalEventSource.sourceId})}refetch(){this.context.dispatch({type:"FETCH_EVENT_SOURCES",sourceIds:[this.internalEventSource.sourceId],isRefetch:!0})}get id(){return this.internalEventSource.publicId}get url(){return this.internalEventSource.meta.url}get format(){return this.internalEventSource.meta.format}}class Nt{constructor(e,t,r){this._context=e,this._def=t,this._instance=r||null}setProp(e,t){if(e in Lk)console.warn("Could not set date-related prop 'name'. Use one of the date-related methods instead.");else if(e==="id")t=oh[e](t),this.mutate({standardProps:{publicId:t}});else if(e in oh)t=oh[e](t),this.mutate({standardProps:{[e]:t}});else if(e in Ih){let r=Ih[e](t);e==="color"?r={backgroundColor:t,borderColor:t}:e==="editable"?r={startEditable:t,durationEditable:t}:r={[e]:t},this.mutate({standardProps:{ui:r}})}else console.warn(`Could not set prop '${e}'. Use setExtendedProp instead.`)}setExtendedProp(e,t){this.mutate({extendedProps:{[e]:t}})}setStart(e,t={}){let{dateEnv:r}=this._context,i=r.createMarker(e);if(i&&this._instance){let s=this._instance.range,o=Pa(s.start,i,r,t.granularity);t.maintainDuration?this.mutate({datesDelta:o}):this.mutate({startDelta:o})}}setEnd(e,t={}){let{dateEnv:r}=this._context,i;if(!(e!=null&&(i=r.createMarker(e),!i))&&this._instance)if(i){let s=Pa(this._instance.range.end,i,r,t.granularity);this.mutate({endDelta:s})}else this.mutate({standardProps:{hasEnd:!1}})}setDates(e,t,r={}){let{dateEnv:i}=this._context,s={allDay:r.allDay},o=i.createMarker(e),l;if(o&&!(t!=null&&(l=i.createMarker(t),!l))&&this._instance){let c=this._instance.range;r.allDay===!0&&(c=Pk(c));let d=Pa(c.start,o,i,r.granularity);if(l){let h=Pa(c.end,l,i,r.granularity);iB(d,h)?this.mutate({datesDelta:d,standardProps:s}):this.mutate({startDelta:d,endDelta:h,standardProps:s})}else s.hasEnd=!1,this.mutate({datesDelta:d,standardProps:s})}}moveStart(e){let t=Ze(e);t&&this.mutate({startDelta:t})}moveEnd(e){let t=Ze(e);t&&this.mutate({endDelta:t})}moveDates(e){let t=Ze(e);t&&this.mutate({datesDelta:t})}setAllDay(e,t={}){let r={allDay:e},{maintainDuration:i}=t;i==null&&(i=this._context.options.allDayMaintainDuration),this._def.allDay!==e&&(r.hasEnd=i),this.mutate({standardProps:r})}formatRange(e){let{dateEnv:t}=this._context,r=this._instance,i=It(e);return this._def.hasEnd?t.formatRange(r.range.start,r.range.end,i,{forcedStartTzo:r.forcedStartTzo,forcedEndTzo:r.forcedEndTzo}):t.format(r.range.start,i,{forcedTzo:r.forcedStartTzo})}mutate(e){let t=this._instance;if(t){let r=this._def,i=this._context,{eventStore:s}=i.getCurrentData(),o=hy(s,t.instanceId);o=gy(o,{"":{display:"",startEditable:!0,durationEditable:!0,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]}},e,i);let c=new Nt(i,r,t);this._def=o.defs[r.defId],this._instance=o.instances[t.instanceId],i.dispatch({type:"MERGE_EVENTS",eventStore:o}),i.emitter.trigger("eventChange",{oldEvent:c,event:this,relatedEvents:Oo(o,i,t),revert(){i.dispatch({type:"RESET_EVENTS",eventStore:s})}})}}remove(){let e=this._context,t=qk(this);e.dispatch({type:"REMOVE_EVENTS",eventStore:t}),e.emitter.trigger("eventRemove",{event:this,relatedEvents:[],revert(){e.dispatch({type:"MERGE_EVENTS",eventStore:t})}})}get source(){let{sourceId:e}=this._def;return e?new Oa(this._context,this._context.getCurrentData().eventSources[e]):null}get start(){return this._instance?this._context.dateEnv.toDate(this._instance.range.start):null}get end(){return this._instance&&this._def.hasEnd?this._context.dateEnv.toDate(this._instance.range.end):null}get startStr(){let e=this._instance;return e?this._context.dateEnv.formatIso(e.range.start,{omitTime:this._def.allDay,forcedTzo:e.forcedStartTzo}):""}get endStr(){let e=this._instance;return e&&this._def.hasEnd?this._context.dateEnv.formatIso(e.range.end,{omitTime:this._def.allDay,forcedTzo:e.forcedEndTzo}):""}get id(){return this._def.publicId}get groupId(){return this._def.groupId}get allDay(){return this._def.allDay}get title(){return this._def.title}get url(){return this._def.url}get display(){return this._def.ui.display||"auto"}get startEditable(){return this._def.ui.startEditable}get durationEditable(){return this._def.ui.durationEditable}get constraint(){return this._def.ui.constraints[0]||null}get overlap(){return this._def.ui.overlap}get allow(){return this._def.ui.allows[0]||null}get backgroundColor(){return this._def.ui.backgroundColor}get borderColor(){return this._def.ui.borderColor}get textColor(){return this._def.ui.textColor}get classNames(){return this._def.ui.classNames}get extendedProps(){return this._def.extendedProps}toPlainObject(e={}){let t=this._def,{ui:r}=t,{startStr:i,endStr:s}=this,o={allDay:t.allDay};return t.title&&(o.title=t.title),i&&(o.start=i),s&&(o.end=s),t.publicId&&(o.id=t.publicId),t.groupId&&(o.groupId=t.groupId),t.url&&(o.url=t.url),r.display&&r.display!=="auto"&&(o.display=r.display),e.collapseColor&&r.backgroundColor&&r.backgroundColor===r.borderColor?o.color=r.backgroundColor:(r.backgroundColor&&(o.backgroundColor=r.backgroundColor),r.borderColor&&(o.borderColor=r.borderColor)),r.textColor&&(o.textColor=r.textColor),r.classNames.length&&(o.classNames=r.classNames),Object.keys(t.extendedProps).length&&(e.collapseExtendedProps?Object.assign(o,t.extendedProps):o.extendedProps=t.extendedProps),o}toJSON(){return this.toPlainObject()}}function qk(n){let e=n._def,t=n._instance;return{defs:{[e.defId]:e},instances:t?{[t.instanceId]:t}:{}}}function Oo(n,e,t){let{defs:r,instances:i}=n,s=[],o=t?t.instanceId:"";for(let l in i){let c=i[l],d=r[c.defId];c.instanceId!==o&&s.push(new Nt(e,d,c))}return s}function nv(n,e,t,r){let i={},s={},o={},l=[],c=[],d=Nh(n.defs,e);for(let h in n.defs){let p=n.defs[h];d[p.defId].display==="inverse-background"&&(p.groupId?(i[p.groupId]=[],o[p.groupId]||(o[p.groupId]=p)):s[h]=[])}for(let h in n.instances){let p=n.instances[h],g=n.defs[p.defId],v=d[g.defId],y=p.range,_=!g.allDay&&r?cy(y,r):y,w=$s(_,t);w&&(v.display==="inverse-background"?g.groupId?i[g.groupId].push(w):s[p.defId].push(w):v.display!=="none"&&(v.display==="background"?l:c).push({def:g,ui:v,instance:p,range:w,isStart:_.start&&_.start.valueOf()===w.start.valueOf(),isEnd:_.end&&_.end.valueOf()===w.end.valueOf()}))}for(let h in i){let p=i[h],g=$S(p,t);for(let v of g){let y=o[h],_=d[y.defId];l.push({def:y,ui:_,instance:null,range:v,isStart:!1,isEnd:!1})}}for(let h in s){let p=s[h],g=$S(p,t);for(let v of g)l.push({def:n.defs[h],ui:d[h],instance:null,range:v,isStart:!1,isEnd:!1})}return{bg:l,fg:c}}function PH(n){return n.ui.display==="background"||n.ui.display==="inverse-background"}function YS(n,e){n.fcSeg=e}function Ga(n){return n.fcSeg||n.parentNode.fcSeg||null}function Nh(n,e){return es(n,t=>Gk(t,e))}function Gk(n,e){let t=[];return e[""]&&t.push(e[""]),e[n.defId]&&t.push(e[n.defId]),t.push(n.ui),Bk(t)}function my(n,e){let t=n.map(jH);return t.sort((r,i)=>XU(r,i,e)),t.map(r=>r._seg)}function jH(n){let{eventRange:e}=n,t=e.def,r=e.instance?e.instance.range:e.range,i=r.start?r.start.valueOf():0,s=r.end?r.end.valueOf():0;return Object.assign(Object.assign(Object.assign({},t.extendedProps),t),{id:t.publicId,start:i,end:s,duration:s-i,allDay:Number(t.allDay),_seg:n})}function LH(n,e){let{pluginHooks:t}=e,r=t.isDraggableTransformers,{def:i,ui:s}=n.eventRange,o=s.startEditable;for(let l of r)o=l(o,i,s,e);return o}function FH(n,e){return n.isStart&&n.eventRange.ui.durationEditable&&e.options.eventResizableFromStart}function UH(n,e){return n.isEnd&&n.eventRange.ui.durationEditable}function fc(n,e,t,r,i,s,o){let{dateEnv:l,options:c}=t,{displayEventTime:d,displayEventEnd:h}=c,p=n.eventRange.def,g=n.eventRange.instance;d==null&&(d=r!==!1),h==null&&(h=i!==!1);let v=g.range.start,y=g.range.end,_=s||n.start||n.eventRange.range.start,w=o||n.end||n.eventRange.range.end,x=St(v).valueOf()===St(_).valueOf(),C=St(zs(y,-1)).valueOf()===St(zs(w,-1)).valueOf();return d&&!p.allDay&&(x||C)?(_=x?v:_,w=C?y:w,h&&p.hasEnd?l.formatRange(_,w,e,{forcedStartTzo:s?null:g.forcedStartTzo,forcedEndTzo:o?null:g.forcedEndTzo}):l.format(_,e,{forcedTzo:s?null:g.forcedStartTzo})):""}function Zi(n,e,t){let r=n.eventRange.range;return{isPast:r.end<=(t||e.start),isFuture:r.start>=(t||e.end),isToday:e&&Xi(e,r.start)}}function BH(n){let e=["fc-event"];return n.isMirror&&e.push("fc-event-mirror"),n.isDraggable&&e.push("fc-event-draggable"),(n.isStartResizable||n.isEndResizable)&&e.push("fc-event-resizable"),n.isDragging&&e.push("fc-event-dragging"),n.isResizing&&e.push("fc-event-resizing"),n.isSelected&&e.push("fc-event-selected"),n.isStart&&e.push("fc-event-start"),n.isEnd&&e.push("fc-event-end"),n.isPast&&e.push("fc-event-past"),n.isToday&&e.push("fc-event-today"),n.isFuture&&e.push("fc-event-future"),e}function Yk(n){return n.instance?n.instance.instanceId:`${n.def.defId}:${n.range.start.toISOString()}`}function vy(n,e){let{def:t,instance:r}=n.eventRange,{url:i}=t;if(i)return{href:i};let{emitter:s,options:o}=e,{eventInteractive:l}=o;return l==null&&(l=t.interactive,l==null&&(l=!!s.hasHandlers("eventClick"))),l?Tk(c=>{s.trigger("eventClick",{el:c.target,event:new Nt(e,t,r),jsEvent:c,view:e.viewApi})}):{}}const HH={start:$,end:$,allDay:Boolean};function zH(n,e,t){let r=$H(n,e),{range:i}=r;if(!i.start)return null;if(!i.end){if(t==null)return null;i.end=e.add(i.start,t)}return r}function $H(n,e){let{refined:t,extra:r}=iy(n,HH),i=t.start?e.createMarkerMeta(t.start):null,s=t.end?e.createMarkerMeta(t.end):null,{allDay:o}=t;return o==null&&(o=i&&i.isTimeUnspecified&&(!s||s.isTimeUnspecified)),Object.assign({range:{start:i?i.marker:null,end:s?s.marker:null},allDay:o},r)}function WH(n,e){return oH(n.range,e.range)&&n.allDay===e.allDay&&VH(n,e)}function VH(n,e){for(let t in e)if(t!=="range"&&t!=="allDay"&&n[t]!==e[t])return!1;for(let t in n)if(!(t in e))return!1;return!0}function qH(n,e){return Object.assign(Object.assign({},Qk(n.range,e,n.allDay)),{allDay:n.allDay})}function Kk(n,e,t){return Object.assign(Object.assign({},Qk(n,e,t)),{timeZone:e.timeZone})}function Qk(n,e,t){return{start:e.toDate(n.start),end:e.toDate(n.end),startStr:e.formatIso(n.start,{omitTime:t}),endStr:e.formatIso(n.end,{omitTime:t})}}function GH(n,e,t){let r=Uk({editable:!1},t),i=ev(r.refined,r.extra,"",n.allDay,!0,t);return{def:i,ui:Gk(i,e),instance:uy(i.defId,n.range),range:n.range,isStart:!0,isEnd:!0}}function YH(n,e,t){let r=!1,i=function(l){r||(r=!0,e(l))},s=function(l){r||(r=!0,t(l))},o=n(i,s);o&&typeof o.then=="function"&&o.then(i,s)}class KS extends Error{constructor(e,t){super(e),this.response=t}}function KH(n,e,t){n=n.toUpperCase();const r={method:n};return n==="GET"?e+=(e.indexOf("?")===-1?"?":"&")+new URLSearchParams(t):(r.body=new URLSearchParams(t),r.headers={"Content-Type":"application/x-www-form-urlencoded"}),fetch(e,r).then(i=>{if(i.ok)return i.json().then(s=>[s,i],()=>{throw new KS("Failure parsing JSON",i)});throw new KS("Request failed",i)})}let qg;function Xk(){return qg==null&&(qg=QH()),qg}function QH(){if(typeof document>"u")return!0;let n=document.createElement("div");n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.innerHTML="<table><tr><td><div></div></td></tr></table>",n.querySelector("table").style.height="100px",n.querySelector("div").style.height="100%",document.body.appendChild(n);let t=n.querySelector("div").offsetHeight>0;return document.body.removeChild(n),t}class XH extends ut{constructor(){super(...arguments),this.state={forPrint:!1},this.handleBeforePrint=()=>{Oh(()=>{this.setState({forPrint:!0})})},this.handleAfterPrint=()=>{Oh(()=>{this.setState({forPrint:!1})})}}render(){let{props:e}=this,{options:t}=e,{forPrint:r}=this.state,i=r||t.height==="auto"||t.contentHeight==="auto",s=!i&&t.height!=null?t.height:"",o=["fc",r?"fc-media-print":"fc-media-screen",`fc-direction-${t.direction}`,e.theme.getClass("root")];return Xk()||o.push("fc-liquid-hack"),e.children(o,s,i,r)}componentDidMount(){let{emitter:e}=this.props;e.on("_beforeprint",this.handleBeforePrint),e.on("_afterprint",this.handleAfterPrint)}componentWillUnmount(){let{emitter:e}=this.props;e.off("_beforeprint",this.handleBeforePrint),e.off("_afterprint",this.handleAfterPrint)}}let al=class{constructor(e){this.component=e.component,this.isHitComboAllowed=e.isHitComboAllowed||null}destroy(){}};function ZH(n,e){return{component:n,el:e.el,useEventCenter:e.useEventCenter!=null?e.useEventCenter:!0,isHitComboAllowed:e.isHitComboAllowed||null}}function yy(n){return{[n.component.uid]:n}}const rv={};class Yo extends br{constructor(e,t){super(e,t),this.handleRefresh=()=>{let r=this.computeTiming();r.state.nowDate.valueOf()!==this.state.nowDate.valueOf()&&this.setState(r.state),this.clearTimeout(),this.setTimeout(r.waitMs)},this.handleVisibilityChange=()=>{document.hidden||this.handleRefresh()},this.state=this.computeTiming().state}render(){let{props:e,state:t}=this;return e.children(t.nowDate,t.todayRange)}componentDidMount(){this.setTimeout(),this.context.nowManager.addResetListener(this.handleRefresh),document.addEventListener("visibilitychange",this.handleVisibilityChange)}componentDidUpdate(e){e.unit!==this.props.unit&&(this.clearTimeout(),this.setTimeout())}componentWillUnmount(){this.clearTimeout(),this.context.nowManager.removeResetListener(this.handleRefresh),document.removeEventListener("visibilitychange",this.handleVisibilityChange)}computeTiming(){let{props:e,context:t}=this,r=t.nowManager.getDateMarker(),{nowIndicatorSnap:i}=t.options;i==="auto"&&(i=/year|month|week|day/.test(e.unit)||(e.unitValue||1)===1);let s,o;return i?(s=t.dateEnv.startOf(r,e.unit),o=t.dateEnv.add(s,Ze(1,e.unit)).valueOf()-r.valueOf()):(s=r,o=1e3*60),o=Math.min(1e3*60*60*24,o),{state:{nowDate:s,todayRange:JH(s)},waitMs:o}}setTimeout(e=this.computeTiming().waitMs){this.timeoutId=setTimeout(()=>{const t=this.computeTiming();this.setState(t.state,()=>{this.setTimeout(t.waitMs)})},e)}clearTimeout(){this.timeoutId&&clearTimeout(this.timeoutId)}}Yo.contextType=ss;function JH(n){let e=St(n),t=sn(e,1);return{start:e,end:t}}class ez{getCurrentData(){return this.currentDataManager.getCurrentData()}dispatch(e){this.currentDataManager.dispatch(e)}get view(){return this.getCurrentData().viewApi}batchRendering(e){e()}updateSize(){this.trigger("_resize",!0)}setOption(e,t){this.dispatch({type:"SET_OPTION",optionName:e,rawOptionValue:t})}getOption(e){return this.currentDataManager.currentCalendarOptionsInput[e]}getAvailableLocaleCodes(){return Object.keys(this.getCurrentData().availableRawLocales)}on(e,t){let{currentDataManager:r}=this;r.currentCalendarOptionsRefiners[e]?r.emitter.on(e,t):console.warn(`Unknown listener name '${e}'`)}off(e,t){this.currentDataManager.emitter.off(e,t)}trigger(e,...t){this.currentDataManager.emitter.trigger(e,...t)}changeView(e,t){this.batchRendering(()=>{if(this.unselect(),t)if(t.start&&t.end)this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e}),this.dispatch({type:"SET_OPTION",optionName:"visibleRange",rawOptionValue:t});else{let{dateEnv:r}=this.getCurrentData();this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e,dateMarker:r.createMarker(t)})}else this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e})})}zoomTo(e,t){let r=this.getCurrentData(),i;t=t||"day",i=r.viewSpecs[t]||this.getUnitViewSpec(t),this.unselect(),i?this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:i.type,dateMarker:e}):this.dispatch({type:"CHANGE_DATE",dateMarker:e})}getUnitViewSpec(e){let{viewSpecs:t,toolbarConfig:r}=this.getCurrentData(),i=[].concat(r.header?r.header.viewsWithButtons:[],r.footer?r.footer.viewsWithButtons:[]),s,o;for(let l in t)i.push(l);for(s=0;s<i.length;s+=1)if(o=t[i[s]],o&&o.singleUnit===e)return o;return null}prev(){this.unselect(),this.dispatch({type:"PREV"})}next(){this.unselect(),this.dispatch({type:"NEXT"})}prevYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,-1)})}nextYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,1)})}today(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.nowManager.getDateMarker()})}gotoDate(e){let t=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:t.dateEnv.createMarker(e)})}incrementDate(e){let t=this.getCurrentData(),r=Ze(e);r&&(this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:t.dateEnv.add(t.currentDate,r)}))}getDate(){let e=this.getCurrentData();return e.dateEnv.toDate(e.currentDate)}formatDate(e,t){let{dateEnv:r}=this.getCurrentData();return r.format(r.createMarker(e),It(t))}formatRange(e,t,r){let{dateEnv:i}=this.getCurrentData();return i.formatRange(i.createMarker(e),i.createMarker(t),It(r),r)}formatIso(e,t){let{dateEnv:r}=this.getCurrentData();return r.formatIso(r.createMarker(e),{omitTime:t})}select(e,t){let r;t==null?e.start!=null?r=e:r={start:e,end:null}:r={start:e,end:t};let i=this.getCurrentData(),s=zH(r,i.dateEnv,Ze({days:1}));s&&(this.dispatch({type:"SELECT_DATES",selection:s}),Vk(s,null,i))}unselect(e){let t=this.getCurrentData();t.dateSelection&&(this.dispatch({type:"UNSELECT_DATES"}),IH(e,t))}addEvent(e,t){if(e instanceof Nt){let o=e._def,l=e._instance;return this.getCurrentData().eventStore.defs[o.defId]||(this.dispatch({type:"ADD_EVENTS",eventStore:tv({def:o,instance:l})}),this.triggerEventAdd(e)),e}let r=this.getCurrentData(),i;if(t instanceof Oa)i=t.internalEventSource;else if(typeof t=="boolean")t&&([i]=oy(r.eventSources));else if(t!=null){let o=this.getEventSourceById(t);if(!o)return console.warn(`Could not find an event source with ID "${t}"`),null;i=o.internalEventSource}let s=Fk(e,i,r,!1);if(s){let o=new Nt(r,s.def,s.def.recurringDef?null:s.instance);return this.dispatch({type:"ADD_EVENTS",eventStore:tv(s)}),this.triggerEventAdd(o),o}return null}triggerEventAdd(e){let{emitter:t}=this.getCurrentData();t.trigger("eventAdd",{event:e,relatedEvents:[],revert:()=>{this.dispatch({type:"REMOVE_EVENTS",eventStore:qk(e)})}})}getEventById(e){let t=this.getCurrentData(),{defs:r,instances:i}=t.eventStore;e=String(e);for(let s in r){let o=r[s];if(o.publicId===e){if(o.recurringDef)return new Nt(t,o,null);for(let l in i){let c=i[l];if(c.defId===o.defId)return new Nt(t,o,c)}}}return null}getEvents(){let e=this.getCurrentData();return Oo(e.eventStore,e)}removeAllEvents(){this.dispatch({type:"REMOVE_ALL_EVENTS"})}getEventSources(){let e=this.getCurrentData(),t=e.eventSources,r=[];for(let i in t)r.push(new Oa(e,t[i]));return r}getEventSourceById(e){let t=this.getCurrentData(),r=t.eventSources;e=String(e);for(let i in r)if(r[i].publicId===e)return new Oa(t,r[i]);return null}addEventSource(e){let t=this.getCurrentData();if(e instanceof Oa)return t.eventSources[e.internalEventSource.sourceId]||this.dispatch({type:"ADD_EVENT_SOURCES",sources:[e.internalEventSource]}),e;let r=Hk(e,t);return r?(this.dispatch({type:"ADD_EVENT_SOURCES",sources:[r]}),new Oa(t,r)):null}removeAllEventSources(){this.dispatch({type:"REMOVE_ALL_EVENT_SOURCES"})}refetchEvents(){this.dispatch({type:"FETCH_EVENT_SOURCES",isRefetch:!0})}scrollToTime(e){let t=Ze(e);t&&this.trigger("_scrollRequest",{time:t})}}function tz(n,e){return n.left>=e.left&&n.left<e.right&&n.top>=e.top&&n.top<e.bottom}function Zk(n,e){let t={left:Math.max(n.left,e.left),right:Math.min(n.right,e.right),top:Math.max(n.top,e.top),bottom:Math.min(n.bottom,e.bottom)};return t.left<t.right&&t.top<t.bottom?t:!1}function nz(n,e){return{left:Math.min(Math.max(n.left,e.left),e.right),top:Math.min(Math.max(n.top,e.top),e.bottom)}}function rz(n){return{left:(n.left+n.right)/2,top:(n.top+n.bottom)/2}}function iz(n,e){return{left:n.left-e.left,top:n.top-e.top}}const Gg=_r();class sz{constructor(){this.getKeysForEventDefs=Te(this._getKeysForEventDefs),this.splitDateSelection=Te(this._splitDateSpan),this.splitEventStore=Te(this._splitEventStore),this.splitIndividualUi=Te(this._splitIndividualUi),this.splitEventDrag=Te(this._splitInteraction),this.splitEventResize=Te(this._splitInteraction),this.eventUiBuilders={}}splitProps(e){let t=this.getKeyInfo(e),r=this.getKeysForEventDefs(e.eventStore),i=this.splitDateSelection(e.dateSelection),s=this.splitIndividualUi(e.eventUiBases,r),o=this.splitEventStore(e.eventStore,r),l=this.splitEventDrag(e.eventDrag),c=this.splitEventResize(e.eventResize),d={};this.eventUiBuilders=es(t,(h,p)=>this.eventUiBuilders[p]||Te(oz));for(let h in t){let p=t[h],g=o[h]||Gg,v=this.eventUiBuilders[h];d[h]={businessHours:p.businessHours||e.businessHours,dateSelection:i[h]||null,eventStore:g,eventUiBases:v(e.eventUiBases[""],p.ui,s[h]),eventSelection:g.instances[e.eventSelection]?e.eventSelection:"",eventDrag:l[h]||null,eventResize:c[h]||null}}return d}_splitDateSpan(e){let t={};if(e){let r=this.getKeysForDateSpan(e);for(let i of r)t[i]=e}return t}_getKeysForEventDefs(e){return es(e.defs,t=>this.getKeysForEventDef(t))}_splitEventStore(e,t){let{defs:r,instances:i}=e,s={};for(let o in r)for(let l of t[o])s[l]||(s[l]=_r()),s[l].defs[o]=r[o];for(let o in i){let l=i[o];for(let c of t[l.defId])s[c]&&(s[c].instances[o]=l)}return s}_splitIndividualUi(e,t){let r={};for(let i in e)if(i)for(let s of t[i])r[s]||(r[s]={}),r[s][i]=e[i];return r}_splitInteraction(e){let t={};if(e){let r=this._splitEventStore(e.affectedEvents,this._getKeysForEventDefs(e.affectedEvents)),i=this._getKeysForEventDefs(e.mutatedEvents),s=this._splitEventStore(e.mutatedEvents,i),o=l=>{t[l]||(t[l]={affectedEvents:r[l]||Gg,mutatedEvents:s[l]||Gg,isEvent:e.isEvent})};for(let l in r)o(l);for(let l in s)o(l)}return t}}function oz(n,e,t){let r=[];n&&r.push(n),e&&r.push(e);let i={"":Bk(r)};return t&&Object.assign(i,t),i}function by(n,e,t,r){return{dow:n.getUTCDay(),isDisabled:!!(r&&(!r.activeRange||!Xi(r.activeRange,n))),isOther:!!(r&&!Xi(r.currentRange,n)),isToday:!!(e&&Xi(e,n)),isPast:!!(t?n<t:e&&n<e.start),isFuture:!!(t?n>t:e&&n>=e.end)}}function vf(n,e){let t=["fc-day",`fc-day-${cB[n.dow]}`];return n.isDisabled?t.push("fc-day-disabled"):(n.isToday&&(t.push("fc-day-today"),t.push(e.getClass("today"))),n.isPast&&t.push("fc-day-past"),n.isFuture&&t.push("fc-day-future"),n.isOther&&t.push("fc-day-other")),t}const az=It({year:"numeric",month:"long",day:"numeric"}),lz=It({week:"long"});function Ya(n,e,t="day",r=!0){const{dateEnv:i,options:s,calendarApi:o}=n;let l=i.format(e,t==="week"?lz:az);if(s.navLinks){let c=i.toDate(e);const d=h=>{let p=t==="day"?s.navLinkDayClick:t==="week"?s.navLinkWeekClick:null;typeof p=="function"?p.call(o,i.toDate(e),h):(typeof p=="string"&&(t=p),o.zoomTo(e,t))};return Object.assign({title:dc(s.navLinkHint,[l,c],l),"data-navlink":""},r?Ck(d):{onClick:d})}return{"aria-label":l}}let Yg=null;function cz(){return Yg===null&&(Yg=uz()),Yg}function uz(){let n=document.createElement("div");uc(n,{position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}),n.innerHTML="<div></div>",document.body.appendChild(n);let t=n.firstChild.getBoundingClientRect().left>n.getBoundingClientRect().left;return Jv(n),t}let Kg;function dz(){return Kg||(Kg=hz()),Kg}function hz(){let n=document.createElement("div");n.style.overflow="scroll",n.style.position="absolute",n.style.top="-9999px",n.style.left="-9999px",document.body.appendChild(n);let e=Jk(n);return document.body.removeChild(n),e}function Jk(n){return{x:n.offsetHeight-n.clientHeight,y:n.offsetWidth-n.clientWidth}}function fz(n,e=!1){let t=window.getComputedStyle(n),r=parseInt(t.borderLeftWidth,10)||0,i=parseInt(t.borderRightWidth,10)||0,s=parseInt(t.borderTopWidth,10)||0,o=parseInt(t.borderBottomWidth,10)||0,l=Jk(n),c=l.y-r-i,d=l.x-s-o,h={borderLeft:r,borderRight:i,borderTop:s,borderBottom:o,scrollbarBottom:d,scrollbarLeft:0,scrollbarRight:0};return cz()&&t.direction==="rtl"?h.scrollbarLeft=c:h.scrollbarRight=c,e&&(h.paddingLeft=parseInt(t.paddingLeft,10)||0,h.paddingRight=parseInt(t.paddingRight,10)||0,h.paddingTop=parseInt(t.paddingTop,10)||0,h.paddingBottom=parseInt(t.paddingBottom,10)||0),h}function pz(n,e=!1,t){let r=_y(n),i=fz(n,e),s={left:r.left+i.borderLeft+i.scrollbarLeft,right:r.right-i.borderRight-i.scrollbarRight,top:r.top+i.borderTop,bottom:r.bottom-i.borderBottom-i.scrollbarBottom};return e&&(s.left+=i.paddingLeft,s.right-=i.paddingRight,s.top+=i.paddingTop,s.bottom-=i.paddingBottom),s}function _y(n){let e=n.getBoundingClientRect();return{left:e.left+window.scrollX,top:e.top+window.scrollY,right:e.right+window.scrollX,bottom:e.bottom+window.scrollY}}function gz(n){let e=eA(n),t=n.getBoundingClientRect();for(let r of e){let i=Zk(t,r.getBoundingClientRect());if(i)t=i;else return null}return t}function eA(n){let e=[];for(;n instanceof HTMLElement;){let t=window.getComputedStyle(n);if(t.position==="fixed")break;/(auto|scroll)/.test(t.overflow+t.overflowY+t.overflowX)&&e.push(n),n=n.parentNode}return e}class Ka{constructor(e,t,r,i){this.els=t;let s=this.originClientRect=e.getBoundingClientRect();r&&this.buildElHorizontals(s.left),i&&this.buildElVerticals(s.top)}buildElHorizontals(e){let t=[],r=[];for(let i of this.els){let s=i.getBoundingClientRect();t.push(s.left-e),r.push(s.right-e)}this.lefts=t,this.rights=r}buildElVerticals(e){let t=[],r=[];for(let i of this.els){let s=i.getBoundingClientRect();t.push(s.top-e),r.push(s.bottom-e)}this.tops=t,this.bottoms=r}leftToIndex(e){let{lefts:t,rights:r}=this,i=t.length,s;for(s=0;s<i;s+=1)if(e>=t[s]&&e<r[s])return s}topToIndex(e){let{tops:t,bottoms:r}=this,i=t.length,s;for(s=0;s<i;s+=1)if(e>=t[s]&&e<r[s])return s}getWidth(e){return this.rights[e]-this.lefts[e]}getHeight(e){return this.bottoms[e]-this.tops[e]}similarTo(e){return Md(this.tops||[],e.tops||[])&&Md(this.bottoms||[],e.bottoms||[])&&Md(this.lefts||[],e.lefts||[])&&Md(this.rights||[],e.rights||[])}}function Md(n,e){const t=n.length;if(t!==e.length)return!1;for(let r=0;r<t;r++)if(Math.round(n[r])!==Math.round(e[r]))return!1;return!0}class wy{getMaxScrollTop(){return this.getScrollHeight()-this.getClientHeight()}getMaxScrollLeft(){return this.getScrollWidth()-this.getClientWidth()}canScrollVertically(){return this.getMaxScrollTop()>0}canScrollHorizontally(){return this.getMaxScrollLeft()>0}canScrollUp(){return this.getScrollTop()>0}canScrollDown(){return this.getScrollTop()<this.getMaxScrollTop()}canScrollLeft(){return this.getScrollLeft()>0}canScrollRight(){return this.getScrollLeft()<this.getMaxScrollLeft()}}class mz extends wy{constructor(e){super(),this.el=e}getScrollTop(){return this.el.scrollTop}getScrollLeft(){return this.el.scrollLeft}setScrollTop(e){this.el.scrollTop=e}setScrollLeft(e){this.el.scrollLeft=e}getScrollWidth(){return this.el.scrollWidth}getScrollHeight(){return this.el.scrollHeight}getClientHeight(){return this.el.clientHeight}getClientWidth(){return this.el.clientWidth}}class vz extends wy{getScrollTop(){return window.scrollY}getScrollLeft(){return window.scrollX}setScrollTop(e){window.scroll(window.scrollX,e)}setScrollLeft(e){window.scroll(e,window.scrollY)}getScrollWidth(){return document.documentElement.scrollWidth}getScrollHeight(){return document.documentElement.scrollHeight}getClientHeight(){return document.documentElement.clientHeight}getClientWidth(){return document.documentElement.clientWidth}}class ii extends ut{constructor(){super(...arguments),this.uid=qo()}prepareHits(){}queryHit(e,t,r,i){return null}isValidSegDownEl(e){return!this.props.eventDrag&&!this.props.eventResize&&!Pn(e,".fc-event-mirror")}isValidDateDownEl(e){return!Pn(e,".fc-event:not(.fc-bg-event)")&&!Pn(e,".fc-more-link")&&!Pn(e,"a[data-navlink]")&&!Pn(e,".fc-popover")}}class tA{constructor(e=t=>t.thickness||1){this.getEntryThickness=e,this.strictOrder=!1,this.allowReslicing=!1,this.maxCoord=-1,this.maxStackCnt=-1,this.levelCoords=[],this.entriesByLevel=[],this.stackCnts={}}addSegs(e){let t=[];for(let r of e)this.insertEntry(r,t);return t}insertEntry(e,t){let r=this.findInsertion(e);this.isInsertionValid(r,e)?this.insertEntryAt(e,r):this.handleInvalidInsertion(r,e,t)}isInsertionValid(e,t){return(this.maxCoord===-1||e.levelCoord+this.getEntryThickness(t)<=this.maxCoord)&&(this.maxStackCnt===-1||e.stackCnt<this.maxStackCnt)}handleInvalidInsertion(e,t,r){if(this.allowReslicing&&e.touchingEntry){const i=Object.assign(Object.assign({},t),{span:Sy(t.span,e.touchingEntry.span)});r.push(i),this.splitEntry(t,e.touchingEntry,r)}else r.push(t)}splitEntry(e,t,r){let i=e.span,s=t.span;i.start<s.start&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:i.start,end:s.start}},r),i.end>s.end&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:s.end,end:i.end}},r)}insertEntryAt(e,t){let{entriesByLevel:r,levelCoords:i}=this;t.lateral===-1?(Qg(i,t.level,t.levelCoord),Qg(r,t.level,[e])):Qg(r[t.level],t.lateral,e),this.stackCnts[Io(e)]=t.stackCnt}findInsertion(e){let{levelCoords:t,entriesByLevel:r,strictOrder:i,stackCnts:s}=this,o=t.length,l=0,c=-1,d=-1,h=null,p=0;for(let y=0;y<o;y+=1){const _=t[y];if(!i&&_>=l+this.getEntryThickness(e))break;let w=r[y],x,C=sv(w,e.span.start,iv),T=C[0]+C[1];for(;(x=w[T])&&x.span.start<e.span.end;){let R=_+this.getEntryThickness(x);R>l&&(l=R,h=x,c=y,d=T),R===l&&(p=Math.max(p,s[Io(x)]+1)),T+=1}}let g=0;if(h)for(g=c+1;g<o&&t[g]<l;)g+=1;let v=-1;return g<o&&t[g]===l&&(v=sv(r[g],e.span.end,iv)[0]),{touchingLevel:c,touchingLateral:d,touchingEntry:h,stackCnt:p,levelCoord:l,level:g,lateral:v}}toRects(){let{entriesByLevel:e,levelCoords:t}=this,r=e.length,i=[];for(let s=0;s<r;s+=1){let o=e[s],l=t[s];for(let c of o)i.push(Object.assign(Object.assign({},c),{thickness:this.getEntryThickness(c),levelCoord:l}))}return i}}function iv(n){return n.span.end}function Io(n){return n.index+":"+n.span.start}function yz(n){let e=[];for(let t of n){let r=[],i={span:t.span,entries:[t]};for(let s of e)Sy(s.span,i.span)?i={entries:s.entries.concat(i.entries),span:bz(s.span,i.span)}:r.push(s);r.push(i),e=r}return e}function bz(n,e){return{start:Math.min(n.start,e.start),end:Math.max(n.end,e.end)}}function Sy(n,e){let t=Math.max(n.start,e.start),r=Math.min(n.end,e.end);return t<r?{start:t,end:r}:null}function Qg(n,e,t){n.splice(e,0,t)}function sv(n,e,t){let r=0,i=n.length;if(!i||e<t(n[r]))return[0,0];if(e>t(n[i-1]))return[i,0];for(;r<i;){let s=Math.floor(r+(i-r)/2),o=t(n[s]);if(e<o)i=s;else if(e>o)r=s+1;else return[s,1]}return[r,0]}class _z{constructor(e,t){this.emitter=new mf}destroy(){}setMirrorIsVisible(e){}setMirrorNeedsRevert(e){}setAutoScrollEnabled(e){}}const xy={};function wz(n,e){return!n||e>10?It({weekday:"short"}):e>1?It({weekday:"short",month:"numeric",day:"numeric",omitCommas:!0}):It({weekday:"long"})}const nA="fc-col-header-cell";function rA(n){return n.text}class Sz extends ut{render(){let{dateEnv:e,options:t,theme:r,viewApi:i}=this.context,{props:s}=this,{date:o,dateProfile:l}=s,c=by(o,s.todayRange,null,l),d=[nA].concat(vf(c,r)),h=e.format(o,s.dayHeaderFormat),p=!c.isDisabled&&s.colCnt>1?Ya(this.context,o):{},g=e.toDate(o);e.namedTimeZoneImpl&&(g=zs(g,36e5));let v=Object.assign(Object.assign(Object.assign({date:g,view:i},s.extraRenderProps),{text:h}),c);return P(Fn,{elTag:"th",elClasses:d,elAttrs:Object.assign({role:"columnheader",colSpan:s.colSpan,"data-date":c.isDisabled?void 0:Kc(o)},s.extraDataAttrs),renderProps:v,generatorName:"dayHeaderContent",customGenerator:t.dayHeaderContent,defaultGenerator:rA,classNameGenerator:t.dayHeaderClassNames,didMount:t.dayHeaderDidMount,willUnmount:t.dayHeaderWillUnmount},y=>P("div",{className:"fc-scrollgrid-sync-inner"},!c.isDisabled&&P(y,{elTag:"a",elAttrs:p,elClasses:["fc-col-header-cell-cushion",s.isSticky&&"fc-sticky"]})))}}const xz=It({weekday:"long"});class Ez extends ut{render(){let{props:e}=this,{dateEnv:t,theme:r,viewApi:i,options:s}=this.context,o=sn(new Date(2592e5),e.dow),l={dow:e.dow,isDisabled:!1,isFuture:!1,isPast:!1,isToday:!1,isOther:!1},c=t.format(o,e.dayHeaderFormat),d=Object.assign(Object.assign(Object.assign(Object.assign({date:o},l),{view:i}),e.extraRenderProps),{text:c});return P(Fn,{elTag:"th",elClasses:[nA,...vf(l,r),...e.extraClassNames||[]],elAttrs:Object.assign({role:"columnheader",colSpan:e.colSpan},e.extraDataAttrs),renderProps:d,generatorName:"dayHeaderContent",customGenerator:s.dayHeaderContent,defaultGenerator:rA,classNameGenerator:s.dayHeaderClassNames,didMount:s.dayHeaderDidMount,willUnmount:s.dayHeaderWillUnmount},h=>P("div",{className:"fc-scrollgrid-sync-inner"},P(h,{elTag:"a",elClasses:["fc-col-header-cell-cushion",e.isSticky&&"fc-sticky"],elAttrs:{"aria-label":t.format(o,xz)}})))}}class iA extends ut{constructor(){super(...arguments),this.createDayHeaderFormatter=Te(Cz)}render(){let{context:e}=this,{dates:t,dateProfile:r,datesRepDistinctDays:i,renderIntro:s}=this.props,o=this.createDayHeaderFormatter(e.options.dayHeaderFormat,i,t.length);return P(Yo,{unit:"day"},(l,c)=>P("tr",{role:"row"},s&&s("day"),t.map(d=>i?P(Sz,{key:d.toISOString(),date:d,dateProfile:r,todayRange:c,colCnt:t.length,dayHeaderFormat:o}):P(Ez,{key:d.getUTCDay(),dow:d.getUTCDay(),dayHeaderFormat:o}))))}}function Cz(n,e,t){return n||wz(e,t)}class sA{constructor(e,t){let r=e.start,{end:i}=e,s=[],o=[],l=-1;for(;r<i;)t.isHiddenDay(r)?s.push(l+.5):(l+=1,s.push(l),o.push(r)),r=sn(r,1);this.dates=o,this.indices=s,this.cnt=o.length}sliceRange(e){let t=this.getDateDayIndex(e.start),r=this.getDateDayIndex(sn(e.end,-1)),i=Math.max(0,t),s=Math.min(this.cnt-1,r);return i=Math.ceil(i),s=Math.floor(s),i<=s?{firstIndex:i,lastIndex:s,isStart:t===i,isEnd:r===s}:null}getDateDayIndex(e){let{indices:t}=this,r=Math.floor(Gs(this.dates[0],e));return r<0?t[0]-1:r>=t.length?t[t.length-1]+1:t[r]}}class oA{constructor(e,t){let{dates:r}=e,i,s,o;if(t){for(s=r[0].getUTCDay(),i=1;i<r.length&&r[i].getUTCDay()!==s;i+=1);o=Math.ceil(r.length/i)}else o=1,i=r.length;this.rowCnt=o,this.colCnt=i,this.daySeries=e,this.cells=this.buildCells(),this.headerDates=this.buildHeaderDates()}buildCells(){let e=[];for(let t=0;t<this.rowCnt;t+=1){let r=[];for(let i=0;i<this.colCnt;i+=1)r.push(this.buildCell(t,i));e.push(r)}return e}buildCell(e,t){let r=this.daySeries.dates[e*this.colCnt+t];return{key:r.toISOString(),date:r}}buildHeaderDates(){let e=[];for(let t=0;t<this.colCnt;t+=1)e.push(this.cells[0][t].date);return e}sliceRange(e){let{colCnt:t}=this,r=this.daySeries.sliceRange(e),i=[];if(r){let{firstIndex:s,lastIndex:o}=r,l=s;for(;l<=o;){let c=Math.floor(l/t),d=Math.min((c+1)*t,o+1);i.push({row:c,firstCol:l%t,lastCol:(d-1)%t,isStart:r.isStart&&l===s,isEnd:r.isEnd&&d-1===o}),l=d}}return i}}class aA{constructor(){this.sliceBusinessHours=Te(this._sliceBusinessHours),this.sliceDateSelection=Te(this._sliceDateSpan),this.sliceEventStore=Te(this._sliceEventStore),this.sliceEventDrag=Te(this._sliceInteraction),this.sliceEventResize=Te(this._sliceInteraction),this.forceDayIfListItem=!1}sliceProps(e,t,r,i,...s){let{eventUiBases:o}=e,l=this.sliceEventStore(e.eventStore,o,t,r,...s);return{dateSelectionSegs:this.sliceDateSelection(e.dateSelection,t,r,o,i,...s),businessHourSegs:this.sliceBusinessHours(e.businessHours,t,r,i,...s),fgEventSegs:l.fg,bgEventSegs:l.bg,eventDrag:this.sliceEventDrag(e.eventDrag,o,t,r,...s),eventResize:this.sliceEventResize(e.eventResize,o,t,r,...s),eventSelection:e.eventSelection}}sliceNowDate(e,t,r,i,...s){return this._sliceDateSpan({range:{start:e,end:zs(e,1)},allDay:!1},t,r,{},i,...s)}_sliceBusinessHours(e,t,r,i,...s){return e?this._sliceEventStore(Fo(e,Nd(t,!!r),i),{},t,r,...s).bg:[]}_sliceEventStore(e,t,r,i,...s){if(e){let o=nv(e,t,Nd(r,!!i),i);return{bg:this.sliceEventRanges(o.bg,s),fg:this.sliceEventRanges(o.fg,s)}}return{bg:[],fg:[]}}_sliceInteraction(e,t,r,i,...s){if(!e)return null;let o=nv(e.mutatedEvents,t,Nd(r,!!i),i);return{segs:this.sliceEventRanges(o.fg,s),affectedInstances:e.affectedEvents.instances,isEvent:e.isEvent}}_sliceDateSpan(e,t,r,i,s,...o){if(!e)return[];let l=Nd(t,!!r),c=$s(e.range,l);if(c){e=Object.assign(Object.assign({},e),{range:c});let d=GH(e,i,s),h=this.sliceRange(e.range,...o);for(let p of h)p.eventRange=d;return h}return[]}sliceEventRanges(e,t){let r=[];for(let i of e)r.push(...this.sliceEventRange(i,t));return r}sliceEventRange(e,t){let r=e.range;this.forceDayIfListItem&&e.ui.display==="list-item"&&(r={start:r.start,end:sn(r.start,1)});let i=this.sliceRange(r,...t);for(let s of i)s.eventRange=e,s.isStart=e.isStart&&s.isStart,s.isEnd=e.isEnd&&s.isEnd;return i}}function Nd(n,e){let t=n.activeRange;return e?t:{start:zs(t.start,n.slotMinTime.milliseconds),end:zs(t.end,n.slotMaxTime.milliseconds-864e5)}}function lA(n,e,t){let{instances:r}=n.mutatedEvents;for(let i in r)if(!pf(e.validRange,r[i].range))return!1;return cA({eventDrag:n},t)}function Tz(n,e,t){return pf(e.validRange,n.range)?cA({dateSelection:n},t):!1}function cA(n,e){let t=e.getCurrentData(),r=Object.assign({businessHours:t.businessHours,dateSelection:"",eventStore:t.eventStore,eventUiBases:t.eventUiBases,eventSelection:"",eventDrag:null,eventResize:null},n);return(e.pluginHooks.isPropsValid||kz)(r,e)}function kz(n,e,t={},r){return!(n.eventDrag&&!Az(n,e,t,r)||n.dateSelection&&!Dz(n,e,t,r))}function Az(n,e,t,r){let i=e.getCurrentData(),s=n.eventDrag,o=s.mutatedEvents,l=o.defs,c=o.instances,d=Nh(l,s.isEvent?n.eventUiBases:{"":i.selectionConfig});r&&(d=es(d,r));let h=CH(n.eventStore,s.affectedEvents.instances),p=h.defs,g=h.instances,v=Nh(p,n.eventUiBases);for(let y in c){let _=c[y],w=_.range,x=d[_.defId],C=l[_.defId];if(!uA(x.constraints,w,h,n.businessHours,e))return!1;let{eventOverlap:T}=e.options,R=typeof T=="function"?T:null;for(let O in g){let M=g[O];if(ly(w,M.range)&&(v[M.defId].overlap===!1&&s.isEvent||x.overlap===!1||R&&!R(new Nt(e,p[M.defId],M),new Nt(e,C,_))))return!1}let D=i.eventStore;for(let O of x.allows){let M=Object.assign(Object.assign({},t),{range:_.range,allDay:C.allDay}),I=D.defs[C.defId],F=D.instances[y],z;if(I?z=new Nt(e,I,F):z=new Nt(e,C),!O(py(M,e),z))return!1}}return!0}function Dz(n,e,t,r){let i=n.eventStore,s=i.defs,o=i.instances,l=n.dateSelection,c=l.range,{selectionConfig:d}=e.getCurrentData();if(r&&(d=r(d)),!uA(d.constraints,c,i,n.businessHours,e))return!1;let{selectOverlap:h}=e.options,p=typeof h=="function"?h:null;for(let g in o){let v=o[g];if(ly(c,v.range)&&(d.overlap===!1||p&&!p(new Nt(e,s[v.defId],v),null)))return!1}for(let g of d.allows){let v=Object.assign(Object.assign({},t),l);if(!g(py(v,e),null))return!1}return!0}function uA(n,e,t,r,i){for(let s of n)if(!Oz(Rz(s,e,t,r,i),e))return!1;return!0}function Rz(n,e,t,r,i){return n==="businessHours"?Xg(Fo(r,e,i)):typeof n=="string"?Xg(gf(t,s=>s.groupId===n)):typeof n=="object"&&n?Xg(Fo(n,e,i)):[]}function Xg(n){let{instances:e}=n,t=[];for(let r in e)t.push(e[r].range);return t}function Oz(n,e){for(let t of n)if(pf(t,e))return!0;return!1}const Pd=/^(visible|hidden)$/;class dA extends ut{constructor(){super(...arguments),this.handleEl=e=>{this.el=e,Si(this.props.elRef,e)}}render(){let{props:e}=this,{liquid:t,liquidIsAbsolute:r}=e,i=t&&r,s=["fc-scroller"];return t&&(r?s.push("fc-scroller-liquid-absolute"):s.push("fc-scroller-liquid")),P("div",{ref:this.handleEl,className:s.join(" "),style:{overflowX:e.overflowX,overflowY:e.overflowY,left:i&&-(e.overcomeLeft||0)||"",right:i&&-(e.overcomeRight||0)||"",bottom:i&&-(e.overcomeBottom||0)||"",marginLeft:!i&&-(e.overcomeLeft||0)||"",marginRight:!i&&-(e.overcomeRight||0)||"",marginBottom:!i&&-(e.overcomeBottom||0)||"",maxHeight:e.maxHeight||""}},e.children)}needsXScrolling(){if(Pd.test(this.props.overflowX))return!1;let{el:e}=this,t=this.el.getBoundingClientRect().width-this.getYScrollbarWidth(),{children:r}=e;for(let i=0;i<r.length;i+=1)if(r[i].getBoundingClientRect().width>t)return!0;return!1}needsYScrolling(){if(Pd.test(this.props.overflowY))return!1;let{el:e}=this,t=this.el.getBoundingClientRect().height-this.getXScrollbarWidth(),{children:r}=e;for(let i=0;i<r.length;i+=1)if(r[i].getBoundingClientRect().height>t)return!0;return!1}getXScrollbarWidth(){return Pd.test(this.props.overflowX)?0:this.el.offsetHeight-this.el.clientHeight}getYScrollbarWidth(){return Pd.test(this.props.overflowY)?0:this.el.offsetWidth-this.el.clientWidth}}class qi{constructor(e){this.masterCallback=e,this.currentMap={},this.depths={},this.callbackMap={},this.handleValue=(t,r)=>{let{depths:i,currentMap:s}=this,o=!1,l=!1;t!==null?(o=r in s,s[r]=t,i[r]=(i[r]||0)+1,l=!0):(i[r]-=1,i[r]||(delete s[r],delete this.callbackMap[r],o=!0)),this.masterCallback&&(o&&this.masterCallback(null,String(r)),l&&this.masterCallback(t,String(r)))}}createRef(e){let t=this.callbackMap[e];return t||(t=this.callbackMap[e]=r=>{this.handleValue(r,String(e))}),t}collect(e,t,r){return $B(this.currentMap,e,t,r)}getAll(){return oy(this.currentMap)}}function Iz(n){let e=HU(n,".fc-scrollgrid-shrink"),t=0;for(let r of e)t=Math.max(t,tB(r));return Math.ceil(t)}function hA(n,e){return n.liquid&&e.liquid}function Mz(n,e){return e.maxHeight!=null||hA(n,e)}function Nz(n,e,t,r){let{expandRows:i}=t;return typeof e.content=="function"?e.content(t):P("table",{role:"presentation",className:[e.tableClassName,n.syncRowHeights?"fc-scrollgrid-sync-table":""].join(" "),style:{minWidth:t.tableMinWidth,width:t.clientWidth,height:i?t.clientHeight:""}},t.tableColGroupNode,P(r?"thead":"tbody",{role:"presentation"},typeof e.rowContent=="function"?e.rowContent(t):e.rowContent))}function Pz(n,e){return Hs(n,e,ti)}function jz(n,e){let t=[];for(let r of n){let i=r.span||1;for(let s=0;s<i;s+=1)t.push(P("col",{style:{width:r.width==="shrink"?Lz(e):r.width||"",minWidth:r.minWidth||""}}))}return P("colgroup",{},...t)}function Lz(n){return n??4}function Fz(n){for(let e of n)if(e.width==="shrink")return!0;return!1}function Uz(n,e){let t=["fc-scrollgrid",e.theme.getClass("table")];return n&&t.push("fc-scrollgrid-liquid"),t}function Bz(n,e){let t=["fc-scrollgrid-section",`fc-scrollgrid-section-${n.type}`,n.className];return e&&n.liquid&&n.maxHeight==null&&t.push("fc-scrollgrid-section-liquid"),n.isSticky&&t.push("fc-scrollgrid-section-sticky"),t}function ov(n){return P("div",{className:"fc-scrollgrid-sticky-shim",style:{width:n.clientWidth,minWidth:n.tableMinWidth}})}function Ph(n){let{stickyHeaderDates:e}=n;return(e==null||e==="auto")&&(e=n.height==="auto"||n.viewHeight==="auto"),e}function fA(n){let{stickyFooterScrollbar:e}=n;return(e==null||e==="auto")&&(e=n.height==="auto"||n.viewHeight==="auto"),e}class Ey extends ut{constructor(){super(...arguments),this.processCols=Te(e=>e,Pz),this.renderMicroColGroup=Te(jz),this.scrollerRefs=new qi,this.scrollerElRefs=new qi(this._handleScrollerEl.bind(this)),this.state={shrinkWidth:null,forceYScrollbars:!1,scrollerClientWidths:{},scrollerClientHeights:{}},this.handleSizing=()=>{this.safeSetState(Object.assign({shrinkWidth:this.computeShrinkWidth()},this.computeScrollerDims()))}}render(){let{props:e,state:t,context:r}=this,i=e.sections||[],s=this.processCols(e.cols),o=this.renderMicroColGroup(s,t.shrinkWidth),l=Uz(e.liquid,r);e.collapsibleWidth&&l.push("fc-scrollgrid-collapsible");let c=i.length,d=0,h,p=[],g=[],v=[];for(;d<c&&(h=i[d]).type==="header";)p.push(this.renderSection(h,o,!0)),d+=1;for(;d<c&&(h=i[d]).type==="body";)g.push(this.renderSection(h,o,!1)),d+=1;for(;d<c&&(h=i[d]).type==="footer";)v.push(this.renderSection(h,o,!0)),d+=1;let y=!Xk();const _={role:"rowgroup"};return P("table",{role:"grid",className:l.join(" "),style:{height:e.height}},!!(!y&&p.length)&&P("thead",_,...p),!!(!y&&g.length)&&P("tbody",_,...g),!!(!y&&v.length)&&P("tfoot",_,...v),y&&P("tbody",_,...p,...g,...v))}renderSection(e,t,r){return"outerContent"in e?P(_t,{key:e.key},e.outerContent):P("tr",{key:e.key,role:"presentation",className:Bz(e,this.props.liquid).join(" ")},this.renderChunkTd(e,t,e.chunk,r))}renderChunkTd(e,t,r,i){if("outerContent"in r)return r.outerContent;let{props:s}=this,{forceYScrollbars:o,scrollerClientWidths:l,scrollerClientHeights:c}=this.state,d=Mz(s,e),h=hA(s,e),p=s.liquid?o?"scroll":d?"auto":"hidden":"visible",g=e.key,v=Nz(e,r,{tableColGroupNode:t,tableMinWidth:"",clientWidth:!s.collapsibleWidth&&l[g]!==void 0?l[g]:null,clientHeight:c[g]!==void 0?c[g]:null,expandRows:e.expandRows,syncRowHeights:!1,rowSyncHeights:[],reportRowHeightChange:()=>{}},i);return P(i?"th":"td",{ref:r.elRef,role:"presentation"},P("div",{className:`fc-scroller-harness${h?" fc-scroller-harness-liquid":""}`},P(dA,{ref:this.scrollerRefs.createRef(g),elRef:this.scrollerElRefs.createRef(g),overflowY:p,overflowX:s.liquid?"hidden":"visible",maxHeight:e.maxHeight,liquid:h,liquidIsAbsolute:!0},v)))}_handleScrollerEl(e,t){let r=Hz(this.props.sections,t);r&&Si(r.chunk.scrollerElRef,e)}componentDidMount(){this.handleSizing(),this.context.addResizeHandler(this.handleSizing)}componentDidUpdate(){this.handleSizing()}componentWillUnmount(){this.context.removeResizeHandler(this.handleSizing)}computeShrinkWidth(){return Fz(this.props.cols)?Iz(this.scrollerElRefs.getAll()):0}computeScrollerDims(){let e=dz(),{scrollerRefs:t,scrollerElRefs:r}=this,i=!1,s={},o={};for(let l in t.currentMap){let c=t.currentMap[l];if(c&&c.needsYScrolling()){i=!0;break}}for(let l of this.props.sections){let c=l.key,d=r.currentMap[c];if(d){let h=d.parentNode;s[c]=Math.floor(h.getBoundingClientRect().width-(i?e.y:0)),o[c]=Math.floor(h.getBoundingClientRect().height)}}return{forceYScrollbars:i,scrollerClientWidths:s,scrollerClientHeights:o}}}Ey.addStateEquality({scrollerClientWidths:ti,scrollerClientHeights:ti});function Hz(n,e){for(let t of n)if(t.key===e)return t;return null}class yf extends ut{constructor(){super(...arguments),this.buildPublicEvent=Te((e,t,r)=>new Nt(e,t,r)),this.handleEl=e=>{this.el=e,Si(this.props.elRef,e),e&&YS(e,this.props.seg)}}render(){const{props:e,context:t}=this,{options:r}=t,{seg:i}=e,{eventRange:s}=i,{ui:o}=s,l={event:this.buildPublicEvent(t,s.def,s.instance),view:t.viewApi,timeText:e.timeText,textColor:o.textColor,backgroundColor:o.backgroundColor,borderColor:o.borderColor,isDraggable:!e.disableDragging&&LH(i,t),isStartResizable:!e.disableResizing&&FH(i,t),isEndResizable:!e.disableResizing&&UH(i),isMirror:!!(e.isDragging||e.isResizing||e.isDateSelecting),isStart:!!i.isStart,isEnd:!!i.isEnd,isPast:!!e.isPast,isFuture:!!e.isFuture,isToday:!!e.isToday,isSelected:!!e.isSelected,isDragging:!!e.isDragging,isResizing:!!e.isResizing};return P(Fn,{elRef:this.handleEl,elTag:e.elTag,elAttrs:e.elAttrs,elClasses:[...BH(l),...i.eventRange.ui.classNames,...e.elClasses||[]],elStyle:e.elStyle,renderProps:l,generatorName:"eventContent",customGenerator:r.eventContent,defaultGenerator:e.defaultGenerator,classNameGenerator:r.eventClassNames,didMount:r.eventDidMount,willUnmount:r.eventWillUnmount},e.children)}componentDidUpdate(e){this.el&&this.props.seg!==e.seg&&YS(this.el,this.props.seg)}}class Cy extends ut{render(){let{props:e,context:t}=this,{options:r}=t,{seg:i}=e,{ui:s}=i.eventRange,o=r.eventTimeFormat||e.defaultTimeFormat,l=fc(i,o,t,e.defaultDisplayEventTime,e.defaultDisplayEventEnd);return P(yf,Object.assign({},e,{elTag:"a",elStyle:{borderColor:s.borderColor,backgroundColor:s.backgroundColor},elAttrs:vy(i,t),defaultGenerator:zz,timeText:l}),(c,d)=>P(_t,null,P(c,{elTag:"div",elClasses:["fc-event-main"],elStyle:{color:d.textColor}}),!!d.isStartResizable&&P("div",{className:"fc-event-resizer fc-event-resizer-start"}),!!d.isEndResizable&&P("div",{className:"fc-event-resizer fc-event-resizer-end"})))}}Cy.addPropsEquality({seg:ti});function zz(n){return P("div",{className:"fc-event-main-frame"},n.timeText&&P("div",{className:"fc-event-time"},n.timeText),P("div",{className:"fc-event-title-container"},P("div",{className:"fc-event-title fc-sticky"},n.event.title||P(_t,null," "))))}const Ty=n=>P(ss.Consumer,null,e=>{let{options:t}=e,r={isAxis:n.isAxis,date:e.dateEnv.toDate(n.date),view:e.viewApi};return P(Fn,{elRef:n.elRef,elTag:n.elTag||"div",elAttrs:n.elAttrs,elClasses:n.elClasses,elStyle:n.elStyle,renderProps:r,generatorName:"nowIndicatorContent",customGenerator:t.nowIndicatorContent,classNameGenerator:t.nowIndicatorClassNames,didMount:t.nowIndicatorDidMount,willUnmount:t.nowIndicatorWillUnmount},n.children)}),$z=It({day:"numeric"});class ky extends ut{constructor(){super(...arguments),this.refineRenderProps=sh(Wz)}render(){let{props:e,context:t}=this,{options:r}=t,i=this.refineRenderProps({date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,isMonthStart:e.isMonthStart||!1,showDayNumber:e.showDayNumber,extraRenderProps:e.extraRenderProps,viewApi:t.viewApi,dateEnv:t.dateEnv,monthStartFormat:r.monthStartFormat});return P(Fn,{elRef:e.elRef,elTag:e.elTag,elAttrs:Object.assign(Object.assign({},e.elAttrs),i.isDisabled?{}:{"data-date":Kc(e.date)}),elClasses:[...vf(i,t.theme),...e.elClasses||[]],elStyle:e.elStyle,renderProps:i,generatorName:"dayCellContent",customGenerator:r.dayCellContent,defaultGenerator:e.defaultGenerator,classNameGenerator:i.isDisabled?void 0:r.dayCellClassNames,didMount:r.dayCellDidMount,willUnmount:r.dayCellWillUnmount},e.children)}}function Ay(n){return!!(n.dayCellContent||Jm("dayCellContent",n))}function Wz(n){let{date:e,dateEnv:t,dateProfile:r,isMonthStart:i}=n,s=by(e,n.todayRange,null,r),o=n.showDayNumber?t.format(e,i?n.monthStartFormat:$z):"";return Object.assign(Object.assign(Object.assign({date:t.toDate(e),view:n.viewApi},s),{isMonthStart:i,dayNumberText:o}),n.extraRenderProps)}class pA extends ut{render(){let{props:e}=this,{seg:t}=e;return P(yf,{elTag:"div",elClasses:["fc-bg-event"],elStyle:{backgroundColor:t.eventRange.ui.backgroundColor},defaultGenerator:Vz,seg:t,timeText:"",isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,isPast:e.isPast,isFuture:e.isFuture,isToday:e.isToday,disableDragging:!0,disableResizing:!0})}}function Vz(n){let{title:e}=n.event;return e&&P("div",{className:"fc-event-title"},n.event.title)}function gA(n){return P("div",{className:`fc-${n}`})}const mA=n=>P(ss.Consumer,null,e=>{let{dateEnv:t,options:r}=e,{date:i}=n,s=r.weekNumberFormat||n.defaultFormat,o=t.computeWeekNumber(i),l=t.format(i,s),c={num:o,text:l,date:i};return P(Fn,{elRef:n.elRef,elTag:n.elTag,elAttrs:n.elAttrs,elClasses:n.elClasses,elStyle:n.elStyle,renderProps:c,generatorName:"weekNumberContent",customGenerator:r.weekNumberContent,defaultGenerator:qz,classNameGenerator:r.weekNumberClassNames,didMount:r.weekNumberDidMount,willUnmount:r.weekNumberWillUnmount},n.children)});function qz(n){return n.text}const Zg=10;class Gz extends ut{constructor(){super(...arguments),this.state={titleId:Fs()},this.handleRootEl=e=>{this.rootEl=e,this.props.elRef&&Si(this.props.elRef,e)},this.handleDocumentMouseDown=e=>{const t=xk(e);this.rootEl.contains(t)||this.handleCloseClick()},this.handleDocumentKeyDown=e=>{e.key==="Escape"&&this.handleCloseClick()},this.handleCloseClick=()=>{let{onClose:e}=this.props;e&&e()}}render(){let{theme:e,options:t}=this.context,{props:r,state:i}=this,s=["fc-popover",e.getClass("popover")].concat(r.extraClassNames||[]);return kU(P("div",Object.assign({},r.extraAttrs,{id:r.id,className:s.join(" "),"aria-labelledby":i.titleId,ref:this.handleRootEl}),P("div",{className:"fc-popover-header "+e.getClass("popoverHeader")},P("span",{className:"fc-popover-title",id:i.titleId},r.title),P("span",{className:"fc-popover-close "+e.getIconClass("close"),title:t.closeHint,onClick:this.handleCloseClick})),P("div",{className:"fc-popover-body "+e.getClass("popoverContent")},r.children)),r.parentEl)}componentDidMount(){document.addEventListener("mousedown",this.handleDocumentMouseDown),document.addEventListener("keydown",this.handleDocumentKeyDown),this.updateSize()}componentWillUnmount(){document.removeEventListener("mousedown",this.handleDocumentMouseDown),document.removeEventListener("keydown",this.handleDocumentKeyDown)}updateSize(){let{isRtl:e}=this.context,{alignmentEl:t,alignGridTop:r}=this.props,{rootEl:i}=this,s=gz(t);if(s){let o=i.getBoundingClientRect(),l=r?Pn(t,".fc-scrollgrid").getBoundingClientRect().top:s.top,c=e?s.right-o.width:s.left;l=Math.max(l,Zg),c=Math.min(c,document.documentElement.clientWidth-Zg-o.width),c=Math.max(c,Zg);let d=i.offsetParent.getBoundingClientRect();uc(i,{top:l-d.top,left:c-d.left})}}}class Yz extends ii{constructor(){super(...arguments),this.handleRootEl=e=>{this.rootEl=e,e?this.context.registerInteractiveComponent(this,{el:e,useEventCenter:!1}):this.context.unregisterInteractiveComponent(this)}}render(){let{options:e,dateEnv:t}=this.context,{props:r}=this,{startDate:i,todayRange:s,dateProfile:o}=r,l=t.format(i,e.dayPopoverFormat);return P(ky,{elRef:this.handleRootEl,date:i,dateProfile:o,todayRange:s},(c,d,h)=>P(Gz,{elRef:h.ref,id:r.id,title:l,extraClassNames:["fc-more-popover"].concat(h.className||[]),extraAttrs:h,parentEl:r.parentEl,alignmentEl:r.alignmentEl,alignGridTop:r.alignGridTop,onClose:r.onClose},Ay(e)&&P(c,{elTag:"div",elClasses:["fc-more-popover-misc"]}),r.children))}queryHit(e,t,r,i){let{rootEl:s,props:o}=this;return e>=0&&e<r&&t>=0&&t<i?{dateProfile:o.dateProfile,dateSpan:Object.assign({allDay:!o.forceTimed,range:{start:o.startDate,end:o.endDate}},o.extraDateSpan),dayEl:s,rect:{left:0,top:0,right:r,bottom:i},layer:1}:null}}class vA extends ut{constructor(){super(...arguments),this.state={isPopoverOpen:!1,popoverId:Fs()},this.handleLinkEl=e=>{this.linkEl=e,this.props.elRef&&Si(this.props.elRef,e)},this.handleClick=e=>{let{props:t,context:r}=this,{moreLinkClick:i}=r.options,s=QS(t).start;function o(l){let{def:c,instance:d,range:h}=l.eventRange;return{event:new Nt(r,c,d),start:r.dateEnv.toDate(h.start),end:r.dateEnv.toDate(h.end),isStart:l.isStart,isEnd:l.isEnd}}typeof i=="function"&&(i=i({date:s,allDay:!!t.allDayDate,allSegs:t.allSegs.map(o),hiddenSegs:t.hiddenSegs.map(o),jsEvent:e,view:r.viewApi})),!i||i==="popover"?this.setState({isPopoverOpen:!0}):typeof i=="string"&&r.calendarApi.zoomTo(s,i)},this.handlePopoverClose=()=>{this.setState({isPopoverOpen:!1})}}render(){let{props:e,state:t}=this;return P(ss.Consumer,null,r=>{let{viewApi:i,options:s,calendarApi:o}=r,{moreLinkText:l}=s,{moreCnt:c}=e,d=QS(e),h=typeof l=="function"?l.call(o,c):`+${c} ${l}`,p=dc(s.moreLinkHint,[c],h),g={num:c,shortText:`+${c}`,text:h,view:i};return P(_t,null,!!e.moreCnt&&P(Fn,{elTag:e.elTag||"a",elRef:this.handleLinkEl,elClasses:[...e.elClasses||[],"fc-more-link"],elStyle:e.elStyle,elAttrs:Object.assign(Object.assign(Object.assign({},e.elAttrs),Ck(this.handleClick)),{title:p,"aria-expanded":t.isPopoverOpen,"aria-controls":t.isPopoverOpen?t.popoverId:""}),renderProps:g,generatorName:"moreLinkContent",customGenerator:s.moreLinkContent,defaultGenerator:e.defaultGenerator||Kz,classNameGenerator:s.moreLinkClassNames,didMount:s.moreLinkDidMount,willUnmount:s.moreLinkWillUnmount},e.children),t.isPopoverOpen&&P(Yz,{id:t.popoverId,startDate:d.start,endDate:d.end,dateProfile:e.dateProfile,todayRange:e.todayRange,extraDateSpan:e.extraDateSpan,parentEl:this.parentEl,alignmentEl:e.alignmentElRef?e.alignmentElRef.current:this.linkEl,alignGridTop:e.alignGridTop,forceTimed:e.forceTimed,onClose:this.handlePopoverClose},e.popoverContent()))})}componentDidMount(){this.updateParentEl()}componentDidUpdate(){this.updateParentEl()}updateParentEl(){this.linkEl&&(this.parentEl=Pn(this.linkEl,".fc-view-harness"))}}function Kz(n){return n.text}function QS(n){if(n.allDayDate)return{start:n.allDayDate,end:sn(n.allDayDate,1)};let{hiddenSegs:e}=n;return{start:yA(e),end:Xz(e)}}function yA(n){return n.reduce(Qz).eventRange.range.start}function Qz(n,e){return n.eventRange.range.start<e.eventRange.range.start?n:e}function Xz(n){return n.reduce(Zz).eventRange.range.end}function Zz(n,e){return n.eventRange.range.end>e.eventRange.range.end?n:e}class Jz{constructor(){this.handlers=[]}set(e){this.currentValue=e;for(let t of this.handlers)t(e)}subscribe(e){this.handlers.push(e),this.currentValue!==void 0&&e(this.currentValue)}}class e$ extends Jz{constructor(){super(...arguments),this.map=new Map}handle(e){const{map:t}=this;let r=!1;e.isActive?(t.set(e.id,e),r=!0):t.has(e.id)&&(t.delete(e.id),r=!0),r&&this.set(t)}}const t$=[],bA={code:"en",week:{dow:0,doy:4},direction:"ltr",buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day",list:"list"},weekText:"W",weekTextLong:"Week",closeHint:"Close",timeHint:"Time",eventHint:"Event",allDayText:"all-day",moreLinkText:"more",noEventsText:"No events to display"},_A=Object.assign(Object.assign({},bA),{buttonHints:{prev:"Previous $0",next:"Next $0",today(n,e){return e==="day"?"Today":`This ${n}`}},viewHint:"$0 view",navLinkHint:"Go to $0",moreLinkHint(n){return`Show ${n} more event${n===1?"":"s"}`}});function n$(n){let e=n.length>0?n[0].code:"en",t=t$.concat(n),r={en:_A};for(let i of t)r[i.code]=i;return{map:r,defaultCode:e}}function wA(n,e){return typeof n=="object"&&!Array.isArray(n)?SA(n.code,[n.code],n):r$(n,e)}function r$(n,e){let t=[].concat(n||[]),r=i$(t,e)||_A;return SA(n,t,r)}function i$(n,e){for(let t=0;t<n.length;t+=1){let r=n[t].toLocaleLowerCase().split("-");for(let i=r.length;i>0;i-=1){let s=r.slice(0,i).join("-");if(e[s])return e[s]}}return null}function SA(n,e,t){let r=sy([bA,t],["buttonText"]);delete r.code;let{week:i}=r;return delete r.week,{codeArg:n,codes:e,week:i,simpleNumberFormat:new Intl.NumberFormat(n),options:r}}function Ei(n){return{id:qo(),name:n.name,premiumReleaseDate:n.premiumReleaseDate?new Date(n.premiumReleaseDate):void 0,deps:n.deps||[],reducers:n.reducers||[],isLoadingFuncs:n.isLoadingFuncs||[],contextInit:[].concat(n.contextInit||[]),eventRefiners:n.eventRefiners||{},eventDefMemberAdders:n.eventDefMemberAdders||[],eventSourceRefiners:n.eventSourceRefiners||{},isDraggableTransformers:n.isDraggableTransformers||[],eventDragMutationMassagers:n.eventDragMutationMassagers||[],eventDefMutationAppliers:n.eventDefMutationAppliers||[],dateSelectionTransformers:n.dateSelectionTransformers||[],datePointTransforms:n.datePointTransforms||[],dateSpanTransforms:n.dateSpanTransforms||[],views:n.views||{},viewPropsTransformers:n.viewPropsTransformers||[],isPropsValid:n.isPropsValid||null,externalDefTransforms:n.externalDefTransforms||[],viewContainerAppends:n.viewContainerAppends||[],eventDropTransformers:n.eventDropTransformers||[],componentInteractions:n.componentInteractions||[],calendarInteractions:n.calendarInteractions||[],themeClasses:n.themeClasses||{},eventSourceDefs:n.eventSourceDefs||[],cmdFormatter:n.cmdFormatter,recurringTypes:n.recurringTypes||[],namedTimeZonedImpl:n.namedTimeZonedImpl,initialView:n.initialView||"",elementDraggingImpl:n.elementDraggingImpl,optionChangeHandlers:n.optionChangeHandlers||{},scrollGridImpl:n.scrollGridImpl||null,listenerRefiners:n.listenerRefiners||{},optionRefiners:n.optionRefiners||{},propSetHandlers:n.propSetHandlers||{}}}function s$(n,e){let t={},r={premiumReleaseDate:void 0,reducers:[],isLoadingFuncs:[],contextInit:[],eventRefiners:{},eventDefMemberAdders:[],eventSourceRefiners:{},isDraggableTransformers:[],eventDragMutationMassagers:[],eventDefMutationAppliers:[],dateSelectionTransformers:[],datePointTransforms:[],dateSpanTransforms:[],views:{},viewPropsTransformers:[],isPropsValid:null,externalDefTransforms:[],viewContainerAppends:[],eventDropTransformers:[],componentInteractions:[],calendarInteractions:[],themeClasses:{},eventSourceDefs:[],cmdFormatter:null,recurringTypes:[],namedTimeZonedImpl:null,initialView:"",elementDraggingImpl:null,optionChangeHandlers:{},scrollGridImpl:null,listenerRefiners:{},optionRefiners:{},propSetHandlers:{}};function i(s){for(let o of s){const l=o.name,c=t[l];c===void 0?(t[l]=o.id,i(o.deps),r=a$(r,o)):c!==o.id&&console.warn(`Duplicate plugin '${l}'`)}}return n&&i(n),i(e),r}function o$(){let n=[],e=[],t;return(r,i)=>((!t||!Hs(r,n)||!Hs(i,e))&&(t=s$(r,i)),n=r,e=i,t)}function a$(n,e){return{premiumReleaseDate:l$(n.premiumReleaseDate,e.premiumReleaseDate),reducers:n.reducers.concat(e.reducers),isLoadingFuncs:n.isLoadingFuncs.concat(e.isLoadingFuncs),contextInit:n.contextInit.concat(e.contextInit),eventRefiners:Object.assign(Object.assign({},n.eventRefiners),e.eventRefiners),eventDefMemberAdders:n.eventDefMemberAdders.concat(e.eventDefMemberAdders),eventSourceRefiners:Object.assign(Object.assign({},n.eventSourceRefiners),e.eventSourceRefiners),isDraggableTransformers:n.isDraggableTransformers.concat(e.isDraggableTransformers),eventDragMutationMassagers:n.eventDragMutationMassagers.concat(e.eventDragMutationMassagers),eventDefMutationAppliers:n.eventDefMutationAppliers.concat(e.eventDefMutationAppliers),dateSelectionTransformers:n.dateSelectionTransformers.concat(e.dateSelectionTransformers),datePointTransforms:n.datePointTransforms.concat(e.datePointTransforms),dateSpanTransforms:n.dateSpanTransforms.concat(e.dateSpanTransforms),views:Object.assign(Object.assign({},n.views),e.views),viewPropsTransformers:n.viewPropsTransformers.concat(e.viewPropsTransformers),isPropsValid:e.isPropsValid||n.isPropsValid,externalDefTransforms:n.externalDefTransforms.concat(e.externalDefTransforms),viewContainerAppends:n.viewContainerAppends.concat(e.viewContainerAppends),eventDropTransformers:n.eventDropTransformers.concat(e.eventDropTransformers),calendarInteractions:n.calendarInteractions.concat(e.calendarInteractions),componentInteractions:n.componentInteractions.concat(e.componentInteractions),themeClasses:Object.assign(Object.assign({},n.themeClasses),e.themeClasses),eventSourceDefs:n.eventSourceDefs.concat(e.eventSourceDefs),cmdFormatter:e.cmdFormatter||n.cmdFormatter,recurringTypes:n.recurringTypes.concat(e.recurringTypes),namedTimeZonedImpl:e.namedTimeZonedImpl||n.namedTimeZonedImpl,initialView:n.initialView||e.initialView,elementDraggingImpl:n.elementDraggingImpl||e.elementDraggingImpl,optionChangeHandlers:Object.assign(Object.assign({},n.optionChangeHandlers),e.optionChangeHandlers),scrollGridImpl:e.scrollGridImpl||n.scrollGridImpl,listenerRefiners:Object.assign(Object.assign({},n.listenerRefiners),e.listenerRefiners),optionRefiners:Object.assign(Object.assign({},n.optionRefiners),e.optionRefiners),propSetHandlers:Object.assign(Object.assign({},n.propSetHandlers),e.propSetHandlers)}}function l$(n,e){return n===void 0?e:e===void 0?n:new Date(Math.max(n.valueOf(),e.valueOf()))}class Ys extends Qc{}Ys.prototype.classes={root:"fc-theme-standard",tableCellShaded:"fc-cell-shaded",buttonGroup:"fc-button-group",button:"fc-button fc-button-primary",buttonActive:"fc-button-active"};Ys.prototype.baseIconClass="fc-icon";Ys.prototype.iconClasses={close:"fc-icon-x",prev:"fc-icon-chevron-left",next:"fc-icon-chevron-right",prevYear:"fc-icon-chevrons-left",nextYear:"fc-icon-chevrons-right"};Ys.prototype.rtlIconClasses={prev:"fc-icon-chevron-right",next:"fc-icon-chevron-left",prevYear:"fc-icon-chevrons-right",nextYear:"fc-icon-chevrons-left"};Ys.prototype.iconOverrideOption="buttonIcons";Ys.prototype.iconOverrideCustomButtonOption="icon";Ys.prototype.iconOverridePrefix="fc-icon-";function c$(n,e){let t={},r;for(r in n)av(r,t,n,e);for(r in e)av(r,t,n,e);return t}function av(n,e,t,r){if(e[n])return e[n];let i=u$(n,e,t,r);return i&&(e[n]=i),i}function u$(n,e,t,r){let i=t[n],s=r[n],o=h=>i&&i[h]!==null?i[h]:s&&s[h]!==null?s[h]:null,l=o("component"),c=o("superType"),d=null;if(c){if(c===n)throw new Error("Can't have a custom view type that references itself");d=av(c,e,t,r)}return!l&&d&&(l=d.component),l?{type:n,component:l,defaults:Object.assign(Object.assign({},d?d.defaults:{}),i?i.rawOptions:{}),overrides:Object.assign(Object.assign({},d?d.overrides:{}),s?s.rawOptions:{})}:null}function XS(n){return es(n,d$)}function d$(n){let e=typeof n=="function"?{component:n}:n,{component:t}=e;return e.content?t=ZS(e):t&&!(t.prototype instanceof ut)&&(t=ZS(Object.assign(Object.assign({},e),{content:t}))),{superType:e.type,component:t,rawOptions:e}}function ZS(n){return e=>P(ss.Consumer,null,t=>P(Fn,{elTag:"div",elClasses:Nk(t.viewSpec),renderProps:Object.assign(Object.assign({},e),{nextDayThreshold:t.options.nextDayThreshold}),generatorName:void 0,customGenerator:n.content,classNameGenerator:n.classNames,didMount:n.didMount,willUnmount:n.willUnmount}))}function h$(n,e,t,r){let i=XS(n),s=XS(e.views),o=c$(i,s);return es(o,l=>f$(l,s,e,t,r))}function f$(n,e,t,r,i){let s=n.overrides.duration||n.defaults.duration||r.duration||t.duration,o=null,l="",c="",d={};if(s&&(o=p$(s),o)){let g=Zm(o);l=g.unit,g.value===1&&(c=l,d=e[l]?e[l].rawOptions:{})}let h=g=>{let v=g.buttonText||{},y=n.defaults.buttonTextKey;return y!=null&&v[y]!=null?v[y]:v[n.type]!=null?v[n.type]:v[c]!=null?v[c]:null},p=g=>{let v=g.buttonHints||{},y=n.defaults.buttonTextKey;return y!=null&&v[y]!=null?v[y]:v[n.type]!=null?v[n.type]:v[c]!=null?v[c]:null};return{type:n.type,component:n.component,duration:o,durationUnit:l,singleUnit:c,optionDefaults:n.defaults,optionOverrides:Object.assign(Object.assign({},d),n.overrides),buttonTextOverride:h(r)||h(t)||n.overrides.buttonText,buttonTextDefault:h(i)||n.defaults.buttonText||h(hc)||n.type,buttonTitleOverride:p(r)||p(t)||n.overrides.buttonHint,buttonTitleDefault:p(i)||n.defaults.buttonHint||p(hc)}}let JS={};function p$(n){let e=JSON.stringify(n),t=JS[e];return t===void 0&&(t=Ze(n),JS[e]=t),t}function g$(n,e){switch(e.type){case"CHANGE_VIEW_TYPE":n=e.viewType}return n}function m$(n,e){switch(e.type){case"CHANGE_DATE":return e.dateMarker;default:return n}}function v$(n,e,t){let r=n.initialDate;return r!=null?e.createMarker(r):t.getDateMarker()}function y$(n,e){switch(e.type){case"SET_OPTION":return Object.assign(Object.assign({},n),{[e.optionName]:e.rawOptionValue});default:return n}}function b$(n,e,t,r){let i;switch(e.type){case"CHANGE_VIEW_TYPE":return r.build(e.dateMarker||t);case"CHANGE_DATE":return r.build(e.dateMarker);case"PREV":if(i=r.buildPrev(n,t),i.isValid)return i;break;case"NEXT":if(i=r.buildNext(n,t),i.isValid)return i;break}return n}function _$(n,e,t){let r=e?e.activeRange:null;return EA({},k$(n,t),r,t)}function w$(n,e,t,r){let i=t?t.activeRange:null;switch(e.type){case"ADD_EVENT_SOURCES":return EA(n,e.sources,i,r);case"REMOVE_EVENT_SOURCE":return x$(n,e.sourceId);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return t?CA(n,i,r):n;case"FETCH_EVENT_SOURCES":return Dy(n,e.sourceIds?Dk(e.sourceIds):TA(n,r),i,e.isRefetch||!1,r);case"RECEIVE_EVENTS":case"RECEIVE_EVENT_ERROR":return T$(n,e.sourceId,e.fetchId,e.fetchRange);case"REMOVE_ALL_EVENT_SOURCES":return{};default:return n}}function S$(n,e,t){let r=e?e.activeRange:null;return Dy(n,TA(n,t),r,!0,t)}function xA(n){for(let e in n)if(n[e].isFetching)return!0;return!1}function EA(n,e,t,r){let i={};for(let s of e)i[s.sourceId]=s;return t&&(i=CA(i,t,r)),Object.assign(Object.assign({},n),i)}function x$(n,e){return Lo(n,t=>t.sourceId!==e)}function CA(n,e,t){return Dy(n,Lo(n,r=>E$(r,e,t)),e,!1,t)}function E$(n,e,t){return kA(n,t)?!t.options.lazyFetching||!n.fetchRange||n.isFetching||e.start<n.fetchRange.start||e.end>n.fetchRange.end:!n.latestFetchId}function Dy(n,e,t,r,i){let s={};for(let o in n){let l=n[o];e[o]?s[o]=C$(l,t,r,i):s[o]=l}return s}function C$(n,e,t,r){let{options:i,calendarApi:s}=r,o=r.pluginHooks.eventSourceDefs[n.sourceDefId],l=qo();return o.fetch({eventSource:n,range:e,isRefetch:t,context:r},c=>{let{rawEvents:d}=c;i.eventSourceSuccess&&(d=i.eventSourceSuccess.call(s,d,c.response)||d),n.success&&(d=n.success.call(s,d,c.response)||d),r.dispatch({type:"RECEIVE_EVENTS",sourceId:n.sourceId,fetchId:l,fetchRange:e,rawEvents:d})},c=>{let d=!1;i.eventSourceFailure&&(i.eventSourceFailure.call(s,c),d=!0),n.failure&&(n.failure(c),d=!0),d||console.warn(c.message,c),r.dispatch({type:"RECEIVE_EVENT_ERROR",sourceId:n.sourceId,fetchId:l,fetchRange:e,error:c})}),Object.assign(Object.assign({},n),{isFetching:!0,latestFetchId:l})}function T$(n,e,t,r){let i=n[e];return i&&t===i.latestFetchId?Object.assign(Object.assign({},n),{[e]:Object.assign(Object.assign({},i),{isFetching:!1,fetchRange:r})}):n}function TA(n,e){return Lo(n,t=>kA(t,e))}function k$(n,e){let t=zk(e),r=[].concat(n.eventSources||[]),i=[];n.initialEvents&&r.unshift(n.initialEvents),n.events&&r.unshift(n.events);for(let s of r){let o=Hk(s,e,t);o&&i.push(o)}return i}function kA(n,e){return!e.pluginHooks.eventSourceDefs[n.sourceDefId].ignoreRange}function A$(n,e){switch(e.type){case"UNSELECT_DATES":return null;case"SELECT_DATES":return e.selection;default:return n}}function D$(n,e){switch(e.type){case"UNSELECT_EVENT":return"";case"SELECT_EVENT":return e.eventInstanceId;default:return n}}function R$(n,e){let t;switch(e.type){case"UNSET_EVENT_DRAG":return null;case"SET_EVENT_DRAG":return t=e.state,{affectedEvents:t.affectedEvents,mutatedEvents:t.mutatedEvents,isEvent:t.isEvent};default:return n}}function O$(n,e){let t;switch(e.type){case"UNSET_EVENT_RESIZE":return null;case"SET_EVENT_RESIZE":return t=e.state,{affectedEvents:t.affectedEvents,mutatedEvents:t.mutatedEvents,isEvent:t.isEvent};default:return n}}function I$(n,e,t,r,i){let s=n.headerToolbar?ex(n.headerToolbar,n,e,t,r,i):null,o=n.footerToolbar?ex(n.footerToolbar,n,e,t,r,i):null;return{header:s,footer:o}}function ex(n,e,t,r,i,s){let o={},l=[],c=!1;for(let d in n){let h=n[d],p=M$(h,e,t,r,i,s);o[d]=p.widgets,l.push(...p.viewsWithButtons),c=c||p.hasTitle}return{sectionWidgets:o,viewsWithButtons:l,hasTitle:c}}function M$(n,e,t,r,i,s){let o=e.direction==="rtl",l=e.customButtons||{},c=t.buttonText||{},d=e.buttonText||{},h=t.buttonHints||{},p=e.buttonHints||{},g=n?n.split(" "):[],v=[],y=!1;return{widgets:g.map(w=>w.split(",").map(x=>{if(x==="title")return y=!0,{buttonName:x};let C,T,R,D,O,M;if(C=l[x])R=I=>{C.click&&C.click.call(I.target,I,I.target)},(D=r.getCustomButtonIconClass(C))||(D=r.getIconClass(x,o))||(O=C.text),M=C.hint||C.text;else if(T=i[x]){v.push(x),R=()=>{s.changeView(x)},(O=T.buttonTextOverride)||(D=r.getIconClass(x,o))||(O=T.buttonTextDefault);let I=T.buttonTextOverride||T.buttonTextDefault;M=dc(T.buttonTitleOverride||T.buttonTitleDefault||e.viewHint,[I,x],I)}else if(s[x])if(R=()=>{s[x]()},(O=c[x])||(D=r.getIconClass(x,o))||(O=d[x]),x==="prevYear"||x==="nextYear"){let I=x==="prevYear"?"prev":"next";M=dc(h[I]||p[I],[d.year||"year","year"],d[x])}else M=I=>dc(h[x]||p[x],[d[I]||I,I],d[x]);return{buttonName:x,buttonClick:R,buttonIcon:D,buttonText:O,buttonHint:M}})),viewsWithButtons:v,hasTitle:y}}class N${constructor(e,t,r){this.type=e,this.getCurrentData=t,this.dateEnv=r}get calendar(){return this.getCurrentData().calendarApi}get title(){return this.getCurrentData().viewTitle}get activeStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.start)}get activeEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.end)}get currentStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.start)}get currentEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.end)}getOption(e){return this.getCurrentData().options[e]}}let P$={ignoreRange:!0,parseMeta(n){return Array.isArray(n.events)?n.events:null},fetch(n,e){e({rawEvents:n.eventSource.meta})}};const j$=Ei({name:"array-event-source",eventSourceDefs:[P$]});let L$={parseMeta(n){return typeof n.events=="function"?n.events:null},fetch(n,e,t){const{dateEnv:r}=n.context,i=n.eventSource.meta;YH(i.bind(null,Kk(n.range,r)),s=>e({rawEvents:s}),t)}};const F$=Ei({name:"func-event-source",eventSourceDefs:[L$]}),U$={method:String,extraParams:$,startParam:String,endParam:String,timeZoneParam:String};let B$={parseMeta(n){return n.url&&(n.format==="json"||!n.format)?{url:n.url,format:"json",method:(n.method||"GET").toUpperCase(),extraParams:n.extraParams,startParam:n.startParam,endParam:n.endParam,timeZoneParam:n.timeZoneParam}:null},fetch(n,e,t){const{meta:r}=n.eventSource,i=z$(r,n.range,n.context);KH(r.method,r.url,i).then(([s,o])=>{e({rawEvents:s,response:o})},t)}};const H$=Ei({name:"json-event-source",eventSourceRefiners:U$,eventSourceDefs:[B$]});function z$(n,e,t){let{dateEnv:r,options:i}=t,s,o,l,c,d={};return s=n.startParam,s==null&&(s=i.startParam),o=n.endParam,o==null&&(o=i.endParam),l=n.timeZoneParam,l==null&&(l=i.timeZoneParam),typeof n.extraParams=="function"?c=n.extraParams():c=n.extraParams||{},Object.assign(d,c),d[s]=r.formatIso(e.start),d[o]=r.formatIso(e.end),r.timeZone!=="local"&&(d[l]=r.timeZone),d}const $$={daysOfWeek:$,startTime:Ze,endTime:Ze,duration:Ze,startRecur:$,endRecur:$};let W$={parse(n,e){if(n.daysOfWeek||n.startTime||n.endTime||n.startRecur||n.endRecur){let t={daysOfWeek:n.daysOfWeek||null,startTime:n.startTime||null,endTime:n.endTime||null,startRecur:n.startRecur?e.createMarker(n.startRecur):null,endRecur:n.endRecur?e.createMarker(n.endRecur):null,dateEnv:e},r;return n.duration&&(r=n.duration),!r&&n.startTime&&n.endTime&&(r=sB(n.endTime,n.startTime)),{allDayGuess:!n.startTime&&!n.endTime,duration:r,typeData:t}}return null},expand(n,e,t){let r=$s(e,{start:n.startRecur,end:n.endRecur});return r?q$(n.daysOfWeek,n.startTime,n.dateEnv,t,r):[]}};const V$=Ei({name:"simple-recurring-event",recurringTypes:[W$],eventRefiners:$$});function q$(n,e,t,r,i){let s=n?Dk(n):null,o=St(i.start),l=i.end,c=[];for(e&&(e.milliseconds<0?l=sn(l,1):e.milliseconds>=1e3*60*60*24&&(o=sn(o,-1)));o<l;){let d;(!s||s[o.getUTCDay()])&&(e?d=r.add(o,e):d=o,c.push(r.createMarker(t.toDate(d)))),o=sn(o,1)}return c}const G$=Ei({name:"change-handler",optionChangeHandlers:{events(n,e){tx([n],e)},eventSources:tx}});function tx(n,e){let t=oy(e.getCurrentData().eventSources);if(t.length===1&&n.length===1&&Array.isArray(t[0]._raw)&&Array.isArray(n[0])){e.dispatch({type:"RESET_RAW_EVENTS",sourceId:t[0].sourceId,rawEvents:n[0]});return}let r=[];for(let i of n){let s=!1;for(let o=0;o<t.length;o+=1)if(t[o]._raw===i){t.splice(o,1),s=!0;break}s||r.push(i)}for(let i of t)e.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:i.sourceId});for(let i of r)e.calendarApi.addEventSource(i)}function Y$(n,e){e.emitter.trigger("datesSet",Object.assign(Object.assign({},Kk(n.activeRange,e.dateEnv)),{view:e.viewApi}))}function K$(n,e){let{emitter:t}=e;t.hasHandlers("eventsSet")&&t.trigger("eventsSet",Oo(n,e))}const Q$=[j$,F$,H$,V$,G$,Ei({name:"misc",isLoadingFuncs:[n=>xA(n.eventSources)],propSetHandlers:{dateProfile:Y$,eventStore:K$}})];class X${constructor(e,t){this.runTaskOption=e,this.drainedOption=t,this.queue=[],this.delayedRunner=new Zv(this.drain.bind(this))}request(e,t){this.queue.push(e),this.delayedRunner.request(t)}pause(e){this.delayedRunner.pause(e)}resume(e,t){this.delayedRunner.resume(e,t)}drain(){let{queue:e}=this;for(;e.length;){let t=[],r;for(;r=e.shift();)this.runTask(r),t.push(r);this.drained(t)}}runTask(e){this.runTaskOption&&this.runTaskOption(e)}drained(e){this.drainedOption&&this.drainedOption(e)}}function Z$(n,e,t){let r;return/^(year|month)$/.test(n.currentRangeUnit)?r=n.currentRange:r=n.activeRange,t.formatRange(r.start,r.end,It(e.titleFormat||J$(n)),{isEndExclusive:n.isRangeAllDay,defaultSeparator:e.titleRangeSeparator})}function J$(n){let{currentRangeUnit:e}=n;if(e==="year")return{year:"numeric"};if(e==="month")return{year:"numeric",month:"long"};let t=kh(n.currentRange.start,n.currentRange.end);return t!==null&&t>1?{year:"numeric",month:"short",day:"numeric"}:{year:"numeric",month:"long",day:"numeric"}}class nx{constructor(){this.resetListeners=new Set}handleInput(e,t){const r=this.dateEnv;if(e!==r&&(typeof t=="function"?this.nowFn=t:r||(this.nowAnchorDate=e.toDate(t?e.createMarker(t):e.createNowMarker()),this.nowAnchorQueried=Date.now()),this.dateEnv=e,r))for(const i of this.resetListeners.values())i()}getDateMarker(){return this.nowAnchorDate?this.dateEnv.timestampToMarker(this.nowAnchorDate.valueOf()+(Date.now()-this.nowAnchorQueried)):this.dateEnv.createMarker(this.nowFn())}addResetListener(e){this.resetListeners.add(e)}removeResetListener(e){this.resetListeners.delete(e)}}class eW{constructor(e){this.computeCurrentViewData=Te(this._computeCurrentViewData),this.organizeRawLocales=Te(n$),this.buildLocale=Te(wA),this.buildPluginHooks=o$(),this.buildDateEnv=Te(tW),this.buildTheme=Te(nW),this.parseToolbars=Te(I$),this.buildViewSpecs=Te(h$),this.buildDateProfileGenerator=sh(rW),this.buildViewApi=Te(iW),this.buildViewUiProps=sh(aW),this.buildEventUiBySource=Te(sW,ti),this.buildEventUiBases=Te(oW),this.parseContextBusinessHours=sh(lW),this.buildTitle=Te(Z$),this.nowManager=new nx,this.emitter=new mf,this.actionRunner=new X$(this._handleAction.bind(this),this.updateData.bind(this)),this.currentCalendarOptionsInput={},this.currentCalendarOptionsRefined={},this.currentViewOptionsInput={},this.currentViewOptionsRefined={},this.currentCalendarOptionsRefiners={},this.optionsForRefining=[],this.optionsForHandling=[],this.getCurrentData=()=>this.data,this.dispatch=g=>{this.actionRunner.request(g)},this.props=e,this.actionRunner.pause(),this.nowManager=new nx;let t={},r=this.computeOptionsData(e.optionOverrides,t,e.calendarApi),i=r.calendarOptions.initialView||r.pluginHooks.initialView,s=this.computeCurrentViewData(i,r,e.optionOverrides,t);e.calendarApi.currentDataManager=this,this.emitter.setThisContext(e.calendarApi),this.emitter.setOptions(s.options);let o={nowManager:this.nowManager,dateEnv:r.dateEnv,options:r.calendarOptions,pluginHooks:r.pluginHooks,calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},l=v$(r.calendarOptions,r.dateEnv,this.nowManager),c=s.dateProfileGenerator.build(l);Xi(c.activeRange,l)||(l=c.currentRange.start);for(let g of r.pluginHooks.contextInit)g(o);let d=_$(r.calendarOptions,c,o),h={dynamicOptionOverrides:t,currentViewType:i,currentDate:l,dateProfile:c,businessHours:this.parseContextBusinessHours(o),eventSources:d,eventUiBases:{},eventStore:_r(),renderableEventStore:_r(),dateSelection:null,eventSelection:"",eventDrag:null,eventResize:null,selectionConfig:this.buildViewUiProps(o).selectionConfig},p=Object.assign(Object.assign({},o),h);for(let g of r.pluginHooks.reducers)Object.assign(h,g(null,null,p));Jg(h,o)&&this.emitter.trigger("loading",!0),this.state=h,this.updateData(),this.actionRunner.resume()}resetOptions(e,t){let{props:r}=this;t===void 0?r.optionOverrides=e:(r.optionOverrides=Object.assign(Object.assign({},r.optionOverrides||{}),e),this.optionsForRefining.push(...t)),(t===void 0||t.length)&&this.actionRunner.request({type:"NOTHING"})}_handleAction(e){let{props:t,state:r,emitter:i}=this,s=y$(r.dynamicOptionOverrides,e),o=this.computeOptionsData(t.optionOverrides,s,t.calendarApi),l=g$(r.currentViewType,e),c=this.computeCurrentViewData(l,o,t.optionOverrides,s);t.calendarApi.currentDataManager=this,i.setThisContext(t.calendarApi),i.setOptions(c.options);let d={nowManager:this.nowManager,dateEnv:o.dateEnv,options:o.calendarOptions,pluginHooks:o.pluginHooks,calendarApi:t.calendarApi,dispatch:this.dispatch,emitter:i,getCurrentData:this.getCurrentData},{currentDate:h,dateProfile:p}=r;this.data&&this.data.dateProfileGenerator!==c.dateProfileGenerator&&(p=c.dateProfileGenerator.build(h)),h=m$(h,e),p=b$(p,e,h,c.dateProfileGenerator),(e.type==="PREV"||e.type==="NEXT"||!Xi(p.currentRange,h))&&(h=p.currentRange.start);let g=w$(r.eventSources,e,p,d),v=wH(r.eventStore,e,g,p,d),_=xA(g)&&!c.options.progressiveEventRendering&&r.renderableEventStore||v,{eventUiSingleBase:w,selectionConfig:x}=this.buildViewUiProps(d),C=this.buildEventUiBySource(g),T=this.buildEventUiBases(_.defs,w,C),R={dynamicOptionOverrides:s,currentViewType:l,currentDate:h,dateProfile:p,eventSources:g,eventStore:v,renderableEventStore:_,selectionConfig:x,eventUiBases:T,businessHours:this.parseContextBusinessHours(d),dateSelection:A$(r.dateSelection,e),eventSelection:D$(r.eventSelection,e),eventDrag:R$(r.eventDrag,e),eventResize:O$(r.eventResize,e)},D=Object.assign(Object.assign({},d),R);for(let I of o.pluginHooks.reducers)Object.assign(R,I(r,e,D));let O=Jg(r,d),M=Jg(R,d);!O&&M?i.trigger("loading",!0):O&&!M&&i.trigger("loading",!1),this.state=R,t.onAction&&t.onAction(e)}updateData(){let{props:e,state:t}=this,r=this.data,i=this.computeOptionsData(e.optionOverrides,t.dynamicOptionOverrides,e.calendarApi),s=this.computeCurrentViewData(t.currentViewType,i,e.optionOverrides,t.dynamicOptionOverrides),o=this.data=Object.assign(Object.assign(Object.assign({nowManager:this.nowManager,viewTitle:this.buildTitle(t.dateProfile,s.options,i.dateEnv),calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},i),s),t),l=i.pluginHooks.optionChangeHandlers,c=r&&r.calendarOptions,d=i.calendarOptions;if(c&&c!==d){c.timeZone!==d.timeZone&&(t.eventSources=o.eventSources=S$(o.eventSources,t.dateProfile,o),t.eventStore=o.eventStore=qS(o.eventStore,r.dateEnv,o.dateEnv),t.renderableEventStore=o.renderableEventStore=qS(o.renderableEventStore,r.dateEnv,o.dateEnv));for(let h in l)(this.optionsForHandling.indexOf(h)!==-1||c[h]!==d[h])&&l[h](d[h],o)}this.optionsForHandling=[],e.onData&&e.onData(o)}computeOptionsData(e,t,r){if(!this.optionsForRefining.length&&e===this.stableOptionOverrides&&t===this.stableDynamicOptionOverrides)return this.stableCalendarOptionsData;let{refinedOptions:i,pluginHooks:s,localeDefaults:o,availableLocaleData:l,extra:c}=this.processRawCalendarOptions(e,t);rx(c);let d=this.buildDateEnv(i.timeZone,i.locale,i.weekNumberCalculation,i.firstDay,i.weekText,s,l,i.defaultRangeSeparator),h=this.buildViewSpecs(s.views,this.stableOptionOverrides,this.stableDynamicOptionOverrides,o),p=this.buildTheme(i,s),g=this.parseToolbars(i,this.stableOptionOverrides,p,h,r);return this.stableCalendarOptionsData={calendarOptions:i,pluginHooks:s,dateEnv:d,viewSpecs:h,theme:p,toolbarConfig:g,localeDefaults:o,availableRawLocales:l.map}}processRawCalendarOptions(e,t){let{locales:r,locale:i}=Wg([hc,e,t]),s=this.organizeRawLocales(r),o=s.map,l=this.buildLocale(i||s.defaultCode,o).options,c=this.buildPluginHooks(e.plugins||[],Q$),d=this.currentCalendarOptionsRefiners=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},BS),HS),zS),c.listenerRefiners),c.optionRefiners),h={},p=Wg([hc,l,e,t]),g={},v=this.currentCalendarOptionsInput,y=this.currentCalendarOptionsRefined,_=!1;for(let w in p)this.optionsForRefining.indexOf(w)===-1&&(p[w]===v[w]||yo[w]&&w in v&&yo[w](v[w],p[w]))?g[w]=y[w]:d[w]?(g[w]=d[w](p[w]),_=!0):h[w]=v[w];return _&&(this.currentCalendarOptionsInput=p,this.currentCalendarOptionsRefined=g,this.stableOptionOverrides=e,this.stableDynamicOptionOverrides=t),this.optionsForHandling.push(...this.optionsForRefining),this.optionsForRefining=[],{rawOptions:this.currentCalendarOptionsInput,refinedOptions:this.currentCalendarOptionsRefined,pluginHooks:c,availableLocaleData:s,localeDefaults:l,extra:h}}_computeCurrentViewData(e,t,r,i){let s=t.viewSpecs[e];if(!s)throw new Error(`viewType "${e}" is not available. Please make sure you've loaded all neccessary plugins`);let{refinedOptions:o,extra:l}=this.processRawViewOptions(s,t.pluginHooks,t.localeDefaults,r,i);rx(l),this.nowManager.handleInput(t.dateEnv,o.now);let c=this.buildDateProfileGenerator({dateProfileGeneratorClass:s.optionDefaults.dateProfileGeneratorClass,nowManager:this.nowManager,duration:s.duration,durationUnit:s.durationUnit,usesMinMaxTime:s.optionDefaults.usesMinMaxTime,dateEnv:t.dateEnv,calendarApi:this.props.calendarApi,slotMinTime:o.slotMinTime,slotMaxTime:o.slotMaxTime,showNonCurrentDates:o.showNonCurrentDates,dayCount:o.dayCount,dateAlignment:o.dateAlignment,dateIncrement:o.dateIncrement,hiddenDays:o.hiddenDays,weekends:o.weekends,validRangeInput:o.validRange,visibleRangeInput:o.visibleRange,fixedWeekCount:o.fixedWeekCount}),d=this.buildViewApi(e,this.getCurrentData,t.dateEnv);return{viewSpec:s,options:o,dateProfileGenerator:c,viewApi:d}}processRawViewOptions(e,t,r,i,s){let o=Wg([hc,e.optionDefaults,r,i,e.optionOverrides,s]),l=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},BS),HS),zS),FB),t.listenerRefiners),t.optionRefiners),c={},d=this.currentViewOptionsInput,h=this.currentViewOptionsRefined,p=!1,g={};for(let v in o)o[v]===d[v]||yo[v]&&yo[v](o[v],d[v])?c[v]=h[v]:(o[v]===this.currentCalendarOptionsInput[v]||yo[v]&&yo[v](o[v],this.currentCalendarOptionsInput[v])?v in this.currentCalendarOptionsRefined&&(c[v]=this.currentCalendarOptionsRefined[v]):l[v]?c[v]=l[v](o[v]):g[v]=o[v],p=!0);return p&&(this.currentViewOptionsInput=o,this.currentViewOptionsRefined=c),{rawOptions:this.currentViewOptionsInput,refinedOptions:this.currentViewOptionsRefined,extra:g}}}function tW(n,e,t,r,i,s,o,l){let c=wA(e||o.defaultCode,o.map);return new KB({calendarSystem:"gregory",timeZone:n,namedTimeZoneImpl:s.namedTimeZonedImpl,locale:c,weekNumberCalculation:t,firstDay:r,weekText:i,cmdFormatter:s.cmdFormatter,defaultSeparator:l})}function nW(n,e){let t=e.themeClasses[n.themeSystem]||Ys;return new t(n)}function rW(n){let e=n.dateProfileGeneratorClass||jk;return new e(n)}function iW(n,e,t){return new N$(n,e,t)}function sW(n){return es(n,e=>e.ui)}function oW(n,e,t){let r={"":e};for(let i in n){let s=n[i];s.sourceId&&t[s.sourceId]&&(r[i]=t[s.sourceId])}return r}function aW(n){let{options:e}=n;return{eventUiSingleBase:Mh({display:e.eventDisplay,editable:e.editable,startEditable:e.eventStartEditable,durationEditable:e.eventDurationEditable,constraint:e.eventConstraint,overlap:typeof e.eventOverlap=="boolean"?e.eventOverlap:void 0,allow:e.eventAllow,backgroundColor:e.eventBackgroundColor,borderColor:e.eventBorderColor,textColor:e.eventTextColor,color:e.eventColor},n),selectionConfig:Mh({constraint:e.selectConstraint,overlap:typeof e.selectOverlap=="boolean"?e.selectOverlap:void 0,allow:e.selectAllow},n)}}function Jg(n,e){for(let t of e.pluginHooks.isLoadingFuncs)if(t(n))return!0;return!1}function lW(n){return RH(n.options.businessHours,n)}function rx(n,e){for(let t in n)console.warn(`Unknown option '${t}'`)}class cW extends ut{render(){let e=this.props.widgetGroups.map(t=>this.renderWidgetGroup(t));return P("div",{className:"fc-toolbar-chunk"},...e)}renderWidgetGroup(e){let{props:t}=this,{theme:r}=this.context,i=[],s=!0;for(let o of e){let{buttonName:l,buttonClick:c,buttonText:d,buttonIcon:h,buttonHint:p}=o;if(l==="title")s=!1,i.push(P("h2",{className:"fc-toolbar-title",id:t.titleId},t.title));else{let g=l===t.activeButton,v=!t.isTodayEnabled&&l==="today"||!t.isPrevEnabled&&l==="prev"||!t.isNextEnabled&&l==="next",y=[`fc-${l}-button`,r.getClass("button")];g&&y.push(r.getClass("buttonActive")),i.push(P("button",{type:"button",title:typeof p=="function"?p(t.navUnit):p,disabled:v,"aria-pressed":g,className:y.join(" "),onClick:c},d||(h?P("span",{className:h,role:"img"}):"")))}}if(i.length>1){let o=s&&r.getClass("buttonGroup")||"";return P("div",{className:o},...i)}return i[0]}}class ix extends ut{render(){let{model:e,extraClassName:t}=this.props,r=!1,i,s,o=e.sectionWidgets,l=o.center;return o.left?(r=!0,i=o.left):i=o.start,o.right?(r=!0,s=o.right):s=o.end,P("div",{className:[t||"","fc-toolbar",r?"fc-toolbar-ltr":""].join(" ")},this.renderSection("start",i||[]),this.renderSection("center",l||[]),this.renderSection("end",s||[]))}renderSection(e,t){let{props:r}=this;return P(cW,{key:e,widgetGroups:t,title:r.title,navUnit:r.navUnit,activeButton:r.activeButton,isTodayEnabled:r.isTodayEnabled,isPrevEnabled:r.isPrevEnabled,isNextEnabled:r.isNextEnabled,titleId:r.titleId})}}class uW extends ut{constructor(){super(...arguments),this.state={availableWidth:null},this.handleEl=e=>{this.el=e,Si(this.props.elRef,e),this.updateAvailableWidth()},this.handleResize=()=>{this.updateAvailableWidth()}}render(){let{props:e,state:t}=this,{aspectRatio:r}=e,i=["fc-view-harness",r||e.liquid||e.height?"fc-view-harness-active":"fc-view-harness-passive"],s="",o="";return r?t.availableWidth!==null?s=t.availableWidth/r:o=`${1/r*100}%`:s=e.height||"",P("div",{"aria-labelledby":e.labeledById,ref:this.handleEl,className:i.join(" "),style:{height:s,paddingBottom:o}},e.children)}componentDidMount(){this.context.addResizeHandler(this.handleResize)}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}updateAvailableWidth(){this.el&&this.props.aspectRatio&&this.setState({availableWidth:this.el.offsetWidth})}}class dW extends al{constructor(e){super(e),this.handleSegClick=(t,r)=>{let{component:i}=this,{context:s}=i,o=Ga(r);if(o&&i.isValidSegDownEl(t.target)){let l=Pn(t.target,".fc-event-forced-url"),c=l?l.querySelector("a[href]").href:"";s.emitter.trigger("eventClick",{el:r,event:new Nt(i.context,o.eventRange.def,o.eventRange.instance),jsEvent:t,view:s.viewApi}),c&&!t.defaultPrevented&&(window.location.href=c)}},this.destroy=Ek(e.el,"click",".fc-event",this.handleSegClick)}}class hW extends al{constructor(e){super(e),this.handleEventElRemove=t=>{t===this.currentSegEl&&this.handleSegLeave(null,this.currentSegEl)},this.handleSegEnter=(t,r)=>{Ga(r)&&(this.currentSegEl=r,this.triggerEvent("eventMouseEnter",t,r))},this.handleSegLeave=(t,r)=>{this.currentSegEl&&(this.currentSegEl=null,this.triggerEvent("eventMouseLeave",t,r))},this.removeHoverListeners=WU(e.el,".fc-event",this.handleSegEnter,this.handleSegLeave)}destroy(){this.removeHoverListeners()}triggerEvent(e,t,r){let{component:i}=this,{context:s}=i,o=Ga(r);(!t||i.isValidSegDownEl(t.target))&&s.emitter.trigger(e,{el:r,event:new Nt(s,o.eventRange.def,o.eventRange.instance),jsEvent:t,view:s.viewApi})}}class fW extends Go{constructor(){super(...arguments),this.buildViewContext=Te(ZB),this.buildViewPropTransformers=Te(gW),this.buildToolbarProps=Te(pW),this.headerRef=Wn(),this.footerRef=Wn(),this.interactionsStore={},this.state={viewLabelId:Fs()},this.registerInteractiveComponent=(e,t)=>{let r=ZH(e,t),o=[dW,hW].concat(this.props.pluginHooks.componentInteractions).map(l=>new l(r));this.interactionsStore[e.uid]=o,rv[e.uid]=r},this.unregisterInteractiveComponent=e=>{let t=this.interactionsStore[e.uid];if(t){for(let r of t)r.destroy();delete this.interactionsStore[e.uid]}delete rv[e.uid]},this.resizeRunner=new Zv(()=>{this.props.emitter.trigger("_resize",!0),this.props.emitter.trigger("windowResize",{view:this.props.viewApi})}),this.handleWindowResize=e=>{let{options:t}=this.props;t.handleWindowResize&&e.target===window&&this.resizeRunner.request(t.windowResizeDelay)}}render(){let{props:e}=this,{toolbarConfig:t,options:r}=e,i=!1,s="",o;e.isHeightAuto||e.forPrint?s="":r.height!=null?i=!0:r.contentHeight!=null?s=r.contentHeight:o=Math.max(r.aspectRatio,.5);let l=this.buildViewContext(e.viewSpec,e.viewApi,e.options,e.dateProfileGenerator,e.dateEnv,e.nowManager,e.theme,e.pluginHooks,e.dispatch,e.getCurrentData,e.emitter,e.calendarApi,this.registerInteractiveComponent,this.unregisterInteractiveComponent),c=t.header&&t.header.hasTitle?this.state.viewLabelId:void 0;return P(ss.Provider,{value:l},P(Yo,{unit:"day"},d=>{let h=this.buildToolbarProps(e.viewSpec,e.dateProfile,e.dateProfileGenerator,e.currentDate,d,e.viewTitle);return P(_t,null,t.header&&P(ix,Object.assign({ref:this.headerRef,extraClassName:"fc-header-toolbar",model:t.header,titleId:c},h)),P(uW,{liquid:i,height:s,aspectRatio:o,labeledById:c},this.renderView(e),this.buildAppendContent()),t.footer&&P(ix,Object.assign({ref:this.footerRef,extraClassName:"fc-footer-toolbar",model:t.footer,titleId:""},h)))}))}componentDidMount(){let{props:e}=this;this.calendarInteractions=e.pluginHooks.calendarInteractions.map(r=>new r(e)),window.addEventListener("resize",this.handleWindowResize);let{propSetHandlers:t}=e.pluginHooks;for(let r in t)t[r](e[r],e)}componentDidUpdate(e){let{props:t}=this,{propSetHandlers:r}=t.pluginHooks;for(let i in r)t[i]!==e[i]&&r[i](t[i],t)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),this.resizeRunner.clear();for(let e of this.calendarInteractions)e.destroy();this.props.emitter.trigger("_unmount")}buildAppendContent(){let{props:e}=this,t=e.pluginHooks.viewContainerAppends.map(r=>r(e));return P(_t,{},...t)}renderView(e){let{pluginHooks:t}=e,{viewSpec:r}=e,i={dateProfile:e.dateProfile,businessHours:e.businessHours,eventStore:e.renderableEventStore,eventUiBases:e.eventUiBases,dateSelection:e.dateSelection,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,isHeightAuto:e.isHeightAuto,forPrint:e.forPrint},s=this.buildViewPropTransformers(t.viewPropsTransformers);for(let l of s)Object.assign(i,l.transform(i,e));let o=r.component;return P(o,Object.assign({},i))}}function pW(n,e,t,r,i,s){let o=t.build(i,void 0,!1),l=t.buildPrev(e,r,!1),c=t.buildNext(e,r,!1);return{title:s,activeButton:n.type,navUnit:n.singleUnit,isTodayEnabled:o.isValid&&!Xi(e.currentRange,i),isPrevEnabled:l.isValid,isNextEnabled:c.isValid}}function gW(n){return n.map(e=>new e)}class mW extends ez{constructor(e,t={}){super(),this.isRendering=!1,this.isRendered=!1,this.currentClassNames=[],this.customContentRenderId=0,this.handleAction=r=>{switch(r.type){case"SET_EVENT_DRAG":case"SET_EVENT_RESIZE":this.renderRunner.tryDrain()}},this.handleData=r=>{this.currentData=r,this.renderRunner.request(r.calendarOptions.rerenderDelay)},this.handleRenderRequest=()=>{if(this.isRendering){this.isRendered=!0;let{currentData:r}=this;Oh(()=>{Ac(P(XH,{options:r.calendarOptions,theme:r.theme,emitter:r.emitter},(i,s,o,l)=>(this.setClassNames(i),this.setHeight(s),P(Mk.Provider,{value:this.customContentRenderId},P(fW,Object.assign({isHeightAuto:o,forPrint:l},r))))),this.el)})}else this.isRendered&&(this.isRendered=!1,Ac(null,this.el),this.setClassNames([]),this.setHeight(""))},PU(e),this.el=e,this.renderRunner=new Zv(this.handleRenderRequest),new eW({optionOverrides:t,calendarApi:this,onAction:this.handleAction,onData:this.handleData})}render(){let e=this.isRendering;e?this.customContentRenderId+=1:this.isRendering=!0,this.renderRunner.request(),e&&this.updateSize()}destroy(){this.isRendering&&(this.isRendering=!1,this.renderRunner.request())}updateSize(){Oh(()=>{super.updateSize()})}batchRendering(e){this.renderRunner.pause("batchRendering"),e(),this.renderRunner.resume("batchRendering")}pauseRendering(){this.renderRunner.pause("pauseRendering")}resumeRendering(){this.renderRunner.resume("pauseRendering",!0)}resetOptions(e,t){this.currentDataManager.resetOptions(e,t)}setClassNames(e){if(!Hs(e,this.currentClassNames)){let{classList:t}=this.el;for(let r of this.currentClassNames)t.remove(r);for(let r of e)t.add(r);this.currentClassNames=e}}setHeight(e){Sk(this.el,"height",e)}}const vW=parseInt(String(K.version).split(".")[0]),yW=vW<18;class AA extends k.Component{constructor(){super(...arguments),this.elRef=k.createRef(),this.isUpdating=!1,this.isUnmounting=!1,this.state={customRenderingMap:new Map},this.requestResize=()=>{this.isUnmounting||(this.cancelResize(),this.resizeId=requestAnimationFrame(()=>{this.doResize()}))}}render(){const e=[];for(const t of this.state.customRenderingMap.values())e.push(K.createElement(bW,{key:t.id,customRendering:t}));return K.createElement("div",{ref:this.elRef},e)}componentDidMount(){this.isUnmounting=!1;const e=new e$;this.handleCustomRendering=e.handle.bind(e),this.calendar=new mW(this.elRef.current,Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.calendar.render(),this.calendar.on("_beforeprint",()=>{Hi.flushSync(()=>{})});let t;e.subscribe(r=>{const i=Date.now(),s=!t;(yW||s||this.isUpdating||this.isUnmounting||i-t<100?DA:Hi.flushSync)(()=>{this.setState({customRenderingMap:r},()=>{t=i,s?this.doResize():this.requestResize()})})})}componentDidUpdate(){this.isUpdating=!0,this.calendar.resetOptions(Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.isUpdating=!1}componentWillUnmount(){this.isUnmounting=!0,this.cancelResize(),this.calendar.destroy()}doResize(){this.calendar.updateSize()}cancelResize(){this.resizeId!==void 0&&(cancelAnimationFrame(this.resizeId),this.resizeId=void 0)}getApi(){return this.calendar}}AA.act=DA;class bW extends k.PureComponent{render(){const{customRendering:e}=this.props,{generatorMeta:t}=e,r=typeof t=="function"?t(e.renderProps):t;return Hi.createPortal(r,e.containerEl)}}function DA(n){n()}class _W extends ii{constructor(){super(...arguments),this.headerElRef=Wn()}renderSimpleLayout(e,t){let{props:r,context:i}=this,s=[],o=Ph(i.options);return e&&s.push({type:"header",key:"header",isSticky:o,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),s.push({type:"body",key:"body",liquid:!0,chunk:{content:t}}),P(Dc,{elClasses:["fc-daygrid"],viewSpec:i.viewSpec},P(Ey,{liquid:!r.isHeightAuto&&!r.forPrint,collapsibleWidth:r.forPrint,cols:[],sections:s}))}renderHScrollLayout(e,t,r,i){let s=this.context.pluginHooks.scrollGridImpl;if(!s)throw new Error("No ScrollGrid implementation");let{props:o,context:l}=this,c=!o.forPrint&&Ph(l.options),d=!o.forPrint&&fA(l.options),h=[];return e&&h.push({type:"header",key:"header",isSticky:c,chunks:[{key:"main",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),h.push({type:"body",key:"body",liquid:!0,chunks:[{key:"main",content:t}]}),d&&h.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"main",content:ov}]}),P(Dc,{elClasses:["fc-daygrid"],viewSpec:l.viewSpec},P(s,{liquid:!o.isHeightAuto&&!o.forPrint,forPrint:o.forPrint,collapsibleWidth:o.forPrint,colGroups:[{cols:[{span:r,minWidth:i}]}],sections:h}))}}function ah(n,e){let t=[];for(let r=0;r<e;r+=1)t[r]=[];for(let r of n)t[r.row].push(r);return t}function jd(n,e){let t=[];for(let r=0;r<e;r+=1)t[r]=[];for(let r of n)t[r.firstCol].push(r);return t}function sx(n,e){let t=[];if(n){for(let r=0;r<e;r+=1)t[r]={affectedInstances:n.affectedInstances,isEvent:n.isEvent,segs:[]};for(let r of n.segs)t[r.row].segs.push(r)}else for(let r=0;r<e;r+=1)t[r]=null;return t}const RA=It({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});function OA(n){let{display:e}=n.eventRange.ui;return e==="list-item"||e==="auto"&&!n.eventRange.def.allDay&&n.firstCol===n.lastCol&&n.isStart&&n.isEnd}class IA extends ut{render(){let{props:e}=this;return P(Cy,Object.assign({},e,{elClasses:["fc-daygrid-event","fc-daygrid-block-event","fc-h-event"],defaultTimeFormat:RA,defaultDisplayEventEnd:e.defaultDisplayEventEnd,disableResizing:!e.seg.eventRange.def.allDay}))}}class MA extends ut{render(){let{props:e,context:t}=this,{options:r}=t,{seg:i}=e,s=r.eventTimeFormat||RA,o=fc(i,s,t,!0,e.defaultDisplayEventEnd);return P(yf,Object.assign({},e,{elTag:"a",elClasses:["fc-daygrid-event","fc-daygrid-dot-event"],elAttrs:vy(e.seg,t),defaultGenerator:wW,timeText:o,isResizing:!1,isDateSelecting:!1}))}}function wW(n){return P(_t,null,P("div",{className:"fc-daygrid-event-dot",style:{borderColor:n.borderColor||n.backgroundColor}}),n.timeText&&P("div",{className:"fc-event-time"},n.timeText),P("div",{className:"fc-event-title"},n.event.title||P(_t,null," ")))}class SW extends ut{constructor(){super(...arguments),this.compileSegs=Te(xW)}render(){let{props:e}=this,{allSegs:t,invisibleSegs:r}=this.compileSegs(e.singlePlacements);return P(vA,{elClasses:["fc-daygrid-more-link"],dateProfile:e.dateProfile,todayRange:e.todayRange,allDayDate:e.allDayDate,moreCnt:e.moreCnt,allSegs:t,hiddenSegs:r,alignmentElRef:e.alignmentElRef,alignGridTop:e.alignGridTop,extraDateSpan:e.extraDateSpan,popoverContent:()=>{let i=(e.eventDrag?e.eventDrag.affectedInstances:null)||(e.eventResize?e.eventResize.affectedInstances:null)||{};return P(_t,null,t.map(s=>{let o=s.eventRange.instance.instanceId;return P("div",{className:"fc-daygrid-event-harness",key:o,style:{visibility:i[o]?"hidden":""}},OA(s)?P(MA,Object.assign({seg:s,isDragging:!1,isSelected:o===e.eventSelection,defaultDisplayEventEnd:!1},Zi(s,e.todayRange))):P(IA,Object.assign({seg:s,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:o===e.eventSelection,defaultDisplayEventEnd:!1},Zi(s,e.todayRange))))}))}})}}function xW(n){let e=[],t=[];for(let r of n)e.push(r.seg),r.isVisible||t.push(r.seg);return{allSegs:e,invisibleSegs:t}}const EW=It({week:"narrow"});class CW extends ii{constructor(){super(...arguments),this.rootElRef=Wn(),this.state={dayNumberId:Fs()},this.handleRootEl=e=>{Si(this.rootElRef,e),Si(this.props.elRef,e)}}render(){let{context:e,props:t,state:r,rootElRef:i}=this,{options:s,dateEnv:o}=e,{date:l,dateProfile:c}=t;const d=t.showDayNumber&&kW(l,c.currentRange,o);return P(ky,{elTag:"td",elRef:this.handleRootEl,elClasses:["fc-daygrid-day",...t.extraClassNames||[]],elAttrs:Object.assign(Object.assign(Object.assign({},t.extraDataAttrs),t.showDayNumber?{"aria-labelledby":r.dayNumberId}:{}),{role:"gridcell"}),defaultGenerator:TW,date:l,dateProfile:c,todayRange:t.todayRange,showDayNumber:t.showDayNumber,isMonthStart:d,extraRenderProps:t.extraRenderProps},(h,p)=>P("div",{ref:t.innerElRef,className:"fc-daygrid-day-frame fc-scrollgrid-sync-inner",style:{minHeight:t.minHeight}},t.showWeekNumber&&P(mA,{elTag:"a",elClasses:["fc-daygrid-week-number"],elAttrs:Ya(e,l,"week"),date:l,defaultFormat:EW}),!p.isDisabled&&(t.showDayNumber||Ay(s)||t.forceDayTop)?P("div",{className:"fc-daygrid-day-top"},P(h,{elTag:"a",elClasses:["fc-daygrid-day-number",d&&"fc-daygrid-month-start"],elAttrs:Object.assign(Object.assign({},Ya(e,l)),{id:r.dayNumberId})})):t.showDayNumber?P("div",{className:"fc-daygrid-day-top",style:{visibility:"hidden"}},P("a",{className:"fc-daygrid-day-number"}," ")):void 0,P("div",{className:"fc-daygrid-day-events",ref:t.fgContentElRef},t.fgContent,P("div",{className:"fc-daygrid-day-bottom",style:{marginTop:t.moreMarginTop}},P(SW,{allDayDate:l,singlePlacements:t.singlePlacements,moreCnt:t.moreCnt,alignmentElRef:i,alignGridTop:!t.showDayNumber,extraDateSpan:t.extraDateSpan,dateProfile:t.dateProfile,eventSelection:t.eventSelection,eventDrag:t.eventDrag,eventResize:t.eventResize,todayRange:t.todayRange}))),P("div",{className:"fc-daygrid-day-bg"},t.bgContent)))}}function TW(n){return n.dayNumberText||P(_t,null," ")}function kW(n,e,t){const{start:r,end:i}=e,s=zs(i,-1),o=t.getYear(r),l=t.getMonth(r),c=t.getYear(s),d=t.getMonth(s);return!(o===c&&l===d)&&(n.valueOf()===r.valueOf()||t.getDay(n)===1&&n.valueOf()<i.valueOf())}function NA(n){return n.eventRange.instance.instanceId+":"+n.firstCol}function PA(n){return NA(n)+":"+n.lastCol}function AW(n,e,t,r,i,s,o){let l=new OW(x=>{let C=n[x.index].eventRange.instance.instanceId+":"+x.span.start+":"+(x.span.end-1);return i[C]||1});l.allowReslicing=!0,l.strictOrder=r,e===!0||t===!0?(l.maxCoord=s,l.hiddenConsumes=!0):typeof e=="number"?l.maxStackCnt=e:typeof t=="number"&&(l.maxStackCnt=t,l.hiddenConsumes=!0);let c=[],d=[];for(let x=0;x<n.length;x+=1){let C=n[x],T=PA(C);i[T]!=null?c.push({index:x,span:{start:C.firstCol,end:C.lastCol+1}}):d.push(C)}let h=l.addSegs(c),p=l.toRects(),{singleColPlacements:g,multiColPlacements:v,leftoverMargins:y}=DW(p,n,o),_=[],w=[];for(let x of d){v[x.firstCol].push({seg:x,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let C=x.firstCol;C<=x.lastCol;C+=1)g[C].push({seg:Ba(x,C,C+1,o),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let x=0;x<o.length;x+=1)_.push(0);for(let x of h){let C=n[x.index],T=x.span;v[T.start].push({seg:Ba(C,T.start,T.end,o),isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let R=T.start;R<T.end;R+=1)_[R]+=1,g[R].push({seg:Ba(C,R,R+1,o),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let x=0;x<o.length;x+=1)w.push(y[x]);return{singleColPlacements:g,multiColPlacements:v,moreCnts:_,moreMarginTops:w}}function DW(n,e,t){let r=RW(n,t.length),i=[],s=[],o=[];for(let l=0;l<t.length;l+=1){let c=r[l],d=[],h=0,p=0;for(let v of c){let y=e[v.index];d.push({seg:Ba(y,l,l+1,t),isVisible:!0,isAbsolute:!1,absoluteTop:v.levelCoord,marginTop:v.levelCoord-h}),h=v.levelCoord+v.thickness}let g=[];h=0,p=0;for(let v of c){let y=e[v.index],_=v.span.end-v.span.start>1,w=v.span.start===l;p+=v.levelCoord-h,h=v.levelCoord+v.thickness,_?(p+=v.thickness,w&&g.push({seg:Ba(y,v.span.start,v.span.end,t),isVisible:!0,isAbsolute:!0,absoluteTop:v.levelCoord,marginTop:0})):w&&(g.push({seg:Ba(y,v.span.start,v.span.end,t),isVisible:!0,isAbsolute:!1,absoluteTop:v.levelCoord,marginTop:p}),p=0)}i.push(d),s.push(g),o.push(p)}return{singleColPlacements:i,multiColPlacements:s,leftoverMargins:o}}function RW(n,e){let t=[];for(let r=0;r<e;r+=1)t.push([]);for(let r of n)for(let i=r.span.start;i<r.span.end;i+=1)t[i].push(r);return t}function Ba(n,e,t,r){if(n.firstCol===e&&n.lastCol===t-1)return n;let i=n.eventRange,s=i.range,o=$s(s,{start:r[e].date,end:sn(r[t-1].date,1)});return Object.assign(Object.assign({},n),{firstCol:e,lastCol:t-1,eventRange:{def:i.def,ui:Object.assign(Object.assign({},i.ui),{durationEditable:!1}),instance:i.instance,range:o},isStart:n.isStart&&o.start.valueOf()===s.start.valueOf(),isEnd:n.isEnd&&o.end.valueOf()===s.end.valueOf()})}class OW extends tA{constructor(){super(...arguments),this.hiddenConsumes=!1,this.forceHidden={}}addSegs(e){const t=super.addSegs(e),{entriesByLevel:r}=this,i=s=>!this.forceHidden[Io(s)];for(let s=0;s<r.length;s+=1)r[s]=r[s].filter(i);return t}handleInvalidInsertion(e,t,r){const{entriesByLevel:i,forceHidden:s}=this,{touchingEntry:o,touchingLevel:l,touchingLateral:c}=e;if(this.hiddenConsumes&&o){const d=Io(o);if(!s[d])if(this.allowReslicing){const h=Object.assign(Object.assign({},o),{span:Sy(o.span,t.span)}),p=Io(h);s[p]=!0,i[l][c]=h,r.push(h),this.splitEntry(o,t,r)}else s[d]=!0,r.push(o)}super.handleInvalidInsertion(e,t,r)}}class jA extends ii{constructor(){super(...arguments),this.cellElRefs=new qi,this.frameElRefs=new qi,this.fgElRefs=new qi,this.segHarnessRefs=new qi,this.rootElRef=Wn(),this.state={framePositions:null,maxContentHeight:null,segHeights:{}},this.handleResize=e=>{e&&this.updateSizing(!0)}}render(){let{props:e,state:t,context:r}=this,{options:i}=r,s=e.cells.length,o=jd(e.businessHourSegs,s),l=jd(e.bgEventSegs,s),c=jd(this.getHighlightSegs(),s),d=jd(this.getMirrorSegs(),s),{singleColPlacements:h,multiColPlacements:p,moreCnts:g,moreMarginTops:v}=AW(my(e.fgEventSegs,i.eventOrder),e.dayMaxEvents,e.dayMaxEventRows,i.eventOrderStrict,t.segHeights,t.maxContentHeight,e.cells),y=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{};return P("tr",{ref:this.rootElRef,role:"row"},e.renderIntro&&e.renderIntro(),e.cells.map((_,w)=>{let x=this.renderFgSegs(w,e.forPrint?h[w]:p[w],e.todayRange,y),C=this.renderFgSegs(w,IW(d[w],p),e.todayRange,{},!!e.eventDrag,!!e.eventResize,!1);return P(CW,{key:_.key,elRef:this.cellElRefs.createRef(_.key),innerElRef:this.frameElRefs.createRef(_.key),dateProfile:e.dateProfile,date:_.date,showDayNumber:e.showDayNumbers,showWeekNumber:e.showWeekNumbers&&w===0,forceDayTop:e.showWeekNumbers,todayRange:e.todayRange,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,extraRenderProps:_.extraRenderProps,extraDataAttrs:_.extraDataAttrs,extraClassNames:_.extraClassNames,extraDateSpan:_.extraDateSpan,moreCnt:g[w],moreMarginTop:v[w],singlePlacements:h[w],fgContentElRef:this.fgElRefs.createRef(_.key),fgContent:P(_t,null,P(_t,null,x),P(_t,null,C)),bgContent:P(_t,null,this.renderFillSegs(c[w],"highlight"),this.renderFillSegs(o[w],"non-business"),this.renderFillSegs(l[w],"bg-event")),minHeight:e.cellMinHeight})}))}componentDidMount(){this.updateSizing(!0),this.context.addResizeHandler(this.handleResize)}componentDidUpdate(e,t){let r=this.props;this.updateSizing(!ti(e,r))}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}getHighlightSegs(){let{props:e}=this;return e.eventDrag&&e.eventDrag.segs.length?e.eventDrag.segs:e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:e.dateSelectionSegs}getMirrorSegs(){let{props:e}=this;return e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:[]}renderFgSegs(e,t,r,i,s,o,l){let{context:c}=this,{eventSelection:d}=this.props,{framePositions:h}=this.state,p=this.props.cells.length===1,g=s||o||l,v=[];if(h)for(let y of t){let{seg:_}=y,{instanceId:w}=_.eventRange.instance,x=y.isVisible&&!i[w],C=y.isAbsolute,T="",R="";C&&(c.isRtl?(R=0,T=h.lefts[_.lastCol]-h.lefts[_.firstCol]):(T=0,R=h.rights[_.firstCol]-h.rights[_.lastCol])),v.push(P("div",{className:"fc-daygrid-event-harness"+(C?" fc-daygrid-event-harness-abs":""),key:NA(_),ref:g?null:this.segHarnessRefs.createRef(PA(_)),style:{visibility:x?"":"hidden",marginTop:C?"":y.marginTop,top:C?y.absoluteTop:"",left:T,right:R}},OA(_)?P(MA,Object.assign({seg:_,isDragging:s,isSelected:w===d,defaultDisplayEventEnd:p},Zi(_,r))):P(IA,Object.assign({seg:_,isDragging:s,isResizing:o,isDateSelecting:l,isSelected:w===d,defaultDisplayEventEnd:p},Zi(_,r)))))}return v}renderFillSegs(e,t){let{isRtl:r}=this.context,{todayRange:i}=this.props,{framePositions:s}=this.state,o=[];if(s)for(let l of e){let c=r?{right:0,left:s.lefts[l.lastCol]-s.lefts[l.firstCol]}:{left:0,right:s.rights[l.firstCol]-s.rights[l.lastCol]};o.push(P("div",{key:Yk(l.eventRange),className:"fc-daygrid-bg-harness",style:c},t==="bg-event"?P(pA,Object.assign({seg:l},Zi(l,i))):gA(t)))}return P(_t,{},...o)}updateSizing(e){let{props:t,state:r,frameElRefs:i}=this;if(!t.forPrint&&t.clientWidth!==null){if(e){let c=t.cells.map(d=>i.currentMap[d.key]);if(c.length){let d=this.rootElRef.current,h=new Ka(d,c,!0,!1);(!r.framePositions||!r.framePositions.similarTo(h))&&this.setState({framePositions:new Ka(d,c,!0,!1)})}}const s=this.state.segHeights,o=this.querySegHeights(),l=t.dayMaxEvents===!0||t.dayMaxEventRows===!0;this.safeSetState({segHeights:Object.assign(Object.assign({},s),o),maxContentHeight:l?this.computeMaxContentHeight():null})}}querySegHeights(){let e=this.segHarnessRefs.currentMap,t={};for(let r in e){let i=Math.round(e[r].getBoundingClientRect().height);t[r]=Math.max(t[r]||0,i)}return t}computeMaxContentHeight(){let e=this.props.cells[0].key,t=this.cellElRefs.currentMap[e],r=this.fgElRefs.currentMap[e];return t.getBoundingClientRect().bottom-r.getBoundingClientRect().top}getCellEls(){let e=this.cellElRefs.currentMap;return this.props.cells.map(t=>e[t.key])}}jA.addStateEquality({segHeights:ti});function IW(n,e){if(!n.length)return[];let t=MW(e);return n.map(r=>({seg:r,isVisible:!0,isAbsolute:!0,absoluteTop:t[r.eventRange.instance.instanceId],marginTop:0}))}function MW(n){let e={};for(let t of n)for(let r of t)e[r.seg.eventRange.instance.instanceId]=r.absoluteTop;return e}class NW extends ii{constructor(){super(...arguments),this.splitBusinessHourSegs=Te(ah),this.splitBgEventSegs=Te(PW),this.splitFgEventSegs=Te(ah),this.splitDateSelectionSegs=Te(ah),this.splitEventDrag=Te(sx),this.splitEventResize=Te(sx),this.rowRefs=new qi}render(){let{props:e,context:t}=this,r=e.cells.length,i=this.splitBusinessHourSegs(e.businessHourSegs,r),s=this.splitBgEventSegs(e.bgEventSegs,r),o=this.splitFgEventSegs(e.fgEventSegs,r),l=this.splitDateSelectionSegs(e.dateSelectionSegs,r),c=this.splitEventDrag(e.eventDrag,r),d=this.splitEventResize(e.eventResize,r),h=r>=7&&e.clientWidth?e.clientWidth/t.options.aspectRatio/6:null;return P(Yo,{unit:"day"},(p,g)=>P(_t,null,e.cells.map((v,y)=>P(jA,{ref:this.rowRefs.createRef(y),key:v.length?v[0].date.toISOString():y,showDayNumbers:r>1,showWeekNumbers:e.showWeekNumbers,todayRange:g,dateProfile:e.dateProfile,cells:v,renderIntro:e.renderRowIntro,businessHourSegs:i[y],eventSelection:e.eventSelection,bgEventSegs:s[y],fgEventSegs:o[y],dateSelectionSegs:l[y],eventDrag:c[y],eventResize:d[y],dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,clientWidth:e.clientWidth,clientHeight:e.clientHeight,cellMinHeight:h,forPrint:e.forPrint}))))}componentDidMount(){this.registerInteractiveComponent()}componentDidUpdate(){this.registerInteractiveComponent()}registerInteractiveComponent(){if(!this.rootEl){const e=this.rowRefs.currentMap[0].getCellEls()[0],t=e?e.closest(".fc-daygrid-body"):null;t&&(this.rootEl=t,this.context.registerInteractiveComponent(this,{el:t,isHitComboAllowed:this.props.isHitComboAllowed}))}}componentWillUnmount(){this.rootEl&&(this.context.unregisterInteractiveComponent(this),this.rootEl=null)}prepareHits(){this.rowPositions=new Ka(this.rootEl,this.rowRefs.collect().map(e=>e.getCellEls()[0]),!1,!0),this.colPositions=new Ka(this.rootEl,this.rowRefs.currentMap[0].getCellEls(),!0,!1)}queryHit(e,t){let{colPositions:r,rowPositions:i}=this,s=r.leftToIndex(e),o=i.topToIndex(t);if(o!=null&&s!=null){let l=this.props.cells[o][s];return{dateProfile:this.props.dateProfile,dateSpan:Object.assign({range:this.getCellRange(o,s),allDay:!0},l.extraDateSpan),dayEl:this.getCellEl(o,s),rect:{left:r.lefts[s],right:r.rights[s],top:i.tops[o],bottom:i.bottoms[o]},layer:0}}return null}getCellEl(e,t){return this.rowRefs.currentMap[e].getCellEls()[t]}getCellRange(e,t){let r=this.props.cells[e][t].date,i=sn(r,1);return{start:r,end:i}}}function PW(n,e){return ah(n.filter(jW),e)}function jW(n){return n.eventRange.def.allDay}class LW extends ii{constructor(){super(...arguments),this.elRef=Wn(),this.needsScrollReset=!1}render(){let{props:e}=this,{dayMaxEventRows:t,dayMaxEvents:r,expandRows:i}=e,s=r===!0||t===!0;s&&!i&&(s=!1,t=null,r=null);let o=["fc-daygrid-body",s?"fc-daygrid-body-balanced":"fc-daygrid-body-unbalanced",i?"":"fc-daygrid-body-natural"];return P("div",{ref:this.elRef,className:o.join(" "),style:{width:e.clientWidth,minWidth:e.tableMinWidth}},P("table",{role:"presentation",className:"fc-scrollgrid-sync-table",style:{width:e.clientWidth,minWidth:e.tableMinWidth,height:i?e.clientHeight:""}},e.colGroupNode,P("tbody",{role:"presentation"},P(NW,{dateProfile:e.dateProfile,cells:e.cells,renderRowIntro:e.renderRowIntro,showWeekNumbers:e.showWeekNumbers,clientWidth:e.clientWidth,clientHeight:e.clientHeight,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,dayMaxEvents:r,dayMaxEventRows:t,forPrint:e.forPrint,isHitComboAllowed:e.isHitComboAllowed}))))}componentDidMount(){this.requestScrollReset()}componentDidUpdate(e){e.dateProfile!==this.props.dateProfile?this.requestScrollReset():this.flushScrollReset()}requestScrollReset(){this.needsScrollReset=!0,this.flushScrollReset()}flushScrollReset(){if(this.needsScrollReset&&this.props.clientWidth){const e=FW(this.elRef.current,this.props.dateProfile);if(e){const t=e.closest(".fc-daygrid-body"),r=t.closest(".fc-scroller"),i=e.getBoundingClientRect().top-t.getBoundingClientRect().top;r.scrollTop=i?i+1:0}this.needsScrollReset=!1}}}function FW(n,e){let t;return e.currentRangeUnit.match(/year|month/)&&(t=n.querySelector(`[data-date="${wB(e.currentDate)}-01"]`)),t||(t=n.querySelector(`[data-date="${Kc(e.currentDate)}"]`)),t}class UW extends aA{constructor(){super(...arguments),this.forceDayIfListItem=!0}sliceRange(e,t){return t.sliceRange(e)}}class LA extends ii{constructor(){super(...arguments),this.slicer=new UW,this.tableRef=Wn()}render(){let{props:e,context:t}=this;return P(LW,Object.assign({ref:this.tableRef},this.slicer.sliceProps(e,e.dateProfile,e.nextDayThreshold,t,e.dayTableModel),{dateProfile:e.dateProfile,cells:e.dayTableModel.cells,colGroupNode:e.colGroupNode,tableMinWidth:e.tableMinWidth,renderRowIntro:e.renderRowIntro,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.showWeekNumbers,expandRows:e.expandRows,headerAlignElRef:e.headerAlignElRef,clientWidth:e.clientWidth,clientHeight:e.clientHeight,forPrint:e.forPrint}))}}class BW extends _W{constructor(){super(...arguments),this.buildDayTableModel=Te(HW),this.headerRef=Wn(),this.tableRef=Wn()}render(){let{options:e,dateProfileGenerator:t}=this.context,{props:r}=this,i=this.buildDayTableModel(r.dateProfile,t),s=e.dayHeaders&&P(iA,{ref:this.headerRef,dateProfile:r.dateProfile,dates:i.headerDates,datesRepDistinctDays:i.rowCnt===1}),o=l=>P(LA,{ref:this.tableRef,dateProfile:r.dateProfile,dayTableModel:i,businessHours:r.businessHours,dateSelection:r.dateSelection,eventStore:r.eventStore,eventUiBases:r.eventUiBases,eventSelection:r.eventSelection,eventDrag:r.eventDrag,eventResize:r.eventResize,nextDayThreshold:e.nextDayThreshold,colGroupNode:l.tableColGroupNode,tableMinWidth:l.tableMinWidth,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.weekNumbers,expandRows:!r.isHeightAuto,headerAlignElRef:this.headerElRef,clientWidth:l.clientWidth,clientHeight:l.clientHeight,forPrint:r.forPrint});return e.dayMinWidth?this.renderHScrollLayout(s,o,i.colCnt,e.dayMinWidth):this.renderSimpleLayout(s,o)}}function HW(n,e){let t=new sA(n.renderRange,e);return new oA(t,/year|month|week/.test(n.currentRangeUnit))}class zW extends jk{buildRenderRange(e,t,r){let i=super.buildRenderRange(e,t,r),{props:s}=this;return $W({currentRange:i,snapToWeek:/^(year|month)$/.test(t),fixedWeekCount:s.fixedWeekCount,dateEnv:s.dateEnv})}}function $W(n){let{dateEnv:e,currentRange:t}=n,{start:r,end:i}=t,s;if(n.snapToWeek&&(r=e.startOfWeek(r),s=e.startOfWeek(i),s.valueOf()!==i.valueOf()&&(i=PS(s,1))),n.fixedWeekCount){let o=e.startOfWeek(e.startOfMonth(sn(t.end,-1))),l=Math.ceil(uB(o,i));i=PS(i,6-l)}return{start:r,end:i}}var WW=':root{--fc-daygrid-event-dot-width:8px}.fc-daygrid-day-events:after,.fc-daygrid-day-events:before,.fc-daygrid-day-frame:after,.fc-daygrid-day-frame:before,.fc-daygrid-event-harness:after,.fc-daygrid-event-harness:before{clear:both;content:"";display:table}.fc .fc-daygrid-body{position:relative;z-index:1}.fc .fc-daygrid-day.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-daygrid-day-frame{min-height:100%;position:relative}.fc .fc-daygrid-day-top{display:flex;flex-direction:row-reverse}.fc .fc-day-other .fc-daygrid-day-top{opacity:.3}.fc .fc-daygrid-day-number{padding:4px;position:relative;z-index:4}.fc .fc-daygrid-month-start{font-size:1.1em;font-weight:700}.fc .fc-daygrid-day-events{margin-top:1px}.fc .fc-daygrid-body-balanced .fc-daygrid-day-events{left:0;position:absolute;right:0}.fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events{min-height:2em;position:relative}.fc .fc-daygrid-body-natural .fc-daygrid-day-events{margin-bottom:1em}.fc .fc-daygrid-event-harness{position:relative}.fc .fc-daygrid-event-harness-abs{left:0;position:absolute;right:0;top:0}.fc .fc-daygrid-bg-harness{bottom:0;position:absolute;top:0}.fc .fc-daygrid-day-bg .fc-non-business{z-index:1}.fc .fc-daygrid-day-bg .fc-bg-event{z-index:2}.fc .fc-daygrid-day-bg .fc-highlight{z-index:3}.fc .fc-daygrid-event{margin-top:1px;z-index:6}.fc .fc-daygrid-event.fc-event-mirror{z-index:7}.fc .fc-daygrid-day-bottom{font-size:.85em;margin:0 2px}.fc .fc-daygrid-day-bottom:after,.fc .fc-daygrid-day-bottom:before{clear:both;content:"";display:table}.fc .fc-daygrid-more-link{border-radius:3px;cursor:pointer;line-height:1;margin-top:1px;max-width:100%;overflow:hidden;padding:2px;position:relative;white-space:nowrap;z-index:4}.fc .fc-daygrid-more-link:hover{background-color:rgba(0,0,0,.1)}.fc .fc-daygrid-week-number{background-color:var(--fc-neutral-bg-color);color:var(--fc-neutral-text-color);min-width:1.5em;padding:2px;position:absolute;text-align:center;top:0;z-index:5}.fc .fc-more-popover .fc-popover-body{min-width:220px;padding:10px}.fc-direction-ltr .fc-daygrid-event.fc-event-start,.fc-direction-rtl .fc-daygrid-event.fc-event-end{margin-left:2px}.fc-direction-ltr .fc-daygrid-event.fc-event-end,.fc-direction-rtl .fc-daygrid-event.fc-event-start{margin-right:2px}.fc-direction-ltr .fc-daygrid-more-link{float:left}.fc-direction-ltr .fc-daygrid-week-number{border-radius:0 0 3px 0;left:0}.fc-direction-rtl .fc-daygrid-more-link{float:right}.fc-direction-rtl .fc-daygrid-week-number{border-radius:0 0 0 3px;right:0}.fc-liquid-hack .fc-daygrid-day-frame{position:static}.fc-daygrid-event{border-radius:3px;font-size:var(--fc-small-font-size);position:relative;white-space:nowrap}.fc-daygrid-block-event .fc-event-time{font-weight:700}.fc-daygrid-block-event .fc-event-time,.fc-daygrid-block-event .fc-event-title{padding:1px}.fc-daygrid-dot-event{align-items:center;display:flex;padding:2px 0}.fc-daygrid-dot-event .fc-event-title{flex-grow:1;flex-shrink:1;font-weight:700;min-width:0;overflow:hidden}.fc-daygrid-dot-event.fc-event-mirror,.fc-daygrid-dot-event:hover{background:rgba(0,0,0,.1)}.fc-daygrid-dot-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-daygrid-event-dot{border:calc(var(--fc-daygrid-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-daygrid-event-dot-width)/2);box-sizing:content-box;height:0;margin:0 4px;width:0}.fc-direction-ltr .fc-daygrid-event .fc-event-time{margin-right:3px}.fc-direction-rtl .fc-daygrid-event .fc-event-time{margin-left:3px}';hf(WW);var VW=Ei({name:"@fullcalendar/daygrid",initialView:"dayGridMonth",views:{dayGrid:{component:BW,dateProfileGeneratorClass:zW},dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},fixedWeekCount:!0},dayGridYear:{type:"dayGrid",duration:{years:1}}}});class qW extends sz{getKeyInfo(){return{allDay:{},timed:{}}}getKeysForDateSpan(e){return e.allDay?["allDay"]:["timed"]}getKeysForEventDef(e){return e.allDay?PH(e)?["timed","allDay"]:["allDay"]:["timed"]}}const GW=It({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"short"});function FA(n){let e=["fc-timegrid-slot","fc-timegrid-slot-label",n.isLabeled?"fc-scrollgrid-shrink":"fc-timegrid-slot-minor"];return P(ss.Consumer,null,t=>{if(!n.isLabeled)return P("td",{className:e.join(" "),"data-time":n.isoTimeStr});let{dateEnv:r,options:i,viewApi:s}=t,o=i.slotLabelFormat==null?GW:Array.isArray(i.slotLabelFormat)?It(i.slotLabelFormat[0]):It(i.slotLabelFormat),l={level:0,time:n.time,date:r.toDate(n.date),view:s,text:r.format(n.date,o)};return P(Fn,{elTag:"td",elClasses:e,elAttrs:{"data-time":n.isoTimeStr},renderProps:l,generatorName:"slotLabelContent",customGenerator:i.slotLabelContent,defaultGenerator:YW,classNameGenerator:i.slotLabelClassNames,didMount:i.slotLabelDidMount,willUnmount:i.slotLabelWillUnmount},c=>P("div",{className:"fc-timegrid-slot-label-frame fc-scrollgrid-shrink-frame"},P(c,{elTag:"div",elClasses:["fc-timegrid-slot-label-cushion","fc-scrollgrid-shrink-cushion"]})))})}function YW(n){return n.text}class KW extends ut{render(){return this.props.slatMetas.map(e=>P("tr",{key:e.key},P(FA,Object.assign({},e))))}}const QW=It({week:"short"}),XW=5;class ZW extends ii{constructor(){super(...arguments),this.allDaySplitter=new qW,this.headerElRef=Wn(),this.rootElRef=Wn(),this.scrollerElRef=Wn(),this.state={slatCoords:null},this.handleScrollTopRequest=e=>{let t=this.scrollerElRef.current;t&&(t.scrollTop=e)},this.renderHeadAxis=(e,t="")=>{let{options:r}=this.context,{dateProfile:i}=this.props,s=i.renderRange,l=Gs(s.start,s.end)===1?Ya(this.context,s.start,"week"):{};return r.weekNumbers&&e==="day"?P(mA,{elTag:"th",elClasses:["fc-timegrid-axis","fc-scrollgrid-shrink"],elAttrs:{"aria-hidden":!0},date:s.start,defaultFormat:QW},c=>P("div",{className:["fc-timegrid-axis-frame","fc-scrollgrid-shrink-frame","fc-timegrid-axis-frame-liquid"].join(" "),style:{height:t}},P(c,{elTag:"a",elClasses:["fc-timegrid-axis-cushion","fc-scrollgrid-shrink-cushion","fc-scrollgrid-sync-inner"],elAttrs:l}))):P("th",{"aria-hidden":!0,className:"fc-timegrid-axis"},P("div",{className:"fc-timegrid-axis-frame",style:{height:t}}))},this.renderTableRowAxis=e=>{let{options:t,viewApi:r}=this.context,i={text:t.allDayText,view:r};return P(Fn,{elTag:"td",elClasses:["fc-timegrid-axis","fc-scrollgrid-shrink"],elAttrs:{"aria-hidden":!0},renderProps:i,generatorName:"allDayContent",customGenerator:t.allDayContent,defaultGenerator:JW,classNameGenerator:t.allDayClassNames,didMount:t.allDayDidMount,willUnmount:t.allDayWillUnmount},s=>P("div",{className:["fc-timegrid-axis-frame","fc-scrollgrid-shrink-frame",e==null?" fc-timegrid-axis-frame-liquid":""].join(" "),style:{height:e}},P(s,{elTag:"span",elClasses:["fc-timegrid-axis-cushion","fc-scrollgrid-shrink-cushion","fc-scrollgrid-sync-inner"]})))},this.handleSlatCoords=e=>{this.setState({slatCoords:e})}}renderSimpleLayout(e,t,r){let{context:i,props:s}=this,o=[],l=Ph(i.options);return e&&o.push({type:"header",key:"header",isSticky:l,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),t&&(o.push({type:"body",key:"all-day",chunk:{content:t}}),o.push({type:"body",key:"all-day-divider",outerContent:P("tr",{role:"presentation",className:"fc-scrollgrid-section"},P("td",{className:"fc-timegrid-divider "+i.theme.getClass("tableCellShaded")}))})),o.push({type:"body",key:"body",liquid:!0,expandRows:!!i.options.expandRows,chunk:{scrollerElRef:this.scrollerElRef,content:r}}),P(Dc,{elRef:this.rootElRef,elClasses:["fc-timegrid"],viewSpec:i.viewSpec},P(Ey,{liquid:!s.isHeightAuto&&!s.forPrint,collapsibleWidth:s.forPrint,cols:[{width:"shrink"}],sections:o}))}renderHScrollLayout(e,t,r,i,s,o,l){let c=this.context.pluginHooks.scrollGridImpl;if(!c)throw new Error("No ScrollGrid implementation");let{context:d,props:h}=this,p=!h.forPrint&&Ph(d.options),g=!h.forPrint&&fA(d.options),v=[];e&&v.push({type:"header",key:"header",isSticky:p,syncRowHeights:!0,chunks:[{key:"axis",rowContent:_=>P("tr",{role:"presentation"},this.renderHeadAxis("day",_.rowSyncHeights[0]))},{key:"cols",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),t&&(v.push({type:"body",key:"all-day",syncRowHeights:!0,chunks:[{key:"axis",rowContent:_=>P("tr",{role:"presentation"},this.renderTableRowAxis(_.rowSyncHeights[0]))},{key:"cols",content:t}]}),v.push({key:"all-day-divider",type:"body",outerContent:P("tr",{role:"presentation",className:"fc-scrollgrid-section"},P("td",{colSpan:2,className:"fc-timegrid-divider "+d.theme.getClass("tableCellShaded")}))}));let y=d.options.nowIndicator;return v.push({type:"body",key:"body",liquid:!0,expandRows:!!d.options.expandRows,chunks:[{key:"axis",content:_=>P("div",{className:"fc-timegrid-axis-chunk"},P("table",{"aria-hidden":!0,style:{height:_.expandRows?_.clientHeight:""}},_.tableColGroupNode,P("tbody",null,P(KW,{slatMetas:o}))),P("div",{className:"fc-timegrid-now-indicator-container"},P(Yo,{unit:y?"minute":"day"},w=>{let x=y&&l&&l.safeComputeTop(w);return typeof x=="number"?P(Ty,{elClasses:["fc-timegrid-now-indicator-arrow"],elStyle:{top:x},isAxis:!0,date:w}):null})))},{key:"cols",scrollerElRef:this.scrollerElRef,content:r}]}),g&&v.push({key:"footer",type:"footer",isSticky:!0,chunks:[{key:"axis",content:ov},{key:"cols",content:ov}]}),P(Dc,{elRef:this.rootElRef,elClasses:["fc-timegrid"],viewSpec:d.viewSpec},P(c,{liquid:!h.isHeightAuto&&!h.forPrint,forPrint:h.forPrint,collapsibleWidth:!1,colGroups:[{width:"shrink",cols:[{width:"shrink"}]},{cols:[{span:i,minWidth:s}]}],sections:v}))}getAllDayMaxEventProps(){let{dayMaxEvents:e,dayMaxEventRows:t}=this.context.options;return(e===!0||t===!0)&&(e=void 0,t=XW),{dayMaxEvents:e,dayMaxEventRows:t}}}function JW(n){return n.text}class eV{constructor(e,t,r){this.positions=e,this.dateProfile=t,this.slotDuration=r}safeComputeTop(e){let{dateProfile:t}=this;if(Xi(t.currentRange,e)){let r=St(e),i=e.valueOf()-r.valueOf();if(i>=Zr(t.slotMinTime)&&i<Zr(t.slotMaxTime))return this.computeTimeTop(Ze(i))}return null}computeDateTop(e,t){return t||(t=St(e)),this.computeTimeTop(Ze(e.valueOf()-t.valueOf()))}computeTimeTop(e){let{positions:t,dateProfile:r}=this,i=t.els.length,s=(e.milliseconds-Zr(r.slotMinTime))/Zr(this.slotDuration),o,l;return s=Math.max(0,s),s=Math.min(i,s),o=Math.floor(s),o=Math.min(o,i-1),l=s-o,t.tops[o]+t.getHeight(o)*l}}class tV extends ut{render(){let{props:e,context:t}=this,{options:r}=t,{slatElRefs:i}=e;return P("tbody",null,e.slatMetas.map((s,o)=>{let l={time:s.time,date:t.dateEnv.toDate(s.date),view:t.viewApi};return P("tr",{key:s.key,ref:i.createRef(s.key)},e.axis&&P(FA,Object.assign({},s)),P(Fn,{elTag:"td",elClasses:["fc-timegrid-slot","fc-timegrid-slot-lane",!s.isLabeled&&"fc-timegrid-slot-minor"],elAttrs:{"data-time":s.isoTimeStr},renderProps:l,generatorName:"slotLaneContent",customGenerator:r.slotLaneContent,classNameGenerator:r.slotLaneClassNames,didMount:r.slotLaneDidMount,willUnmount:r.slotLaneWillUnmount}))}))}}class nV extends ut{constructor(){super(...arguments),this.rootElRef=Wn(),this.slatElRefs=new qi}render(){let{props:e,context:t}=this;return P("div",{ref:this.rootElRef,className:"fc-timegrid-slots"},P("table",{"aria-hidden":!0,className:t.theme.getClass("table"),style:{minWidth:e.tableMinWidth,width:e.clientWidth,height:e.minHeight}},e.tableColGroupNode,P(tV,{slatElRefs:this.slatElRefs,axis:e.axis,slatMetas:e.slatMetas})))}componentDidMount(){this.updateSizing()}componentDidUpdate(){this.updateSizing()}componentWillUnmount(){this.props.onCoords&&this.props.onCoords(null)}updateSizing(){let{context:e,props:t}=this;t.onCoords&&t.clientWidth!==null&&this.rootElRef.current.offsetHeight&&t.onCoords(new eV(new Ka(this.rootElRef.current,rV(this.slatElRefs.currentMap,t.slatMetas),!1,!0),this.props.dateProfile,e.options.slotDuration))}}function rV(n,e){return e.map(t=>n[t.key])}function Kl(n,e){let t=[],r;for(r=0;r<e;r+=1)t.push([]);if(n)for(r=0;r<n.length;r+=1)t[n[r].col].push(n[r]);return t}function ox(n,e){let t=[];if(n){for(let r=0;r<e;r+=1)t[r]={affectedInstances:n.affectedInstances,isEvent:n.isEvent,segs:[]};for(let r of n.segs)t[r.col].segs.push(r)}else for(let r=0;r<e;r+=1)t[r]=null;return t}class iV extends ut{render(){let{props:e}=this;return P(vA,{elClasses:["fc-timegrid-more-link"],elStyle:{top:e.top,bottom:e.bottom},allDayDate:null,moreCnt:e.hiddenSegs.length,allSegs:e.hiddenSegs,hiddenSegs:e.hiddenSegs,extraDateSpan:e.extraDateSpan,dateProfile:e.dateProfile,todayRange:e.todayRange,popoverContent:()=>BA(e.hiddenSegs,e),defaultGenerator:sV,forceTimed:!0},t=>P(t,{elTag:"div",elClasses:["fc-timegrid-more-link-inner","fc-sticky"]}))}}function sV(n){return n.shortText}function oV(n,e,t){let r=new tA;e!=null&&(r.strictOrder=e),t!=null&&(r.maxStackCnt=t);let i=r.addSegs(n),s=yz(i),o=aV(r);return o=dV(o,1),{segRects:hV(o),hiddenGroups:s}}function aV(n){const{entriesByLevel:e}=n,t=Ry((r,i)=>r+":"+i,(r,i)=>{let s=uV(n,r,i),o=ax(s,t),l=e[r][i];return[Object.assign(Object.assign({},l),{nextLevelNodes:o[0]}),l.thickness+o[1]]});return ax(e.length?{level:0,lateralStart:0,lateralEnd:e[0].length}:null,t)[0]}function ax(n,e){if(!n)return[[],0];let{level:t,lateralStart:r,lateralEnd:i}=n,s=r,o=[];for(;s<i;)o.push(e(t,s)),s+=1;return o.sort(lV),[o.map(cV),o[0][1]]}function lV(n,e){return e[1]-n[1]}function cV(n){return n[0]}function uV(n,e,t){let{levelCoords:r,entriesByLevel:i}=n,s=i[e][t],o=r[e]+s.thickness,l=r.length,c=e;for(;c<l&&r[c]<o;c+=1);for(;c<l;c+=1){let d=i[c],h,p=sv(d,s.span.start,iv),g=p[0]+p[1],v=g;for(;(h=d[v])&&h.span.start<s.span.end;)v+=1;if(g<v)return{level:c,lateralStart:g,lateralEnd:v}}return null}function dV(n,e){const t=Ry((r,i,s)=>Io(r),(r,i,s)=>{let{nextLevelNodes:o,thickness:l}=r,c=l+s,d=l/c,h,p=[];if(!o.length)h=e;else for(let v of o)if(h===void 0){let y=t(v,i,c);h=y[0],p.push(y[1])}else{let y=t(v,h,0);p.push(y[1])}let g=(h-i)*d;return[h-g,Object.assign(Object.assign({},r),{thickness:g,nextLevelNodes:p})]});return n.map(r=>t(r,0,0)[1])}function hV(n){let e=[];const t=Ry((i,s,o)=>Io(i),(i,s,o)=>{let l=Object.assign(Object.assign({},i),{levelCoord:s,stackDepth:o,stackForward:0});return e.push(l),l.stackForward=r(i.nextLevelNodes,s+i.thickness,o+1)+1});function r(i,s,o){let l=0;for(let c of i)l=Math.max(t(c,s,o),l);return l}return r(n,0,0),e}function Ry(n,e){const t={};return(...r)=>{let i=n(...r);return i in t?t[i]:t[i]=e(...r)}}function lx(n,e,t=null,r=0){let i=[];if(t)for(let s=0;s<n.length;s+=1){let o=n[s],l=t.computeDateTop(o.start,e),c=Math.max(l+(r||0),t.computeDateTop(o.end,e));i.push({start:Math.round(l),end:Math.round(c)})}return i}function fV(n,e,t,r){let i=[],s=[];for(let d=0;d<n.length;d+=1){let h=e[d];h?i.push({index:d,thickness:1,span:h}):s.push(n[d])}let{segRects:o,hiddenGroups:l}=oV(i,t,r),c=[];for(let d of o)c.push({seg:n[d.index],rect:d});for(let d of s)c.push({seg:d,rect:null});return{segPlacements:c,hiddenGroups:l}}const pV=It({hour:"numeric",minute:"2-digit",meridiem:!1});class UA extends ut{render(){return P(Cy,Object.assign({},this.props,{elClasses:["fc-timegrid-event","fc-v-event",this.props.isShort&&"fc-timegrid-event-short"],defaultTimeFormat:pV}))}}class gV extends ut{constructor(){super(...arguments),this.sortEventSegs=Te(my)}render(){let{props:e,context:t}=this,{options:r}=t,i=r.selectMirror,s=e.eventDrag&&e.eventDrag.segs||e.eventResize&&e.eventResize.segs||i&&e.dateSelectionSegs||[],o=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{},l=this.sortEventSegs(e.fgEventSegs,r.eventOrder);return P(ky,{elTag:"td",elRef:e.elRef,elClasses:["fc-timegrid-col",...e.extraClassNames||[]],elAttrs:Object.assign({role:"gridcell"},e.extraDataAttrs),date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,extraRenderProps:e.extraRenderProps},c=>P("div",{className:"fc-timegrid-col-frame"},P("div",{className:"fc-timegrid-col-bg"},this.renderFillSegs(e.businessHourSegs,"non-business"),this.renderFillSegs(e.bgEventSegs,"bg-event"),this.renderFillSegs(e.dateSelectionSegs,"highlight")),P("div",{className:"fc-timegrid-col-events"},this.renderFgSegs(l,o,!1,!1,!1)),P("div",{className:"fc-timegrid-col-events"},this.renderFgSegs(s,{},!!e.eventDrag,!!e.eventResize,!!i,"mirror")),P("div",{className:"fc-timegrid-now-indicator-container"},this.renderNowIndicator(e.nowIndicatorSegs)),Ay(r)&&P(c,{elTag:"div",elClasses:["fc-timegrid-col-misc"]})))}renderFgSegs(e,t,r,i,s,o){let{props:l}=this;return l.forPrint?BA(e,l):this.renderPositionedFgSegs(e,t,r,i,s,o)}renderPositionedFgSegs(e,t,r,i,s,o){let{eventMaxStack:l,eventShortHeight:c,eventOrderStrict:d,eventMinHeight:h}=this.context.options,{date:p,slatCoords:g,eventSelection:v,todayRange:y,nowDate:_}=this.props,w=r||i||s,x=lx(e,p,g,h),{segPlacements:C,hiddenGroups:T}=fV(e,x,d,l);return P(_t,null,this.renderHiddenGroups(T,e),C.map(R=>{let{seg:D,rect:O}=R,M=D.eventRange.instance.instanceId,I=w||!!(!t[M]&&O),F=em(O&&O.span),z=!w&&O?this.computeSegHStyle(O):{left:0,right:0},V=!!O&&O.stackForward>0,ee=!!O&&O.span.end-O.span.start<c;return P("div",{className:"fc-timegrid-event-harness"+(V?" fc-timegrid-event-harness-inset":""),key:o||M,style:Object.assign(Object.assign({visibility:I?"":"hidden"},F),z)},P(UA,Object.assign({seg:D,isDragging:r,isResizing:i,isDateSelecting:s,isSelected:M===v,isShort:ee},Zi(D,y,_))))}))}renderHiddenGroups(e,t){let{extraDateSpan:r,dateProfile:i,todayRange:s,nowDate:o,eventSelection:l,eventDrag:c,eventResize:d}=this.props;return P(_t,null,e.map(h=>{let p=em(h.span),g=mV(h.entries,t);return P(iV,{key:Ak(yA(g)),hiddenSegs:g,top:p.top,bottom:p.bottom,extraDateSpan:r,dateProfile:i,todayRange:s,nowDate:o,eventSelection:l,eventDrag:c,eventResize:d})}))}renderFillSegs(e,t){let{props:r,context:i}=this,o=lx(e,r.date,r.slatCoords,i.options.eventMinHeight).map((l,c)=>{let d=e[c];return P("div",{key:Yk(d.eventRange),className:"fc-timegrid-bg-harness",style:em(l)},t==="bg-event"?P(pA,Object.assign({seg:d},Zi(d,r.todayRange,r.nowDate))):gA(t))});return P(_t,null,o)}renderNowIndicator(e){let{slatCoords:t,date:r}=this.props;return t?e.map((i,s)=>P(Ty,{key:s,elClasses:["fc-timegrid-now-indicator-line"],elStyle:{top:t.computeDateTop(i.start,r)},isAxis:!1,date:r})):null}computeSegHStyle(e){let{isRtl:t,options:r}=this.context,i=r.slotEventOverlap,s=e.levelCoord,o=e.levelCoord+e.thickness,l,c;i&&(o=Math.min(1,s+(o-s)*2)),t?(l=1-o,c=s):(l=s,c=1-o);let d={zIndex:e.stackDepth+1,left:l*100+"%",right:c*100+"%"};return i&&!e.stackForward&&(d[t?"marginLeft":"marginRight"]=20),d}}function BA(n,{todayRange:e,nowDate:t,eventSelection:r,eventDrag:i,eventResize:s}){let o=(i?i.affectedInstances:null)||(s?s.affectedInstances:null)||{};return P(_t,null,n.map(l=>{let c=l.eventRange.instance.instanceId;return P("div",{key:c,style:{visibility:o[c]?"hidden":""}},P(UA,Object.assign({seg:l,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:c===r,isShort:!1},Zi(l,e,t))))}))}function em(n){return n?{top:n.start,bottom:-n.end}:{top:"",bottom:""}}function mV(n,e){return n.map(t=>e[t.index])}class vV extends ut{constructor(){super(...arguments),this.splitFgEventSegs=Te(Kl),this.splitBgEventSegs=Te(Kl),this.splitBusinessHourSegs=Te(Kl),this.splitNowIndicatorSegs=Te(Kl),this.splitDateSelectionSegs=Te(Kl),this.splitEventDrag=Te(ox),this.splitEventResize=Te(ox),this.rootElRef=Wn(),this.cellElRefs=new qi}render(){let{props:e,context:t}=this,r=t.options.nowIndicator&&e.slatCoords&&e.slatCoords.safeComputeTop(e.nowDate),i=e.cells.length,s=this.splitFgEventSegs(e.fgEventSegs,i),o=this.splitBgEventSegs(e.bgEventSegs,i),l=this.splitBusinessHourSegs(e.businessHourSegs,i),c=this.splitNowIndicatorSegs(e.nowIndicatorSegs,i),d=this.splitDateSelectionSegs(e.dateSelectionSegs,i),h=this.splitEventDrag(e.eventDrag,i),p=this.splitEventResize(e.eventResize,i);return P("div",{className:"fc-timegrid-cols",ref:this.rootElRef},P("table",{role:"presentation",style:{minWidth:e.tableMinWidth,width:e.clientWidth}},e.tableColGroupNode,P("tbody",{role:"presentation"},P("tr",{role:"row"},e.axis&&P("td",{"aria-hidden":!0,className:"fc-timegrid-col fc-timegrid-axis"},P("div",{className:"fc-timegrid-col-frame"},P("div",{className:"fc-timegrid-now-indicator-container"},typeof r=="number"&&P(Ty,{elClasses:["fc-timegrid-now-indicator-arrow"],elStyle:{top:r},isAxis:!0,date:e.nowDate})))),e.cells.map((g,v)=>P(gV,{key:g.key,elRef:this.cellElRefs.createRef(g.key),dateProfile:e.dateProfile,date:g.date,nowDate:e.nowDate,todayRange:e.todayRange,extraRenderProps:g.extraRenderProps,extraDataAttrs:g.extraDataAttrs,extraClassNames:g.extraClassNames,extraDateSpan:g.extraDateSpan,fgEventSegs:s[v],bgEventSegs:o[v],businessHourSegs:l[v],nowIndicatorSegs:c[v],dateSelectionSegs:d[v],eventDrag:h[v],eventResize:p[v],slatCoords:e.slatCoords,eventSelection:e.eventSelection,forPrint:e.forPrint}))))))}componentDidMount(){this.updateCoords()}componentDidUpdate(){this.updateCoords()}updateCoords(){let{props:e}=this;e.onColCoords&&e.clientWidth!==null&&e.onColCoords(new Ka(this.rootElRef.current,yV(this.cellElRefs.currentMap,e.cells),!0,!1))}}function yV(n,e){return e.map(t=>n[t.key])}class bV extends ii{constructor(){super(...arguments),this.processSlotOptions=Te(_V),this.state={slatCoords:null},this.handleRootEl=e=>{e?this.context.registerInteractiveComponent(this,{el:e,isHitComboAllowed:this.props.isHitComboAllowed}):this.context.unregisterInteractiveComponent(this)},this.handleScrollRequest=e=>{let{onScrollTopRequest:t}=this.props,{slatCoords:r}=this.state;if(t&&r){if(e.time){let i=r.computeTimeTop(e.time);i=Math.ceil(i),i&&(i+=1),t(i)}return!0}return!1},this.handleColCoords=e=>{this.colCoords=e},this.handleSlatCoords=e=>{this.setState({slatCoords:e}),this.props.onSlatCoords&&this.props.onSlatCoords(e)}}render(){let{props:e,state:t}=this;return P("div",{className:"fc-timegrid-body",ref:this.handleRootEl,style:{width:e.clientWidth,minWidth:e.tableMinWidth}},P(nV,{axis:e.axis,dateProfile:e.dateProfile,slatMetas:e.slatMetas,clientWidth:e.clientWidth,minHeight:e.expandRows?e.clientHeight:"",tableMinWidth:e.tableMinWidth,tableColGroupNode:e.axis?e.tableColGroupNode:null,onCoords:this.handleSlatCoords}),P(vV,{cells:e.cells,axis:e.axis,dateProfile:e.dateProfile,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,todayRange:e.todayRange,nowDate:e.nowDate,nowIndicatorSegs:e.nowIndicatorSegs,clientWidth:e.clientWidth,tableMinWidth:e.tableMinWidth,tableColGroupNode:e.tableColGroupNode,slatCoords:t.slatCoords,onColCoords:this.handleColCoords,forPrint:e.forPrint}))}componentDidMount(){this.scrollResponder=this.context.createScrollResponder(this.handleScrollRequest)}componentDidUpdate(e){this.scrollResponder.update(e.dateProfile!==this.props.dateProfile)}componentWillUnmount(){this.scrollResponder.detach()}queryHit(e,t){let{dateEnv:r,options:i}=this.context,{colCoords:s}=this,{dateProfile:o}=this.props,{slatCoords:l}=this.state,{snapDuration:c,snapsPerSlot:d}=this.processSlotOptions(this.props.slotDuration,i.snapDuration),h=s.leftToIndex(e),p=l.positions.topToIndex(t);if(h!=null&&p!=null){let g=this.props.cells[h],v=l.positions.tops[p],y=l.positions.getHeight(p),_=(t-v)/y,w=Math.floor(_*d),x=p*d+w,C=this.props.cells[h].date,T=Xm(o.slotMinTime,oB(c,x)),R=r.add(C,T),D=r.add(R,c);return{dateProfile:o,dateSpan:Object.assign({range:{start:R,end:D},allDay:!1},g.extraDateSpan),dayEl:s.els[h],rect:{left:s.lefts[h],right:s.rights[h],top:v,bottom:v+y},layer:0}}return null}}function _V(n,e){let t=e||n,r=ny(n,t);return r===null&&(t=n,r=1),{snapDuration:t,snapsPerSlot:r}}class wV extends aA{sliceRange(e,t){let r=[];for(let i=0;i<t.length;i+=1){let s=$s(e,t[i]);s&&r.push({start:s.start,end:s.end,isStart:s.start.valueOf()===e.start.valueOf(),isEnd:s.end.valueOf()===e.end.valueOf(),col:i})}return r}}class SV extends ii{constructor(){super(...arguments),this.buildDayRanges=Te(xV),this.slicer=new wV,this.timeColsRef=Wn()}render(){let{props:e,context:t}=this,{dateProfile:r,dayTableModel:i}=e,{nowIndicator:s,nextDayThreshold:o}=t.options,l=this.buildDayRanges(i,r,t.dateEnv);return P(Yo,{unit:s?"minute":"day"},(c,d)=>P(bV,Object.assign({ref:this.timeColsRef},this.slicer.sliceProps(e,r,null,t,l),{forPrint:e.forPrint,axis:e.axis,dateProfile:r,slatMetas:e.slatMetas,slotDuration:e.slotDuration,cells:i.cells[0],tableColGroupNode:e.tableColGroupNode,tableMinWidth:e.tableMinWidth,clientWidth:e.clientWidth,clientHeight:e.clientHeight,expandRows:e.expandRows,nowDate:c,nowIndicatorSegs:s&&this.slicer.sliceNowDate(c,r,o,t,l),todayRange:d,onScrollTopRequest:e.onScrollTopRequest,onSlatCoords:e.onSlatCoords})))}}function xV(n,e,t){let r=[];for(let i of n.headerDates)r.push({start:t.add(i,e.slotMinTime),end:t.add(i,e.slotMaxTime)});return r}const cx=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}];function EV(n,e,t,r,i){let s=new Date(0),o=n,l=Ze(0),c=t||CV(r),d=[];for(;Zr(o)<Zr(e);){let h=i.add(s,o),p=ny(l,c)!==null;d.push({date:h,time:o,key:h.toISOString(),isoTimeStr:SB(h),isLabeled:p}),o=Xm(o,r),l=Xm(l,r)}return d}function CV(n){let e,t,r;for(e=cx.length-1;e>=0;e-=1)if(t=Ze(cx[e]),r=ny(t,n),r!==null&&r>1)return t;return n}class TV extends ZW{constructor(){super(...arguments),this.buildTimeColsModel=Te(kV),this.buildSlatMetas=Te(EV)}render(){let{options:e,dateEnv:t,dateProfileGenerator:r}=this.context,{props:i}=this,{dateProfile:s}=i,o=this.buildTimeColsModel(s,r),l=this.allDaySplitter.splitProps(i),c=this.buildSlatMetas(s.slotMinTime,s.slotMaxTime,e.slotLabelInterval,e.slotDuration,t),{dayMinWidth:d}=e,h=!d,p=d,g=e.dayHeaders&&P(iA,{dates:o.headerDates,dateProfile:s,datesRepDistinctDays:!0,renderIntro:h?this.renderHeadAxis:null}),v=e.allDaySlot!==!1&&(_=>P(LA,Object.assign({},l.allDay,{dateProfile:s,dayTableModel:o,nextDayThreshold:e.nextDayThreshold,tableMinWidth:_.tableMinWidth,colGroupNode:_.tableColGroupNode,renderRowIntro:h?this.renderTableRowAxis:null,showWeekNumbers:!1,expandRows:!1,headerAlignElRef:this.headerElRef,clientWidth:_.clientWidth,clientHeight:_.clientHeight,forPrint:i.forPrint},this.getAllDayMaxEventProps()))),y=_=>P(SV,Object.assign({},l.timed,{dayTableModel:o,dateProfile:s,axis:h,slotDuration:e.slotDuration,slatMetas:c,forPrint:i.forPrint,tableColGroupNode:_.tableColGroupNode,tableMinWidth:_.tableMinWidth,clientWidth:_.clientWidth,clientHeight:_.clientHeight,onSlatCoords:this.handleSlatCoords,expandRows:_.expandRows,onScrollTopRequest:this.handleScrollTopRequest}));return p?this.renderHScrollLayout(g,v,y,o.colCnt,d,c,this.state.slatCoords):this.renderSimpleLayout(g,v,y)}}function kV(n,e){let t=new sA(n.renderRange,e);return new oA(t,!1)}var AV='.fc-v-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-v-event .fc-event-main{color:var(--fc-event-text-color);height:100%}.fc-v-event .fc-event-main-frame{display:flex;flex-direction:column;height:100%}.fc-v-event .fc-event-time{flex-grow:0;flex-shrink:0;max-height:100%;overflow:hidden}.fc-v-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-height:0}.fc-v-event .fc-event-title{bottom:0;max-height:100%;overflow:hidden;top:0}.fc-v-event:not(.fc-event-start){border-top-left-radius:0;border-top-right-radius:0;border-top-width:0}.fc-v-event:not(.fc-event-end){border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-width:0}.fc-v-event.fc-event-selected:before{left:-10px;right:-10px}.fc-v-event .fc-event-resizer-start{cursor:n-resize}.fc-v-event .fc-event-resizer-end{cursor:s-resize}.fc-v-event:not(.fc-event-selected) .fc-event-resizer{height:var(--fc-event-resizer-thickness);left:0;right:0}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-start{top:calc(var(--fc-event-resizer-thickness)/-2)}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-end{bottom:calc(var(--fc-event-resizer-thickness)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer{left:50%;margin-left:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer-start{top:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer-end{bottom:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc .fc-timegrid .fc-daygrid-body{z-index:2}.fc .fc-timegrid-divider{padding:0 0 2px}.fc .fc-timegrid-body{min-height:100%;position:relative;z-index:1}.fc .fc-timegrid-axis-chunk{position:relative}.fc .fc-timegrid-axis-chunk>table,.fc .fc-timegrid-slots{position:relative;z-index:1}.fc .fc-timegrid-slot{border-bottom:0;height:1.5em}.fc .fc-timegrid-slot:empty:before{content:"\\00a0"}.fc .fc-timegrid-slot-minor{border-top-style:dotted}.fc .fc-timegrid-slot-label-cushion{display:inline-block;white-space:nowrap}.fc .fc-timegrid-slot-label{vertical-align:middle}.fc .fc-timegrid-axis-cushion,.fc .fc-timegrid-slot-label-cushion{padding:0 4px}.fc .fc-timegrid-axis-frame-liquid{height:100%}.fc .fc-timegrid-axis-frame{align-items:center;display:flex;justify-content:flex-end;overflow:hidden}.fc .fc-timegrid-axis-cushion{flex-shrink:0;max-width:60px}.fc-direction-ltr .fc-timegrid-slot-label-frame{text-align:right}.fc-direction-rtl .fc-timegrid-slot-label-frame{text-align:left}.fc-liquid-hack .fc-timegrid-axis-frame-liquid{bottom:0;height:auto;left:0;position:absolute;right:0;top:0}.fc .fc-timegrid-col.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-timegrid-col-frame{min-height:100%;position:relative}.fc-media-screen.fc-liquid-hack .fc-timegrid-col-frame{bottom:0;height:auto;left:0;position:absolute;right:0;top:0}.fc-media-screen .fc-timegrid-cols{bottom:0;left:0;position:absolute;right:0;top:0}.fc-media-screen .fc-timegrid-cols>table{height:100%}.fc-media-screen .fc-timegrid-col-bg,.fc-media-screen .fc-timegrid-col-events,.fc-media-screen .fc-timegrid-now-indicator-container{left:0;position:absolute;right:0;top:0}.fc .fc-timegrid-col-bg{z-index:2}.fc .fc-timegrid-col-bg .fc-non-business{z-index:1}.fc .fc-timegrid-col-bg .fc-bg-event{z-index:2}.fc .fc-timegrid-col-bg .fc-highlight{z-index:3}.fc .fc-timegrid-bg-harness{left:0;position:absolute;right:0}.fc .fc-timegrid-col-events{z-index:3}.fc .fc-timegrid-now-indicator-container{bottom:0;overflow:hidden}.fc-direction-ltr .fc-timegrid-col-events{margin:0 2.5% 0 2px}.fc-direction-rtl .fc-timegrid-col-events{margin:0 2px 0 2.5%}.fc-timegrid-event-harness{position:absolute}.fc-timegrid-event-harness>.fc-timegrid-event{bottom:0;left:0;position:absolute;right:0;top:0}.fc-timegrid-event-harness-inset .fc-timegrid-event,.fc-timegrid-event.fc-event-mirror,.fc-timegrid-more-link{box-shadow:0 0 0 1px var(--fc-page-bg-color)}.fc-timegrid-event,.fc-timegrid-more-link{border-radius:3px;font-size:var(--fc-small-font-size)}.fc-timegrid-event{margin-bottom:1px}.fc-timegrid-event .fc-event-main{padding:1px 1px 0}.fc-timegrid-event .fc-event-time{font-size:var(--fc-small-font-size);margin-bottom:1px;white-space:nowrap}.fc-timegrid-event-short .fc-event-main-frame{flex-direction:row;overflow:hidden}.fc-timegrid-event-short .fc-event-time:after{content:"\\00a0-\\00a0"}.fc-timegrid-event-short .fc-event-title{font-size:var(--fc-small-font-size)}.fc-timegrid-more-link{background:var(--fc-more-link-bg-color);color:var(--fc-more-link-text-color);cursor:pointer;margin-bottom:1px;position:absolute;z-index:9999}.fc-timegrid-more-link-inner{padding:3px 2px;top:0}.fc-direction-ltr .fc-timegrid-more-link{right:0}.fc-direction-rtl .fc-timegrid-more-link{left:0}.fc .fc-timegrid-now-indicator-arrow,.fc .fc-timegrid-now-indicator-line{pointer-events:none}.fc .fc-timegrid-now-indicator-line{border-color:var(--fc-now-indicator-color);border-style:solid;border-width:1px 0 0;left:0;position:absolute;right:0;z-index:4}.fc .fc-timegrid-now-indicator-arrow{border-color:var(--fc-now-indicator-color);border-style:solid;margin-top:-5px;position:absolute;z-index:4}.fc-direction-ltr .fc-timegrid-now-indicator-arrow{border-bottom-color:transparent;border-top-color:transparent;border-width:5px 0 5px 6px;left:0}.fc-direction-rtl .fc-timegrid-now-indicator-arrow{border-bottom-color:transparent;border-top-color:transparent;border-width:5px 6px 5px 0;right:0}';hf(AV);const DV={allDaySlot:Boolean};var RV=Ei({name:"@fullcalendar/timegrid",initialView:"timeGridWeek",optionRefiners:DV,views:{timeGrid:{component:TV,usesMinMaxTime:!0,allDaySlot:!0,slotDuration:"00:30:00",slotEventOverlap:!0},timeGridDay:{type:"timeGrid",duration:{days:1}},timeGridWeek:{type:"timeGrid",duration:{weeks:1}}}});class OV extends ut{constructor(){super(...arguments),this.state={textId:Fs()}}render(){let{theme:e,dateEnv:t,options:r,viewApi:i}=this.context,{cellId:s,dayDate:o,todayRange:l}=this.props,{textId:c}=this.state,d=by(o,l),h=r.listDayFormat?t.format(o,r.listDayFormat):"",p=r.listDaySideFormat?t.format(o,r.listDaySideFormat):"",g=Object.assign({date:t.toDate(o),view:i,textId:c,text:h,sideText:p,navLinkAttrs:Ya(this.context,o),sideNavLinkAttrs:Ya(this.context,o,"day",!1)},d);return P(Fn,{elTag:"tr",elClasses:["fc-list-day",...vf(d,e)],elAttrs:{"data-date":Kc(o)},renderProps:g,generatorName:"dayHeaderContent",customGenerator:r.dayHeaderContent,defaultGenerator:IV,classNameGenerator:r.dayHeaderClassNames,didMount:r.dayHeaderDidMount,willUnmount:r.dayHeaderWillUnmount},v=>P("th",{scope:"colgroup",colSpan:3,id:s,"aria-labelledby":c},P(v,{elTag:"div",elClasses:["fc-list-day-cushion",e.getClass("tableCellShaded")]})))}}function IV(n){return P(_t,null,n.text&&P("a",Object.assign({id:n.textId,className:"fc-list-day-text"},n.navLinkAttrs),n.text),n.sideText&&P("a",Object.assign({"aria-hidden":!0,className:"fc-list-day-side-text"},n.sideNavLinkAttrs),n.sideText))}const MV=It({hour:"numeric",minute:"2-digit",meridiem:"short"});class NV extends ut{render(){let{props:e,context:t}=this,{options:r}=t,{seg:i,timeHeaderId:s,eventHeaderId:o,dateHeaderId:l}=e,c=r.eventTimeFormat||MV;return P(yf,Object.assign({},e,{elTag:"tr",elClasses:["fc-list-event",i.eventRange.def.url&&"fc-event-forced-url"],defaultGenerator:()=>PV(i,t),seg:i,timeText:"",disableDragging:!0,disableResizing:!0}),(d,h)=>P(_t,null,jV(i,c,t,s,l),P("td",{"aria-hidden":!0,className:"fc-list-event-graphic"},P("span",{className:"fc-list-event-dot",style:{borderColor:h.borderColor||h.backgroundColor}})),P(d,{elTag:"td",elClasses:["fc-list-event-title"],elAttrs:{headers:`${o} ${l}`}})))}}function PV(n,e){let t=vy(n,e);return P("a",Object.assign({},t),n.eventRange.def.title)}function jV(n,e,t,r,i){let{options:s}=t;if(s.displayEventTime!==!1){let o=n.eventRange.def,l=n.eventRange.instance,c=!1,d;if(o.allDay?c=!0:lH(n.eventRange.range)?n.isStart?d=fc(n,e,t,null,null,l.range.start,n.end):n.isEnd?d=fc(n,e,t,null,null,n.start,l.range.end):c=!0:d=fc(n,e,t),c){let h={text:t.options.allDayText,view:t.viewApi};return P(Fn,{elTag:"td",elClasses:["fc-list-event-time"],elAttrs:{headers:`${r} ${i}`},renderProps:h,generatorName:"allDayContent",customGenerator:s.allDayContent,defaultGenerator:LV,classNameGenerator:s.allDayClassNames,didMount:s.allDayDidMount,willUnmount:s.allDayWillUnmount})}return P("td",{className:"fc-list-event-time"},d)}return null}function LV(n){return n.text}class FV extends ii{constructor(){super(...arguments),this.computeDateVars=Te(BV),this.eventStoreToSegs=Te(this._eventStoreToSegs),this.state={timeHeaderId:Fs(),eventHeaderId:Fs(),dateHeaderIdRoot:Fs()},this.setRootEl=e=>{e?this.context.registerInteractiveComponent(this,{el:e}):this.context.unregisterInteractiveComponent(this)}}render(){let{props:e,context:t}=this,{dayDates:r,dayRanges:i}=this.computeDateVars(e.dateProfile),s=this.eventStoreToSegs(e.eventStore,e.eventUiBases,i);return P(Dc,{elRef:this.setRootEl,elClasses:["fc-list",t.theme.getClass("table"),t.options.stickyHeaderDates!==!1?"fc-list-sticky":""],viewSpec:t.viewSpec},P(dA,{liquid:!e.isHeightAuto,overflowX:e.isHeightAuto?"visible":"hidden",overflowY:e.isHeightAuto?"visible":"auto"},s.length>0?this.renderSegList(s,r):this.renderEmptyMessage()))}renderEmptyMessage(){let{options:e,viewApi:t}=this.context,r={text:e.noEventsText,view:t};return P(Fn,{elTag:"div",elClasses:["fc-list-empty"],renderProps:r,generatorName:"noEventsContent",customGenerator:e.noEventsContent,defaultGenerator:UV,classNameGenerator:e.noEventsClassNames,didMount:e.noEventsDidMount,willUnmount:e.noEventsWillUnmount},i=>P(i,{elTag:"div",elClasses:["fc-list-empty-cushion"]}))}renderSegList(e,t){let{theme:r,options:i}=this.context,{timeHeaderId:s,eventHeaderId:o,dateHeaderIdRoot:l}=this.state,c=HV(e);return P(Yo,{unit:"day"},(d,h)=>{let p=[];for(let g=0;g<c.length;g+=1){let v=c[g];if(v){let y=Kc(t[g]),_=l+"-"+y;p.push(P(OV,{key:y,cellId:_,dayDate:t[g],todayRange:h})),v=my(v,i.eventOrder);for(let w of v)p.push(P(NV,Object.assign({key:y+":"+w.eventRange.instance.instanceId,seg:w,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,timeHeaderId:s,eventHeaderId:o,dateHeaderId:_},Zi(w,h,d))))}}return P("table",{className:"fc-list-table "+r.getClass("table")},P("thead",null,P("tr",null,P("th",{scope:"col",id:s},i.timeHint),P("th",{scope:"col","aria-hidden":!0}),P("th",{scope:"col",id:o},i.eventHint))),P("tbody",null,p))})}_eventStoreToSegs(e,t,r){return this.eventRangesToSegs(nv(e,t,this.props.dateProfile.activeRange,this.context.options.nextDayThreshold).fg,r)}eventRangesToSegs(e,t){let r=[];for(let i of e)r.push(...this.eventRangeToSegs(i,t));return r}eventRangeToSegs(e,t){let{dateEnv:r}=this.context,{nextDayThreshold:i}=this.context.options,s=e.range,o=e.def.allDay,l,c,d,h=[];for(l=0;l<t.length;l+=1)if(c=$s(s,t[l]),c&&(d={component:this,eventRange:e,start:c.start,end:c.end,isStart:e.isStart&&c.start.valueOf()===s.start.valueOf(),isEnd:e.isEnd&&c.end.valueOf()===s.end.valueOf(),dayIndex:l},h.push(d),!d.isEnd&&!o&&l+1<t.length&&s.end<r.add(t[l+1].start,i))){d.end=s.end,d.isEnd=!0;break}return h}}function UV(n){return n.text}function BV(n){let e=St(n.renderRange.start),t=n.renderRange.end,r=[],i=[];for(;e<t;)r.push(e),i.push({start:e,end:sn(e,1)}),e=sn(e,1);return{dayDates:r,dayRanges:i}}function HV(n){let e=[],t,r;for(t=0;t<n.length;t+=1)r=n[t],(e[r.dayIndex]||(e[r.dayIndex]=[])).push(r);return e}var zV=':root{--fc-list-event-dot-width:10px;--fc-list-event-hover-bg-color:#f5f5f5}.fc-theme-standard .fc-list{border:1px solid var(--fc-border-color)}.fc .fc-list-empty{align-items:center;background-color:var(--fc-neutral-bg-color);display:flex;height:100%;justify-content:center}.fc .fc-list-empty-cushion{margin:5em 0}.fc .fc-list-table{border-style:hidden;width:100%}.fc .fc-list-table tr>*{border-left:0;border-right:0}.fc .fc-list-sticky .fc-list-day>*{background:var(--fc-page-bg-color);position:sticky;top:0}.fc .fc-list-table thead{left:-10000px;position:absolute}.fc .fc-list-table tbody>tr:first-child th{border-top:0}.fc .fc-list-table th{padding:0}.fc .fc-list-day-cushion,.fc .fc-list-table td{padding:8px 14px}.fc .fc-list-day-cushion:after{clear:both;content:"";display:table}.fc-theme-standard .fc-list-day-cushion{background-color:var(--fc-neutral-bg-color)}.fc-direction-ltr .fc-list-day-text,.fc-direction-rtl .fc-list-day-side-text{float:left}.fc-direction-ltr .fc-list-day-side-text,.fc-direction-rtl .fc-list-day-text{float:right}.fc-direction-ltr .fc-list-table .fc-list-event-graphic{padding-right:0}.fc-direction-rtl .fc-list-table .fc-list-event-graphic{padding-left:0}.fc .fc-list-event.fc-event-forced-url{cursor:pointer}.fc .fc-list-event:hover td{background-color:var(--fc-list-event-hover-bg-color)}.fc .fc-list-event-graphic,.fc .fc-list-event-time{white-space:nowrap;width:1px}.fc .fc-list-event-dot{border:calc(var(--fc-list-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-list-event-dot-width)/2);box-sizing:content-box;display:inline-block;height:0;width:0}.fc .fc-list-event-title a{color:inherit;text-decoration:none}.fc .fc-list-event.fc-event-forced-url:hover a{text-decoration:underline}';hf(zV);const $V={listDayFormat:ux,listDaySideFormat:ux,noEventsClassNames:$,noEventsContent:$,noEventsDidMount:$,noEventsWillUnmount:$};function ux(n){return n===!1?null:It(n)}var WV=Ei({name:"@fullcalendar/list",optionRefiners:$V,views:{list:{component:FV,buttonTextKey:"list",listDayFormat:{month:"long",day:"numeric",year:"numeric"}},listDay:{type:"list",duration:{days:1},listDayFormat:{weekday:"long"}},listWeek:{type:"list",duration:{weeks:1},listDayFormat:{weekday:"long"},listDaySideFormat:{month:"long",day:"numeric",year:"numeric"}},listMonth:{type:"list",duration:{month:1},listDaySideFormat:{weekday:"long"}},listYear:{type:"list",duration:{year:1},listDaySideFormat:{weekday:"long"}}}});xy.touchMouseIgnoreWait=500;let lv=0,jh=0,cv=!1;class HA{constructor(e){this.subjectEl=null,this.selector="",this.handleSelector="",this.shouldIgnoreMove=!1,this.shouldWatchScroll=!0,this.isDragging=!1,this.isTouchDragging=!1,this.wasTouchScroll=!1,this.handleMouseDown=t=>{if(!this.shouldIgnoreMouse()&&VV(t)&&this.tryStart(t)){let r=this.createEventFromMouse(t,!0);this.emitter.trigger("pointerdown",r),this.initScrollWatch(r),this.shouldIgnoreMove||document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp)}},this.handleMouseMove=t=>{let r=this.createEventFromMouse(t);this.recordCoords(r),this.emitter.trigger("pointermove",r)},this.handleMouseUp=t=>{document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.emitter.trigger("pointerup",this.createEventFromMouse(t)),this.cleanup()},this.handleTouchStart=t=>{if(this.tryStart(t)){this.isTouchDragging=!0;let r=this.createEventFromTouch(t,!0);this.emitter.trigger("pointerdown",r),this.initScrollWatch(r);let i=t.target;this.shouldIgnoreMove||i.addEventListener("touchmove",this.handleTouchMove),i.addEventListener("touchend",this.handleTouchEnd),i.addEventListener("touchcancel",this.handleTouchEnd),window.addEventListener("scroll",this.handleTouchScroll,!0)}},this.handleTouchMove=t=>{let r=this.createEventFromTouch(t);this.recordCoords(r),this.emitter.trigger("pointermove",r)},this.handleTouchEnd=t=>{if(this.isDragging){let r=t.target;r.removeEventListener("touchmove",this.handleTouchMove),r.removeEventListener("touchend",this.handleTouchEnd),r.removeEventListener("touchcancel",this.handleTouchEnd),window.removeEventListener("scroll",this.handleTouchScroll,!0),this.emitter.trigger("pointerup",this.createEventFromTouch(t)),this.cleanup(),this.isTouchDragging=!1,qV()}},this.handleTouchScroll=()=>{this.wasTouchScroll=!0},this.handleScroll=t=>{if(!this.shouldIgnoreMove){let r=window.scrollX-this.prevScrollX+this.prevPageX,i=window.scrollY-this.prevScrollY+this.prevPageY;this.emitter.trigger("pointermove",{origEvent:t,isTouch:this.isTouchDragging,subjectEl:this.subjectEl,pageX:r,pageY:i,deltaX:r-this.origPageX,deltaY:i-this.origPageY})}},this.containerEl=e,this.emitter=new mf,e.addEventListener("mousedown",this.handleMouseDown),e.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),GV()}destroy(){this.containerEl.removeEventListener("mousedown",this.handleMouseDown),this.containerEl.removeEventListener("touchstart",this.handleTouchStart,{passive:!0}),YV()}tryStart(e){let t=this.querySubjectEl(e),r=e.target;return t&&(!this.handleSelector||Pn(r,this.handleSelector))?(this.subjectEl=t,this.isDragging=!0,this.wasTouchScroll=!1,!0):!1}cleanup(){cv=!1,this.isDragging=!1,this.subjectEl=null,this.destroyScrollWatch()}querySubjectEl(e){return this.selector?Pn(e.target,this.selector):this.containerEl}shouldIgnoreMouse(){return lv||this.isTouchDragging}cancelTouchScroll(){this.isDragging&&(cv=!0)}initScrollWatch(e){this.shouldWatchScroll&&(this.recordCoords(e),window.addEventListener("scroll",this.handleScroll,!0))}recordCoords(e){this.shouldWatchScroll&&(this.prevPageX=e.pageX,this.prevPageY=e.pageY,this.prevScrollX=window.scrollX,this.prevScrollY=window.scrollY)}destroyScrollWatch(){this.shouldWatchScroll&&window.removeEventListener("scroll",this.handleScroll,!0)}createEventFromMouse(e,t){let r=0,i=0;return t?(this.origPageX=e.pageX,this.origPageY=e.pageY):(r=e.pageX-this.origPageX,i=e.pageY-this.origPageY),{origEvent:e,isTouch:!1,subjectEl:this.subjectEl,pageX:e.pageX,pageY:e.pageY,deltaX:r,deltaY:i}}createEventFromTouch(e,t){let r=e.touches,i,s,o=0,l=0;return r&&r.length?(i=r[0].pageX,s=r[0].pageY):(i=e.pageX,s=e.pageY),t?(this.origPageX=i,this.origPageY=s):(o=i-this.origPageX,l=s-this.origPageY),{origEvent:e,isTouch:!0,subjectEl:this.subjectEl,pageX:i,pageY:s,deltaX:o,deltaY:l}}}function VV(n){return n.button===0&&!n.ctrlKey}function qV(){lv+=1,setTimeout(()=>{lv-=1},xy.touchMouseIgnoreWait)}function GV(){jh+=1,jh===1&&window.addEventListener("touchmove",zA,{passive:!1})}function YV(){jh-=1,jh||window.removeEventListener("touchmove",zA,{passive:!1})}function zA(n){cv&&n.preventDefault()}class KV{constructor(){this.isVisible=!1,this.sourceEl=null,this.mirrorEl=null,this.sourceElRect=null,this.parentNode=document.body,this.zIndex=9999,this.revertDuration=0}start(e,t,r){this.sourceEl=e,this.sourceElRect=this.sourceEl.getBoundingClientRect(),this.origScreenX=t-window.scrollX,this.origScreenY=r-window.scrollY,this.deltaX=0,this.deltaY=0,this.updateElPosition()}handleMove(e,t){this.deltaX=e-window.scrollX-this.origScreenX,this.deltaY=t-window.scrollY-this.origScreenY,this.updateElPosition()}setIsVisible(e){e?this.isVisible||(this.mirrorEl&&(this.mirrorEl.style.display=""),this.isVisible=e,this.updateElPosition()):this.isVisible&&(this.mirrorEl&&(this.mirrorEl.style.display="none"),this.isVisible=e)}stop(e,t){let r=()=>{this.cleanup(),t()};e&&this.mirrorEl&&this.isVisible&&this.revertDuration&&(this.deltaX||this.deltaY)?this.doRevertAnimation(r,this.revertDuration):setTimeout(r,0)}doRevertAnimation(e,t){let r=this.mirrorEl,i=this.sourceEl.getBoundingClientRect();r.style.transition="top "+t+"ms,left "+t+"ms",uc(r,{left:i.left,top:i.top}),VU(r,()=>{r.style.transition="",e()})}cleanup(){this.mirrorEl&&(Jv(this.mirrorEl),this.mirrorEl=null),this.sourceEl=null}updateElPosition(){this.sourceEl&&this.isVisible&&uc(this.getMirrorEl(),{left:this.sourceElRect.left+this.deltaX,top:this.sourceElRect.top+this.deltaY})}getMirrorEl(){let e=this.sourceElRect,t=this.mirrorEl;return t||(t=this.mirrorEl=this.sourceEl.cloneNode(!0),t.style.userSelect="none",t.style.webkitUserSelect="none",t.style.pointerEvents="none",t.classList.add("fc-event-dragging"),uc(t,{position:"fixed",zIndex:this.zIndex,visibility:"",boxSizing:"border-box",width:e.right-e.left,height:e.bottom-e.top,right:"auto",bottom:"auto",margin:0}),this.parentNode.appendChild(t)),t}}class $A extends wy{constructor(e,t){super(),this.handleScroll=()=>{this.scrollTop=this.scrollController.getScrollTop(),this.scrollLeft=this.scrollController.getScrollLeft(),this.handleScrollChange()},this.scrollController=e,this.doesListening=t,this.scrollTop=this.origScrollTop=e.getScrollTop(),this.scrollLeft=this.origScrollLeft=e.getScrollLeft(),this.scrollWidth=e.getScrollWidth(),this.scrollHeight=e.getScrollHeight(),this.clientWidth=e.getClientWidth(),this.clientHeight=e.getClientHeight(),this.clientRect=this.computeClientRect(),this.doesListening&&this.getEventTarget().addEventListener("scroll",this.handleScroll)}destroy(){this.doesListening&&this.getEventTarget().removeEventListener("scroll",this.handleScroll)}getScrollTop(){return this.scrollTop}getScrollLeft(){return this.scrollLeft}setScrollTop(e){this.scrollController.setScrollTop(e),this.doesListening||(this.scrollTop=Math.max(Math.min(e,this.getMaxScrollTop()),0),this.handleScrollChange())}setScrollLeft(e){this.scrollController.setScrollLeft(e),this.doesListening||(this.scrollLeft=Math.max(Math.min(e,this.getMaxScrollLeft()),0),this.handleScrollChange())}getClientWidth(){return this.clientWidth}getClientHeight(){return this.clientHeight}getScrollWidth(){return this.scrollWidth}getScrollHeight(){return this.scrollHeight}handleScrollChange(){}}class WA extends $A{constructor(e,t){super(new mz(e),t)}getEventTarget(){return this.scrollController.el}computeClientRect(){return pz(this.scrollController.el)}}class QV extends $A{constructor(e){super(new vz,e)}getEventTarget(){return window}computeClientRect(){return{left:this.scrollLeft,right:this.scrollLeft+this.clientWidth,top:this.scrollTop,bottom:this.scrollTop+this.clientHeight}}handleScrollChange(){this.clientRect=this.computeClientRect()}}const dx=typeof performance=="function"?performance.now:Date.now;class XV{constructor(){this.isEnabled=!0,this.scrollQuery=[window,".fc-scroller"],this.edgeThreshold=50,this.maxVelocity=300,this.pointerScreenX=null,this.pointerScreenY=null,this.isAnimating=!1,this.scrollCaches=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.animate=()=>{if(this.isAnimating){let e=this.computeBestEdge(this.pointerScreenX+window.scrollX,this.pointerScreenY+window.scrollY);if(e){let t=dx();this.handleSide(e,(t-this.msSinceRequest)/1e3),this.requestAnimation(t)}else this.isAnimating=!1}}}start(e,t,r){this.isEnabled&&(this.scrollCaches=this.buildCaches(r),this.pointerScreenX=null,this.pointerScreenY=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.handleMove(e,t))}handleMove(e,t){if(this.isEnabled){let r=e-window.scrollX,i=t-window.scrollY,s=this.pointerScreenY===null?0:i-this.pointerScreenY,o=this.pointerScreenX===null?0:r-this.pointerScreenX;s<0?this.everMovedUp=!0:s>0&&(this.everMovedDown=!0),o<0?this.everMovedLeft=!0:o>0&&(this.everMovedRight=!0),this.pointerScreenX=r,this.pointerScreenY=i,this.isAnimating||(this.isAnimating=!0,this.requestAnimation(dx()))}}stop(){if(this.isEnabled){this.isAnimating=!1;for(let e of this.scrollCaches)e.destroy();this.scrollCaches=null}}requestAnimation(e){this.msSinceRequest=e,requestAnimationFrame(this.animate)}handleSide(e,t){let{scrollCache:r}=e,{edgeThreshold:i}=this,s=i-e.distance,o=s*s/(i*i)*this.maxVelocity*t,l=1;switch(e.name){case"left":l=-1;case"right":r.setScrollLeft(r.getScrollLeft()+o*l);break;case"top":l=-1;case"bottom":r.setScrollTop(r.getScrollTop()+o*l);break}}computeBestEdge(e,t){let{edgeThreshold:r}=this,i=null,s=this.scrollCaches||[];for(let o of s){let l=o.clientRect,c=e-l.left,d=l.right-e,h=t-l.top,p=l.bottom-t;c>=0&&d>=0&&h>=0&&p>=0&&(h<=r&&this.everMovedUp&&o.canScrollUp()&&(!i||i.distance>h)&&(i={scrollCache:o,name:"top",distance:h}),p<=r&&this.everMovedDown&&o.canScrollDown()&&(!i||i.distance>p)&&(i={scrollCache:o,name:"bottom",distance:p}),c<=r&&this.everMovedLeft&&o.canScrollLeft()&&(!i||i.distance>c)&&(i={scrollCache:o,name:"left",distance:c}),d<=r&&this.everMovedRight&&o.canScrollRight()&&(!i||i.distance>d)&&(i={scrollCache:o,name:"right",distance:d}))}return i}buildCaches(e){return this.queryScrollEls(e).map(t=>t===window?new QV(!1):new WA(t,!1))}queryScrollEls(e){let t=[];for(let r of this.scrollQuery)typeof r=="object"?t.push(r):t.push(...Array.prototype.slice.call(e.getRootNode().querySelectorAll(r)));return t}}class Xc extends _z{constructor(e,t){super(e),this.containerEl=e,this.delay=null,this.minDistance=0,this.touchScrollAllowed=!0,this.mirrorNeedsRevert=!1,this.isInteracting=!1,this.isDragging=!1,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,this.delayTimeoutId=null,this.onPointerDown=i=>{this.isDragging||(this.isInteracting=!0,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,qU(document.body),YU(document.body),i.isTouch||i.origEvent.preventDefault(),this.emitter.trigger("pointerdown",i),this.isInteracting&&!this.pointer.shouldIgnoreMove&&(this.mirror.setIsVisible(!1),this.mirror.start(i.subjectEl,i.pageX,i.pageY),this.startDelay(i),this.minDistance||this.handleDistanceSurpassed(i)))},this.onPointerMove=i=>{if(this.isInteracting){if(this.emitter.trigger("pointermove",i),!this.isDistanceSurpassed){let s=this.minDistance,o,{deltaX:l,deltaY:c}=i;o=l*l+c*c,o>=s*s&&this.handleDistanceSurpassed(i)}this.isDragging&&(i.origEvent.type!=="scroll"&&(this.mirror.handleMove(i.pageX,i.pageY),this.autoScroller.handleMove(i.pageX,i.pageY)),this.emitter.trigger("dragmove",i))}},this.onPointerUp=i=>{this.isInteracting&&(this.isInteracting=!1,GU(document.body),KU(document.body),this.emitter.trigger("pointerup",i),this.isDragging&&(this.autoScroller.stop(),this.tryStopDrag(i)),this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null))};let r=this.pointer=new HA(e);r.emitter.on("pointerdown",this.onPointerDown),r.emitter.on("pointermove",this.onPointerMove),r.emitter.on("pointerup",this.onPointerUp),t&&(r.selector=t),this.mirror=new KV,this.autoScroller=new XV}destroy(){this.pointer.destroy(),this.onPointerUp({})}startDelay(e){typeof this.delay=="number"?this.delayTimeoutId=setTimeout(()=>{this.delayTimeoutId=null,this.handleDelayEnd(e)},this.delay):this.handleDelayEnd(e)}handleDelayEnd(e){this.isDelayEnded=!0,this.tryStartDrag(e)}handleDistanceSurpassed(e){this.isDistanceSurpassed=!0,this.tryStartDrag(e)}tryStartDrag(e){this.isDelayEnded&&this.isDistanceSurpassed&&(!this.pointer.wasTouchScroll||this.touchScrollAllowed)&&(this.isDragging=!0,this.mirrorNeedsRevert=!1,this.autoScroller.start(e.pageX,e.pageY,this.containerEl),this.emitter.trigger("dragstart",e),this.touchScrollAllowed===!1&&this.pointer.cancelTouchScroll())}tryStopDrag(e){this.mirror.stop(this.mirrorNeedsRevert,this.stopDrag.bind(this,e))}stopDrag(e){this.isDragging=!1,this.emitter.trigger("dragend",e)}setIgnoreMove(e){this.pointer.shouldIgnoreMove=e}setMirrorIsVisible(e){this.mirror.setIsVisible(e)}setMirrorNeedsRevert(e){this.mirrorNeedsRevert=e}setAutoScrollEnabled(e){this.autoScroller.isEnabled=e}}class ZV{constructor(e){this.el=e,this.origRect=_y(e),this.scrollCaches=eA(e).map(t=>new WA(t,!0))}destroy(){for(let e of this.scrollCaches)e.destroy()}computeLeft(){let e=this.origRect.left;for(let t of this.scrollCaches)e+=t.origScrollLeft-t.getScrollLeft();return e}computeTop(){let e=this.origRect.top;for(let t of this.scrollCaches)e+=t.origScrollTop-t.getScrollTop();return e}isWithinClipping(e,t){let r={left:e,top:t};for(let i of this.scrollCaches)if(!JV(i.getEventTarget())&&!tz(r,i.clientRect))return!1;return!0}}function JV(n){let e=n.tagName;return e==="HTML"||e==="BODY"}class bf{constructor(e,t){this.useSubjectCenter=!1,this.requireInitial=!0,this.disablePointCheck=!1,this.initialHit=null,this.movingHit=null,this.finalHit=null,this.handlePointerDown=r=>{let{dragging:i}=this;this.initialHit=null,this.movingHit=null,this.finalHit=null,this.prepareHits(),this.processFirstCoord(r),this.initialHit||!this.requireInitial?(i.setIgnoreMove(!1),this.emitter.trigger("pointerdown",r)):i.setIgnoreMove(!0)},this.handleDragStart=r=>{this.emitter.trigger("dragstart",r),this.handleMove(r,!0)},this.handleDragMove=r=>{this.emitter.trigger("dragmove",r),this.handleMove(r)},this.handlePointerUp=r=>{this.releaseHits(),this.emitter.trigger("pointerup",r)},this.handleDragEnd=r=>{this.movingHit&&this.emitter.trigger("hitupdate",null,!0,r),this.finalHit=this.movingHit,this.movingHit=null,this.emitter.trigger("dragend",r)},this.droppableStore=t,e.emitter.on("pointerdown",this.handlePointerDown),e.emitter.on("dragstart",this.handleDragStart),e.emitter.on("dragmove",this.handleDragMove),e.emitter.on("pointerup",this.handlePointerUp),e.emitter.on("dragend",this.handleDragEnd),this.dragging=e,this.emitter=new mf}processFirstCoord(e){let t={left:e.pageX,top:e.pageY},r=t,i=e.subjectEl,s;i instanceof HTMLElement&&(s=_y(i),r=nz(r,s));let o=this.initialHit=this.queryHitForOffset(r.left,r.top);if(o){if(this.useSubjectCenter&&s){let l=Zk(s,o.rect);l&&(r=rz(l))}this.coordAdjust=iz(r,t)}else this.coordAdjust={left:0,top:0}}handleMove(e,t){let r=this.queryHitForOffset(e.pageX+this.coordAdjust.left,e.pageY+this.coordAdjust.top);(t||!_f(this.movingHit,r))&&(this.movingHit=r,this.emitter.trigger("hitupdate",r,!1,e))}prepareHits(){this.offsetTrackers=es(this.droppableStore,e=>(e.component.prepareHits(),new ZV(e.el)))}releaseHits(){let{offsetTrackers:e}=this;for(let t in e)e[t].destroy();this.offsetTrackers={}}queryHitForOffset(e,t){let{droppableStore:r,offsetTrackers:i}=this,s=null;for(let o in r){let l=r[o].component,c=i[o];if(c&&c.isWithinClipping(e,t)){let d=c.computeLeft(),h=c.computeTop(),p=e-d,g=t-h,{origRect:v}=c,y=v.right-v.left,_=v.bottom-v.top;if(p>=0&&p<y&&g>=0&&g<_){let w=l.queryHit(p,g,y,_);w&&pf(w.dateProfile.activeRange,w.dateSpan.range)&&(this.disablePointCheck||c.el.contains(c.el.getRootNode().elementFromPoint(p+d-window.scrollX,g+h-window.scrollY)))&&(!s||w.layer>s.layer)&&(w.componentId=o,w.context=l.context,w.rect.left+=d,w.rect.right+=d,w.rect.top+=h,w.rect.bottom+=h,s=w)}}}return s}}function _f(n,e){return!n&&!e?!0:!!n!=!!e?!1:WH(n.dateSpan,e.dateSpan)}function VA(n,e){let t={};for(let r of e.pluginHooks.datePointTransforms)Object.assign(t,r(n,e));return Object.assign(t,e5(n,e.dateEnv)),t}function e5(n,e){return{date:e.toDate(n.range.start),dateStr:e.formatIso(n.range.start,{omitTime:n.allDay}),allDay:n.allDay}}class t5 extends al{constructor(e){super(e),this.handlePointerDown=r=>{let{dragging:i}=this,s=r.origEvent.target;i.setIgnoreMove(!this.component.isValidDateDownEl(s))},this.handleDragEnd=r=>{let{component:i}=this,{pointer:s}=this.dragging;if(!s.wasTouchScroll){let{initialHit:o,finalHit:l}=this.hitDragging;if(o&&l&&_f(o,l)){let{context:c}=i,d=Object.assign(Object.assign({},VA(o.dateSpan,c)),{dayEl:o.dayEl,jsEvent:r.origEvent,view:c.viewApi||c.calendarApi.view});c.emitter.trigger("dateClick",d)}}},this.dragging=new Xc(e.el),this.dragging.autoScroller.isEnabled=!1;let t=this.hitDragging=new bf(this.dragging,yy(e));t.emitter.on("pointerdown",this.handlePointerDown),t.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}}class n5 extends al{constructor(e){super(e),this.dragSelection=null,this.handlePointerDown=o=>{let{component:l,dragging:c}=this,{options:d}=l.context,h=d.selectable&&l.isValidDateDownEl(o.origEvent.target);c.setIgnoreMove(!h),c.delay=o.isTouch?r5(l):null},this.handleDragStart=o=>{this.component.context.calendarApi.unselect(o)},this.handleHitUpdate=(o,l)=>{let{context:c}=this.component,d=null,h=!1;if(o){let p=this.hitDragging.initialHit;o.componentId===p.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(p,o)||(d=i5(p,o,c.pluginHooks.dateSelectionTransformers)),(!d||!Tz(d,o.dateProfile,c))&&(h=!0,d=null)}d?c.dispatch({type:"SELECT_DATES",selection:d}):l||c.dispatch({type:"UNSELECT_DATES"}),h?ey():ty(),l||(this.dragSelection=d)},this.handlePointerUp=o=>{this.dragSelection&&(Vk(this.dragSelection,o,this.component.context),this.dragSelection=null)};let{component:t}=e,{options:r}=t.context,i=this.dragging=new Xc(e.el);i.touchScrollAllowed=!1,i.minDistance=r.selectMinDistance||0,i.autoScroller.isEnabled=r.dragScroll;let s=this.hitDragging=new bf(this.dragging,yy(e));s.emitter.on("pointerdown",this.handlePointerDown),s.emitter.on("dragstart",this.handleDragStart),s.emitter.on("hitupdate",this.handleHitUpdate),s.emitter.on("pointerup",this.handlePointerUp)}destroy(){this.dragging.destroy()}}function r5(n){let{options:e}=n.context,t=e.selectLongPressDelay;return t==null&&(t=e.longPressDelay),t}function i5(n,e,t){let r=n.dateSpan,i=e.dateSpan,s=[r.range.start,r.range.end,i.range.start,i.range.end];s.sort(eB);let o={};for(let l of t){let c=l(n,e);if(c===!1)return null;c&&Object.assign(o,c)}return o.range={start:s[0],end:s[3]},o.allDay=r.allDay,o}class Zc extends al{constructor(e){super(e),this.subjectEl=null,this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=o=>{let l=o.origEvent.target,{component:c,dragging:d}=this,{mirror:h}=d,{options:p}=c.context,g=c.context;this.subjectEl=o.subjectEl;let v=this.subjectSeg=Ga(o.subjectEl),_=(this.eventRange=v.eventRange).instance.instanceId;this.relevantEvents=hy(g.getCurrentData().eventStore,_),d.minDistance=o.isTouch?0:p.eventDragMinDistance,d.delay=o.isTouch&&_!==c.props.eventSelection?o5(c):null,p.fixedMirrorParent?h.parentNode=p.fixedMirrorParent:h.parentNode=Pn(l,".fc"),h.revertDuration=p.dragRevertDuration;let w=c.isValidSegDownEl(l)&&!Pn(l,".fc-event-resizer");d.setIgnoreMove(!w),this.isDragging=w&&o.subjectEl.classList.contains("fc-event-draggable")},this.handleDragStart=o=>{let l=this.component.context,c=this.eventRange,d=c.instance.instanceId;o.isTouch?d!==this.component.props.eventSelection&&l.dispatch({type:"SELECT_EVENT",eventInstanceId:d}):l.dispatch({type:"UNSELECT_EVENT"}),this.isDragging&&(l.calendarApi.unselect(o),l.emitter.trigger("eventDragStart",{el:this.subjectEl,event:new Nt(l,c.def,c.instance),jsEvent:o.origEvent,view:l.viewApi}))},this.handleHitUpdate=(o,l)=>{if(!this.isDragging)return;let c=this.relevantEvents,d=this.hitDragging.initialHit,h=this.component.context,p=null,g=null,v=null,y=!1,_={affectedEvents:c,mutatedEvents:_r(),isEvent:!0};if(o){p=o.context;let w=p.options;h===p||w.editable&&w.droppable?(g=s5(d,o,this.eventRange.instance.range.start,p.getCurrentData().pluginHooks.eventDragMutationMassagers),g&&(v=gy(c,p.getCurrentData().eventUiBases,g,p),_.mutatedEvents=v,lA(_,o.dateProfile,p)||(y=!0,g=null,v=null,_.mutatedEvents=_r()))):p=null}this.displayDrag(p,_),y?ey():ty(),l||(h===p&&_f(d,o)&&(g=null),this.dragging.setMirrorNeedsRevert(!g),this.dragging.setMirrorIsVisible(!o||!this.subjectEl.getRootNode().querySelector(".fc-event-mirror")),this.receivingContext=p,this.validMutation=g,this.mutatedRelevantEvents=v)},this.handlePointerUp=()=>{this.isDragging||this.cleanup()},this.handleDragEnd=o=>{if(this.isDragging){let l=this.component.context,c=l.viewApi,{receivingContext:d,validMutation:h}=this,p=this.eventRange.def,g=this.eventRange.instance,v=new Nt(l,p,g),y=this.relevantEvents,_=this.mutatedRelevantEvents,{finalHit:w}=this.hitDragging;if(this.clearDrag(),l.emitter.trigger("eventDragStop",{el:this.subjectEl,event:v,jsEvent:o.origEvent,view:c}),h){if(d===l){let x=new Nt(l,_.defs[p.defId],g?_.instances[g.instanceId]:null);l.dispatch({type:"MERGE_EVENTS",eventStore:_});let C={oldEvent:v,event:x,relatedEvents:Oo(_,l,g),revert(){l.dispatch({type:"MERGE_EVENTS",eventStore:y})}},T={};for(let R of l.getCurrentData().pluginHooks.eventDropTransformers)Object.assign(T,R(h,l));l.emitter.trigger("eventDrop",Object.assign(Object.assign(Object.assign({},C),T),{el:o.subjectEl,delta:h.datesDelta,jsEvent:o.origEvent,view:c})),l.emitter.trigger("eventChange",C)}else if(d){let x={event:v,relatedEvents:Oo(y,l,g),revert(){l.dispatch({type:"MERGE_EVENTS",eventStore:y})}};l.emitter.trigger("eventLeave",Object.assign(Object.assign({},x),{draggedEl:o.subjectEl,view:c})),l.dispatch({type:"REMOVE_EVENTS",eventStore:y}),l.emitter.trigger("eventRemove",x);let C=_.defs[p.defId],T=_.instances[g.instanceId],R=new Nt(d,C,T);d.dispatch({type:"MERGE_EVENTS",eventStore:_});let D={event:R,relatedEvents:Oo(_,d,T),revert(){d.dispatch({type:"REMOVE_EVENTS",eventStore:_})}};d.emitter.trigger("eventAdd",D),o.isTouch&&d.dispatch({type:"SELECT_EVENT",eventInstanceId:g.instanceId}),d.emitter.trigger("drop",Object.assign(Object.assign({},VA(w.dateSpan,d)),{draggedEl:o.subjectEl,jsEvent:o.origEvent,view:w.context.viewApi})),d.emitter.trigger("eventReceive",Object.assign(Object.assign({},D),{draggedEl:o.subjectEl,view:w.context.viewApi}))}}else l.emitter.trigger("_noEventDrop")}this.cleanup()};let{component:t}=this,{options:r}=t.context,i=this.dragging=new Xc(e.el);i.pointer.selector=Zc.SELECTOR,i.touchScrollAllowed=!1,i.autoScroller.isEnabled=r.dragScroll;let s=this.hitDragging=new bf(this.dragging,rv);s.useSubjectCenter=e.useEventCenter,s.emitter.on("pointerdown",this.handlePointerDown),s.emitter.on("dragstart",this.handleDragStart),s.emitter.on("hitupdate",this.handleHitUpdate),s.emitter.on("pointerup",this.handlePointerUp),s.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}displayDrag(e,t){let r=this.component.context,i=this.receivingContext;i&&i!==e&&(i===r?i.dispatch({type:"SET_EVENT_DRAG",state:{affectedEvents:t.affectedEvents,mutatedEvents:_r(),isEvent:!0}}):i.dispatch({type:"UNSET_EVENT_DRAG"})),e&&e.dispatch({type:"SET_EVENT_DRAG",state:t})}clearDrag(){let e=this.component.context,{receivingContext:t}=this;t&&t.dispatch({type:"UNSET_EVENT_DRAG"}),e!==t&&e.dispatch({type:"UNSET_EVENT_DRAG"})}cleanup(){this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null}}Zc.SELECTOR=".fc-event-draggable, .fc-event-resizable";function s5(n,e,t,r){let i=n.dateSpan,s=e.dateSpan,o=i.range.start,l=s.range.start,c={};i.allDay!==s.allDay&&(c.allDay=s.allDay,c.hasEnd=e.context.options.allDayMaintainDuration,s.allDay?o=St(t):o=t);let d=Pa(o,l,n.context.dateEnv,n.componentId===e.componentId?n.largeUnit:null);d.milliseconds&&(c.allDay=!1);let h={datesDelta:d,standardProps:c};for(let p of r)p(h,n,e);return h}function o5(n){let{options:e}=n.context,t=e.eventLongPressDelay;return t==null&&(t=e.longPressDelay),t}class a5 extends al{constructor(e){super(e),this.draggingSegEl=null,this.draggingSeg=null,this.eventRange=null,this.relevantEvents=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=s=>{let{component:o}=this,l=this.querySegEl(s),c=Ga(l),d=this.eventRange=c.eventRange;this.dragging.minDistance=o.context.options.eventDragMinDistance,this.dragging.setIgnoreMove(!this.component.isValidSegDownEl(s.origEvent.target)||s.isTouch&&this.component.props.eventSelection!==d.instance.instanceId)},this.handleDragStart=s=>{let{context:o}=this.component,l=this.eventRange;this.relevantEvents=hy(o.getCurrentData().eventStore,this.eventRange.instance.instanceId);let c=this.querySegEl(s);this.draggingSegEl=c,this.draggingSeg=Ga(c),o.calendarApi.unselect(),o.emitter.trigger("eventResizeStart",{el:c,event:new Nt(o,l.def,l.instance),jsEvent:s.origEvent,view:o.viewApi})},this.handleHitUpdate=(s,o,l)=>{let{context:c}=this.component,d=this.relevantEvents,h=this.hitDragging.initialHit,p=this.eventRange.instance,g=null,v=null,y=!1,_={affectedEvents:d,mutatedEvents:_r(),isEvent:!0};s&&(s.componentId===h.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(h,s)||(g=l5(h,s,l.subjectEl.classList.contains("fc-event-resizer-start"),p.range))),g&&(v=gy(d,c.getCurrentData().eventUiBases,g,c),_.mutatedEvents=v,lA(_,s.dateProfile,c)||(y=!0,g=null,v=null,_.mutatedEvents=null)),v?c.dispatch({type:"SET_EVENT_RESIZE",state:_}):c.dispatch({type:"UNSET_EVENT_RESIZE"}),y?ey():ty(),o||(g&&_f(h,s)&&(g=null),this.validMutation=g,this.mutatedRelevantEvents=v)},this.handleDragEnd=s=>{let{context:o}=this.component,l=this.eventRange.def,c=this.eventRange.instance,d=new Nt(o,l,c),h=this.relevantEvents,p=this.mutatedRelevantEvents;if(o.emitter.trigger("eventResizeStop",{el:this.draggingSegEl,event:d,jsEvent:s.origEvent,view:o.viewApi}),this.validMutation){let g=new Nt(o,p.defs[l.defId],c?p.instances[c.instanceId]:null);o.dispatch({type:"MERGE_EVENTS",eventStore:p});let v={oldEvent:d,event:g,relatedEvents:Oo(p,o,c),revert(){o.dispatch({type:"MERGE_EVENTS",eventStore:h})}};o.emitter.trigger("eventResize",Object.assign(Object.assign({},v),{el:this.draggingSegEl,startDelta:this.validMutation.startDelta||Ze(0),endDelta:this.validMutation.endDelta||Ze(0),jsEvent:s.origEvent,view:o.viewApi})),o.emitter.trigger("eventChange",v)}else o.emitter.trigger("_noEventResize");this.draggingSeg=null,this.relevantEvents=null,this.validMutation=null};let{component:t}=e,r=this.dragging=new Xc(e.el);r.pointer.selector=".fc-event-resizer",r.touchScrollAllowed=!1,r.autoScroller.isEnabled=t.context.options.dragScroll;let i=this.hitDragging=new bf(this.dragging,yy(e));i.emitter.on("pointerdown",this.handlePointerDown),i.emitter.on("dragstart",this.handleDragStart),i.emitter.on("hitupdate",this.handleHitUpdate),i.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}querySegEl(e){return Pn(e.subjectEl,".fc-event")}}function l5(n,e,t,r){let i=n.context.dateEnv,s=n.dateSpan.range.start,o=e.dateSpan.range.start,l=Pa(s,o,i,n.largeUnit);if(t){if(i.add(r.start,l)<r.end)return{startDelta:l}}else if(i.add(r.end,l)>r.start)return{endDelta:l};return null}class c5{constructor(e){this.context=e,this.isRecentPointerDateSelect=!1,this.matchesCancel=!1,this.matchesEvent=!1,this.onSelect=r=>{r.jsEvent&&(this.isRecentPointerDateSelect=!0)},this.onDocumentPointerDown=r=>{let i=this.context.options.unselectCancel,s=xk(r.origEvent);this.matchesCancel=!!Pn(s,i),this.matchesEvent=!!Pn(s,Zc.SELECTOR)},this.onDocumentPointerUp=r=>{let{context:i}=this,{documentPointer:s}=this,o=i.getCurrentData();if(!s.wasTouchScroll){if(o.dateSelection&&!this.isRecentPointerDateSelect){let l=i.options.unselectAuto;l&&(!l||!this.matchesCancel)&&i.calendarApi.unselect(r)}o.eventSelection&&!this.matchesEvent&&i.dispatch({type:"UNSELECT_EVENT"})}this.isRecentPointerDateSelect=!1};let t=this.documentPointer=new HA(document);t.shouldIgnoreMove=!0,t.shouldWatchScroll=!1,t.emitter.on("pointerdown",this.onDocumentPointerDown),t.emitter.on("pointerup",this.onDocumentPointerUp),e.emitter.on("select",this.onSelect)}destroy(){this.context.emitter.off("select",this.onSelect),this.documentPointer.destroy()}}const u5={fixedMirrorParent:$},d5={dateClick:$,eventDragStart:$,eventDragStop:$,eventDrop:$,eventResizeStart:$,eventResizeStop:$,eventResize:$,drop:$,eventReceive:$,eventLeave:$};xy.dataAttrPrefix="";var h5=Ei({name:"@fullcalendar/interaction",componentInteractions:[t5,n5,Zc,a5],calendarInteractions:[c5],elementDraggingImpl:Xc,optionRefiners:u5,listenerRefiners:d5});function f5({machineId:n,refreshTrigger:e}){const[t,r]=k.useState(!1),[i,s]=k.useState({}),o=K.useRef(null),{entities:l}=Qv(),{entities:c}=Gm(),{machineAvailability:d,loadMachineAvailabilityForDateRange:h,toggleMachineHourAvailability:p,getTaskOccupiedSegments:g}=_i(),{showAlert:v}=is(),y=l.find(D=>D.id===n),_=k.useCallback(D=>{try{const O=g(D);return O&&O.length>0?O:D.scheduled_start_time&&D.scheduled_end_time?[{start:new Date(D.scheduled_start_time),end:new Date(D.scheduled_end_time),duration:(new Date(D.scheduled_end_time).getTime()-new Date(D.scheduled_start_time).getTime())/(1e3*60*60)}]:[]}catch(O){return console.warn("Failed to get task segments:",O),[]}},[g]),w=k.useMemo(()=>{if(!y)return[];const D=[];return c.filter(O=>O.status==="SCHEDULED"&&O.scheduled_machine_id===y.id&&O.scheduled_start_time&&O.scheduled_end_time).forEach(O=>{const M=_(O);M.forEach((I,F)=>{const z=M.length>1;D.push({id:`${O.id}-segment-${F}`,title:`${O.odp_number} - ${O.article_code}${z?` (${F+1}/${M.length})`:""}`,start:I.start,end:I.end,backgroundColor:z?"#8b5cf6":"#3b82f6",borderColor:z?"#7c3aed":"#2563eb",textColor:"#ffffff",extendedProps:{taskId:O.id,odpNumber:O.odp_number,articleCode:O.article_code,quantity:O.quantity,status:O.status,segmentIndex:F,totalSegments:M.length,isSplitTask:z}})})}),D},[y,c,_]),x=k.useMemo(()=>{if(!d||!y)return[];const D=[];return Object.entries(d).forEach(([O,M])=>{if(Array.isArray(M)){const I=M.find(F=>F.machine_id===n);I&&I.unavailable_hours&&(Array.isArray(I.unavailable_hours)?I.unavailable_hours:[]).forEach(z=>{const V=parseInt(z);if(V<6||V>=22)return;const ee=new Date(O);ee.setUTCHours(V,0,0,0);const re=new Date(ee);re.setUTCHours(V+1,0,0,0),D.push({id:`availability-${O}-${z}`,title:"Unavailable",start:ee,end:re,backgroundColor:"#ef4444",borderColor:"#dc2626",textColor:"#ffffff",display:"background",extendedProps:{type:"availability",date:O,hour:parseInt(z)}})})}}),D},[d,n,y]);k.useEffect(()=>{(async()=>{if(n){r(!0);try{const O=new Date,M=new Date(Date.UTC(O.getUTCFullYear(),O.getUTCMonth(),1)),I=new Date(Date.UTC(O.getUTCFullYear(),O.getUTCMonth()+1,0));await h(n,xn(M,"yyyy-MM-dd"),xn(I,"yyyy-MM-dd"))}catch(O){console.error("Failed to load machine availability data:",O)}finally{r(!1)}}})()},[n,e]);const C=k.useCallback(async D=>{const O=D.date,M=xn(O,"yyyy-MM-dd"),I=O.getUTCHours();if(w.some(V=>{const ee=new Date(V.start),re=new Date(V.end),fe=new Date(O);return fe>=ee&&fe<re})){v("Cannot mark time slot as unavailable - it has scheduled tasks","error");return}if(!y)return;const z=`${M}-${I}`;s(V=>({...V,[z]:!0}));try{await p(y.id,M,I)}catch(V){console.error("Failed to toggle machine hour availability:",V),v("An unexpected error occurred.","error")}finally{s(V=>({...V,[z]:!1}))}},[w,v,y,p]),T=k.useCallback(D=>{const O=D.event,M=O.extendedProps;M.type==="availability"?console.log("Availability event clicked:",M):console.log("Scheduled task clicked:",{odpNumber:M.odpNumber,articleCode:M.articleCode,quantity:M.quantity,start:O.start,end:O.end})},[]),R=k.useMemo(()=>({plugins:[VW,RV,WV,h5],initialView:"dayGridMonth",initialDate:new Date,headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},height:"auto",locale:"it",timeZone:"UTC",firstDay:IL.APP.FIRST_DAY_OF_WEEK,slotMinTime:"06:00:00",slotMaxTime:"22:00:00",slotDuration:"01:00:00",slotLabelInterval:"01:00:00",allDaySlot:!1,weekends:!0,editable:!1,selectable:!0,selectMirror:!0,dayMaxEvents:!0,eventDisplay:"block",eventTimeFormat:{hour:"2-digit",minute:"2-digit",meridiem:!1,hour12:!1},dayHeaderFormat:{weekday:"short",day:"numeric"},slotLabelFormat:{hour:"2-digit",minute:"2-digit",meridiem:!1,hour12:!1},buttonText:{today:"Oggi",month:"Mese",week:"Settimana",day:"Giorno"},eventClick:T,dateClick:C,events:[...w,...x]}),[T,C,w,x]);return y?t?E.jsx("div",{className:"loading",children:"Loading calendar data..."}):E.jsx("div",{className:"fullcalendar-container",children:E.jsx(AA,{ref:o,...R})}):E.jsx("div",{className:"loading",children:"Loading machine data..."})}function p5(){const{machineId:n}=Xh(),[e,t]=k.useState(0),{getMachineById:r}=Qv(),{isLoading:i,isInitialized:s}=is(),{init:o,cleanup:l}=uf(),c=r(n);if(k.useEffect(()=>{if(!s){console.log("Initializing main store...");const h=o(),p=new Promise((g,v)=>setTimeout(()=>v(new Error("Initialization timeout")),1e4));Promise.race([h,p]).catch(g=>{console.error("Initialization failed or timed out:",g)})}return()=>{l()}},[o,s,l]),i)return E.jsx("div",{className:"p-1 bg-white rounded shadow-sm border",children:E.jsxs("div",{className:"text-center py-1 text-gray-500 text-[10px]",children:["Caricamento calendario macchina... (Loading: ",i.toString(),", Initialized: ",s.toString(),")"]})});if(!c)return E.jsx("div",{className:"p-1 bg-white rounded shadow-sm border",children:E.jsxs("div",{className:"text-center py-1 text-red-600 text-[10px]",children:["Macchina non trovata (ID: ",n,", Initialized: ",s.toString(),")"]})});const d=()=>{t(h=>h+1)};return E.jsxs("div",{className:"p-1 bg-white rounded shadow-sm border",children:[E.jsx(fU,{title:"Calendario Disponibilità Macchina"}),E.jsx("div",{className:"mb-1",children:E.jsx("h3",{className:"text-[10px] font-semibold text-gray-900",children:c.machine_name})}),!1,E.jsx(pU,{machineId:c.id,currentDate:new Date,onSuccess:d}),E.jsx(f5,{machineId:c.id,refreshTrigger:e})]})}function g5(){const{data:n=[],isLoading:e,error:t}=Kv(),r=iU(),{selectedWorkCenter:i,isInitialized:s,showConfirmDialog:o}=is(),{init:l,cleanup:c}=uf(),d=xi(),h=k.useMemo(()=>i?i===it.BOTH?n:n.filter(y=>y.work_center===i):[],[n,i]);k.useEffect(()=>(s||l(),()=>{c()}),[l,s,c]);const p=k.useMemo(()=>[{header:"Nome Fase",accessorKey:"name"},{header:"Centro di Lavoro",accessorKey:"work_center"},{header:"Reparto",accessorKey:"department"},{header:"Numero Persone",accessorKey:"numero_persone"},{header:"V Stampa",accessorKey:"v_stampa"},{header:"T Setup Stampa (h)",accessorKey:"t_setup_stampa"},{header:"Costo H Stampa",accessorKey:"costo_h_stampa"},{header:"V Conf",accessorKey:"v_conf"},{header:"T Setup Conf (h)",accessorKey:"t_setup_conf"},{header:"Costo H Conf",accessorKey:"costo_h_conf"},{header:"Contenuto Fase",accessorKey:"contenuto_fase"}],[]),g=y=>{d(`/phases/${y.id}/edit`)},v=async y=>{o("Elimina Fase",`Sei sicuro di voler eliminare "${y.name}"? Questa azione non può essere annullata.`,async()=>{try{await r.mutateAsync(y.id),Ho(`Fase "${y.name}" eliminata con successo`)}catch(_){zi(_.message||"Errore durante l'eliminazione della fase")}},"danger")};return e?E.jsx("div",{children:"Caricamento dati fasi..."}):t?E.jsxs("div",{className:"text-center py-2 text-red-600 text-[10px]",children:["Errore nel caricamento delle fasi: ",t.message]}):i?E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("h1",{className:"text-2xl font-semibold text-foreground",children:"Lista Fasi"}),E.jsx(ar,{to:"/phases/new",className:"inline-flex items-center px-4 py-2 border border-border rounded-md text-sm font-medium text-foreground bg-background hover:bg-muted",children:"Aggiungi Fase"})]}),E.jsx(Nv,{columns:p,data:h,onEditRow:g,onDeleteRow:v,enableGlobalSearch:!1})]}):E.jsx("div",{className:"text-center py-2 text-red-600 text-[10px]",children:"Seleziona un centro di lavoro per visualizzare i dati delle fasi."})}function m5({phaseToEdit:n,onSuccess:e}){const{selectedWorkCenter:t}=is(),r=nU(),i=rU(),{handleAsync:s}=zo("PhasesForm"),o=!!n,l=k.useMemo(()=>{const h={...di};return t!==it.BOTH&&(h.sections[0].fields[3].disabled=!0,h.sections[0].fields[3].defaultValue=t,h.sections[0].fields[3].helpText="Il centro di lavoro è impostato in base alla tua selezione di accesso"),h},[t]),c=k.useMemo(()=>({name:n?.name||"",department:n?.department||di.sections[0].fields[1].defaultValue,numero_persone:n?.numero_persone||di.sections[0].fields[2].defaultValue,work_center:n?.work_center||(t===it.BOTH?di.sections[0].fields[3].defaultValue:t),v_stampa:n?.v_stampa||di.sections[1].fields[0].defaultValue,t_setup_stampa:n?.t_setup_stampa||di.sections[1].fields[1].defaultValue,costo_h_stampa:n?.costo_h_stampa||di.sections[1].fields[2].defaultValue,v_conf:n?.v_conf||di.sections[2].fields[0].defaultValue,t_setup_conf:n?.t_setup_conf||di.sections[2].fields[1].defaultValue,costo_h_conf:n?.costo_h_conf||di.sections[2].fields[2].defaultValue,contenuto_fase:n?.contenuto_fase||""}),[t,n]),d=async h=>{await s(async()=>{o?await i.mutateAsync({id:n.id,updates:h}):await r.mutateAsync(h),e&&e(),Ho(o?"Fase aggiornata con successo":"Fase aggiunta con successo")},{context:o?"Update Phase":"Add Phase",fallbackMessage:o?"Aggiornamento fase fallito":"Aggiunta fase fallita"})};return E.jsx(Jh,{config:l,initialData:c,onSubmit:d,onSuccess:e,isEditMode:o})}function hx(){const{id:n}=Xh(),e=xi(),{selectedWorkCenter:t}=is(),{isLoading:r,isInitialized:i,init:s,cleanup:o}=uf(),l=!!n,{data:c,isLoading:d,error:h}=tU(n);return k.useEffect(()=>(i||s(),()=>{o()}),[s,i,o]),k.useEffect(()=>{l&&!r&&!d&&!c&&!h&&e("/phases",{replace:!0})},[l,r,d,c,h,e]),r||l&&d?E.jsx("div",{children:"Caricamento..."}):l&&h?E.jsxs("div",{className:"text-center py-2 text-red-600 text-[10px]",children:["Errore nel caricamento della fase: ",h.message]}):l&&!c?E.jsx("div",{className:"text-center py-2 text-red-600 text-[10px]",children:"Fase non trovata."}):t?E.jsxs("div",{className:"space-y-6",children:[E.jsx("div",{className:"flex items-center justify-between",children:E.jsx("h1",{className:"text-2xl font-semibold text-foreground",children:l?`Modifica Fase: ${c?.name}`:"Aggiungi Nuova Fase"})}),E.jsx(m5,{phaseToEdit:c})]}):E.jsx("div",{className:"text-center py-2 text-red-600 text-[10px]",children:"Seleziona un centro di lavoro per gestire le fasi."})}function v5(){const{selectedWorkCenter:n,showConfirmDialog:e}=Jt(),t=xi(),{data:r=[],isLoading:i,error:s}=cf(),{data:o=[],isLoading:l}=lf(),{data:c=[],isLoading:d}=Kv(),h=eU(),{handleAsync:p}=zo("BacklogListPage");if(s)return E.jsxs("div",{className:"text-center py-2 text-red-600 text-[10px]",children:["Errore nel caricamento degli ordini: ",s.message]});const g=k.useMemo(()=>{if(!n)return[];let x=r;return n!==it.BOTH&&(x=r.filter(C=>C.work_center===n)),x.map(C=>({...C,machine_name:C.scheduled_machine_id?o.find(T=>T.id===C.scheduled_machine_id)?.machine_name||"Macchina non trovata":"Non programmato",phase_name:C.fase?c.find(T=>T.id===C.fase)?.name||"Fase non trovata":"Fase non assegnata",progress:C.progress||0,time_remaining:C.time_remaining||C.duration||0}))},[r,n,o,c]),v=i||l||d,y=k.useMemo(()=>[{header:"Numero ODP",accessorKey:"odp_number",cell:x=>{const C=x.row.original.status,T=x.getValue(),R=C==="SCHEDULED";return E.jsx("span",{className:R?"text-green-600 font-medium":"",children:T})}},{header:"Codice Articolo",accessorKey:"article_code"},{header:"Note ASD",accessorKey:"asd_notes",cell:x=>{const C=x.getValue();return C?E.jsx("div",{className:"max-w-[200px] truncate text-[10px]",title:C,children:C}):"N/A"}},{header:"Nome Cliente",accessorKey:"nome_cliente"},{header:"Quantità",accessorKey:"quantity"},{header:"Quantità Completata",accessorKey:"quantity_completed"},{header:"Altezza Busta (mm)",accessorKey:"bag_height"},{header:"Larghezza Busta (mm)",accessorKey:"bag_width"},{header:"Passo Busta (mm)",accessorKey:"bag_step"},{header:"Lotto Produzione",accessorKey:"production_lot"},{header:"Centro di Lavoro",accessorKey:"work_center"},{header:"Reparto",accessorKey:"department"},{header:"Lati Sigillati",accessorKey:"seal_sides"},{header:"Tipo Prodotto",accessorKey:"product_type"},{header:"Data Consegna",accessorKey:"delivery_date",cell:x=>x.getValue()?xn(new Date(x.getValue()),"yyyy-MM-dd"):"Non impostata"},{header:"Inizio Programmato",accessorKey:"scheduled_start_time",cell:x=>x.getValue()?new Date(x.getValue()).toISOString().replace("T"," ").replace(".000Z",""):"Non programmato"},{header:"Fine Programmata",accessorKey:"scheduled_end_time",cell:x=>x.getValue()?new Date(x.getValue()).toISOString().replace("T"," ").replace(".000Z",""):"Non programmato"},{header:"Codice Cliente Interno",accessorKey:"internal_customer_code"},{header:"Codice Cliente Esterno",accessorKey:"external_customer_code"},{header:"Riferimento Ordine Cliente",accessorKey:"customer_order_ref"},{header:"Note Libere",accessorKey:"user_notes"},{header:"Nome Fase",accessorKey:"phase_name"},{header:"Durata (ore)",accessorKey:"duration",cell:x=>{const C=x.getValue();return typeof C=="number"?C.toFixed(1):C}},{header:"Costo (€)",accessorKey:"cost",cell:x=>{const C=x.getValue();return typeof C=="number"?C.toFixed(1):C}},{header:"Stato",accessorKey:"status"},{header:"Nome Macchina",accessorKey:"machine_name"},{header:"Progresso (%)",accessorKey:"progress",cell:x=>{const C=x.getValue();return typeof C=="number"?`${C}%`:C}},{header:"Tempo Rimanente (ore)",accessorKey:"time_remaining",cell:x=>{const C=x.getValue();return typeof C=="number"?C.toFixed(1):C}},{header:"Material ISP (%)",accessorKey:"material_availability_isp",cell:x=>{const C=x.getValue();if(typeof C!="number")return C||"N/A";const T=C<=39?"bg-gray-300":C<=69?"bg-yellow-400":"bg-green-400";return E.jsx("div",{className:`inline-flex items-center justify-center w-8 h-8 rounded-full ${T} text-black text-[10px] font-medium`,children:C})}},{header:"Material Lotti (%)",accessorKey:"material_availability_lotti",cell:x=>{const C=x.getValue();if(typeof C!="number")return C||"N/A";const T=C<=39?"bg-gray-300":C<=69?"bg-yellow-400":"bg-green-400";return E.jsx("div",{className:`inline-flex items-center justify-center w-8 h-8 rounded-full ${T} text-black text-[10px] font-medium`,children:C})}},{header:"Material Global (%)",accessorKey:"material_availability_global",cell:x=>{const C=x.getValue();if(typeof C!="number")return C||"N/A";const T=C<=39?"bg-gray-300":C<=69?"bg-yellow-400":"bg-green-400";return E.jsx("div",{className:`inline-flex items-center justify-center w-8 h-8 rounded-full ${T} text-black text-[10px] font-medium`,children:C})}}],[]);k.useMemo(()=>y.map(x=>x.accessorKey),[y]);const _=x=>{t(`/backlog/${x.id}/edit`)},w=async x=>{e("Elimina Ordine",`Sei sicuro di voler eliminare "${x.odp_number}"? Questa azione non può essere annullata.`,async()=>{await p(async()=>{await h.mutateAsync(x.id)},{context:"Delete Order",fallbackMessage:"Eliminazione ordine fallita"})},"danger")};return v?E.jsx("div",{children:"Caricamento dati backlog..."}):n?E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("h1",{className:"text-2xl font-semibold text-foreground",children:"Lista Ordini"}),E.jsx(ar,{to:"/backlog/new",className:"inline-flex items-center px-4 py-2 border border-border rounded-md text-sm font-medium text-foreground bg-background hover:bg-muted",children:"Aggiungi Ordine"})]}),E.jsx(Nv,{columns:y,data:g,onEditRow:_,onDeleteRow:w,stickyColumns:["odp_number","article_code"],enableGlobalSearch:!1,enableFiltering:!1})]}):E.jsx("div",{className:"text-center py-2 text-red-600 text-[10px]",children:"Seleziona un centro di lavoro per visualizzare i dati del backlog."})}const y5=({onSuccess:n,orderToEdit:e})=>{const{selectedWorkCenter:t,showConflictDialog:r}=is(),{scheduleTaskFromSlot:i,unscheduleTask:s}=_i(),{calculateProductionMetrics:o,validatePhaseParameters:l,autoDetermineWorkCenter:c,autoDetermineDepartment:d}=mT(),{handleAsync:h}=zo("BacklogForm"),{validateOrder:p}=RL(),g=ZF(),v=JF(),y=ur(),[_,w]=k.useState(null),x=!!e,C=k.useMemo(()=>{const ge={...dU};if(t!==it.BOTH){const Fe=ge.sections[0].fields.find(et=>et.name==="work_center");Fe&&(Fe.disabled=!0,Fe.defaultValue=t,Fe.helpText="Centro di lavoro pre-impostato.")}return ge},[t]),T=k.useMemo(()=>({odp_number:e?.odp_number||"",article_code:e?.article_code||"",work_center:e?.work_center||(t===it.BOTH?"":t),nome_cliente:e?.nome_cliente||"",delivery_date:e?.delivery_date?new Date(e.delivery_date).toISOString().slice(0,16):"",quantity:e?.quantity||"",customer_order_ref:e?.customer_order_ref||"",department:e?.department||"",quantity_completed:e?.quantity_completed||Ot.ORDER.QUANTITY_COMPLETED,production_lot:e?.production_lot||null,bag_height:e?.bag_height||null,bag_width:e?.bag_width||null,bag_step:e?.bag_step||null,seal_sides:e?.seal_sides||null,product_type:e?.product_type||null,internal_customer_code:e?.internal_customer_code||null,external_customer_code:e?.external_customer_code||null,user_notes:e?.user_notes||null,asd_notes:e?.asd_notes||null,material_availability_global:e?.material_availability_global||null,fase:e?.fase||null}),[t,e]),[R,D]=k.useState(T.department),[O,M]=k.useState(T.work_center),[I,F]=k.useState(T.quantity),[z,V]=k.useState(T.bag_step),{phaseSearch:ee,setPhaseSearch:re,isDropdownVisible:fe,setIsDropdownVisible:pe,selectedPhase:ie,setSelectedPhase:ae,filteredPhases:Q,editablePhaseParams:q,setEditablePhaseParams:Y,handlePhaseParamChange:L,handlePhaseSelect:G,handleBlur:ne}=OL(R,O,x?e?.fase:null),le=k.useCallback(()=>{re(""),ae(null),Y({}),w(null)},[re,ae,Y]),ue=k.useCallback((ge,Fe)=>{if(ge){const et=d(ge);Fe("department",et),t===it.BOTH&&Fe("work_center",c(ge)),Fe("fase",""),re(""),ae(null),Y({}),w(null)}},[d,c,t,re,ae,Y]),ce=async ge=>{const Fe=p(ge);if(!Fe.isValid){const qe=Object.entries(Fe.errors).map(([Ee,dt])=>`${{odp_number:"Numero ODP",article_code:"Codice Articolo",work_center:"Centro di Lavoro",nome_cliente:"Nome Cliente",quantity:"Quantità",delivery_date:"Data di Consegna",customer_order_ref:"Riferimento Ordine Cliente",department:"Reparto",bag_height:"Altezza Busta",bag_width:"Larghezza Busta",bag_step:"Passo Busta",seal_sides:"Lati Sigillatura",product_type:"Tipo Prodotto",internal_customer_code:"Codice Cliente Interno",external_customer_code:"Codice Cliente Esterno"}[Ee]||Ee}: ${dt}`);FM(qe);return}const et=ge.fase,xt=ie?.department===Bt.PRINTING;if(et&&(!xt||ge.bag_step)&&(!_?.totals||typeof _.totals.duration!="number"||typeof _.totals.cost!="number")){tc("Calcola le metriche di produzione valide prima di procedere.");return}await h(async()=>{const{phase_search:qe,...Ee}=ge,dt={...Ee,fase:Ee.fase===""?null:Ee.fase,scheduled_machine_id:Ee.scheduled_machine_id===""?null:Ee.scheduled_machine_id,production_lot:Ee.production_lot===""?null:Ee.production_lot,internal_customer_code:Ee.internal_customer_code===""?null:Ee.internal_customer_code,external_customer_code:Ee.external_customer_code===""?null:Ee.external_customer_code,user_notes:Ee.user_notes===""?null:Ee.user_notes,asd_notes:Ee.asd_notes===""?null:Ee.asd_notes,material_availability_global:Ee.material_availability_global===""?null:Ee.material_availability_global,bag_height:Ee.bag_height===""?null:Ee.bag_height,bag_width:Ee.bag_width===""?null:Ee.bag_width,bag_step:Ee.bag_step===""?null:Ee.bag_step,seal_sides:Ee.seal_sides===""?null:Ee.seal_sides,product_type:Ee.product_type===""?null:Ee.product_type};let Ue;if(x){const X=_?.totals?.duration||e.duration,ye=e.quantity_completed/e.quantity||0,Be=X*(1-ye);if(e.scheduled_machine_id&&e.scheduled_start_time){console.log("🔄 EDIT FLOW: Starting rescheduling for task",e.id),console.log("📊 EDIT FLOW: Original duration:",e.duration,"New duration:",X);const je=e.duration,be=X-je;if(Math.abs(be)<.01){console.log("📊 SCENARIO X: Duration unchanged, skipping rescheduling");const we={...dt,duration:X,cost:_?.totals?.cost||null};Ue=await v.mutateAsync({id:e.id,updates:we})}else if(be>0){console.log("📈 SCENARIO Y: Duration increased, using standard rescheduling");const we=new Date(e.scheduled_start_time),Ie=we.getUTCHours(),$e=we.getUTCMinutes(),We=new Date(Date.UTC(we.getUTCFullYear(),we.getUTCMonth(),we.getUTCDate()));console.log("📅 EDIT FLOW: Start date:",we.toISOString()),console.log("⏰ EDIT FLOW: Hour:",Ie,"Minute:",$e),console.log("📆 EDIT FLOW: Current date:",We.toISOString());const ot={duration:X};console.log("💾 EDIT FLOW: Updating task with new duration:",ot),await v.mutateAsync({id:e.id,updates:ot}),await new Promise(Ke=>setTimeout(Ke,100));const{getOrderById:ft}=Gm.getState(),wr=ft(e.id);console.log("🔍 EDIT FLOW: Task duration after update:",wr?.duration),console.log("🔄 EDIT FLOW: Unscheduling task first"),await s(e.id,y),await new Promise(Ke=>setTimeout(Ke,100));const yt={id:e.scheduled_machine_id};console.log("🎯 EDIT FLOW: Calling scheduleTaskFromSlot with:",{taskId:e.id,machine:yt,currentDate:We.toISOString(),hour:Ie,minute:$e,timeRemaining:Be});const at=await i(e.id,yt,We,Ie,$e,Be,y);if(console.log("📋 EDIT FLOW: scheduleTaskFromSlot result:",at),at?.conflict){console.log("⚠️ EDIT FLOW: Conflict detected, showing dialog");const Ke={...at,schedulingParams:{taskId:e.id,machine:yt,currentDate:We,hour:Ie,minute:$e,newDuration:Be,originalConflict:at}};r(Ke);return}else if(at?.error){console.log("❌ EDIT FLOW: Error:",at.error),zi(at.error);return}else console.log("✅ EDIT FLOW: Scheduling successful");const Yt=at?.updatedTask;console.log("📋 EDIT FLOW: Updated task from scheduling result:",Yt);const Ve={...dt,duration:X,cost:_?.totals?.cost||null,scheduled_start_time:Yt?.scheduled_start_time||we.toISOString(),scheduled_end_time:Yt?.scheduled_end_time||new Date(we.getTime()+X*36e5).toISOString(),description:Yt?.description||e.description};console.log("💾 EDIT FLOW: Final order data to save:",Ve),Ue=await v.mutateAsync({id:e.id,updates:Ve}),console.log("✅ EDIT FLOW: Final update completed:",Ue)}else{console.log("📉 SCENARIO Z: Duration decreased, using adjacent task rescheduling");const we=await Pe(e.id,X,Be,dt,_?.totals?.cost||null,y,v,i,s,r);if(we?.error){console.log("❌ SCENARIO Z: Error:",we.error),zi(we.error);return}Ue=we.updatedOrder,console.log("✅ SCENARIO Z: Duration decrease rescheduling completed:",Ue)}}else{const je={...dt,duration:X,cost:_?.totals?.cost||null};Ue=await v.mutateAsync({id:e.id,updates:je})}}else{const X={...dt,duration:_?.totals?.duration||null,cost:_?.totals?.cost||null,status:"NOT SCHEDULED"};Ue=await g.mutateAsync(X)}n&&n(),le(),Ho(x?"Ordine aggiornato con successo":"Ordine aggiunto con successo")},{context:x?"Aggiorna Ordine":"Aggiungi Ordine",fallbackMessage:x?"Aggiornamento ordine fallito":"Aggiunta ordine fallita"})},Ce=()=>{if(!ie){tc("Seleziona una fase prima di calcolare.");return}if(!I){tc("Inserisci la quantità per calcolare.");return}if(ie.department===Bt.PRINTING&&!z){tc("Inserisci il passo busta per calcolare la stampa.");return}const ge={...ie,...q},Fe=l(ge);if(!Fe.isValid){zi(Fe.error),w(null);return}const et=ie.department===Bt.PRINTING?z:null,xt=o(ge,I,et);if(!xt||typeof xt.totals?.duration!="number"||typeof xt.totals?.cost!="number"){zi("Errore nel calcolo. Verifica i parametri della fase."),w(null);return}w(xt)},se=ge=>q[ge]??ie[ge]??"",Pe=async(ge,Fe,et,xt,on,qe,Ee,dt,Ue,X,ye)=>{try{console.log("📉 SCENARIO Z: Starting duration decrease rescheduling for task",ge);const{getOrderById:Be,getOdpOrders:je}=Gm.getState(),be=Be(ge);if(!be)return{error:"Task not found"};const we=new Date(be.scheduled_start_time),Ie=we.getUTCHours(),$e=we.getUTCMinutes(),We=new Date(Date.UTC(we.getUTCFullYear(),we.getUTCMonth(),we.getUTCDate())),ot={id:be.scheduled_machine_id};console.log("📅 SCENARIO Z: Current task start:",we.toISOString()),console.log("📅 SCENARIO Z: New time remaining:",et);const ft=new Date(be.scheduled_end_time);console.log("📅 SCENARIO Z: Current end time for task A (from DB):",ft.toISOString());const wr=je(),yt=[];let at=ft;for(console.log("🔍 SCENARIO Z: Starting to find chain of adjacent tasks...");;){const Yt=wr.find(Ve=>{if(Ve.id===ge||!Ve.scheduled_machine_id||!Ve.scheduled_start_time||Ve.status!=="SCHEDULED"||Ve.scheduled_machine_id!==be.scheduled_machine_id||yt.some(En=>En.id===Ve.id))return!1;const Ke=new Date(Ve.scheduled_start_time),Gn=Math.abs(Ke.getTime()-at.getTime())/(1e3*60);return console.log("🔍 SCENARIO Z: Checking task",Ve.odp_number,"start:",Ke.toISOString(),"diff:",Gn,"minutes","against end time:",at.toISOString()),Gn<=120});if(Yt)console.log("🔗 SCENARIO Z: Found adjacent task in chain:",Yt.odp_number),yt.push(Yt),at=new Date(Yt.scheduled_end_time),console.log("📅 SCENARIO Z: Next task end time for chain:",at.toISOString()),console.log("🔄 SCENARIO Z: Continuing to search for more adjacent tasks...");else{console.log("🛑 SCENARIO Z: No more adjacent tasks found, stopping chain search");break}}if(yt.length>0){console.log("🔗 SCENARIO Z: Found chain of",yt.length,"adjacent tasks:",yt.map(de=>de.odp_number)),console.log("🔄 SCENARIO Z: Step 2 - Rescheduling task A");const Yt={duration:Fe};await Ee.mutateAsync({id:ge,updates:Yt}),await new Promise(de=>setTimeout(de,100)),await Ue(ge,qe),await new Promise(de=>setTimeout(de,100));const Ve=await dt(ge,ot,We,Ie,$e,et,qe);if(Ve?.conflict){console.log("⚠️ SCENARIO Z: Conflict detected for task A, showing dialog");const de={...Ve,schedulingParams:{taskId:ge,machine:ot,currentDate:We,hour:Ie,minute:$e,newDuration:et,originalConflict:Ve}};return X(de),{error:"Conflict detected for task A"}}else if(Ve?.error)return console.log("❌ SCENARIO Z: Error rescheduling task A:",Ve.error),{error:Ve.error};console.log("✅ SCENARIO Z: Task A rescheduled successfully"),console.log("🔄 SCENARIO Z: Step 3 - Rescheduling chain of",yt.length,"tasks");let Ke=new Date(Ve.schedulingResult.endTime);const Gn=[];for(let de=0;de<yt.length;de++){const Le=yt[de];console.log(`🔄 SCENARIO Z: Rescheduling chain task ${de+1}/${yt.length}:`,Le.odp_number);const Qe=Ke.getUTCHours(),nt=Ke.getUTCMinutes(),Vt=new Date(Date.UTC(Ke.getUTCFullYear(),Ke.getUTCMonth(),Ke.getUTCDate()));console.log("📅 SCENARIO Z: Chain task new start time:",Ke.toISOString()),console.log("⏰ SCENARIO Z: Chain task new hour:",Qe,"minute:",nt);const ht=Le.time_remaining||Le.duration||1;console.log("📊 SCENARIO Z: Chain task time remaining:",ht),await Ue(Le.id,qe),await new Promise(Qt=>setTimeout(Qt,100));const Me=await dt(Le.id,ot,Vt,Qe,nt,ht,qe);if(Me?.conflict){console.log("⚠️ SCENARIO Z: Conflict detected for chain task",Le.odp_number,", showing dialog");const Qt={...Me,schedulingParams:{taskId:Le.id,machine:ot,currentDate:Vt,hour:Qe,minute:nt,newDuration:ht,originalConflict:Me}};return X(Qt),{error:`Conflict detected for chain task ${Le.odp_number}`}}else if(Me?.error)return console.log("❌ SCENARIO Z: Error rescheduling chain task",Le.odp_number,":",Me.error),{error:`Error rescheduling chain task ${Le.odp_number}: ${Me.error}`};console.log("✅ SCENARIO Z: Chain task",Le.odp_number,"rescheduled successfully"),Gn.push(Me),Ke=new Date(Me.schedulingResult.endTime),console.log("📅 SCENARIO Z: Updated end time for next chain task:",Ke.toISOString())}console.log("✅ SCENARIO Z: All",yt.length,"chain tasks rescheduled successfully");const En=Ve?.updatedTask,tt={...xt,duration:Fe,cost:on,scheduled_start_time:En?.scheduled_start_time||we.toISOString(),scheduled_end_time:En?.scheduled_end_time||new Date(we.getTime()+Fe*36e5).toISOString(),description:En?.description||be.description},Kt=await Ee.mutateAsync({id:ge,updates:tt});return console.log("✅ SCENARIO Z: Task A and",yt.length,"chain tasks rescheduled successfully"),{updatedOrder:Kt}}else{console.log("📊 SCENARIO Z: No adjacent task found, using standard rescheduling");const Yt={duration:Fe};await Ee.mutateAsync({id:ge,updates:Yt}),await new Promise(tt=>setTimeout(tt,100)),await Ue(ge,qe),await new Promise(tt=>setTimeout(tt,100));const Ve=await dt(ge,ot,We,Ie,$e,et,qe);if(Ve?.conflict){console.log("⚠️ SCENARIO Z: Conflict detected, showing dialog");const tt={...Ve,schedulingParams:{taskId:ge,machine:ot,currentDate:We,hour:Ie,minute:$e,newDuration:et,originalConflict:Ve}};return X(tt),{error:"Conflict detected"}}else if(Ve?.error)return console.log("❌ SCENARIO Z: Error:",Ve.error),{error:Ve.error};const Ke=Ve?.updatedTask,Gn={...xt,duration:Fe,cost:on,scheduled_start_time:Ke?.scheduled_start_time||we.toISOString(),scheduled_end_time:Ke?.scheduled_end_time||new Date(we.getTime()+Fe*36e5).toISOString(),description:Ke?.description||be.description};return{updatedOrder:await Ee.mutateAsync({id:ge,updates:Gn})}}}catch(Be){return console.error("❌ SCENARIO Z: Error in handleDurationDecreaseRescheduling:",Be),{error:Be.message||"Error during duration decrease rescheduling"}}},ze=()=>ie?ie.department===Bt.PRINTING?[{name:"v_stampa",label:"Velocità Stampa:",unit:"mt/h"},{name:"t_setup_stampa",label:"Setup Stampa:",unit:"h"},{name:"costo_h_stampa",label:"Costo Stampa:",unit:"€/h"}]:[{name:"v_conf",label:"Velocità Confezionamento:",unit:"pz/h"},{name:"t_setup_conf",label:"Setup Confezionamento:",unit:"h"},{name:"costo_h_conf",label:"Costo Confezionamento:",unit:"€/h"}]:[],Wt=k.useMemo(()=>({article_code:(ge,{watch:Fe,setValue:et,getValues:xt,register:on})=>E.jsx(yi,{type:"text",...on(ge.name,{...ge.validation,onChange:qe=>{ge.validation?.onChange&&ge.validation.onChange(qe),ue(qe.target.value,et)}}),placeholder:ge.placeholder,disabled:ge.disabled,className:ge.className}),phase_search:(ge,{watch:Fe,setValue:et,getValues:xt,register:on})=>{const qe=Fe("department"),Ee=Fe("work_center"),dt=Fe("quantity"),Ue=Fe("bag_step");return k.useEffect(()=>{qe!==R&&D(qe),Ee!==O&&M(Ee),dt!==I&&F(dt),Ue!==z&&V(Ue)},[qe,Ee,dt,Ue,R,O,I,z]),E.jsxs("div",{className:"relative",children:[E.jsx(yi,{type:"text",value:ee,onChange:X=>re(X.target.value),onFocus:()=>pe(!0),onBlur:ne,placeholder:"Cerca fase di produzione..."}),E.jsx("input",{type:"hidden",...on("fase")}),fe&&Q.length>0&&E.jsx("div",{className:"absolute top-full left-0 right-0 bg-white border border-gray-300 rounded-md shadow-lg z-10 max-h-60 overflow-y-auto",children:Q.map(X=>E.jsxs("div",{className:"px-3 py-1 hover:bg-gray-100 cursor-pointer border-b border-gray-100 last:border-b-0",onMouseDown:()=>{G(X,et,()=>{}),w(null)},children:[E.jsx("div",{className:"text-[10px] font-medium",children:X.name}),E.jsx("div",{className:"text-[10px] text-gray-600",children:X.contenuto_fase})]},X.id))})]})},phase_parameters:()=>ie?E.jsxs("div",{className:"space-y-2",children:[E.jsx("h3",{className:"text-[10px] font-semibold text-gray-900 border-b pb-2",children:"Parametri Fase Selezionata"}),E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:ze().map(ge=>E.jsxs("div",{className:"space-y-2",children:[E.jsx(bi,{htmlFor:ge.name,children:ge.label}),E.jsxs("div",{className:"flex items-center space-x-2",children:[E.jsx(yi,{type:"number",id:ge.name,value:se(ge.name),onChange:Fe=>L(ge.name,Fe.target.value)}),E.jsx("span",{className:"text-[10px] text-gray-500 whitespace-nowrap",children:ge.unit})]})]},ge.name))})]}):null,calculation_results:()=>_?.totals?E.jsxs("div",{className:"space-y-2",children:[E.jsx("h3",{className:"text-[10px] font-semibold text-gray-900 border-b pb-2",children:"Risultati Calcolo Produzione"}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[E.jsxs("div",{className:"space-y-2",children:[E.jsx(bi,{children:"Durata Totale (ore):"}),E.jsx("div",{className:"text-[10px] font-semibold text-navy-800",children:_.totals.duration.toFixed(2)})]}),E.jsxs("div",{className:"space-y-2",children:[E.jsx(bi,{children:"Costo Totale (€):"}),E.jsx("div",{className:"text-[10px] font-semibold text-green-600",children:_.totals.cost.toFixed(2)})]})]})]}):null}),[ee,re,fe,pe,Q,ne,G,ie,se,L,ze,_,ue]),Gt=k.useMemo(()=>E.jsx("div",{className:"flex justify-end space-x-4 pt-6",children:E.jsx(Ki,{type:"button",variant:"outline",onClick:Ce,disabled:!ie,children:"Calcola"})}),[ie,Ce]),qn=g.isPending||v.isPending;return E.jsx(Jh,{config:C,initialData:T,onSubmit:ce,onSuccess:n,isEditMode:x,isLoading:qn,customActions:Gt,customFieldRenderers:Wt})},b5=(n,e)=>{const t=s=>{w5(s)},r=s=>{S5(s)},i=s=>{x5(s)};return rt.setupRealtimeSubscriptions(t,r,i)},tm=(n,e)=>{const{realtimeChannel:t}=n();t&&(rt.cleanupRealtimeSubscriptions(t),e({realtimeChannel:null}))};let Ha=null;const _5=()=>{typeof window<"u"&&Ha&&(window.removeEventListener("beforeunload",Ha),Ha=null)},w5=(n,e,t)=>{const{eventType:r,newRecord:i,oldRecord:s}=n,{updateSplitTaskInfo:o}=_i.getState();(r==="INSERT"&&i.status==="SCHEDULED"||r==="UPDATE")&&o(i.id,i),console.log(`Orders ${r.toLowerCase()}:`,i||s)},S5=(n,e,t)=>{const{eventType:r,newRecord:i,oldRecord:s}=n;console.log(`Machines ${r.toLowerCase()}:`,i||s)},x5=(n,e,t)=>{const{eventType:r,newRecord:i,oldRecord:s}=n;console.log(`Phases ${r.toLowerCase()}:`,i||s)},wf=sl((n,e)=>({isInitializing:!1,realtimeChannel:null,init:async()=>{const{getInitializationState:t,setLoading:r,setInitialized:i,showAlert:s}=Jt.getState(),{initializeEmptyMachineAvailability:o}=_i.getState();if(!t()){if(e().isInitializing)return new Promise(l=>{const c=()=>{t()?l():setTimeout(c,100)};c()});n({isInitializing:!0}),r(!0);try{let l=!1,c=0;const d=3;for(;!l&&c<d;)try{await rt.init(),l=!0}catch(h){c++;const p=Qr(h,"API Service Initialization");if(c>=d)throw r(!1),i(!1),s("Unable to connect to the server. Please check your internet connection and refresh the page.","error"),new Xe("API service initialization failed after multiple attempts","CRITICAL_INIT_ERROR",503,p,"Store Initialization");const g=Math.min(1e3*Math.pow(2,c-1),1e4);await new Promise(v=>setTimeout(v,g)),s(`Connection attempt ${c} failed. Retrying...`,"warning")}try{o();const{restoreSplitTaskInfo:h,migrateExistingTasksToSegmentFormat:p}=_i.getState();h(),await p();const{realtimeChannel:g}=e();if(!g)try{const v=b5(n,e);v&&(n({realtimeChannel:v}),typeof window<"u"&&!Ha&&(Ha=()=>{tm(e,n)},window.addEventListener("beforeunload",Ha)))}catch(v){const y=Qr(v,"Real-time Subscriptions Setup");s("Warning: Real-time updates are not available. Data may not update automatically.","warning")}r(!1),i(!0),n({isInitializing:!1}),s("Application initialized successfully. Data will be loaded via React Query.","success")}catch(h){const p=Qr(h,"Data Processing");throw r(!1),i(!1),n({isInitializing:!1}),s("Failed to process application data. Please refresh the page.","error"),p}}catch(l){const c=l instanceof Xe?l:Qr(l);throw r(!1),i(!1),n({isInitializing:!1}),c.code==="CRITICAL_INIT_ERROR"?s("Critical initialization error. Please contact support if the problem persists.","error"):s("Application initialization failed. Please refresh the page or contact support.","error"),c}}},refreshData:()=>{console.warn("refreshData is deprecated. Use React Query invalidation instead.")},debugData:()=>{const{getMachines:t}=Vi.getState(),{getOdpOrders:r}=rn.getState(),{getPhases:i}=Ma.getState(),s=t().map(c=>c.id);s.filter((c,d)=>s.indexOf(c)!==d);const o=r().map(c=>c.id);o.filter((c,d)=>o.indexOf(c)!==d);const l=i().map(c=>c.id);l.filter((c,d)=>l.indexOf(c)!==d)},cleanupDuplicates:()=>{const{cleanupDuplicateMachines:t}=Vi.getState(),{cleanupDuplicateOrders:r}=rn.getState(),{cleanupDuplicatePhases:i}=Ma.getState();t(),r(),i()},reset:()=>{tm(e,n);const{reset:t}=Vi.getState(),{reset:r}=rn.getState(),{reset:i}=Ma.getState(),{reset:s}=_i.getState(),{reset:o}=Jt.getState();t(),r(),i(),s(),o(),n({isInitializing:!1,realtimeChannel:null})},cleanup:()=>{tm(e,n),_5()},getState:()=>{const{getMachines:t}=Vi.getState(),{getOdpOrders:r}=rn.getState(),{getPhases:i}=Ma.getState(),{getLoadingState:s,getInitializationState:o}=Jt.getState();return{machines:t(),odpOrders:r(),phases:i(),machineAvailability:_i.getState().getMachineAvailabilityState(),isLoading:s(),isInitialized:o()}}}));function fx(){const{id:n}=Xh(),e=xi(),{data:t,isLoading:r,error:i}=XF(n),{selectedWorkCenter:s}=Jt(),{isLoading:o,isInitialized:l,init:c,cleanup:d}=wf(),h=!!n;return k.useEffect(()=>(l||c(),()=>{d()}),[c,l,d]),k.useEffect(()=>{h&&!r&&!t&&i&&e("/backlog",{replace:!0})},[h,r,t,e,i]),r?E.jsx("div",{children:"Caricamento..."}):h&&!t?E.jsx("div",{className:"text-center py-2 text-red-600 text-[10px]",children:"Ordine non trovato."}):s?E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("h1",{className:"text-2xl font-semibold text-foreground",children:h?`Modifica Ordine: ${t?.odp_number}`:"Aggiungi Nuovo Ordine"}),h&&E.jsx(Ki,{variant:"outline",onClick:()=>e("/scheduler"),children:"← Torna al Programmatore"})]}),E.jsx(y5,{onSuccess:h?()=>e("/scheduler"):void 0,orderToEdit:t})]}):E.jsx("div",{className:"text-center py-2 text-red-600 text-[10px]",children:"Seleziona un centro di lavoro per gestire gli ordini del backlog."})}const Sf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ll(n){const e=Object.prototype.toString.call(n);return e==="[object Window]"||e==="[object global]"}function Oy(n){return"nodeType"in n}function Vn(n){var e,t;return n?ll(n)?n:Oy(n)&&(e=(t=n.ownerDocument)==null?void 0:t.defaultView)!=null?e:window:window}function Iy(n){const{Document:e}=Vn(n);return n instanceof e}function Jc(n){return ll(n)?!1:n instanceof Vn(n).HTMLElement}function qA(n){return n instanceof Vn(n).SVGElement}function cl(n){return n?ll(n)?n.document:Oy(n)?Iy(n)?n:Jc(n)||qA(n)?n.ownerDocument:document:document:document}const ts=Sf?k.useLayoutEffect:k.useEffect;function xf(n){const e=k.useRef(n);return ts(()=>{e.current=n}),k.useCallback(function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}function E5(){const n=k.useRef(null),e=k.useCallback((r,i)=>{n.current=setInterval(r,i)},[]),t=k.useCallback(()=>{n.current!==null&&(clearInterval(n.current),n.current=null)},[]);return[e,t]}function Oc(n,e){e===void 0&&(e=[n]);const t=k.useRef(n);return ts(()=>{t.current!==n&&(t.current=n)},e),t}function eu(n,e){const t=k.useRef();return k.useMemo(()=>{const r=n(t.current);return t.current=r,r},[...e])}function Lh(n){const e=xf(n),t=k.useRef(null),r=k.useCallback(i=>{i!==t.current&&e?.(i,t.current),t.current=i},[]);return[t,r]}function Fh(n){const e=k.useRef();return k.useEffect(()=>{e.current=n},[n]),e.current}let nm={};function Ef(n,e){return k.useMemo(()=>{if(e)return e;const t=nm[n]==null?0:nm[n]+1;return nm[n]=t,n+"-"+t},[n,e])}function GA(n){return function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return r.reduce((s,o)=>{const l=Object.entries(o);for(const[c,d]of l){const h=s[c];h!=null&&(s[c]=h+n*d)}return s},{...e})}}const za=GA(1),Uh=GA(-1);function C5(n){return"clientX"in n&&"clientY"in n}function My(n){if(!n)return!1;const{KeyboardEvent:e}=Vn(n.target);return e&&n instanceof e}function T5(n){if(!n)return!1;const{TouchEvent:e}=Vn(n.target);return e&&n instanceof e}function Bh(n){if(T5(n)){if(n.touches&&n.touches.length){const{clientX:e,clientY:t}=n.touches[0];return{x:e,y:t}}else if(n.changedTouches&&n.changedTouches.length){const{clientX:e,clientY:t}=n.changedTouches[0];return{x:e,y:t}}}return C5(n)?{x:n.clientX,y:n.clientY}:null}const Ic=Object.freeze({Translate:{toString(n){if(!n)return;const{x:e,y:t}=n;return"translate3d("+(e?Math.round(e):0)+"px, "+(t?Math.round(t):0)+"px, 0)"}},Scale:{toString(n){if(!n)return;const{scaleX:e,scaleY:t}=n;return"scaleX("+e+") scaleY("+t+")"}},Transform:{toString(n){if(n)return[Ic.Translate.toString(n),Ic.Scale.toString(n)].join(" ")}},Transition:{toString(n){let{property:e,duration:t,easing:r}=n;return e+" "+t+"ms "+r}}}),px="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function k5(n){return n.matches(px)?n:n.querySelector(px)}const A5={display:"none"};function D5(n){let{id:e,value:t}=n;return K.createElement("div",{id:e,style:A5},t)}function R5(n){let{id:e,announcement:t,ariaLiveType:r="assertive"}=n;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return K.createElement("div",{id:e,style:i,role:"status","aria-live":r,"aria-atomic":!0},t)}function O5(){const[n,e]=k.useState("");return{announce:k.useCallback(r=>{r!=null&&e(r)},[]),announcement:n}}const YA=k.createContext(null);function I5(n){const e=k.useContext(YA);k.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(n)},[n,e])}function M5(){const[n]=k.useState(()=>new Set),e=k.useCallback(r=>(n.add(r),()=>n.delete(r)),[n]);return[k.useCallback(r=>{let{type:i,event:s}=r;n.forEach(o=>{var l;return(l=o[i])==null?void 0:l.call(o,s)})},[n]),e]}const N5={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},P5={onDragStart(n){let{active:e}=n;return"Picked up draggable item "+e.id+"."},onDragOver(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was moved over droppable area "+t.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was dropped over droppable area "+t.id:"Draggable item "+e.id+" was dropped."},onDragCancel(n){let{active:e}=n;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function j5(n){let{announcements:e=P5,container:t,hiddenTextDescribedById:r,screenReaderInstructions:i=N5}=n;const{announce:s,announcement:o}=O5(),l=Ef("DndLiveRegion"),[c,d]=k.useState(!1);if(k.useEffect(()=>{d(!0)},[]),I5(k.useMemo(()=>({onDragStart(p){let{active:g}=p;s(e.onDragStart({active:g}))},onDragMove(p){let{active:g,over:v}=p;e.onDragMove&&s(e.onDragMove({active:g,over:v}))},onDragOver(p){let{active:g,over:v}=p;s(e.onDragOver({active:g,over:v}))},onDragEnd(p){let{active:g,over:v}=p;s(e.onDragEnd({active:g,over:v}))},onDragCancel(p){let{active:g,over:v}=p;s(e.onDragCancel({active:g,over:v}))}}),[s,e])),!c)return null;const h=K.createElement(K.Fragment,null,K.createElement(D5,{id:r,value:i.draggable}),K.createElement(R5,{id:l,announcement:o}));return t?Hi.createPortal(h,t):h}var fn;(function(n){n.DragStart="dragStart",n.DragMove="dragMove",n.DragEnd="dragEnd",n.DragCancel="dragCancel",n.DragOver="dragOver",n.RegisterDroppable="registerDroppable",n.SetDroppableDisabled="setDroppableDisabled",n.UnregisterDroppable="unregisterDroppable"})(fn||(fn={}));function Hh(){}function gx(n,e){return k.useMemo(()=>({sensor:n,options:e??{}}),[n,e])}function L5(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return k.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const ni=Object.freeze({x:0,y:0});function F5(n,e){const t=Bh(n);if(!t)return"0 0";const r={x:(t.x-e.left)/e.width*100,y:(t.y-e.top)/e.height*100};return r.x+"% "+r.y+"%"}function U5(n,e){let{data:{value:t}}=n,{data:{value:r}}=e;return r-t}function B5(n,e){if(!n||n.length===0)return null;const[t]=n;return t[e]}function H5(n,e){const t=Math.max(e.top,n.top),r=Math.max(e.left,n.left),i=Math.min(e.left+e.width,n.left+n.width),s=Math.min(e.top+e.height,n.top+n.height),o=i-r,l=s-t;if(r<i&&t<s){const c=e.width*e.height,d=n.width*n.height,h=o*l,p=h/(c+d-h);return Number(p.toFixed(4))}return 0}const z5=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:r}=n;const i=[];for(const s of r){const{id:o}=s,l=t.get(o);if(l){const c=H5(l,e);c>0&&i.push({id:o,data:{droppableContainer:s,value:c}})}}return i.sort(U5)};function $5(n,e,t){return{...n,scaleX:e&&t?e.width/t.width:1,scaleY:e&&t?e.height/t.height:1}}function KA(n,e){return n&&e?{x:n.left-e.left,y:n.top-e.top}:ni}function W5(n){return function(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return i.reduce((o,l)=>({...o,top:o.top+n*l.y,bottom:o.bottom+n*l.y,left:o.left+n*l.x,right:o.right+n*l.x}),{...t})}}const V5=W5(1);function QA(n){if(n.startsWith("matrix3d(")){const e=n.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(n.startsWith("matrix(")){const e=n.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function q5(n,e,t){const r=QA(e);if(!r)return n;const{scaleX:i,scaleY:s,x:o,y:l}=r,c=n.left-o-(1-i)*parseFloat(t),d=n.top-l-(1-s)*parseFloat(t.slice(t.indexOf(" ")+1)),h=i?n.width/i:n.width,p=s?n.height/s:n.height;return{width:h,height:p,top:d,right:c+h,bottom:d+p,left:c}}const G5={ignoreTransform:!1};function tu(n,e){e===void 0&&(e=G5);let t=n.getBoundingClientRect();if(e.ignoreTransform){const{transform:d,transformOrigin:h}=Vn(n).getComputedStyle(n);d&&(t=q5(t,d,h))}const{top:r,left:i,width:s,height:o,bottom:l,right:c}=t;return{top:r,left:i,width:s,height:o,bottom:l,right:c}}function mx(n){return tu(n,{ignoreTransform:!0})}function Y5(n){const e=n.innerWidth,t=n.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}function K5(n,e){return e===void 0&&(e=Vn(n).getComputedStyle(n)),e.position==="fixed"}function Q5(n,e){e===void 0&&(e=Vn(n).getComputedStyle(n));const t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const s=e[i];return typeof s=="string"?t.test(s):!1})}function Ny(n,e){const t=[];function r(i){if(e!=null&&t.length>=e||!i)return t;if(Iy(i)&&i.scrollingElement!=null&&!t.includes(i.scrollingElement))return t.push(i.scrollingElement),t;if(!Jc(i)||qA(i)||t.includes(i))return t;const s=Vn(n).getComputedStyle(i);return i!==n&&Q5(i,s)&&t.push(i),K5(i,s)?t:r(i.parentNode)}return n?r(n):t}function XA(n){const[e]=Ny(n,1);return e??null}function rm(n){return!Sf||!n?null:ll(n)?n:Oy(n)?Iy(n)||n===cl(n).scrollingElement?window:Jc(n)?n:null:null}function ZA(n){return ll(n)?n.scrollX:n.scrollLeft}function JA(n){return ll(n)?n.scrollY:n.scrollTop}function uv(n){return{x:ZA(n),y:JA(n)}}var wn;(function(n){n[n.Forward=1]="Forward",n[n.Backward=-1]="Backward"})(wn||(wn={}));function eD(n){return!Sf||!n?!1:n===document.scrollingElement}function tD(n){const e={x:0,y:0},t=eD(n)?{height:window.innerHeight,width:window.innerWidth}:{height:n.clientHeight,width:n.clientWidth},r={x:n.scrollWidth-t.width,y:n.scrollHeight-t.height},i=n.scrollTop<=e.y,s=n.scrollLeft<=e.x,o=n.scrollTop>=r.y,l=n.scrollLeft>=r.x;return{isTop:i,isLeft:s,isBottom:o,isRight:l,maxScroll:r,minScroll:e}}const X5={x:.2,y:.2};function Z5(n,e,t,r,i){let{top:s,left:o,right:l,bottom:c}=t;r===void 0&&(r=10),i===void 0&&(i=X5);const{isTop:d,isBottom:h,isLeft:p,isRight:g}=tD(n),v={x:0,y:0},y={x:0,y:0},_={height:e.height*i.y,width:e.width*i.x};return!d&&s<=e.top+_.height?(v.y=wn.Backward,y.y=r*Math.abs((e.top+_.height-s)/_.height)):!h&&c>=e.bottom-_.height&&(v.y=wn.Forward,y.y=r*Math.abs((e.bottom-_.height-c)/_.height)),!g&&l>=e.right-_.width?(v.x=wn.Forward,y.x=r*Math.abs((e.right-_.width-l)/_.width)):!p&&o<=e.left+_.width&&(v.x=wn.Backward,y.x=r*Math.abs((e.left+_.width-o)/_.width)),{direction:v,speed:y}}function J5(n){if(n===document.scrollingElement){const{innerWidth:s,innerHeight:o}=window;return{top:0,left:0,right:s,bottom:o,width:s,height:o}}const{top:e,left:t,right:r,bottom:i}=n.getBoundingClientRect();return{top:e,left:t,right:r,bottom:i,width:n.clientWidth,height:n.clientHeight}}function nD(n){return n.reduce((e,t)=>za(e,uv(t)),ni)}function e3(n){return n.reduce((e,t)=>e+ZA(t),0)}function t3(n){return n.reduce((e,t)=>e+JA(t),0)}function rD(n,e){if(e===void 0&&(e=tu),!n)return;const{top:t,left:r,bottom:i,right:s}=e(n);XA(n)&&(i<=0||s<=0||t>=window.innerHeight||r>=window.innerWidth)&&n.scrollIntoView({block:"center",inline:"center"})}const n3=[["x",["left","right"],e3],["y",["top","bottom"],t3]];class Py{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Ny(t),i=nD(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[s,o,l]of n3)for(const c of o)Object.defineProperty(this,c,{get:()=>{const d=l(r),h=i[s]-d;return this.rect[c]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class pc{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(t=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...t)})},this.target=e}add(e,t,r){var i;(i=this.target)==null||i.addEventListener(e,t,r),this.listeners.push([e,t,r])}}function r3(n){const{EventTarget:e}=Vn(n);return n instanceof e?n:cl(n)}function im(n,e){const t=Math.abs(n.x),r=Math.abs(n.y);return typeof e=="number"?Math.sqrt(t**2+r**2)>e:"x"in e&&"y"in e?t>e.x&&r>e.y:"x"in e?t>e.x:"y"in e?r>e.y:!1}var Pr;(function(n){n.Click="click",n.DragStart="dragstart",n.Keydown="keydown",n.ContextMenu="contextmenu",n.Resize="resize",n.SelectionChange="selectionchange",n.VisibilityChange="visibilitychange"})(Pr||(Pr={}));function vx(n){n.preventDefault()}function i3(n){n.stopPropagation()}var wt;(function(n){n.Space="Space",n.Down="ArrowDown",n.Right="ArrowRight",n.Left="ArrowLeft",n.Up="ArrowUp",n.Esc="Escape",n.Enter="Enter",n.Tab="Tab"})(wt||(wt={}));const iD={start:[wt.Space,wt.Enter],cancel:[wt.Esc],end:[wt.Space,wt.Enter,wt.Tab]},s3=(n,e)=>{let{currentCoordinates:t}=e;switch(n.code){case wt.Right:return{...t,x:t.x+25};case wt.Left:return{...t,x:t.x-25};case wt.Down:return{...t,y:t.y+25};case wt.Up:return{...t,y:t.y-25}}};class sD{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new pc(cl(t)),this.windowListeners=new pc(Vn(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Pr.Resize,this.handleCancel),this.windowListeners.add(Pr.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Pr.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,r=e.node.current;r&&rD(r),t(ni)}handleKeyDown(e){if(My(e)){const{active:t,context:r,options:i}=this.props,{keyboardCodes:s=iD,coordinateGetter:o=s3,scrollBehavior:l="smooth"}=i,{code:c}=e;if(s.end.includes(c)){this.handleEnd(e);return}if(s.cancel.includes(c)){this.handleCancel(e);return}const{collisionRect:d}=r.current,h=d?{x:d.left,y:d.top}:ni;this.referenceCoordinates||(this.referenceCoordinates=h);const p=o(e,{active:t,context:r.current,currentCoordinates:h});if(p){const g=Uh(p,h),v={x:0,y:0},{scrollableAncestors:y}=r.current;for(const _ of y){const w=e.code,{isTop:x,isRight:C,isLeft:T,isBottom:R,maxScroll:D,minScroll:O}=tD(_),M=J5(_),I={x:Math.min(w===wt.Right?M.right-M.width/2:M.right,Math.max(w===wt.Right?M.left:M.left+M.width/2,p.x)),y:Math.min(w===wt.Down?M.bottom-M.height/2:M.bottom,Math.max(w===wt.Down?M.top:M.top+M.height/2,p.y))},F=w===wt.Right&&!C||w===wt.Left&&!T,z=w===wt.Down&&!R||w===wt.Up&&!x;if(F&&I.x!==p.x){const V=_.scrollLeft+g.x,ee=w===wt.Right&&V<=D.x||w===wt.Left&&V>=O.x;if(ee&&!g.y){_.scrollTo({left:V,behavior:l});return}ee?v.x=_.scrollLeft-V:v.x=w===wt.Right?_.scrollLeft-D.x:_.scrollLeft-O.x,v.x&&_.scrollBy({left:-v.x,behavior:l});break}else if(z&&I.y!==p.y){const V=_.scrollTop+g.y,ee=w===wt.Down&&V<=D.y||w===wt.Up&&V>=O.y;if(ee&&!g.x){_.scrollTo({top:V,behavior:l});return}ee?v.y=_.scrollTop-V:v.y=w===wt.Down?_.scrollTop-D.y:_.scrollTop-O.y,v.y&&_.scrollBy({top:-v.y,behavior:l});break}}this.handleMove(e,za(Uh(p,this.referenceCoordinates),v))}}}handleMove(e,t){const{onMove:r}=this.props;e.preventDefault(),r(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}sD.activators=[{eventName:"onKeyDown",handler:(n,e,t)=>{let{keyboardCodes:r=iD,onActivation:i}=e,{active:s}=t;const{code:o}=n.nativeEvent;if(r.start.includes(o)){const l=s.activatorNode.current;return l&&n.target!==l?!1:(n.preventDefault(),i?.({event:n.nativeEvent}),!0)}return!1}}];function yx(n){return!!(n&&"distance"in n)}function bx(n){return!!(n&&"delay"in n)}class jy{constructor(e,t,r){var i;r===void 0&&(r=r3(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:s}=e,{target:o}=s;this.props=e,this.events=t,this.document=cl(o),this.documentListeners=new pc(this.document),this.listeners=new pc(r),this.windowListeners=new pc(Vn(o)),this.initialCoordinates=(i=Bh(s))!=null?i:ni,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Pr.Resize,this.handleCancel),this.windowListeners.add(Pr.DragStart,vx),this.windowListeners.add(Pr.VisibilityChange,this.handleCancel),this.windowListeners.add(Pr.ContextMenu,vx),this.documentListeners.add(Pr.Keydown,this.handleKeydown),t){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(bx(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(yx(t)){this.handlePending(t);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:r,onPending:i}=this.props;i(r,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(Pr.Click,i3,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Pr.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:r,initialCoordinates:i,props:s}=this,{onMove:o,options:{activationConstraint:l}}=s;if(!i)return;const c=(t=Bh(e))!=null?t:ni,d=Uh(i,c);if(!r&&l){if(yx(l)){if(l.tolerance!=null&&im(d,l.tolerance))return this.handleCancel();if(im(d,l.distance))return this.handleStart()}if(bx(l)&&im(d,l.tolerance))return this.handleCancel();this.handlePending(l,d);return}e.cancelable&&e.preventDefault(),o(c)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===wt.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const o3={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Ly extends jy{constructor(e){const{event:t}=e,r=cl(t.target);super(e,o3,r)}}Ly.activators=[{eventName:"onPointerDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:r}=e;return!t.isPrimary||t.button!==0?!1:(r?.({event:t}),!0)}}];const a3={move:{name:"mousemove"},end:{name:"mouseup"}};var dv;(function(n){n[n.RightClick=2]="RightClick"})(dv||(dv={}));class oD extends jy{constructor(e){super(e,a3,cl(e.event.target))}}oD.activators=[{eventName:"onMouseDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:r}=e;return t.button===dv.RightClick?!1:(r?.({event:t}),!0)}}];const sm={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class l3 extends jy{constructor(e){super(e,sm)}static setup(){return window.addEventListener(sm.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(sm.move.name,e)};function e(){}}}l3.activators=[{eventName:"onTouchStart",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:r}=e;const{touches:i}=t;return i.length>1?!1:(r?.({event:t}),!0)}}];var gc;(function(n){n[n.Pointer=0]="Pointer",n[n.DraggableRect=1]="DraggableRect"})(gc||(gc={}));var zh;(function(n){n[n.TreeOrder=0]="TreeOrder",n[n.ReversedTreeOrder=1]="ReversedTreeOrder"})(zh||(zh={}));function c3(n){let{acceleration:e,activator:t=gc.Pointer,canScroll:r,draggingRect:i,enabled:s,interval:o=5,order:l=zh.TreeOrder,pointerCoordinates:c,scrollableAncestors:d,scrollableAncestorRects:h,delta:p,threshold:g}=n;const v=d3({delta:p,disabled:!s}),[y,_]=E5(),w=k.useRef({x:0,y:0}),x=k.useRef({x:0,y:0}),C=k.useMemo(()=>{switch(t){case gc.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case gc.DraggableRect:return i}},[t,i,c]),T=k.useRef(null),R=k.useCallback(()=>{const O=T.current;if(!O)return;const M=w.current.x*x.current.x,I=w.current.y*x.current.y;O.scrollBy(M,I)},[]),D=k.useMemo(()=>l===zh.TreeOrder?[...d].reverse():d,[l,d]);k.useEffect(()=>{if(!s||!d.length||!C){_();return}for(const O of D){if(r?.(O)===!1)continue;const M=d.indexOf(O),I=h[M];if(!I)continue;const{direction:F,speed:z}=Z5(O,I,C,e,g);for(const V of["x","y"])v[V][F[V]]||(z[V]=0,F[V]=0);if(z.x>0||z.y>0){_(),T.current=O,y(R,o),w.current=z,x.current=F;return}}w.current={x:0,y:0},x.current={x:0,y:0},_()},[e,R,r,_,s,o,JSON.stringify(C),JSON.stringify(v),y,d,D,h,JSON.stringify(g)])}const u3={x:{[wn.Backward]:!1,[wn.Forward]:!1},y:{[wn.Backward]:!1,[wn.Forward]:!1}};function d3(n){let{delta:e,disabled:t}=n;const r=Fh(e);return eu(i=>{if(t||!r||!i)return u3;const s={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[wn.Backward]:i.x[wn.Backward]||s.x===-1,[wn.Forward]:i.x[wn.Forward]||s.x===1},y:{[wn.Backward]:i.y[wn.Backward]||s.y===-1,[wn.Forward]:i.y[wn.Forward]||s.y===1}}},[t,e,r])}function h3(n,e){const t=e!=null?n.get(e):void 0,r=t?t.node.current:null;return eu(i=>{var s;return e==null?null:(s=r??i)!=null?s:null},[r,e])}function f3(n,e){return k.useMemo(()=>n.reduce((t,r)=>{const{sensor:i}=r,s=i.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,r)}));return[...t,...s]},[]),[n,e])}var Mc;(function(n){n[n.Always=0]="Always",n[n.BeforeDragging=1]="BeforeDragging",n[n.WhileDragging=2]="WhileDragging"})(Mc||(Mc={}));var hv;(function(n){n.Optimized="optimized"})(hv||(hv={}));const _x=new Map;function p3(n,e){let{dragging:t,dependencies:r,config:i}=e;const[s,o]=k.useState(null),{frequency:l,measure:c,strategy:d}=i,h=k.useRef(n),p=w(),g=Oc(p),v=k.useCallback(function(x){x===void 0&&(x=[]),!g.current&&o(C=>C===null?x:C.concat(x.filter(T=>!C.includes(T))))},[g]),y=k.useRef(null),_=eu(x=>{if(p&&!t)return _x;if(!x||x===_x||h.current!==n||s!=null){const C=new Map;for(let T of n){if(!T)continue;if(s&&s.length>0&&!s.includes(T.id)&&T.rect.current){C.set(T.id,T.rect.current);continue}const R=T.node.current,D=R?new Py(c(R),R):null;T.rect.current=D,D&&C.set(T.id,D)}return C}return x},[n,s,t,p,c]);return k.useEffect(()=>{h.current=n},[n]),k.useEffect(()=>{p||v()},[t,p]),k.useEffect(()=>{s&&s.length>0&&o(null)},[JSON.stringify(s)]),k.useEffect(()=>{p||typeof l!="number"||y.current!==null||(y.current=setTimeout(()=>{v(),y.current=null},l))},[l,p,v,...r]),{droppableRects:_,measureDroppableContainers:v,measuringScheduled:s!=null};function w(){switch(d){case Mc.Always:return!1;case Mc.BeforeDragging:return t;default:return!t}}}function Fy(n,e){return eu(t=>n?t||(typeof e=="function"?e(n):n):null,[e,n])}function g3(n,e){return Fy(n,e)}function m3(n){let{callback:e,disabled:t}=n;const r=xf(e),i=k.useMemo(()=>{if(t||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(r)},[r,t]);return k.useEffect(()=>()=>i?.disconnect(),[i]),i}function Cf(n){let{callback:e,disabled:t}=n;const r=xf(e),i=k.useMemo(()=>{if(t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(r)},[t]);return k.useEffect(()=>()=>i?.disconnect(),[i]),i}function v3(n){return new Py(tu(n),n)}function wx(n,e,t){e===void 0&&(e=v3);const[r,i]=k.useState(null);function s(){i(c=>{if(!n)return null;if(n.isConnected===!1){var d;return(d=c??t)!=null?d:null}const h=e(n);return JSON.stringify(c)===JSON.stringify(h)?c:h})}const o=m3({callback(c){if(n)for(const d of c){const{type:h,target:p}=d;if(h==="childList"&&p instanceof HTMLElement&&p.contains(n)){s();break}}}}),l=Cf({callback:s});return ts(()=>{s(),n?(l?.observe(n),o?.observe(document.body,{childList:!0,subtree:!0})):(l?.disconnect(),o?.disconnect())},[n]),r}function y3(n){const e=Fy(n);return KA(n,e)}const Sx=[];function b3(n){const e=k.useRef(n),t=eu(r=>n?r&&r!==Sx&&n&&e.current&&n.parentNode===e.current.parentNode?r:Ny(n):Sx,[n]);return k.useEffect(()=>{e.current=n},[n]),t}function _3(n){const[e,t]=k.useState(null),r=k.useRef(n),i=k.useCallback(s=>{const o=rm(s.target);o&&t(l=>l?(l.set(o,uv(o)),new Map(l)):null)},[]);return k.useEffect(()=>{const s=r.current;if(n!==s){o(s);const l=n.map(c=>{const d=rm(c);return d?(d.addEventListener("scroll",i,{passive:!0}),[d,uv(d)]):null}).filter(c=>c!=null);t(l.length?new Map(l):null),r.current=n}return()=>{o(n),o(s)};function o(l){l.forEach(c=>{const d=rm(c);d?.removeEventListener("scroll",i)})}},[i,n]),k.useMemo(()=>n.length?e?Array.from(e.values()).reduce((s,o)=>za(s,o),ni):nD(n):ni,[n,e])}function xx(n,e){e===void 0&&(e=[]);const t=k.useRef(null);return k.useEffect(()=>{t.current=null},e),k.useEffect(()=>{const r=n!==ni;r&&!t.current&&(t.current=n),!r&&t.current&&(t.current=null)},[n]),t.current?Uh(n,t.current):ni}function w3(n){k.useEffect(()=>{if(!Sf)return;const e=n.map(t=>{let{sensor:r}=t;return r.setup==null?void 0:r.setup()});return()=>{for(const t of e)t?.()}},n.map(e=>{let{sensor:t}=e;return t}))}function S3(n,e){return k.useMemo(()=>n.reduce((t,r)=>{let{eventName:i,handler:s}=r;return t[i]=o=>{s(o,e)},t},{}),[n,e])}function aD(n){return k.useMemo(()=>n?Y5(n):null,[n])}const Ex=[];function x3(n,e){e===void 0&&(e=tu);const[t]=n,r=aD(t?Vn(t):null),[i,s]=k.useState(Ex);function o(){s(()=>n.length?n.map(c=>eD(c)?r:new Py(e(c),c)):Ex)}const l=Cf({callback:o});return ts(()=>{l?.disconnect(),o(),n.forEach(c=>l?.observe(c))},[n]),i}function lD(n){if(!n)return null;if(n.children.length>1)return n;const e=n.children[0];return Jc(e)?e:n}function E3(n){let{measure:e}=n;const[t,r]=k.useState(null),i=k.useCallback(d=>{for(const{target:h}of d)if(Jc(h)){r(p=>{const g=e(h);return p?{...p,width:g.width,height:g.height}:g});break}},[e]),s=Cf({callback:i}),o=k.useCallback(d=>{const h=lD(d);s?.disconnect(),h&&s?.observe(h),r(h?e(h):null)},[e,s]),[l,c]=Lh(o);return k.useMemo(()=>({nodeRef:l,rect:t,setRef:c}),[t,l,c])}const C3=[{sensor:Ly,options:{}},{sensor:sD,options:{}}],T3={current:{}},lh={draggable:{measure:mx},droppable:{measure:mx,strategy:Mc.WhileDragging,frequency:hv.Optimized},dragOverlay:{measure:tu}};class mc extends Map{get(e){var t;return e!=null&&(t=super.get(e))!=null?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,r;return(t=(r=this.get(e))==null?void 0:r.node.current)!=null?t:void 0}}const k3={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new mc,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Hh},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:lh,measureDroppableContainers:Hh,windowRect:null,measuringScheduled:!1},cD={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Hh,draggableNodes:new Map,over:null,measureDroppableContainers:Hh},nu=k.createContext(cD),uD=k.createContext(k3);function A3(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new mc}}}function D3(n,e){switch(e.type){case fn.DragStart:return{...n,draggable:{...n.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case fn.DragMove:return n.draggable.active==null?n:{...n,draggable:{...n.draggable,translate:{x:e.coordinates.x-n.draggable.initialCoordinates.x,y:e.coordinates.y-n.draggable.initialCoordinates.y}}};case fn.DragEnd:case fn.DragCancel:return{...n,draggable:{...n.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case fn.RegisterDroppable:{const{element:t}=e,{id:r}=t,i=new mc(n.droppable.containers);return i.set(r,t),{...n,droppable:{...n.droppable,containers:i}}}case fn.SetDroppableDisabled:{const{id:t,key:r,disabled:i}=e,s=n.droppable.containers.get(t);if(!s||r!==s.key)return n;const o=new mc(n.droppable.containers);return o.set(t,{...s,disabled:i}),{...n,droppable:{...n.droppable,containers:o}}}case fn.UnregisterDroppable:{const{id:t,key:r}=e,i=n.droppable.containers.get(t);if(!i||r!==i.key)return n;const s=new mc(n.droppable.containers);return s.delete(t),{...n,droppable:{...n.droppable,containers:s}}}default:return n}}function R3(n){let{disabled:e}=n;const{active:t,activatorEvent:r,draggableNodes:i}=k.useContext(nu),s=Fh(r),o=Fh(t?.id);return k.useEffect(()=>{if(!e&&!r&&s&&o!=null){if(!My(s)||document.activeElement===s.target)return;const l=i.get(o);if(!l)return;const{activatorNode:c,node:d}=l;if(!c.current&&!d.current)return;requestAnimationFrame(()=>{for(const h of[c.current,d.current]){if(!h)continue;const p=k5(h);if(p){p.focus();break}}})}},[r,e,i,o,s]),null}function dD(n,e){let{transform:t,...r}=e;return n!=null&&n.length?n.reduce((i,s)=>s({transform:i,...r}),t):t}function O3(n){return k.useMemo(()=>({draggable:{...lh.draggable,...n?.draggable},droppable:{...lh.droppable,...n?.droppable},dragOverlay:{...lh.dragOverlay,...n?.dragOverlay}}),[n?.draggable,n?.droppable,n?.dragOverlay])}function I3(n){let{activeNode:e,measure:t,initialRect:r,config:i=!0}=n;const s=k.useRef(!1),{x:o,y:l}=typeof i=="boolean"?{x:i,y:i}:i;ts(()=>{if(!o&&!l||!e){s.current=!1;return}if(s.current||!r)return;const d=e?.node.current;if(!d||d.isConnected===!1)return;const h=t(d),p=KA(h,r);if(o||(p.x=0),l||(p.y=0),s.current=!0,Math.abs(p.x)>0||Math.abs(p.y)>0){const g=XA(d);g&&g.scrollBy({top:p.y,left:p.x})}},[e,o,l,r,t])}const Tf=k.createContext({...ni,scaleX:1,scaleY:1});var Rs;(function(n){n[n.Uninitialized=0]="Uninitialized",n[n.Initializing=1]="Initializing",n[n.Initialized=2]="Initialized"})(Rs||(Rs={}));const M3=k.memo(function(e){var t,r,i,s;let{id:o,accessibility:l,autoScroll:c=!0,children:d,sensors:h=C3,collisionDetection:p=z5,measuring:g,modifiers:v,...y}=e;const _=k.useReducer(D3,void 0,A3),[w,x]=_,[C,T]=M5(),[R,D]=k.useState(Rs.Uninitialized),O=R===Rs.Initialized,{draggable:{active:M,nodes:I,translate:F},droppable:{containers:z}}=w,V=M!=null?I.get(M):null,ee=k.useRef({initial:null,translated:null}),re=k.useMemo(()=>{var tt;return M!=null?{id:M,data:(tt=V?.data)!=null?tt:T3,rect:ee}:null},[M,V]),fe=k.useRef(null),[pe,ie]=k.useState(null),[ae,Q]=k.useState(null),q=Oc(y,Object.values(y)),Y=Ef("DndDescribedBy",o),L=k.useMemo(()=>z.getEnabled(),[z]),G=O3(g),{droppableRects:ne,measureDroppableContainers:le,measuringScheduled:ue}=p3(L,{dragging:O,dependencies:[F.x,F.y],config:G.droppable}),ce=h3(I,M),Ce=k.useMemo(()=>ae?Bh(ae):null,[ae]),se=En(),Pe=g3(ce,G.draggable.measure);I3({activeNode:M!=null?I.get(M):null,config:se.layoutShiftCompensation,initialRect:Pe,measure:G.draggable.measure});const ze=wx(ce,G.draggable.measure,Pe),Wt=wx(ce?ce.parentElement:null),Gt=k.useRef({activatorEvent:null,active:null,activeNode:ce,collisionRect:null,collisions:null,droppableRects:ne,draggableNodes:I,draggingNode:null,draggingNodeRect:null,droppableContainers:z,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),qn=z.getNodeFor((t=Gt.current.over)==null?void 0:t.id),ge=E3({measure:G.dragOverlay.measure}),Fe=(r=ge.nodeRef.current)!=null?r:ce,et=O?(i=ge.rect)!=null?i:ze:null,xt=!!(ge.nodeRef.current&&ge.rect),on=y3(xt?null:ze),qe=aD(Fe?Vn(Fe):null),Ee=b3(O?qn??ce:null),dt=x3(Ee),Ue=dD(v,{transform:{x:F.x-on.x,y:F.y-on.y,scaleX:1,scaleY:1},activatorEvent:ae,active:re,activeNodeRect:ze,containerNodeRect:Wt,draggingNodeRect:et,over:Gt.current.over,overlayNodeRect:ge.rect,scrollableAncestors:Ee,scrollableAncestorRects:dt,windowRect:qe}),X=Ce?za(Ce,F):null,ye=_3(Ee),Be=xx(ye),je=xx(ye,[ze]),be=za(Ue,Be),we=et?V5(et,Ue):null,Ie=re&&we?p({active:re,collisionRect:we,droppableRects:ne,droppableContainers:L,pointerCoordinates:X}):null,$e=B5(Ie,"id"),[We,ot]=k.useState(null),ft=xt?Ue:za(Ue,je),wr=$5(ft,(s=We?.rect)!=null?s:null,ze),yt=k.useRef(null),at=k.useCallback((tt,Kt)=>{let{sensor:de,options:Le}=Kt;if(fe.current==null)return;const Qe=I.get(fe.current);if(!Qe)return;const nt=tt.nativeEvent,Vt=new de({active:fe.current,activeNode:Qe,event:nt,options:Le,context:Gt,onAbort(Me){if(!I.get(Me))return;const{onDragAbort:bt}=q.current,jt={id:Me};bt?.(jt),C({type:"onDragAbort",event:jt})},onPending(Me,Qt,bt,jt){if(!I.get(Me))return;const{onDragPending:vn}=q.current,Kn={id:Me,constraint:Qt,initialCoordinates:bt,offset:jt};vn?.(Kn),C({type:"onDragPending",event:Kn})},onStart(Me){const Qt=fe.current;if(Qt==null)return;const bt=I.get(Qt);if(!bt)return;const{onDragStart:jt}=q.current,Yn={activatorEvent:nt,active:{id:Qt,data:bt.data,rect:ee}};Hi.unstable_batchedUpdates(()=>{jt?.(Yn),D(Rs.Initializing),x({type:fn.DragStart,initialCoordinates:Me,active:Qt}),C({type:"onDragStart",event:Yn}),ie(yt.current),Q(nt)})},onMove(Me){x({type:fn.DragMove,coordinates:Me})},onEnd:ht(fn.DragEnd),onCancel:ht(fn.DragCancel)});yt.current=Vt;function ht(Me){return async function(){const{active:bt,collisions:jt,over:Yn,scrollAdjustedTranslate:vn}=Gt.current;let Kn=null;if(bt&&vn){const{cancelDrop:Ci}=q.current;Kn={activatorEvent:nt,active:bt,collisions:jt,delta:vn,over:Yn},Me===fn.DragEnd&&typeof Ci=="function"&&await Promise.resolve(Ci(Kn))&&(Me=fn.DragCancel)}fe.current=null,Hi.unstable_batchedUpdates(()=>{x({type:Me}),D(Rs.Uninitialized),ot(null),ie(null),Q(null),yt.current=null;const Ci=Me===fn.DragEnd?"onDragEnd":"onDragCancel";if(Kn){const dl=q.current[Ci];dl?.(Kn),C({type:Ci,event:Kn})}})}}},[I]),Yt=k.useCallback((tt,Kt)=>(de,Le)=>{const Qe=de.nativeEvent,nt=I.get(Le);if(fe.current!==null||!nt||Qe.dndKit||Qe.defaultPrevented)return;const Vt={active:nt};tt(de,Kt.options,Vt)===!0&&(Qe.dndKit={capturedBy:Kt.sensor},fe.current=Le,at(de,Kt))},[I,at]),Ve=f3(h,Yt);w3(h),ts(()=>{ze&&R===Rs.Initializing&&D(Rs.Initialized)},[ze,R]),k.useEffect(()=>{const{onDragMove:tt}=q.current,{active:Kt,activatorEvent:de,collisions:Le,over:Qe}=Gt.current;if(!Kt||!de)return;const nt={active:Kt,activatorEvent:de,collisions:Le,delta:{x:be.x,y:be.y},over:Qe};Hi.unstable_batchedUpdates(()=>{tt?.(nt),C({type:"onDragMove",event:nt})})},[be.x,be.y]),k.useEffect(()=>{const{active:tt,activatorEvent:Kt,collisions:de,droppableContainers:Le,scrollAdjustedTranslate:Qe}=Gt.current;if(!tt||fe.current==null||!Kt||!Qe)return;const{onDragOver:nt}=q.current,Vt=Le.get($e),ht=Vt&&Vt.rect.current?{id:Vt.id,rect:Vt.rect.current,data:Vt.data,disabled:Vt.disabled}:null,Me={active:tt,activatorEvent:Kt,collisions:de,delta:{x:Qe.x,y:Qe.y},over:ht};Hi.unstable_batchedUpdates(()=>{ot(ht),nt?.(Me),C({type:"onDragOver",event:Me})})},[$e]),ts(()=>{Gt.current={activatorEvent:ae,active:re,activeNode:ce,collisionRect:we,collisions:Ie,droppableRects:ne,draggableNodes:I,draggingNode:Fe,draggingNodeRect:et,droppableContainers:z,over:We,scrollableAncestors:Ee,scrollAdjustedTranslate:be},ee.current={initial:et,translated:we}},[re,ce,Ie,we,I,Fe,et,ne,z,We,Ee,be]),c3({...se,delta:F,draggingRect:we,pointerCoordinates:X,scrollableAncestors:Ee,scrollableAncestorRects:dt});const Ke=k.useMemo(()=>({active:re,activeNode:ce,activeNodeRect:ze,activatorEvent:ae,collisions:Ie,containerNodeRect:Wt,dragOverlay:ge,draggableNodes:I,droppableContainers:z,droppableRects:ne,over:We,measureDroppableContainers:le,scrollableAncestors:Ee,scrollableAncestorRects:dt,measuringConfiguration:G,measuringScheduled:ue,windowRect:qe}),[re,ce,ze,ae,Ie,Wt,ge,I,z,ne,We,le,Ee,dt,G,ue,qe]),Gn=k.useMemo(()=>({activatorEvent:ae,activators:Ve,active:re,activeNodeRect:ze,ariaDescribedById:{draggable:Y},dispatch:x,draggableNodes:I,over:We,measureDroppableContainers:le}),[ae,Ve,re,ze,x,Y,I,We,le]);return K.createElement(YA.Provider,{value:T},K.createElement(nu.Provider,{value:Gn},K.createElement(uD.Provider,{value:Ke},K.createElement(Tf.Provider,{value:wr},d)),K.createElement(R3,{disabled:l?.restoreFocus===!1})),K.createElement(j5,{...l,hiddenTextDescribedById:Y}));function En(){const tt=pe?.autoScrollEnabled===!1,Kt=typeof c=="object"?c.enabled===!1:c===!1,de=O&&!tt&&!Kt;return typeof c=="object"?{...c,enabled:de}:{enabled:de}}}),N3=k.createContext(null),Cx="button",P3="Draggable";function oY(n){let{id:e,data:t,disabled:r=!1,attributes:i}=n;const s=Ef(P3),{activators:o,activatorEvent:l,active:c,activeNodeRect:d,ariaDescribedById:h,draggableNodes:p,over:g}=k.useContext(nu),{role:v=Cx,roleDescription:y="draggable",tabIndex:_=0}=i??{},w=c?.id===e,x=k.useContext(w?Tf:N3),[C,T]=Lh(),[R,D]=Lh(),O=S3(o,e),M=Oc(t);ts(()=>(p.set(e,{id:e,key:s,node:C,activatorNode:R,data:M}),()=>{const F=p.get(e);F&&F.key===s&&p.delete(e)}),[p,e]);const I=k.useMemo(()=>({role:v,tabIndex:_,"aria-disabled":r,"aria-pressed":w&&v===Cx?!0:void 0,"aria-roledescription":y,"aria-describedby":h.draggable}),[r,v,_,w,y,h.draggable]);return{active:c,activatorEvent:l,activeNodeRect:d,attributes:I,isDragging:w,listeners:r?void 0:O,node:C,over:g,setNodeRef:T,setActivatorNodeRef:D,transform:x}}function j3(){return k.useContext(uD)}const L3="Droppable",F3={timeout:25};function aY(n){let{data:e,disabled:t=!1,id:r,resizeObserverConfig:i}=n;const s=Ef(L3),{active:o,dispatch:l,over:c,measureDroppableContainers:d}=k.useContext(nu),h=k.useRef({disabled:t}),p=k.useRef(!1),g=k.useRef(null),v=k.useRef(null),{disabled:y,updateMeasurementsFor:_,timeout:w}={...F3,...i},x=Oc(_??r),C=k.useCallback(()=>{if(!p.current){p.current=!0;return}v.current!=null&&clearTimeout(v.current),v.current=setTimeout(()=>{d(Array.isArray(x.current)?x.current:[x.current]),v.current=null},w)},[w]),T=Cf({callback:C,disabled:y||!o}),R=k.useCallback((I,F)=>{T&&(F&&(T.unobserve(F),p.current=!1),I&&T.observe(I))},[T]),[D,O]=Lh(R),M=Oc(e);return k.useEffect(()=>{!T||!D.current||(T.disconnect(),p.current=!1,T.observe(D.current))},[D,T]),k.useEffect(()=>(l({type:fn.RegisterDroppable,element:{id:r,key:s,disabled:t,node:D,rect:g,data:M}}),()=>l({type:fn.UnregisterDroppable,key:s,id:r})),[r]),k.useEffect(()=>{t!==h.current.disabled&&(l({type:fn.SetDroppableDisabled,id:r,key:s,disabled:t}),h.current.disabled=t)},[r,s,t,l]),{active:o,rect:g,isOver:c?.id===r,node:D,over:c,setNodeRef:O}}function U3(n){let{animation:e,children:t}=n;const[r,i]=k.useState(null),[s,o]=k.useState(null),l=Fh(t);return!t&&!r&&l&&i(l),ts(()=>{if(!s)return;const c=r?.key,d=r?.props.id;if(c==null||d==null){i(null);return}Promise.resolve(e(d,s)).then(()=>{i(null)})},[e,r,s]),K.createElement(K.Fragment,null,t,r?k.cloneElement(r,{ref:o}):null)}const B3={x:0,y:0,scaleX:1,scaleY:1};function H3(n){let{children:e}=n;return K.createElement(nu.Provider,{value:cD},K.createElement(Tf.Provider,{value:B3},e))}const z3={position:"fixed",touchAction:"none"},$3=n=>My(n)?"transform 250ms ease":void 0,W3=k.forwardRef((n,e)=>{let{as:t,activatorEvent:r,adjustScale:i,children:s,className:o,rect:l,style:c,transform:d,transition:h=$3}=n;if(!l)return null;const p=i?d:{...d,scaleX:1,scaleY:1},g={...z3,width:l.width,height:l.height,top:l.top,left:l.left,transform:Ic.Transform.toString(p),transformOrigin:i&&r?F5(r,l):void 0,transition:typeof h=="function"?h(r):h,...c};return K.createElement(t,{className:o,style:g,ref:e},s)}),V3=n=>e=>{let{active:t,dragOverlay:r}=e;const i={},{styles:s,className:o}=n;if(s!=null&&s.active)for(const[l,c]of Object.entries(s.active))c!==void 0&&(i[l]=t.node.style.getPropertyValue(l),t.node.style.setProperty(l,c));if(s!=null&&s.dragOverlay)for(const[l,c]of Object.entries(s.dragOverlay))c!==void 0&&r.node.style.setProperty(l,c);return o!=null&&o.active&&t.node.classList.add(o.active),o!=null&&o.dragOverlay&&r.node.classList.add(o.dragOverlay),function(){for(const[c,d]of Object.entries(i))t.node.style.setProperty(c,d);o!=null&&o.active&&t.node.classList.remove(o.active)}},q3=n=>{let{transform:{initial:e,final:t}}=n;return[{transform:Ic.Transform.toString(e)},{transform:Ic.Transform.toString(t)}]},G3={duration:250,easing:"ease",keyframes:q3,sideEffects:V3({styles:{active:{opacity:"0"}}})};function Y3(n){let{config:e,draggableNodes:t,droppableContainers:r,measuringConfiguration:i}=n;return xf((s,o)=>{if(e===null)return;const l=t.get(s);if(!l)return;const c=l.node.current;if(!c)return;const d=lD(o);if(!d)return;const{transform:h}=Vn(o).getComputedStyle(o),p=QA(h);if(!p)return;const g=typeof e=="function"?e:K3(e);return rD(c,i.draggable.measure),g({active:{id:s,data:l.data,node:c,rect:i.draggable.measure(c)},draggableNodes:t,dragOverlay:{node:o,rect:i.dragOverlay.measure(d)},droppableContainers:r,measuringConfiguration:i,transform:p})})}function K3(n){const{duration:e,easing:t,sideEffects:r,keyframes:i}={...G3,...n};return s=>{let{active:o,dragOverlay:l,transform:c,...d}=s;if(!e)return;const h={x:l.rect.left-o.rect.left,y:l.rect.top-o.rect.top},p={scaleX:c.scaleX!==1?o.rect.width*c.scaleX/l.rect.width:1,scaleY:c.scaleY!==1?o.rect.height*c.scaleY/l.rect.height:1},g={x:c.x-h.x,y:c.y-h.y,...p},v=i({...d,active:o,dragOverlay:l,transform:{initial:c,final:g}}),[y]=v,_=v[v.length-1];if(JSON.stringify(y)===JSON.stringify(_))return;const w=r?.({active:o,dragOverlay:l,...d}),x=l.node.animate(v,{duration:e,easing:t,fill:"forwards"});return new Promise(C=>{x.onfinish=()=>{w?.(),C()}})}}let Tx=0;function Q3(n){return k.useMemo(()=>{if(n!=null)return Tx++,Tx},[n])}const X3=K.memo(n=>{let{adjustScale:e=!1,children:t,dropAnimation:r,style:i,transition:s,modifiers:o,wrapperElement:l="div",className:c,zIndex:d=999}=n;const{activatorEvent:h,active:p,activeNodeRect:g,containerNodeRect:v,draggableNodes:y,droppableContainers:_,dragOverlay:w,over:x,measuringConfiguration:C,scrollableAncestors:T,scrollableAncestorRects:R,windowRect:D}=j3(),O=k.useContext(Tf),M=Q3(p?.id),I=dD(o,{activatorEvent:h,active:p,activeNodeRect:g,containerNodeRect:v,draggingNodeRect:w.rect,over:x,overlayNodeRect:w.rect,scrollableAncestors:T,scrollableAncestorRects:R,transform:O,windowRect:D}),F=Fy(g),z=Y3({config:r,draggableNodes:y,droppableContainers:_,measuringConfiguration:C}),V=F?w.setRef:void 0;return K.createElement(H3,null,K.createElement(U3,{animation:z},p&&M?K.createElement(W3,{key:M,id:p.id,ref:V,as:l,activatorEvent:h,adjustScale:e,className:c,transition:s,rect:F,style:{zIndex:d,...i},transform:I},t):null))});function ho({label:n,options:e,selectedOptions:t,onSelectionChange:r,searchPlaceholder:i,id:s,width:o="200px"}){const[l,c]=k.useState(!1),[d,h]=k.useState(""),p=k.useRef(null);k.useEffect(()=>{const C=T=>{p.current&&!p.current.contains(T.target)&&c(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]);const g=e.filter(C=>C.toLowerCase().includes(d.toLowerCase())),v=g.length>0&&g.every(C=>t.includes(C)),y=C=>{if(C.preventDefault(),C.stopPropagation(),v){const T=t.filter(R=>!g.includes(R));r(T)}else{const T=[...new Set([...t,...g])];r(T)}},_=(C,T)=>{if(C.preventDefault(),C.stopPropagation(),t.includes(T)){const R=t.filter(D=>D!==T);r(R)}else{const R=[...t.filter(D=>D!==""),T];r(R)}},w=()=>{c(!0)},x=C=>{h(C.target.value)};return E.jsxs("div",{className:"relative",ref:p,style:{width:o},children:[E.jsxs("div",{className:"space-y-2",children:[E.jsxs(bi,{htmlFor:s,children:[n,":"]}),E.jsx(yi,{type:"text",id:s,value:d,onChange:x,onFocus:w,placeholder:i})]}),l&&e.length>0&&E.jsxs("div",{className:"absolute top-full left-0 right-0 bg-white border border-gray-300 rounded-md shadow-lg z-10 max-h-60 overflow-y-auto",children:[E.jsx("div",{className:`px-3 py-1 hover:bg-gray-100 cursor-pointer border-b border-gray-100 ${v?"bg-navy-50 text-navy-800":""}`,onMouseDown:y,children:E.jsx("div",{className:"text-xs font-bold",children:"Tutti"})}),g.map(C=>E.jsx("div",{className:`px-3 py-1 hover:bg-gray-100 cursor-pointer border-b border-gray-100 last:border-b-0 ${t.includes(C)?"bg-navy-50 text-navy-800":""}`,onMouseDown:T=>_(T,C),children:E.jsx("div",{className:"text-xs font-normal",children:C})},C))]})]})}const Z3=k.lazy(()=>ei(()=>import("./TaskPoolDataTable-Bxi7IOcM.js"),[])),J3=k.lazy(()=>ei(()=>import("./GanttChart-Du_NmXcd.js"),[])),kx=()=>E.jsx("div",{className:"loading",children:"Caricamento componenti scheduler..."}),e4=({schedulingLoading:n})=>{if(!n.isScheduling&&!n.isRescheduling&&!n.isShunting&&!n.isNavigating)return null;const e=()=>n.isScheduling?"Programmazione lavoro...":n.isRescheduling?"Riprogrammazione lavoro...":n.isShunting?"Risoluzione conflitti...":n.isNavigating?"Navigazione...":"Operazione in corso...";return E.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:E.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-lg flex items-center space-x-3",children:[E.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),E.jsx("span",{className:"text-gray-700 font-medium",children:e()})]})})},t4=(n,e)=>{const t=document.querySelector(n);if(!t){zi("Grafico Gantt non trovato. Assicurati che il grafico sia visibile sullo schermo.");return}const r=Array.from(document.styleSheets);let i="";r.forEach(g=>{try{Array.from(g.cssRules||g.rules||[]).forEach(y=>{i+=y.cssText+`
`})}catch{}});const s=t.cloneNode(!0),o=`
    <!DOCTYPE html>
    <html>
      <head>
        <title>Grafico Gantt - ${e}</title>
        <style>
          ${i}
          body { 
            margin: 0; 
            padding: 20px; 
            font-family: Arial, sans-serif;
          }
          .calendar-section {
            width: 100%;
            overflow-x: auto;
          }
        </style>
      </head>
      <body>
        <div style="text-align: center; margin-bottom: 20px; font-size: 12px; font-weight: bold;">
          Grafico Gantt - ${e}
        </div>
        <div class="calendar-section">
          ${s.outerHTML}
        </div>
      </body>
    </html>
  `,l=new Blob([o],{type:"text/html"}),c=window.URL.createObjectURL(l),d=document.createElement("a");d.href=c;const h=new Date().toISOString().split("T")[0],p=new Date().toISOString().split("T")[1].split(".")[0].replace(/:/g,"-");d.download=`grafico-gantt-${h}-${p}.html`,document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(c)};function n4(){const{data:n=[],isLoading:e,error:t}=cf(),{data:r=[],isLoading:i,error:s}=lf(),{getOdpOrdersByWorkCenter:o,getScheduledOrders:l}=rn(),{selectedWorkCenter:c,isLoading:d,isInitialized:h,showAlert:p,isEditMode:g,toggleEditMode:v,showConflictDialog:y,schedulingLoading:_,setDragPreview:w,clearDragPreview:x,dragPreview:C}=Jt(),{scheduleTask:T,unscheduleTask:R,scheduleTaskFromSlot:D,rescheduleTaskToSlot:O,validateSlotAvailability:M}=_i(),{init:I,cleanup:F}=wf(),z=ur(),V=L5(gx(Ly,{activationConstraint:{distance:0}}),gx(oD,{activationConstraint:{distance:0}})),[ee,re]=k.useState(()=>{const X=new Date;return new Date(Date.UTC(X.getUTCFullYear(),X.getUTCMonth(),X.getUTCDate()))}),[fe,pe]=k.useState(null),ie=e||i||d,[ae,Q]=k.useState(null),[q,Y]=k.useState(""),[L,G]=k.useState(""),[ne,le]=k.useState(""),ue={workCenter:[],department:[],machineType:[],machineName:[]};function ce(X,ye){switch(ye.type){case"SET_FILTER":return{...X,[ye.payload.filterName]:ye.payload.value};case"CLEAR_FILTERS":return ue;default:return X}}const[Ce,se]=k.useReducer(ce,ue);k.useEffect(()=>(h||I(),()=>{F()}),[I,h,F]);const Pe=k.useMemo(()=>c?c==="BOTH"?n:n.filter(X=>X.work_center===c):[],[c,n]),ze=k.useMemo(()=>Pe.filter(ye=>ye.status==="SCHEDULED"),[Pe,c]),Wt=k.useMemo(()=>{if(performance.now(),!r||r.length===0)return{activeMachines:[],workCenters:[],departments:[],machineTypes:[],machineNames:[]};let X=r;c&&c!==it.BOTH&&(X=r.filter(ft=>ft.work_center===c));const ye=X.filter(ft=>ft.status===$i.ACTIVE);if(ye.length===0)return{activeMachines:[],workCenters:[],departments:[],machineTypes:[],machineNames:[]};const Be=new Set,je=new Set,be=new Set,we=new Set;for(const ft of ye)ft.work_center&&Be.add(ft.work_center),ft.department&&je.add(ft.department),ft.machine_type&&be.add(ft.machine_type),ft.machine_name&&we.add(ft.machine_name);const Ie=Array.from(Be).sort(),$e=Array.from(je).sort(),We=Array.from(be).sort(),ot=Array.from(we).sort();return performance.now(),{activeMachines:ye,workCenters:Ie,departments:$e,machineTypes:We,machineNames:ot}},[r,c]),Gt=k.useMemo(()=>{const{activeMachines:X}=Wt;let ye=X;return Ce.workCenter.length>0&&(ye=ye.filter(Be=>Ce.workCenter.includes(Be.work_center))),Ce.department.length>0&&(ye=ye.filter(Be=>Ce.department.includes(Be.department))),Ce.machineType.length>0&&(ye=ye.filter(Be=>Ce.machineType.includes(Be.machine_type))),Ce.machineName.length>0&&(ye=ye.filter(Be=>Ce.machineName.includes(Be.machine_name))),ye},[Wt,Ce]),qn=k.useCallback(async(X,ye="Daily")=>{const{startSchedulingOperation:Be,stopSchedulingOperation:je}=Jt.getState();try{Be("navigate");let be;re(we=>{if(X==="today"){const Ie=new Date,$e=Ie.getUTCFullYear(),We=Ie.getUTCMonth(),ot=Ie.getUTCDate();return be=new Date(Date.UTC($e,We,ot)),be}else if(X==="prev"){if(ye==="Weekly")return be=jo($F(we,1),{weekStartsOn:1}),be;{const Ie=new Date(we);return Ie.setUTCDate(Ie.getUTCDate()-1),be=Ie,be}}else if(X==="next"){if(ye==="Weekly")return be=jo(XT(we,1),{weekStartsOn:1}),be;{const Ie=new Date(we);return Ie.setUTCDate(Ie.getUTCDate()+1),be=Ie,Ie}}return be=we,we})}finally{je()}},[]),ge=k.useCallback(()=>{const X=new Date,ye=X.getUTCFullYear(),Be=X.getUTCMonth(),je=X.getUTCDate(),be=new Date(Date.UTC(ye,Be,je));return ee.getTime()===be.getTime()?"Oggi":xn(ee,"yyyy-MM-dd")},[ee]),Fe=k.useCallback(()=>{se({type:"CLEAR_FILTERS"})},[]),et=k.useCallback((X,ye,Be)=>{if(!X.trim())return;let je=ze.find(be=>be[ye]===X.trim());if(je||(je=ze.find(be=>be[ye]&&be[ye].toLowerCase().includes(X.trim().toLowerCase()))),!je){p(`Lavoro non trovato per ${Be}: ${X}`,"warning");return}xt(je,ye,Be,X)},[ze,r,p]),xt=k.useCallback((X,ye,Be,je)=>{const be=r.find(Ie=>Ie.id===X.scheduled_machine_id);if(!be){p("Macchina non trovata per questo lavoro","error");return}if(se({type:"SET_FILTER",payload:{filterName:"machineName",value:[be.machine_name]}}),se({type:"SET_FILTER",payload:{filterName:"workCenter",value:[be.work_center]}}),se({type:"SET_FILTER",payload:{filterName:"department",value:[be.department]}}),se({type:"SET_FILTER",payload:{filterName:"machineType",value:[be.machine_type]}}),X.scheduled_start_time){const Ie=new Date(X.scheduled_start_time),$e=Ie.getUTCFullYear(),We=Ie.getUTCMonth(),ot=Ie.getUTCDate();re(new Date(Date.UTC($e,We,ot)))}ye==="odp_number"?Y(""):ye==="article_code"?G(""):ye==="nome_cliente"&&le("");const we=X[ye];p(`Lavoro trovato per ${Be} "${we}" su ${be.machine_name}`,"success")},[r,p,Y,G,le,re]),on=k.useRef(null),qe=k.useRef(!1),Ee=k.useCallback(X=>{const ye=X.active.data.current;ye&&ye.type==="task"?pe(ye.task):ye&&ye.type==="event"&&pe(ye.event)},[]),dt=k.useCallback(X=>{const{over:ye}=X;if(ye&&ye.data.current?.type==="slot"){const{machine:Be,hour:je,minute:be,isUnavailable:we,hasScheduledTask:Ie}=ye.data.current;if(we||Ie){Q(null),x();return}const $e=`${Be.id}-${je}-${be}`;if(Q($e),fe){const We=fe.time_remaining||fe.duration||1,ot=Math.ceil(We*4),ft=(je-6)*4+Math.floor(be/15);w({isActive:!0,startSlot:ft,durationSlots:ot,machineId:Be.id})}}else ye&&ye.data.current?.type==="next-day"?(Q("next-day-drop-zone"),x()):ye&&ye.data.current?.type==="previous-day"?(Q("previous-day-drop-zone"),x()):(Q(null),x())},[fe,w,x]),Ue=k.useCallback(async X=>{if(performance.now(),on.current&&clearTimeout(on.current),qe.current)return;pe(null),Q(null),x();const{over:ye,active:Be}=X;if(!ye)return;const je=Be.data.current,be=ye.data.current;if(!(!je||!be)){qe.current=!0;try{await new Promise(we=>{requestAnimationFrame(async()=>{const Ie=performance.now();if(je.type==="task"&&be.type==="slot"){const $e=je.task,{machine:We,hour:ot,minute:ft,isUnavailable:wr,hasScheduledTask:yt}=be;if(yt)return p("Impossibile pianificare il lavoro su uno slot temporale occupato","error"),we();const at=await D($e.id,We,ee,ot,ft,null,z);at?.error?p(at.error,"error"):at?.conflict&&y(at)}else if(je.type==="event"&&be.type==="slot"){const $e=je.event,{machine:We,hour:ot,minute:ft,isUnavailable:wr,hasScheduledTask:yt}=be;if(yt)return p("Impossibile riprogrammare il lavoro su uno slot temporale occupato","error"),we();const at=await O($e.id,We,ee,ot,ft,z);at?.error?p(at.error,"error"):at?.conflict&&y(at)}else if(je.type==="event"&&be.type==="pool"){const $e=je.event;R($e.id,z)}else(je.type==="task"||je.type==="event")&&be.type==="next-day"?p("Navigazione al giorno successivo completata","success"):(je.type==="task"||je.type==="event")&&be.type==="previous-day"&&p("Navigazione al giorno precedente completata","success");we()})})}catch{p("Si è verificato un errore durante l'operazione di trascinamento","error")}finally{qe.current=!1}}},[ee,D,O,R,p,y]);return ie?E.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:E.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-lg flex items-center space-x-3",children:[E.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),E.jsx("span",{className:"text-gray-700 font-medium",children:"Caricamento Scheduler Produzione..."})]})}):t||s?E.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:E.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-lg text-center",children:[E.jsx("div",{className:"text-red-600 mb-4",children:E.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 19.5c-.77.833.192 2.5 1.732 2.5z"})})}),E.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Errore nel caricamento dei dati"}),E.jsx("p",{className:"text-gray-600 mb-4",children:t?.message||s?.message||"Errore sconosciuto"}),E.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Riprova"})]})}):c?E.jsxs(E.Fragment,{children:[E.jsx(e4,{schedulingLoading:_}),E.jsxs(M3,{sensors:V,onDragStart:Ee,onDragOver:dt,onDragEnd:Ue,children:[E.jsxs("div",{className:`content-section ${g?"edit-mode":""}`,children:[E.jsxs("div",{className:"task-pool-section",children:[E.jsxs("div",{className:"task-pool-header",children:[E.jsx("h2",{className:"text-[10px] font-semibold text-gray-900",children:"Pool Lavori"}),E.jsx(Ki,{variant:g?"destructive":"default",size:"sm",onClick:v,title:g?"Disabilita modalità modifica":"Abilita modalità modifica",children:g?"Disabilita Modalità Modifica":"Abilita Modalità Modifica"})]}),E.jsx(k.Suspense,{fallback:E.jsx(kx,{}),children:E.jsx(Z3,{})})]}),E.jsxs("div",{className:"section-controls",children:[E.jsx("div",{className:"task-pool-header",children:E.jsx("h2",{className:"text-[10px] font-semibold text-gray-900",children:"Filtri"})}),E.jsxs("div",{className:"filters-grid",children:[E.jsx("div",{className:"filters-actions-left",children:E.jsx(Ki,{variant:"secondary",size:"sm",onClick:Fe,title:"Clear all filters",children:"Cancella Filtri"})}),E.jsx(ho,{label:"ODP",options:ze.map(X=>X.odp_number).filter(Boolean),selectedOptions:q?[q]:[],onSelectionChange:X=>{X.length>0?(Y(X[0]),et(X[0],"odp_number","ODP")):Y("")},searchPlaceholder:"Cerca ODP...",id:"odp_filter",width:"150px"}),E.jsx(ho,{label:"Codice Articolo",options:ze.map(X=>X.article_code).filter(Boolean),selectedOptions:L?[L]:[],onSelectionChange:X=>{X.length>0?(G(X[0]),et(X[0],"article_code","codice articolo")):G("")},searchPlaceholder:"Cerca Articolo...",id:"article_filter",width:"150px"}),E.jsx(ho,{label:"Nome Cliente",options:ze.map(X=>X.nome_cliente).filter(Boolean),selectedOptions:ne?[ne]:[],onSelectionChange:X=>{X.length>0?(le(X[0]),et(X[0],"nome_cliente","cliente")):le("")},searchPlaceholder:"Cerca Cliente...",id:"customer_filter",width:"150px"}),E.jsx(ho,{label:"Centro di Lavoro",options:Wt.workCenters,selectedOptions:Ce.workCenter,onSelectionChange:X=>se({type:"SET_FILTER",payload:{filterName:"workCenter",value:X}}),searchPlaceholder:"Cerca Centri di Lavoro",id:"work_center_filter",width:"150px"}),E.jsx(ho,{label:"Reparto",options:Wt.departments,selectedOptions:Ce.department,onSelectionChange:X=>se({type:"SET_FILTER",payload:{filterName:"department",value:X}}),searchPlaceholder:"Cerca Reparti",id:"department_filter",width:"150px"}),E.jsx(ho,{label:"Tipo Macchina",options:Wt.machineTypes,selectedOptions:Ce.machineType,onSelectionChange:X=>se({type:"SET_FILTER",payload:{filterName:"machineType",value:X}}),searchPlaceholder:"Cerca Tipi di Macchina",id:"machine_type_filter",width:"150px"}),E.jsx(ho,{label:"Nome Macchina",options:Wt.machineNames,selectedOptions:Ce.machineName,onSelectionChange:X=>se({type:"SET_FILTER",payload:{filterName:"machineName",value:X}}),searchPlaceholder:"Cerca Nomi Macchine",id:"machine_name_filter",width:"150px"}),E.jsx("div",{className:"filters-actions-right",children:E.jsx(Ki,{variant:"secondary",size:"sm",onClick:()=>t4(".calendar-section .calendar-grid-container",ge()),title:"Download exact Gantt chart as HTML file",children:"Scarica HTML"})})]})]}),E.jsxs("div",{className:"calendar-section relative",children:[E.jsx(k.Suspense,{fallback:E.jsx(kx,{}),children:E.jsx(J3,{machines:Gt,currentDate:ee,dropTargetId:ae,dragPreview:C,onNavigateToNextDay:X=>qn("next",X),onNavigateToPreviousDay:X=>qn("prev",X)})}),(_.isScheduling||_.isRescheduling||_.isShunting||_.isNavigating)&&E.jsx("div",{className:"absolute inset-0 bg-white z-40"})]})]}),E.jsx(X3,{children:fe?E.jsx("div",{style:{background:"#1e293b",color:"#ffffff",padding:"4px 8px",borderRadius:"4px",fontSize:"10px",fontWeight:"400",zIndex:9999,position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%) rotate(3deg) scale(1.05)",border:"1px solid #2d3a4b",boxShadow:"0 8px 25px rgba(0,0,0,0.3)",pointerEvents:"none",minHeight:"15px",display:"flex",alignItems:"center",justifyContent:"center",userSelect:"none",whiteSpace:"nowrap"},children:fe.odp_number}):null})]})]}):E.jsx("div",{className:"p-1 bg-white rounded shadow-sm border",children:E.jsx("div",{className:"text-center py-1 text-red-600 text-[10px]",children:"Seleziona un centro di lavoro per visualizzare i dati dello scheduler."})})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function ru(n){return n+.5|0}const Ps=(n,e,t)=>Math.max(Math.min(n,t),e);function rc(n){return Ps(ru(n*2.55),0,255)}function Us(n){return Ps(ru(n*255),0,255)}function Bi(n){return Ps(ru(n/2.55)/100,0,1)}function Ax(n){return Ps(ru(n*100),0,100)}const Mr={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},fv=[..."0123456789ABCDEF"],r4=n=>fv[n&15],i4=n=>fv[(n&240)>>4]+fv[n&15],Ld=n=>(n&240)>>4===(n&15),s4=n=>Ld(n.r)&&Ld(n.g)&&Ld(n.b)&&Ld(n.a);function o4(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&Mr[n[1]]*17,g:255&Mr[n[2]]*17,b:255&Mr[n[3]]*17,a:e===5?Mr[n[4]]*17:255}:(e===7||e===9)&&(t={r:Mr[n[1]]<<4|Mr[n[2]],g:Mr[n[3]]<<4|Mr[n[4]],b:Mr[n[5]]<<4|Mr[n[6]],a:e===9?Mr[n[7]]<<4|Mr[n[8]]:255})),t}const a4=(n,e)=>n<255?e(n):"";function l4(n){var e=s4(n)?r4:i4;return n?"#"+e(n.r)+e(n.g)+e(n.b)+a4(n.a,e):void 0}const c4=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function hD(n,e,t){const r=e*Math.min(t,1-t),i=(s,o=(s+n/30)%12)=>t-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function u4(n,e,t){const r=(i,s=(i+n/60)%6)=>t-t*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function d4(n,e,t){const r=hD(n,1,.5);let i;for(e+t>1&&(i=1/(e+t),e*=i,t*=i),i=0;i<3;i++)r[i]*=1-e-t,r[i]+=e;return r}function h4(n,e,t,r,i){return n===i?(e-t)/r+(e<t?6:0):e===i?(t-n)/r+2:(n-e)/r+4}function Uy(n){const t=n.r/255,r=n.g/255,i=n.b/255,s=Math.max(t,r,i),o=Math.min(t,r,i),l=(s+o)/2;let c,d,h;return s!==o&&(h=s-o,d=l>.5?h/(2-s-o):h/(s+o),c=h4(t,r,i,h,s),c=c*60+.5),[c|0,d||0,l]}function By(n,e,t,r){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,r)).map(Us)}function Hy(n,e,t){return By(hD,n,e,t)}function f4(n,e,t){return By(d4,n,e,t)}function p4(n,e,t){return By(u4,n,e,t)}function fD(n){return(n%360+360)%360}function g4(n){const e=c4.exec(n);let t=255,r;if(!e)return;e[5]!==r&&(t=e[6]?rc(+e[5]):Us(+e[5]));const i=fD(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=f4(i,s,o):e[1]==="hsv"?r=p4(i,s,o):r=Hy(i,s,o),{r:r[0],g:r[1],b:r[2],a:t}}function m4(n,e){var t=Uy(n);t[0]=fD(t[0]+e),t=Hy(t),n.r=t[0],n.g=t[1],n.b=t[2]}function v4(n){if(!n)return;const e=Uy(n),t=e[0],r=Ax(e[1]),i=Ax(e[2]);return n.a<255?`hsla(${t}, ${r}%, ${i}%, ${Bi(n.a)})`:`hsl(${t}, ${r}%, ${i}%)`}const Dx={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Rx={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function y4(){const n={},e=Object.keys(Rx),t=Object.keys(Dx);let r,i,s,o,l;for(r=0;r<e.length;r++){for(o=l=e[r],i=0;i<t.length;i++)s=t[i],l=l.replace(s,Dx[s]);s=parseInt(Rx[o],16),n[l]=[s>>16&255,s>>8&255,s&255]}return n}let Fd;function b4(n){Fd||(Fd=y4(),Fd.transparent=[0,0,0,0]);const e=Fd[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const _4=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function w4(n){const e=_4.exec(n);let t=255,r,i,s;if(e){if(e[7]!==r){const o=+e[7];t=e[8]?rc(o):Ps(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?rc(r):Ps(r,0,255)),i=255&(e[4]?rc(i):Ps(i,0,255)),s=255&(e[6]?rc(s):Ps(s,0,255)),{r,g:i,b:s,a:t}}}function S4(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Bi(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const om=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,ka=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function x4(n,e,t){const r=ka(Bi(n.r)),i=ka(Bi(n.g)),s=ka(Bi(n.b));return{r:Us(om(r+t*(ka(Bi(e.r))-r))),g:Us(om(i+t*(ka(Bi(e.g))-i))),b:Us(om(s+t*(ka(Bi(e.b))-s))),a:n.a+t*(e.a-n.a)}}function Ud(n,e,t){if(n){let r=Uy(n);r[e]=Math.max(0,Math.min(r[e]+r[e]*t,e===0?360:1)),r=Hy(r),n.r=r[0],n.g=r[1],n.b=r[2]}}function pD(n,e){return n&&Object.assign(e||{},n)}function Ox(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=Us(n[3]))):(e=pD(n,{r:0,g:0,b:0,a:1}),e.a=Us(e.a)),e}function E4(n){return n.charAt(0)==="r"?w4(n):g4(n)}class Nc{constructor(e){if(e instanceof Nc)return e;const t=typeof e;let r;t==="object"?r=Ox(e):t==="string"&&(r=o4(e)||b4(e)||E4(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=pD(this._rgb);return e&&(e.a=Bi(e.a)),e}set rgb(e){this._rgb=Ox(e)}rgbString(){return this._valid?S4(this._rgb):void 0}hexString(){return this._valid?l4(this._rgb):void 0}hslString(){return this._valid?v4(this._rgb):void 0}mix(e,t){if(e){const r=this.rgb,i=e.rgb;let s;const o=t===s?.5:t,l=2*o-1,c=r.a-i.a,d=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;s=1-d,r.r=255&d*r.r+s*i.r+.5,r.g=255&d*r.g+s*i.g+.5,r.b=255&d*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,t){return e&&(this._rgb=x4(this._rgb,e._rgb,t)),this}clone(){return new Nc(this.rgb)}alpha(e){return this._rgb.a=Us(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=ru(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Ud(this._rgb,2,e),this}darken(e){return Ud(this._rgb,2,-e),this}saturate(e){return Ud(this._rgb,1,e),this}desaturate(e){return Ud(this._rgb,1,-e),this}rotate(e){return m4(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Pi(){}const C4=(()=>{let n=0;return()=>n++})();function kt(n){return n==null}function gn(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Je(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Ln(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function hi(n,e){return Ln(n)?n:e}function Ye(n,e){return typeof n>"u"?e:n}const T4=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/e,gD=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function Rt(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function mt(n,e,t,r){let i,s,o;if(gn(n))for(s=n.length,i=0;i<s;i++)e.call(t,n[i],i);else if(Je(n))for(o=Object.keys(n),s=o.length,i=0;i<s;i++)e.call(t,n[o[i]],o[i])}function $h(n,e){let t,r,i,s;if(!n||!e||n.length!==e.length)return!1;for(t=0,r=n.length;t<r;++t)if(i=n[t],s=e[t],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function Wh(n){if(gn(n))return n.map(Wh);if(Je(n)){const e=Object.create(null),t=Object.keys(n),r=t.length;let i=0;for(;i<r;++i)e[t[i]]=Wh(n[t[i]]);return e}return n}function mD(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function k4(n,e,t,r){if(!mD(n))return;const i=e[n],s=t[n];Je(i)&&Je(s)?Pc(i,s,r):e[n]=Wh(s)}function Pc(n,e,t){const r=gn(e)?e:[e],i=r.length;if(!Je(n))return n;t=t||{};const s=t.merger||k4;let o;for(let l=0;l<i;++l){if(o=r[l],!Je(o))continue;const c=Object.keys(o);for(let d=0,h=c.length;d<h;++d)s(c[d],n,o,t)}return n}function vc(n,e){return Pc(n,e,{merger:A4})}function A4(n,e,t){if(!mD(n))return;const r=e[n],i=t[n];Je(r)&&Je(i)?vc(r,i):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=Wh(i))}const Ix={"":n=>n,x:n=>n.x,y:n=>n.y};function D4(n){const e=n.split("."),t=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(t.push(r),r="");return t}function R4(n){const e=D4(n);return t=>{for(const r of e){if(r==="")break;t=t&&t[r]}return t}}function jc(n,e){return(Ix[e]||(Ix[e]=R4(e)))(n)}function zy(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Vh=n=>typeof n<"u",Ws=n=>typeof n=="function",Mx=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0};function O4(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const vt=Math.PI,$t=2*vt,I4=$t+vt,qh=Number.POSITIVE_INFINITY,M4=vt/180,mn=vt/2,fo=vt/4,Nx=vt*2/3,vD=Math.log10,Qa=Math.sign;function yc(n,e,t){return Math.abs(n-e)<t}function Px(n){const e=Math.round(n);n=yc(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor(vD(n))),r=n/t;return(r<=1?1:r<=2?2:r<=5?5:10)*t}function N4(n){const e=[],t=Math.sqrt(n);let r;for(r=1;r<t;r++)n%r===0&&(e.push(r),e.push(n/r));return t===(t|0)&&e.push(t),e.sort((i,s)=>i-s).pop(),e}function P4(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function Lc(n){return!P4(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function j4(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}function L4(n,e,t){let r,i,s;for(r=0,i=n.length;r<i;r++)s=n[r][t],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Gi(n){return n*(vt/180)}function F4(n){return n*(180/vt)}function jx(n){if(!Ln(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function yD(n,e){const t=e.x-n.x,r=e.y-n.y,i=Math.sqrt(t*t+r*r);let s=Math.atan2(r,t);return s<-.5*vt&&(s+=$t),{angle:s,distance:i}}function pv(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function U4(n,e){return(n-e+I4)%$t-vt}function mr(n){return(n%$t+$t)%$t}function Fc(n,e,t,r){const i=mr(n),s=mr(e),o=mr(t),l=mr(s-i),c=mr(o-i),d=mr(i-s),h=mr(i-o);return i===s||i===o||r&&s===o||l>c&&d<h}function $n(n,e,t){return Math.max(e,Math.min(t,n))}function B4(n){return $n(n,-32768,32767)}function Ao(n,e,t,r=1e-6){return n>=Math.min(e,t)-r&&n<=Math.max(e,t)+r}function $y(n,e,t){t=t||(o=>n[o]<e);let r=n.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,t(s)?i=s:r=s;return{lo:i,hi:r}}const Do=(n,e,t,r)=>$y(n,t,r?i=>{const s=n[i][e];return s<t||s===t&&n[i+1][e]===t}:i=>n[i][e]<t),H4=(n,e,t)=>$y(n,t,r=>n[r][e]>=t);function z4(n,e,t){let r=0,i=n.length;for(;r<i&&n[r]<e;)r++;for(;i>r&&n[i-1]>t;)i--;return r>0||i<n.length?n.slice(r,i):n}const bD=["push","pop","shift","splice","unshift"];function $4(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),bD.forEach(t=>{const r="_onData"+zy(t),i=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...s){const o=i.apply(this,s);return n._chartjs.listeners.forEach(l=>{typeof l[r]=="function"&&l[r](...s)}),o}})})}function Lx(n,e){const t=n._chartjs;if(!t)return;const r=t.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(bD.forEach(s=>{delete n[s]}),delete n._chartjs)}function W4(n){const e=new Set(n);return e.size===n.length?n:Array.from(e)}const _D=(function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame})();function wD(n,e){let t=[],r=!1;return function(...i){t=i,r||(r=!0,_D.call(window,()=>{r=!1,n.apply(e,t)}))}}function V4(n,e){let t;return function(...r){return e?(clearTimeout(t),t=setTimeout(n,e,r)):n.apply(this,r),e}}const Wy=n=>n==="start"?"left":n==="end"?"right":"center",Nn=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,q4=(n,e,t,r)=>n===(r?"left":"right")?t:n==="center"?(e+t)/2:e;function G4(n,e,t){const r=e.length;let i=0,s=r;if(n._sorted){const{iScale:o,vScale:l,_parsed:c}=n,d=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,h=o.axis,{min:p,max:g,minDefined:v,maxDefined:y}=o.getUserBounds();if(v){if(i=Math.min(Do(c,h,p).lo,t?r:Do(e,h,o.getPixelForValue(p)).lo),d){const _=c.slice(0,i+1).reverse().findIndex(w=>!kt(w[l.axis]));i-=Math.max(0,_)}i=$n(i,0,r-1)}if(y){let _=Math.max(Do(c,o.axis,g,!0).hi+1,t?0:Do(e,h,o.getPixelForValue(g),!0).hi+1);if(d){const w=c.slice(_-1).findIndex(x=>!kt(x[l.axis]));_+=Math.max(0,w)}s=$n(_,i,r)-i}else s=r-i}return{start:i,count:s}}function Y4(n){const{xScale:e,yScale:t,_scaleRanges:r}=n,i={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!r)return n._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==t.min||r.ymax!==t.max;return Object.assign(r,i),s}const Bd=n=>n===0||n===1,Fx=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*$t/t)),Ux=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*$t/t)+1,bc={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*mn)+1,easeOutSine:n=>Math.sin(n*mn),easeInOutSine:n=>-.5*(Math.cos(vt*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>Bd(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>Bd(n)?n:Fx(n,.075,.3),easeOutElastic:n=>Bd(n)?n:Ux(n,.075,.3),easeInOutElastic(n){return Bd(n)?n:n<.5?.5*Fx(n*2,.1125,.45):.5+.5*Ux(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-bc.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?bc.easeInBounce(n*2)*.5:bc.easeOutBounce(n*2-1)*.5+.5};function Vy(n){if(n&&typeof n=="object"){const e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Bx(n){return Vy(n)?n:new Nc(n)}function am(n){return Vy(n)?n:new Nc(n).saturate(.5).darken(.1).hexString()}const K4=["x","y","borderWidth","radius","tension"],Q4=["color","borderColor","backgroundColor"];function X4(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:Q4},numbers:{type:"number",properties:K4}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function Z4(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Hx=new Map;function J4(n,e){e=e||{};const t=n+JSON.stringify(e);let r=Hx.get(t);return r||(r=new Intl.NumberFormat(n,e),Hx.set(t,r)),r}function qy(n,e,t){return J4(e,t).format(n)}const e6={values(n){return gn(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";const r=this.chart.options.locale;let i,s=n;if(t.length>1){const d=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(d<1e-4||d>1e15)&&(i="scientific"),s=t6(n,t)}const o=vD(Math.abs(s)),l=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:i,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),qy(n,r,c)}};function t6(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var SD={formatters:e6};function n6(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:SD.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Uo=Object.create(null),gv=Object.create(null);function _c(n,e){if(!e)return n;const t=e.split(".");for(let r=0,i=t.length;r<i;++r){const s=t[r];n=n[s]||(n[s]=Object.create(null))}return n}function lm(n,e,t){return typeof e=="string"?Pc(_c(n,e),t):Pc(_c(n,""),e)}class r6{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>am(i.backgroundColor),this.hoverBorderColor=(r,i)=>am(i.borderColor),this.hoverColor=(r,i)=>am(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return lm(this,e,t)}get(e){return _c(this,e)}describe(e,t){return lm(gv,e,t)}override(e,t){return lm(Uo,e,t)}route(e,t,r,i){const s=_c(this,e),o=_c(this,r),l="_"+t;Object.defineProperties(s,{[l]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){const c=this[l],d=o[i];return Je(c)?Object.assign({},d,c):Ye(c,d)},set(c){this[l]=c}}})}apply(e){e.forEach(t=>t(this))}}var en=new r6({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[X4,Z4,n6]);function i6(n){return!n||kt(n.size)||kt(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function zx(n,e,t,r,i){let s=e[i];return s||(s=e[i]=n.measureText(i).width,t.push(i)),s>r&&(r=s),r}function po(n,e,t){const r=n.currentDevicePixelRatio,i=t!==0?Math.max(t/2,.5):0;return Math.round((e-i)*r)/r+i}function $x(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function mv(n,e,t,r){xD(n,e,t,r,null)}function xD(n,e,t,r,i){let s,o,l,c,d,h,p,g;const v=e.pointStyle,y=e.rotation,_=e.radius;let w=(y||0)*M4;if(v&&typeof v=="object"&&(s=v.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){n.save(),n.translate(t,r),n.rotate(w),n.drawImage(v,-v.width/2,-v.height/2,v.width,v.height),n.restore();return}if(!(isNaN(_)||_<=0)){switch(n.beginPath(),v){default:i?n.ellipse(t,r,i/2,_,0,0,$t):n.arc(t,r,_,0,$t),n.closePath();break;case"triangle":h=i?i/2:_,n.moveTo(t+Math.sin(w)*h,r-Math.cos(w)*_),w+=Nx,n.lineTo(t+Math.sin(w)*h,r-Math.cos(w)*_),w+=Nx,n.lineTo(t+Math.sin(w)*h,r-Math.cos(w)*_),n.closePath();break;case"rectRounded":d=_*.516,c=_-d,o=Math.cos(w+fo)*c,p=Math.cos(w+fo)*(i?i/2-d:c),l=Math.sin(w+fo)*c,g=Math.sin(w+fo)*(i?i/2-d:c),n.arc(t-p,r-l,d,w-vt,w-mn),n.arc(t+g,r-o,d,w-mn,w),n.arc(t+p,r+l,d,w,w+mn),n.arc(t-g,r+o,d,w+mn,w+vt),n.closePath();break;case"rect":if(!y){c=Math.SQRT1_2*_,h=i?i/2:c,n.rect(t-h,r-c,2*h,2*c);break}w+=fo;case"rectRot":p=Math.cos(w)*(i?i/2:_),o=Math.cos(w)*_,l=Math.sin(w)*_,g=Math.sin(w)*(i?i/2:_),n.moveTo(t-p,r-l),n.lineTo(t+g,r-o),n.lineTo(t+p,r+l),n.lineTo(t-g,r+o),n.closePath();break;case"crossRot":w+=fo;case"cross":p=Math.cos(w)*(i?i/2:_),o=Math.cos(w)*_,l=Math.sin(w)*_,g=Math.sin(w)*(i?i/2:_),n.moveTo(t-p,r-l),n.lineTo(t+p,r+l),n.moveTo(t+g,r-o),n.lineTo(t-g,r+o);break;case"star":p=Math.cos(w)*(i?i/2:_),o=Math.cos(w)*_,l=Math.sin(w)*_,g=Math.sin(w)*(i?i/2:_),n.moveTo(t-p,r-l),n.lineTo(t+p,r+l),n.moveTo(t+g,r-o),n.lineTo(t-g,r+o),w+=fo,p=Math.cos(w)*(i?i/2:_),o=Math.cos(w)*_,l=Math.sin(w)*_,g=Math.sin(w)*(i?i/2:_),n.moveTo(t-p,r-l),n.lineTo(t+p,r+l),n.moveTo(t+g,r-o),n.lineTo(t-g,r+o);break;case"line":o=i?i/2:Math.cos(w)*_,l=Math.sin(w)*_,n.moveTo(t-o,r-l),n.lineTo(t+o,r+l);break;case"dash":n.moveTo(t,r),n.lineTo(t+Math.cos(w)*(i?i/2:_),r+Math.sin(w)*_);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function Uc(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function kf(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function Af(n){n.restore()}function s6(n,e,t,r,i){if(!e)return n.lineTo(t.x,t.y);if(i==="middle"){const s=(e.x+t.x)/2;n.lineTo(s,e.y),n.lineTo(s,t.y)}else i==="after"!=!!r?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function o6(n,e,t,r){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?t.cp2x:t.cp1x,r?t.cp2y:t.cp1y,t.x,t.y)}function a6(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),kt(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function l6(n,e,t,r,i){if(i.strikethrough||i.underline){const s=n.measureText(r),o=e-s.actualBoundingBoxLeft,l=e+s.actualBoundingBoxRight,c=t-s.actualBoundingBoxAscent,d=t+s.actualBoundingBoxDescent,h=i.strikethrough?(c+d)/2:d;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=i.decorationWidth||2,n.moveTo(o,h),n.lineTo(l,h),n.stroke()}}function c6(n,e){const t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function Bc(n,e,t,r,i,s={}){const o=gn(e)?e:[e],l=s.strokeWidth>0&&s.strokeColor!=="";let c,d;for(n.save(),n.font=i.string,a6(n,s),c=0;c<o.length;++c)d=o[c],s.backdrop&&c6(n,s.backdrop),l&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),kt(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(d,t,r,s.maxWidth)),n.fillText(d,t,r,s.maxWidth),l6(n,t,r,d,s),r+=Number(i.lineHeight);n.restore()}function vv(n,e){const{x:t,y:r,w:i,h:s,radius:o}=e;n.arc(t+o.topLeft,r+o.topLeft,o.topLeft,1.5*vt,vt,!0),n.lineTo(t,r+s-o.bottomLeft),n.arc(t+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,vt,mn,!0),n.lineTo(t+i-o.bottomRight,r+s),n.arc(t+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,mn,0,!0),n.lineTo(t+i,r+o.topRight),n.arc(t+i-o.topRight,r+o.topRight,o.topRight,0,-mn,!0),n.lineTo(t+o.topLeft,r)}const u6=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,d6=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function h6(n,e){const t=(""+n).match(u6);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}const f6=n=>+n||0;function Gy(n,e){const t={},r=Je(e),i=r?Object.keys(e):e,s=Je(n)?r?o=>Ye(n[o],n[e[o]]):o=>n[o]:()=>n;for(const o of i)t[o]=f6(s(o));return t}function p6(n){return Gy(n,{top:"y",right:"x",bottom:"y",left:"x"})}function wc(n){return Gy(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Fr(n){const e=p6(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function jn(n,e){n=n||{},e=e||en.font;let t=Ye(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let r=Ye(n.style,e.style);r&&!(""+r).match(d6)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:Ye(n.family,e.family),lineHeight:h6(Ye(n.lineHeight,e.lineHeight),t),size:t,style:r,weight:Ye(n.weight,e.weight),string:""};return i.string=i6(i),i}function Hd(n,e,t,r){let i,s,o;for(i=0,s=n.length;i<s;++i)if(o=n[i],o!==void 0&&o!==void 0)return o}function g6(n,e,t){const{min:r,max:i}=n,s=gD(e,(i-r)/2),o=(l,c)=>t&&l===0?0:l+c;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function Ko(n,e){return Object.assign(Object.create(n),e)}function Yy(n,e=[""],t,r,i=()=>n[0]){const s=t||n;typeof r>"u"&&(r=kD("_fallback",n));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:s,_fallback:r,_getTarget:i,override:l=>Yy([l,...n],e,s,r)};return new Proxy(o,{deleteProperty(l,c){return delete l[c],delete l._keys,delete n[0][c],!0},get(l,c){return CD(l,c,()=>x6(c,e,n,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(l,c){return Vx(l).includes(c)},ownKeys(l){return Vx(l)},set(l,c,d){const h=l._storage||(l._storage=i());return l[c]=h[c]=d,delete l._keys,!0}})}function Xa(n,e,t,r){const i={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:ED(n,r),setContext:s=>Xa(n,s,t,r),override:s=>Xa(n.override(s),e,t,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete n[o],!0},get(s,o,l){return CD(s,o,()=>v6(s,o,l))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(s,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(s,o,l){return n[o]=l,delete s[o],!0}})}function ED(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=n;return{allKeys:i,scriptable:t,indexable:r,isScriptable:Ws(t)?t:()=>t,isIndexable:Ws(r)?r:()=>r}}const m6=(n,e)=>n?n+zy(e):e,Ky=(n,e)=>Je(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function CD(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];const r=t();return n[e]=r,r}function v6(n,e,t){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=n;let l=r[e];return Ws(l)&&o.isScriptable(e)&&(l=y6(e,l,n,t)),gn(l)&&l.length&&(l=b6(e,l,n,o.isIndexable)),Ky(e,l)&&(l=Xa(l,i,s&&s[e],o)),l}function y6(n,e,t,r){const{_proxy:i,_context:s,_subProxy:o,_stack:l}=t;if(l.has(n))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+n);l.add(n);let c=e(s,o||r);return l.delete(n),Ky(n,c)&&(c=Qy(i._scopes,i,n,c)),c}function b6(n,e,t,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:l}=t;if(typeof s.index<"u"&&r(n))return e[s.index%e.length];if(Je(e[0])){const c=e,d=i._scopes.filter(h=>h!==c);e=[];for(const h of c){const p=Qy(d,i,n,h);e.push(Xa(p,s,o&&o[n],l))}}return e}function TD(n,e,t){return Ws(n)?n(e,t):n}const _6=(n,e)=>n===!0?e:typeof n=="string"?jc(e,n):void 0;function w6(n,e,t,r,i){for(const s of e){const o=_6(t,s);if(o){n.add(o);const l=TD(o._fallback,t,i);if(typeof l<"u"&&l!==t&&l!==r)return l}else if(o===!1&&typeof r<"u"&&t!==r)return null}return!1}function Qy(n,e,t,r){const i=e._rootScopes,s=TD(e._fallback,t,r),o=[...n,...i],l=new Set;l.add(r);let c=Wx(l,o,t,s||t,r);return c===null||typeof s<"u"&&s!==t&&(c=Wx(l,o,s,c,r),c===null)?!1:Yy(Array.from(l),[""],i,s,()=>S6(e,t,r))}function Wx(n,e,t,r,i){for(;t;)t=w6(n,e,t,r,i);return t}function S6(n,e,t){const r=n._getTarget();e in r||(r[e]={});const i=r[e];return gn(i)&&Je(t)?t:i||{}}function x6(n,e,t,r){let i;for(const s of e)if(i=kD(m6(s,n),t),typeof i<"u")return Ky(n,i)?Qy(t,r,n,i):i}function kD(n,e){for(const t of e){if(!t)continue;const r=t[n];if(typeof r<"u")return r}}function Vx(n){let e=n._keys;return e||(e=n._keys=E6(n._scopes)),e}function E6(n){const e=new Set;for(const t of n)for(const r of Object.keys(t).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}const C6=Number.EPSILON||1e-14,Za=(n,e)=>e<n.length&&!n[e].skip&&n[e],AD=n=>n==="x"?"y":"x";function T6(n,e,t,r){const i=n.skip?e:n,s=e,o=t.skip?e:t,l=pv(s,i),c=pv(o,s);let d=l/(l+c),h=c/(l+c);d=isNaN(d)?0:d,h=isNaN(h)?0:h;const p=r*d,g=r*h;return{previous:{x:s.x-p*(o.x-i.x),y:s.y-p*(o.y-i.y)},next:{x:s.x+g*(o.x-i.x),y:s.y+g*(o.y-i.y)}}}function k6(n,e,t){const r=n.length;let i,s,o,l,c,d=Za(n,0);for(let h=0;h<r-1;++h)if(c=d,d=Za(n,h+1),!(!c||!d)){if(yc(e[h],0,C6)){t[h]=t[h+1]=0;continue}i=t[h]/e[h],s=t[h+1]/e[h],l=Math.pow(i,2)+Math.pow(s,2),!(l<=9)&&(o=3/Math.sqrt(l),t[h]=i*o*e[h],t[h+1]=s*o*e[h])}}function A6(n,e,t="x"){const r=AD(t),i=n.length;let s,o,l,c=Za(n,0);for(let d=0;d<i;++d){if(o=l,l=c,c=Za(n,d+1),!l)continue;const h=l[t],p=l[r];o&&(s=(h-o[t])/3,l[`cp1${t}`]=h-s,l[`cp1${r}`]=p-s*e[d]),c&&(s=(c[t]-h)/3,l[`cp2${t}`]=h+s,l[`cp2${r}`]=p+s*e[d])}}function D6(n,e="x"){const t=AD(e),r=n.length,i=Array(r).fill(0),s=Array(r);let o,l,c,d=Za(n,0);for(o=0;o<r;++o)if(l=c,c=d,d=Za(n,o+1),!!c){if(d){const h=d[e]-c[e];i[o]=h!==0?(d[t]-c[t])/h:0}s[o]=l?d?Qa(i[o-1])!==Qa(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}k6(n,i,s),A6(n,s,e)}function zd(n,e,t){return Math.max(Math.min(n,t),e)}function R6(n,e){let t,r,i,s,o,l=Uc(n[0],e);for(t=0,r=n.length;t<r;++t)o=s,s=l,l=t<r-1&&Uc(n[t+1],e),s&&(i=n[t],o&&(i.cp1x=zd(i.cp1x,e.left,e.right),i.cp1y=zd(i.cp1y,e.top,e.bottom)),l&&(i.cp2x=zd(i.cp2x,e.left,e.right),i.cp2y=zd(i.cp2y,e.top,e.bottom)))}function O6(n,e,t,r,i){let s,o,l,c;if(e.spanGaps&&(n=n.filter(d=>!d.skip)),e.cubicInterpolationMode==="monotone")D6(n,i);else{let d=r?n[n.length-1]:n[0];for(s=0,o=n.length;s<o;++s)l=n[s],c=T6(d,l,n[Math.min(s+1,o-(r?0:1))%o],e.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,d=l}e.capBezierPoints&&R6(n,t)}function Xy(){return typeof window<"u"&&typeof document<"u"}function Zy(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Gh(n,e,t){let r;return typeof n=="string"?(r=parseInt(n,10),n.indexOf("%")!==-1&&(r=r/100*e.parentNode[t])):r=n,r}const Df=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function I6(n,e){return Df(n).getPropertyValue(e)}const M6=["top","right","bottom","left"];function Mo(n,e,t){const r={};t=t?"-"+t:"";for(let i=0;i<4;i++){const s=M6[i];r[s]=parseFloat(n[e+"-"+s+t])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const N6=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function P6(n,e){const t=n.touches,r=t&&t.length?t[0]:n,{offsetX:i,offsetY:s}=r;let o=!1,l,c;if(N6(i,s,n.target))l=i,c=s;else{const d=e.getBoundingClientRect();l=r.clientX-d.left,c=r.clientY-d.top,o=!0}return{x:l,y:c,box:o}}function _o(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:r}=e,i=Df(t),s=i.boxSizing==="border-box",o=Mo(i,"padding"),l=Mo(i,"border","width"),{x:c,y:d,box:h}=P6(n,t),p=o.left+(h&&l.left),g=o.top+(h&&l.top);let{width:v,height:y}=e;return s&&(v-=o.width+l.width,y-=o.height+l.height),{x:Math.round((c-p)/v*t.width/r),y:Math.round((d-g)/y*t.height/r)}}function j6(n,e,t){let r,i;if(e===void 0||t===void 0){const s=n&&Zy(n);if(!s)e=n.clientWidth,t=n.clientHeight;else{const o=s.getBoundingClientRect(),l=Df(s),c=Mo(l,"border","width"),d=Mo(l,"padding");e=o.width-d.width-c.width,t=o.height-d.height-c.height,r=Gh(l.maxWidth,s,"clientWidth"),i=Gh(l.maxHeight,s,"clientHeight")}}return{width:e,height:t,maxWidth:r||qh,maxHeight:i||qh}}const js=n=>Math.round(n*10)/10;function L6(n,e,t,r){const i=Df(n),s=Mo(i,"margin"),o=Gh(i.maxWidth,n,"clientWidth")||qh,l=Gh(i.maxHeight,n,"clientHeight")||qh,c=j6(n,e,t);let{width:d,height:h}=c;if(i.boxSizing==="content-box"){const g=Mo(i,"border","width"),v=Mo(i,"padding");d-=v.width+g.width,h-=v.height+g.height}return d=Math.max(0,d-s.width),h=Math.max(0,r?d/r:h-s.height),d=js(Math.min(d,o,c.maxWidth)),h=js(Math.min(h,l,c.maxHeight)),d&&!h&&(h=js(d/2)),(e!==void 0||t!==void 0)&&r&&c.height&&h>c.height&&(h=c.height,d=js(Math.floor(h*r))),{width:d,height:h}}function qx(n,e,t){const r=e||1,i=js(n.height*r),s=js(n.width*r);n.height=js(n.height),n.width=js(n.width);const o=n.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(n.currentDevicePixelRatio=r,o.height=i,o.width=s,n.ctx.setTransform(r,0,0,r,0,0),!0):!1}const F6=(function(){let n=!1;try{const e={get passive(){return n=!0,!1}};Xy()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n})();function Gx(n,e){const t=I6(n,e),r=t&&t.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function wo(n,e,t,r){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function U6(n,e,t,r){return{x:n.x+t*(e.x-n.x),y:r==="middle"?t<.5?n.y:e.y:r==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function B6(n,e,t,r){const i={x:n.cp2x,y:n.cp2y},s={x:e.cp1x,y:e.cp1y},o=wo(n,i,t),l=wo(i,s,t),c=wo(s,e,t),d=wo(o,l,t),h=wo(l,c,t);return wo(d,h,t)}const H6=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,r){return t-r},leftForLtr(t,r){return t-r}}},z6=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function $a(n,e,t){return n?H6(e,t):z6()}function DD(n,e){let t,r;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,r=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=r)}function RD(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function OD(n){return n==="angle"?{between:Fc,compare:U4,normalize:mr}:{between:Ao,compare:(e,t)=>e-t,normalize:e=>e}}function Yx({start:n,end:e,count:t,loop:r,style:i}){return{start:n%t,end:e%t,loop:r&&(e-n+1)%t===0,style:i}}function $6(n,e,t){const{property:r,start:i,end:s}=t,{between:o,normalize:l}=OD(r),c=e.length;let{start:d,end:h,loop:p}=n,g,v;if(p){for(d+=c,h+=c,g=0,v=c;g<v&&o(l(e[d%c][r]),i,s);++g)d--,h--;d%=c,h%=c}return h<d&&(h+=c),{start:d,end:h,loop:p,style:n.style}}function ID(n,e,t){if(!t)return[n];const{property:r,start:i,end:s}=t,o=e.length,{compare:l,between:c,normalize:d}=OD(r),{start:h,end:p,loop:g,style:v}=$6(n,e,t),y=[];let _=!1,w=null,x,C,T;const R=()=>c(i,T,x)&&l(i,T)!==0,D=()=>l(s,x)===0||c(s,T,x),O=()=>_||R(),M=()=>!_||D();for(let I=h,F=h;I<=p;++I)C=e[I%o],!C.skip&&(x=d(C[r]),x!==T&&(_=c(x,i,s),w===null&&O()&&(w=l(x,i)===0?I:F),w!==null&&M()&&(y.push(Yx({start:w,end:I,loop:g,count:o,style:v})),w=null),F=I,T=x));return w!==null&&y.push(Yx({start:w,end:p,loop:g,count:o,style:v})),y}function MD(n,e){const t=[],r=n.segments;for(let i=0;i<r.length;i++){const s=ID(r[i],n.points,e);s.length&&t.push(...s)}return t}function W6(n,e,t,r){let i=0,s=e-1;if(t&&!r)for(;i<e&&!n[i].skip;)i++;for(;i<e&&n[i].skip;)i++;for(i%=e,t&&(s+=i);s>i&&n[s%e].skip;)s--;return s%=e,{start:i,end:s}}function V6(n,e,t,r){const i=n.length,s=[];let o=e,l=n[e],c;for(c=e+1;c<=t;++c){const d=n[c%i];d.skip||d.stop?l.skip||(r=!1,s.push({start:e%i,end:(c-1)%i,loop:r}),e=o=d.stop?c:null):(o=c,l.skip&&(e=c)),l=d}return o!==null&&s.push({start:e%i,end:o%i,loop:r}),s}function q6(n,e){const t=n.points,r=n.options.spanGaps,i=t.length;if(!i)return[];const s=!!n._loop,{start:o,end:l}=W6(t,i,s,r);if(r===!0)return Kx(n,[{start:o,end:l,loop:s}],t,e);const c=l<o?l+i:l,d=!!n._fullLoop&&o===0&&l===i-1;return Kx(n,V6(t,o,c,d),t,e)}function Kx(n,e,t,r){return!r||!r.setContext||!t?e:G6(n,e,t,r)}function G6(n,e,t,r){const i=n._chart.getContext(),s=Qx(n.options),{_datasetIndex:o,options:{spanGaps:l}}=n,c=t.length,d=[];let h=s,p=e[0].start,g=p;function v(y,_,w,x){const C=l?-1:1;if(y!==_){for(y+=c;t[y%c].skip;)y-=C;for(;t[_%c].skip;)_+=C;y%c!==_%c&&(d.push({start:y%c,end:_%c,loop:w,style:x}),h=x,p=_%c)}}for(const y of e){p=l?p:y.start;let _=t[p%c],w;for(g=p+1;g<=y.end;g++){const x=t[g%c];w=Qx(r.setContext(Ko(i,{type:"segment",p0:_,p1:x,p0DataIndex:(g-1)%c,p1DataIndex:g%c,datasetIndex:o}))),Y6(w,h)&&v(p,g-1,y.loop,h),_=x,h=w}p<g-1&&v(p,g-1,y.loop,h)}return d}function Qx(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function Y6(n,e){if(!e)return!1;const t=[],r=function(i,s){return Vy(s)?(t.includes(s)||t.push(s),t.indexOf(s)):s};return JSON.stringify(n,r)!==JSON.stringify(e,r)}function $d(n,e,t){return n.options.clip?n[t]:e[t]}function K6(n,e){const{xScale:t,yScale:r}=n;return t&&r?{left:$d(t,e,"left"),right:$d(t,e,"right"),top:$d(r,e,"top"),bottom:$d(r,e,"bottom")}:e}function ND(n,e){const t=e._clip;if(t.disabled)return!1;const r=K6(e,n.chartArea);return{left:t.left===!1?0:r.left-(t.left===!0?0:t.left),right:t.right===!1?n.width:r.right+(t.right===!0?0:t.right),top:t.top===!1?0:r.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?n.height:r.bottom+(t.bottom===!0?0:t.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class Q6{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,r,i){const s=t.listeners[i],o=t.duration;s.forEach(l=>l({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(r-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=_D.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let o=s.length-1,l=!1,c;for(;o>=0;--o)c=s[o],c._active?(c._total>r.duration&&(r.duration=c._total),c.tick(e),l=!0):(s[o]=s[s.length-1],s.pop());l&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),t+=s.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let r=t.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,r)),r}listen(e,t,r){this._getAnims(e).listeners[t].push(r)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const r=t.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var ji=new Q6;const Xx="transparent",X6={boolean(n,e,t){return t>.5?e:n},color(n,e,t){const r=Bx(n||Xx),i=r.valid&&Bx(e||Xx);return i&&i.valid?i.mix(r,t).hexString():e},number(n,e,t){return n+(e-n)*t}};class Z6{constructor(e,t,r,i){const s=t[r];i=Hd([e.to,i,s,e.from]);const o=Hd([e.from,s,i]);this._active=!0,this._fn=e.fn||X6[e.type||typeof o],this._easing=bc[e.easing]||bc.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,t,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Hd([e.to,t,i,e.from]),this._from=Hd([e.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,l=this._to;let c;if(this._active=s!==l&&(o||t<r),!this._active){this._target[i]=l,this._notify(!0);return}if(t<0){this._target[i]=s;return}c=t/r%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[i]=this._fn(s,l,c)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,r)=>{e.push({res:t,rej:r})})}_notify(e){const t=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][t]()}}class PD{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Je(e))return;const t=Object.keys(en.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!Je(s))return;const o={};for(const l of t)o[l]=s[l];(gn(s.properties)&&s.properties||[i]).forEach(l=>{(l===i||!r.has(l))&&r.set(l,o)})})}_animateOptions(e,t){const r=t.options,i=eq(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&J6(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,t){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(t),l=Date.now();let c;for(c=o.length-1;c>=0;--c){const d=o[c];if(d.charAt(0)==="$")continue;if(d==="options"){i.push(...this._animateOptions(e,t));continue}const h=t[d];let p=s[d];const g=r.get(d);if(p)if(g&&p.active()){p.update(g,h,l);continue}else p.cancel();if(!g||!g.duration){e[d]=h;continue}s[d]=p=new Z6(g,e,d,h),i.push(p)}return i}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const r=this._createAnimations(e,t);if(r.length)return ji.add(this._chart,r),!0}}function J6(n,e){const t=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=n[r[i]];s&&s.active()&&t.push(s.wait())}return Promise.all(t)}function eq(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function Zx(n,e){const t=n&&n.options||{},r=t.reverse,i=t.min===void 0?e:0,s=t.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function tq(n,e,t){if(t===!1)return!1;const r=Zx(n,t),i=Zx(e,t);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function nq(n){let e,t,r,i;return Je(n)?(e=n.top,t=n.right,r=n.bottom,i=n.left):e=t=r=i=n,{top:e,right:t,bottom:r,left:i,disabled:n===!1}}function jD(n,e){const t=[],r=n._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)t.push(r[i].index);return t}function Jx(n,e,t,r={}){const i=n.keys,s=r.mode==="single";let o,l,c,d;if(e===null)return;let h=!1;for(o=0,l=i.length;o<l;++o){if(c=+i[o],c===t){if(h=!0,r.all)continue;break}d=n.values[c],Ln(d)&&(s||e===0||Qa(e)===Qa(d))&&(e+=d)}return!h&&!r.all?0:e}function rq(n,e){const{iScale:t,vScale:r}=e,i=t.axis==="x"?"x":"y",s=r.axis==="x"?"x":"y",o=Object.keys(n),l=new Array(o.length);let c,d,h;for(c=0,d=o.length;c<d;++c)h=o[c],l[c]={[i]:h,[s]:n[h]};return l}function cm(n,e){const t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function iq(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function sq(n){const{min:e,max:t,minDefined:r,maxDefined:i}=n.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?t:Number.POSITIVE_INFINITY}}function oq(n,e,t){const r=n[e]||(n[e]={});return r[t]||(r[t]={})}function eE(n,e,t,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=n[i.index];if(t&&s>0||!t&&s<0)return i.index}return null}function tE(n,e){const{chart:t,_cachedMeta:r}=n,i=t._stacks||(t._stacks={}),{iScale:s,vScale:o,index:l}=r,c=s.axis,d=o.axis,h=iq(s,o,r),p=e.length;let g;for(let v=0;v<p;++v){const y=e[v],{[c]:_,[d]:w}=y,x=y._stacks||(y._stacks={});g=x[d]=oq(i,h,_),g[l]=w,g._top=eE(g,o,!0,r.type),g._bottom=eE(g,o,!1,r.type);const C=g._visualValues||(g._visualValues={});C[l]=w}}function um(n,e){const t=n.scales;return Object.keys(t).filter(r=>t[r].axis===e).shift()}function aq(n,e){return Ko(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function lq(n,e,t){return Ko(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function Ql(n,e){const t=n.controller.index,r=n.vScale&&n.vScale.axis;if(r){e=e||n._parsed;for(const i of e){const s=i._stacks;if(!s||s[r]===void 0||s[r][t]===void 0)return;delete s[r][t],s[r]._visualValues!==void 0&&s[r]._visualValues[t]!==void 0&&delete s[r]._visualValues[t]}}}const dm=n=>n==="reset"||n==="none",nE=(n,e)=>e?n:Object.assign({},n),cq=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:jD(t,!0),values:null};class Jy{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=cm(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Ql(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,r=this.getDataset(),i=(p,g,v,y)=>p==="x"?g:p==="r"?y:v,s=t.xAxisID=Ye(r.xAxisID,um(e,"x")),o=t.yAxisID=Ye(r.yAxisID,um(e,"y")),l=t.rAxisID=Ye(r.rAxisID,um(e,"r")),c=t.indexAxis,d=t.iAxisID=i(c,s,o,l),h=t.vAxisID=i(c,o,s,l);t.xScale=this.getScaleForId(s),t.yScale=this.getScaleForId(o),t.rScale=this.getScaleForId(l),t.iScale=this.getScaleForId(d),t.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Lx(this._data,this),e._stacked&&Ql(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),r=this._data;if(Je(t)){const i=this._cachedMeta;this._data=rq(t,i)}else if(r!==t){if(r){Lx(r,this);const i=this._cachedMeta;Ql(i),i._parsed=[]}t&&Object.isExtensible(t)&&$4(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=t._stacked;t._stacked=cm(t.vScale,t),t.stack!==r.stack&&(i=!0,Ql(t),t.stack=r.stack),this._resyncElements(e),(i||s!==t._stacked)&&(tE(this,t._parsed),t._stacked=cm(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:o}=r,l=s.axis;let c=e===0&&t===i.length?!0:r._sorted,d=e>0&&r._parsed[e-1],h,p,g;if(this._parsing===!1)r._parsed=i,r._sorted=!0,g=i;else{gn(i[e])?g=this.parseArrayData(r,i,e,t):Je(i[e])?g=this.parseObjectData(r,i,e,t):g=this.parsePrimitiveData(r,i,e,t);const v=()=>p[l]===null||d&&p[l]<d[l];for(h=0;h<t;++h)r._parsed[h+e]=p=g[h],c&&(v()&&(c=!1),d=p);r._sorted=c}o&&tE(this,g)}parsePrimitiveData(e,t,r,i){const{iScale:s,vScale:o}=e,l=s.axis,c=o.axis,d=s.getLabels(),h=s===o,p=new Array(i);let g,v,y;for(g=0,v=i;g<v;++g)y=g+r,p[g]={[l]:h||s.parse(d[y],y),[c]:o.parse(t[y],y)};return p}parseArrayData(e,t,r,i){const{xScale:s,yScale:o}=e,l=new Array(i);let c,d,h,p;for(c=0,d=i;c<d;++c)h=c+r,p=t[h],l[c]={x:s.parse(p[0],h),y:o.parse(p[1],h)};return l}parseObjectData(e,t,r,i){const{xScale:s,yScale:o}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=new Array(i);let h,p,g,v;for(h=0,p=i;h<p;++h)g=h+r,v=t[g],d[h]={x:s.parse(jc(v,l),g),y:o.parse(jc(v,c),g)};return d}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,r){const i=this.chart,s=this._cachedMeta,o=t[e.axis],l={keys:jD(i,!0),values:t._stacks[e.axis]._visualValues};return Jx(l,o,s.index,{mode:r})}updateRangeFromParsed(e,t,r,i){const s=r[t.axis];let o=s===null?NaN:s;const l=i&&r._stacks[t.axis];i&&l&&(i.values=l,o=Jx(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,t){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&e===r.iScale,o=i.length,l=this._getOtherScale(e),c=cq(t,r,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:p}=sq(l);let g,v;function y(){v=i[g];const _=v[l.axis];return!Ln(v[e.axis])||h>_||p<_}for(g=0;g<o&&!(!y()&&(this.updateRangeFromParsed(d,e,v,c),s));++g);if(s){for(g=o-1;g>=0;--g)if(!y()){this.updateRangeFromParsed(d,e,v,c);break}}return d}getAllParsedValues(e){const t=this._cachedMeta._parsed,r=[];let i,s,o;for(i=0,s=t.length;i<s;++i)o=t[i][e.axis],Ln(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,r=t.iScale,i=t.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=nq(Ye(this.options.clip,tq(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,r=this._cachedMeta,i=r.data||[],s=t.chartArea,o=[],l=this._drawStart||0,c=this._drawCount||i.length-l,d=this.options.drawActiveElementsOnTop;let h;for(r.dataset&&r.dataset.draw(e,s,l,c),h=l;h<l+c;++h){const p=i[h];p.hidden||(p.active&&d?o.push(p):p.draw(e,s))}for(h=0;h<o.length;++h)o[h].draw(e,s)}getStyle(e,t){const r=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,t,r){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=lq(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=aq(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!t,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",r){const i=t==="active",s=this._cachedDataOpts,o=e+"-"+t,l=s[o],c=this.enableOptionSharing&&Vh(r);if(l)return nE(l,c);const d=this.chart.config,h=d.datasetElementScopeKeys(this._type,e),p=i?[`${e}Hover`,"hover",e,""]:[e,""],g=d.getOptionScopes(this.getDataset(),h),v=Object.keys(en.elements[e]),y=()=>this.getContext(r,i,t),_=d.resolveNamedOptions(g,v,y,p);return _.$shared&&(_.$shared=c,s[o]=Object.freeze(nE(_,c))),_}_resolveAnimations(e,t,r){const i=this.chart,s=this._cachedDataOpts,o=`animation-${t}`,l=s[o];if(l)return l;let c;if(i.options.animation!==!1){const h=this.chart.config,p=h.datasetAnimationScopeKeys(this._type,t),g=h.getOptionScopes(this.getDataset(),p);c=h.createResolver(g,this.getContext(e,r,t))}const d=new PD(i,c&&c.animations);return c&&c._cacheable&&(s[o]=Object.freeze(d)),d}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||dm(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const r=this.resolveDataElementOptions(e,t),i=this._sharedOptions,s=this.getSharedOptions(r),o=this.includeOptions(t,s)||s!==i;return this.updateSharedOptions(s,t,r),{sharedOptions:s,includeOptions:o}}updateElement(e,t,r,i){dm(i)?Object.assign(e,r):this._resolveAnimations(t,i).update(e,r)}updateSharedOptions(e,t,r){e&&!dm(t)&&this._resolveAnimations(void 0,t).update(e,r)}_setStyle(e,t,r,i){e.active=i;const s=this.getStyle(t,i);this._resolveAnimations(t,r,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,t,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,t,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,r=this._cachedMeta.data;for(const[l,c,d]of this._syncList)this[l](c,d);this._syncList=[];const i=r.length,s=t.length,o=Math.min(s,i);o&&this.parse(0,o),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,t,r=!0){const i=this._cachedMeta,s=i.data,o=e+t;let l;const c=d=>{for(d.length+=t,l=d.length-1;l>=o;l--)d[l]=d[l-t]};for(c(s),l=e;l<o;++l)s[l]=new this.dataElementType;this._parsing&&c(i._parsed),this.parse(e,t),r&&this.updateElements(s,e,t,"reset")}updateElements(e,t,r,i){}_removeElements(e,t){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,t);r._stacked&&Ql(r,i)}r.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,r,i]=e;this[t](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function uq(n,e,t){let r=1,i=1,s=0,o=0;if(e<$t){const l=n,c=l+e,d=Math.cos(l),h=Math.sin(l),p=Math.cos(c),g=Math.sin(c),v=(T,R,D)=>Fc(T,l,c,!0)?1:Math.max(R,R*t,D,D*t),y=(T,R,D)=>Fc(T,l,c,!0)?-1:Math.min(R,R*t,D,D*t),_=v(0,d,p),w=v(mn,h,g),x=y(vt,d,p),C=y(vt+mn,h,g);r=(_-x)/2,i=(w-C)/2,s=-(_+x)/2,o=-(w+C)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:o}}class dq extends Jy{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data,{labels:{pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:l}}=e.legend.options;return t.labels.length&&t.datasets.length?t.labels.map((c,d)=>{const p=e.getDatasetMeta(0).controller.getStyle(d);return{text:c,fillStyle:p.backgroundColor,fontColor:s,hidden:!e.getDataVisibility(d),lineDash:p.borderDash,lineDashOffset:p.borderDashOffset,lineJoin:p.borderJoinStyle,lineWidth:p.borderWidth,strokeStyle:p.borderColor,textAlign:i,pointStyle:r,borderRadius:o&&(l||p.borderRadius),index:d}}):[]}},onClick(e,t,r){r.chart.toggleDataVisibility(t.index),r.chart.update()}}}};constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const r=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=r;else{let s=c=>+r[c];if(Je(r[e])){const{key:c="value"}=this._parsing;s=d=>+jc(r[d],c)}let o,l;for(o=e,l=e+t;o<l;++o)i._parsed[o]=s(o)}}_getRotation(){return Gi(this.options.rotation-90)}_getCircumference(){return Gi(this.options.circumference)}_getRotationExtents(){let e=$t,t=-$t;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const i=this.chart.getDatasetMeta(r).controller,s=i._getRotation(),o=i._getCircumference();e=Math.min(e,s),t=Math.max(t,s+o)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:r}=t,i=this._cachedMeta,s=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,l=Math.max((Math.min(r.width,r.height)-o)/2,0),c=Math.min(T4(this.options.cutout,l),1),d=this._getRingWeight(this.index),{circumference:h,rotation:p}=this._getRotationExtents(),{ratioX:g,ratioY:v,offsetX:y,offsetY:_}=uq(p,h,c),w=(r.width-o)/g,x=(r.height-o)/v,C=Math.max(Math.min(w,x)/2,0),T=gD(this.options.radius,C),R=Math.max(T*c,0),D=(T-R)/this._getVisibleDatasetWeightTotal();this.offsetX=y*T,this.offsetY=_*T,i.total=this.calculateTotal(),this.outerRadius=T-D*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-D*d,0),this.updateElements(s,0,s.length,e)}_circumference(e,t){const r=this.options,i=this._cachedMeta,s=this._getCircumference();return t&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*s/$t)}updateElements(e,t,r,i){const s=i==="reset",o=this.chart,l=o.chartArea,d=o.options.animation,h=(l.left+l.right)/2,p=(l.top+l.bottom)/2,g=s&&d.animateScale,v=g?0:this.innerRadius,y=g?0:this.outerRadius,{sharedOptions:_,includeOptions:w}=this._getSharedOptions(t,i);let x=this._getRotation(),C;for(C=0;C<t;++C)x+=this._circumference(C,s);for(C=t;C<t+r;++C){const T=this._circumference(C,s),R=e[C],D={x:h+this.offsetX,y:p+this.offsetY,startAngle:x,endAngle:x+T,circumference:T,outerRadius:y,innerRadius:v};w&&(D.options=_||this.resolveDataElementOptions(C,R.active?"active":i)),x+=T,this.updateElement(R,C,D,i)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let r=0,i;for(i=0;i<t.length;i++){const s=e._parsed[i];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(i)&&!t[i].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?$t*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=qy(t._parsed[e],r.options.locale);return{label:i[e]||"",value:s}}getMaxBorderWidth(e){let t=0;const r=this.chart;let i,s,o,l,c;if(!e){for(i=0,s=r.data.datasets.length;i<s;++i)if(r.isDatasetVisible(i)){o=r.getDatasetMeta(i),e=o.data,l=o.controller;break}}if(!e)return 0;for(i=0,s=e.length;i<s;++i)c=l.resolveDataElementOptions(i),c.borderAlign!=="inner"&&(t=Math.max(t,c.borderWidth||0,c.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let r=0,i=e.length;r<i;++r){const s=this.resolveDataElementOptions(r);t=Math.max(t,s.offset||0,s.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(t+=this._getRingWeight(r));return t}_getRingWeight(e){return Math.max(Ye(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class hq extends Jy{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=t,o=this.chart._animationsDisabled;let{start:l,count:c}=G4(t,i,o);this._drawStart=l,this._drawCount=c,Y4(t)&&(l=0,c=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const d=this.resolveDatasetElementOptions(e);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:d},e),this.updateElements(i,l,c,e)}updateElements(e,t,r,i){const s=i==="reset",{iScale:o,vScale:l,_stacked:c,_dataset:d}=this._cachedMeta,{sharedOptions:h,includeOptions:p}=this._getSharedOptions(t,i),g=o.axis,v=l.axis,{spanGaps:y,segment:_}=this.options,w=Lc(y)?y:Number.POSITIVE_INFINITY,x=this.chart._animationsDisabled||s||i==="none",C=t+r,T=e.length;let R=t>0&&this.getParsed(t-1);for(let D=0;D<T;++D){const O=e[D],M=x?O:{};if(D<t||D>=C){M.skip=!0;continue}const I=this.getParsed(D),F=kt(I[v]),z=M[g]=o.getPixelForValue(I[g],D),V=M[v]=s||F?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,I,c):I[v],D);M.skip=isNaN(z)||isNaN(V)||F,M.stop=D>0&&Math.abs(I[g]-R[g])>w,_&&(M.parsed=I,M.raw=d.data[D]),p&&(M.options=h||this.resolveDataElementOptions(D,O.active?"active":i)),x||this.updateElement(O,D,M,i),R=I}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,r=t.options&&t.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}class fq extends dq{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}function go(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class eb{static override(e){Object.assign(eb.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return go()}parse(){return go()}format(){return go()}add(){return go()}diff(){return go()}startOf(){return go()}endOf(){return go()}}var pq={_date:eb};function gq(n,e,t,r){const{controller:i,data:s,_sorted:o}=n,l=i._cachedMeta.iScale,c=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(l&&e===l.axis&&e!=="r"&&o&&s.length){const d=l._reversePixels?H4:Do;if(r){if(i._sharedOptions){const h=s[0],p=typeof h.getRange=="function"&&h.getRange(e);if(p){const g=d(s,e,t-p),v=d(s,e,t+p);return{lo:g.lo,hi:v.hi}}}}else{const h=d(s,e,t);if(c){const{vScale:p}=i._cachedMeta,{_parsed:g}=n,v=g.slice(0,h.lo+1).reverse().findIndex(_=>!kt(_[p.axis]));h.lo-=Math.max(0,v);const y=g.slice(h.hi).findIndex(_=>!kt(_[p.axis]));h.hi+=Math.max(0,y)}return h}}return{lo:0,hi:s.length-1}}function Rf(n,e,t,r,i){const s=n.getSortedVisibleDatasetMetas(),o=t[e];for(let l=0,c=s.length;l<c;++l){const{index:d,data:h}=s[l],{lo:p,hi:g}=gq(s[l],e,o,i);for(let v=p;v<=g;++v){const y=h[v];y.skip||r(y,d,v)}}}function mq(n){const e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(r,i){const s=e?Math.abs(r.x-i.x):0,o=t?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function hm(n,e,t,r,i){const s=[];return!i&&!n.isPointInArea(e)||Rf(n,t,e,function(l,c,d){!i&&!Uc(l,n.chartArea,0)||l.inRange(e.x,e.y,r)&&s.push({element:l,datasetIndex:c,index:d})},!0),s}function vq(n,e,t,r){let i=[];function s(o,l,c){const{startAngle:d,endAngle:h}=o.getProps(["startAngle","endAngle"],r),{angle:p}=yD(o,{x:e.x,y:e.y});Fc(p,d,h)&&i.push({element:o,datasetIndex:l,index:c})}return Rf(n,t,e,s),i}function yq(n,e,t,r,i,s){let o=[];const l=mq(t);let c=Number.POSITIVE_INFINITY;function d(h,p,g){const v=h.inRange(e.x,e.y,i);if(r&&!v)return;const y=h.getCenterPoint(i);if(!(!!s||n.isPointInArea(y))&&!v)return;const w=l(e,y);w<c?(o=[{element:h,datasetIndex:p,index:g}],c=w):w===c&&o.push({element:h,datasetIndex:p,index:g})}return Rf(n,t,e,d),o}function fm(n,e,t,r,i,s){return!s&&!n.isPointInArea(e)?[]:t==="r"&&!r?vq(n,e,t,i):yq(n,e,t,r,i,s)}function rE(n,e,t,r,i){const s=[],o=t==="x"?"inXRange":"inYRange";let l=!1;return Rf(n,t,e,(c,d,h)=>{c[o]&&c[o](e[t],i)&&(s.push({element:c,datasetIndex:d,index:h}),l=l||c.inRange(e.x,e.y,i))}),r&&!l?[]:s}var bq={modes:{index(n,e,t,r){const i=_o(e,n),s=t.axis||"x",o=t.includeInvisible||!1,l=t.intersect?hm(n,i,s,r,o):fm(n,i,s,!1,r,o),c=[];return l.length?(n.getSortedVisibleDatasetMetas().forEach(d=>{const h=l[0].index,p=d.data[h];p&&!p.skip&&c.push({element:p,datasetIndex:d.index,index:h})}),c):[]},dataset(n,e,t,r){const i=_o(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;let l=t.intersect?hm(n,i,s,r,o):fm(n,i,s,!1,r,o);if(l.length>0){const c=l[0].datasetIndex,d=n.getDatasetMeta(c).data;l=[];for(let h=0;h<d.length;++h)l.push({element:d[h],datasetIndex:c,index:h})}return l},point(n,e,t,r){const i=_o(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return hm(n,i,s,r,o)},nearest(n,e,t,r){const i=_o(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return fm(n,i,s,t.intersect,r,o)},x(n,e,t,r){const i=_o(e,n);return rE(n,i,"x",t.intersect,r)},y(n,e,t,r){const i=_o(e,n);return rE(n,i,"y",t.intersect,r)}}};const LD=["left","top","right","bottom"];function Xl(n,e){return n.filter(t=>t.pos===e)}function iE(n,e){return n.filter(t=>LD.indexOf(t.pos)===-1&&t.box.axis===e)}function Zl(n,e){return n.sort((t,r)=>{const i=e?r:t,s=e?t:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function _q(n){const e=[];let t,r,i,s,o,l;for(t=0,r=(n||[]).length;t<r;++t)i=n[t],{position:s,options:{stack:o,stackWeight:l=1}}=i,e.push({index:t,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:l});return e}function wq(n){const e={};for(const t of n){const{stack:r,pos:i,stackWeight:s}=t;if(!r||!LD.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function Sq(n,e){const t=wq(n),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,l;for(s=0,o=n.length;s<o;++s){l=n[s];const{fullSize:c}=l.box,d=t[l.stack],h=d&&l.stackWeight/d.weight;l.horizontal?(l.width=h?h*r:c&&e.availableWidth,l.height=i):(l.width=r,l.height=h?h*i:c&&e.availableHeight)}return t}function xq(n){const e=_q(n),t=Zl(e.filter(d=>d.box.fullSize),!0),r=Zl(Xl(e,"left"),!0),i=Zl(Xl(e,"right")),s=Zl(Xl(e,"top"),!0),o=Zl(Xl(e,"bottom")),l=iE(e,"x"),c=iE(e,"y");return{fullSize:t,leftAndTop:r.concat(s),rightAndBottom:i.concat(c).concat(o).concat(l),chartArea:Xl(e,"chartArea"),vertical:r.concat(i).concat(c),horizontal:s.concat(o).concat(l)}}function sE(n,e,t,r){return Math.max(n[t],e[t])+Math.max(n[r],e[r])}function FD(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function Eq(n,e,t,r){const{pos:i,box:s}=t,o=n.maxPadding;if(!Je(i)){t.size&&(n[i]-=t.size);const p=r[t.stack]||{size:0,count:1};p.size=Math.max(p.size,t.horizontal?s.height:s.width),t.size=p.size/p.count,n[i]+=t.size}s.getPadding&&FD(o,s.getPadding());const l=Math.max(0,e.outerWidth-sE(o,n,"left","right")),c=Math.max(0,e.outerHeight-sE(o,n,"top","bottom")),d=l!==n.w,h=c!==n.h;return n.w=l,n.h=c,t.horizontal?{same:d,other:h}:{same:h,other:d}}function Cq(n){const e=n.maxPadding;function t(r){const i=Math.max(e[r]-n[r],0);return n[r]+=i,i}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function Tq(n,e){const t=e.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],t[o])}),s}return r(n?["left","right"]:["top","bottom"])}function ic(n,e,t,r){const i=[];let s,o,l,c,d,h;for(s=0,o=n.length,d=0;s<o;++s){l=n[s],c=l.box,c.update(l.width||e.w,l.height||e.h,Tq(l.horizontal,e));const{same:p,other:g}=Eq(e,t,l,r);d|=p&&i.length,h=h||g,c.fullSize||i.push(l)}return d&&ic(i,e,t,r)||h}function Wd(n,e,t,r,i){n.top=t,n.left=e,n.right=e+r,n.bottom=t+i,n.width=r,n.height=i}function oE(n,e,t,r){const i=t.padding;let{x:s,y:o}=e;for(const l of n){const c=l.box,d=r[l.stack]||{placed:0,weight:1},h=l.stackWeight/d.weight||1;if(l.horizontal){const p=e.w*h,g=d.size||c.height;Vh(d.start)&&(o=d.start),c.fullSize?Wd(c,i.left,o,t.outerWidth-i.right-i.left,g):Wd(c,e.left+d.placed,o,p,g),d.start=o,d.placed+=p,o=c.bottom}else{const p=e.h*h,g=d.size||c.width;Vh(d.start)&&(s=d.start),c.fullSize?Wd(c,s,i.top,g,t.outerHeight-i.bottom-i.top):Wd(c,s,e.top+d.placed,g,p),d.start=s,d.placed+=p,s=c.right}}e.x=s,e.y=o}var jr={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,r){if(!n)return;const i=Fr(n.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(t-i.height,0),l=xq(n.boxes),c=l.vertical,d=l.horizontal;mt(n.boxes,_=>{typeof _.beforeLayout=="function"&&_.beforeLayout()});const h=c.reduce((_,w)=>w.box.options&&w.box.options.display===!1?_:_+1,0)||1,p=Object.freeze({outerWidth:e,outerHeight:t,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/h,hBoxMaxHeight:o/2}),g=Object.assign({},i);FD(g,Fr(r));const v=Object.assign({maxPadding:g,w:s,h:o,x:i.left,y:i.top},i),y=Sq(c.concat(d),p);ic(l.fullSize,v,p,y),ic(c,v,p,y),ic(d,v,p,y)&&ic(c,v,p,y),Cq(v),oE(l.leftAndTop,v,p,y),v.x+=v.w,v.y+=v.h,oE(l.rightAndBottom,v,p,y),n.chartArea={left:v.left,top:v.top,right:v.left+v.w,bottom:v.top+v.h,height:v.h,width:v.w},mt(l.chartArea,_=>{const w=_.box;Object.assign(w,n.chartArea),w.update(v.w,v.h,{left:0,top:0,right:0,bottom:0})})}};class UD{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,r){}removeEventListener(e,t,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,r,i){return t=Math.max(0,t||e.width),r=r||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):r)}}isAttached(e){return!0}updateConfig(e){}}class kq extends UD{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const ch="$chartjs",Aq={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},aE=n=>n===null||n==="";function Dq(n,e){const t=n.style,r=n.getAttribute("height"),i=n.getAttribute("width");if(n[ch]={initial:{height:r,width:i,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",aE(i)){const s=Gx(n,"width");s!==void 0&&(n.width=s)}if(aE(r))if(n.style.height==="")n.height=n.width/(e||2);else{const s=Gx(n,"height");s!==void 0&&(n.height=s)}return n}const BD=F6?{passive:!0}:!1;function Rq(n,e,t){n&&n.addEventListener(e,t,BD)}function Oq(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,BD)}function Iq(n,e){const t=Aq[n.type]||n.type,{x:r,y:i}=_o(n,e);return{type:t,chart:e,native:n,x:r!==void 0?r:null,y:i!==void 0?i:null}}function Yh(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function Mq(n,e,t){const r=n.canvas,i=new MutationObserver(s=>{let o=!1;for(const l of s)o=o||Yh(l.addedNodes,r),o=o&&!Yh(l.removedNodes,r);o&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}function Nq(n,e,t){const r=n.canvas,i=new MutationObserver(s=>{let o=!1;for(const l of s)o=o||Yh(l.removedNodes,r),o=o&&!Yh(l.addedNodes,r);o&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}const Hc=new Map;let lE=0;function HD(){const n=window.devicePixelRatio;n!==lE&&(lE=n,Hc.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function Pq(n,e){Hc.size||window.addEventListener("resize",HD),Hc.set(n,e)}function jq(n){Hc.delete(n),Hc.size||window.removeEventListener("resize",HD)}function Lq(n,e,t){const r=n.canvas,i=r&&Zy(r);if(!i)return;const s=wD((l,c)=>{const d=i.clientWidth;t(l,c),d<i.clientWidth&&t()},window),o=new ResizeObserver(l=>{const c=l[0],d=c.contentRect.width,h=c.contentRect.height;d===0&&h===0||s(d,h)});return o.observe(i),Pq(n,s),o}function pm(n,e,t){t&&t.disconnect(),e==="resize"&&jq(n)}function Fq(n,e,t){const r=n.canvas,i=wD(s=>{n.ctx!==null&&t(Iq(s,n))},n);return Rq(r,e,i),i}class Uq extends UD{acquireContext(e,t){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(Dq(e,t),r):null}releaseContext(e){const t=e.canvas;if(!t[ch])return!1;const r=t[ch].initial;["height","width"].forEach(s=>{const o=r[s];kt(o)?t.removeAttribute(s):t.setAttribute(s,o)});const i=r.style||{};return Object.keys(i).forEach(s=>{t.style[s]=i[s]}),t.width=t.width,delete t[ch],!0}addEventListener(e,t,r){this.removeEventListener(e,t);const i=e.$proxies||(e.$proxies={}),o={attach:Mq,detach:Nq,resize:Lq}[t]||Fq;i[t]=o(e,t,r)}removeEventListener(e,t){const r=e.$proxies||(e.$proxies={}),i=r[t];if(!i)return;({attach:pm,detach:pm,resize:pm}[t]||Oq)(e,t,i),r[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,r,i){return L6(e,t,r,i)}isAttached(e){const t=e&&Zy(e);return!!(t&&t.isConnected)}}function Bq(n){return!Xy()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?kq:Uq}class Ks{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:t,y:r}=this.getProps(["x","y"],e);return{x:t,y:r}}hasValue(){return Lc(this.x)&&Lc(this.y)}getProps(e,t){const r=this.$animations;if(!t||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}}function Hq(n,e){const t=n.options.ticks,r=zq(n),i=Math.min(t.maxTicksLimit||r,r),s=t.major.enabled?Wq(e):[],o=s.length,l=s[0],c=s[o-1],d=[];if(o>i)return Vq(e,d,s,o/i),d;const h=$q(s,e,i);if(o>0){let p,g;const v=o>1?Math.round((c-l)/(o-1)):null;for(Vd(e,d,h,kt(v)?0:l-v,l),p=0,g=o-1;p<g;p++)Vd(e,d,h,s[p],s[p+1]);return Vd(e,d,h,c,kt(v)?e.length:c+v),d}return Vd(e,d,h),d}function zq(n){const e=n.options.offset,t=n._tickSize(),r=n._length/t+(e?0:1),i=n._maxLength/t;return Math.floor(Math.min(r,i))}function $q(n,e,t){const r=qq(n),i=e.length/t;if(!r)return Math.max(i,1);const s=N4(r);for(let o=0,l=s.length-1;o<l;o++){const c=s[o];if(c>i)return c}return Math.max(i,1)}function Wq(n){const e=[];let t,r;for(t=0,r=n.length;t<r;t++)n[t].major&&e.push(t);return e}function Vq(n,e,t,r){let i=0,s=t[0],o;for(r=Math.ceil(r),o=0;o<n.length;o++)o===s&&(e.push(n[o]),i++,s=t[i*r])}function Vd(n,e,t,r,i){const s=Ye(r,0),o=Math.min(Ye(i,n.length),n.length);let l=0,c,d,h;for(t=Math.ceil(t),i&&(c=i-r,t=c/Math.floor(c/t)),h=s;h<0;)l++,h=Math.round(s+l*t);for(d=Math.max(s,0);d<o;d++)d===h&&(e.push(n[d]),l++,h=Math.round(s+l*t))}function qq(n){const e=n.length;let t,r;if(e<2)return!1;for(r=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==r)return!1;return r}const Gq=n=>n==="left"?"right":n==="right"?"left":n,cE=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,uE=(n,e)=>Math.min(e||n,n);function dE(n,e){const t=[],r=n.length/e,i=n.length;let s=0;for(;s<i;s+=r)t.push(n[Math.floor(s)]);return t}function Yq(n,e,t){const r=n.ticks.length,i=Math.min(e,r-1),s=n._startPixel,o=n._endPixel,l=1e-6;let c=n.getPixelForTick(i),d;if(!(t&&(r===1?d=Math.max(c-s,o-c):e===0?d=(n.getPixelForTick(1)-c)/2:d=(c-n.getPixelForTick(i-1))/2,c+=i<e?d:-d,c<s-l||c>o+l)))return c}function Kq(n,e){mt(n,t=>{const r=t.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete t.data[r[s]];r.splice(0,i)}})}function Jl(n){return n.drawTicks?n.tickLength:0}function hE(n,e){if(!n.display)return 0;const t=jn(n.font,e),r=Fr(n.padding);return(gn(n.text)?n.text.length:1)*t.lineHeight+r.height}function Qq(n,e){return Ko(n,{scale:e,type:"scale"})}function Xq(n,e,t){return Ko(n,{tick:t,index:e,type:"tick"})}function Zq(n,e,t){let r=Wy(n);return(t&&e!=="right"||!t&&e==="right")&&(r=Gq(r)),r}function Jq(n,e,t,r){const{top:i,left:s,bottom:o,right:l,chart:c}=n,{chartArea:d,scales:h}=c;let p=0,g,v,y;const _=o-i,w=l-s;if(n.isHorizontal()){if(v=Nn(r,s,l),Je(t)){const x=Object.keys(t)[0],C=t[x];y=h[x].getPixelForValue(C)+_-e}else t==="center"?y=(d.bottom+d.top)/2+_-e:y=cE(n,t,e);g=l-s}else{if(Je(t)){const x=Object.keys(t)[0],C=t[x];v=h[x].getPixelForValue(C)-w+e}else t==="center"?v=(d.left+d.right)/2-w+e:v=cE(n,t,e);y=Nn(r,o,i),p=t==="left"?-mn:mn}return{titleX:v,titleY:y,maxWidth:g,rotation:p}}class ul extends Ks{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:r,_suggestedMax:i}=this;return e=hi(e,Number.POSITIVE_INFINITY),t=hi(t,Number.NEGATIVE_INFINITY),r=hi(r,Number.POSITIVE_INFINITY),i=hi(i,Number.NEGATIVE_INFINITY),{min:hi(e,r),max:hi(t,i),minDefined:Ln(e),maxDefined:Ln(t)}}getMinMax(e){let{min:t,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:t,max:r};const l=this.getMatchingVisibleMetas();for(let c=0,d=l.length;c<d;++c)o=l[c].controller.getMinMax(this,e),i||(t=Math.min(t,o.min)),s||(r=Math.max(r,o.max));return t=s&&t>r?r:t,r=i&&t>r?t:r,{min:hi(t,hi(r,t)),max:hi(r,hi(t,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Rt(this.options.beforeUpdate,[this])}update(e,t,r){const{beginAtZero:i,grace:s,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=g6(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?dE(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=Hq(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,r;this.isHorizontal()?(t=this.left,r=this.right):(t=this.top,r=this.bottom,e=!e),this._startPixel=t,this._endPixel=r,this._reversePixels=e,this._length=r-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Rt(this.options.afterUpdate,[this])}beforeSetDimensions(){Rt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Rt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Rt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Rt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=Rt(t.callback,[s.value,r,e],this)}afterTickToLabelConversion(){Rt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Rt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,r=uE(this.ticks.length,e.ticks.maxTicksLimit),i=t.minRotation||0,s=t.maxRotation;let o=i,l,c,d;if(!this._isVisible()||!t.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const h=this._getLabelSizes(),p=h.widest.width,g=h.highest.height,v=$n(this.chart.width-p,0,this.maxWidth);l=e.offset?this.maxWidth/r:v/(r-1),p+6>l&&(l=v/(r-(e.offset?.5:1)),c=this.maxHeight-Jl(e.grid)-t.padding-hE(e.title,this.chart.options.font),d=Math.sqrt(p*p+g*g),o=F4(Math.min(Math.asin($n((h.highest.height+6)/l,-1,1)),Math.asin($n(c/d,-1,1))-Math.asin($n(g/d,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Rt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Rt(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const c=hE(i,t.options.font);if(l?(e.width=this.maxWidth,e.height=Jl(s)+c):(e.height=this.maxHeight,e.width=Jl(s)+c),r.display&&this.ticks.length){const{first:d,last:h,widest:p,highest:g}=this._getLabelSizes(),v=r.padding*2,y=Gi(this.labelRotation),_=Math.cos(y),w=Math.sin(y);if(l){const x=r.mirror?0:w*p.width+_*g.height;e.height=Math.min(this.maxHeight,e.height+x+v)}else{const x=r.mirror?0:_*p.width+w*g.height;e.width=Math.min(this.maxWidth,e.width+x+v)}this._calculatePadding(d,h,w,_)}}this._handleMargins(),l?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,r,i){const{ticks:{align:s,padding:o},position:l}=this.options,c=this.labelRotation!==0,d=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,p=this.right-this.getPixelForTick(this.ticks.length-1);let g=0,v=0;c?d?(g=i*e.width,v=r*t.height):(g=r*e.height,v=i*t.width):s==="start"?v=t.width:s==="end"?g=e.width:s!=="inner"&&(g=e.width/2,v=t.width/2),this.paddingLeft=Math.max((g-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((v-p+o)*this.width/(this.width-p),0)}else{let h=t.height/2,p=e.height/2;s==="start"?(h=0,p=e.height):s==="end"&&(h=t.height,p=0),this.paddingTop=h+o,this.paddingBottom=p+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Rt(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,r;for(t=0,r=e.length;t<r;t++)kt(e[t].label)&&(e.splice(t,1),r--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let r=this.ticks;t<r.length&&(r=dE(r,t)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,r){const{ctx:i,_longestTextCache:s}=this,o=[],l=[],c=Math.floor(t/uE(t,r));let d=0,h=0,p,g,v,y,_,w,x,C,T,R,D;for(p=0;p<t;p+=c){if(y=e[p].label,_=this._resolveTickFontOptions(p),i.font=w=_.string,x=s[w]=s[w]||{data:{},gc:[]},C=_.lineHeight,T=R=0,!kt(y)&&!gn(y))T=zx(i,x.data,x.gc,T,y),R=C;else if(gn(y))for(g=0,v=y.length;g<v;++g)D=y[g],!kt(D)&&!gn(D)&&(T=zx(i,x.data,x.gc,T,D),R+=C);o.push(T),l.push(R),d=Math.max(T,d),h=Math.max(R,h)}Kq(s,t);const O=o.indexOf(d),M=l.indexOf(h),I=F=>({width:o[F]||0,height:l[F]||0});return{first:I(0),last:I(t-1),widest:I(O),highest:I(M),widths:o,heights:l}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return B4(this._alignToPixels?po(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const r=t[e];return r.$context||(r.$context=Xq(this.getContext(),e,r))}return this.$context||(this.$context=Qq(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=Gi(this.labelRotation),r=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,l=s?s.widest.width+o:0,c=s?s.highest.height+o:0;return this.isHorizontal()?c*r>l*i?l/r:c/i:c*i<l*r?c/r:l/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:l}=i,c=s.offset,d=this.isHorizontal(),p=this.ticks.length+(c?1:0),g=Jl(s),v=[],y=l.setContext(this.getContext()),_=y.display?y.width:0,w=_/2,x=function(ie){return po(r,ie,_)};let C,T,R,D,O,M,I,F,z,V,ee,re;if(o==="top")C=x(this.bottom),M=this.bottom-g,F=C-w,V=x(e.top)+w,re=e.bottom;else if(o==="bottom")C=x(this.top),V=e.top,re=x(e.bottom)-w,M=C+w,F=this.top+g;else if(o==="left")C=x(this.right),O=this.right-g,I=C-w,z=x(e.left)+w,ee=e.right;else if(o==="right")C=x(this.left),z=e.left,ee=x(e.right)-w,O=C+w,I=this.left+g;else if(t==="x"){if(o==="center")C=x((e.top+e.bottom)/2+.5);else if(Je(o)){const ie=Object.keys(o)[0],ae=o[ie];C=x(this.chart.scales[ie].getPixelForValue(ae))}V=e.top,re=e.bottom,M=C+w,F=M+g}else if(t==="y"){if(o==="center")C=x((e.left+e.right)/2);else if(Je(o)){const ie=Object.keys(o)[0],ae=o[ie];C=x(this.chart.scales[ie].getPixelForValue(ae))}O=C-w,I=O-g,z=e.left,ee=e.right}const fe=Ye(i.ticks.maxTicksLimit,p),pe=Math.max(1,Math.ceil(p/fe));for(T=0;T<p;T+=pe){const ie=this.getContext(T),ae=s.setContext(ie),Q=l.setContext(ie),q=ae.lineWidth,Y=ae.color,L=Q.dash||[],G=Q.dashOffset,ne=ae.tickWidth,le=ae.tickColor,ue=ae.tickBorderDash||[],ce=ae.tickBorderDashOffset;R=Yq(this,T,c),R!==void 0&&(D=po(r,R,q),d?O=I=z=ee=D:M=F=V=re=D,v.push({tx1:O,ty1:M,tx2:I,ty2:F,x1:z,y1:V,x2:ee,y2:re,width:q,color:Y,borderDash:L,borderDashOffset:G,tickWidth:ne,tickColor:le,tickBorderDash:ue,tickBorderDashOffset:ce}))}return this._ticksLength=p,this._borderValue=C,v}_computeLabelItems(e){const t=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:d,padding:h,mirror:p}=s,g=Jl(r.grid),v=g+h,y=p?-h:v,_=-Gi(this.labelRotation),w=[];let x,C,T,R,D,O,M,I,F,z,V,ee,re="middle";if(i==="top")O=this.bottom-y,M=this._getXAxisLabelAlignment();else if(i==="bottom")O=this.top+y,M=this._getXAxisLabelAlignment();else if(i==="left"){const pe=this._getYAxisLabelAlignment(g);M=pe.textAlign,D=pe.x}else if(i==="right"){const pe=this._getYAxisLabelAlignment(g);M=pe.textAlign,D=pe.x}else if(t==="x"){if(i==="center")O=(e.top+e.bottom)/2+v;else if(Je(i)){const pe=Object.keys(i)[0],ie=i[pe];O=this.chart.scales[pe].getPixelForValue(ie)+v}M=this._getXAxisLabelAlignment()}else if(t==="y"){if(i==="center")D=(e.left+e.right)/2-v;else if(Je(i)){const pe=Object.keys(i)[0],ie=i[pe];D=this.chart.scales[pe].getPixelForValue(ie)}M=this._getYAxisLabelAlignment(g).textAlign}t==="y"&&(c==="start"?re="top":c==="end"&&(re="bottom"));const fe=this._getLabelSizes();for(x=0,C=l.length;x<C;++x){T=l[x],R=T.label;const pe=s.setContext(this.getContext(x));I=this.getPixelForTick(x)+s.labelOffset,F=this._resolveTickFontOptions(x),z=F.lineHeight,V=gn(R)?R.length:1;const ie=V/2,ae=pe.color,Q=pe.textStrokeColor,q=pe.textStrokeWidth;let Y=M;o?(D=I,M==="inner"&&(x===C-1?Y=this.options.reverse?"left":"right":x===0?Y=this.options.reverse?"right":"left":Y="center"),i==="top"?d==="near"||_!==0?ee=-V*z+z/2:d==="center"?ee=-fe.highest.height/2-ie*z+z:ee=-fe.highest.height+z/2:d==="near"||_!==0?ee=z/2:d==="center"?ee=fe.highest.height/2-ie*z:ee=fe.highest.height-V*z,p&&(ee*=-1),_!==0&&!pe.showLabelBackdrop&&(D+=z/2*Math.sin(_))):(O=I,ee=(1-V)*z/2);let L;if(pe.showLabelBackdrop){const G=Fr(pe.backdropPadding),ne=fe.heights[x],le=fe.widths[x];let ue=ee-G.top,ce=0-G.left;switch(re){case"middle":ue-=ne/2;break;case"bottom":ue-=ne;break}switch(M){case"center":ce-=le/2;break;case"right":ce-=le;break;case"inner":x===C-1?ce-=le:x>0&&(ce-=le/2);break}L={left:ce,top:ue,width:le+G.width,height:ne+G.height,color:pe.backdropColor}}w.push({label:R,font:F,textOffset:ee,options:{rotation:_,color:ae,strokeColor:Q,strokeWidth:q,textAlign:Y,textBaseline:re,translation:[D,O],backdrop:L}})}return w}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-Gi(this.labelRotation))return e==="top"?"left":"right";let i="center";return t.align==="start"?i="left":t.align==="end"?i="right":t.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),l=e+s,c=o.widest.width;let d,h;return t==="left"?i?(h=this.right+s,r==="near"?d="left":r==="center"?(d="center",h+=c/2):(d="right",h+=c)):(h=this.right-l,r==="near"?d="right":r==="center"?(d="center",h-=c/2):(d="left",h=this.left)):t==="right"?i?(h=this.left+s,r==="near"?d="right":r==="center"?(d="center",h-=c/2):(d="left",h-=c)):(h=this.left+l,r==="near"?d="left":r==="center"?(d="center",h+=c/2):(d="right",h=this.right)):d="right",{textAlign:d,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:r,top:i,width:s,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?t.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const t=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const l=(c,d,h)=>{!h.width||!h.color||(r.save(),r.lineWidth=h.width,r.strokeStyle=h.color,r.setLineDash(h.borderDash||[]),r.lineDashOffset=h.borderDashOffset,r.beginPath(),r.moveTo(c.x,c.y),r.lineTo(d.x,d.y),r.stroke(),r.restore())};if(t.display)for(s=0,o=i.length;s<o;++s){const c=i[s];t.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),t.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const l=i.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let d,h,p,g;this.isHorizontal()?(d=po(e,this.left,o)-o/2,h=po(e,this.right,l)+l/2,p=g=c):(p=po(e,this.top,o)-o/2,g=po(e,this.bottom,l)+l/2,d=h=c),t.save(),t.lineWidth=s.width,t.strokeStyle=s.color,t.beginPath(),t.moveTo(d,p),t.lineTo(h,g),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&kf(r,i);const s=this.getLabelItems(e);for(const o of s){const l=o.options,c=o.font,d=o.label,h=o.textOffset;Bc(r,d,0,h,c,l)}i&&Af(r)}drawTitle(){const{ctx:e,options:{position:t,title:r,reverse:i}}=this;if(!r.display)return;const s=jn(r.font),o=Fr(r.padding),l=r.align;let c=s.lineHeight/2;t==="bottom"||t==="center"||Je(t)?(c+=o.bottom,gn(r.text)&&(c+=s.lineHeight*(r.text.length-1))):c+=o.top;const{titleX:d,titleY:h,maxWidth:p,rotation:g}=Jq(this,c,t,l);Bc(e,r.text,0,0,s,{color:r.color,maxWidth:p,rotation:g,textAlign:Zq(l,t,i),textBaseline:"middle",translation:[d,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,r=Ye(e.grid&&e.grid.z,-1),i=Ye(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==ul.prototype.draw?[{z:t,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,o;for(s=0,o=t.length;s<o;++s){const l=t[s];l[r]===this.id&&(!e||l.type===e)&&i.push(l)}return i}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return jn(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class qd{constructor(e,t,r){this.type=e,this.scope=t,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let r;nG(t)&&(r=this.register(t));const i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,eG(e,o,r),this.override&&en.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,r=e.id,i=this.scope;r in t&&delete t[r],i&&r in en[i]&&(delete en[i][r],this.override&&delete Uo[r])}}function eG(n,e,t){const r=Pc(Object.create(null),[t?en.get(t):{},en.get(e),n.defaults]);en.set(e,r),n.defaultRoutes&&tG(e,n.defaultRoutes),n.descriptors&&en.describe(e,n.descriptors)}function tG(n,e){Object.keys(e).forEach(t=>{const r=t.split("."),i=r.pop(),s=[n].concat(r).join("."),o=e[t].split("."),l=o.pop(),c=o.join(".");en.route(s,i,c,l)})}function nG(n){return"id"in n&&"defaults"in n}class rG{constructor(){this.controllers=new qd(Jy,"datasets",!0),this.elements=new qd(Ks,"elements"),this.plugins=new qd(Object,"plugins"),this.scales=new qd(ul,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,r){[...t].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):mt(i,o=>{const l=r||this._getRegistryForType(o);this._exec(e,l,o)})})}_exec(e,t,r){const i=zy(e);Rt(r["before"+i],[],r),t[e](r),Rt(r["after"+i],[],r)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const r=this._typedRegistries[t];if(r.isForType(e))return r}return this.plugins}_get(e,t,r){const i=t.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var gi=new rG;class iG{constructor(){this._init=void 0}notify(e,t,r,i){if(t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,t,r);return t==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,t,r,i){i=i||{};for(const s of e){const o=s.plugin,l=o[r],c=[t,i,s.options];if(Rt(l,c,o)===!1&&i.cancelable)return!1}return!0}invalidate(){kt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const r=e&&e.config,i=Ye(r.options&&r.options.plugins,{}),s=sG(r);return i===!1&&!t?[]:aG(e,s,i,t)}_notifyStateChanges(e){const t=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(l=>!o.some(c=>l.plugin.id===c.plugin.id));this._notify(i(t,r),e,"stop"),this._notify(i(r,t),e,"start")}}function sG(n){const e={},t=[],r=Object.keys(gi.plugins.items);for(let s=0;s<r.length;s++)t.push(gi.getPlugin(r[s]));const i=n.plugins||[];for(let s=0;s<i.length;s++){const o=i[s];t.indexOf(o)===-1&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}function oG(n,e){return!e&&n===!1?null:n===!0?{}:n}function aG(n,{plugins:e,localIds:t},r,i){const s=[],o=n.getContext();for(const l of e){const c=l.id,d=oG(r[c],i);d!==null&&s.push({plugin:l,options:lG(n.config,{plugin:l,local:t[c]},d,o)})}return s}function lG(n,{plugin:e,local:t},r,i){const s=n.pluginScopeKeys(e),o=n.getOptionScopes(r,s);return t&&e.defaults&&o.push(e.defaults),n.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function yv(n,e){const t=en.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function cG(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function uG(n,e){return n===e?"_index_":"_value_"}function fE(n){if(n==="x"||n==="y"||n==="r")return n}function dG(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function bv(n,...e){if(fE(n))return n;for(const t of e){const r=t.axis||dG(t.position)||n.length>1&&fE(n[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function pE(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function hG(n,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(r=>r.xAxisID===n||r.yAxisID===n);if(t.length)return pE(n,"x",t[0])||pE(n,"y",t[0])}return{}}function fG(n,e){const t=Uo[n.type]||{scales:{}},r=e.scales||{},i=yv(n.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{const l=r[o];if(!Je(l))return console.error(`Invalid scale configuration for scale: ${o}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=bv(o,l,hG(o,n),en.scales[l.type]),d=uG(c,i),h=t.scales||{};s[o]=vc(Object.create(null),[{axis:c},l,h[c],h[d]])}),n.data.datasets.forEach(o=>{const l=o.type||n.type,c=o.indexAxis||yv(l,e),h=(Uo[l]||{}).scales||{};Object.keys(h).forEach(p=>{const g=cG(p,c),v=o[g+"AxisID"]||g;s[v]=s[v]||Object.create(null),vc(s[v],[{axis:g},r[v],h[p]])})}),Object.keys(s).forEach(o=>{const l=s[o];vc(l,[en.scales[l.type],en.scale])}),s}function zD(n){const e=n.options||(n.options={});e.plugins=Ye(e.plugins,{}),e.scales=fG(n,e)}function $D(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function pG(n){return n=n||{},n.data=$D(n.data),zD(n),n}const gE=new Map,WD=new Set;function Gd(n,e){let t=gE.get(n);return t||(t=e(),gE.set(n,t),WD.add(t)),t}const ec=(n,e,t)=>{const r=jc(e,t);r!==void 0&&n.add(r)};class gG{constructor(e){this._config=pG(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=$D(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),zD(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Gd(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return Gd(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return Gd(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,r=this.type;return Gd(`${r}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const r=this._scopeCache;let i=r.get(e);return(!i||t)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,t,r){const{options:i,type:s}=this,o=this._cachedScopes(e,r),l=o.get(t);if(l)return l;const c=new Set;t.forEach(h=>{e&&(c.add(e),h.forEach(p=>ec(c,e,p))),h.forEach(p=>ec(c,i,p)),h.forEach(p=>ec(c,Uo[s]||{},p)),h.forEach(p=>ec(c,en,p)),h.forEach(p=>ec(c,gv,p))});const d=Array.from(c);return d.length===0&&d.push(Object.create(null)),WD.has(t)&&o.set(t,d),d}chartOptionScopes(){const{options:e,type:t}=this;return[e,Uo[t]||{},en.datasets[t]||{},{type:t},en,gv]}resolveNamedOptions(e,t,r,i=[""]){const s={$shared:!0},{resolver:o,subPrefixes:l}=mE(this._resolverCache,e,i);let c=o;if(vG(o,t)){s.$shared=!1,r=Ws(r)?r():r;const d=this.createResolver(e,r,l);c=Xa(o,r,d)}for(const d of t)s[d]=c[d];return s}createResolver(e,t,r=[""],i){const{resolver:s}=mE(this._resolverCache,e,r);return Je(t)?Xa(s,t,void 0,i):s}}function mE(n,e,t){let r=n.get(e);r||(r=new Map,n.set(e,r));const i=t.join();let s=r.get(i);return s||(s={resolver:Yy(e,t),subPrefixes:t.filter(l=>!l.toLowerCase().includes("hover"))},r.set(i,s)),s}const mG=n=>Je(n)&&Object.getOwnPropertyNames(n).some(e=>Ws(n[e]));function vG(n,e){const{isScriptable:t,isIndexable:r}=ED(n);for(const i of e){const s=t(i),o=r(i),l=(o||s)&&n[i];if(s&&(Ws(l)||mG(l))||o&&gn(l))return!0}return!1}var yG="4.5.1";const bG=["top","bottom","left","right","chartArea"];function vE(n,e){return n==="top"||n==="bottom"||bG.indexOf(n)===-1&&e==="x"}function yE(n,e){return function(t,r){return t[n]===r[n]?t[e]-r[e]:t[n]-r[n]}}function bE(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),Rt(t&&t.onComplete,[n],e)}function _G(n){const e=n.chart,t=e.options.animation;Rt(t&&t.onProgress,[n],e)}function VD(n){return Xy()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const uh={},_E=n=>{const e=VD(n);return Object.values(uh).filter(t=>t.canvas===e).pop()};function wG(n,e,t){const r=Object.keys(n);for(const i of r){const s=+i;if(s>=e){const o=n[i];delete n[i],(t>0||s>e)&&(n[s+t]=o)}}}function SG(n,e,t,r){return!t||n.type==="mouseout"?null:r?e:n}let Of=class{static defaults=en;static instances=uh;static overrides=Uo;static registry=gi;static version=yG;static getChart=_E;static register(...e){gi.add(...e),wE()}static unregister(...e){gi.remove(...e),wE()}constructor(e,t){const r=this.config=new gG(t),i=VD(e),s=_E(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||Bq(i)),this.platform.updateConfig(r);const l=this.platform.acquireContext(i,o.aspectRatio),c=l&&l.canvas,d=c&&c.height,h=c&&c.width;if(this.id=C4(),this.ctx=l,this.canvas=c,this.width=h,this.height=d,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new iG,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=V4(p=>this.update(p),o.resizeDelay||0),this._dataChanges=[],uh[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}ji.listen(this,"complete",bE),ji.listen(this,"progress",_G),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:r,height:i,_aspectRatio:s}=this;return kt(e)?t&&s?s:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return gi}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():qx(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return $x(this.canvas,this.ctx),this}stop(){return ji.stop(this),this}resize(e,t){ji.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,t,s),l=r.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,qx(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),Rt(r.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};mt(t,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,t=e.scales,r=this.scales,i=Object.keys(r).reduce((o,l)=>(o[l]=!1,o),{});let s=[];t&&(s=s.concat(Object.keys(t).map(o=>{const l=t[o],c=bv(o,l),d=c==="r",h=c==="x";return{options:l,dposition:d?"chartArea":h?"bottom":"left",dtype:d?"radialLinear":h?"category":"linear"}}))),mt(s,o=>{const l=o.options,c=l.id,d=bv(c,l),h=Ye(l.type,o.dtype);(l.position===void 0||vE(l.position,d)!==vE(o.dposition))&&(l.position=o.dposition),i[c]=!0;let p=null;if(c in r&&r[c].type===h)p=r[c];else{const g=gi.getScale(h);p=new g({id:c,type:h,ctx:this.ctx,chart:this}),r[p.id]=p}p.init(l,e)}),mt(i,(o,l)=>{o||delete r[l]}),mt(r,o=>{jr.configure(this,o,o.options),jr.addBox(this,o)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,r=e.length;if(e.sort((i,s)=>i.index-s.index),r>t){for(let i=t;i<r;++i)this._destroyDatasetMeta(i);e.splice(t,r-t)}this._sortedMetasets=e.slice(0).sort(yE("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((r,i)=>{t.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=t.length;r<i;r++){const s=t[r];let o=this.getDatasetMeta(r);const l=s.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=l,o.indexAxis=s.indexAxis||yv(l,this.options),o.order=s.order||0,o.index=r,o.label=""+s.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const c=gi.getController(l),{datasetElementType:d,dataElementType:h}=en.datasets[l];Object.assign(c,{dataElementType:gi.getElement(h),datasetElementType:d&&gi.getElement(d)}),o.controller=new c(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){mt(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const r=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let d=0,h=this.data.datasets.length;d<h;d++){const{controller:p}=this.getDatasetMeta(d),g=!i&&s.indexOf(p)===-1;p.buildOrUpdateElements(g),o=Math.max(+p.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||mt(s,d=>{d.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(yE("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){mt(this.scales,e=>{jr.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!Mx(t,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of t){const o=r==="_removeElements"?-s:s;wG(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,r=s=>new Set(e.filter(o=>o[0]===s).map((o,l)=>l+","+o.splice(1).join(","))),i=r(0);for(let s=1;s<t;s++)if(!Mx(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;jr.update(this,this.width,this.height,e);const t=this.chartArea,r=t.width<=0||t.height<=0;this._layers=[],mt(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,r=this.data.datasets.length;t<r;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,r=this.data.datasets.length;t<r;++t)this._updateDataset(t,Ws(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(t),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ji.has(this)?this.attached&&!ji.running(this)&&ji.start(this):(this.draw(),bE({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,r=[];let i,s;for(i=0,s=t.length;i<s;++i){const o=t[i];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,r={meta:e,index:e.index,cancelable:!0},i=ND(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(i&&kf(t,i),e.controller.draw(),i&&Af(t),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return Uc(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,r,i){const s=bq.modes[t];return typeof s=="function"?s(this,e,r,i):[]}getDatasetMeta(e){const t=this.data.datasets[e],r=this._metasets;let i=r.filter(s=>s&&s._dataset===t).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=Ko(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!t.hidden}setDatasetVisibility(e,t){const r=this.getDatasetMeta(e);r.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,r){const i=r?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,i);Vh(t)?(s.data[t].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(s,{visible:r}),this.update(l=>l.datasetIndex===e?i:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),ji.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),$x(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete uh[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,r=(s,o)=>{t.addEventListener(this,s,o),e[s]=o},i=(s,o,l)=>{s.offsetX=o,s.offsetY=l,this._eventHandler(s)};mt(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,r=(c,d)=>{t.addEventListener(this,c,d),e[c]=d},i=(c,d)=>{e[c]&&(t.removeEventListener(this,c,d),delete e[c])},s=(c,d)=>{this.canvas&&this.resize(c,d)};let o;const l=()=>{i("attach",l),this.attached=!0,this.resize(),r("resize",s),r("detach",o)};o=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",l)},t.isAttached(this.canvas)?l():o()}unbindEvents(){mt(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},mt(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,r){const i=r?"set":"remove";let s,o,l,c;for(t==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),l=0,c=e.length;l<c;++l){o=e[l];const d=o&&this.getDatasetMeta(o.datasetIndex).controller;d&&d[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],r=e.map(({datasetIndex:s,index:o})=>{const l=this.getDatasetMeta(s);if(!l)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:l.data[o],index:o}});!$h(r,t)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,t))}notifyPlugins(e,t,r){return this._plugins.notify(this,e,t,r)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,r){const i=this.options.hover,s=(c,d)=>c.filter(h=>!d.some(p=>h.datasetIndex===p.datasetIndex&&h.index===p.index)),o=s(t,e),l=r?e:s(e,t);o.length&&this.updateHoverStyle(o,i.mode,!1),l.length&&i.mode&&this.updateHoverStyle(l,i.mode,!0)}_eventHandler(e,t){const r={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(e,t,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(e,t,r){const{_active:i=[],options:s}=this,o=t,l=this._getActiveElements(e,i,r,o),c=O4(e),d=SG(e,this._lastEvent,r,c);r&&(this._lastEvent=null,Rt(s.onHover,[e,l,this],this),c&&Rt(s.onClick,[e,l,this],this));const h=!$h(l,i);return(h||t)&&(this._active=l,this._updateHoverStyles(l,i,t)),this._lastEvent=d,h}_getActiveElements(e,t,r,i){if(e.type==="mouseout")return[];if(!r)return t;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}};function wE(){return mt(Of.instances,n=>n._plugins.invalidate())}function xG(n,e,t){const{startAngle:r,x:i,y:s,outerRadius:o,innerRadius:l,options:c}=e,{borderWidth:d,borderJoinStyle:h}=c,p=Math.min(d/o,mr(r-t));if(n.beginPath(),n.arc(i,s,o-d/2,r+p/2,t-p/2),l>0){const g=Math.min(d/l,mr(r-t));n.arc(i,s,l+d/2,t-g/2,r+g/2,!0)}else{const g=Math.min(d/2,o*mr(r-t));if(h==="round")n.arc(i,s,g,t-vt/2,r+vt/2,!0);else if(h==="bevel"){const v=2*g*g,y=-v*Math.cos(t+vt/2)+i,_=-v*Math.sin(t+vt/2)+s,w=v*Math.cos(r+vt/2)+i,x=v*Math.sin(r+vt/2)+s;n.lineTo(y,_),n.lineTo(w,x)}}n.closePath(),n.moveTo(0,0),n.rect(0,0,n.canvas.width,n.canvas.height),n.clip("evenodd")}function EG(n,e,t){const{startAngle:r,pixelMargin:i,x:s,y:o,outerRadius:l,innerRadius:c}=e;let d=i/l;n.beginPath(),n.arc(s,o,l,r-d,t+d),c>i?(d=i/c,n.arc(s,o,c,t+d,r-d,!0)):n.arc(s,o,i,t+mn,r-mn),n.closePath(),n.clip()}function CG(n){return Gy(n,["outerStart","outerEnd","innerStart","innerEnd"])}function TG(n,e,t,r){const i=CG(n.options.borderRadius),s=(t-e)/2,o=Math.min(s,r*e/2),l=c=>{const d=(t-Math.min(s,c))*r/2;return $n(c,0,Math.min(s,d))};return{outerStart:l(i.outerStart),outerEnd:l(i.outerEnd),innerStart:$n(i.innerStart,0,o),innerEnd:$n(i.innerEnd,0,o)}}function Aa(n,e,t,r){return{x:t+n*Math.cos(e),y:r+n*Math.sin(e)}}function Kh(n,e,t,r,i,s){const{x:o,y:l,startAngle:c,pixelMargin:d,innerRadius:h}=e,p=Math.max(e.outerRadius+r+t-d,0),g=h>0?h+r+t+d:0;let v=0;const y=i-c;if(r){const pe=h>0?h-r:0,ie=p>0?p-r:0,ae=(pe+ie)/2,Q=ae!==0?y*ae/(ae+r):y;v=(y-Q)/2}const _=Math.max(.001,y*p-t/vt)/p,w=(y-_)/2,x=c+w+v,C=i-w-v,{outerStart:T,outerEnd:R,innerStart:D,innerEnd:O}=TG(e,g,p,C-x),M=p-T,I=p-R,F=x+T/M,z=C-R/I,V=g+D,ee=g+O,re=x+D/V,fe=C-O/ee;if(n.beginPath(),s){const pe=(F+z)/2;if(n.arc(o,l,p,F,pe),n.arc(o,l,p,pe,z),R>0){const q=Aa(I,z,o,l);n.arc(q.x,q.y,R,z,C+mn)}const ie=Aa(ee,C,o,l);if(n.lineTo(ie.x,ie.y),O>0){const q=Aa(ee,fe,o,l);n.arc(q.x,q.y,O,C+mn,fe+Math.PI)}const ae=(C-O/g+(x+D/g))/2;if(n.arc(o,l,g,C-O/g,ae,!0),n.arc(o,l,g,ae,x+D/g,!0),D>0){const q=Aa(V,re,o,l);n.arc(q.x,q.y,D,re+Math.PI,x-mn)}const Q=Aa(M,x,o,l);if(n.lineTo(Q.x,Q.y),T>0){const q=Aa(M,F,o,l);n.arc(q.x,q.y,T,x-mn,F)}}else{n.moveTo(o,l);const pe=Math.cos(F)*p+o,ie=Math.sin(F)*p+l;n.lineTo(pe,ie);const ae=Math.cos(z)*p+o,Q=Math.sin(z)*p+l;n.lineTo(ae,Q)}n.closePath()}function kG(n,e,t,r,i){const{fullCircles:s,startAngle:o,circumference:l}=e;let c=e.endAngle;if(s){Kh(n,e,t,r,c,i);for(let d=0;d<s;++d)n.fill();isNaN(l)||(c=o+(l%$t||$t))}return Kh(n,e,t,r,c,i),n.fill(),c}function AG(n,e,t,r,i){const{fullCircles:s,startAngle:o,circumference:l,options:c}=e,{borderWidth:d,borderJoinStyle:h,borderDash:p,borderDashOffset:g,borderRadius:v}=c,y=c.borderAlign==="inner";if(!d)return;n.setLineDash(p||[]),n.lineDashOffset=g,y?(n.lineWidth=d*2,n.lineJoin=h||"round"):(n.lineWidth=d,n.lineJoin=h||"bevel");let _=e.endAngle;if(s){Kh(n,e,t,r,_,i);for(let w=0;w<s;++w)n.stroke();isNaN(l)||(_=o+(l%$t||$t))}y&&EG(n,e,_),c.selfJoin&&_-o>=vt&&v===0&&h!=="miter"&&xG(n,e,_),s||(Kh(n,e,t,r,_,i),n.stroke())}class DG extends Ks{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,r){const i=this.getProps(["x","y"],r),{angle:s,distance:o}=yD(i,{x:e,y:t}),{startAngle:l,endAngle:c,innerRadius:d,outerRadius:h,circumference:p}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),g=(this.options.spacing+this.options.borderWidth)/2,v=Ye(p,c-l),y=Fc(s,l,c)&&l!==c,_=v>=$t||y,w=Ao(o,d+g,h+g);return _&&w}getCenterPoint(e){const{x:t,y:r,startAngle:i,endAngle:s,innerRadius:o,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:c,spacing:d}=this.options,h=(i+s)/2,p=(o+l+d+c)/2;return{x:t+Math.cos(h)*p,y:r+Math.sin(h)*p}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:r}=this,i=(t.offset||0)/4,s=(t.spacing||0)/2,o=t.circular;if(this.pixelMargin=t.borderAlign==="inner"?.33:0,this.fullCircles=r>$t?Math.floor(r/$t):0,r===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const l=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(l)*i,Math.sin(l)*i);const c=1-Math.sin(Math.min(vt,r||0)),d=i*c;e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,kG(e,this,d,s,o),AG(e,this,d,s,o),e.restore()}}function qD(n,e,t=e){n.lineCap=Ye(t.borderCapStyle,e.borderCapStyle),n.setLineDash(Ye(t.borderDash,e.borderDash)),n.lineDashOffset=Ye(t.borderDashOffset,e.borderDashOffset),n.lineJoin=Ye(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=Ye(t.borderWidth,e.borderWidth),n.strokeStyle=Ye(t.borderColor,e.borderColor)}function RG(n,e,t){n.lineTo(t.x,t.y)}function OG(n){return n.stepped?s6:n.tension||n.cubicInterpolationMode==="monotone"?o6:RG}function GD(n,e,t={}){const r=n.length,{start:i=0,end:s=r-1}=t,{start:o,end:l}=e,c=Math.max(i,o),d=Math.min(s,l),h=i<o&&s<o||i>l&&s>l;return{count:r,start:c,loop:e.loop,ilen:d<c&&!h?r+d-c:d-c}}function IG(n,e,t,r){const{points:i,options:s}=e,{count:o,start:l,loop:c,ilen:d}=GD(i,t,r),h=OG(s);let{move:p=!0,reverse:g}=r||{},v,y,_;for(v=0;v<=d;++v)y=i[(l+(g?d-v:v))%o],!y.skip&&(p?(n.moveTo(y.x,y.y),p=!1):h(n,_,y,g,s.stepped),_=y);return c&&(y=i[(l+(g?d:0))%o],h(n,_,y,g,s.stepped)),!!c}function MG(n,e,t,r){const i=e.points,{count:s,start:o,ilen:l}=GD(i,t,r),{move:c=!0,reverse:d}=r||{};let h=0,p=0,g,v,y,_,w,x;const C=R=>(o+(d?l-R:R))%s,T=()=>{_!==w&&(n.lineTo(h,w),n.lineTo(h,_),n.lineTo(h,x))};for(c&&(v=i[C(0)],n.moveTo(v.x,v.y)),g=0;g<=l;++g){if(v=i[C(g)],v.skip)continue;const R=v.x,D=v.y,O=R|0;O===y?(D<_?_=D:D>w&&(w=D),h=(p*h+R)/++p):(T(),n.lineTo(R,D),y=O,p=0,_=w=D),x=D}T()}function _v(n){const e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?MG:IG}function NG(n){return n.stepped?U6:n.tension||n.cubicInterpolationMode==="monotone"?B6:wo}function PG(n,e,t,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,t,r)&&i.closePath()),qD(n,e.options),n.stroke(i)}function jG(n,e,t,r){const{segments:i,options:s}=e,o=_v(e);for(const l of i)qD(n,s,l.style),n.beginPath(),o(n,e,l,{start:t,end:t+r-1})&&n.closePath(),n.stroke()}const LG=typeof Path2D=="function";function FG(n,e,t,r){LG&&!e.options.segment?PG(n,e,t,r):jG(n,e,t,r)}class If extends Ks{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;O6(this._points,r,e,i,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=q6(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,r=e.length;return r&&t[e[r-1].end]}interpolate(e,t){const r=this.options,i=e[t],s=this.points,o=MD(this,{property:t,start:i,end:i});if(!o.length)return;const l=[],c=NG(r);let d,h;for(d=0,h=o.length;d<h;++d){const{start:p,end:g}=o[d],v=s[p],y=s[g];if(v===y){l.push(v);continue}const _=Math.abs((i-v[t])/(y[t]-v[t])),w=c(v,y,_,r.stepped);w[t]=e[t],l.push(w)}return l.length===1?l[0]:l}pathSegment(e,t,r){return _v(this)(e,this,t,r)}path(e,t,r){const i=this.segments,s=_v(this);let o=this._loop;t=t||0,r=r||this.points.length-t;for(const l of i)o&=s(e,this,l,{start:t,end:t+r-1});return!!o}draw(e,t,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),FG(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function SE(n,e,t,r){const i=n.options,{[t]:s}=n.getProps([t],r);return Math.abs(e-s)<i.radius+i.hitRadius}class UG extends Ks{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,r){const i=this.options,{x:s,y:o}=this.getProps(["x","y"],r);return Math.pow(e-s,2)+Math.pow(t-o,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(e,t){return SE(this,e,"x",t)}inYRange(e,t){return SE(this,e,"y",t)}getCenterPoint(e){const{x:t,y:r}=this.getProps(["x","y"],e);return{x:t,y:r}}size(e){e=e||this.options||{};let t=e.radius||0;t=Math.max(t,t&&e.hoverRadius||0);const r=t&&e.borderWidth||0;return(t+r)*2}draw(e,t){const r=this.options;this.skip||r.radius<.1||!Uc(this,t,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,mv(e,r,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function BG(n,e,t){const r=n.segments,i=n.points,s=e.points,o=[];for(const l of r){let{start:c,end:d}=l;d=Mf(c,d,i);const h=wv(t,i[c],i[d],l.loop);if(!e.segments){o.push({source:l,target:h,start:i[c],end:i[d]});continue}const p=MD(e,h);for(const g of p){const v=wv(t,s[g.start],s[g.end],g.loop),y=ID(l,i,v);for(const _ of y)o.push({source:_,target:g,start:{[t]:xE(h,v,"start",Math.max)},end:{[t]:xE(h,v,"end",Math.min)}})}}return o}function wv(n,e,t,r){if(r)return;let i=e[n],s=t[n];return n==="angle"&&(i=mr(i),s=mr(s)),{property:n,start:i,end:s}}function HG(n,e){const{x:t=null,y:r=null}=n||{},i=e.points,s=[];return e.segments.forEach(({start:o,end:l})=>{l=Mf(o,l,i);const c=i[o],d=i[l];r!==null?(s.push({x:c.x,y:r}),s.push({x:d.x,y:r})):t!==null&&(s.push({x:t,y:c.y}),s.push({x:t,y:d.y}))}),s}function Mf(n,e,t){for(;e>n;e--){const r=t[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function xE(n,e,t,r){return n&&e?r(n[t],e[t]):n?n[t]:e?e[t]:0}function YD(n,e){let t=[],r=!1;return gn(n)?(r=!0,t=n):t=HG(n,e),t.length?new If({points:t,options:{tension:0},_loop:r,_fullLoop:r}):null}function EE(n){return n&&n.fill!==!1}function zG(n,e,t){let i=n[e].fill;const s=[e];let o;if(!t)return i;for(;i!==!1&&s.indexOf(i)===-1;){if(!Ln(i))return i;if(o=n[i],!o)return!1;if(o.visible)return i;s.push(i),i=o.fill}return!1}function $G(n,e,t){const r=GG(n);if(Je(r))return isNaN(r.value)?!1:r;let i=parseFloat(r);return Ln(i)&&Math.floor(i)===i?WG(r[0],e,i,t):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function WG(n,e,t,r){return(n==="-"||n==="+")&&(t=e+t),t===e||t<0||t>=r?!1:t}function VG(n,e){let t=null;return n==="start"?t=e.bottom:n==="end"?t=e.top:Je(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}function qG(n,e,t){let r;return n==="start"?r=t:n==="end"?r=e.options.reverse?e.min:e.max:Je(n)?r=n.value:r=e.getBaseValue(),r}function GG(n){const e=n.options,t=e.fill;let r=Ye(t&&t.target,t);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function YG(n){const{scale:e,index:t,line:r}=n,i=[],s=r.segments,o=r.points,l=KG(e,t);l.push(YD({x:null,y:e.bottom},r));for(let c=0;c<s.length;c++){const d=s[c];for(let h=d.start;h<=d.end;h++)QG(i,o[h],l)}return new If({points:i,options:{}})}function KG(n,e){const t=[],r=n.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const s=r[i];if(s.index===e)break;s.hidden||t.unshift(s.dataset)}return t}function QG(n,e,t){const r=[];for(let i=0;i<t.length;i++){const s=t[i],{first:o,last:l,point:c}=XG(s,e,"x");if(!(!c||o&&l)){if(o)r.unshift(c);else if(n.push(c),!l)break}}n.push(...r)}function XG(n,e,t){const r=n.interpolate(e,t);if(!r)return{};const i=r[t],s=n.segments,o=n.points;let l=!1,c=!1;for(let d=0;d<s.length;d++){const h=s[d],p=o[h.start][t],g=o[h.end][t];if(Ao(i,p,g)){l=i===p,c=i===g;break}}return{first:l,last:c,point:r}}class KD{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,r){const{x:i,y:s,radius:o}=this;return t=t||{start:0,end:$t},e.arc(i,s,o,t.end,t.start,!0),!r.bounds}interpolate(e){const{x:t,y:r,radius:i}=this,s=e.angle;return{x:t+Math.cos(s)*i,y:r+Math.sin(s)*i,angle:s}}}function ZG(n){const{chart:e,fill:t,line:r}=n;if(Ln(t))return JG(e,t);if(t==="stack")return YG(n);if(t==="shape")return!0;const i=e8(n);return i instanceof KD?i:YD(i,r)}function JG(n,e){const t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}function e8(n){return(n.scale||{}).getPointPositionForValue?n8(n):t8(n)}function t8(n){const{scale:e={},fill:t}=n,r=VG(t,e);if(Ln(r)){const i=e.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}function n8(n){const{scale:e,fill:t}=n,r=e.options,i=e.getLabels().length,s=r.reverse?e.max:e.min,o=qG(t,e,s),l=[];if(r.grid.circular){const c=e.getPointPositionForValue(0,s);return new KD({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(o)})}for(let c=0;c<i;++c)l.push(e.getPointPositionForValue(c,o));return l}function gm(n,e,t){const r=ZG(e),{chart:i,index:s,line:o,scale:l,axis:c}=e,d=o.options,h=d.fill,p=d.backgroundColor,{above:g=p,below:v=p}=h||{},y=i.getDatasetMeta(s),_=ND(i,y);r&&o.points.length&&(kf(n,t),r8(n,{line:o,target:r,above:g,below:v,area:t,scale:l,axis:c,clip:_}),Af(n))}function r8(n,e){const{line:t,target:r,above:i,below:s,area:o,scale:l,clip:c}=e,d=t._loop?"angle":e.axis;n.save();let h=s;s!==i&&(d==="x"?(CE(n,r,o.top),mm(n,{line:t,target:r,color:i,scale:l,property:d,clip:c}),n.restore(),n.save(),CE(n,r,o.bottom)):d==="y"&&(TE(n,r,o.left),mm(n,{line:t,target:r,color:s,scale:l,property:d,clip:c}),n.restore(),n.save(),TE(n,r,o.right),h=i)),mm(n,{line:t,target:r,color:h,scale:l,property:d,clip:c}),n.restore()}function CE(n,e,t){const{segments:r,points:i}=e;let s=!0,o=!1;n.beginPath();for(const l of r){const{start:c,end:d}=l,h=i[c],p=i[Mf(c,d,i)];s?(n.moveTo(h.x,h.y),s=!1):(n.lineTo(h.x,t),n.lineTo(h.x,h.y)),o=!!e.pathSegment(n,l,{move:o}),o?n.closePath():n.lineTo(p.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function TE(n,e,t){const{segments:r,points:i}=e;let s=!0,o=!1;n.beginPath();for(const l of r){const{start:c,end:d}=l,h=i[c],p=i[Mf(c,d,i)];s?(n.moveTo(h.x,h.y),s=!1):(n.lineTo(t,h.y),n.lineTo(h.x,h.y)),o=!!e.pathSegment(n,l,{move:o}),o?n.closePath():n.lineTo(t,p.y)}n.lineTo(t,e.first().y),n.closePath(),n.clip()}function mm(n,e){const{line:t,target:r,property:i,color:s,scale:o,clip:l}=e,c=BG(t,r,i);for(const{source:d,target:h,start:p,end:g}of c){const{style:{backgroundColor:v=s}={}}=d,y=r!==!0;n.save(),n.fillStyle=v,i8(n,o,l,y&&wv(i,p,g)),n.beginPath();const _=!!t.pathSegment(n,d);let w;if(y){_?n.closePath():kE(n,r,g,i);const x=!!r.pathSegment(n,h,{move:_,reverse:!0});w=_&&x,w||kE(n,r,p,i)}n.closePath(),n.fill(w?"evenodd":"nonzero"),n.restore()}}function i8(n,e,t,r){const i=e.chart.chartArea,{property:s,start:o,end:l}=r||{};if(s==="x"||s==="y"){let c,d,h,p;s==="x"?(c=o,d=i.top,h=l,p=i.bottom):(c=i.left,d=o,h=i.right,p=l),n.beginPath(),t&&(c=Math.max(c,t.left),h=Math.min(h,t.right),d=Math.max(d,t.top),p=Math.min(p,t.bottom)),n.rect(c,d,h-c,p-d),n.clip()}}function kE(n,e,t,r){const i=e.interpolate(t,r);i&&n.lineTo(i.x,i.y)}var s8={id:"filler",afterDatasetsUpdate(n,e,t){const r=(n.data.datasets||[]).length,i=[];let s,o,l,c;for(o=0;o<r;++o)s=n.getDatasetMeta(o),l=s.dataset,c=null,l&&l.options&&l instanceof If&&(c={visible:n.isDatasetVisible(o),index:o,fill:$G(l,o,r),chart:n,axis:s.controller.options.indexAxis,scale:s.vScale,line:l}),s.$filler=c,i.push(c);for(o=0;o<r;++o)c=i[o],!(!c||c.fill===!1)&&(c.fill=zG(i,o,t.propagate))},beforeDraw(n,e,t){const r=t.drawTime==="beforeDraw",i=n.getSortedVisibleDatasetMetas(),s=n.chartArea;for(let o=i.length-1;o>=0;--o){const l=i[o].$filler;l&&(l.line.updateControlPoints(s,l.axis),r&&l.fill&&gm(n.ctx,l,s))}},beforeDatasetsDraw(n,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;const r=n.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const s=r[i].$filler;EE(s)&&gm(n.ctx,s,n.chartArea)}},beforeDatasetDraw(n,e,t){const r=e.meta.$filler;!EE(r)||t.drawTime!=="beforeDatasetDraw"||gm(n.ctx,r,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const AE=(n,e)=>{let{boxHeight:t=e,boxWidth:r=e}=n;return n.usePointStyle&&(t=Math.min(t,e),r=n.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:t,itemHeight:Math.max(e,t)}},o8=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index;class DE extends Ks{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,r){this.maxWidth=e,this.maxHeight=t,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=Rt(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(r=>e.filter(r,this.chart.data))),e.sort&&(t=t.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=jn(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=AE(r,s);let d,h;t.font=i.string,this.isHorizontal()?(d=this.maxWidth,h=this._fitRows(o,s,l,c)+10):(h=this.maxHeight,d=this._fitCols(o,i,l,c)+10),this.width=Math.min(d,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,t,r,i){const{ctx:s,maxWidth:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.lineWidths=[0],h=i+l;let p=e;s.textAlign="left",s.textBaseline="middle";let g=-1,v=-h;return this.legendItems.forEach((y,_)=>{const w=r+t/2+s.measureText(y.text).width;(_===0||d[d.length-1]+w+2*l>o)&&(p+=h,d[d.length-(_>0?0:1)]=0,v+=h,g++),c[_]={left:0,top:v,row:g,width:w,height:i},d[d.length-1]+=w+l}),p}_fitCols(e,t,r,i){const{ctx:s,maxHeight:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.columnSizes=[],h=o-e;let p=l,g=0,v=0,y=0,_=0;return this.legendItems.forEach((w,x)=>{const{itemWidth:C,itemHeight:T}=a8(r,t,s,w,i);x>0&&v+T+2*l>h&&(p+=g+l,d.push({width:g,height:v}),y+=g+l,_++,g=v=0),c[x]={left:y,top:v,col:_,width:C,height:T},g=Math.max(g,C),v+=T+l}),p+=g,d.push({width:g,height:v}),p}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:r,labels:{padding:i},rtl:s}}=this,o=$a(s,this.left,this.width);if(this.isHorizontal()){let l=0,c=Nn(r,this.left+i,this.right-this.lineWidths[l]);for(const d of t)l!==d.row&&(l=d.row,c=Nn(r,this.left+i,this.right-this.lineWidths[l])),d.top+=this.top+e+i,d.left=o.leftForLtr(o.x(c),d.width),c+=d.width+i}else{let l=0,c=Nn(r,this.top+e+i,this.bottom-this.columnSizes[l].height);for(const d of t)d.col!==l&&(l=d.col,c=Nn(r,this.top+e+i,this.bottom-this.columnSizes[l].height)),d.top=c,d.left+=this.left+i,d.left=o.leftForLtr(o.x(d.left),d.width),c+=d.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;kf(e,this),this._draw(),Af(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,l=en.color,c=$a(e.rtl,this.left,this.width),d=jn(o.font),{padding:h}=o,p=d.size,g=p/2;let v;this.drawTitle(),i.textAlign=c.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=d.string;const{boxWidth:y,boxHeight:_,itemHeight:w}=AE(o,p),x=function(O,M,I){if(isNaN(y)||y<=0||isNaN(_)||_<0)return;i.save();const F=Ye(I.lineWidth,1);if(i.fillStyle=Ye(I.fillStyle,l),i.lineCap=Ye(I.lineCap,"butt"),i.lineDashOffset=Ye(I.lineDashOffset,0),i.lineJoin=Ye(I.lineJoin,"miter"),i.lineWidth=F,i.strokeStyle=Ye(I.strokeStyle,l),i.setLineDash(Ye(I.lineDash,[])),o.usePointStyle){const z={radius:_*Math.SQRT2/2,pointStyle:I.pointStyle,rotation:I.rotation,borderWidth:F},V=c.xPlus(O,y/2),ee=M+g;xD(i,z,V,ee,o.pointStyleWidth&&y)}else{const z=M+Math.max((p-_)/2,0),V=c.leftForLtr(O,y),ee=wc(I.borderRadius);i.beginPath(),Object.values(ee).some(re=>re!==0)?vv(i,{x:V,y:z,w:y,h:_,radius:ee}):i.rect(V,z,y,_),i.fill(),F!==0&&i.stroke()}i.restore()},C=function(O,M,I){Bc(i,I.text,O,M+w/2,d,{strikethrough:I.hidden,textAlign:c.textAlign(I.textAlign)})},T=this.isHorizontal(),R=this._computeTitleHeight();T?v={x:Nn(s,this.left+h,this.right-r[0]),y:this.top+h+R,line:0}:v={x:this.left+h,y:Nn(s,this.top+R+h,this.bottom-t[0].height),line:0},DD(this.ctx,e.textDirection);const D=w+h;this.legendItems.forEach((O,M)=>{i.strokeStyle=O.fontColor,i.fillStyle=O.fontColor;const I=i.measureText(O.text).width,F=c.textAlign(O.textAlign||(O.textAlign=o.textAlign)),z=y+g+I;let V=v.x,ee=v.y;c.setWidth(this.width),T?M>0&&V+z+h>this.right&&(ee=v.y+=D,v.line++,V=v.x=Nn(s,this.left+h,this.right-r[v.line])):M>0&&ee+D>this.bottom&&(V=v.x=V+t[v.line].width+h,v.line++,ee=v.y=Nn(s,this.top+R+h,this.bottom-t[v.line].height));const re=c.x(V);if(x(re,ee,O),V=q4(F,V+y+g,T?V+z:this.right,e.rtl),C(c.x(V),ee,O),T)v.x+=z+h;else if(typeof O.text!="string"){const fe=d.lineHeight;v.y+=QD(O,fe)+h}else v.y+=D}),RD(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,r=jn(t.font),i=Fr(t.padding);if(!t.display)return;const s=$a(e.rtl,this.left,this.width),o=this.ctx,l=t.position,c=r.size/2,d=i.top+c;let h,p=this.left,g=this.width;if(this.isHorizontal())g=Math.max(...this.lineWidths),h=this.top+d,p=Nn(e.align,p,this.right-g);else{const y=this.columnSizes.reduce((_,w)=>Math.max(_,w.height),0);h=d+Nn(e.align,this.top,this.bottom-y-e.labels.padding-this._computeTitleHeight())}const v=Nn(l,p,p+g);o.textAlign=s.textAlign(Wy(l)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=r.string,Bc(o,t.text,v,h,r)}_computeTitleHeight(){const e=this.options.title,t=jn(e.font),r=Fr(e.padding);return e.display?t.lineHeight+r.height:0}_getLegendItemAt(e,t){let r,i,s;if(Ao(e,this.left,this.right)&&Ao(t,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],Ao(e,i.left,i.left+i.width)&&Ao(t,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const t=this.options;if(!u8(e.type,t))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,s=o8(i,r);i&&!s&&Rt(t.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&Rt(t.onHover,[e,r,this],this)}else r&&Rt(t.onClick,[e,r,this],this)}}function a8(n,e,t,r,i){const s=l8(r,n,e,t),o=c8(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function l8(n,e,t,r){let i=n.text;return i&&typeof i!="string"&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+t.size/2+r.measureText(i).width}function c8(n,e,t){let r=n;return typeof e.text!="string"&&(r=QD(e,t)),r}function QD(n,e){const t=n.text?n.text.length:0;return e*t}function u8(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var d8={id:"legend",_element:DE,start(n,e,t){const r=n.legend=new DE({ctx:n.ctx,options:t,chart:n});jr.configure(n,r,t),jr.addBox(n,r)},stop(n){jr.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){const r=n.legend;jr.configure(n,r,t),r.options=t},afterUpdate(n){const e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){const r=e.datasetIndex,i=t.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:l}}=n.legend.options;return n._getSortedDatasetMetas().map(c=>{const d=c.controller.getStyle(t?0:void 0),h=Fr(d.borderWidth);return{text:e[c.index].label,fillStyle:d.backgroundColor,fontColor:s,hidden:!c.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:d.borderColor,pointStyle:r||d.pointStyle,rotation:d.rotation,textAlign:i||d.textAlign,borderRadius:o&&(l||d.borderRadius),datasetIndex:c.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class XD extends Ks{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;const i=gn(r.text)?r.text.length:1;this._padding=Fr(r.padding);const s=i*jn(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:r,bottom:i,right:s,options:o}=this,l=o.align;let c=0,d,h,p;return this.isHorizontal()?(h=Nn(l,r,s),p=t+e,d=s-r):(o.position==="left"?(h=r+e,p=Nn(l,i,t),c=vt*-.5):(h=s-e,p=Nn(l,t,i),c=vt*.5),d=i-t),{titleX:h,titleY:p,maxWidth:d,rotation:c}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const r=jn(t.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:l,maxWidth:c,rotation:d}=this._drawArgs(s);Bc(e,t.text,0,0,r,{color:t.color,maxWidth:c,rotation:d,textAlign:Wy(t.align),textBaseline:"middle",translation:[o,l]})}}function h8(n,e){const t=new XD({ctx:n.ctx,options:e,chart:n});jr.configure(n,t,e),jr.addBox(n,t),n.titleBlock=t}var f8={id:"title",_element:XD,start(n,e,t){h8(n,t)},stop(n){const e=n.titleBlock;jr.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){const r=n.titleBlock;jr.configure(n,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const sc={average(n){if(!n.length)return!1;let e,t,r=new Set,i=0,s=0;for(e=0,t=n.length;e<t;++e){const l=n[e].element;if(l&&l.hasValue()){const c=l.tooltipPosition();r.add(c.x),i+=c.y,++s}}return s===0||r.size===0?!1:{x:[...r].reduce((l,c)=>l+c)/r.size,y:i/s}},nearest(n,e){if(!n.length)return!1;let t=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,o,l;for(s=0,o=n.length;s<o;++s){const c=n[s].element;if(c&&c.hasValue()){const d=c.getCenterPoint(),h=pv(e,d);h<i&&(i=h,l=c)}}if(l){const c=l.tooltipPosition();t=c.x,r=c.y}return{x:t,y:r}}};function fi(n,e){return e&&(gn(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function Li(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function p8(n,e){const{element:t,datasetIndex:r,index:i}=e,s=n.getDatasetMeta(r).controller,{label:o,value:l}=s.getLabelAndValue(i);return{chart:n,label:o,parsed:s.getParsed(i),raw:n.data.datasets[r].data[i],formattedValue:l,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:t}}function RE(n,e){const t=n.chart.ctx,{body:r,footer:i,title:s}=n,{boxWidth:o,boxHeight:l}=e,c=jn(e.bodyFont),d=jn(e.titleFont),h=jn(e.footerFont),p=s.length,g=i.length,v=r.length,y=Fr(e.padding);let _=y.height,w=0,x=r.reduce((R,D)=>R+D.before.length+D.lines.length+D.after.length,0);if(x+=n.beforeBody.length+n.afterBody.length,p&&(_+=p*d.lineHeight+(p-1)*e.titleSpacing+e.titleMarginBottom),x){const R=e.displayColors?Math.max(l,c.lineHeight):c.lineHeight;_+=v*R+(x-v)*c.lineHeight+(x-1)*e.bodySpacing}g&&(_+=e.footerMarginTop+g*h.lineHeight+(g-1)*e.footerSpacing);let C=0;const T=function(R){w=Math.max(w,t.measureText(R).width+C)};return t.save(),t.font=d.string,mt(n.title,T),t.font=c.string,mt(n.beforeBody.concat(n.afterBody),T),C=e.displayColors?o+2+e.boxPadding:0,mt(r,R=>{mt(R.before,T),mt(R.lines,T),mt(R.after,T)}),C=0,t.font=h.string,mt(n.footer,T),t.restore(),w+=y.width,{width:w,height:_}}function g8(n,e){const{y:t,height:r}=e;return t<r/2?"top":t>n.height-r/2?"bottom":"center"}function m8(n,e,t,r){const{x:i,width:s}=r,o=t.caretSize+t.caretPadding;if(n==="left"&&i+s+o>e.width||n==="right"&&i-s-o<0)return!0}function v8(n,e,t,r){const{x:i,width:s}=t,{width:o,chartArea:{left:l,right:c}}=n;let d="center";return r==="center"?d=i<=(l+c)/2?"left":"right":i<=s/2?d="left":i>=o-s/2&&(d="right"),m8(d,n,e,t)&&(d="center"),d}function OE(n,e,t){const r=t.yAlign||e.yAlign||g8(n,t);return{xAlign:t.xAlign||e.xAlign||v8(n,e,t,r),yAlign:r}}function y8(n,e){let{x:t,width:r}=n;return e==="right"?t-=r:e==="center"&&(t-=r/2),t}function b8(n,e,t){let{y:r,height:i}=n;return e==="top"?r+=t:e==="bottom"?r-=i+t:r-=i/2,r}function IE(n,e,t,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=n,{xAlign:l,yAlign:c}=t,d=i+s,{topLeft:h,topRight:p,bottomLeft:g,bottomRight:v}=wc(o);let y=y8(e,l);const _=b8(e,c,d);return c==="center"?l==="left"?y+=d:l==="right"&&(y-=d):l==="left"?y-=Math.max(h,g)+i:l==="right"&&(y+=Math.max(p,v)+i),{x:$n(y,0,r.width-e.width),y:$n(_,0,r.height-e.height)}}function Yd(n,e,t){const r=Fr(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-r.right:n.x+r.left}function ME(n){return fi([],Li(n))}function _8(n,e,t){return Ko(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function NE(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}const ZD={beforeTitle:Pi,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,r=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return t[e.dataIndex]}return""},afterTitle:Pi,beforeBody:Pi,beforeLabel:Pi,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return kt(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Pi,afterBody:Pi,beforeFooter:Pi,footer:Pi,afterFooter:Pi};function nr(n,e,t,r){const i=n[e].call(t,r);return typeof i>"u"?ZD[e].call(t,r):i}class PE extends Ks{static positioners=sc;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&t.options.animation&&r.animations,s=new PD(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=_8(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:r}=t,i=nr(r,"beforeTitle",this,e),s=nr(r,"title",this,e),o=nr(r,"afterTitle",this,e);let l=[];return l=fi(l,Li(i)),l=fi(l,Li(s)),l=fi(l,Li(o)),l}getBeforeBody(e,t){return ME(nr(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:r}=t,i=[];return mt(e,s=>{const o={before:[],lines:[],after:[]},l=NE(r,s);fi(o.before,Li(nr(l,"beforeLabel",this,s))),fi(o.lines,nr(l,"label",this,s)),fi(o.after,Li(nr(l,"afterLabel",this,s))),i.push(o)}),i}getAfterBody(e,t){return ME(nr(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:r}=t,i=nr(r,"beforeFooter",this,e),s=nr(r,"footer",this,e),o=nr(r,"afterFooter",this,e);let l=[];return l=fi(l,Li(i)),l=fi(l,Li(s)),l=fi(l,Li(o)),l}_createItems(e){const t=this._active,r=this.chart.data,i=[],s=[],o=[];let l=[],c,d;for(c=0,d=t.length;c<d;++c)l.push(p8(this.chart,t[c]));return e.filter&&(l=l.filter((h,p,g)=>e.filter(h,p,g,r))),e.itemSort&&(l=l.sort((h,p)=>e.itemSort(h,p,r))),mt(l,h=>{const p=NE(e.callbacks,h);i.push(nr(p,"labelColor",this,h)),s.push(nr(p,"labelPointStyle",this,h)),o.push(nr(p,"labelTextColor",this,h))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=l,l}update(e,t){const r=this.options.setContext(this.getContext()),i=this._active;let s,o=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const l=sc[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const c=this._size=RE(this,r),d=Object.assign({},l,c),h=OE(this.chart,r,d),p=IE(r,d,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,s={opacity:1,x:p.x,y:p.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,r,i){const s=this.getCaretPosition(e,r,i);t.lineTo(s.x1,s.y1),t.lineTo(s.x2,s.y2),t.lineTo(s.x3,s.y3)}getCaretPosition(e,t,r){const{xAlign:i,yAlign:s}=this,{caretSize:o,cornerRadius:l}=r,{topLeft:c,topRight:d,bottomLeft:h,bottomRight:p}=wc(l),{x:g,y:v}=e,{width:y,height:_}=t;let w,x,C,T,R,D;return s==="center"?(R=v+_/2,i==="left"?(w=g,x=w-o,T=R+o,D=R-o):(w=g+y,x=w+o,T=R-o,D=R+o),C=w):(i==="left"?x=g+Math.max(c,h)+o:i==="right"?x=g+y-Math.max(d,p)-o:x=this.caretX,s==="top"?(T=v,R=T-o,w=x-o,C=x+o):(T=v+_,R=T+o,w=x+o,C=x-o),D=T),{x1:w,x2:x,x3:C,y1:T,y2:R,y3:D}}drawTitle(e,t,r){const i=this.title,s=i.length;let o,l,c;if(s){const d=$a(r.rtl,this.x,this.width);for(e.x=Yd(this,r.titleAlign,r),t.textAlign=d.textAlign(r.titleAlign),t.textBaseline="middle",o=jn(r.titleFont),l=r.titleSpacing,t.fillStyle=r.titleColor,t.font=o.string,c=0;c<s;++c)t.fillText(i[c],d.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+l,c+1===s&&(e.y+=r.titleMarginBottom-l)}}_drawColorBox(e,t,r,i,s){const o=this.labelColors[r],l=this.labelPointStyles[r],{boxHeight:c,boxWidth:d}=s,h=jn(s.bodyFont),p=Yd(this,"left",s),g=i.x(p),v=c<h.lineHeight?(h.lineHeight-c)/2:0,y=t.y+v;if(s.usePointStyle){const _={radius:Math.min(d,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},w=i.leftForLtr(g,d)+d/2,x=y+c/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,mv(e,_,w,x),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,mv(e,_,w,x)}else{e.lineWidth=Je(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const _=i.leftForLtr(g,d),w=i.leftForLtr(i.xPlus(g,1),d-2),x=wc(o.borderRadius);Object.values(x).some(C=>C!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,vv(e,{x:_,y,w:d,h:c,radius:x}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),vv(e,{x:w,y:y+1,w:d-2,h:c-2,radius:x}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(_,y,d,c),e.strokeRect(_,y,d,c),e.fillStyle=o.backgroundColor,e.fillRect(w,y+1,d-2,c-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,t,r){const{body:i}=this,{bodySpacing:s,bodyAlign:o,displayColors:l,boxHeight:c,boxWidth:d,boxPadding:h}=r,p=jn(r.bodyFont);let g=p.lineHeight,v=0;const y=$a(r.rtl,this.x,this.width),_=function(I){t.fillText(I,y.x(e.x+v),e.y+g/2),e.y+=g+s},w=y.textAlign(o);let x,C,T,R,D,O,M;for(t.textAlign=o,t.textBaseline="middle",t.font=p.string,e.x=Yd(this,w,r),t.fillStyle=r.bodyColor,mt(this.beforeBody,_),v=l&&w!=="right"?o==="center"?d/2+h:d+2+h:0,R=0,O=i.length;R<O;++R){for(x=i[R],C=this.labelTextColors[R],t.fillStyle=C,mt(x.before,_),T=x.lines,l&&T.length&&(this._drawColorBox(t,e,R,y,r),g=Math.max(p.lineHeight,c)),D=0,M=T.length;D<M;++D)_(T[D]),g=p.lineHeight;mt(x.after,_)}v=0,g=p.lineHeight,mt(this.afterBody,_),e.y-=s}drawFooter(e,t,r){const i=this.footer,s=i.length;let o,l;if(s){const c=$a(r.rtl,this.x,this.width);for(e.x=Yd(this,r.footerAlign,r),e.y+=r.footerMarginTop,t.textAlign=c.textAlign(r.footerAlign),t.textBaseline="middle",o=jn(r.footerFont),t.fillStyle=r.footerColor,t.font=o.string,l=0;l<s;++l)t.fillText(i[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,t,r,i){const{xAlign:s,yAlign:o}=this,{x:l,y:c}=e,{width:d,height:h}=r,{topLeft:p,topRight:g,bottomLeft:v,bottomRight:y}=wc(i.cornerRadius);t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.beginPath(),t.moveTo(l+p,c),o==="top"&&this.drawCaret(e,t,r,i),t.lineTo(l+d-g,c),t.quadraticCurveTo(l+d,c,l+d,c+g),o==="center"&&s==="right"&&this.drawCaret(e,t,r,i),t.lineTo(l+d,c+h-y),t.quadraticCurveTo(l+d,c+h,l+d-y,c+h),o==="bottom"&&this.drawCaret(e,t,r,i),t.lineTo(l+v,c+h),t.quadraticCurveTo(l,c+h,l,c+h-v),o==="center"&&s==="left"&&this.drawCaret(e,t,r,i),t.lineTo(l,c+p),t.quadraticCurveTo(l,c,l+p,c),t.closePath(),t.fill(),i.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const o=sc[e.position].call(this,this._active,this._eventPosition);if(!o)return;const l=this._size=RE(this,e),c=Object.assign({},o,this._size),d=OE(t,e,c),h=IE(e,c,d,t);(i._to!==h.x||s._to!==h.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=l.width,this.height=l.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(t);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=Fr(t.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&l&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,i,t),DD(e,t.textDirection),s.y+=o.top,this.drawTitle(s,e,t),this.drawBody(s,e,t),this.drawFooter(s,e,t),RD(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const r=this._active,i=e.map(({datasetIndex:l,index:c})=>{const d=this.chart.getDatasetMeta(l);if(!d)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:d.data[c],index:c}}),s=!$h(r,i),o=this._positionChanged(i,t);(s||o)&&(this._active=i,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,r=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],o=this._getActiveElements(e,s,t,r),l=this._positionChanged(o,e),c=t||!$h(o,s)||l;return c&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),c}_getActiveElements(e,t,r,i){const s=this.options;if(e.type==="mouseout")return[];if(!i)return t.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&o.reverse(),o}_positionChanged(e,t){const{caretX:r,caretY:i,options:s}=this,o=sc[s.position].call(this,e,t);return o!==!1&&(r!==o.x||i!==o.y)}}var w8={id:"tooltip",_element:PE,positioners:sc,afterInit(n,e,t){t&&(n.tooltip=new PE({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){const t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:ZD},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const S8=(n,e,t,r)=>(typeof e=="string"?(t=n.push(e)-1,r.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function x8(n,e,t,r){const i=n.indexOf(e);if(i===-1)return S8(n,e,t,r);const s=n.lastIndexOf(e);return i!==s?t:i}const E8=(n,e)=>n===null?null:$n(Math.round(n),0,e);function jE(n){const e=this.getLabels();return n>=0&&n<e.length?e[n]:n}class C8 extends ul{static id="category";static defaults={ticks:{callback:jE}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const r=this.getLabels();for(const{index:i,label:s}of t)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(kt(e))return null;const r=this.getLabels();return t=isFinite(t)&&r[t]===e?t:x8(r,e,Ye(t,e),this._addedLabels),E8(t,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),t||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,t=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=e===0&&t===s.length-1?s:s.slice(e,t+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=t;o++)i.push({value:o});return i}getLabelForValue(e){return jE.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function T8(n,e){const t=[],{bounds:i,step:s,min:o,max:l,precision:c,count:d,maxTicks:h,maxDigits:p,includeBounds:g}=n,v=s||1,y=h-1,{min:_,max:w}=e,x=!kt(o),C=!kt(l),T=!kt(d),R=(w-_)/(p+1);let D=Px((w-_)/y/v)*v,O,M,I,F;if(D<1e-14&&!x&&!C)return[{value:_},{value:w}];F=Math.ceil(w/D)-Math.floor(_/D),F>y&&(D=Px(F*D/y/v)*v),kt(c)||(O=Math.pow(10,c),D=Math.ceil(D*O)/O),i==="ticks"?(M=Math.floor(_/D)*D,I=Math.ceil(w/D)*D):(M=_,I=w),x&&C&&s&&j4((l-o)/s,D/1e3)?(F=Math.round(Math.min((l-o)/D,h)),D=(l-o)/F,M=o,I=l):T?(M=x?o:M,I=C?l:I,F=d-1,D=(I-M)/F):(F=(I-M)/D,yc(F,Math.round(F),D/1e3)?F=Math.round(F):F=Math.ceil(F));const z=Math.max(jx(D),jx(M));O=Math.pow(10,kt(c)?z:c),M=Math.round(M*O)/O,I=Math.round(I*O)/O;let V=0;for(x&&(g&&M!==o?(t.push({value:o}),M<o&&V++,yc(Math.round((M+V*D)*O)/O,o,LE(o,R,n))&&V++):M<o&&V++);V<F;++V){const ee=Math.round((M+V*D)*O)/O;if(C&&ee>l)break;t.push({value:ee})}return C&&g&&I!==l?t.length&&yc(t[t.length-1].value,l,LE(l,R,n))?t[t.length-1].value=l:t.push({value:l}):(!C||I===l)&&t.push({value:I}),t}function LE(n,e,{horizontal:t,minRotation:r}){const i=Gi(r),s=(t?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+n).length;return Math.min(e/s,o)}class k8 extends ul{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return kt(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const o=c=>i=t?i:c,l=c=>s=r?s:c;if(e){const c=Qa(i),d=Qa(s);c<0&&d<0?l(0):c>0&&d>0&&o(0)}if(i===s){let c=s===0?1:Math.abs(s*.05);l(s+c),e||o(i-c)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),t=t||11),t&&(i=Math.min(t,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},s=this._range||this,o=T8(i,s);return e.bounds==="ticks"&&L4(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let t=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-t)/Math.max(e.length-1,1)/2;t-=i,r+=i}this._startValue=t,this._endValue=r,this._valueRange=r-t}getLabelForValue(e){return qy(e,this.chart.options.locale,this.options.ticks.format)}}class A8 extends k8{static id="linear";static defaults={ticks:{callback:SD.formatters.numeric}};determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Ln(e)?e:0,this.max=Ln(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,r=Gi(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const Nf={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},or=Object.keys(Nf);function FE(n,e){return n-e}function UE(n,e){if(kt(e))return null;const t=n._adapter,{parser:r,round:i,isoWeekday:s}=n._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),Ln(o)||(o=typeof r=="string"?t.parse(o,r):t.parse(o)),o===null?null:(i&&(o=i==="week"&&(Lc(s)||s===!0)?t.startOf(o,"isoWeek",s):t.startOf(o,i)),+o)}function BE(n,e,t,r){const i=or.length;for(let s=or.indexOf(n);s<i-1;++s){const o=Nf[or[s]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(l*o.size))<=r)return or[s]}return or[i-1]}function D8(n,e,t,r,i){for(let s=or.length-1;s>=or.indexOf(t);s--){const o=or[s];if(Nf[o].common&&n._adapter.diff(i,r,o)>=e-1)return o}return or[t?or.indexOf(t):0]}function R8(n){for(let e=or.indexOf(n)+1,t=or.length;e<t;++e)if(Nf[or[e]].common)return or[e]}function HE(n,e,t){if(!t)n[e]=!0;else if(t.length){const{lo:r,hi:i}=$y(t,e),s=t[r]>=e?t[r]:t[i];n[s]=!0}}function O8(n,e,t,r){const i=n._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let l,c;for(l=s;l<=o;l=+i.add(l,1,r))c=t[l],c>=0&&(e[c].major=!0);return e}function zE(n,e,t){const r=[],i={},s=e.length;let o,l;for(o=0;o<s;++o)l=e[o],i[l]=o,r.push({value:l,major:!1});return s===0||!t?r:O8(n,r,i,t)}class $E extends ul{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const r=e.time||(e.time={}),i=this._adapter=new pq._date(e.adapters.date);i.init(t),vc(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:UE(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,r=e.time.unit||"day";let{min:i,max:s,minDefined:o,maxDefined:l}=this.getUserBounds();function c(d){!o&&!isNaN(d.min)&&(i=Math.min(i,d.min)),!l&&!isNaN(d.max)&&(s=Math.max(s,d.max))}(!o||!l)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),i=Ln(i)&&!isNaN(i)?i:+t.startOf(Date.now(),r),s=Ln(s)&&!isNaN(s)?s:+t.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],r=e[e.length-1]),{min:t,max:r}}buildTicks(){const e=this.options,t=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,o=this.max,l=z4(i,s,o);return this._unit=t.unit||(r.autoSkip?BE(t.minUnit,this.min,this.max,this._getLabelCapacity(s)):D8(this,l.length,t.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:R8(this._unit),this.initOffsets(i),e.reverse&&l.reverse(),zE(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,r=0,i,s;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?t=1-i:t=(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?r=s:r=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;t=$n(t,0,o),r=$n(r,0,o),this._offsets={start:t,end:r,factor:1/(t+1+r)}}_generate(){const e=this._adapter,t=this.min,r=this.max,i=this.options,s=i.time,o=s.unit||BE(s.minUnit,t,r,this._getLabelCapacity(t)),l=Ye(i.ticks.stepSize,1),c=o==="week"?s.isoWeekday:!1,d=Lc(c)||c===!0,h={};let p=t,g,v;if(d&&(p=+e.startOf(p,"isoWeek",c)),p=+e.startOf(p,d?"day":o),e.diff(r,t,o)>1e5*l)throw new Error(t+" and "+r+" are too far apart with stepSize of "+l+" "+o);const y=i.ticks.source==="data"&&this.getDataTimestamps();for(g=p,v=0;g<r;g=+e.add(g,l,o),v++)HE(h,g,y);return(g===r||i.bounds==="ticks"||v===1)&&HE(h,g,y),Object.keys(h).sort(FE).map(_=>+_)}getLabelForValue(e){const t=this._adapter,r=this.options.time;return r.tooltipFormat?t.format(e,r.tooltipFormat):t.format(e,r.displayFormats.datetime)}format(e,t){const i=this.options.time.displayFormats,s=this._unit,o=t||i[s];return this._adapter.format(e,o)}_tickFormatFunction(e,t,r,i){const s=this.options,o=s.ticks.callback;if(o)return Rt(o,[e,t,r],this);const l=s.time.displayFormats,c=this._unit,d=this._majorUnit,h=c&&l[c],p=d&&l[d],g=r[t],v=d&&p&&g&&g.major;return this._adapter.format(e,i||(v?p:h))}generateTickLabels(e){let t,r,i;for(t=0,r=e.length;t<r;++t)i=e[t],i.label=this._tickFormatFunction(i.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+r)*t.factor)}getValueForPixel(e){const t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,r=this.ctx.measureText(e).width,i=Gi(this.isHorizontal()?t.maxRotation:t.minRotation),s=Math.cos(i),o=Math.sin(i),l=this._resolveTickFontOptions(0).size;return{w:r*s+l*o,h:r*o+l*s}}_getLabelCapacity(e){const t=this.options.time,r=t.displayFormats,i=r[t.unit]||r.millisecond,s=this._tickFormatFunction(e,0,zE(this,[e],this._majorUnit),i),o=this._getLabelSize(s),l=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],t,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(t=0,r=i.length;t<r;++t)e=e.concat(i[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,r;if(e.length)return e;const i=this.getLabels();for(t=0,r=i.length;t<r;++t)e.push(UE(this,i[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return W4(e.sort(FE))}}function Kd(n,e,t){let r=0,i=n.length-1,s,o,l,c;t?(e>=n[r].pos&&e<=n[i].pos&&({lo:r,hi:i}=Do(n,"pos",e)),{pos:s,time:l}=n[r],{pos:o,time:c}=n[i]):(e>=n[r].time&&e<=n[i].time&&({lo:r,hi:i}=Do(n,"time",e)),{time:s,pos:l}=n[r],{time:o,pos:c}=n[i]);const d=o-s;return d?l+(c-l)*(e-s)/d:l}class cY extends $E{static id="timeseries";static defaults=$E.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Kd(t,this.min),this._tableRange=Kd(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:r}=this,i=[],s=[];let o,l,c,d,h;for(o=0,l=e.length;o<l;++o)d=e[o],d>=t&&d<=r&&i.push(d);if(i.length<2)return[{time:t,pos:0},{time:r,pos:1}];for(o=0,l=i.length;o<l;++o)h=i[o+1],c=i[o-1],d=i[o],Math.round((h+c)/2)!==d&&s.push({time:d,pos:o/(l-1)});return s}_generate(){const e=this.min,t=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(t)||r.length===1)&&r.push(t),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),r=this.getLabelTimestamps();return t.length&&r.length?e=this.normalize(t.concat(r)):e=t.length?t:r,e=this._cache.all=e,e}getDecimalForValue(e){return(Kd(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return Kd(this._table,r*this._tableRange+this._minPos,!0)}}const JD="label";function WE(n,e){typeof n=="function"?n(e):n&&(n.current=e)}function I8(n,e){const t=n.options;t&&e&&Object.assign(t,e)}function eR(n,e){n.labels=e}function tR(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:JD;const r=[];n.datasets=e.map(i=>{const s=n.datasets.find(o=>o[t]===i[t]);return!s||!i.data||r.includes(s)?{...i}:(r.push(s),Object.assign(s,i),s)})}function M8(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:JD;const t={labels:[],datasets:[]};return eR(t,n.labels),tR(t,n.datasets,e),t}function N8(n,e){const{height:t=150,width:r=300,redraw:i=!1,datasetIdKey:s,type:o,data:l,options:c,plugins:d=[],fallbackContent:h,updateMode:p,...g}=n,v=k.useRef(null),y=k.useRef(null),_=()=>{v.current&&(y.current=new Of(v.current,{type:o,data:M8(l,s),options:c&&{...c},plugins:d}),WE(e,y.current))},w=()=>{WE(e,null),y.current&&(y.current.destroy(),y.current=null)};return k.useEffect(()=>{!i&&y.current&&c&&I8(y.current,c)},[i,c]),k.useEffect(()=>{!i&&y.current&&eR(y.current.config.data,l.labels)},[i,l.labels]),k.useEffect(()=>{!i&&y.current&&l.datasets&&tR(y.current.config.data,l.datasets,s)},[i,l.datasets]),k.useEffect(()=>{y.current&&(i?(w(),setTimeout(_)):y.current.update(p))},[i,c,l.labels,l.datasets,p]),k.useEffect(()=>{y.current&&(w(),setTimeout(_))},[o]),k.useEffect(()=>(_(),()=>w()),[]),K.createElement("canvas",{ref:v,role:"img",height:t,width:r,...g},h)}const P8=k.forwardRef(N8);function nR(n,e){return Of.register(e),k.forwardRef((t,r)=>K.createElement(P8,{...t,ref:r,type:n}))}const j8=nR("line",hq),L8=nR("pie",fq);Of.register(C8,A8,UG,If,f8,w8,d8,DG,s8);function F8(){const{data:n=[],isLoading:e,error:t}=lf(),{data:r=[],isLoading:i,error:s}=cf(),{isInitialized:o}=Jt(),{init:l,cleanup:c}=wf(),d=e||i;k.useEffect(()=>(o||l(),()=>{c()}),[l,o,c]);const h=k.useMemo(()=>{if(d)return{};const y=n.reduce((q,Y)=>{const L=Y.work_center||"Unknown";return q[L]||(q[L]={[$i.ACTIVE]:0,[$i.INACTIVE]:0,[$i.MAINTENANCE]:0}),q[L][Y.status]=(q[L][Y.status]||0)+1,q},{}),_=new Date,w=new Date(_),x=_.getDay(),C=x===0?6:x-1;w.setUTCDate(_.getUTCDate()-C),w.setUTCHours(0,0,0,0);const T=r.filter(q=>q.completion_date?new Date(q.completion_date)>=w:!1).length,R=r.filter(q=>q.status==="IN PROGRESS"||q.status==="SCHEDULED").length,D=r.filter(q=>q.delivery_date?new Date(q.delivery_date)<_&&(q.quantity_completed||0)<(q.quantity||0):!1).length,O=n.filter(q=>q.status===$i.ACTIVE).length,M={},I=new Date(_);I.setUTCDate(_.getUTCDate()-7);const F=new Date(_);F.setUTCDate(_.getUTCDate()+7),r.forEach(q=>{if(q.scheduled_start_time){const Y=new Date(q.scheduled_start_time);if(Y>=I&&Y<=F){const L=Y.toISOString().split("T")[0];M[L]=(M[L]||0)+1}}});const z=r.filter(q=>q.scheduled_start_time?new Date(q.scheduled_start_time)>=w:!1),V=z.filter(q=>q.cost&&q.cost>0).map(q=>q.cost),ee=z.filter(q=>q.duration&&q.duration>0).map(q=>q.duration),re=V.length>0?V.reduce((q,Y)=>q+Y,0)/V.length:0,fe=ee.length>0?ee.reduce((q,Y)=>q+Y,0)/ee.length:0,pe={},ie={},ae=["STAMPA","CONFEZIONAMENTO"],Q=["ZANICA","BUSTO_GAROLFO"];return ae.forEach(q=>{const Y=q.toLowerCase();pe[Y]={},ie[Y]={},Q.forEach(L=>{const G=L==="BUSTO_GAROLFO"?"busto_garolfo":L.toLowerCase(),ne=r.filter(se=>!se.work_center||!se.department?!1:se.work_center===L&&se.department===q),le=ne.filter(se=>se.cost&&se.cost>0).map(se=>se.cost),ue=le.length>0?le.reduce((se,Pe)=>se+Pe,0)/le.length:0,ce=ne.filter(se=>se.duration&&se.duration>0).map(se=>se.duration),Ce=ce.length>0?ce.reduce((se,Pe)=>se+Pe,0)/ce.length:0;pe[Y][G]=ue,ie[Y][G]=Ce})}),{machinesByWorkCenter:y,completedThisWeek:T,tasksInWip:R,delayedTasks:D,activeMachines:O,totalMachines:n.length,totalOrders:r.length,tasksPerDay:M,avgWeeklyCost:re,avgWeeklyDuration:fe,weeklyOrdersCount:z.length,costMatrix:pe,durationMatrix:ie}},[n,r,d]),p=k.useMemo(()=>{if(!h.tasksPerDay)return null;const y=[],_=new Date;for(let w=-7;w<=7;w++){const x=new Date(_);x.setUTCDate(_.getUTCDate()+w);const C=x.toISOString().split("T")[0];y.push(C)}return{labels:y.map(w=>{const x=new Date(w);return xn(new Date(x),"dd/MM")}),datasets:[{label:"Lavori Iniziati",data:y.map(w=>h.tasksPerDay[w]||0),borderColor:"rgb(37, 99, 235)",backgroundColor:"rgba(37, 99, 235, 0.1)",tension:.4,borderWidth:2,pointBackgroundColor:"rgb(37, 99, 235)",pointBorderColor:"rgb(37, 99, 235)",pointRadius:4,pointHoverRadius:6,fill:!0}]}},[h.tasksPerDay]),g={responsive:!0,maintainAspectRatio:!1,interaction:{intersect:!1,mode:"index"},plugins:{legend:{display:!1},title:{display:!1},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"white",bodyColor:"white",borderColor:"rgba(255, 255, 255, 0.1)",borderWidth:1,cornerRadius:8,displayColors:!1}},scales:{y:{beginAtZero:!0,grid:{color:"rgba(156, 163, 175, 0.2)",drawBorder:!1},ticks:{stepSize:1,color:"rgba(156, 163, 175, 0.8)",font:{size:12,family:"Inter, sans-serif"},padding:8}},x:{grid:{color:"rgba(156, 163, 175, 0.2)",drawBorder:!1},ticks:{color:"rgba(156, 163, 175, 0.8)",font:{size:12,family:"Inter, sans-serif"},padding:8}}},elements:{point:{hoverBorderWidth:3}}},v={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{padding:10,usePointStyle:!0,font:{size:10}}}}};return d?E.jsx("div",{className:"p-1 bg-card rounded shadow-sm border",children:E.jsx("div",{className:"text-center py-1 text-muted-foreground text-[10px]",children:"Caricamento dashboard..."})}):t||s?E.jsx("div",{className:"p-1 bg-card rounded shadow-sm border",children:E.jsxs("div",{className:"text-center py-1 text-destructive text-[10px]",children:["Errore nel caricamento dei dati: ",t?.message||s?.message]})}):E.jsxs("div",{className:"space-y-6",children:[E.jsx("div",{className:"flex justify-between items-center",children:E.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Dashboard Produzione"})}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[E.jsxs(Ar,{className:"p-6",children:[E.jsx(Dr,{className:"pb-2",children:E.jsx(Rr,{className:"text-sm font-medium text-muted-foreground",children:"Macchine Totali"})}),E.jsxs(Or,{children:[E.jsx("div",{className:"text-3xl font-bold text-foreground",children:h.totalMachines}),E.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Attive: ",h.activeMachines]})]})]}),E.jsxs(Ar,{className:"p-6",children:[E.jsx(Dr,{className:"pb-2",children:E.jsx(Rr,{className:"text-sm font-medium text-muted-foreground",children:"Ordini Totali"})}),E.jsxs(Or,{children:[E.jsx("div",{className:"text-3xl font-bold text-foreground",children:h.totalOrders}),E.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Totali nel sistema"})]})]}),E.jsxs(Ar,{className:"p-6",children:[E.jsx(Dr,{className:"pb-2",children:E.jsx(Rr,{className:"text-sm font-medium text-muted-foreground",children:"Completati Questa Settimana"})}),E.jsxs(Or,{children:[E.jsx("div",{className:"text-3xl font-bold text-foreground",children:h.completedThisWeek}),E.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Lavori completati"})]})]}),E.jsxs(Ar,{className:"p-6",children:[E.jsx(Dr,{className:"pb-2",children:E.jsx(Rr,{className:"text-sm font-medium text-muted-foreground",children:"Lavori in Corso"})}),E.jsxs(Or,{children:[E.jsx("div",{className:"text-3xl font-bold text-foreground",children:h.tasksInWip}),E.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"In progress/scheduled"})]})]}),E.jsxs(Ar,{className:"p-6 border-destructive/20 bg-destructive/5",children:[E.jsx(Dr,{className:"pb-2",children:E.jsx(Rr,{className:"text-sm font-medium text-destructive",children:"Lavori Ritardati"})}),E.jsxs(Or,{children:[E.jsx("div",{className:"text-3xl font-bold text-destructive",children:h.delayedTasks}),E.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Oltre la scadenza"})]})]})]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[E.jsxs(Ar,{className:"p-6",children:[E.jsx(Dr,{className:"pb-2",children:E.jsx(Rr,{className:"text-sm font-medium text-muted-foreground",children:"Ordini Settimanali"})}),E.jsxs(Or,{children:[E.jsx("div",{className:"text-3xl font-bold text-foreground",children:h.weeklyOrdersCount}),E.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Questa Settimana"})]})]}),E.jsxs(Ar,{className:"p-6",children:[E.jsx(Dr,{className:"pb-2",children:E.jsx(Rr,{className:"text-sm font-medium text-muted-foreground",children:"Costo Medio"})}),E.jsxs(Or,{children:[E.jsxs("div",{className:"text-3xl font-bold text-foreground",children:["€",h.avgWeeklyCost.toFixed(2)]}),E.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Per Lavoro Questa Settimana"})]})]}),E.jsxs(Ar,{className:"p-6",children:[E.jsx(Dr,{className:"pb-2",children:E.jsx(Rr,{className:"text-sm font-medium text-muted-foreground",children:"Durata Media"})}),E.jsxs(Or,{children:[E.jsxs("div",{className:"text-3xl font-bold text-foreground",children:[h.avgWeeklyDuration.toFixed(1),"h"]}),E.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Per Lavoro Questa Settimana"})]})]})]}),E.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[E.jsxs(Ar,{children:[E.jsx(Dr,{children:E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx(Rr,{children:"Lavori Iniziati per Giorno (14 giorni)"}),E.jsx("div",{className:"flex items-center gap-3 text-xs",children:E.jsxs("div",{className:"flex items-center gap-1",children:[E.jsx("span",{className:"inline-block w-3 h-1 bg-primary"})," Lavori"]})})]})}),E.jsx(Or,{children:E.jsx("div",{className:"h-64",children:p&&E.jsx(j8,{data:p,options:g,height:256})})})]}),E.jsxs(Ar,{children:[E.jsx(Dr,{children:E.jsx(Rr,{children:"Macchine per Centro di Lavoro e Stato"})}),E.jsx(Or,{children:E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(h.machinesByWorkCenter||{}).map(([y,_])=>{const w={labels:Object.keys(_).map(x=>x.charAt(0).toUpperCase()+x.slice(1).toLowerCase()),datasets:[{data:Object.values(_),backgroundColor:["rgba(37, 99, 235, 0.8)","rgba(107, 114, 128, 0.8)","rgba(156, 163, 175, 0.8)"],borderColor:["rgba(37, 99, 235, 1)","rgba(107, 114, 128, 1)","rgba(156, 163, 175, 1)"],borderWidth:2}]};return E.jsxs("div",{className:"text-center",children:[E.jsx("h4",{className:"text-sm font-medium text-foreground mb-2",children:y}),E.jsx("div",{className:"h-32",children:E.jsx(L8,{data:w,options:v,height:150})}),E.jsx("div",{className:"text-xs text-muted-foreground mt-2",children:Object.entries(_).map(([x,C])=>E.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[E.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:x==="ACTIVE"?"rgba(37, 99, 235, 0.8)":x==="INACTIVE"?"rgba(107, 114, 128, 0.8)":"rgba(156, 163, 175, 0.8)"}}),E.jsxs("span",{children:[x,": ",C]})]},x))})]},y)})})})]})]}),E.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[E.jsxs(Ar,{children:[E.jsx(Dr,{children:E.jsx(Rr,{children:"Costo Medio per Centro di Lavoro e Reparto"})}),E.jsx(Or,{children:E.jsx("div",{className:"overflow-x-auto",children:E.jsxs("table",{className:"w-full",children:[E.jsx("thead",{children:E.jsxs("tr",{className:"border-b border-border",children:[E.jsx("th",{className:"text-left py-2 px-2 text-sm font-medium text-muted-foreground"}),E.jsx("th",{className:"text-left py-2 px-2 text-sm font-medium text-muted-foreground",children:"ZANICA"}),E.jsx("th",{className:"text-left py-2 px-2 text-sm font-medium text-muted-foreground",children:"BUSTO GAROLFO"})]})}),E.jsxs("tbody",{children:[E.jsxs("tr",{className:"border-b border-border",children:[E.jsx("td",{className:"py-2 px-2 text-sm font-medium text-muted-foreground",children:"STAMPA"}),E.jsxs("td",{className:"py-2 px-2 text-sm text-foreground",children:["€",h.costMatrix?.stampa?.zanica?.toFixed(2)||"0.00"]}),E.jsxs("td",{className:"py-2 px-2 text-sm text-foreground",children:["€",h.costMatrix?.stampa?.busto_garolfo?.toFixed(2)||"0.00"]})]}),E.jsxs("tr",{children:[E.jsx("td",{className:"py-2 px-2 text-sm font-medium text-muted-foreground",children:"CONFEZIONAMENTO"}),E.jsxs("td",{className:"py-2 px-2 text-sm text-foreground",children:["€",h.costMatrix?.confezionamento?.zanica?.toFixed(2)||"0.00"]}),E.jsxs("td",{className:"py-2 px-2 text-sm text-foreground",children:["€",h.costMatrix?.confezionamento?.busto_garolfo?.toFixed(2)||"0.00"]})]})]})]})})})]}),E.jsxs(Ar,{children:[E.jsx(Dr,{children:E.jsx(Rr,{children:"Durata Media per Centro di Lavoro e Reparto"})}),E.jsx(Or,{children:E.jsx("div",{className:"overflow-x-auto",children:E.jsxs("table",{className:"w-full",children:[E.jsx("thead",{children:E.jsxs("tr",{className:"border-b border-border",children:[E.jsx("th",{className:"text-left py-2 px-2 text-sm font-medium text-muted-foreground"}),E.jsx("th",{className:"text-left py-2 px-2 text-sm font-medium text-muted-foreground",children:"ZANICA"}),E.jsx("th",{className:"text-left py-2 px-2 text-sm font-medium text-muted-foreground",children:"BUSTO GAROLFO"})]})}),E.jsxs("tbody",{children:[E.jsxs("tr",{className:"border-b border-border",children:[E.jsx("td",{className:"py-2 px-2 text-sm font-medium text-muted-foreground",children:"STAMPA"}),E.jsxs("td",{className:"py-2 px-2 text-sm text-foreground",children:[h.durationMatrix?.stampa?.zanica?.toFixed(1)||"0.0","h"]}),E.jsxs("td",{className:"py-2 px-2 text-sm text-foreground",children:[h.durationMatrix?.stampa?.busto_garolfo?.toFixed(1)||"0.0","h"]})]}),E.jsxs("tr",{children:[E.jsx("td",{className:"py-2 px-2 text-sm font-medium text-muted-foreground",children:"CONFEZIONAMENTO"}),E.jsxs("td",{className:"py-2 px-2 text-sm text-foreground",children:[h.durationMatrix?.confezionamento?.zanica?.toFixed(1)||"0.0","h"]}),E.jsxs("td",{className:"py-2 px-2 text-sm text-foreground",children:[h.durationMatrix?.confezionamento?.busto_garolfo?.toFixed(1)||"0.0","h"]})]})]})]})})})]})]})]})}const VE=({children:n,className:e="",disabled:t=!1,type:r="button",onClick:i,variant:s="default",size:o="default",...l})=>{const c="inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",d={default:"bg-primary text-primary-foreground hover:bg-primary/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground"},h={default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3"};return E.jsx("button",{type:r,disabled:t,onClick:i,className:`${c} ${d[s]} ${h[o]} ${e}`,...l,children:n})},qE=({className:n="",type:e="text",...t})=>E.jsx("input",{type:e,className:`flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${n}`,...t});function U8({title:n,logo:e,subtitle:t,isLoading:r=!1,error:i,onSubmit:s,onValidate:o,labels:l={signIn:"Sign In",email:"Email",password:"Password",forgotPassword:"Forgot Password?",signUp:"Sign Up",noAccount:"Don't have an account?",signingIn:"Signing in..."},showForgotPassword:c=!1,showSignUp:d=!1,forgotPasswordUrl:h="/forgot-password",signUpUrl:p="/signup",demoCredentials:g,additionalFields:v}){const[y,_]=k.useState({email:"",password:"",...g||{}}),[w,x]=k.useState({}),C=O=>{const{name:M,value:I}=O.target;_(F=>({...F,[M]:I})),w[M]&&x(F=>({...F,[M]:""}))},T=async O=>{O.preventDefault();const M={};if(y.email||(M.email="Email is required"),y.password||(M.password="Password is required"),o){const I=o(y);Object.assign(M,I)}if(Object.keys(M).length>0){x(M);return}try{await s(y)}catch(I){console.error("Login error:",I)}},R=O=>w[O]?E.jsx("p",{className:"text-sm text-red-600 mt-1",children:w[O]}):null;return E.jsx("div",{className:"min-h-screen flex",children:E.jsxs("div",{className:"container relative grid flex-col items-center justify-center sm:max-w-none lg:grid-cols-2 lg:px-0",children:[E.jsxs("div",{className:"relative hidden h-full flex-col bg-muted p-10 text-white dark:border-r lg:flex",style:{background:"#18181b"},children:[E.jsx("div",{className:"absolute inset-0 bg-zinc-900"}),E.jsxs("div",{className:"relative z-20 flex items-center text-lg font-medium",children:[e&&E.jsx("img",{className:"h-6 mr-2",src:e,alt:n}),n]}),t&&E.jsx("div",{className:"relative z-20 mt-auto",children:E.jsx("p",{className:"text-lg",children:t})})]}),E.jsx("div",{className:"lg:p-8",children:E.jsxs("div",{className:"mx-auto flex w-full flex-col justify-center space-y-6 sm:w-[350px]",children:[E.jsxs("div",{className:"flex flex-col space-y-2 text-center lg:hidden",children:[e&&E.jsx("img",{className:"h-8 mx-auto",src:e,alt:n}),E.jsx("h1",{className:"text-xl font-semibold",children:n})]}),E.jsx("div",{className:"flex flex-col space-y-2 text-center",children:E.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:l.signIn})}),E.jsxs("form",{onSubmit:T,className:"space-y-8",children:[E.jsxs("div",{className:"space-y-2",children:[E.jsx("label",{htmlFor:"email",className:"block text-sm font-medium",children:l.email}),E.jsx(qE,{id:"email",name:"email",type:"email",value:y.email,onChange:C,className:w.email?"border-red-500":"",disabled:r,autoComplete:"email"}),R("email")]}),E.jsxs("div",{className:"space-y-2",children:[E.jsx("label",{htmlFor:"password",className:"block text-sm font-medium",children:l.password}),E.jsx(qE,{id:"password",name:"password",type:"password",value:y.password,onChange:C,className:w.password?"border-red-500":"",disabled:r,autoComplete:"current-password"}),R("password")]}),v&&E.jsx("div",{className:"space-y-4",children:typeof v=="function"?v({formData:y,handleChange:C,formErrors:w,getFieldError:R,isLoading:r}):K.cloneElement(v,{formData:y,handleChange:C,formErrors:w,getFieldError:R,isLoading:r})}),i&&E.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:E.jsxs("div",{className:"flex",children:[E.jsx("div",{className:"flex-shrink-0",children:E.jsx("span",{className:"text-red-400",children:"●"})}),E.jsx("div",{className:"ml-3",children:E.jsx("p",{className:"text-sm text-red-800",children:i})})]})}),E.jsx(VE,{type:"submit",className:"w-full cursor-pointer",disabled:r,children:r?l.signingIn:l.signIn})]}),c&&E.jsx("a",{href:h,className:"text-sm text-center hover:underline block",children:l.forgotPassword}),d&&E.jsxs("div",{className:"text-center space-y-4",children:[E.jsxs("div",{className:"relative",children:[E.jsx("div",{className:"absolute inset-0 flex items-center",children:E.jsx("div",{className:"w-full border-t border-gray-300"})}),E.jsx("div",{className:"relative flex justify-center text-sm",children:E.jsx("span",{className:"px-2 bg-background text-muted-foreground",children:l.noAccount})})]}),E.jsx("a",{href:p,children:E.jsx(VE,{variant:"outline",className:"w-full",children:l.signUp})})]}),g&&typeof import.meta<"u"&&!1]})})]})})}function B8(){const[n,e]=k.useState(!1),{signIn:t,error:r}=Wo(),{setSelectedWorkCenter:i}=Jt(),s=xi(),{handleAsync:o}=zo("LoginPage"),l=h=>{const p={};return h.workCenter||(p.workCenter="Centro di lavoro richiesto"),p},c=async h=>{e(!0),await o(async()=>{(await t(h.email,h.password)).error||(i(h.workCenter),s("/",{replace:!0}))},{context:"Login",fallbackMessage:"Accesso fallito. Riprova.",onFinally:()=>e(!1)})},d=({formData:h,handleChange:p,formErrors:g,getFieldError:v,isLoading:y})=>E.jsxs("div",{className:"space-y-2",children:[E.jsx("label",{htmlFor:"workCenter",className:"block text-sm font-medium",children:"Centro di Lavoro *"}),E.jsxs("select",{name:"workCenter",value:h.workCenter||"",onChange:p,className:`flex h-9 w-full rounded-md border bg-transparent px-3 py-1 text-sm shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring ${g.workCenter?"border-red-500":"border-input"}`,disabled:y,children:[E.jsx("option",{value:"",children:"Seleziona un centro di lavoro"}),E.jsx("option",{value:it.ZANICA,children:it.ZANICA}),E.jsx("option",{value:it.BUSTO_GAROLFO,children:it.BUSTO_GAROLFO}),E.jsx("option",{value:it.BOTH,children:it.BOTH})]}),v("workCenter")]});return E.jsx(U8,{title:"Scheduler",logo:"/scheduler-logo.png",subtitle:"Sistema di gestione della produzione",isLoading:n,error:r,onSubmit:c,onValidate:l,additionalFields:d,labels:{signIn:"Accedi",email:"Indirizzo Email",password:"Password",forgotPassword:"Password dimenticata?",signUp:"Crea Account",noAccount:"Non hai un account?",signingIn:"Accesso in corso..."},demoCredentials:{email:"demo@example.com",password:"demo123",workCenter:it.ZANICA}})}function H8(){const[n,e]=k.useState({email:"",password:"",confirmPassword:"",firstName:"",lastName:""}),[t,r]=k.useState(!1),[i,s]=k.useState({}),{signUp:o,error:l}=Wo(),c=xi(),{handleAsync:d}=zo("SignupPage"),h=y=>{const{name:_,value:w}=y.target;e(x=>({...x,[_]:w})),i[_]&&s(x=>({...x,[_]:""}))},p=()=>{const y={};return n.email.trim()?/\S+@\S+\.\S+/.test(n.email)||(y.email="Inserisci un indirizzo email valido"):y.email="Email richiesta",n.password?n.password.length<6&&(y.password="La password deve essere di almeno 6 caratteri"):y.password="Password richiesta",n.confirmPassword?n.password!==n.confirmPassword&&(y.confirmPassword="Le password non coincidono"):y.confirmPassword="Conferma la tua password",n.firstName.trim()||(y.firstName="Nome richiesto"),n.lastName.trim()||(y.lastName="Cognome richiesto"),s(y),Object.keys(y).length===0},g=async y=>{y.preventDefault(),p()&&(r(!0),await d(async()=>{const _={first_name:n.firstName,last_name:n.lastName,full_name:`${n.firstName} ${n.lastName}`};(await o(n.email,n.password,_)).error||c("/",{replace:!0})},{context:"Signup",fallbackMessage:"Creazione account fallita. Riprova.",onFinally:()=>r(!1)}))},v=y=>i[y]?E.jsx("span",{className:"error-message",style:{color:"red",fontSize:"12px",marginTop:"4px"},children:i[y]}):null;return E.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-6 px-2 sm:px-6 lg:px-8",children:E.jsxs("div",{className:"max-w-md w-full space-y-4",children:[E.jsxs("div",{className:"text-center",children:[E.jsx("h1",{className:"text-[10px] font-bold text-gray-900",children:"Crea Account"}),E.jsx("p",{className:"mt-2 text-[10px] text-gray-600",children:"Registrati per iniziare con il tuo account"})]}),E.jsxs("form",{onSubmit:g,className:"mt-4 space-y-4",children:[E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[E.jsxs("div",{className:"space-y-2",children:[E.jsx(bi,{htmlFor:"firstName",children:"Nome"}),E.jsx(yi,{type:"text",id:"firstName",name:"firstName",value:n.firstName,onChange:h,placeholder:"Inserisci il tuo nome",className:i.firstName?"border-red-500":"",disabled:t,autoComplete:"given-name"}),v("firstName")]}),E.jsxs("div",{className:"space-y-2",children:[E.jsx(bi,{htmlFor:"lastName",children:"Cognome"}),E.jsx(yi,{type:"text",id:"lastName",name:"lastName",value:n.lastName,onChange:h,placeholder:"Inserisci il tuo cognome",className:i.lastName?"border-red-500":"",disabled:t,autoComplete:"family-name"}),v("lastName")]})]}),E.jsxs("div",{className:"space-y-2",children:[E.jsx(bi,{htmlFor:"email",children:"Indirizzo Email"}),E.jsx(yi,{type:"email",id:"email",name:"email",value:n.email,onChange:h,placeholder:"Inserisci la tua email",className:i.email?"border-red-500":"",disabled:t,autoComplete:"email"}),v("email")]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[E.jsxs("div",{className:"space-y-2",children:[E.jsx(bi,{htmlFor:"password",children:"Password"}),E.jsx(yi,{type:"password",id:"password",name:"password",value:n.password,onChange:h,placeholder:"Crea una password",className:i.password?"border-red-500":"",disabled:t,autoComplete:"new-password"}),v("password")]}),E.jsxs("div",{className:"space-y-2",children:[E.jsx(bi,{htmlFor:"confirmPassword",children:"Conferma Password"}),E.jsx(yi,{type:"password",id:"confirmPassword",name:"confirmPassword",value:n.confirmPassword,onChange:h,placeholder:"Conferma la tua password",className:i.confirmPassword?"border-red-500":"",disabled:t,autoComplete:"new-password"}),v("confirmPassword")]})]}),l&&E.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-1",children:E.jsxs("div",{className:"flex",children:[E.jsx("div",{className:"flex-shrink-0",children:E.jsx("span",{className:"text-red-400",children:"●"})}),E.jsx("div",{className:"ml-3",children:E.jsx("p",{className:"text-[10px] text-red-800",children:l})})]})}),E.jsx(Ki,{type:"submit",size:"sm",className:"w-full",disabled:t,children:t?"Creazione Account...":"Crea Account"})]}),E.jsxs("div",{className:"text-center space-y-4",children:[E.jsxs("div",{className:"relative",children:[E.jsx("div",{className:"absolute inset-0 flex items-center",children:E.jsx("div",{className:"w-full border-t border-gray-300"})}),E.jsx("div",{className:"relative flex justify-center text-[10px]",children:E.jsx("span",{className:"px-1 bg-gray-50 text-gray-500",children:"Hai già un account?"})})]}),E.jsx(ar,{to:"/login",children:E.jsx(Ki,{variant:"outline",size:"sm",className:"w-full",children:"Accedi"})})]})]})})}function z8(){const[n,e]=k.useState(""),[t,r]=k.useState(!1),[i,s]=k.useState(!1),[o,l]=k.useState(""),{resetPassword:c}=Wo(),{handleAsync:d}=zo("ForgotPasswordPage"),h=async p=>{if(p.preventDefault(),!n.trim()){l("Inserisci il tuo indirizzo email");return}if(!/\S+@\S+\.\S+/.test(n)){l("Inserisci un indirizzo email valido");return}r(!0),l(""),await d(async()=>{const g=await c(n);g.error?l(g.error||"Invio email di reset fallito"):s(!0)},{context:"Password Reset",fallbackMessage:"Invio email di reset fallito. Riprova.",onFinally:()=>r(!1)})};return i?E.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-2 sm:px-6 lg:px-8",children:E.jsxs("div",{className:"max-w-md w-full space-y-4",children:[E.jsxs("div",{className:"text-center",children:[E.jsx("h1",{className:"text-[10px] font-bold text-gray-900",children:"Controlla la Tua Email"}),E.jsxs("p",{className:"mt-2 text-[10px] text-gray-600",children:["Abbiamo inviato un link per il reset della password a ",n]})]}),E.jsx("div",{className:"bg-green-50 border border-green-200 rounded-md p-1",children:E.jsxs("div",{className:"flex",children:[E.jsx("div",{className:"flex-shrink-0",children:E.jsx("span",{className:"text-green-400 text-[10px]",children:"✅"})}),E.jsx("div",{className:"ml-3",children:E.jsx("p",{className:"text-[10px] text-green-800",children:"Se non vedi l'email, controlla la cartella spam."})})]})}),E.jsx("div",{className:"text-center",children:E.jsx(ar,{to:"/login",children:E.jsx(Ki,{size:"sm",className:"w-full",children:"Torna all'Accesso"})})})]})}):E.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-6 px-2 sm:px-6 lg:px-8",children:E.jsxs("div",{className:"max-w-md w-full space-y-4",children:[E.jsxs("div",{className:"text-center",children:[E.jsx("h1",{className:"text-[10px] font-bold text-gray-900",children:"Reset Password"}),E.jsx("p",{className:"mt-2 text-[10px] text-gray-600",children:"Inserisci la tua email per ricevere un link per il reset della password"})]}),E.jsxs("form",{onSubmit:h,className:"mt-4 space-y-4",children:[E.jsxs("div",{className:"space-y-2",children:[E.jsx(bi,{htmlFor:"email",children:"Indirizzo Email"}),E.jsx(yi,{type:"email",id:"email",name:"email",value:n,onChange:p=>e(p.target.value),placeholder:"Inserisci la tua email",disabled:t,autoComplete:"email"})]}),o&&E.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-1",children:E.jsxs("div",{className:"flex",children:[E.jsx("div",{className:"flex-shrink-0",children:E.jsx("span",{className:"text-red-400",children:"●"})}),E.jsx("div",{className:"ml-3",children:E.jsx("p",{className:"text-[10px] text-red-800",children:o})})]})}),E.jsx(Ki,{type:"submit",size:"sm",className:"w-full",disabled:t,children:t?"Invio...":"Invia Link di Reset"})]}),E.jsx("div",{className:"text-center",children:E.jsx(ar,{to:"/login",className:"text-[10px] text-navy-800 hover:text-navy-600",children:"Torna all'Accesso"})})]})})}const $8=`
  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }
`;if(typeof document<"u"){const n=document.createElement("style");n.textContent=$8,document.head.appendChild(n)}const W8=()=>{const{user:n,loading:e}=Wo();return e?E.jsx("div",{className:"auth-loading",style:{padding:"20px",textAlign:"center"},children:E.jsxs("div",{className:"auth-loading__container",children:[E.jsx("div",{className:"auth-loading__spinner",style:{border:"4px solid #f3f3f3",borderTop:"4px solid #3498db",borderRadius:"50%",width:"40px",height:"40px",animation:"spin 2s linear infinite",margin:"0 auto 10px"}}),E.jsx("p",{children:"Checking authentication..."})]})}):n?E.jsx(sC,{}):E.jsx(iC,{to:"/login",replace:!0})},V8=()=>{const n=Jt(),{confirmDialog:e={isOpen:!1,title:"",message:"",onConfirm:null,type:"danger"},conflictDialog:t={isOpen:!1,details:null},hideConfirmDialog:r=()=>{},hideConflictDialog:i=()=>{},showConflictDialog:s=()=>{},schedulingLoading:o={isScheduling:!1,isRescheduling:!1,isShunting:!1,isNavigating:!1,operationType:null,taskId:null},selectedWorkCenter:l="BOTH"}=n||{},{cleanup:c}=wf(),{resolveConflictByShunting:d,scheduleTaskFromSlot:h}=_i(),{user:p,signOut:g}=Wo(),v=ur();return sU(),k.useEffect(()=>()=>{c()},[c]),E.jsxs("div",{className:"flex h-screen bg-background overflow-hidden",children:[E.jsx(jj,{}),E.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[E.jsx(Lj,{}),E.jsx("main",{className:"flex-1 overflow-auto bg-background min-w-0",children:E.jsx("div",{className:"p-4",children:E.jsx(sC,{})})})]}),E.jsx(jM,{position:"top-right",richColors:!0,closeButton:!0,duration:4e3}),e.isOpen&&(confirm(`${e.title}

${e.message}`)&&e.onConfirm?.(),r(),null),t.isOpen&&(()=>{const y=t.details?`Il lavoro "${t.details.draggedTask?.odp_number}" si sovrappone con "${t.details.conflictingTask?.odp_number}". Vuoi spostarlo a sinistra?`:"Conflitto rilevato. Vuoi spostare il task?",_=confirm(`${y}

OK = Sposta a Sinistra
Annulla = Sposta a Destra`);return _!==null?(async()=>{if(t.details){try{const w=t.details.schedulingParams?t.details.schedulingParams.originalConflict:t.details;console.log("🔄 CONFLICT: Using resolveConflictByShunting",_?"left":"right");const x=await d(w,_?"left":"right",v);x.error?zi(x.error):Ho("Task spostato con successo")}catch(w){console.error("❌ SHUNTING ERROR:",w),zi("Errore durante lo spostamento del task")}i()}})():i(),null})()]})};function q8(){return E.jsx(BM,{children:E.jsx(zM,{children:E.jsxs(K1,{children:[E.jsx(un,{path:"/login",element:E.jsx(B8,{})}),E.jsx(un,{path:"/signup",element:E.jsx(H8,{})}),E.jsx(un,{path:"/forgot-password",element:E.jsx(z8,{})}),E.jsx(un,{path:"/",element:E.jsx(W8,{}),children:E.jsxs(un,{element:E.jsx(V8,{}),children:[E.jsx(un,{index:!0,element:E.jsx(F8,{})}),E.jsx(un,{path:"machinery",element:E.jsx(oU,{})}),E.jsx(un,{path:"machinery/add",element:E.jsx(cS,{})}),E.jsx(un,{path:"machinery/:id/edit",element:E.jsx(cS,{})}),E.jsx(un,{path:"machinery/:machineId/calendar",element:E.jsx(p5,{})}),E.jsx(un,{path:"phases",element:E.jsx(g5,{})}),E.jsx(un,{path:"phases/add",element:E.jsx(hx,{})}),E.jsx(un,{path:"phases/:id/edit",element:E.jsx(hx,{})}),E.jsx(un,{path:"backlog",element:E.jsx(v5,{})}),E.jsx(un,{path:"backlog/add",element:E.jsx(fx,{})}),E.jsx(un,{path:"backlog/:id/edit",element:E.jsx(fx,{})}),E.jsx(un,{path:"scheduler",element:E.jsx(n4,{})})]})}),E.jsx(un,{path:"*",element:E.jsx(iC,{to:"/",replace:!0})})]})})})}const G8=new XI({defaultOptions:{queries:{staleTime:300*1e3,gcTime:600*1e3,retry:1,refetchOnWindowFocus:!1},mutations:{retry:1}}}),Y8="/scheduler_demo/";r1.createRoot(document.getElementById("root")).render(E.jsx(K.StrictMode,{children:E.jsx(ZI,{client:G8,children:E.jsx(yI,{basename:Y8,children:E.jsx(_j,{children:E.jsx(q8,{})})})})}));export{IL as A,Ki as B,Nv as D,K as R,Q8 as S,xi as a,Gm as b,X8 as c,aY as d,oY as e,Z8 as f,zo as g,iS as h,Yc as i,E as j,xn as k,rn as l,ur as m,L2 as n,iY as o,_i as p,jo as q,k as r,Tt as s,An as t,is as u,Jt as v};

(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Ud(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var sp={exports:{}},tl={},ap={exports:{}},Ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bb;function Ik(){if(Bb)return Ve;Bb=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function m(F){return F===null||typeof F!="object"?null:(F=p&&F[p]||F["@@iterator"],typeof F=="function"?F:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,_={};function w(F,G,ne){this.props=F,this.context=G,this.refs=_,this.updater=ne||v}w.prototype.isReactComponent={},w.prototype.setState=function(F,G){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,G,"setState")},w.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function x(){}x.prototype=w.prototype;function C(F,G,ne){this.props=F,this.context=G,this.refs=_,this.updater=ne||v}var k=C.prototype=new x;k.constructor=C,b(k,w.prototype),k.isPureReactComponent=!0;var R=Array.isArray,A=Object.prototype.hasOwnProperty,M={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function O(F,G,ne){var le,ue={},ce=null,Ee=null;if(G!=null)for(le in G.ref!==void 0&&(Ee=G.ref),G.key!==void 0&&(ce=""+G.key),G)A.call(G,le)&&!P.hasOwnProperty(le)&&(ue[le]=G[le]);var se=arguments.length-2;if(se===1)ue.children=ne;else if(1<se){for(var Me=Array(se),He=0;He<se;He++)Me[He]=arguments[He+2];ue.children=Me}if(F&&F.defaultProps)for(le in se=F.defaultProps,se)ue[le]===void 0&&(ue[le]=se[le]);return{$$typeof:t,type:F,key:ce,ref:Ee,props:ue,_owner:M.current}}function H(F,G){return{$$typeof:t,type:F.type,key:G,ref:F.ref,props:F.props,_owner:F._owner}}function B(F){return typeof F=="object"&&F!==null&&F.$$typeof===t}function $(F){var G={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(ne){return G[ne]})}var ee=/\/+/g;function re(F,G){return typeof F=="object"&&F!==null&&F.key!=null?$(""+F.key):G.toString(36)}function he(F,G,ne,le,ue){var ce=typeof F;(ce==="undefined"||ce==="boolean")&&(F=null);var Ee=!1;if(F===null)Ee=!0;else switch(ce){case"string":case"number":Ee=!0;break;case"object":switch(F.$$typeof){case t:case e:Ee=!0}}if(Ee)return Ee=F,ue=ue(Ee),F=le===""?"."+re(Ee,0):le,R(ue)?(ne="",F!=null&&(ne=F.replace(ee,"$&/")+"/"),he(ue,G,ne,"",function(He){return He})):ue!=null&&(B(ue)&&(ue=H(ue,ne+(!ue.key||Ee&&Ee.key===ue.key?"":(""+ue.key).replace(ee,"$&/")+"/")+F)),G.push(ue)),1;if(Ee=0,le=le===""?".":le+":",R(F))for(var se=0;se<F.length;se++){ce=F[se];var Me=le+re(ce,se);Ee+=he(ce,G,ne,Me,ue)}else if(Me=m(F),typeof Me=="function")for(F=Me.call(F),se=0;!(ce=F.next()).done;)ce=ce.value,Me=le+re(ce,se++),Ee+=he(ce,G,ne,Me,ue);else if(ce==="object")throw G=String(F),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return Ee}function pe(F,G,ne){if(F==null)return F;var le=[],ue=0;return he(F,le,"","",function(ce){return G.call(ne,ce,ue++)}),le}function ie(F){if(F._status===-1){var G=F._result;G=G(),G.then(function(ne){(F._status===0||F._status===-1)&&(F._status=1,F._result=ne)},function(ne){(F._status===0||F._status===-1)&&(F._status=2,F._result=ne)}),F._status===-1&&(F._status=0,F._result=G)}if(F._status===1)return F._result.default;throw F._result}var oe={current:null},K={transition:null},q={ReactCurrentDispatcher:oe,ReactCurrentBatchConfig:K,ReactCurrentOwner:M};function Y(){throw Error("act(...) is not supported in production builds of React.")}return Ve.Children={map:pe,forEach:function(F,G,ne){pe(F,function(){G.apply(this,arguments)},ne)},count:function(F){var G=0;return pe(F,function(){G++}),G},toArray:function(F){return pe(F,function(G){return G})||[]},only:function(F){if(!B(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},Ve.Component=w,Ve.Fragment=n,Ve.Profiler=i,Ve.PureComponent=C,Ve.StrictMode=r,Ve.Suspense=u,Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q,Ve.act=Y,Ve.cloneElement=function(F,G,ne){if(F==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var le=b({},F.props),ue=F.key,ce=F.ref,Ee=F._owner;if(G!=null){if(G.ref!==void 0&&(ce=G.ref,Ee=M.current),G.key!==void 0&&(ue=""+G.key),F.type&&F.type.defaultProps)var se=F.type.defaultProps;for(Me in G)A.call(G,Me)&&!P.hasOwnProperty(Me)&&(le[Me]=G[Me]===void 0&&se!==void 0?se[Me]:G[Me])}var Me=arguments.length-2;if(Me===1)le.children=ne;else if(1<Me){se=Array(Me);for(var He=0;He<Me;He++)se[He]=arguments[He+2];le.children=se}return{$$typeof:t,type:F.type,key:ue,ref:ce,props:le,_owner:Ee}},Ve.createContext=function(F){return F={$$typeof:a,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},F.Provider={$$typeof:s,_context:F},F.Consumer=F},Ve.createElement=O,Ve.createFactory=function(F){var G=O.bind(null,F);return G.type=F,G},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(F){return{$$typeof:c,render:F}},Ve.isValidElement=B,Ve.lazy=function(F){return{$$typeof:f,_payload:{_status:-1,_result:F},_init:ie}},Ve.memo=function(F,G){return{$$typeof:d,type:F,compare:G===void 0?null:G}},Ve.startTransition=function(F){var G=K.transition;K.transition={};try{F()}finally{K.transition=G}},Ve.unstable_act=Y,Ve.useCallback=function(F,G){return oe.current.useCallback(F,G)},Ve.useContext=function(F){return oe.current.useContext(F)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(F){return oe.current.useDeferredValue(F)},Ve.useEffect=function(F,G){return oe.current.useEffect(F,G)},Ve.useId=function(){return oe.current.useId()},Ve.useImperativeHandle=function(F,G,ne){return oe.current.useImperativeHandle(F,G,ne)},Ve.useInsertionEffect=function(F,G){return oe.current.useInsertionEffect(F,G)},Ve.useLayoutEffect=function(F,G){return oe.current.useLayoutEffect(F,G)},Ve.useMemo=function(F,G){return oe.current.useMemo(F,G)},Ve.useReducer=function(F,G,ne){return oe.current.useReducer(F,G,ne)},Ve.useRef=function(F){return oe.current.useRef(F)},Ve.useState=function(F){return oe.current.useState(F)},Ve.useSyncExternalStore=function(F,G,ne){return oe.current.useSyncExternalStore(F,G,ne)},Ve.useTransition=function(){return oe.current.useTransition()},Ve.version="18.3.1",Ve}var Wb;function Bg(){return Wb||(Wb=1,ap.exports=Ik()),ap.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vb;function Pk(){if(Vb)return tl;Vb=1;var t=Bg(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(c,u,d){var f,p={},m=null,v=null;d!==void 0&&(m=""+d),u.key!==void 0&&(m=""+u.key),u.ref!==void 0&&(v=u.ref);for(f in u)r.call(u,f)&&!s.hasOwnProperty(f)&&(p[f]=u[f]);if(c&&c.defaultProps)for(f in u=c.defaultProps,u)p[f]===void 0&&(p[f]=u[f]);return{$$typeof:e,type:c,key:m,ref:v,props:p,_owner:i.current}}return tl.Fragment=n,tl.jsx=a,tl.jsxs=a,tl}var $b;function Lk(){return $b||($b=1,sp.exports=Pk()),sp.exports}var E=Lk(),D=Bg();const Q=Ud(D);var hu={},op={exports:{}},Gn={},lp={exports:{}},cp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qb;function Fk(){return qb||(qb=1,(function(t){function e(K,q){var Y=K.length;K.push(q);e:for(;0<Y;){var F=Y-1>>>1,G=K[F];if(0<i(G,q))K[F]=q,K[Y]=G,Y=F;else break e}}function n(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var q=K[0],Y=K.pop();if(Y!==q){K[0]=Y;e:for(var F=0,G=K.length,ne=G>>>1;F<ne;){var le=2*(F+1)-1,ue=K[le],ce=le+1,Ee=K[ce];if(0>i(ue,Y))ce<G&&0>i(Ee,ue)?(K[F]=Ee,K[ce]=Y,F=ce):(K[F]=ue,K[le]=Y,F=le);else if(ce<G&&0>i(Ee,Y))K[F]=Ee,K[ce]=Y,F=ce;else break e}}return q}function i(K,q){var Y=K.sortIndex-q.sortIndex;return Y!==0?Y:K.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var u=[],d=[],f=1,p=null,m=3,v=!1,b=!1,_=!1,w=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(K){for(var q=n(d);q!==null;){if(q.callback===null)r(d);else if(q.startTime<=K)r(d),q.sortIndex=q.expirationTime,e(u,q);else break;q=n(d)}}function R(K){if(_=!1,k(K),!b)if(n(u)!==null)b=!0,ie(A);else{var q=n(d);q!==null&&oe(R,q.startTime-K)}}function A(K,q){b=!1,_&&(_=!1,x(O),O=-1),v=!0;var Y=m;try{for(k(q),p=n(u);p!==null&&(!(p.expirationTime>q)||K&&!$());){var F=p.callback;if(typeof F=="function"){p.callback=null,m=p.priorityLevel;var G=F(p.expirationTime<=q);q=t.unstable_now(),typeof G=="function"?p.callback=G:p===n(u)&&r(u),k(q)}else r(u);p=n(u)}if(p!==null)var ne=!0;else{var le=n(d);le!==null&&oe(R,le.startTime-q),ne=!1}return ne}finally{p=null,m=Y,v=!1}}var M=!1,P=null,O=-1,H=5,B=-1;function $(){return!(t.unstable_now()-B<H)}function ee(){if(P!==null){var K=t.unstable_now();B=K;var q=!0;try{q=P(!0,K)}finally{q?re():(M=!1,P=null)}}else M=!1}var re;if(typeof C=="function")re=function(){C(ee)};else if(typeof MessageChannel<"u"){var he=new MessageChannel,pe=he.port2;he.port1.onmessage=ee,re=function(){pe.postMessage(null)}}else re=function(){w(ee,0)};function ie(K){P=K,M||(M=!0,re())}function oe(K,q){O=w(function(){K(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(K){K.callback=null},t.unstable_continueExecution=function(){b||v||(b=!0,ie(A))},t.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<K?Math.floor(1e3/K):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(K){switch(m){case 1:case 2:case 3:var q=3;break;default:q=m}var Y=m;m=q;try{return K()}finally{m=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(K,q){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var Y=m;m=K;try{return q()}finally{m=Y}},t.unstable_scheduleCallback=function(K,q,Y){var F=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?F+Y:F):Y=F,K){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=Y+G,K={id:f++,callback:q,priorityLevel:K,startTime:Y,expirationTime:G,sortIndex:-1},Y>F?(K.sortIndex=Y,e(d,K),n(u)===null&&K===n(d)&&(_?(x(O),O=-1):_=!0,oe(R,Y-F))):(K.sortIndex=G,e(u,K),b||v||(b=!0,ie(A))),K},t.unstable_shouldYield=$,t.unstable_wrapCallback=function(K){var q=m;return function(){var Y=m;m=q;try{return K.apply(this,arguments)}finally{m=Y}}}})(cp)),cp}var Gb;function jk(){return Gb||(Gb=1,lp.exports=Fk()),lp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yb;function Hk(){if(Yb)return Gn;Yb=1;var t=Bg(),e=jk();function n(o){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+o,h=1;h<arguments.length;h++)l+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(o,l){a(o,l),a(o+"Capture",l)}function a(o,l){for(i[o]=l,o=0;o<l.length;o++)r.add(l[o])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(o){return u.call(p,o)?!0:u.call(f,o)?!1:d.test(o)?p[o]=!0:(f[o]=!0,!1)}function v(o,l,h,g){if(h!==null&&h.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return g?!1:h!==null?!h.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function b(o,l,h,g){if(l===null||typeof l>"u"||v(o,l,h,g))return!0;if(g)return!1;if(h!==null)switch(h.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function _(o,l,h,g,y,S,T){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=g,this.attributeNamespace=y,this.mustUseProperty=h,this.propertyName=o,this.type=l,this.sanitizeURL=S,this.removeEmptyString=T}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){w[o]=new _(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var l=o[0];w[l]=new _(l,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){w[o]=new _(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){w[o]=new _(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){w[o]=new _(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){w[o]=new _(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){w[o]=new _(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){w[o]=new _(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){w[o]=new _(o,5,!1,o.toLowerCase(),null,!1,!1)});var x=/[\-:]([a-z])/g;function C(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var l=o.replace(x,C);w[l]=new _(l,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var l=o.replace(x,C);w[l]=new _(l,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var l=o.replace(x,C);w[l]=new _(l,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){w[o]=new _(o,1,!1,o.toLowerCase(),null,!1,!1)}),w.xlinkHref=new _("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){w[o]=new _(o,1,!1,o.toLowerCase(),null,!0,!0)});function k(o,l,h,g){var y=w.hasOwnProperty(l)?w[l]:null;(y!==null?y.type!==0:g||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(b(l,h,y,g)&&(h=null),g||y===null?m(l)&&(h===null?o.removeAttribute(l):o.setAttribute(l,""+h)):y.mustUseProperty?o[y.propertyName]=h===null?y.type===3?!1:"":h:(l=y.attributeName,g=y.attributeNamespace,h===null?o.removeAttribute(l):(y=y.type,h=y===3||y===4&&h===!0?"":""+h,g?o.setAttributeNS(g,l,h):o.setAttribute(l,h))))}var R=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,A=Symbol.for("react.element"),M=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),$=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),re=Symbol.for("react.suspense"),he=Symbol.for("react.suspense_list"),pe=Symbol.for("react.memo"),ie=Symbol.for("react.lazy"),oe=Symbol.for("react.offscreen"),K=Symbol.iterator;function q(o){return o===null||typeof o!="object"?null:(o=K&&o[K]||o["@@iterator"],typeof o=="function"?o:null)}var Y=Object.assign,F;function G(o){if(F===void 0)try{throw Error()}catch(h){var l=h.stack.trim().match(/\n( *(at )?)/);F=l&&l[1]||""}return`
`+F+o}var ne=!1;function le(o,l){if(!o||ne)return"";ne=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(V){var g=V}Reflect.construct(o,[],l)}else{try{l.call()}catch(V){g=V}o.call(l.prototype)}else{try{throw Error()}catch(V){g=V}o()}}catch(V){if(V&&g&&typeof V.stack=="string"){for(var y=V.stack.split(`
`),S=g.stack.split(`
`),T=y.length-1,N=S.length-1;1<=T&&0<=N&&y[T]!==S[N];)N--;for(;1<=T&&0<=N;T--,N--)if(y[T]!==S[N]){if(T!==1||N!==1)do if(T--,N--,0>N||y[T]!==S[N]){var L=`
`+y[T].replace(" at new "," at ");return o.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",o.displayName)),L}while(1<=T&&0<=N);break}}}finally{ne=!1,Error.prepareStackTrace=h}return(o=o?o.displayName||o.name:"")?G(o):""}function ue(o){switch(o.tag){case 5:return G(o.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return o=le(o.type,!1),o;case 11:return o=le(o.type.render,!1),o;case 1:return o=le(o.type,!0),o;default:return""}}function ce(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case P:return"Fragment";case M:return"Portal";case H:return"Profiler";case O:return"StrictMode";case re:return"Suspense";case he:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case $:return(o.displayName||"Context")+".Consumer";case B:return(o._context.displayName||"Context")+".Provider";case ee:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case pe:return l=o.displayName||null,l!==null?l:ce(o.type)||"Memo";case ie:l=o._payload,o=o._init;try{return ce(o(l))}catch{}}return null}function Ee(o){var l=o.type;switch(o.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=l.render,o=o.displayName||o.name||"",l.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ce(l);case 8:return l===O?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function se(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Me(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function He(o){var l=Me(o)?"checked":"value",h=Object.getOwnPropertyDescriptor(o.constructor.prototype,l),g=""+o[l];if(!o.hasOwnProperty(l)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var y=h.get,S=h.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return y.call(this)},set:function(T){g=""+T,S.call(this,T)}}),Object.defineProperty(o,l,{enumerable:h.enumerable}),{getValue:function(){return g},setValue:function(T){g=""+T},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function jt(o){o._valueTracker||(o._valueTracker=He(o))}function Bt(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var h=l.getValue(),g="";return o&&(g=Me(o)?o.checked?"true":"false":o.value),o=g,o!==h?(l.setValue(o),!0):!1}function jn(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function ge(o,l){var h=l.checked;return Y({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??o._wrapperState.initialChecked})}function Pe(o,l){var h=l.defaultValue==null?"":l.defaultValue,g=l.checked!=null?l.checked:l.defaultChecked;h=se(l.value!=null?l.value:h),o._wrapperState={initialChecked:g,initialValue:h,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function Ke(o,l){l=l.checked,l!=null&&k(o,"checked",l,!1)}function _t(o,l){Ke(o,l);var h=se(l.value),g=l.type;if(h!=null)g==="number"?(h===0&&o.value===""||o.value!=h)&&(o.value=""+h):o.value!==""+h&&(o.value=""+h);else if(g==="submit"||g==="reset"){o.removeAttribute("value");return}l.hasOwnProperty("value")?We(o,l.type,h):l.hasOwnProperty("defaultValue")&&We(o,l.type,se(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(o.defaultChecked=!!l.defaultChecked)}function Zt(o,l,h){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var g=l.type;if(!(g!=="submit"&&g!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+o._wrapperState.initialValue,h||l===o.value||(o.value=l),o.defaultValue=l}h=o.name,h!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,h!==""&&(o.name=h)}function We(o,l,h){(l!=="number"||jn(o.ownerDocument)!==o)&&(h==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+h&&(o.defaultValue=""+h))}var xe=Array.isArray;function ot(o,l,h,g){if(o=o.options,l){l={};for(var y=0;y<h.length;y++)l["$"+h[y]]=!0;for(h=0;h<o.length;h++)y=l.hasOwnProperty("$"+o[h].value),o[h].selected!==y&&(o[h].selected=y),y&&g&&(o[h].defaultSelected=!0)}else{for(h=""+se(h),l=null,y=0;y<o.length;y++){if(o[y].value===h){o[y].selected=!0,g&&(o[y].defaultSelected=!0);return}l!==null||o[y].disabled||(l=o[y])}l!==null&&(l.selected=!0)}}function Le(o,l){if(l.dangerouslySetInnerHTML!=null)throw Error(n(91));return Y({},l,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function Z(o,l){var h=l.value;if(h==null){if(h=l.children,l=l.defaultValue,h!=null){if(l!=null)throw Error(n(92));if(xe(h)){if(1<h.length)throw Error(n(93));h=h[0]}l=h}l==null&&(l=""),h=l}o._wrapperState={initialValue:se(h)}}function ye(o,l){var h=se(l.value),g=se(l.defaultValue);h!=null&&(h=""+h,h!==o.value&&(o.value=h),l.defaultValue==null&&o.defaultValue!==h&&(o.defaultValue=h)),g!=null&&(o.defaultValue=""+g)}function Fe(o){var l=o.textContent;l===o._wrapperState.initialValue&&l!==""&&l!==null&&(o.value=l)}function Ne(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function be(o,l){return o==null||o==="http://www.w3.org/1999/xhtml"?Ne(l):o==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var Se,Re=(function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,h,g,y){MSApp.execUnsafeLocalFunction(function(){return o(l,h,g,y)})}:o})(function(o,l){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=l;else{for(Se=Se||document.createElement("div"),Se.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=Se.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;l.firstChild;)o.appendChild(l.firstChild)}});function ze(o,l){if(l){var h=o.firstChild;if(h&&h===o.lastChild&&h.nodeType===3){h.nodeValue=l;return}}o.textContent=l}var Ue={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tt=["Webkit","ms","Moz","O"];Object.keys(Ue).forEach(function(o){tt.forEach(function(l){l=l+o.charAt(0).toUpperCase()+o.substring(1),Ue[l]=Ue[o]})});function ut(o,l,h){return l==null||typeof l=="boolean"||l===""?"":h||typeof l!="number"||l===0||Ue.hasOwnProperty(o)&&Ue[o]?(""+l).trim():l+"px"}function ur(o,l){o=o.style;for(var h in l)if(l.hasOwnProperty(h)){var g=h.indexOf("--")===0,y=ut(h,l[h],g);h==="float"&&(h="cssFloat"),g?o.setProperty(h,y):o[h]=y}}var gt=Y({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nt(o,l){if(l){if(gt[o]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(n(137,o));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(n(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(n(61))}if(l.style!=null&&typeof l.style!="object")throw Error(n(62))}}function Wt(o,l){if(o.indexOf("-")===-1)return typeof l.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Be=null;function qe(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Hn=null,gn=null,Ze=null;function Vt(o){if(o=zo(o)){if(typeof Hn!="function")throw Error(n(280));var l=o.stateNode;l&&(l=kc(l),Hn(o.stateNode,o.type,l))}}function de(o){gn?Ze?Ze.push(o):Ze=[o]:gn=o}function Ie(){if(gn){var o=gn,l=Ze;if(Ze=gn=null,Vt(o),l)for(o=0;o<l.length;o++)Vt(l[o])}}function Ge(o,l){return o(l)}function Xe(){}var Ht=!1;function lt(o,l,h){if(Ht)return o(l,h);Ht=!0;try{return Ge(o,l,h)}finally{Ht=!1,(gn!==null||Ze!==null)&&(Xe(),Ie())}}function Oe(o,l){var h=o.stateNode;if(h===null)return null;var g=kc(h);if(g===null)return null;h=g[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(o=o.type,g=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!g;break e;default:o=!1}if(o)return null;if(h&&typeof h!="function")throw Error(n(231,l,typeof h));return h}var $t=!1;if(c)try{var mt={};Object.defineProperty(mt,"passive",{get:function(){$t=!0}}),window.addEventListener("test",mt,mt),window.removeEventListener("test",mt,mt)}catch{$t=!1}function Ot(o,l,h,g,y,S,T,N,L){var V=Array.prototype.slice.call(arguments,3);try{l.apply(h,V)}catch(J){this.onError(J)}}var zn=!1,ln=null,Un=!1,ci=null,So={onError:function(o){zn=!0,ln=o}};function BT(o,l,h,g,y,S,T,N,L){zn=!1,ln=null,Ot.apply(So,arguments)}function WT(o,l,h,g,y,S,T,N,L){if(BT.apply(this,arguments),zn){if(zn){var V=ln;zn=!1,ln=null}else throw Error(n(198));Un||(Un=!0,ci=V)}}function ks(o){var l=o,h=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,(l.flags&4098)!==0&&(h=l.return),o=l.return;while(o)}return l.tag===3?h:null}function dv(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function fv(o){if(ks(o)!==o)throw Error(n(188))}function VT(o){var l=o.alternate;if(!l){if(l=ks(o),l===null)throw Error(n(188));return l!==o?null:o}for(var h=o,g=l;;){var y=h.return;if(y===null)break;var S=y.alternate;if(S===null){if(g=y.return,g!==null){h=g;continue}break}if(y.child===S.child){for(S=y.child;S;){if(S===h)return fv(y),o;if(S===g)return fv(y),l;S=S.sibling}throw Error(n(188))}if(h.return!==g.return)h=y,g=S;else{for(var T=!1,N=y.child;N;){if(N===h){T=!0,h=y,g=S;break}if(N===g){T=!0,g=y,h=S;break}N=N.sibling}if(!T){for(N=S.child;N;){if(N===h){T=!0,h=S,g=y;break}if(N===g){T=!0,g=S,h=y;break}N=N.sibling}if(!T)throw Error(n(189))}}if(h.alternate!==g)throw Error(n(190))}if(h.tag!==3)throw Error(n(188));return h.stateNode.current===h?o:l}function hv(o){return o=VT(o),o!==null?pv(o):null}function pv(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var l=pv(o);if(l!==null)return l;o=o.sibling}return null}var gv=e.unstable_scheduleCallback,mv=e.unstable_cancelCallback,$T=e.unstable_shouldYield,qT=e.unstable_requestPaint,qt=e.unstable_now,GT=e.unstable_getCurrentPriorityLevel,Cf=e.unstable_ImmediatePriority,vv=e.unstable_UserBlockingPriority,lc=e.unstable_NormalPriority,YT=e.unstable_LowPriority,yv=e.unstable_IdlePriority,cc=null,Wr=null;function QT(o){if(Wr&&typeof Wr.onCommitFiberRoot=="function")try{Wr.onCommitFiberRoot(cc,o,void 0,(o.current.flags&128)===128)}catch{}}var Ar=Math.clz32?Math.clz32:XT,KT=Math.log,ZT=Math.LN2;function XT(o){return o>>>=0,o===0?32:31-(KT(o)/ZT|0)|0}var uc=64,dc=4194304;function wo(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function fc(o,l){var h=o.pendingLanes;if(h===0)return 0;var g=0,y=o.suspendedLanes,S=o.pingedLanes,T=h&268435455;if(T!==0){var N=T&~y;N!==0?g=wo(N):(S&=T,S!==0&&(g=wo(S)))}else T=h&~y,T!==0?g=wo(T):S!==0&&(g=wo(S));if(g===0)return 0;if(l!==0&&l!==g&&(l&y)===0&&(y=g&-g,S=l&-l,y>=S||y===16&&(S&4194240)!==0))return l;if((g&4)!==0&&(g|=h&16),l=o.entangledLanes,l!==0)for(o=o.entanglements,l&=g;0<l;)h=31-Ar(l),y=1<<h,g|=o[h],l&=~y;return g}function JT(o,l){switch(o){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function eD(o,l){for(var h=o.suspendedLanes,g=o.pingedLanes,y=o.expirationTimes,S=o.pendingLanes;0<S;){var T=31-Ar(S),N=1<<T,L=y[T];L===-1?((N&h)===0||(N&g)!==0)&&(y[T]=JT(N,l)):L<=l&&(o.expiredLanes|=N),S&=~N}}function Tf(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function bv(){var o=uc;return uc<<=1,(uc&4194240)===0&&(uc=64),o}function Df(o){for(var l=[],h=0;31>h;h++)l.push(o);return l}function xo(o,l,h){o.pendingLanes|=l,l!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,l=31-Ar(l),o[l]=h}function tD(o,l){var h=o.pendingLanes&~l;o.pendingLanes=l,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=l,o.mutableReadLanes&=l,o.entangledLanes&=l,l=o.entanglements;var g=o.eventTimes;for(o=o.expirationTimes;0<h;){var y=31-Ar(h),S=1<<y;l[y]=0,g[y]=-1,o[y]=-1,h&=~S}}function kf(o,l){var h=o.entangledLanes|=l;for(o=o.entanglements;h;){var g=31-Ar(h),y=1<<g;y&l|o[g]&l&&(o[g]|=l),h&=~y}}var dt=0;function _v(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var Sv,Af,wv,xv,Ev,Rf=!1,hc=[],Ui=null,Bi=null,Wi=null,Eo=new Map,Co=new Map,Vi=[],nD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Cv(o,l){switch(o){case"focusin":case"focusout":Ui=null;break;case"dragenter":case"dragleave":Bi=null;break;case"mouseover":case"mouseout":Wi=null;break;case"pointerover":case"pointerout":Eo.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Co.delete(l.pointerId)}}function To(o,l,h,g,y,S){return o===null||o.nativeEvent!==S?(o={blockedOn:l,domEventName:h,eventSystemFlags:g,nativeEvent:S,targetContainers:[y]},l!==null&&(l=zo(l),l!==null&&Af(l)),o):(o.eventSystemFlags|=g,l=o.targetContainers,y!==null&&l.indexOf(y)===-1&&l.push(y),o)}function rD(o,l,h,g,y){switch(l){case"focusin":return Ui=To(Ui,o,l,h,g,y),!0;case"dragenter":return Bi=To(Bi,o,l,h,g,y),!0;case"mouseover":return Wi=To(Wi,o,l,h,g,y),!0;case"pointerover":var S=y.pointerId;return Eo.set(S,To(Eo.get(S)||null,o,l,h,g,y)),!0;case"gotpointercapture":return S=y.pointerId,Co.set(S,To(Co.get(S)||null,o,l,h,g,y)),!0}return!1}function Tv(o){var l=As(o.target);if(l!==null){var h=ks(l);if(h!==null){if(l=h.tag,l===13){if(l=dv(h),l!==null){o.blockedOn=l,Ev(o.priority,function(){wv(h)});return}}else if(l===3&&h.stateNode.current.memoizedState.isDehydrated){o.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}o.blockedOn=null}function pc(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var h=Mf(o.domEventName,o.eventSystemFlags,l[0],o.nativeEvent);if(h===null){h=o.nativeEvent;var g=new h.constructor(h.type,h);Be=g,h.target.dispatchEvent(g),Be=null}else return l=zo(h),l!==null&&Af(l),o.blockedOn=h,!1;l.shift()}return!0}function Dv(o,l,h){pc(o)&&h.delete(l)}function iD(){Rf=!1,Ui!==null&&pc(Ui)&&(Ui=null),Bi!==null&&pc(Bi)&&(Bi=null),Wi!==null&&pc(Wi)&&(Wi=null),Eo.forEach(Dv),Co.forEach(Dv)}function Do(o,l){o.blockedOn===l&&(o.blockedOn=null,Rf||(Rf=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,iD)))}function ko(o){function l(y){return Do(y,o)}if(0<hc.length){Do(hc[0],o);for(var h=1;h<hc.length;h++){var g=hc[h];g.blockedOn===o&&(g.blockedOn=null)}}for(Ui!==null&&Do(Ui,o),Bi!==null&&Do(Bi,o),Wi!==null&&Do(Wi,o),Eo.forEach(l),Co.forEach(l),h=0;h<Vi.length;h++)g=Vi[h],g.blockedOn===o&&(g.blockedOn=null);for(;0<Vi.length&&(h=Vi[0],h.blockedOn===null);)Tv(h),h.blockedOn===null&&Vi.shift()}var _a=R.ReactCurrentBatchConfig,gc=!0;function sD(o,l,h,g){var y=dt,S=_a.transition;_a.transition=null;try{dt=1,Of(o,l,h,g)}finally{dt=y,_a.transition=S}}function aD(o,l,h,g){var y=dt,S=_a.transition;_a.transition=null;try{dt=4,Of(o,l,h,g)}finally{dt=y,_a.transition=S}}function Of(o,l,h,g){if(gc){var y=Mf(o,l,h,g);if(y===null)Qf(o,l,g,mc,h),Cv(o,g);else if(rD(y,o,l,h,g))g.stopPropagation();else if(Cv(o,g),l&4&&-1<nD.indexOf(o)){for(;y!==null;){var S=zo(y);if(S!==null&&Sv(S),S=Mf(o,l,h,g),S===null&&Qf(o,l,g,mc,h),S===y)break;y=S}y!==null&&g.stopPropagation()}else Qf(o,l,g,null,h)}}var mc=null;function Mf(o,l,h,g){if(mc=null,o=qe(g),o=As(o),o!==null)if(l=ks(o),l===null)o=null;else if(h=l.tag,h===13){if(o=dv(l),o!==null)return o;o=null}else if(h===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null);return mc=o,null}function kv(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(GT()){case Cf:return 1;case vv:return 4;case lc:case YT:return 16;case yv:return 536870912;default:return 16}default:return 16}}var $i=null,Nf=null,vc=null;function Av(){if(vc)return vc;var o,l=Nf,h=l.length,g,y="value"in $i?$i.value:$i.textContent,S=y.length;for(o=0;o<h&&l[o]===y[o];o++);var T=h-o;for(g=1;g<=T&&l[h-g]===y[S-g];g++);return vc=y.slice(o,1<g?1-g:void 0)}function yc(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function bc(){return!0}function Rv(){return!1}function nr(o){function l(h,g,y,S,T){this._reactName=h,this._targetInst=y,this.type=g,this.nativeEvent=S,this.target=T,this.currentTarget=null;for(var N in o)o.hasOwnProperty(N)&&(h=o[N],this[N]=h?h(S):S[N]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?bc:Rv,this.isPropagationStopped=Rv,this}return Y(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=bc)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=bc)},persist:function(){},isPersistent:bc}),l}var Sa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},If=nr(Sa),Ao=Y({},Sa,{view:0,detail:0}),oD=nr(Ao),Pf,Lf,Ro,_c=Y({},Ao,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jf,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Ro&&(Ro&&o.type==="mousemove"?(Pf=o.screenX-Ro.screenX,Lf=o.screenY-Ro.screenY):Lf=Pf=0,Ro=o),Pf)},movementY:function(o){return"movementY"in o?o.movementY:Lf}}),Ov=nr(_c),lD=Y({},_c,{dataTransfer:0}),cD=nr(lD),uD=Y({},Ao,{relatedTarget:0}),Ff=nr(uD),dD=Y({},Sa,{animationName:0,elapsedTime:0,pseudoElement:0}),fD=nr(dD),hD=Y({},Sa,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),pD=nr(hD),gD=Y({},Sa,{data:0}),Mv=nr(gD),mD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bD(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=yD[o])?!!l[o]:!1}function jf(){return bD}var _D=Y({},Ao,{key:function(o){if(o.key){var l=mD[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=yc(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?vD[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jf,charCode:function(o){return o.type==="keypress"?yc(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?yc(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),SD=nr(_D),wD=Y({},_c,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nv=nr(wD),xD=Y({},Ao,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jf}),ED=nr(xD),CD=Y({},Sa,{propertyName:0,elapsedTime:0,pseudoElement:0}),TD=nr(CD),DD=Y({},_c,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),kD=nr(DD),AD=[9,13,27,32],Hf=c&&"CompositionEvent"in window,Oo=null;c&&"documentMode"in document&&(Oo=document.documentMode);var RD=c&&"TextEvent"in window&&!Oo,Iv=c&&(!Hf||Oo&&8<Oo&&11>=Oo),Pv=" ",Lv=!1;function Fv(o,l){switch(o){case"keyup":return AD.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jv(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var wa=!1;function OD(o,l){switch(o){case"compositionend":return jv(l);case"keypress":return l.which!==32?null:(Lv=!0,Pv);case"textInput":return o=l.data,o===Pv&&Lv?null:o;default:return null}}function MD(o,l){if(wa)return o==="compositionend"||!Hf&&Fv(o,l)?(o=Av(),vc=Nf=$i=null,wa=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Iv&&l.locale!=="ko"?null:l.data;default:return null}}var ND={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hv(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!ND[o.type]:l==="textarea"}function zv(o,l,h,g){de(g),l=Cc(l,"onChange"),0<l.length&&(h=new If("onChange","change",null,h,g),o.push({event:h,listeners:l}))}var Mo=null,No=null;function ID(o){iy(o,0)}function Sc(o){var l=Da(o);if(Bt(l))return o}function PD(o,l){if(o==="change")return l}var Uv=!1;if(c){var zf;if(c){var Uf="oninput"in document;if(!Uf){var Bv=document.createElement("div");Bv.setAttribute("oninput","return;"),Uf=typeof Bv.oninput=="function"}zf=Uf}else zf=!1;Uv=zf&&(!document.documentMode||9<document.documentMode)}function Wv(){Mo&&(Mo.detachEvent("onpropertychange",Vv),No=Mo=null)}function Vv(o){if(o.propertyName==="value"&&Sc(No)){var l=[];zv(l,No,o,qe(o)),lt(ID,l)}}function LD(o,l,h){o==="focusin"?(Wv(),Mo=l,No=h,Mo.attachEvent("onpropertychange",Vv)):o==="focusout"&&Wv()}function FD(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Sc(No)}function jD(o,l){if(o==="click")return Sc(l)}function HD(o,l){if(o==="input"||o==="change")return Sc(l)}function zD(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var Rr=typeof Object.is=="function"?Object.is:zD;function Io(o,l){if(Rr(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var h=Object.keys(o),g=Object.keys(l);if(h.length!==g.length)return!1;for(g=0;g<h.length;g++){var y=h[g];if(!u.call(l,y)||!Rr(o[y],l[y]))return!1}return!0}function $v(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function qv(o,l){var h=$v(o);o=0;for(var g;h;){if(h.nodeType===3){if(g=o+h.textContent.length,o<=l&&g>=l)return{node:h,offset:l-o};o=g}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=$v(h)}}function Gv(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?Gv(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function Yv(){for(var o=window,l=jn();l instanceof o.HTMLIFrameElement;){try{var h=typeof l.contentWindow.location.href=="string"}catch{h=!1}if(h)o=l.contentWindow;else break;l=jn(o.document)}return l}function Bf(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}function UD(o){var l=Yv(),h=o.focusedElem,g=o.selectionRange;if(l!==h&&h&&h.ownerDocument&&Gv(h.ownerDocument.documentElement,h)){if(g!==null&&Bf(h)){if(l=g.start,o=g.end,o===void 0&&(o=l),"selectionStart"in h)h.selectionStart=l,h.selectionEnd=Math.min(o,h.value.length);else if(o=(l=h.ownerDocument||document)&&l.defaultView||window,o.getSelection){o=o.getSelection();var y=h.textContent.length,S=Math.min(g.start,y);g=g.end===void 0?S:Math.min(g.end,y),!o.extend&&S>g&&(y=g,g=S,S=y),y=qv(h,S);var T=qv(h,g);y&&T&&(o.rangeCount!==1||o.anchorNode!==y.node||o.anchorOffset!==y.offset||o.focusNode!==T.node||o.focusOffset!==T.offset)&&(l=l.createRange(),l.setStart(y.node,y.offset),o.removeAllRanges(),S>g?(o.addRange(l),o.extend(T.node,T.offset)):(l.setEnd(T.node,T.offset),o.addRange(l)))}}for(l=[],o=h;o=o.parentNode;)o.nodeType===1&&l.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<l.length;h++)o=l[h],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var BD=c&&"documentMode"in document&&11>=document.documentMode,xa=null,Wf=null,Po=null,Vf=!1;function Qv(o,l,h){var g=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Vf||xa==null||xa!==jn(g)||(g=xa,"selectionStart"in g&&Bf(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Po&&Io(Po,g)||(Po=g,g=Cc(Wf,"onSelect"),0<g.length&&(l=new If("onSelect","select",null,l,h),o.push({event:l,listeners:g}),l.target=xa)))}function wc(o,l){var h={};return h[o.toLowerCase()]=l.toLowerCase(),h["Webkit"+o]="webkit"+l,h["Moz"+o]="moz"+l,h}var Ea={animationend:wc("Animation","AnimationEnd"),animationiteration:wc("Animation","AnimationIteration"),animationstart:wc("Animation","AnimationStart"),transitionend:wc("Transition","TransitionEnd")},$f={},Kv={};c&&(Kv=document.createElement("div").style,"AnimationEvent"in window||(delete Ea.animationend.animation,delete Ea.animationiteration.animation,delete Ea.animationstart.animation),"TransitionEvent"in window||delete Ea.transitionend.transition);function xc(o){if($f[o])return $f[o];if(!Ea[o])return o;var l=Ea[o],h;for(h in l)if(l.hasOwnProperty(h)&&h in Kv)return $f[o]=l[h];return o}var Zv=xc("animationend"),Xv=xc("animationiteration"),Jv=xc("animationstart"),ey=xc("transitionend"),ty=new Map,ny="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qi(o,l){ty.set(o,l),s(l,[o])}for(var qf=0;qf<ny.length;qf++){var Gf=ny[qf],WD=Gf.toLowerCase(),VD=Gf[0].toUpperCase()+Gf.slice(1);qi(WD,"on"+VD)}qi(Zv,"onAnimationEnd"),qi(Xv,"onAnimationIteration"),qi(Jv,"onAnimationStart"),qi("dblclick","onDoubleClick"),qi("focusin","onFocus"),qi("focusout","onBlur"),qi(ey,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$D=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lo));function ry(o,l,h){var g=o.type||"unknown-event";o.currentTarget=h,WT(g,l,void 0,o),o.currentTarget=null}function iy(o,l){l=(l&4)!==0;for(var h=0;h<o.length;h++){var g=o[h],y=g.event;g=g.listeners;e:{var S=void 0;if(l)for(var T=g.length-1;0<=T;T--){var N=g[T],L=N.instance,V=N.currentTarget;if(N=N.listener,L!==S&&y.isPropagationStopped())break e;ry(y,N,V),S=L}else for(T=0;T<g.length;T++){if(N=g[T],L=N.instance,V=N.currentTarget,N=N.listener,L!==S&&y.isPropagationStopped())break e;ry(y,N,V),S=L}}}if(Un)throw o=ci,Un=!1,ci=null,o}function xt(o,l){var h=l[th];h===void 0&&(h=l[th]=new Set);var g=o+"__bubble";h.has(g)||(sy(l,o,2,!1),h.add(g))}function Yf(o,l,h){var g=0;l&&(g|=4),sy(h,o,g,l)}var Ec="_reactListening"+Math.random().toString(36).slice(2);function Fo(o){if(!o[Ec]){o[Ec]=!0,r.forEach(function(h){h!=="selectionchange"&&($D.has(h)||Yf(h,!1,o),Yf(h,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[Ec]||(l[Ec]=!0,Yf("selectionchange",!1,l))}}function sy(o,l,h,g){switch(kv(l)){case 1:var y=sD;break;case 4:y=aD;break;default:y=Of}h=y.bind(null,l,h,o),y=void 0,!$t||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(y=!0),g?y!==void 0?o.addEventListener(l,h,{capture:!0,passive:y}):o.addEventListener(l,h,!0):y!==void 0?o.addEventListener(l,h,{passive:y}):o.addEventListener(l,h,!1)}function Qf(o,l,h,g,y){var S=g;if((l&1)===0&&(l&2)===0&&g!==null)e:for(;;){if(g===null)return;var T=g.tag;if(T===3||T===4){var N=g.stateNode.containerInfo;if(N===y||N.nodeType===8&&N.parentNode===y)break;if(T===4)for(T=g.return;T!==null;){var L=T.tag;if((L===3||L===4)&&(L=T.stateNode.containerInfo,L===y||L.nodeType===8&&L.parentNode===y))return;T=T.return}for(;N!==null;){if(T=As(N),T===null)return;if(L=T.tag,L===5||L===6){g=S=T;continue e}N=N.parentNode}}g=g.return}lt(function(){var V=S,J=qe(h),te=[];e:{var X=ty.get(o);if(X!==void 0){var fe=If,ve=o;switch(o){case"keypress":if(yc(h)===0)break e;case"keydown":case"keyup":fe=SD;break;case"focusin":ve="focus",fe=Ff;break;case"focusout":ve="blur",fe=Ff;break;case"beforeblur":case"afterblur":fe=Ff;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=Ov;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=cD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=ED;break;case Zv:case Xv:case Jv:fe=fD;break;case ey:fe=TD;break;case"scroll":fe=oD;break;case"wheel":fe=kD;break;case"copy":case"cut":case"paste":fe=pD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=Nv}var _e=(l&4)!==0,Gt=!_e&&o==="scroll",z=_e?X!==null?X+"Capture":null:X;_e=[];for(var j=V,U;j!==null;){U=j;var ae=U.stateNode;if(U.tag===5&&ae!==null&&(U=ae,z!==null&&(ae=Oe(j,z),ae!=null&&_e.push(jo(j,ae,U)))),Gt)break;j=j.return}0<_e.length&&(X=new fe(X,ve,null,h,J),te.push({event:X,listeners:_e}))}}if((l&7)===0){e:{if(X=o==="mouseover"||o==="pointerover",fe=o==="mouseout"||o==="pointerout",X&&h!==Be&&(ve=h.relatedTarget||h.fromElement)&&(As(ve)||ve[ui]))break e;if((fe||X)&&(X=J.window===J?J:(X=J.ownerDocument)?X.defaultView||X.parentWindow:window,fe?(ve=h.relatedTarget||h.toElement,fe=V,ve=ve?As(ve):null,ve!==null&&(Gt=ks(ve),ve!==Gt||ve.tag!==5&&ve.tag!==6)&&(ve=null)):(fe=null,ve=V),fe!==ve)){if(_e=Ov,ae="onMouseLeave",z="onMouseEnter",j="mouse",(o==="pointerout"||o==="pointerover")&&(_e=Nv,ae="onPointerLeave",z="onPointerEnter",j="pointer"),Gt=fe==null?X:Da(fe),U=ve==null?X:Da(ve),X=new _e(ae,j+"leave",fe,h,J),X.target=Gt,X.relatedTarget=U,ae=null,As(J)===V&&(_e=new _e(z,j+"enter",ve,h,J),_e.target=U,_e.relatedTarget=Gt,ae=_e),Gt=ae,fe&&ve)t:{for(_e=fe,z=ve,j=0,U=_e;U;U=Ca(U))j++;for(U=0,ae=z;ae;ae=Ca(ae))U++;for(;0<j-U;)_e=Ca(_e),j--;for(;0<U-j;)z=Ca(z),U--;for(;j--;){if(_e===z||z!==null&&_e===z.alternate)break t;_e=Ca(_e),z=Ca(z)}_e=null}else _e=null;fe!==null&&ay(te,X,fe,_e,!1),ve!==null&&Gt!==null&&ay(te,Gt,ve,_e,!0)}}e:{if(X=V?Da(V):window,fe=X.nodeName&&X.nodeName.toLowerCase(),fe==="select"||fe==="input"&&X.type==="file")var we=PD;else if(Hv(X))if(Uv)we=HD;else{we=FD;var Te=LD}else(fe=X.nodeName)&&fe.toLowerCase()==="input"&&(X.type==="checkbox"||X.type==="radio")&&(we=jD);if(we&&(we=we(o,V))){zv(te,we,h,J);break e}Te&&Te(o,X,V),o==="focusout"&&(Te=X._wrapperState)&&Te.controlled&&X.type==="number"&&We(X,"number",X.value)}switch(Te=V?Da(V):window,o){case"focusin":(Hv(Te)||Te.contentEditable==="true")&&(xa=Te,Wf=V,Po=null);break;case"focusout":Po=Wf=xa=null;break;case"mousedown":Vf=!0;break;case"contextmenu":case"mouseup":case"dragend":Vf=!1,Qv(te,h,J);break;case"selectionchange":if(BD)break;case"keydown":case"keyup":Qv(te,h,J)}var De;if(Hf)e:{switch(o){case"compositionstart":var Ae="onCompositionStart";break e;case"compositionend":Ae="onCompositionEnd";break e;case"compositionupdate":Ae="onCompositionUpdate";break e}Ae=void 0}else wa?Fv(o,h)&&(Ae="onCompositionEnd"):o==="keydown"&&h.keyCode===229&&(Ae="onCompositionStart");Ae&&(Iv&&h.locale!=="ko"&&(wa||Ae!=="onCompositionStart"?Ae==="onCompositionEnd"&&wa&&(De=Av()):($i=J,Nf="value"in $i?$i.value:$i.textContent,wa=!0)),Te=Cc(V,Ae),0<Te.length&&(Ae=new Mv(Ae,o,null,h,J),te.push({event:Ae,listeners:Te}),De?Ae.data=De:(De=jv(h),De!==null&&(Ae.data=De)))),(De=RD?OD(o,h):MD(o,h))&&(V=Cc(V,"onBeforeInput"),0<V.length&&(J=new Mv("onBeforeInput","beforeinput",null,h,J),te.push({event:J,listeners:V}),J.data=De))}iy(te,l)})}function jo(o,l,h){return{instance:o,listener:l,currentTarget:h}}function Cc(o,l){for(var h=l+"Capture",g=[];o!==null;){var y=o,S=y.stateNode;y.tag===5&&S!==null&&(y=S,S=Oe(o,h),S!=null&&g.unshift(jo(o,S,y)),S=Oe(o,l),S!=null&&g.push(jo(o,S,y))),o=o.return}return g}function Ca(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function ay(o,l,h,g,y){for(var S=l._reactName,T=[];h!==null&&h!==g;){var N=h,L=N.alternate,V=N.stateNode;if(L!==null&&L===g)break;N.tag===5&&V!==null&&(N=V,y?(L=Oe(h,S),L!=null&&T.unshift(jo(h,L,N))):y||(L=Oe(h,S),L!=null&&T.push(jo(h,L,N)))),h=h.return}T.length!==0&&o.push({event:l,listeners:T})}var qD=/\r\n?/g,GD=/\u0000|\uFFFD/g;function oy(o){return(typeof o=="string"?o:""+o).replace(qD,`
`).replace(GD,"")}function Tc(o,l,h){if(l=oy(l),oy(o)!==l&&h)throw Error(n(425))}function Dc(){}var Kf=null,Zf=null;function Xf(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Jf=typeof setTimeout=="function"?setTimeout:void 0,YD=typeof clearTimeout=="function"?clearTimeout:void 0,ly=typeof Promise=="function"?Promise:void 0,QD=typeof queueMicrotask=="function"?queueMicrotask:typeof ly<"u"?function(o){return ly.resolve(null).then(o).catch(KD)}:Jf;function KD(o){setTimeout(function(){throw o})}function eh(o,l){var h=l,g=0;do{var y=h.nextSibling;if(o.removeChild(h),y&&y.nodeType===8)if(h=y.data,h==="/$"){if(g===0){o.removeChild(y),ko(l);return}g--}else h!=="$"&&h!=="$?"&&h!=="$!"||g++;h=y}while(h);ko(l)}function Gi(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return o}function cy(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var h=o.data;if(h==="$"||h==="$!"||h==="$?"){if(l===0)return o;l--}else h==="/$"&&l++}o=o.previousSibling}return null}var Ta=Math.random().toString(36).slice(2),Vr="__reactFiber$"+Ta,Ho="__reactProps$"+Ta,ui="__reactContainer$"+Ta,th="__reactEvents$"+Ta,ZD="__reactListeners$"+Ta,XD="__reactHandles$"+Ta;function As(o){var l=o[Vr];if(l)return l;for(var h=o.parentNode;h;){if(l=h[ui]||h[Vr]){if(h=l.alternate,l.child!==null||h!==null&&h.child!==null)for(o=cy(o);o!==null;){if(h=o[Vr])return h;o=cy(o)}return l}o=h,h=o.parentNode}return null}function zo(o){return o=o[Vr]||o[ui],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function Da(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(n(33))}function kc(o){return o[Ho]||null}var nh=[],ka=-1;function Yi(o){return{current:o}}function Et(o){0>ka||(o.current=nh[ka],nh[ka]=null,ka--)}function St(o,l){ka++,nh[ka]=o.current,o.current=l}var Qi={},Sn=Yi(Qi),Bn=Yi(!1),Rs=Qi;function Aa(o,l){var h=o.type.contextTypes;if(!h)return Qi;var g=o.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===l)return g.__reactInternalMemoizedMaskedChildContext;var y={},S;for(S in h)y[S]=l[S];return g&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=l,o.__reactInternalMemoizedMaskedChildContext=y),y}function Wn(o){return o=o.childContextTypes,o!=null}function Ac(){Et(Bn),Et(Sn)}function uy(o,l,h){if(Sn.current!==Qi)throw Error(n(168));St(Sn,l),St(Bn,h)}function dy(o,l,h){var g=o.stateNode;if(l=l.childContextTypes,typeof g.getChildContext!="function")return h;g=g.getChildContext();for(var y in g)if(!(y in l))throw Error(n(108,Ee(o)||"Unknown",y));return Y({},h,g)}function Rc(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||Qi,Rs=Sn.current,St(Sn,o),St(Bn,Bn.current),!0}function fy(o,l,h){var g=o.stateNode;if(!g)throw Error(n(169));h?(o=dy(o,l,Rs),g.__reactInternalMemoizedMergedChildContext=o,Et(Bn),Et(Sn),St(Sn,o)):Et(Bn),St(Bn,h)}var di=null,Oc=!1,rh=!1;function hy(o){di===null?di=[o]:di.push(o)}function JD(o){Oc=!0,hy(o)}function Ki(){if(!rh&&di!==null){rh=!0;var o=0,l=dt;try{var h=di;for(dt=1;o<h.length;o++){var g=h[o];do g=g(!0);while(g!==null)}di=null,Oc=!1}catch(y){throw di!==null&&(di=di.slice(o+1)),gv(Cf,Ki),y}finally{dt=l,rh=!1}}return null}var Ra=[],Oa=0,Mc=null,Nc=0,dr=[],fr=0,Os=null,fi=1,hi="";function Ms(o,l){Ra[Oa++]=Nc,Ra[Oa++]=Mc,Mc=o,Nc=l}function py(o,l,h){dr[fr++]=fi,dr[fr++]=hi,dr[fr++]=Os,Os=o;var g=fi;o=hi;var y=32-Ar(g)-1;g&=~(1<<y),h+=1;var S=32-Ar(l)+y;if(30<S){var T=y-y%5;S=(g&(1<<T)-1).toString(32),g>>=T,y-=T,fi=1<<32-Ar(l)+y|h<<y|g,hi=S+o}else fi=1<<S|h<<y|g,hi=o}function ih(o){o.return!==null&&(Ms(o,1),py(o,1,0))}function sh(o){for(;o===Mc;)Mc=Ra[--Oa],Ra[Oa]=null,Nc=Ra[--Oa],Ra[Oa]=null;for(;o===Os;)Os=dr[--fr],dr[fr]=null,hi=dr[--fr],dr[fr]=null,fi=dr[--fr],dr[fr]=null}var rr=null,ir=null,kt=!1,Or=null;function gy(o,l){var h=mr(5,null,null,0);h.elementType="DELETED",h.stateNode=l,h.return=o,l=o.deletions,l===null?(o.deletions=[h],o.flags|=16):l.push(h)}function my(o,l){switch(o.tag){case 5:var h=o.type;return l=l.nodeType!==1||h.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(o.stateNode=l,rr=o,ir=Gi(l.firstChild),!0):!1;case 6:return l=o.pendingProps===""||l.nodeType!==3?null:l,l!==null?(o.stateNode=l,rr=o,ir=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(h=Os!==null?{id:fi,overflow:hi}:null,o.memoizedState={dehydrated:l,treeContext:h,retryLane:1073741824},h=mr(18,null,null,0),h.stateNode=l,h.return=o,o.child=h,rr=o,ir=null,!0):!1;default:return!1}}function ah(o){return(o.mode&1)!==0&&(o.flags&128)===0}function oh(o){if(kt){var l=ir;if(l){var h=l;if(!my(o,l)){if(ah(o))throw Error(n(418));l=Gi(h.nextSibling);var g=rr;l&&my(o,l)?gy(g,h):(o.flags=o.flags&-4097|2,kt=!1,rr=o)}}else{if(ah(o))throw Error(n(418));o.flags=o.flags&-4097|2,kt=!1,rr=o}}}function vy(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;rr=o}function Ic(o){if(o!==rr)return!1;if(!kt)return vy(o),kt=!0,!1;var l;if((l=o.tag!==3)&&!(l=o.tag!==5)&&(l=o.type,l=l!=="head"&&l!=="body"&&!Xf(o.type,o.memoizedProps)),l&&(l=ir)){if(ah(o))throw yy(),Error(n(418));for(;l;)gy(o,l),l=Gi(l.nextSibling)}if(vy(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));e:{for(o=o.nextSibling,l=0;o;){if(o.nodeType===8){var h=o.data;if(h==="/$"){if(l===0){ir=Gi(o.nextSibling);break e}l--}else h!=="$"&&h!=="$!"&&h!=="$?"||l++}o=o.nextSibling}ir=null}}else ir=rr?Gi(o.stateNode.nextSibling):null;return!0}function yy(){for(var o=ir;o;)o=Gi(o.nextSibling)}function Ma(){ir=rr=null,kt=!1}function lh(o){Or===null?Or=[o]:Or.push(o)}var ek=R.ReactCurrentBatchConfig;function Uo(o,l,h){if(o=h.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(n(309));var g=h.stateNode}if(!g)throw Error(n(147,o));var y=g,S=""+o;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===S?l.ref:(l=function(T){var N=y.refs;T===null?delete N[S]:N[S]=T},l._stringRef=S,l)}if(typeof o!="string")throw Error(n(284));if(!h._owner)throw Error(n(290,o))}return o}function Pc(o,l){throw o=Object.prototype.toString.call(l),Error(n(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o))}function by(o){var l=o._init;return l(o._payload)}function _y(o){function l(z,j){if(o){var U=z.deletions;U===null?(z.deletions=[j],z.flags|=16):U.push(j)}}function h(z,j){if(!o)return null;for(;j!==null;)l(z,j),j=j.sibling;return null}function g(z,j){for(z=new Map;j!==null;)j.key!==null?z.set(j.key,j):z.set(j.index,j),j=j.sibling;return z}function y(z,j){return z=is(z,j),z.index=0,z.sibling=null,z}function S(z,j,U){return z.index=U,o?(U=z.alternate,U!==null?(U=U.index,U<j?(z.flags|=2,j):U):(z.flags|=2,j)):(z.flags|=1048576,j)}function T(z){return o&&z.alternate===null&&(z.flags|=2),z}function N(z,j,U,ae){return j===null||j.tag!==6?(j=Jh(U,z.mode,ae),j.return=z,j):(j=y(j,U),j.return=z,j)}function L(z,j,U,ae){var we=U.type;return we===P?J(z,j,U.props.children,ae,U.key):j!==null&&(j.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===ie&&by(we)===j.type)?(ae=y(j,U.props),ae.ref=Uo(z,j,U),ae.return=z,ae):(ae=su(U.type,U.key,U.props,null,z.mode,ae),ae.ref=Uo(z,j,U),ae.return=z,ae)}function V(z,j,U,ae){return j===null||j.tag!==4||j.stateNode.containerInfo!==U.containerInfo||j.stateNode.implementation!==U.implementation?(j=ep(U,z.mode,ae),j.return=z,j):(j=y(j,U.children||[]),j.return=z,j)}function J(z,j,U,ae,we){return j===null||j.tag!==7?(j=zs(U,z.mode,ae,we),j.return=z,j):(j=y(j,U),j.return=z,j)}function te(z,j,U){if(typeof j=="string"&&j!==""||typeof j=="number")return j=Jh(""+j,z.mode,U),j.return=z,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case A:return U=su(j.type,j.key,j.props,null,z.mode,U),U.ref=Uo(z,null,j),U.return=z,U;case M:return j=ep(j,z.mode,U),j.return=z,j;case ie:var ae=j._init;return te(z,ae(j._payload),U)}if(xe(j)||q(j))return j=zs(j,z.mode,U,null),j.return=z,j;Pc(z,j)}return null}function X(z,j,U,ae){var we=j!==null?j.key:null;if(typeof U=="string"&&U!==""||typeof U=="number")return we!==null?null:N(z,j,""+U,ae);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case A:return U.key===we?L(z,j,U,ae):null;case M:return U.key===we?V(z,j,U,ae):null;case ie:return we=U._init,X(z,j,we(U._payload),ae)}if(xe(U)||q(U))return we!==null?null:J(z,j,U,ae,null);Pc(z,U)}return null}function fe(z,j,U,ae,we){if(typeof ae=="string"&&ae!==""||typeof ae=="number")return z=z.get(U)||null,N(j,z,""+ae,we);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case A:return z=z.get(ae.key===null?U:ae.key)||null,L(j,z,ae,we);case M:return z=z.get(ae.key===null?U:ae.key)||null,V(j,z,ae,we);case ie:var Te=ae._init;return fe(z,j,U,Te(ae._payload),we)}if(xe(ae)||q(ae))return z=z.get(U)||null,J(j,z,ae,we,null);Pc(j,ae)}return null}function ve(z,j,U,ae){for(var we=null,Te=null,De=j,Ae=j=0,dn=null;De!==null&&Ae<U.length;Ae++){De.index>Ae?(dn=De,De=null):dn=De.sibling;var st=X(z,De,U[Ae],ae);if(st===null){De===null&&(De=dn);break}o&&De&&st.alternate===null&&l(z,De),j=S(st,j,Ae),Te===null?we=st:Te.sibling=st,Te=st,De=dn}if(Ae===U.length)return h(z,De),kt&&Ms(z,Ae),we;if(De===null){for(;Ae<U.length;Ae++)De=te(z,U[Ae],ae),De!==null&&(j=S(De,j,Ae),Te===null?we=De:Te.sibling=De,Te=De);return kt&&Ms(z,Ae),we}for(De=g(z,De);Ae<U.length;Ae++)dn=fe(De,z,Ae,U[Ae],ae),dn!==null&&(o&&dn.alternate!==null&&De.delete(dn.key===null?Ae:dn.key),j=S(dn,j,Ae),Te===null?we=dn:Te.sibling=dn,Te=dn);return o&&De.forEach(function(ss){return l(z,ss)}),kt&&Ms(z,Ae),we}function _e(z,j,U,ae){var we=q(U);if(typeof we!="function")throw Error(n(150));if(U=we.call(U),U==null)throw Error(n(151));for(var Te=we=null,De=j,Ae=j=0,dn=null,st=U.next();De!==null&&!st.done;Ae++,st=U.next()){De.index>Ae?(dn=De,De=null):dn=De.sibling;var ss=X(z,De,st.value,ae);if(ss===null){De===null&&(De=dn);break}o&&De&&ss.alternate===null&&l(z,De),j=S(ss,j,Ae),Te===null?we=ss:Te.sibling=ss,Te=ss,De=dn}if(st.done)return h(z,De),kt&&Ms(z,Ae),we;if(De===null){for(;!st.done;Ae++,st=U.next())st=te(z,st.value,ae),st!==null&&(j=S(st,j,Ae),Te===null?we=st:Te.sibling=st,Te=st);return kt&&Ms(z,Ae),we}for(De=g(z,De);!st.done;Ae++,st=U.next())st=fe(De,z,Ae,st.value,ae),st!==null&&(o&&st.alternate!==null&&De.delete(st.key===null?Ae:st.key),j=S(st,j,Ae),Te===null?we=st:Te.sibling=st,Te=st);return o&&De.forEach(function(Nk){return l(z,Nk)}),kt&&Ms(z,Ae),we}function Gt(z,j,U,ae){if(typeof U=="object"&&U!==null&&U.type===P&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case A:e:{for(var we=U.key,Te=j;Te!==null;){if(Te.key===we){if(we=U.type,we===P){if(Te.tag===7){h(z,Te.sibling),j=y(Te,U.props.children),j.return=z,z=j;break e}}else if(Te.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===ie&&by(we)===Te.type){h(z,Te.sibling),j=y(Te,U.props),j.ref=Uo(z,Te,U),j.return=z,z=j;break e}h(z,Te);break}else l(z,Te);Te=Te.sibling}U.type===P?(j=zs(U.props.children,z.mode,ae,U.key),j.return=z,z=j):(ae=su(U.type,U.key,U.props,null,z.mode,ae),ae.ref=Uo(z,j,U),ae.return=z,z=ae)}return T(z);case M:e:{for(Te=U.key;j!==null;){if(j.key===Te)if(j.tag===4&&j.stateNode.containerInfo===U.containerInfo&&j.stateNode.implementation===U.implementation){h(z,j.sibling),j=y(j,U.children||[]),j.return=z,z=j;break e}else{h(z,j);break}else l(z,j);j=j.sibling}j=ep(U,z.mode,ae),j.return=z,z=j}return T(z);case ie:return Te=U._init,Gt(z,j,Te(U._payload),ae)}if(xe(U))return ve(z,j,U,ae);if(q(U))return _e(z,j,U,ae);Pc(z,U)}return typeof U=="string"&&U!==""||typeof U=="number"?(U=""+U,j!==null&&j.tag===6?(h(z,j.sibling),j=y(j,U),j.return=z,z=j):(h(z,j),j=Jh(U,z.mode,ae),j.return=z,z=j),T(z)):h(z,j)}return Gt}var Na=_y(!0),Sy=_y(!1),Lc=Yi(null),Fc=null,Ia=null,ch=null;function uh(){ch=Ia=Fc=null}function dh(o){var l=Lc.current;Et(Lc),o._currentValue=l}function fh(o,l,h){for(;o!==null;){var g=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,g!==null&&(g.childLanes|=l)):g!==null&&(g.childLanes&l)!==l&&(g.childLanes|=l),o===h)break;o=o.return}}function Pa(o,l){Fc=o,ch=Ia=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&l)!==0&&(Vn=!0),o.firstContext=null)}function hr(o){var l=o._currentValue;if(ch!==o)if(o={context:o,memoizedValue:l,next:null},Ia===null){if(Fc===null)throw Error(n(308));Ia=o,Fc.dependencies={lanes:0,firstContext:o}}else Ia=Ia.next=o;return l}var Ns=null;function hh(o){Ns===null?Ns=[o]:Ns.push(o)}function wy(o,l,h,g){var y=l.interleaved;return y===null?(h.next=h,hh(l)):(h.next=y.next,y.next=h),l.interleaved=h,pi(o,g)}function pi(o,l){o.lanes|=l;var h=o.alternate;for(h!==null&&(h.lanes|=l),h=o,o=o.return;o!==null;)o.childLanes|=l,h=o.alternate,h!==null&&(h.childLanes|=l),h=o,o=o.return;return h.tag===3?h.stateNode:null}var Zi=!1;function ph(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xy(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function gi(o,l){return{eventTime:o,lane:l,tag:0,payload:null,callback:null,next:null}}function Xi(o,l,h){var g=o.updateQueue;if(g===null)return null;if(g=g.shared,(rt&2)!==0){var y=g.pending;return y===null?l.next=l:(l.next=y.next,y.next=l),g.pending=l,pi(o,h)}return y=g.interleaved,y===null?(l.next=l,hh(g)):(l.next=y.next,y.next=l),g.interleaved=l,pi(o,h)}function jc(o,l,h){if(l=l.updateQueue,l!==null&&(l=l.shared,(h&4194240)!==0)){var g=l.lanes;g&=o.pendingLanes,h|=g,l.lanes=h,kf(o,h)}}function Ey(o,l){var h=o.updateQueue,g=o.alternate;if(g!==null&&(g=g.updateQueue,h===g)){var y=null,S=null;if(h=h.firstBaseUpdate,h!==null){do{var T={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};S===null?y=S=T:S=S.next=T,h=h.next}while(h!==null);S===null?y=S=l:S=S.next=l}else y=S=l;h={baseState:g.baseState,firstBaseUpdate:y,lastBaseUpdate:S,shared:g.shared,effects:g.effects},o.updateQueue=h;return}o=h.lastBaseUpdate,o===null?h.firstBaseUpdate=l:o.next=l,h.lastBaseUpdate=l}function Hc(o,l,h,g){var y=o.updateQueue;Zi=!1;var S=y.firstBaseUpdate,T=y.lastBaseUpdate,N=y.shared.pending;if(N!==null){y.shared.pending=null;var L=N,V=L.next;L.next=null,T===null?S=V:T.next=V,T=L;var J=o.alternate;J!==null&&(J=J.updateQueue,N=J.lastBaseUpdate,N!==T&&(N===null?J.firstBaseUpdate=V:N.next=V,J.lastBaseUpdate=L))}if(S!==null){var te=y.baseState;T=0,J=V=L=null,N=S;do{var X=N.lane,fe=N.eventTime;if((g&X)===X){J!==null&&(J=J.next={eventTime:fe,lane:0,tag:N.tag,payload:N.payload,callback:N.callback,next:null});e:{var ve=o,_e=N;switch(X=l,fe=h,_e.tag){case 1:if(ve=_e.payload,typeof ve=="function"){te=ve.call(fe,te,X);break e}te=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=_e.payload,X=typeof ve=="function"?ve.call(fe,te,X):ve,X==null)break e;te=Y({},te,X);break e;case 2:Zi=!0}}N.callback!==null&&N.lane!==0&&(o.flags|=64,X=y.effects,X===null?y.effects=[N]:X.push(N))}else fe={eventTime:fe,lane:X,tag:N.tag,payload:N.payload,callback:N.callback,next:null},J===null?(V=J=fe,L=te):J=J.next=fe,T|=X;if(N=N.next,N===null){if(N=y.shared.pending,N===null)break;X=N,N=X.next,X.next=null,y.lastBaseUpdate=X,y.shared.pending=null}}while(!0);if(J===null&&(L=te),y.baseState=L,y.firstBaseUpdate=V,y.lastBaseUpdate=J,l=y.shared.interleaved,l!==null){y=l;do T|=y.lane,y=y.next;while(y!==l)}else S===null&&(y.shared.lanes=0);Ls|=T,o.lanes=T,o.memoizedState=te}}function Cy(o,l,h){if(o=l.effects,l.effects=null,o!==null)for(l=0;l<o.length;l++){var g=o[l],y=g.callback;if(y!==null){if(g.callback=null,g=h,typeof y!="function")throw Error(n(191,y));y.call(g)}}}var Bo={},$r=Yi(Bo),Wo=Yi(Bo),Vo=Yi(Bo);function Is(o){if(o===Bo)throw Error(n(174));return o}function gh(o,l){switch(St(Vo,l),St(Wo,o),St($r,Bo),o=l.nodeType,o){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:be(null,"");break;default:o=o===8?l.parentNode:l,l=o.namespaceURI||null,o=o.tagName,l=be(l,o)}Et($r),St($r,l)}function La(){Et($r),Et(Wo),Et(Vo)}function Ty(o){Is(Vo.current);var l=Is($r.current),h=be(l,o.type);l!==h&&(St(Wo,o),St($r,h))}function mh(o){Wo.current===o&&(Et($r),Et(Wo))}var Mt=Yi(0);function zc(o){for(var l=o;l!==null;){if(l.tag===13){var h=l.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var vh=[];function yh(){for(var o=0;o<vh.length;o++)vh[o]._workInProgressVersionPrimary=null;vh.length=0}var Uc=R.ReactCurrentDispatcher,bh=R.ReactCurrentBatchConfig,Ps=0,Nt=null,Xt=null,cn=null,Bc=!1,$o=!1,qo=0,tk=0;function wn(){throw Error(n(321))}function _h(o,l){if(l===null)return!1;for(var h=0;h<l.length&&h<o.length;h++)if(!Rr(o[h],l[h]))return!1;return!0}function Sh(o,l,h,g,y,S){if(Ps=S,Nt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Uc.current=o===null||o.memoizedState===null?sk:ak,o=h(g,y),$o){S=0;do{if($o=!1,qo=0,25<=S)throw Error(n(301));S+=1,cn=Xt=null,l.updateQueue=null,Uc.current=ok,o=h(g,y)}while($o)}if(Uc.current=$c,l=Xt!==null&&Xt.next!==null,Ps=0,cn=Xt=Nt=null,Bc=!1,l)throw Error(n(300));return o}function wh(){var o=qo!==0;return qo=0,o}function qr(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return cn===null?Nt.memoizedState=cn=o:cn=cn.next=o,cn}function pr(){if(Xt===null){var o=Nt.alternate;o=o!==null?o.memoizedState:null}else o=Xt.next;var l=cn===null?Nt.memoizedState:cn.next;if(l!==null)cn=l,Xt=o;else{if(o===null)throw Error(n(310));Xt=o,o={memoizedState:Xt.memoizedState,baseState:Xt.baseState,baseQueue:Xt.baseQueue,queue:Xt.queue,next:null},cn===null?Nt.memoizedState=cn=o:cn=cn.next=o}return cn}function Go(o,l){return typeof l=="function"?l(o):l}function xh(o){var l=pr(),h=l.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=o;var g=Xt,y=g.baseQueue,S=h.pending;if(S!==null){if(y!==null){var T=y.next;y.next=S.next,S.next=T}g.baseQueue=y=S,h.pending=null}if(y!==null){S=y.next,g=g.baseState;var N=T=null,L=null,V=S;do{var J=V.lane;if((Ps&J)===J)L!==null&&(L=L.next={lane:0,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null}),g=V.hasEagerState?V.eagerState:o(g,V.action);else{var te={lane:J,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null};L===null?(N=L=te,T=g):L=L.next=te,Nt.lanes|=J,Ls|=J}V=V.next}while(V!==null&&V!==S);L===null?T=g:L.next=N,Rr(g,l.memoizedState)||(Vn=!0),l.memoizedState=g,l.baseState=T,l.baseQueue=L,h.lastRenderedState=g}if(o=h.interleaved,o!==null){y=o;do S=y.lane,Nt.lanes|=S,Ls|=S,y=y.next;while(y!==o)}else y===null&&(h.lanes=0);return[l.memoizedState,h.dispatch]}function Eh(o){var l=pr(),h=l.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=o;var g=h.dispatch,y=h.pending,S=l.memoizedState;if(y!==null){h.pending=null;var T=y=y.next;do S=o(S,T.action),T=T.next;while(T!==y);Rr(S,l.memoizedState)||(Vn=!0),l.memoizedState=S,l.baseQueue===null&&(l.baseState=S),h.lastRenderedState=S}return[S,g]}function Dy(){}function ky(o,l){var h=Nt,g=pr(),y=l(),S=!Rr(g.memoizedState,y);if(S&&(g.memoizedState=y,Vn=!0),g=g.queue,Ch(Oy.bind(null,h,g,o),[o]),g.getSnapshot!==l||S||cn!==null&&cn.memoizedState.tag&1){if(h.flags|=2048,Yo(9,Ry.bind(null,h,g,y,l),void 0,null),un===null)throw Error(n(349));(Ps&30)!==0||Ay(h,l,y)}return y}function Ay(o,l,h){o.flags|=16384,o={getSnapshot:l,value:h},l=Nt.updateQueue,l===null?(l={lastEffect:null,stores:null},Nt.updateQueue=l,l.stores=[o]):(h=l.stores,h===null?l.stores=[o]:h.push(o))}function Ry(o,l,h,g){l.value=h,l.getSnapshot=g,My(l)&&Ny(o)}function Oy(o,l,h){return h(function(){My(l)&&Ny(o)})}function My(o){var l=o.getSnapshot;o=o.value;try{var h=l();return!Rr(o,h)}catch{return!0}}function Ny(o){var l=pi(o,1);l!==null&&Pr(l,o,1,-1)}function Iy(o){var l=qr();return typeof o=="function"&&(o=o()),l.memoizedState=l.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Go,lastRenderedState:o},l.queue=o,o=o.dispatch=ik.bind(null,Nt,o),[l.memoizedState,o]}function Yo(o,l,h,g){return o={tag:o,create:l,destroy:h,deps:g,next:null},l=Nt.updateQueue,l===null?(l={lastEffect:null,stores:null},Nt.updateQueue=l,l.lastEffect=o.next=o):(h=l.lastEffect,h===null?l.lastEffect=o.next=o:(g=h.next,h.next=o,o.next=g,l.lastEffect=o)),o}function Py(){return pr().memoizedState}function Wc(o,l,h,g){var y=qr();Nt.flags|=o,y.memoizedState=Yo(1|l,h,void 0,g===void 0?null:g)}function Vc(o,l,h,g){var y=pr();g=g===void 0?null:g;var S=void 0;if(Xt!==null){var T=Xt.memoizedState;if(S=T.destroy,g!==null&&_h(g,T.deps)){y.memoizedState=Yo(l,h,S,g);return}}Nt.flags|=o,y.memoizedState=Yo(1|l,h,S,g)}function Ly(o,l){return Wc(8390656,8,o,l)}function Ch(o,l){return Vc(2048,8,o,l)}function Fy(o,l){return Vc(4,2,o,l)}function jy(o,l){return Vc(4,4,o,l)}function Hy(o,l){if(typeof l=="function")return o=o(),l(o),function(){l(null)};if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function zy(o,l,h){return h=h!=null?h.concat([o]):null,Vc(4,4,Hy.bind(null,l,o),h)}function Th(){}function Uy(o,l){var h=pr();l=l===void 0?null:l;var g=h.memoizedState;return g!==null&&l!==null&&_h(l,g[1])?g[0]:(h.memoizedState=[o,l],o)}function By(o,l){var h=pr();l=l===void 0?null:l;var g=h.memoizedState;return g!==null&&l!==null&&_h(l,g[1])?g[0]:(o=o(),h.memoizedState=[o,l],o)}function Wy(o,l,h){return(Ps&21)===0?(o.baseState&&(o.baseState=!1,Vn=!0),o.memoizedState=h):(Rr(h,l)||(h=bv(),Nt.lanes|=h,Ls|=h,o.baseState=!0),l)}function nk(o,l){var h=dt;dt=h!==0&&4>h?h:4,o(!0);var g=bh.transition;bh.transition={};try{o(!1),l()}finally{dt=h,bh.transition=g}}function Vy(){return pr().memoizedState}function rk(o,l,h){var g=ns(o);if(h={lane:g,action:h,hasEagerState:!1,eagerState:null,next:null},$y(o))qy(l,h);else if(h=wy(o,l,h,g),h!==null){var y=On();Pr(h,o,g,y),Gy(h,l,g)}}function ik(o,l,h){var g=ns(o),y={lane:g,action:h,hasEagerState:!1,eagerState:null,next:null};if($y(o))qy(l,y);else{var S=o.alternate;if(o.lanes===0&&(S===null||S.lanes===0)&&(S=l.lastRenderedReducer,S!==null))try{var T=l.lastRenderedState,N=S(T,h);if(y.hasEagerState=!0,y.eagerState=N,Rr(N,T)){var L=l.interleaved;L===null?(y.next=y,hh(l)):(y.next=L.next,L.next=y),l.interleaved=y;return}}catch{}finally{}h=wy(o,l,y,g),h!==null&&(y=On(),Pr(h,o,g,y),Gy(h,l,g))}}function $y(o){var l=o.alternate;return o===Nt||l!==null&&l===Nt}function qy(o,l){$o=Bc=!0;var h=o.pending;h===null?l.next=l:(l.next=h.next,h.next=l),o.pending=l}function Gy(o,l,h){if((h&4194240)!==0){var g=l.lanes;g&=o.pendingLanes,h|=g,l.lanes=h,kf(o,h)}}var $c={readContext:hr,useCallback:wn,useContext:wn,useEffect:wn,useImperativeHandle:wn,useInsertionEffect:wn,useLayoutEffect:wn,useMemo:wn,useReducer:wn,useRef:wn,useState:wn,useDebugValue:wn,useDeferredValue:wn,useTransition:wn,useMutableSource:wn,useSyncExternalStore:wn,useId:wn,unstable_isNewReconciler:!1},sk={readContext:hr,useCallback:function(o,l){return qr().memoizedState=[o,l===void 0?null:l],o},useContext:hr,useEffect:Ly,useImperativeHandle:function(o,l,h){return h=h!=null?h.concat([o]):null,Wc(4194308,4,Hy.bind(null,l,o),h)},useLayoutEffect:function(o,l){return Wc(4194308,4,o,l)},useInsertionEffect:function(o,l){return Wc(4,2,o,l)},useMemo:function(o,l){var h=qr();return l=l===void 0?null:l,o=o(),h.memoizedState=[o,l],o},useReducer:function(o,l,h){var g=qr();return l=h!==void 0?h(l):l,g.memoizedState=g.baseState=l,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:l},g.queue=o,o=o.dispatch=rk.bind(null,Nt,o),[g.memoizedState,o]},useRef:function(o){var l=qr();return o={current:o},l.memoizedState=o},useState:Iy,useDebugValue:Th,useDeferredValue:function(o){return qr().memoizedState=o},useTransition:function(){var o=Iy(!1),l=o[0];return o=nk.bind(null,o[1]),qr().memoizedState=o,[l,o]},useMutableSource:function(){},useSyncExternalStore:function(o,l,h){var g=Nt,y=qr();if(kt){if(h===void 0)throw Error(n(407));h=h()}else{if(h=l(),un===null)throw Error(n(349));(Ps&30)!==0||Ay(g,l,h)}y.memoizedState=h;var S={value:h,getSnapshot:l};return y.queue=S,Ly(Oy.bind(null,g,S,o),[o]),g.flags|=2048,Yo(9,Ry.bind(null,g,S,h,l),void 0,null),h},useId:function(){var o=qr(),l=un.identifierPrefix;if(kt){var h=hi,g=fi;h=(g&~(1<<32-Ar(g)-1)).toString(32)+h,l=":"+l+"R"+h,h=qo++,0<h&&(l+="H"+h.toString(32)),l+=":"}else h=tk++,l=":"+l+"r"+h.toString(32)+":";return o.memoizedState=l},unstable_isNewReconciler:!1},ak={readContext:hr,useCallback:Uy,useContext:hr,useEffect:Ch,useImperativeHandle:zy,useInsertionEffect:Fy,useLayoutEffect:jy,useMemo:By,useReducer:xh,useRef:Py,useState:function(){return xh(Go)},useDebugValue:Th,useDeferredValue:function(o){var l=pr();return Wy(l,Xt.memoizedState,o)},useTransition:function(){var o=xh(Go)[0],l=pr().memoizedState;return[o,l]},useMutableSource:Dy,useSyncExternalStore:ky,useId:Vy,unstable_isNewReconciler:!1},ok={readContext:hr,useCallback:Uy,useContext:hr,useEffect:Ch,useImperativeHandle:zy,useInsertionEffect:Fy,useLayoutEffect:jy,useMemo:By,useReducer:Eh,useRef:Py,useState:function(){return Eh(Go)},useDebugValue:Th,useDeferredValue:function(o){var l=pr();return Xt===null?l.memoizedState=o:Wy(l,Xt.memoizedState,o)},useTransition:function(){var o=Eh(Go)[0],l=pr().memoizedState;return[o,l]},useMutableSource:Dy,useSyncExternalStore:ky,useId:Vy,unstable_isNewReconciler:!1};function Mr(o,l){if(o&&o.defaultProps){l=Y({},l),o=o.defaultProps;for(var h in o)l[h]===void 0&&(l[h]=o[h]);return l}return l}function Dh(o,l,h,g){l=o.memoizedState,h=h(g,l),h=h==null?l:Y({},l,h),o.memoizedState=h,o.lanes===0&&(o.updateQueue.baseState=h)}var qc={isMounted:function(o){return(o=o._reactInternals)?ks(o)===o:!1},enqueueSetState:function(o,l,h){o=o._reactInternals;var g=On(),y=ns(o),S=gi(g,y);S.payload=l,h!=null&&(S.callback=h),l=Xi(o,S,y),l!==null&&(Pr(l,o,y,g),jc(l,o,y))},enqueueReplaceState:function(o,l,h){o=o._reactInternals;var g=On(),y=ns(o),S=gi(g,y);S.tag=1,S.payload=l,h!=null&&(S.callback=h),l=Xi(o,S,y),l!==null&&(Pr(l,o,y,g),jc(l,o,y))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var h=On(),g=ns(o),y=gi(h,g);y.tag=2,l!=null&&(y.callback=l),l=Xi(o,y,g),l!==null&&(Pr(l,o,g,h),jc(l,o,g))}};function Yy(o,l,h,g,y,S,T){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(g,S,T):l.prototype&&l.prototype.isPureReactComponent?!Io(h,g)||!Io(y,S):!0}function Qy(o,l,h){var g=!1,y=Qi,S=l.contextType;return typeof S=="object"&&S!==null?S=hr(S):(y=Wn(l)?Rs:Sn.current,g=l.contextTypes,S=(g=g!=null)?Aa(o,y):Qi),l=new l(h,S),o.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=qc,o.stateNode=l,l._reactInternals=o,g&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=y,o.__reactInternalMemoizedMaskedChildContext=S),l}function Ky(o,l,h,g){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(h,g),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(h,g),l.state!==o&&qc.enqueueReplaceState(l,l.state,null)}function kh(o,l,h,g){var y=o.stateNode;y.props=h,y.state=o.memoizedState,y.refs={},ph(o);var S=l.contextType;typeof S=="object"&&S!==null?y.context=hr(S):(S=Wn(l)?Rs:Sn.current,y.context=Aa(o,S)),y.state=o.memoizedState,S=l.getDerivedStateFromProps,typeof S=="function"&&(Dh(o,l,S,h),y.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(l=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),l!==y.state&&qc.enqueueReplaceState(y,y.state,null),Hc(o,h,y,g),y.state=o.memoizedState),typeof y.componentDidMount=="function"&&(o.flags|=4194308)}function Fa(o,l){try{var h="",g=l;do h+=ue(g),g=g.return;while(g);var y=h}catch(S){y=`
Error generating stack: `+S.message+`
`+S.stack}return{value:o,source:l,stack:y,digest:null}}function Ah(o,l,h){return{value:o,source:null,stack:h??null,digest:l??null}}function Rh(o,l){try{console.error(l.value)}catch(h){setTimeout(function(){throw h})}}var lk=typeof WeakMap=="function"?WeakMap:Map;function Zy(o,l,h){h=gi(-1,h),h.tag=3,h.payload={element:null};var g=l.value;return h.callback=function(){Jc||(Jc=!0,$h=g),Rh(o,l)},h}function Xy(o,l,h){h=gi(-1,h),h.tag=3;var g=o.type.getDerivedStateFromError;if(typeof g=="function"){var y=l.value;h.payload=function(){return g(y)},h.callback=function(){Rh(o,l)}}var S=o.stateNode;return S!==null&&typeof S.componentDidCatch=="function"&&(h.callback=function(){Rh(o,l),typeof g!="function"&&(es===null?es=new Set([this]):es.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})}),h}function Jy(o,l,h){var g=o.pingCache;if(g===null){g=o.pingCache=new lk;var y=new Set;g.set(l,y)}else y=g.get(l),y===void 0&&(y=new Set,g.set(l,y));y.has(h)||(y.add(h),o=wk.bind(null,o,l,h),l.then(o,o))}function eb(o){do{var l;if((l=o.tag===13)&&(l=o.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return o;o=o.return}while(o!==null);return null}function tb(o,l,h,g,y){return(o.mode&1)===0?(o===l?o.flags|=65536:(o.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(l=gi(-1,1),l.tag=2,Xi(h,l,1))),h.lanes|=1),o):(o.flags|=65536,o.lanes=y,o)}var ck=R.ReactCurrentOwner,Vn=!1;function Rn(o,l,h,g){l.child=o===null?Sy(l,null,h,g):Na(l,o.child,h,g)}function nb(o,l,h,g,y){h=h.render;var S=l.ref;return Pa(l,y),g=Sh(o,l,h,g,S,y),h=wh(),o!==null&&!Vn?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~y,mi(o,l,y)):(kt&&h&&ih(l),l.flags|=1,Rn(o,l,g,y),l.child)}function rb(o,l,h,g,y){if(o===null){var S=h.type;return typeof S=="function"&&!Xh(S)&&S.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(l.tag=15,l.type=S,ib(o,l,S,g,y)):(o=su(h.type,null,g,l,l.mode,y),o.ref=l.ref,o.return=l,l.child=o)}if(S=o.child,(o.lanes&y)===0){var T=S.memoizedProps;if(h=h.compare,h=h!==null?h:Io,h(T,g)&&o.ref===l.ref)return mi(o,l,y)}return l.flags|=1,o=is(S,g),o.ref=l.ref,o.return=l,l.child=o}function ib(o,l,h,g,y){if(o!==null){var S=o.memoizedProps;if(Io(S,g)&&o.ref===l.ref)if(Vn=!1,l.pendingProps=g=S,(o.lanes&y)!==0)(o.flags&131072)!==0&&(Vn=!0);else return l.lanes=o.lanes,mi(o,l,y)}return Oh(o,l,h,g,y)}function sb(o,l,h){var g=l.pendingProps,y=g.children,S=o!==null?o.memoizedState:null;if(g.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},St(Ha,sr),sr|=h;else{if((h&1073741824)===0)return o=S!==null?S.baseLanes|h:h,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:o,cachePool:null,transitions:null},l.updateQueue=null,St(Ha,sr),sr|=o,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=S!==null?S.baseLanes:h,St(Ha,sr),sr|=g}else S!==null?(g=S.baseLanes|h,l.memoizedState=null):g=h,St(Ha,sr),sr|=g;return Rn(o,l,y,h),l.child}function ab(o,l){var h=l.ref;(o===null&&h!==null||o!==null&&o.ref!==h)&&(l.flags|=512,l.flags|=2097152)}function Oh(o,l,h,g,y){var S=Wn(h)?Rs:Sn.current;return S=Aa(l,S),Pa(l,y),h=Sh(o,l,h,g,S,y),g=wh(),o!==null&&!Vn?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~y,mi(o,l,y)):(kt&&g&&ih(l),l.flags|=1,Rn(o,l,h,y),l.child)}function ob(o,l,h,g,y){if(Wn(h)){var S=!0;Rc(l)}else S=!1;if(Pa(l,y),l.stateNode===null)Yc(o,l),Qy(l,h,g),kh(l,h,g,y),g=!0;else if(o===null){var T=l.stateNode,N=l.memoizedProps;T.props=N;var L=T.context,V=h.contextType;typeof V=="object"&&V!==null?V=hr(V):(V=Wn(h)?Rs:Sn.current,V=Aa(l,V));var J=h.getDerivedStateFromProps,te=typeof J=="function"||typeof T.getSnapshotBeforeUpdate=="function";te||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(N!==g||L!==V)&&Ky(l,T,g,V),Zi=!1;var X=l.memoizedState;T.state=X,Hc(l,g,T,y),L=l.memoizedState,N!==g||X!==L||Bn.current||Zi?(typeof J=="function"&&(Dh(l,h,J,g),L=l.memoizedState),(N=Zi||Yy(l,h,N,g,X,L,V))?(te||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(l.flags|=4194308)):(typeof T.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=g,l.memoizedState=L),T.props=g,T.state=L,T.context=V,g=N):(typeof T.componentDidMount=="function"&&(l.flags|=4194308),g=!1)}else{T=l.stateNode,xy(o,l),N=l.memoizedProps,V=l.type===l.elementType?N:Mr(l.type,N),T.props=V,te=l.pendingProps,X=T.context,L=h.contextType,typeof L=="object"&&L!==null?L=hr(L):(L=Wn(h)?Rs:Sn.current,L=Aa(l,L));var fe=h.getDerivedStateFromProps;(J=typeof fe=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(N!==te||X!==L)&&Ky(l,T,g,L),Zi=!1,X=l.memoizedState,T.state=X,Hc(l,g,T,y);var ve=l.memoizedState;N!==te||X!==ve||Bn.current||Zi?(typeof fe=="function"&&(Dh(l,h,fe,g),ve=l.memoizedState),(V=Zi||Yy(l,h,V,g,X,ve,L)||!1)?(J||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(g,ve,L),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(g,ve,L)),typeof T.componentDidUpdate=="function"&&(l.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof T.componentDidUpdate!="function"||N===o.memoizedProps&&X===o.memoizedState||(l.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||N===o.memoizedProps&&X===o.memoizedState||(l.flags|=1024),l.memoizedProps=g,l.memoizedState=ve),T.props=g,T.state=ve,T.context=L,g=V):(typeof T.componentDidUpdate!="function"||N===o.memoizedProps&&X===o.memoizedState||(l.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||N===o.memoizedProps&&X===o.memoizedState||(l.flags|=1024),g=!1)}return Mh(o,l,h,g,S,y)}function Mh(o,l,h,g,y,S){ab(o,l);var T=(l.flags&128)!==0;if(!g&&!T)return y&&fy(l,h,!1),mi(o,l,S);g=l.stateNode,ck.current=l;var N=T&&typeof h.getDerivedStateFromError!="function"?null:g.render();return l.flags|=1,o!==null&&T?(l.child=Na(l,o.child,null,S),l.child=Na(l,null,N,S)):Rn(o,l,N,S),l.memoizedState=g.state,y&&fy(l,h,!0),l.child}function lb(o){var l=o.stateNode;l.pendingContext?uy(o,l.pendingContext,l.pendingContext!==l.context):l.context&&uy(o,l.context,!1),gh(o,l.containerInfo)}function cb(o,l,h,g,y){return Ma(),lh(y),l.flags|=256,Rn(o,l,h,g),l.child}var Nh={dehydrated:null,treeContext:null,retryLane:0};function Ih(o){return{baseLanes:o,cachePool:null,transitions:null}}function ub(o,l,h){var g=l.pendingProps,y=Mt.current,S=!1,T=(l.flags&128)!==0,N;if((N=T)||(N=o!==null&&o.memoizedState===null?!1:(y&2)!==0),N?(S=!0,l.flags&=-129):(o===null||o.memoizedState!==null)&&(y|=1),St(Mt,y&1),o===null)return oh(l),o=l.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((l.mode&1)===0?l.lanes=1:o.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(T=g.children,o=g.fallback,S?(g=l.mode,S=l.child,T={mode:"hidden",children:T},(g&1)===0&&S!==null?(S.childLanes=0,S.pendingProps=T):S=au(T,g,0,null),o=zs(o,g,h,null),S.return=l,o.return=l,S.sibling=o,l.child=S,l.child.memoizedState=Ih(h),l.memoizedState=Nh,o):Ph(l,T));if(y=o.memoizedState,y!==null&&(N=y.dehydrated,N!==null))return uk(o,l,T,g,N,y,h);if(S){S=g.fallback,T=l.mode,y=o.child,N=y.sibling;var L={mode:"hidden",children:g.children};return(T&1)===0&&l.child!==y?(g=l.child,g.childLanes=0,g.pendingProps=L,l.deletions=null):(g=is(y,L),g.subtreeFlags=y.subtreeFlags&14680064),N!==null?S=is(N,S):(S=zs(S,T,h,null),S.flags|=2),S.return=l,g.return=l,g.sibling=S,l.child=g,g=S,S=l.child,T=o.child.memoizedState,T=T===null?Ih(h):{baseLanes:T.baseLanes|h,cachePool:null,transitions:T.transitions},S.memoizedState=T,S.childLanes=o.childLanes&~h,l.memoizedState=Nh,g}return S=o.child,o=S.sibling,g=is(S,{mode:"visible",children:g.children}),(l.mode&1)===0&&(g.lanes=h),g.return=l,g.sibling=null,o!==null&&(h=l.deletions,h===null?(l.deletions=[o],l.flags|=16):h.push(o)),l.child=g,l.memoizedState=null,g}function Ph(o,l){return l=au({mode:"visible",children:l},o.mode,0,null),l.return=o,o.child=l}function Gc(o,l,h,g){return g!==null&&lh(g),Na(l,o.child,null,h),o=Ph(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function uk(o,l,h,g,y,S,T){if(h)return l.flags&256?(l.flags&=-257,g=Ah(Error(n(422))),Gc(o,l,T,g)):l.memoizedState!==null?(l.child=o.child,l.flags|=128,null):(S=g.fallback,y=l.mode,g=au({mode:"visible",children:g.children},y,0,null),S=zs(S,y,T,null),S.flags|=2,g.return=l,S.return=l,g.sibling=S,l.child=g,(l.mode&1)!==0&&Na(l,o.child,null,T),l.child.memoizedState=Ih(T),l.memoizedState=Nh,S);if((l.mode&1)===0)return Gc(o,l,T,null);if(y.data==="$!"){if(g=y.nextSibling&&y.nextSibling.dataset,g)var N=g.dgst;return g=N,S=Error(n(419)),g=Ah(S,g,void 0),Gc(o,l,T,g)}if(N=(T&o.childLanes)!==0,Vn||N){if(g=un,g!==null){switch(T&-T){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=(y&(g.suspendedLanes|T))!==0?0:y,y!==0&&y!==S.retryLane&&(S.retryLane=y,pi(o,y),Pr(g,o,y,-1))}return Zh(),g=Ah(Error(n(421))),Gc(o,l,T,g)}return y.data==="$?"?(l.flags|=128,l.child=o.child,l=xk.bind(null,o),y._reactRetry=l,null):(o=S.treeContext,ir=Gi(y.nextSibling),rr=l,kt=!0,Or=null,o!==null&&(dr[fr++]=fi,dr[fr++]=hi,dr[fr++]=Os,fi=o.id,hi=o.overflow,Os=l),l=Ph(l,g.children),l.flags|=4096,l)}function db(o,l,h){o.lanes|=l;var g=o.alternate;g!==null&&(g.lanes|=l),fh(o.return,l,h)}function Lh(o,l,h,g,y){var S=o.memoizedState;S===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:g,tail:h,tailMode:y}:(S.isBackwards=l,S.rendering=null,S.renderingStartTime=0,S.last=g,S.tail=h,S.tailMode=y)}function fb(o,l,h){var g=l.pendingProps,y=g.revealOrder,S=g.tail;if(Rn(o,l,g.children,h),g=Mt.current,(g&2)!==0)g=g&1|2,l.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&db(o,h,l);else if(o.tag===19)db(o,h,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}g&=1}if(St(Mt,g),(l.mode&1)===0)l.memoizedState=null;else switch(y){case"forwards":for(h=l.child,y=null;h!==null;)o=h.alternate,o!==null&&zc(o)===null&&(y=h),h=h.sibling;h=y,h===null?(y=l.child,l.child=null):(y=h.sibling,h.sibling=null),Lh(l,!1,y,h,S);break;case"backwards":for(h=null,y=l.child,l.child=null;y!==null;){if(o=y.alternate,o!==null&&zc(o)===null){l.child=y;break}o=y.sibling,y.sibling=h,h=y,y=o}Lh(l,!0,h,null,S);break;case"together":Lh(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Yc(o,l){(l.mode&1)===0&&o!==null&&(o.alternate=null,l.alternate=null,l.flags|=2)}function mi(o,l,h){if(o!==null&&(l.dependencies=o.dependencies),Ls|=l.lanes,(h&l.childLanes)===0)return null;if(o!==null&&l.child!==o.child)throw Error(n(153));if(l.child!==null){for(o=l.child,h=is(o,o.pendingProps),l.child=h,h.return=l;o.sibling!==null;)o=o.sibling,h=h.sibling=is(o,o.pendingProps),h.return=l;h.sibling=null}return l.child}function dk(o,l,h){switch(l.tag){case 3:lb(l),Ma();break;case 5:Ty(l);break;case 1:Wn(l.type)&&Rc(l);break;case 4:gh(l,l.stateNode.containerInfo);break;case 10:var g=l.type._context,y=l.memoizedProps.value;St(Lc,g._currentValue),g._currentValue=y;break;case 13:if(g=l.memoizedState,g!==null)return g.dehydrated!==null?(St(Mt,Mt.current&1),l.flags|=128,null):(h&l.child.childLanes)!==0?ub(o,l,h):(St(Mt,Mt.current&1),o=mi(o,l,h),o!==null?o.sibling:null);St(Mt,Mt.current&1);break;case 19:if(g=(h&l.childLanes)!==0,(o.flags&128)!==0){if(g)return fb(o,l,h);l.flags|=128}if(y=l.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),St(Mt,Mt.current),g)break;return null;case 22:case 23:return l.lanes=0,sb(o,l,h)}return mi(o,l,h)}var hb,Fh,pb,gb;hb=function(o,l){for(var h=l.child;h!==null;){if(h.tag===5||h.tag===6)o.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===l)break;for(;h.sibling===null;){if(h.return===null||h.return===l)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},Fh=function(){},pb=function(o,l,h,g){var y=o.memoizedProps;if(y!==g){o=l.stateNode,Is($r.current);var S=null;switch(h){case"input":y=ge(o,y),g=ge(o,g),S=[];break;case"select":y=Y({},y,{value:void 0}),g=Y({},g,{value:void 0}),S=[];break;case"textarea":y=Le(o,y),g=Le(o,g),S=[];break;default:typeof y.onClick!="function"&&typeof g.onClick=="function"&&(o.onclick=Dc)}nt(h,g);var T;h=null;for(V in y)if(!g.hasOwnProperty(V)&&y.hasOwnProperty(V)&&y[V]!=null)if(V==="style"){var N=y[V];for(T in N)N.hasOwnProperty(T)&&(h||(h={}),h[T]="")}else V!=="dangerouslySetInnerHTML"&&V!=="children"&&V!=="suppressContentEditableWarning"&&V!=="suppressHydrationWarning"&&V!=="autoFocus"&&(i.hasOwnProperty(V)?S||(S=[]):(S=S||[]).push(V,null));for(V in g){var L=g[V];if(N=y?.[V],g.hasOwnProperty(V)&&L!==N&&(L!=null||N!=null))if(V==="style")if(N){for(T in N)!N.hasOwnProperty(T)||L&&L.hasOwnProperty(T)||(h||(h={}),h[T]="");for(T in L)L.hasOwnProperty(T)&&N[T]!==L[T]&&(h||(h={}),h[T]=L[T])}else h||(S||(S=[]),S.push(V,h)),h=L;else V==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,N=N?N.__html:void 0,L!=null&&N!==L&&(S=S||[]).push(V,L)):V==="children"?typeof L!="string"&&typeof L!="number"||(S=S||[]).push(V,""+L):V!=="suppressContentEditableWarning"&&V!=="suppressHydrationWarning"&&(i.hasOwnProperty(V)?(L!=null&&V==="onScroll"&&xt("scroll",o),S||N===L||(S=[])):(S=S||[]).push(V,L))}h&&(S=S||[]).push("style",h);var V=S;(l.updateQueue=V)&&(l.flags|=4)}},gb=function(o,l,h,g){h!==g&&(l.flags|=4)};function Qo(o,l){if(!kt)switch(o.tailMode){case"hidden":l=o.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?o.tail=null:h.sibling=null;break;case"collapsed":h=o.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:g.sibling=null}}function xn(o){var l=o.alternate!==null&&o.alternate.child===o.child,h=0,g=0;if(l)for(var y=o.child;y!==null;)h|=y.lanes|y.childLanes,g|=y.subtreeFlags&14680064,g|=y.flags&14680064,y.return=o,y=y.sibling;else for(y=o.child;y!==null;)h|=y.lanes|y.childLanes,g|=y.subtreeFlags,g|=y.flags,y.return=o,y=y.sibling;return o.subtreeFlags|=g,o.childLanes=h,l}function fk(o,l,h){var g=l.pendingProps;switch(sh(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xn(l),null;case 1:return Wn(l.type)&&Ac(),xn(l),null;case 3:return g=l.stateNode,La(),Et(Bn),Et(Sn),yh(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(o===null||o.child===null)&&(Ic(l)?l.flags|=4:o===null||o.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Or!==null&&(Yh(Or),Or=null))),Fh(o,l),xn(l),null;case 5:mh(l);var y=Is(Vo.current);if(h=l.type,o!==null&&l.stateNode!=null)pb(o,l,h,g,y),o.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!g){if(l.stateNode===null)throw Error(n(166));return xn(l),null}if(o=Is($r.current),Ic(l)){g=l.stateNode,h=l.type;var S=l.memoizedProps;switch(g[Vr]=l,g[Ho]=S,o=(l.mode&1)!==0,h){case"dialog":xt("cancel",g),xt("close",g);break;case"iframe":case"object":case"embed":xt("load",g);break;case"video":case"audio":for(y=0;y<Lo.length;y++)xt(Lo[y],g);break;case"source":xt("error",g);break;case"img":case"image":case"link":xt("error",g),xt("load",g);break;case"details":xt("toggle",g);break;case"input":Pe(g,S),xt("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!S.multiple},xt("invalid",g);break;case"textarea":Z(g,S),xt("invalid",g)}nt(h,S),y=null;for(var T in S)if(S.hasOwnProperty(T)){var N=S[T];T==="children"?typeof N=="string"?g.textContent!==N&&(S.suppressHydrationWarning!==!0&&Tc(g.textContent,N,o),y=["children",N]):typeof N=="number"&&g.textContent!==""+N&&(S.suppressHydrationWarning!==!0&&Tc(g.textContent,N,o),y=["children",""+N]):i.hasOwnProperty(T)&&N!=null&&T==="onScroll"&&xt("scroll",g)}switch(h){case"input":jt(g),Zt(g,S,!0);break;case"textarea":jt(g),Fe(g);break;case"select":case"option":break;default:typeof S.onClick=="function"&&(g.onclick=Dc)}g=y,l.updateQueue=g,g!==null&&(l.flags|=4)}else{T=y.nodeType===9?y:y.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=Ne(h)),o==="http://www.w3.org/1999/xhtml"?h==="script"?(o=T.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof g.is=="string"?o=T.createElement(h,{is:g.is}):(o=T.createElement(h),h==="select"&&(T=o,g.multiple?T.multiple=!0:g.size&&(T.size=g.size))):o=T.createElementNS(o,h),o[Vr]=l,o[Ho]=g,hb(o,l,!1,!1),l.stateNode=o;e:{switch(T=Wt(h,g),h){case"dialog":xt("cancel",o),xt("close",o),y=g;break;case"iframe":case"object":case"embed":xt("load",o),y=g;break;case"video":case"audio":for(y=0;y<Lo.length;y++)xt(Lo[y],o);y=g;break;case"source":xt("error",o),y=g;break;case"img":case"image":case"link":xt("error",o),xt("load",o),y=g;break;case"details":xt("toggle",o),y=g;break;case"input":Pe(o,g),y=ge(o,g),xt("invalid",o);break;case"option":y=g;break;case"select":o._wrapperState={wasMultiple:!!g.multiple},y=Y({},g,{value:void 0}),xt("invalid",o);break;case"textarea":Z(o,g),y=Le(o,g),xt("invalid",o);break;default:y=g}nt(h,y),N=y;for(S in N)if(N.hasOwnProperty(S)){var L=N[S];S==="style"?ur(o,L):S==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,L!=null&&Re(o,L)):S==="children"?typeof L=="string"?(h!=="textarea"||L!=="")&&ze(o,L):typeof L=="number"&&ze(o,""+L):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(i.hasOwnProperty(S)?L!=null&&S==="onScroll"&&xt("scroll",o):L!=null&&k(o,S,L,T))}switch(h){case"input":jt(o),Zt(o,g,!1);break;case"textarea":jt(o),Fe(o);break;case"option":g.value!=null&&o.setAttribute("value",""+se(g.value));break;case"select":o.multiple=!!g.multiple,S=g.value,S!=null?ot(o,!!g.multiple,S,!1):g.defaultValue!=null&&ot(o,!!g.multiple,g.defaultValue,!0);break;default:typeof y.onClick=="function"&&(o.onclick=Dc)}switch(h){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return xn(l),null;case 6:if(o&&l.stateNode!=null)gb(o,l,o.memoizedProps,g);else{if(typeof g!="string"&&l.stateNode===null)throw Error(n(166));if(h=Is(Vo.current),Is($r.current),Ic(l)){if(g=l.stateNode,h=l.memoizedProps,g[Vr]=l,(S=g.nodeValue!==h)&&(o=rr,o!==null))switch(o.tag){case 3:Tc(g.nodeValue,h,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&Tc(g.nodeValue,h,(o.mode&1)!==0)}S&&(l.flags|=4)}else g=(h.nodeType===9?h:h.ownerDocument).createTextNode(g),g[Vr]=l,l.stateNode=g}return xn(l),null;case 13:if(Et(Mt),g=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(kt&&ir!==null&&(l.mode&1)!==0&&(l.flags&128)===0)yy(),Ma(),l.flags|=98560,S=!1;else if(S=Ic(l),g!==null&&g.dehydrated!==null){if(o===null){if(!S)throw Error(n(318));if(S=l.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(n(317));S[Vr]=l}else Ma(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;xn(l),S=!1}else Or!==null&&(Yh(Or),Or=null),S=!0;if(!S)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=h,l):(g=g!==null,g!==(o!==null&&o.memoizedState!==null)&&g&&(l.child.flags|=8192,(l.mode&1)!==0&&(o===null||(Mt.current&1)!==0?Jt===0&&(Jt=3):Zh())),l.updateQueue!==null&&(l.flags|=4),xn(l),null);case 4:return La(),Fh(o,l),o===null&&Fo(l.stateNode.containerInfo),xn(l),null;case 10:return dh(l.type._context),xn(l),null;case 17:return Wn(l.type)&&Ac(),xn(l),null;case 19:if(Et(Mt),S=l.memoizedState,S===null)return xn(l),null;if(g=(l.flags&128)!==0,T=S.rendering,T===null)if(g)Qo(S,!1);else{if(Jt!==0||o!==null&&(o.flags&128)!==0)for(o=l.child;o!==null;){if(T=zc(o),T!==null){for(l.flags|=128,Qo(S,!1),g=T.updateQueue,g!==null&&(l.updateQueue=g,l.flags|=4),l.subtreeFlags=0,g=h,h=l.child;h!==null;)S=h,o=g,S.flags&=14680066,T=S.alternate,T===null?(S.childLanes=0,S.lanes=o,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=T.childLanes,S.lanes=T.lanes,S.child=T.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=T.memoizedProps,S.memoizedState=T.memoizedState,S.updateQueue=T.updateQueue,S.type=T.type,o=T.dependencies,S.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),h=h.sibling;return St(Mt,Mt.current&1|2),l.child}o=o.sibling}S.tail!==null&&qt()>za&&(l.flags|=128,g=!0,Qo(S,!1),l.lanes=4194304)}else{if(!g)if(o=zc(T),o!==null){if(l.flags|=128,g=!0,h=o.updateQueue,h!==null&&(l.updateQueue=h,l.flags|=4),Qo(S,!0),S.tail===null&&S.tailMode==="hidden"&&!T.alternate&&!kt)return xn(l),null}else 2*qt()-S.renderingStartTime>za&&h!==1073741824&&(l.flags|=128,g=!0,Qo(S,!1),l.lanes=4194304);S.isBackwards?(T.sibling=l.child,l.child=T):(h=S.last,h!==null?h.sibling=T:l.child=T,S.last=T)}return S.tail!==null?(l=S.tail,S.rendering=l,S.tail=l.sibling,S.renderingStartTime=qt(),l.sibling=null,h=Mt.current,St(Mt,g?h&1|2:h&1),l):(xn(l),null);case 22:case 23:return Kh(),g=l.memoizedState!==null,o!==null&&o.memoizedState!==null!==g&&(l.flags|=8192),g&&(l.mode&1)!==0?(sr&1073741824)!==0&&(xn(l),l.subtreeFlags&6&&(l.flags|=8192)):xn(l),null;case 24:return null;case 25:return null}throw Error(n(156,l.tag))}function hk(o,l){switch(sh(l),l.tag){case 1:return Wn(l.type)&&Ac(),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return La(),Et(Bn),Et(Sn),yh(),o=l.flags,(o&65536)!==0&&(o&128)===0?(l.flags=o&-65537|128,l):null;case 5:return mh(l),null;case 13:if(Et(Mt),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(n(340));Ma()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return Et(Mt),null;case 4:return La(),null;case 10:return dh(l.type._context),null;case 22:case 23:return Kh(),null;case 24:return null;default:return null}}var Qc=!1,En=!1,pk=typeof WeakSet=="function"?WeakSet:Set,me=null;function ja(o,l){var h=o.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(g){zt(o,l,g)}else h.current=null}function jh(o,l,h){try{h()}catch(g){zt(o,l,g)}}var mb=!1;function gk(o,l){if(Kf=gc,o=Yv(),Bf(o)){if("selectionStart"in o)var h={start:o.selectionStart,end:o.selectionEnd};else e:{h=(h=o.ownerDocument)&&h.defaultView||window;var g=h.getSelection&&h.getSelection();if(g&&g.rangeCount!==0){h=g.anchorNode;var y=g.anchorOffset,S=g.focusNode;g=g.focusOffset;try{h.nodeType,S.nodeType}catch{h=null;break e}var T=0,N=-1,L=-1,V=0,J=0,te=o,X=null;t:for(;;){for(var fe;te!==h||y!==0&&te.nodeType!==3||(N=T+y),te!==S||g!==0&&te.nodeType!==3||(L=T+g),te.nodeType===3&&(T+=te.nodeValue.length),(fe=te.firstChild)!==null;)X=te,te=fe;for(;;){if(te===o)break t;if(X===h&&++V===y&&(N=T),X===S&&++J===g&&(L=T),(fe=te.nextSibling)!==null)break;te=X,X=te.parentNode}te=fe}h=N===-1||L===-1?null:{start:N,end:L}}else h=null}h=h||{start:0,end:0}}else h=null;for(Zf={focusedElem:o,selectionRange:h},gc=!1,me=l;me!==null;)if(l=me,o=l.child,(l.subtreeFlags&1028)!==0&&o!==null)o.return=l,me=o;else for(;me!==null;){l=me;try{var ve=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(ve!==null){var _e=ve.memoizedProps,Gt=ve.memoizedState,z=l.stateNode,j=z.getSnapshotBeforeUpdate(l.elementType===l.type?_e:Mr(l.type,_e),Gt);z.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var U=l.stateNode.containerInfo;U.nodeType===1?U.textContent="":U.nodeType===9&&U.documentElement&&U.removeChild(U.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(ae){zt(l,l.return,ae)}if(o=l.sibling,o!==null){o.return=l.return,me=o;break}me=l.return}return ve=mb,mb=!1,ve}function Ko(o,l,h){var g=l.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var y=g=g.next;do{if((y.tag&o)===o){var S=y.destroy;y.destroy=void 0,S!==void 0&&jh(l,h,S)}y=y.next}while(y!==g)}}function Kc(o,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var h=l=l.next;do{if((h.tag&o)===o){var g=h.create;h.destroy=g()}h=h.next}while(h!==l)}}function Hh(o){var l=o.ref;if(l!==null){var h=o.stateNode;switch(o.tag){case 5:o=h;break;default:o=h}typeof l=="function"?l(o):l.current=o}}function vb(o){var l=o.alternate;l!==null&&(o.alternate=null,vb(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&(delete l[Vr],delete l[Ho],delete l[th],delete l[ZD],delete l[XD])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function yb(o){return o.tag===5||o.tag===3||o.tag===4}function bb(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||yb(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function zh(o,l,h){var g=o.tag;if(g===5||g===6)o=o.stateNode,l?h.nodeType===8?h.parentNode.insertBefore(o,l):h.insertBefore(o,l):(h.nodeType===8?(l=h.parentNode,l.insertBefore(o,h)):(l=h,l.appendChild(o)),h=h._reactRootContainer,h!=null||l.onclick!==null||(l.onclick=Dc));else if(g!==4&&(o=o.child,o!==null))for(zh(o,l,h),o=o.sibling;o!==null;)zh(o,l,h),o=o.sibling}function Uh(o,l,h){var g=o.tag;if(g===5||g===6)o=o.stateNode,l?h.insertBefore(o,l):h.appendChild(o);else if(g!==4&&(o=o.child,o!==null))for(Uh(o,l,h),o=o.sibling;o!==null;)Uh(o,l,h),o=o.sibling}var mn=null,Nr=!1;function Ji(o,l,h){for(h=h.child;h!==null;)_b(o,l,h),h=h.sibling}function _b(o,l,h){if(Wr&&typeof Wr.onCommitFiberUnmount=="function")try{Wr.onCommitFiberUnmount(cc,h)}catch{}switch(h.tag){case 5:En||ja(h,l);case 6:var g=mn,y=Nr;mn=null,Ji(o,l,h),mn=g,Nr=y,mn!==null&&(Nr?(o=mn,h=h.stateNode,o.nodeType===8?o.parentNode.removeChild(h):o.removeChild(h)):mn.removeChild(h.stateNode));break;case 18:mn!==null&&(Nr?(o=mn,h=h.stateNode,o.nodeType===8?eh(o.parentNode,h):o.nodeType===1&&eh(o,h),ko(o)):eh(mn,h.stateNode));break;case 4:g=mn,y=Nr,mn=h.stateNode.containerInfo,Nr=!0,Ji(o,l,h),mn=g,Nr=y;break;case 0:case 11:case 14:case 15:if(!En&&(g=h.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){y=g=g.next;do{var S=y,T=S.destroy;S=S.tag,T!==void 0&&((S&2)!==0||(S&4)!==0)&&jh(h,l,T),y=y.next}while(y!==g)}Ji(o,l,h);break;case 1:if(!En&&(ja(h,l),g=h.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=h.memoizedProps,g.state=h.memoizedState,g.componentWillUnmount()}catch(N){zt(h,l,N)}Ji(o,l,h);break;case 21:Ji(o,l,h);break;case 22:h.mode&1?(En=(g=En)||h.memoizedState!==null,Ji(o,l,h),En=g):Ji(o,l,h);break;default:Ji(o,l,h)}}function Sb(o){var l=o.updateQueue;if(l!==null){o.updateQueue=null;var h=o.stateNode;h===null&&(h=o.stateNode=new pk),l.forEach(function(g){var y=Ek.bind(null,o,g);h.has(g)||(h.add(g),g.then(y,y))})}}function Ir(o,l){var h=l.deletions;if(h!==null)for(var g=0;g<h.length;g++){var y=h[g];try{var S=o,T=l,N=T;e:for(;N!==null;){switch(N.tag){case 5:mn=N.stateNode,Nr=!1;break e;case 3:mn=N.stateNode.containerInfo,Nr=!0;break e;case 4:mn=N.stateNode.containerInfo,Nr=!0;break e}N=N.return}if(mn===null)throw Error(n(160));_b(S,T,y),mn=null,Nr=!1;var L=y.alternate;L!==null&&(L.return=null),y.return=null}catch(V){zt(y,l,V)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)wb(l,o),l=l.sibling}function wb(o,l){var h=o.alternate,g=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(Ir(l,o),Gr(o),g&4){try{Ko(3,o,o.return),Kc(3,o)}catch(_e){zt(o,o.return,_e)}try{Ko(5,o,o.return)}catch(_e){zt(o,o.return,_e)}}break;case 1:Ir(l,o),Gr(o),g&512&&h!==null&&ja(h,h.return);break;case 5:if(Ir(l,o),Gr(o),g&512&&h!==null&&ja(h,h.return),o.flags&32){var y=o.stateNode;try{ze(y,"")}catch(_e){zt(o,o.return,_e)}}if(g&4&&(y=o.stateNode,y!=null)){var S=o.memoizedProps,T=h!==null?h.memoizedProps:S,N=o.type,L=o.updateQueue;if(o.updateQueue=null,L!==null)try{N==="input"&&S.type==="radio"&&S.name!=null&&Ke(y,S),Wt(N,T);var V=Wt(N,S);for(T=0;T<L.length;T+=2){var J=L[T],te=L[T+1];J==="style"?ur(y,te):J==="dangerouslySetInnerHTML"?Re(y,te):J==="children"?ze(y,te):k(y,J,te,V)}switch(N){case"input":_t(y,S);break;case"textarea":ye(y,S);break;case"select":var X=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!S.multiple;var fe=S.value;fe!=null?ot(y,!!S.multiple,fe,!1):X!==!!S.multiple&&(S.defaultValue!=null?ot(y,!!S.multiple,S.defaultValue,!0):ot(y,!!S.multiple,S.multiple?[]:"",!1))}y[Ho]=S}catch(_e){zt(o,o.return,_e)}}break;case 6:if(Ir(l,o),Gr(o),g&4){if(o.stateNode===null)throw Error(n(162));y=o.stateNode,S=o.memoizedProps;try{y.nodeValue=S}catch(_e){zt(o,o.return,_e)}}break;case 3:if(Ir(l,o),Gr(o),g&4&&h!==null&&h.memoizedState.isDehydrated)try{ko(l.containerInfo)}catch(_e){zt(o,o.return,_e)}break;case 4:Ir(l,o),Gr(o);break;case 13:Ir(l,o),Gr(o),y=o.child,y.flags&8192&&(S=y.memoizedState!==null,y.stateNode.isHidden=S,!S||y.alternate!==null&&y.alternate.memoizedState!==null||(Vh=qt())),g&4&&Sb(o);break;case 22:if(J=h!==null&&h.memoizedState!==null,o.mode&1?(En=(V=En)||J,Ir(l,o),En=V):Ir(l,o),Gr(o),g&8192){if(V=o.memoizedState!==null,(o.stateNode.isHidden=V)&&!J&&(o.mode&1)!==0)for(me=o,J=o.child;J!==null;){for(te=me=J;me!==null;){switch(X=me,fe=X.child,X.tag){case 0:case 11:case 14:case 15:Ko(4,X,X.return);break;case 1:ja(X,X.return);var ve=X.stateNode;if(typeof ve.componentWillUnmount=="function"){g=X,h=X.return;try{l=g,ve.props=l.memoizedProps,ve.state=l.memoizedState,ve.componentWillUnmount()}catch(_e){zt(g,h,_e)}}break;case 5:ja(X,X.return);break;case 22:if(X.memoizedState!==null){Cb(te);continue}}fe!==null?(fe.return=X,me=fe):Cb(te)}J=J.sibling}e:for(J=null,te=o;;){if(te.tag===5){if(J===null){J=te;try{y=te.stateNode,V?(S=y.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none"):(N=te.stateNode,L=te.memoizedProps.style,T=L!=null&&L.hasOwnProperty("display")?L.display:null,N.style.display=ut("display",T))}catch(_e){zt(o,o.return,_e)}}}else if(te.tag===6){if(J===null)try{te.stateNode.nodeValue=V?"":te.memoizedProps}catch(_e){zt(o,o.return,_e)}}else if((te.tag!==22&&te.tag!==23||te.memoizedState===null||te===o)&&te.child!==null){te.child.return=te,te=te.child;continue}if(te===o)break e;for(;te.sibling===null;){if(te.return===null||te.return===o)break e;J===te&&(J=null),te=te.return}J===te&&(J=null),te.sibling.return=te.return,te=te.sibling}}break;case 19:Ir(l,o),Gr(o),g&4&&Sb(o);break;case 21:break;default:Ir(l,o),Gr(o)}}function Gr(o){var l=o.flags;if(l&2){try{e:{for(var h=o.return;h!==null;){if(yb(h)){var g=h;break e}h=h.return}throw Error(n(160))}switch(g.tag){case 5:var y=g.stateNode;g.flags&32&&(ze(y,""),g.flags&=-33);var S=bb(o);Uh(o,S,y);break;case 3:case 4:var T=g.stateNode.containerInfo,N=bb(o);zh(o,N,T);break;default:throw Error(n(161))}}catch(L){zt(o,o.return,L)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function mk(o,l,h){me=o,xb(o)}function xb(o,l,h){for(var g=(o.mode&1)!==0;me!==null;){var y=me,S=y.child;if(y.tag===22&&g){var T=y.memoizedState!==null||Qc;if(!T){var N=y.alternate,L=N!==null&&N.memoizedState!==null||En;N=Qc;var V=En;if(Qc=T,(En=L)&&!V)for(me=y;me!==null;)T=me,L=T.child,T.tag===22&&T.memoizedState!==null?Tb(y):L!==null?(L.return=T,me=L):Tb(y);for(;S!==null;)me=S,xb(S),S=S.sibling;me=y,Qc=N,En=V}Eb(o)}else(y.subtreeFlags&8772)!==0&&S!==null?(S.return=y,me=S):Eb(o)}}function Eb(o){for(;me!==null;){var l=me;if((l.flags&8772)!==0){var h=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:En||Kc(5,l);break;case 1:var g=l.stateNode;if(l.flags&4&&!En)if(h===null)g.componentDidMount();else{var y=l.elementType===l.type?h.memoizedProps:Mr(l.type,h.memoizedProps);g.componentDidUpdate(y,h.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var S=l.updateQueue;S!==null&&Cy(l,S,g);break;case 3:var T=l.updateQueue;if(T!==null){if(h=null,l.child!==null)switch(l.child.tag){case 5:h=l.child.stateNode;break;case 1:h=l.child.stateNode}Cy(l,T,h)}break;case 5:var N=l.stateNode;if(h===null&&l.flags&4){h=N;var L=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":L.autoFocus&&h.focus();break;case"img":L.src&&(h.src=L.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var V=l.alternate;if(V!==null){var J=V.memoizedState;if(J!==null){var te=J.dehydrated;te!==null&&ko(te)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}En||l.flags&512&&Hh(l)}catch(X){zt(l,l.return,X)}}if(l===o){me=null;break}if(h=l.sibling,h!==null){h.return=l.return,me=h;break}me=l.return}}function Cb(o){for(;me!==null;){var l=me;if(l===o){me=null;break}var h=l.sibling;if(h!==null){h.return=l.return,me=h;break}me=l.return}}function Tb(o){for(;me!==null;){var l=me;try{switch(l.tag){case 0:case 11:case 15:var h=l.return;try{Kc(4,l)}catch(L){zt(l,h,L)}break;case 1:var g=l.stateNode;if(typeof g.componentDidMount=="function"){var y=l.return;try{g.componentDidMount()}catch(L){zt(l,y,L)}}var S=l.return;try{Hh(l)}catch(L){zt(l,S,L)}break;case 5:var T=l.return;try{Hh(l)}catch(L){zt(l,T,L)}}}catch(L){zt(l,l.return,L)}if(l===o){me=null;break}var N=l.sibling;if(N!==null){N.return=l.return,me=N;break}me=l.return}}var vk=Math.ceil,Zc=R.ReactCurrentDispatcher,Bh=R.ReactCurrentOwner,gr=R.ReactCurrentBatchConfig,rt=0,un=null,Qt=null,vn=0,sr=0,Ha=Yi(0),Jt=0,Zo=null,Ls=0,Xc=0,Wh=0,Xo=null,$n=null,Vh=0,za=1/0,vi=null,Jc=!1,$h=null,es=null,eu=!1,ts=null,tu=0,Jo=0,qh=null,nu=-1,ru=0;function On(){return(rt&6)!==0?qt():nu!==-1?nu:nu=qt()}function ns(o){return(o.mode&1)===0?1:(rt&2)!==0&&vn!==0?vn&-vn:ek.transition!==null?(ru===0&&(ru=bv()),ru):(o=dt,o!==0||(o=window.event,o=o===void 0?16:kv(o.type)),o)}function Pr(o,l,h,g){if(50<Jo)throw Jo=0,qh=null,Error(n(185));xo(o,h,g),((rt&2)===0||o!==un)&&(o===un&&((rt&2)===0&&(Xc|=h),Jt===4&&rs(o,vn)),qn(o,g),h===1&&rt===0&&(l.mode&1)===0&&(za=qt()+500,Oc&&Ki()))}function qn(o,l){var h=o.callbackNode;eD(o,l);var g=fc(o,o===un?vn:0);if(g===0)h!==null&&mv(h),o.callbackNode=null,o.callbackPriority=0;else if(l=g&-g,o.callbackPriority!==l){if(h!=null&&mv(h),l===1)o.tag===0?JD(kb.bind(null,o)):hy(kb.bind(null,o)),QD(function(){(rt&6)===0&&Ki()}),h=null;else{switch(_v(g)){case 1:h=Cf;break;case 4:h=vv;break;case 16:h=lc;break;case 536870912:h=yv;break;default:h=lc}h=Lb(h,Db.bind(null,o))}o.callbackPriority=l,o.callbackNode=h}}function Db(o,l){if(nu=-1,ru=0,(rt&6)!==0)throw Error(n(327));var h=o.callbackNode;if(Ua()&&o.callbackNode!==h)return null;var g=fc(o,o===un?vn:0);if(g===0)return null;if((g&30)!==0||(g&o.expiredLanes)!==0||l)l=iu(o,g);else{l=g;var y=rt;rt|=2;var S=Rb();(un!==o||vn!==l)&&(vi=null,za=qt()+500,js(o,l));do try{_k();break}catch(N){Ab(o,N)}while(!0);uh(),Zc.current=S,rt=y,Qt!==null?l=0:(un=null,vn=0,l=Jt)}if(l!==0){if(l===2&&(y=Tf(o),y!==0&&(g=y,l=Gh(o,y))),l===1)throw h=Zo,js(o,0),rs(o,g),qn(o,qt()),h;if(l===6)rs(o,g);else{if(y=o.current.alternate,(g&30)===0&&!yk(y)&&(l=iu(o,g),l===2&&(S=Tf(o),S!==0&&(g=S,l=Gh(o,S))),l===1))throw h=Zo,js(o,0),rs(o,g),qn(o,qt()),h;switch(o.finishedWork=y,o.finishedLanes=g,l){case 0:case 1:throw Error(n(345));case 2:Hs(o,$n,vi);break;case 3:if(rs(o,g),(g&130023424)===g&&(l=Vh+500-qt(),10<l)){if(fc(o,0)!==0)break;if(y=o.suspendedLanes,(y&g)!==g){On(),o.pingedLanes|=o.suspendedLanes&y;break}o.timeoutHandle=Jf(Hs.bind(null,o,$n,vi),l);break}Hs(o,$n,vi);break;case 4:if(rs(o,g),(g&4194240)===g)break;for(l=o.eventTimes,y=-1;0<g;){var T=31-Ar(g);S=1<<T,T=l[T],T>y&&(y=T),g&=~S}if(g=y,g=qt()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*vk(g/1960))-g,10<g){o.timeoutHandle=Jf(Hs.bind(null,o,$n,vi),g);break}Hs(o,$n,vi);break;case 5:Hs(o,$n,vi);break;default:throw Error(n(329))}}}return qn(o,qt()),o.callbackNode===h?Db.bind(null,o):null}function Gh(o,l){var h=Xo;return o.current.memoizedState.isDehydrated&&(js(o,l).flags|=256),o=iu(o,l),o!==2&&(l=$n,$n=h,l!==null&&Yh(l)),o}function Yh(o){$n===null?$n=o:$n.push.apply($n,o)}function yk(o){for(var l=o;;){if(l.flags&16384){var h=l.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var g=0;g<h.length;g++){var y=h[g],S=y.getSnapshot;y=y.value;try{if(!Rr(S(),y))return!1}catch{return!1}}}if(h=l.child,l.subtreeFlags&16384&&h!==null)h.return=l,l=h;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function rs(o,l){for(l&=~Wh,l&=~Xc,o.suspendedLanes|=l,o.pingedLanes&=~l,o=o.expirationTimes;0<l;){var h=31-Ar(l),g=1<<h;o[h]=-1,l&=~g}}function kb(o){if((rt&6)!==0)throw Error(n(327));Ua();var l=fc(o,0);if((l&1)===0)return qn(o,qt()),null;var h=iu(o,l);if(o.tag!==0&&h===2){var g=Tf(o);g!==0&&(l=g,h=Gh(o,g))}if(h===1)throw h=Zo,js(o,0),rs(o,l),qn(o,qt()),h;if(h===6)throw Error(n(345));return o.finishedWork=o.current.alternate,o.finishedLanes=l,Hs(o,$n,vi),qn(o,qt()),null}function Qh(o,l){var h=rt;rt|=1;try{return o(l)}finally{rt=h,rt===0&&(za=qt()+500,Oc&&Ki())}}function Fs(o){ts!==null&&ts.tag===0&&(rt&6)===0&&Ua();var l=rt;rt|=1;var h=gr.transition,g=dt;try{if(gr.transition=null,dt=1,o)return o()}finally{dt=g,gr.transition=h,rt=l,(rt&6)===0&&Ki()}}function Kh(){sr=Ha.current,Et(Ha)}function js(o,l){o.finishedWork=null,o.finishedLanes=0;var h=o.timeoutHandle;if(h!==-1&&(o.timeoutHandle=-1,YD(h)),Qt!==null)for(h=Qt.return;h!==null;){var g=h;switch(sh(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&Ac();break;case 3:La(),Et(Bn),Et(Sn),yh();break;case 5:mh(g);break;case 4:La();break;case 13:Et(Mt);break;case 19:Et(Mt);break;case 10:dh(g.type._context);break;case 22:case 23:Kh()}h=h.return}if(un=o,Qt=o=is(o.current,null),vn=sr=l,Jt=0,Zo=null,Wh=Xc=Ls=0,$n=Xo=null,Ns!==null){for(l=0;l<Ns.length;l++)if(h=Ns[l],g=h.interleaved,g!==null){h.interleaved=null;var y=g.next,S=h.pending;if(S!==null){var T=S.next;S.next=y,g.next=T}h.pending=g}Ns=null}return o}function Ab(o,l){do{var h=Qt;try{if(uh(),Uc.current=$c,Bc){for(var g=Nt.memoizedState;g!==null;){var y=g.queue;y!==null&&(y.pending=null),g=g.next}Bc=!1}if(Ps=0,cn=Xt=Nt=null,$o=!1,qo=0,Bh.current=null,h===null||h.return===null){Jt=1,Zo=l,Qt=null;break}e:{var S=o,T=h.return,N=h,L=l;if(l=vn,N.flags|=32768,L!==null&&typeof L=="object"&&typeof L.then=="function"){var V=L,J=N,te=J.tag;if((J.mode&1)===0&&(te===0||te===11||te===15)){var X=J.alternate;X?(J.updateQueue=X.updateQueue,J.memoizedState=X.memoizedState,J.lanes=X.lanes):(J.updateQueue=null,J.memoizedState=null)}var fe=eb(T);if(fe!==null){fe.flags&=-257,tb(fe,T,N,S,l),fe.mode&1&&Jy(S,V,l),l=fe,L=V;var ve=l.updateQueue;if(ve===null){var _e=new Set;_e.add(L),l.updateQueue=_e}else ve.add(L);break e}else{if((l&1)===0){Jy(S,V,l),Zh();break e}L=Error(n(426))}}else if(kt&&N.mode&1){var Gt=eb(T);if(Gt!==null){(Gt.flags&65536)===0&&(Gt.flags|=256),tb(Gt,T,N,S,l),lh(Fa(L,N));break e}}S=L=Fa(L,N),Jt!==4&&(Jt=2),Xo===null?Xo=[S]:Xo.push(S),S=T;do{switch(S.tag){case 3:S.flags|=65536,l&=-l,S.lanes|=l;var z=Zy(S,L,l);Ey(S,z);break e;case 1:N=L;var j=S.type,U=S.stateNode;if((S.flags&128)===0&&(typeof j.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(es===null||!es.has(U)))){S.flags|=65536,l&=-l,S.lanes|=l;var ae=Xy(S,N,l);Ey(S,ae);break e}}S=S.return}while(S!==null)}Mb(h)}catch(we){l=we,Qt===h&&h!==null&&(Qt=h=h.return);continue}break}while(!0)}function Rb(){var o=Zc.current;return Zc.current=$c,o===null?$c:o}function Zh(){(Jt===0||Jt===3||Jt===2)&&(Jt=4),un===null||(Ls&268435455)===0&&(Xc&268435455)===0||rs(un,vn)}function iu(o,l){var h=rt;rt|=2;var g=Rb();(un!==o||vn!==l)&&(vi=null,js(o,l));do try{bk();break}catch(y){Ab(o,y)}while(!0);if(uh(),rt=h,Zc.current=g,Qt!==null)throw Error(n(261));return un=null,vn=0,Jt}function bk(){for(;Qt!==null;)Ob(Qt)}function _k(){for(;Qt!==null&&!$T();)Ob(Qt)}function Ob(o){var l=Pb(o.alternate,o,sr);o.memoizedProps=o.pendingProps,l===null?Mb(o):Qt=l,Bh.current=null}function Mb(o){var l=o;do{var h=l.alternate;if(o=l.return,(l.flags&32768)===0){if(h=fk(h,l,sr),h!==null){Qt=h;return}}else{if(h=hk(h,l),h!==null){h.flags&=32767,Qt=h;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{Jt=6,Qt=null;return}}if(l=l.sibling,l!==null){Qt=l;return}Qt=l=o}while(l!==null);Jt===0&&(Jt=5)}function Hs(o,l,h){var g=dt,y=gr.transition;try{gr.transition=null,dt=1,Sk(o,l,h,g)}finally{gr.transition=y,dt=g}return null}function Sk(o,l,h,g){do Ua();while(ts!==null);if((rt&6)!==0)throw Error(n(327));h=o.finishedWork;var y=o.finishedLanes;if(h===null)return null;if(o.finishedWork=null,o.finishedLanes=0,h===o.current)throw Error(n(177));o.callbackNode=null,o.callbackPriority=0;var S=h.lanes|h.childLanes;if(tD(o,S),o===un&&(Qt=un=null,vn=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||eu||(eu=!0,Lb(lc,function(){return Ua(),null})),S=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||S){S=gr.transition,gr.transition=null;var T=dt;dt=1;var N=rt;rt|=4,Bh.current=null,gk(o,h),wb(h,o),UD(Zf),gc=!!Kf,Zf=Kf=null,o.current=h,mk(h),qT(),rt=N,dt=T,gr.transition=S}else o.current=h;if(eu&&(eu=!1,ts=o,tu=y),S=o.pendingLanes,S===0&&(es=null),QT(h.stateNode),qn(o,qt()),l!==null)for(g=o.onRecoverableError,h=0;h<l.length;h++)y=l[h],g(y.value,{componentStack:y.stack,digest:y.digest});if(Jc)throw Jc=!1,o=$h,$h=null,o;return(tu&1)!==0&&o.tag!==0&&Ua(),S=o.pendingLanes,(S&1)!==0?o===qh?Jo++:(Jo=0,qh=o):Jo=0,Ki(),null}function Ua(){if(ts!==null){var o=_v(tu),l=gr.transition,h=dt;try{if(gr.transition=null,dt=16>o?16:o,ts===null)var g=!1;else{if(o=ts,ts=null,tu=0,(rt&6)!==0)throw Error(n(331));var y=rt;for(rt|=4,me=o.current;me!==null;){var S=me,T=S.child;if((me.flags&16)!==0){var N=S.deletions;if(N!==null){for(var L=0;L<N.length;L++){var V=N[L];for(me=V;me!==null;){var J=me;switch(J.tag){case 0:case 11:case 15:Ko(8,J,S)}var te=J.child;if(te!==null)te.return=J,me=te;else for(;me!==null;){J=me;var X=J.sibling,fe=J.return;if(vb(J),J===V){me=null;break}if(X!==null){X.return=fe,me=X;break}me=fe}}}var ve=S.alternate;if(ve!==null){var _e=ve.child;if(_e!==null){ve.child=null;do{var Gt=_e.sibling;_e.sibling=null,_e=Gt}while(_e!==null)}}me=S}}if((S.subtreeFlags&2064)!==0&&T!==null)T.return=S,me=T;else e:for(;me!==null;){if(S=me,(S.flags&2048)!==0)switch(S.tag){case 0:case 11:case 15:Ko(9,S,S.return)}var z=S.sibling;if(z!==null){z.return=S.return,me=z;break e}me=S.return}}var j=o.current;for(me=j;me!==null;){T=me;var U=T.child;if((T.subtreeFlags&2064)!==0&&U!==null)U.return=T,me=U;else e:for(T=j;me!==null;){if(N=me,(N.flags&2048)!==0)try{switch(N.tag){case 0:case 11:case 15:Kc(9,N)}}catch(we){zt(N,N.return,we)}if(N===T){me=null;break e}var ae=N.sibling;if(ae!==null){ae.return=N.return,me=ae;break e}me=N.return}}if(rt=y,Ki(),Wr&&typeof Wr.onPostCommitFiberRoot=="function")try{Wr.onPostCommitFiberRoot(cc,o)}catch{}g=!0}return g}finally{dt=h,gr.transition=l}}return!1}function Nb(o,l,h){l=Fa(h,l),l=Zy(o,l,1),o=Xi(o,l,1),l=On(),o!==null&&(xo(o,1,l),qn(o,l))}function zt(o,l,h){if(o.tag===3)Nb(o,o,h);else for(;l!==null;){if(l.tag===3){Nb(l,o,h);break}else if(l.tag===1){var g=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(es===null||!es.has(g))){o=Fa(h,o),o=Xy(l,o,1),l=Xi(l,o,1),o=On(),l!==null&&(xo(l,1,o),qn(l,o));break}}l=l.return}}function wk(o,l,h){var g=o.pingCache;g!==null&&g.delete(l),l=On(),o.pingedLanes|=o.suspendedLanes&h,un===o&&(vn&h)===h&&(Jt===4||Jt===3&&(vn&130023424)===vn&&500>qt()-Vh?js(o,0):Wh|=h),qn(o,l)}function Ib(o,l){l===0&&((o.mode&1)===0?l=1:(l=dc,dc<<=1,(dc&130023424)===0&&(dc=4194304)));var h=On();o=pi(o,l),o!==null&&(xo(o,l,h),qn(o,h))}function xk(o){var l=o.memoizedState,h=0;l!==null&&(h=l.retryLane),Ib(o,h)}function Ek(o,l){var h=0;switch(o.tag){case 13:var g=o.stateNode,y=o.memoizedState;y!==null&&(h=y.retryLane);break;case 19:g=o.stateNode;break;default:throw Error(n(314))}g!==null&&g.delete(l),Ib(o,h)}var Pb;Pb=function(o,l,h){if(o!==null)if(o.memoizedProps!==l.pendingProps||Bn.current)Vn=!0;else{if((o.lanes&h)===0&&(l.flags&128)===0)return Vn=!1,dk(o,l,h);Vn=(o.flags&131072)!==0}else Vn=!1,kt&&(l.flags&1048576)!==0&&py(l,Nc,l.index);switch(l.lanes=0,l.tag){case 2:var g=l.type;Yc(o,l),o=l.pendingProps;var y=Aa(l,Sn.current);Pa(l,h),y=Sh(null,l,g,o,y,h);var S=wh();return l.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,Wn(g)?(S=!0,Rc(l)):S=!1,l.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,ph(l),y.updater=qc,l.stateNode=y,y._reactInternals=l,kh(l,g,o,h),l=Mh(null,l,g,!0,S,h)):(l.tag=0,kt&&S&&ih(l),Rn(null,l,y,h),l=l.child),l;case 16:g=l.elementType;e:{switch(Yc(o,l),o=l.pendingProps,y=g._init,g=y(g._payload),l.type=g,y=l.tag=Tk(g),o=Mr(g,o),y){case 0:l=Oh(null,l,g,o,h);break e;case 1:l=ob(null,l,g,o,h);break e;case 11:l=nb(null,l,g,o,h);break e;case 14:l=rb(null,l,g,Mr(g.type,o),h);break e}throw Error(n(306,g,""))}return l;case 0:return g=l.type,y=l.pendingProps,y=l.elementType===g?y:Mr(g,y),Oh(o,l,g,y,h);case 1:return g=l.type,y=l.pendingProps,y=l.elementType===g?y:Mr(g,y),ob(o,l,g,y,h);case 3:e:{if(lb(l),o===null)throw Error(n(387));g=l.pendingProps,S=l.memoizedState,y=S.element,xy(o,l),Hc(l,g,null,h);var T=l.memoizedState;if(g=T.element,S.isDehydrated)if(S={element:g,isDehydrated:!1,cache:T.cache,pendingSuspenseBoundaries:T.pendingSuspenseBoundaries,transitions:T.transitions},l.updateQueue.baseState=S,l.memoizedState=S,l.flags&256){y=Fa(Error(n(423)),l),l=cb(o,l,g,h,y);break e}else if(g!==y){y=Fa(Error(n(424)),l),l=cb(o,l,g,h,y);break e}else for(ir=Gi(l.stateNode.containerInfo.firstChild),rr=l,kt=!0,Or=null,h=Sy(l,null,g,h),l.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(Ma(),g===y){l=mi(o,l,h);break e}Rn(o,l,g,h)}l=l.child}return l;case 5:return Ty(l),o===null&&oh(l),g=l.type,y=l.pendingProps,S=o!==null?o.memoizedProps:null,T=y.children,Xf(g,y)?T=null:S!==null&&Xf(g,S)&&(l.flags|=32),ab(o,l),Rn(o,l,T,h),l.child;case 6:return o===null&&oh(l),null;case 13:return ub(o,l,h);case 4:return gh(l,l.stateNode.containerInfo),g=l.pendingProps,o===null?l.child=Na(l,null,g,h):Rn(o,l,g,h),l.child;case 11:return g=l.type,y=l.pendingProps,y=l.elementType===g?y:Mr(g,y),nb(o,l,g,y,h);case 7:return Rn(o,l,l.pendingProps,h),l.child;case 8:return Rn(o,l,l.pendingProps.children,h),l.child;case 12:return Rn(o,l,l.pendingProps.children,h),l.child;case 10:e:{if(g=l.type._context,y=l.pendingProps,S=l.memoizedProps,T=y.value,St(Lc,g._currentValue),g._currentValue=T,S!==null)if(Rr(S.value,T)){if(S.children===y.children&&!Bn.current){l=mi(o,l,h);break e}}else for(S=l.child,S!==null&&(S.return=l);S!==null;){var N=S.dependencies;if(N!==null){T=S.child;for(var L=N.firstContext;L!==null;){if(L.context===g){if(S.tag===1){L=gi(-1,h&-h),L.tag=2;var V=S.updateQueue;if(V!==null){V=V.shared;var J=V.pending;J===null?L.next=L:(L.next=J.next,J.next=L),V.pending=L}}S.lanes|=h,L=S.alternate,L!==null&&(L.lanes|=h),fh(S.return,h,l),N.lanes|=h;break}L=L.next}}else if(S.tag===10)T=S.type===l.type?null:S.child;else if(S.tag===18){if(T=S.return,T===null)throw Error(n(341));T.lanes|=h,N=T.alternate,N!==null&&(N.lanes|=h),fh(T,h,l),T=S.sibling}else T=S.child;if(T!==null)T.return=S;else for(T=S;T!==null;){if(T===l){T=null;break}if(S=T.sibling,S!==null){S.return=T.return,T=S;break}T=T.return}S=T}Rn(o,l,y.children,h),l=l.child}return l;case 9:return y=l.type,g=l.pendingProps.children,Pa(l,h),y=hr(y),g=g(y),l.flags|=1,Rn(o,l,g,h),l.child;case 14:return g=l.type,y=Mr(g,l.pendingProps),y=Mr(g.type,y),rb(o,l,g,y,h);case 15:return ib(o,l,l.type,l.pendingProps,h);case 17:return g=l.type,y=l.pendingProps,y=l.elementType===g?y:Mr(g,y),Yc(o,l),l.tag=1,Wn(g)?(o=!0,Rc(l)):o=!1,Pa(l,h),Qy(l,g,y),kh(l,g,y,h),Mh(null,l,g,!0,o,h);case 19:return fb(o,l,h);case 22:return sb(o,l,h)}throw Error(n(156,l.tag))};function Lb(o,l){return gv(o,l)}function Ck(o,l,h,g){this.tag=o,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mr(o,l,h,g){return new Ck(o,l,h,g)}function Xh(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Tk(o){if(typeof o=="function")return Xh(o)?1:0;if(o!=null){if(o=o.$$typeof,o===ee)return 11;if(o===pe)return 14}return 2}function is(o,l){var h=o.alternate;return h===null?(h=mr(o.tag,l,o.key,o.mode),h.elementType=o.elementType,h.type=o.type,h.stateNode=o.stateNode,h.alternate=o,o.alternate=h):(h.pendingProps=l,h.type=o.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=o.flags&14680064,h.childLanes=o.childLanes,h.lanes=o.lanes,h.child=o.child,h.memoizedProps=o.memoizedProps,h.memoizedState=o.memoizedState,h.updateQueue=o.updateQueue,l=o.dependencies,h.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},h.sibling=o.sibling,h.index=o.index,h.ref=o.ref,h}function su(o,l,h,g,y,S){var T=2;if(g=o,typeof o=="function")Xh(o)&&(T=1);else if(typeof o=="string")T=5;else e:switch(o){case P:return zs(h.children,y,S,l);case O:T=8,y|=8;break;case H:return o=mr(12,h,l,y|2),o.elementType=H,o.lanes=S,o;case re:return o=mr(13,h,l,y),o.elementType=re,o.lanes=S,o;case he:return o=mr(19,h,l,y),o.elementType=he,o.lanes=S,o;case oe:return au(h,y,S,l);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case B:T=10;break e;case $:T=9;break e;case ee:T=11;break e;case pe:T=14;break e;case ie:T=16,g=null;break e}throw Error(n(130,o==null?o:typeof o,""))}return l=mr(T,h,l,y),l.elementType=o,l.type=g,l.lanes=S,l}function zs(o,l,h,g){return o=mr(7,o,g,l),o.lanes=h,o}function au(o,l,h,g){return o=mr(22,o,g,l),o.elementType=oe,o.lanes=h,o.stateNode={isHidden:!1},o}function Jh(o,l,h){return o=mr(6,o,null,l),o.lanes=h,o}function ep(o,l,h){return l=mr(4,o.children!==null?o.children:[],o.key,l),l.lanes=h,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}function Dk(o,l,h,g,y){this.tag=l,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Df(0),this.expirationTimes=Df(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Df(0),this.identifierPrefix=g,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function tp(o,l,h,g,y,S,T,N,L){return o=new Dk(o,l,h,N,L),l===1?(l=1,S===!0&&(l|=8)):l=0,S=mr(3,null,null,l),o.current=S,S.stateNode=o,S.memoizedState={element:g,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},ph(S),o}function kk(o,l,h){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:M,key:g==null?null:""+g,children:o,containerInfo:l,implementation:h}}function Fb(o){if(!o)return Qi;o=o._reactInternals;e:{if(ks(o)!==o||o.tag!==1)throw Error(n(170));var l=o;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(Wn(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(n(171))}if(o.tag===1){var h=o.type;if(Wn(h))return dy(o,h,l)}return l}function jb(o,l,h,g,y,S,T,N,L){return o=tp(h,g,!0,o,y,S,T,N,L),o.context=Fb(null),h=o.current,g=On(),y=ns(h),S=gi(g,y),S.callback=l??null,Xi(h,S,y),o.current.lanes=y,xo(o,y,g),qn(o,g),o}function ou(o,l,h,g){var y=l.current,S=On(),T=ns(y);return h=Fb(h),l.context===null?l.context=h:l.pendingContext=h,l=gi(S,T),l.payload={element:o},g=g===void 0?null:g,g!==null&&(l.callback=g),o=Xi(y,l,T),o!==null&&(Pr(o,y,T,S),jc(o,y,T)),T}function lu(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function Hb(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var h=o.retryLane;o.retryLane=h!==0&&h<l?h:l}}function np(o,l){Hb(o,l),(o=o.alternate)&&Hb(o,l)}function Ak(){return null}var zb=typeof reportError=="function"?reportError:function(o){console.error(o)};function rp(o){this._internalRoot=o}cu.prototype.render=rp.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(n(409));ou(o,l,null,null)},cu.prototype.unmount=rp.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;Fs(function(){ou(null,o,null,null)}),l[ui]=null}};function cu(o){this._internalRoot=o}cu.prototype.unstable_scheduleHydration=function(o){if(o){var l=xv();o={blockedOn:null,target:o,priority:l};for(var h=0;h<Vi.length&&l!==0&&l<Vi[h].priority;h++);Vi.splice(h,0,o),h===0&&Tv(o)}};function ip(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function uu(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function Ub(){}function Rk(o,l,h,g,y){if(y){if(typeof g=="function"){var S=g;g=function(){var V=lu(T);S.call(V)}}var T=jb(l,g,o,0,null,!1,!1,"",Ub);return o._reactRootContainer=T,o[ui]=T.current,Fo(o.nodeType===8?o.parentNode:o),Fs(),T}for(;y=o.lastChild;)o.removeChild(y);if(typeof g=="function"){var N=g;g=function(){var V=lu(L);N.call(V)}}var L=tp(o,0,!1,null,null,!1,!1,"",Ub);return o._reactRootContainer=L,o[ui]=L.current,Fo(o.nodeType===8?o.parentNode:o),Fs(function(){ou(l,L,h,g)}),L}function du(o,l,h,g,y){var S=h._reactRootContainer;if(S){var T=S;if(typeof y=="function"){var N=y;y=function(){var L=lu(T);N.call(L)}}ou(l,T,o,y)}else T=Rk(h,l,o,y,g);return lu(T)}Sv=function(o){switch(o.tag){case 3:var l=o.stateNode;if(l.current.memoizedState.isDehydrated){var h=wo(l.pendingLanes);h!==0&&(kf(l,h|1),qn(l,qt()),(rt&6)===0&&(za=qt()+500,Ki()))}break;case 13:Fs(function(){var g=pi(o,1);if(g!==null){var y=On();Pr(g,o,1,y)}}),np(o,1)}},Af=function(o){if(o.tag===13){var l=pi(o,134217728);if(l!==null){var h=On();Pr(l,o,134217728,h)}np(o,134217728)}},wv=function(o){if(o.tag===13){var l=ns(o),h=pi(o,l);if(h!==null){var g=On();Pr(h,o,l,g)}np(o,l)}},xv=function(){return dt},Ev=function(o,l){var h=dt;try{return dt=o,l()}finally{dt=h}},Hn=function(o,l,h){switch(l){case"input":if(_t(o,h),l=h.name,h.type==="radio"&&l!=null){for(h=o;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<h.length;l++){var g=h[l];if(g!==o&&g.form===o.form){var y=kc(g);if(!y)throw Error(n(90));Bt(g),_t(g,y)}}}break;case"textarea":ye(o,h);break;case"select":l=h.value,l!=null&&ot(o,!!h.multiple,l,!1)}},Ge=Qh,Xe=Fs;var Ok={usingClientEntryPoint:!1,Events:[zo,Da,kc,de,Ie,Qh]},el={findFiberByHostInstance:As,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Mk={bundleType:el.bundleType,version:el.version,rendererPackageName:el.rendererPackageName,rendererConfig:el.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:R.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=hv(o),o===null?null:o.stateNode},findFiberByHostInstance:el.findFiberByHostInstance||Ak,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fu.isDisabled&&fu.supportsFiber)try{cc=fu.inject(Mk),Wr=fu}catch{}}return Gn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ok,Gn.createPortal=function(o,l){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ip(l))throw Error(n(200));return kk(o,l,null,h)},Gn.createRoot=function(o,l){if(!ip(o))throw Error(n(299));var h=!1,g="",y=zb;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onRecoverableError!==void 0&&(y=l.onRecoverableError)),l=tp(o,1,!1,null,null,h,!1,g,y),o[ui]=l.current,Fo(o.nodeType===8?o.parentNode:o),new rp(l)},Gn.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(n(188)):(o=Object.keys(o).join(","),Error(n(268,o)));return o=hv(l),o=o===null?null:o.stateNode,o},Gn.flushSync=function(o){return Fs(o)},Gn.hydrate=function(o,l,h){if(!uu(l))throw Error(n(200));return du(null,o,l,!0,h)},Gn.hydrateRoot=function(o,l,h){if(!ip(o))throw Error(n(405));var g=h!=null&&h.hydratedSources||null,y=!1,S="",T=zb;if(h!=null&&(h.unstable_strictMode===!0&&(y=!0),h.identifierPrefix!==void 0&&(S=h.identifierPrefix),h.onRecoverableError!==void 0&&(T=h.onRecoverableError)),l=jb(l,null,o,1,h??null,y,!1,S,T),o[ui]=l.current,Fo(o),g)for(o=0;o<g.length;o++)h=g[o],y=h._getVersion,y=y(h._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[h,y]:l.mutableSourceEagerHydrationData.push(h,y);return new cu(l)},Gn.render=function(o,l,h){if(!uu(l))throw Error(n(200));return du(null,o,l,!1,h)},Gn.unmountComponentAtNode=function(o){if(!uu(o))throw Error(n(40));return o._reactRootContainer?(Fs(function(){du(null,null,o,!1,function(){o._reactRootContainer=null,o[ui]=null})}),!0):!1},Gn.unstable_batchedUpdates=Qh,Gn.unstable_renderSubtreeIntoContainer=function(o,l,h,g){if(!uu(h))throw Error(n(200));if(o==null||o._reactInternals===void 0)throw Error(n(38));return du(o,l,h,!1,g)},Gn.version="18.3.1-next-f1338f8080-20240426",Gn}var Qb;function kw(){if(Qb)return op.exports;Qb=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),op.exports=Hk(),op.exports}var Kb;function zk(){if(Kb)return hu;Kb=1;var t=kw();return hu.createRoot=t.createRoot,hu.hydrateRoot=t.hydrateRoot,hu}var Uk=zk();const Bk=Ud(Uk);/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Zb="popstate";function Wk(t={}){function e(r,i){let{pathname:s,search:a,hash:c}=r.location;return Zp("",{pathname:s,search:a,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Al(i)}return $k(e,n,null,t)}function Rt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function jr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Vk(){return Math.random().toString(36).substring(2,10)}function Xb(t,e){return{usr:t.state,key:t.key,idx:e}}function Zp(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?fo(e):e,state:n,key:e&&e.key||r||Vk()}}function Al({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function fo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function $k(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,c="POP",u=null,d=f();d==null&&(d=0,a.replaceState({...a.state,idx:d},""));function f(){return(a.state||{idx:null}).idx}function p(){c="POP";let w=f(),x=w==null?null:w-d;d=w,u&&u({action:c,location:_.location,delta:x})}function m(w,x){c="PUSH";let C=Zp(_.location,w,x);d=f()+1;let k=Xb(C,d),R=_.createHref(C);try{a.pushState(k,"",R)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;i.location.assign(R)}s&&u&&u({action:c,location:_.location,delta:1})}function v(w,x){c="REPLACE";let C=Zp(_.location,w,x);d=f();let k=Xb(C,d),R=_.createHref(C);a.replaceState(k,"",R),s&&u&&u({action:c,location:_.location,delta:0})}function b(w){return qk(w)}let _={get action(){return c},get location(){return t(i,a)},listen(w){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Zb,p),u=w,()=>{i.removeEventListener(Zb,p),u=null}},createHref(w){return e(i,w)},createURL:b,encodeLocation(w){let x=b(w);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:m,replace:v,go(w){return a.go(w)}};return _}function qk(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Rt(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Al(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function Aw(t,e,n="/"){return Gk(t,e,n,!1)}function Gk(t,e,n,r){let i=typeof e=="string"?fo(e):e,s=Pi(i.pathname||"/",n);if(s==null)return null;let a=Rw(t);Yk(a);let c=null;for(let u=0;c==null&&u<a.length;++u){let d=sA(s);c=rA(a[u],d,r)}return c}function Rw(t,e=[],n=[],r="",i=!1){let s=(a,c,u=i,d)=>{let f={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(r)&&u)return;Rt(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length)}let p=Ri([r,f.relativePath]),m=n.concat(f);a.children&&a.children.length>0&&(Rt(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),Rw(a.children,e,m,p,u)),!(a.path==null&&!a.index)&&e.push({path:p,score:tA(p,a.index),routesMeta:m})};return t.forEach((a,c)=>{if(a.path===""||!a.path?.includes("?"))s(a,c);else for(let u of Ow(a.path))s(a,c,!0,u)}),e}function Ow(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=Ow(r.join("/")),c=[];return c.push(...a.map(u=>u===""?s:[s,u].join("/"))),i&&c.push(...a),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function Yk(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:nA(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var Qk=/^:[\w-]+$/,Kk=3,Zk=2,Xk=1,Jk=10,eA=-2,Jb=t=>t==="*";function tA(t,e){let n=t.split("/"),r=n.length;return n.some(Jb)&&(r+=eA),e&&(r+=Zk),n.filter(i=>!Jb(i)).reduce((i,s)=>i+(Qk.test(s)?Kk:s===""?Xk:Jk),r)}function nA(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function rA(t,e,n=!1){let{routesMeta:r}=t,i={},s="/",a=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,f=s==="/"?e:e.slice(s.length)||"/",p=ad({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),m=u.route;if(!p&&d&&n&&!r[r.length-1].route.index&&(p=ad({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},f)),!p)return null;Object.assign(i,p.params),a.push({params:i,pathname:Ri([s,p.pathname]),pathnameBase:cA(Ri([s,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(s=Ri([s,p.pathnameBase]))}return a}function ad(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=iA(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((d,{paramName:f,isOptional:p},m)=>{if(f==="*"){let b=c[m]||"";a=s.slice(0,s.length-b.length).replace(/(.)\/+$/,"$1")}const v=c[m];return p&&!v?d[f]=void 0:d[f]=(v||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:a,pattern:t}}function iA(t,e=!1,n=!0){jr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function sA(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return jr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Pi(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function aA(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?fo(t):t;return{pathname:n?n.startsWith("/")?n:oA(n,e):e,search:uA(r),hash:dA(i)}}function oA(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function up(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function lA(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Wg(t){let e=lA(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function Vg(t,e,n,r=!1){let i;typeof t=="string"?i=fo(t):(i={...t},Rt(!i.pathname||!i.pathname.includes("?"),up("?","pathname","search",i)),Rt(!i.pathname||!i.pathname.includes("#"),up("#","pathname","hash",i)),Rt(!i.search||!i.search.includes("#"),up("#","search","hash",i)));let s=t===""||i.pathname==="",a=s?"/":i.pathname,c;if(a==null)c=n;else{let p=e.length-1;if(!r&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),p-=1;i.pathname=m.join("/")}c=p>=0?e[p]:"/"}let u=aA(i,c),d=a&&a!=="/"&&a.endsWith("/"),f=(s||a===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}var Ri=t=>t.join("/").replace(/\/\/+/g,"/"),cA=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),uA=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,dA=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function fA(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var Mw=["POST","PUT","PATCH","DELETE"];new Set(Mw);var hA=["GET",...Mw];new Set(hA);var ho=D.createContext(null);ho.displayName="DataRouter";var Bd=D.createContext(null);Bd.displayName="DataRouterState";D.createContext(!1);var Nw=D.createContext({isTransitioning:!1});Nw.displayName="ViewTransition";var pA=D.createContext(new Map);pA.displayName="Fetchers";var gA=D.createContext(null);gA.displayName="Await";var Ur=D.createContext(null);Ur.displayName="Navigation";var Gl=D.createContext(null);Gl.displayName="Location";var kr=D.createContext({outlet:null,matches:[],isDataRoute:!1});kr.displayName="Route";var $g=D.createContext(null);$g.displayName="RouteError";function mA(t,{relative:e}={}){Rt(po(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=D.useContext(Ur),{hash:i,pathname:s,search:a}=Yl(t,{relative:e}),c=s;return n!=="/"&&(c=s==="/"?n:Ri([n,s])),r.createHref({pathname:c,search:a,hash:i})}function po(){return D.useContext(Gl)!=null}function ji(){return Rt(po(),"useLocation() may be used only in the context of a <Router> component."),D.useContext(Gl).location}var Iw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Pw(t){D.useContext(Ur).static||D.useLayoutEffect(t)}function oi(){let{isDataRoute:t}=D.useContext(kr);return t?OA():vA()}function vA(){Rt(po(),"useNavigate() may be used only in the context of a <Router> component.");let t=D.useContext(ho),{basename:e,navigator:n}=D.useContext(Ur),{matches:r}=D.useContext(kr),{pathname:i}=ji(),s=JSON.stringify(Wg(r)),a=D.useRef(!1);return Pw(()=>{a.current=!0}),D.useCallback((u,d={})=>{if(jr(a.current,Iw),!a.current)return;if(typeof u=="number"){n.go(u);return}let f=Vg(u,JSON.parse(s),i,d.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Ri([e,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[e,n,s,i,t])}var yA=D.createContext(null);function bA(t){let e=D.useContext(kr).outlet;return D.useMemo(()=>e&&D.createElement(yA.Provider,{value:t},e),[e,t])}function Wd(){let{matches:t}=D.useContext(kr),e=t[t.length-1];return e?e.params:{}}function Yl(t,{relative:e}={}){let{matches:n}=D.useContext(kr),{pathname:r}=ji(),i=JSON.stringify(Wg(n));return D.useMemo(()=>Vg(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function _A(t,e){return Lw(t,e)}function Lw(t,e,n,r,i){Rt(po(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=D.useContext(Ur),{matches:a}=D.useContext(kr),c=a[a.length-1],u=c?c.params:{},d=c?c.pathname:"/",f=c?c.pathnameBase:"/",p=c&&c.route;{let C=p&&p.path||"";Fw(d,!p||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let m=ji(),v;if(e){let C=typeof e=="string"?fo(e):e;Rt(f==="/"||C.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${C.pathname}" was given in the \`location\` prop.`),v=C}else v=m;let b=v.pathname||"/",_=b;if(f!=="/"){let C=f.replace(/^\//,"").split("/");_="/"+b.replace(/^\//,"").split("/").slice(C.length).join("/")}let w=Aw(t,{pathname:_});jr(p||w!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),jr(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=CA(w&&w.map(C=>Object.assign({},C,{params:Object.assign({},u,C.params),pathname:Ri([f,s.encodeLocation?s.encodeLocation(C.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?f:Ri([f,s.encodeLocation?s.encodeLocation(C.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathnameBase])})),a,n,r,i);return e&&x?D.createElement(Gl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},x):x}function SA(){let t=RA(),e=fA(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=D.createElement(D.Fragment,null,D.createElement("p",null," Hey developer "),D.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",D.createElement("code",{style:s},"ErrorBoundary")," or"," ",D.createElement("code",{style:s},"errorElement")," prop on your route.")),D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:i},n):null,a)}var wA=D.createElement(SA,null),xA=class extends D.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?D.createElement(kr.Provider,{value:this.props.routeContext},D.createElement($g.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function EA({routeContext:t,match:e,children:n}){let r=D.useContext(ho);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),D.createElement(kr.Provider,{value:t},n)}function CA(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,a=n?.errors;if(a!=null){let d=s.findIndex(f=>f.route.id&&a?.[f.route.id]!==void 0);Rt(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,d+1))}let c=!1,u=-1;if(n)for(let d=0;d<s.length;d++){let f=s[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:p,errors:m}=n,v=f.route.loader&&!p.hasOwnProperty(f.route.id)&&(!m||m[f.route.id]===void 0);if(f.route.lazy||v){c=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}return s.reduceRight((d,f,p)=>{let m,v=!1,b=null,_=null;n&&(m=a&&f.route.id?a[f.route.id]:void 0,b=f.route.errorElement||wA,c&&(u<0&&p===0?(Fw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,_=null):u===p&&(v=!0,_=f.route.hydrateFallbackElement||null)));let w=e.concat(s.slice(0,p+1)),x=()=>{let C;return m?C=b:v?C=_:f.route.Component?C=D.createElement(f.route.Component,null):f.route.element?C=f.route.element:C=d,D.createElement(EA,{match:f,routeContext:{outlet:d,matches:w,isDataRoute:n!=null},children:C})};return n&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?D.createElement(xA,{location:n.location,revalidation:n.revalidation,component:b,error:m,children:x(),routeContext:{outlet:null,matches:w,isDataRoute:!0},unstable_onError:r}):x()},null)}function qg(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function TA(t){let e=D.useContext(ho);return Rt(e,qg(t)),e}function DA(t){let e=D.useContext(Bd);return Rt(e,qg(t)),e}function kA(t){let e=D.useContext(kr);return Rt(e,qg(t)),e}function Gg(t){let e=kA(t),n=e.matches[e.matches.length-1];return Rt(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function AA(){return Gg("useRouteId")}function RA(){let t=D.useContext($g),e=DA("useRouteError"),n=Gg("useRouteError");return t!==void 0?t:e.errors?.[n]}function OA(){let{router:t}=TA("useNavigate"),e=Gg("useNavigate"),n=D.useRef(!1);return Pw(()=>{n.current=!0}),D.useCallback(async(i,s={})=>{jr(n.current,Iw),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...s}))},[t,e])}var e0={};function Fw(t,e,n){!e&&!e0[t]&&(e0[t]=!0,jr(!1,n))}D.memo(MA);function MA({routes:t,future:e,state:n,unstable_onError:r}){return Lw(t,void 0,n,r,e)}function jw({to:t,replace:e,state:n,relative:r}){Rt(po(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=D.useContext(Ur);jr(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=D.useContext(kr),{pathname:a}=ji(),c=oi(),u=Vg(t,Wg(s),a,r==="path"),d=JSON.stringify(u);return D.useEffect(()=>{c(JSON.parse(d),{replace:e,state:n,relative:r})},[c,d,r,e,n]),null}function NA(t){return bA(t.context)}function tn(t){Rt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function IA({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){Rt(!po(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),c=D.useMemo(()=>({basename:a,navigator:i,static:s,future:{}}),[a,i,s]);typeof n=="string"&&(n=fo(n));let{pathname:u="/",search:d="",hash:f="",state:p=null,key:m="default"}=n,v=D.useMemo(()=>{let b=Pi(u,a);return b==null?null:{location:{pathname:b,search:d,hash:f,state:p,key:m},navigationType:r}},[a,u,d,f,p,m,r]);return jr(v!=null,`<Router basename="${a}"> is not able to match the URL "${u}${d}${f}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:D.createElement(Ur.Provider,{value:c},D.createElement(Gl.Provider,{children:e,value:v}))}function PA({children:t,location:e}){return _A(Xp(t),e)}function Xp(t,e=[]){let n=[];return D.Children.forEach(t,(r,i)=>{if(!D.isValidElement(r))return;let s=[...e,i];if(r.type===D.Fragment){n.push.apply(n,Xp(r.props.children,s));return}Rt(r.type===tn,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Rt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Xp(r.props.children,s)),n.push(a)}),n}var $u="get",qu="application/x-www-form-urlencoded";function Vd(t){return t!=null&&typeof t.tagName=="string"}function LA(t){return Vd(t)&&t.tagName.toLowerCase()==="button"}function FA(t){return Vd(t)&&t.tagName.toLowerCase()==="form"}function jA(t){return Vd(t)&&t.tagName.toLowerCase()==="input"}function HA(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function zA(t,e){return t.button===0&&(!e||e==="_self")&&!HA(t)}var pu=null;function UA(){if(pu===null)try{new FormData(document.createElement("form"),0),pu=!1}catch{pu=!0}return pu}var BA=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function dp(t){return t!=null&&!BA.has(t)?(jr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${qu}"`),null):t}function WA(t,e){let n,r,i,s,a;if(FA(t)){let c=t.getAttribute("action");r=c?Pi(c,e):null,n=t.getAttribute("method")||$u,i=dp(t.getAttribute("enctype"))||qu,s=new FormData(t)}else if(LA(t)||jA(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||c.getAttribute("action");if(r=u?Pi(u,e):null,n=t.getAttribute("formmethod")||c.getAttribute("method")||$u,i=dp(t.getAttribute("formenctype"))||dp(c.getAttribute("enctype"))||qu,s=new FormData(c,t),!UA()){let{name:d,type:f,value:p}=t;if(f==="image"){let m=d?`${d}.`:"";s.append(`${m}x`,"0"),s.append(`${m}y`,"0")}else d&&s.append(d,p)}}else{if(Vd(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=$u,r=null,i=qu,a=t}return s&&i==="text/plain"&&(a=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Yg(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function VA(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&Pi(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function $A(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function qA(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function GA(t,e,n){let r=await Promise.all(t.map(async i=>{let s=e.routes[i.route.id];if(s){let a=await $A(s,n);return a.links?a.links():[]}return[]}));return ZA(r.flat(1).filter(qA).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function t0(t,e,n,r,i,s){let a=(u,d)=>n[d]?u.route.id!==n[d].route.id:!0,c=(u,d)=>n[d].pathname!==u.pathname||n[d].route.path?.endsWith("*")&&n[d].params["*"]!==u.params["*"];return s==="assets"?e.filter((u,d)=>a(u,d)||c(u,d)):s==="data"?e.filter((u,d)=>{let f=r.routes[u.route.id];if(!f||!f.hasLoader)return!1;if(a(u,d)||c(u,d))return!0;if(u.route.shouldRevalidate){let p=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function YA(t,e,{includeHydrateFallback:n}={}){return QA(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function QA(t){return[...new Set(t)]}function KA(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function ZA(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let s=JSON.stringify(KA(i));return n.has(s)||(n.add(s),r.push({key:s,link:i})),r},[])}function Hw(){let t=D.useContext(ho);return Yg(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function XA(){let t=D.useContext(Bd);return Yg(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Qg=D.createContext(void 0);Qg.displayName="FrameworkContext";function zw(){let t=D.useContext(Qg);return Yg(t,"You must render this element inside a <HydratedRouter> element"),t}function JA(t,e){let n=D.useContext(Qg),[r,i]=D.useState(!1),[s,a]=D.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:d,onMouseLeave:f,onTouchStart:p}=e,m=D.useRef(null);D.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let _=x=>{x.forEach(C=>{a(C.isIntersecting)})},w=new IntersectionObserver(_,{threshold:.5});return m.current&&w.observe(m.current),()=>{w.disconnect()}}},[t]),D.useEffect(()=>{if(r){let _=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(_)}}},[r]);let v=()=>{i(!0)},b=()=>{i(!1),a(!1)};return n?t!=="intent"?[s,m,{}]:[s,m,{onFocus:nl(c,v),onBlur:nl(u,b),onMouseEnter:nl(d,v),onMouseLeave:nl(f,b),onTouchStart:nl(p,v)}]:[!1,m,{}]}function nl(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function eR({page:t,...e}){let{router:n}=Hw(),r=D.useMemo(()=>Aw(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?D.createElement(nR,{page:t,matches:r,...e}):null}function tR(t){let{manifest:e,routeModules:n}=zw(),[r,i]=D.useState([]);return D.useEffect(()=>{let s=!1;return GA(t,e,n).then(a=>{s||i(a)}),()=>{s=!0}},[t,e,n]),r}function nR({page:t,matches:e,...n}){let r=ji(),{manifest:i,routeModules:s}=zw(),{basename:a}=Hw(),{loaderData:c,matches:u}=XA(),d=D.useMemo(()=>t0(t,e,u,i,r,"data"),[t,e,u,i,r]),f=D.useMemo(()=>t0(t,e,u,i,r,"assets"),[t,e,u,i,r]),p=D.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let b=new Set,_=!1;if(e.forEach(x=>{let C=i.routes[x.route.id];!C||!C.hasLoader||(!d.some(k=>k.route.id===x.route.id)&&x.route.id in c&&s[x.route.id]?.shouldRevalidate||C.hasClientLoader?_=!0:b.add(x.route.id))}),b.size===0)return[];let w=VA(t,a,"data");return _&&b.size>0&&w.searchParams.set("_routes",e.filter(x=>b.has(x.route.id)).map(x=>x.route.id).join(",")),[w.pathname+w.search]},[a,c,r,i,d,e,t,s]),m=D.useMemo(()=>YA(f,i),[f,i]),v=tR(f);return D.createElement(D.Fragment,null,p.map(b=>D.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...n})),m.map(b=>D.createElement("link",{key:b,rel:"modulepreload",href:b,...n})),v.map(({key:b,link:_})=>D.createElement("link",{key:b,nonce:n.nonce,..._})))}function rR(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Uw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Uw&&(window.__reactRouterVersion="7.9.4")}catch{}function iR({basename:t,children:e,window:n}){let r=D.useRef();r.current==null&&(r.current=Wk({window:n,v5Compat:!0}));let i=r.current,[s,a]=D.useState({action:i.action,location:i.location}),c=D.useCallback(u=>{D.startTransition(()=>a(u))},[a]);return D.useLayoutEffect(()=>i.listen(c),[i,c]),D.createElement(IA,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:i})}var Bw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,or=D.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:a,state:c,target:u,to:d,preventScrollReset:f,viewTransition:p,...m},v){let{basename:b}=D.useContext(Ur),_=typeof d=="string"&&Bw.test(d),w,x=!1;if(typeof d=="string"&&_&&(w=d,Uw))try{let H=new URL(window.location.href),B=d.startsWith("//")?new URL(H.protocol+d):new URL(d),$=Pi(B.pathname,b);B.origin===H.origin&&$!=null?d=$+B.search+B.hash:x=!0}catch{jr(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let C=mA(d,{relative:i}),[k,R,A]=JA(r,m),M=lR(d,{replace:a,state:c,target:u,preventScrollReset:f,relative:i,viewTransition:p});function P(H){e&&e(H),H.defaultPrevented||M(H)}let O=D.createElement("a",{...m,...A,href:w||C,onClick:x||s?e:P,ref:rR(v,R),target:u,"data-discover":!_&&n==="render"?"true":void 0});return k&&!_?D.createElement(D.Fragment,null,O,D.createElement(eR,{page:C})):O});or.displayName="Link";var sR=D.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:a,viewTransition:c,children:u,...d},f){let p=Yl(a,{relative:d.relative}),m=ji(),v=D.useContext(Bd),{navigator:b,basename:_}=D.useContext(Ur),w=v!=null&&hR(p)&&c===!0,x=b.encodeLocation?b.encodeLocation(p).pathname:p.pathname,C=m.pathname,k=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;n||(C=C.toLowerCase(),k=k?k.toLowerCase():null,x=x.toLowerCase()),k&&_&&(k=Pi(k,_)||k);const R=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let A=C===x||!i&&C.startsWith(x)&&C.charAt(R)==="/",M=k!=null&&(k===x||!i&&k.startsWith(x)&&k.charAt(x.length)==="/"),P={isActive:A,isPending:M,isTransitioning:w},O=A?e:void 0,H;typeof r=="function"?H=r(P):H=[r,A?"active":null,M?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let B=typeof s=="function"?s(P):s;return D.createElement(or,{...d,"aria-current":O,className:H,ref:f,style:B,to:a,viewTransition:c},typeof u=="function"?u(P):u)});sR.displayName="NavLink";var aR=D.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:s,method:a=$u,action:c,onSubmit:u,relative:d,preventScrollReset:f,viewTransition:p,...m},v)=>{let b=dR(),_=fR(c,{relative:d}),w=a.toLowerCase()==="get"?"get":"post",x=typeof c=="string"&&Bw.test(c),C=k=>{if(u&&u(k),k.defaultPrevented)return;k.preventDefault();let R=k.nativeEvent.submitter,A=R?.getAttribute("formmethod")||a;b(R||k.currentTarget,{fetcherKey:e,method:A,navigate:n,replace:i,state:s,relative:d,preventScrollReset:f,viewTransition:p})};return D.createElement("form",{ref:v,method:w,action:_,onSubmit:r?u:C,...m,"data-discover":!x&&t==="render"?"true":void 0})});aR.displayName="Form";function oR(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ww(t){let e=D.useContext(ho);return Rt(e,oR(t)),e}function lR(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:a}={}){let c=oi(),u=ji(),d=Yl(t,{relative:s});return D.useCallback(f=>{if(zA(f,e)){f.preventDefault();let p=n!==void 0?n:Al(u)===Al(d);c(t,{replace:p,state:r,preventScrollReset:i,relative:s,viewTransition:a})}},[u,c,d,n,r,e,t,i,s,a])}var cR=0,uR=()=>`__${String(++cR)}__`;function dR(){let{router:t}=Ww("useSubmit"),{basename:e}=D.useContext(Ur),n=AA();return D.useCallback(async(r,i={})=>{let{action:s,method:a,encType:c,formData:u,body:d}=WA(r,e);if(i.navigate===!1){let f=i.fetcherKey||uR();await t.fetch(f,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:u,body:d,formMethod:i.method||a,formEncType:i.encType||c,flushSync:i.flushSync})}else await t.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:u,body:d,formMethod:i.method||a,formEncType:i.encType||c,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function fR(t,{relative:e}={}){let{basename:n}=D.useContext(Ur),r=D.useContext(kr);Rt(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...Yl(t||".",{relative:e})},a=ji();if(t==null){s.search=a.search;let c=new URLSearchParams(s.search),u=c.getAll("index");if(u.some(f=>f==="")){c.delete("index"),u.filter(p=>p).forEach(p=>c.append("index",p));let f=c.toString();s.search=f?`?${f}`:""}}return(!t||t===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Ri([n,s.pathname])),Al(s)}function hR(t,{relative:e}={}){let n=D.useContext(Nw);Rt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Ww("useViewTransitionState"),i=Yl(t,{relative:e});if(!n.isTransitioning)return!1;let s=Pi(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=Pi(n.nextLocation.pathname,r)||n.nextLocation.pathname;return ad(i.pathname,a)!=null||ad(i.pathname,s)!=null}var Ei=kw();const pR=Ud(Ei);var go=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},gR={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},mR=class{#e=gR;#t=!1;setTimeoutProvider(t){this.#e=t}setTimeout(t,e){return this.#e.setTimeout(t,e)}clearTimeout(t){this.#e.clearTimeout(t)}setInterval(t,e){return this.#e.setInterval(t,e)}clearInterval(t){this.#e.clearInterval(t)}},Xs=new mR;function vR(t){setTimeout(t,0)}var aa=typeof window>"u"||"Deno"in globalThis;function Mn(){}function yR(t,e){return typeof t=="function"?t(e):t}function Jp(t){return typeof t=="number"&&t>=0&&t!==1/0}function Vw(t,e){return Math.max(t+(e||0)-Date.now(),0)}function gs(t,e){return typeof t=="function"?t(e):t}function xr(t,e){return typeof t=="function"?t(e):t}function n0(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:a,stale:c}=t;if(a){if(r){if(e.queryHash!==Kg(a,e.options))return!1}else if(!Rl(e.queryKey,a))return!1}if(n!=="all"){const u=e.isActive();if(n==="active"&&!u||n==="inactive"&&u)return!1}return!(typeof c=="boolean"&&e.isStale()!==c||i&&i!==e.state.fetchStatus||s&&!s(e))}function r0(t,e){const{exact:n,status:r,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(oa(e.options.mutationKey)!==oa(s))return!1}else if(!Rl(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function Kg(t,e){return(e?.queryKeyHashFn||oa)(t)}function oa(t){return JSON.stringify(t,(e,n)=>eg(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function Rl(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Rl(t[n],e[n])):!1}var bR=Object.prototype.hasOwnProperty;function $w(t,e){if(t===e)return t;const n=i0(t)&&i0(e);if(!n&&!(eg(t)&&eg(e)))return e;const i=(n?t:Object.keys(t)).length,s=n?e:Object.keys(e),a=s.length,c=n?new Array(a):{};let u=0;for(let d=0;d<a;d++){const f=n?d:s[d],p=t[f],m=e[f];if(p===m){c[f]=p,(n?d<i:bR.call(t,f))&&u++;continue}if(p===null||m===null||typeof p!="object"||typeof m!="object"){c[f]=m;continue}const v=$w(p,m);c[f]=v,v===p&&u++}return i===a&&u===i?t:c}function od(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function i0(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function eg(t){if(!s0(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!s0(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function s0(t){return Object.prototype.toString.call(t)==="[object Object]"}function _R(t){return new Promise(e=>{Xs.setTimeout(e,t)})}function tg(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?$w(t,e):e}function SR(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function wR(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Zg=Symbol();function qw(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===Zg?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function Gw(t,e){return typeof t=="function"?t(...e):!!t}var xR=class extends go{#e;#t;#n;constructor(){super(),this.#n=t=>{if(!aa&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},Xg=new xR;function ng(){let t,e;const n=new Promise((i,s)=>{t=i,e=s});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}var ER=vR;function CR(){let t=[],e=0,n=c=>{c()},r=c=>{c()},i=ER;const s=c=>{e?t.push(c):i(()=>{n(c)})},a=()=>{const c=t;t=[],c.length&&i(()=>{r(()=>{c.forEach(u=>{n(u)})})})};return{batch:c=>{let u;e++;try{u=c()}finally{e--,e||a()}return u},batchCalls:c=>(...u)=>{s(()=>{c(...u)})},schedule:s,setNotifyFunction:c=>{n=c},setBatchNotifyFunction:c=>{r=c},setScheduler:c=>{i=c}}}var sn=CR(),TR=class extends go{#e=!0;#t;#n;constructor(){super(),this.#n=t=>{if(!aa&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(n=>{n(t)}))}isOnline(){return this.#e}},ld=new TR;function DR(t){return Math.min(1e3*2**t,3e4)}function Yw(t){return(t??"online")==="online"?ld.isOnline():!0}var rg=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function Qw(t){let e=!1,n=0,r;const i=ng(),s=()=>i.status!=="pending",a=_=>{if(!s()){const w=new rg(_);m(w),t.onCancel?.(w)}},c=()=>{e=!0},u=()=>{e=!1},d=()=>Xg.isFocused()&&(t.networkMode==="always"||ld.isOnline())&&t.canRun(),f=()=>Yw(t.networkMode)&&t.canRun(),p=_=>{s()||(r?.(),i.resolve(_))},m=_=>{s()||(r?.(),i.reject(_))},v=()=>new Promise(_=>{r=w=>{(s()||d())&&_(w)},t.onPause?.()}).then(()=>{r=void 0,s()||t.onContinue?.()}),b=()=>{if(s())return;let _;const w=n===0?t.initialPromise:void 0;try{_=w??t.fn()}catch(x){_=Promise.reject(x)}Promise.resolve(_).then(p).catch(x=>{if(s())return;const C=t.retry??(aa?0:3),k=t.retryDelay??DR,R=typeof k=="function"?k(n,x):k,A=C===!0||typeof C=="number"&&n<C||typeof C=="function"&&C(n,x);if(e||!A){m(x);return}n++,t.onFail?.(n,x),_R(R).then(()=>d()?void 0:v()).then(()=>{e?m(x):b()})})};return{promise:i,status:()=>i.status,cancel:a,continue:()=>(r?.(),i),cancelRetry:c,continueRetry:u,canStart:f,start:()=>(f()?b():v().then(b),i)}}var Kw=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Jp(this.gcTime)&&(this.#e=Xs.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(aa?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Xs.clearTimeout(this.#e),this.#e=void 0)}},kR=class extends Kw{#e;#t;#n;#i;#r;#a;#o;constructor(t){super(),this.#o=!1,this.#a=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#i=t.client,this.#n=this.#i.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=a0(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(t){if(this.options={...this.#a,...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const e=a0(this.options);e.data!==void 0&&(this.setData(e.data,{updatedAt:e.dataUpdatedAt,manual:!0}),this.#e=e)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(t,e){const n=tg(this.state.data,t,this.options);return this.#s({data:n,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),n}setState(t,e){this.#s({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#r?.promise;return this.#r?.cancel(t),e?e.then(Mn).catch(Mn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>xr(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Zg||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>gs(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Vw(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#r&&(this.#o?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}async fetch(t,e){if(this.state.fetchStatus!=="idle"&&this.#r?.status()!=="rejected"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(t&&this.setOptions(t),!this.options.queryFn){const c=this.observers.find(u=>u.options.queryFn);c&&this.setOptions(c.options)}const n=new AbortController,r=c=>{Object.defineProperty(c,"signal",{enumerable:!0,get:()=>(this.#o=!0,n.signal)})},i=()=>{const c=qw(this.options,e),d=(()=>{const f={client:this.#i,queryKey:this.queryKey,meta:this.meta};return r(f),f})();return this.#o=!1,this.options.persister?this.options.persister(c,d,this):c(d)},a=(()=>{const c={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#i,state:this.state,fetchFn:i};return r(c),c})();this.options.behavior?.onFetch(a,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==a.fetchOptions?.meta)&&this.#s({type:"fetch",meta:a.fetchOptions?.meta}),this.#r=Qw({initialPromise:e?.initialPromise,fn:a.fetchFn,onCancel:c=>{c instanceof rg&&c.revert&&this.setState({...this.#t,fetchStatus:"idle"}),n.abort()},onFail:(c,u)=>{this.#s({type:"failed",failureCount:c,error:u})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0});try{const c=await this.#r.start();if(c===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(c),this.#n.config.onSuccess?.(c,this),this.#n.config.onSettled?.(c,this.state.error,this),c}catch(c){if(c instanceof rg){if(c.silent)return this.#r.promise;if(c.revert){if(this.state.data===void 0)throw c;return this.state.data}}throw this.#s({type:"error",error:c}),this.#n.config.onError?.(c,this),this.#n.config.onSettled?.(this.state.data,c,this),c}finally{this.scheduleGc()}}#s(t){const e=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Zw(n.data,this.options),fetchMeta:t.meta??null};case"success":const r={...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=t.manual?r:void 0,r;case"error":const i=t.error;return{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=e(this.state),sn.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:t})})}};function Zw(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Yw(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function a0(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var AR=class extends go{constructor(t,e){super(),this.options=e,this.#e=t,this.#s=null,this.#o=ng(),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#n=void 0;#i=void 0;#r;#a;#o;#s;#g;#f;#h;#c;#u;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),o0(this.#t,this.options)?this.#d():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ig(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ig(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#_(),this.#S(),this.#t.removeObserver(this)}setOptions(t){const e=this.options,n=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof xr(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#w(),this.#t.setOptions(this.options),e._defaulted&&!od(this.options,e)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const r=this.hasListeners();r&&l0(this.#t,n,this.options,e)&&this.#d(),this.updateResult(),r&&(this.#t!==n||xr(this.options.enabled,this.#t)!==xr(e.enabled,this.#t)||gs(this.options.staleTime,this.#t)!==gs(e.staleTime,this.#t))&&this.#m();const i=this.#v();r&&(this.#t!==n||xr(this.options.enabled,this.#t)!==xr(e.enabled,this.#t)||i!==this.#l)&&this.#y(i)}getOptimisticResult(t){const e=this.#e.getQueryCache().build(this.#e,t),n=this.createResult(e,t);return OR(this,n)&&(this.#i=n,this.#a=this.options,this.#r=this.#t.state),n}getCurrentResult(){return this.#i}trackResult(t,e){return new Proxy(t,{get:(n,r)=>(this.trackProp(r),e?.(r),r==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#o.status==="pending"&&this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,r))})}trackProp(t){this.#p.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#e.defaultQueryOptions(t),n=this.#e.getQueryCache().build(this.#e,e);return n.fetch().then(()=>this.createResult(n,e))}fetch(t){return this.#d({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#i))}#d(t){this.#w();let e=this.#t.fetch(this.options,t);return t?.throwOnError||(e=e.catch(Mn)),e}#m(){this.#_();const t=gs(this.options.staleTime,this.#t);if(aa||this.#i.isStale||!Jp(t))return;const n=Vw(this.#i.dataUpdatedAt,t)+1;this.#c=Xs.setTimeout(()=>{this.#i.isStale||this.updateResult()},n)}#v(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#y(t){this.#S(),this.#l=t,!(aa||xr(this.options.enabled,this.#t)===!1||!Jp(this.#l)||this.#l===0)&&(this.#u=Xs.setInterval(()=>{(this.options.refetchIntervalInBackground||Xg.isFocused())&&this.#d()},this.#l))}#b(){this.#m(),this.#y(this.#v())}#_(){this.#c&&(Xs.clearTimeout(this.#c),this.#c=void 0)}#S(){this.#u&&(Xs.clearInterval(this.#u),this.#u=void 0)}createResult(t,e){const n=this.#t,r=this.options,i=this.#i,s=this.#r,a=this.#a,u=t!==n?t.state:this.#n,{state:d}=t;let f={...d},p=!1,m;if(e._optimisticResults){const O=this.hasListeners(),H=!O&&o0(t,e),B=O&&l0(t,n,e,r);(H||B)&&(f={...f,...Zw(d.data,t.options)}),e._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:v,errorUpdatedAt:b,status:_}=f;m=f.data;let w=!1;if(e.placeholderData!==void 0&&m===void 0&&_==="pending"){let O;i?.isPlaceholderData&&e.placeholderData===a?.placeholderData?(O=i.data,w=!0):O=typeof e.placeholderData=="function"?e.placeholderData(this.#h?.state.data,this.#h):e.placeholderData,O!==void 0&&(_="success",m=tg(i?.data,O,e),p=!0)}if(e.select&&m!==void 0&&!w)if(i&&m===s?.data&&e.select===this.#g)m=this.#f;else try{this.#g=e.select,m=e.select(m),m=tg(i?.data,m,e),this.#f=m,this.#s=null}catch(O){this.#s=O}this.#s&&(v=this.#s,m=this.#f,b=Date.now(),_="error");const x=f.fetchStatus==="fetching",C=_==="pending",k=_==="error",R=C&&x,A=m!==void 0,P={status:_,fetchStatus:f.fetchStatus,isPending:C,isSuccess:_==="success",isError:k,isInitialLoading:R,isLoading:R,data:m,dataUpdatedAt:f.dataUpdatedAt,error:v,errorUpdatedAt:b,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:x,isRefetching:x&&!C,isLoadingError:k&&!A,isPaused:f.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:k&&A,isStale:Jg(t,e),refetch:this.refetch,promise:this.#o,isEnabled:xr(e.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const O=$=>{P.status==="error"?$.reject(P.error):P.data!==void 0&&$.resolve(P.data)},H=()=>{const $=this.#o=P.promise=ng();O($)},B=this.#o;switch(B.status){case"pending":t.queryHash===n.queryHash&&O(B);break;case"fulfilled":(P.status==="error"||P.data!==B.value)&&H();break;case"rejected":(P.status!=="error"||P.error!==B.reason)&&H();break}}return P}updateResult(){const t=this.#i,e=this.createResult(this.#t,this.options);if(this.#r=this.#t.state,this.#a=this.options,this.#r.data!==void 0&&(this.#h=this.#t),od(e,t))return;this.#i=e;const n=()=>{if(!t)return!0;const{notifyOnChangeProps:r}=this.options,i=typeof r=="function"?r():r;if(i==="all"||!i&&!this.#p.size)return!0;const s=new Set(i??this.#p);return this.options.throwOnError&&s.add("error"),Object.keys(this.#i).some(a=>{const c=a;return this.#i[c]!==t[c]&&s.has(c)})};this.#x({listeners:n()})}#w(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const e=this.#t;this.#t=t,this.#n=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#x(t){sn.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(this.#i)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function RR(t,e){return xr(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function o0(t,e){return RR(t,e)||t.state.data!==void 0&&ig(t,e,e.refetchOnMount)}function ig(t,e,n){if(xr(e.enabled,t)!==!1&&gs(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&Jg(t,e)}return!1}function l0(t,e,n,r){return(t!==e||xr(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&Jg(t,n)}function Jg(t,e){return xr(e.enabled,t)!==!1&&t.isStaleByTime(gs(e.staleTime,t))}function OR(t,e){return!od(t.getCurrentResult(),e)}function c0(t){return{onFetch:(e,n)=>{const r=e.options,i=e.fetchOptions?.meta?.fetchMore?.direction,s=e.state.data?.pages||[],a=e.state.data?.pageParams||[];let c={pages:[],pageParams:[]},u=0;const d=async()=>{let f=!1;const p=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(e.signal.aborted?f=!0:e.signal.addEventListener("abort",()=>{f=!0}),e.signal)})},m=qw(e.options,e.fetchOptions),v=async(b,_,w)=>{if(f)return Promise.reject();if(_==null&&b.pages.length)return Promise.resolve(b);const C=(()=>{const M={client:e.client,queryKey:e.queryKey,pageParam:_,direction:w?"backward":"forward",meta:e.options.meta};return p(M),M})(),k=await m(C),{maxPages:R}=e.options,A=w?wR:SR;return{pages:A(b.pages,k,R),pageParams:A(b.pageParams,_,R)}};if(i&&s.length){const b=i==="backward",_=b?MR:u0,w={pages:s,pageParams:a},x=_(r,w);c=await v(w,x,b)}else{const b=t??s.length;do{const _=u===0?a[0]??r.initialPageParam:u0(r,c);if(u>0&&_==null)break;c=await v(c,_),u++}while(u<b)}return c};e.options.persister?e.fetchFn=()=>e.options.persister?.(d,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n):e.fetchFn=d}}}function u0(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function MR(t,{pages:e,pageParams:n}){return e.length>0?t.getPreviousPageParam?.(e[0],e,n[0],n):void 0}var NR=class extends Kw{#e;#t;#n;#i;constructor(t){super(),this.#e=t.client,this.mutationId=t.mutationId,this.#n=t.mutationCache,this.#t=[],this.state=t.state||Xw(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#t.includes(t)||(this.#t.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#t=this.#t.filter(e=>e!==t),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#i?.continue()??this.execute(this.state.variables)}async execute(t){const e=()=>{this.#r({type:"continue"})},n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#i=Qw({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(s,a)=>{this.#r({type:"failed",failureCount:s,error:a})},onPause:()=>{this.#r({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const r=this.state.status==="pending",i=!this.#i.canStart();try{if(r)e();else{this.#r({type:"pending",variables:t,isPaused:i}),await this.#n.config.onMutate?.(t,this,n);const a=await this.options.onMutate?.(t,n);a!==this.state.context&&this.#r({type:"pending",context:a,variables:t,isPaused:i})}const s=await this.#i.start();return await this.#n.config.onSuccess?.(s,t,this.state.context,this,n),await this.options.onSuccess?.(s,t,this.state.context,n),await this.#n.config.onSettled?.(s,null,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(s,null,t,this.state.context,n),this.#r({type:"success",data:s}),s}catch(s){try{throw await this.#n.config.onError?.(s,t,this.state.context,this,n),await this.options.onError?.(s,t,this.state.context,n),await this.#n.config.onSettled?.(void 0,s,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(void 0,s,t,this.state.context,n),s}finally{this.#r({type:"error",error:s})}}finally{this.#n.runNext(this)}}#r(t){const e=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),sn.batch(()=>{this.#t.forEach(n=>{n.onMutationUpdate(t)}),this.#n.notify({mutation:this,type:"updated",action:t})})}};function Xw(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var IR=class extends go{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(t,e,n){const r=new NR({client:t,mutationCache:this,mutationId:++this.#n,options:t.defaultMutationOptions(e),state:n});return this.add(r),r}add(t){this.#e.add(t);const e=gu(t);if(typeof e=="string"){const n=this.#t.get(e);n?n.push(t):this.#t.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const e=gu(t);if(typeof e=="string"){const n=this.#t.get(e);if(n)if(n.length>1){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}else n[0]===t&&this.#t.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=gu(t);if(typeof e=="string"){const r=this.#t.get(e)?.find(i=>i.state.status==="pending");return!r||r===t}else return!0}runNext(t){const e=gu(t);return typeof e=="string"?this.#t.get(e)?.find(r=>r!==t&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){sn.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const e={exact:!0,...t};return this.getAll().find(n=>r0(e,n))}findAll(t={}){return this.getAll().filter(e=>r0(t,e))}notify(t){sn.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return sn.batch(()=>Promise.all(t.map(e=>e.continue().catch(Mn))))}};function gu(t){return t.options.scope?.id}var PR=class extends go{#e;#t=void 0;#n;#i;constructor(e,n){super(),this.#e=e,this.setOptions(n),this.bindMethods(),this.#r()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const n=this.options;this.options=this.#e.defaultMutationOptions(e),od(this.options,n)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),n?.mutationKey&&this.options.mutationKey&&oa(n.mutationKey)!==oa(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(e){this.#r(),this.#a(e)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#r(),this.#a()}mutate(e,n){return this.#i=n,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(e)}#r(){const e=this.#n?.state??Xw();this.#t={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#a(e){sn.batch(()=>{if(this.#i&&this.hasListeners()){const n=this.#t.variables,r=this.#t.context,i={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};e?.type==="success"?(this.#i.onSuccess?.(e.data,n,r,i),this.#i.onSettled?.(e.data,null,n,r,i)):e?.type==="error"&&(this.#i.onError?.(e.error,n,r,i),this.#i.onSettled?.(void 0,e.error,n,r,i))}this.listeners.forEach(n=>{n(this.#t)})})}},LR=class extends go{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,n){const r=e.queryKey,i=e.queryHash??Kg(r,e);let s=this.get(i);return s||(s=new kR({client:t,queryKey:r,queryHash:i,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(r)}),this.add(s)),s}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){sn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(n=>n0(e,n))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(n=>n0(t,n)):e}notify(t){sn.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){sn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){sn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},FR=class{#e;#t;#n;#i;#r;#a;#o;#s;constructor(t={}){this.#e=t.queryCache||new LR,this.#t=t.mutationCache||new IR,this.#n=t.defaultOptions||{},this.#i=new Map,this.#r=new Map,this.#a=0}mount(){this.#a++,this.#a===1&&(this.#o=Xg.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#s=ld.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#a--,this.#a===0&&(this.#o?.(),this.#o=void 0,this.#s?.(),this.#s=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=this.#e.build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(gs(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=this.#e.get(r.queryHash)?.state.data,a=yR(e,s);if(a!==void 0)return this.#e.build(this,r).setData(a,{...n,manual:!0})}setQueriesData(t,e,n){return sn.batch(()=>this.#e.findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;sn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=this.#e;return sn.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=sn.batch(()=>this.#e.findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(Mn).catch(Mn)}invalidateQueries(t,e={}){return sn.batch(()=>(this.#e.findAll(t).forEach(n=>{n.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=sn.batch(()=>this.#e.findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,n);return n.throwOnError||(s=s.catch(Mn)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(Mn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=this.#e.build(this,e);return n.isStaleByTime(gs(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Mn).catch(Mn)}fetchInfiniteQuery(t){return t.behavior=c0(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Mn).catch(Mn)}ensureInfiniteQueryData(t){return t.behavior=c0(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return ld.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(t){this.#n=t}setQueryDefaults(t,e){this.#i.set(oa(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#i.values()],n={};return e.forEach(r=>{Rl(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){this.#r.set(oa(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#r.values()],n={};return e.forEach(r=>{Rl(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#n.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Kg(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Zg&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#n.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},Jw=D.createContext(void 0),tr=t=>{const e=D.useContext(Jw);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},jR=({client:t,children:e})=>(D.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),E.jsx(Jw.Provider,{value:t,children:e})),ex=D.createContext(!1),HR=()=>D.useContext(ex);ex.Provider;function zR(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var UR=D.createContext(zR()),BR=()=>D.useContext(UR),WR=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},VR=t=>{D.useEffect(()=>{t.clearReset()},[t])},$R=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:i})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(i&&t.data===void 0||Gw(n,[t.error,r])),qR=t=>{if(t.suspense){const n=i=>i==="static"?i:Math.max(i??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...i)=>n(r(...i)):n(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},GR=(t,e)=>t.isLoading&&t.isFetching&&!e,YR=(t,e)=>t?.suspense&&e.isPending,d0=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function QR(t,e,n){const r=HR(),i=BR(),s=tr(),a=s.defaultQueryOptions(t);s.getDefaultOptions().queries?._experimental_beforeQuery?.(a),a._optimisticResults=r?"isRestoring":"optimistic",qR(a),WR(a,i),VR(i);const c=!s.getQueryCache().get(a.queryHash),[u]=D.useState(()=>new e(s,a)),d=u.getOptimisticResult(a),f=!r&&t.subscribed!==!1;if(D.useSyncExternalStore(D.useCallback(p=>{const m=f?u.subscribe(sn.batchCalls(p)):Mn;return u.updateResult(),m},[u,f]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),D.useEffect(()=>{u.setOptions(a)},[a,u]),YR(a,d))throw d0(a,u,i);if($R({result:d,errorResetBoundary:i,throwOnError:a.throwOnError,query:s.getQueryCache().get(a.queryHash),suspense:a.suspense}))throw d.error;return s.getDefaultOptions().queries?._experimental_afterQuery?.(a,d),a.experimental_prefetchInRender&&!aa&&GR(d,r)&&(c?d0(a,u,i):s.getQueryCache().get(a.queryHash)?.promise)?.catch(Mn).finally(()=>{u.updateResult()}),a.notifyOnChangeProps?d:u.trackResult(d)}function fa(t,e){return QR(t,AR)}function Hi(t,e){const n=tr(),[r]=D.useState(()=>new PR(n,t));D.useEffect(()=>{r.setOptions(t)},[r,t]);const i=D.useSyncExternalStore(D.useCallback(a=>r.subscribe(sn.batchCalls(a)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),s=D.useCallback((a,c)=>{r.mutate(a,c).catch(Mn)},[r]);if(i.error&&Gw(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}function KR(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}const ZR=t=>{switch(t){case"success":return eO;case"info":return nO;case"warning":return tO;case"error":return rO;default:return null}},XR=Array(12).fill(0),JR=({visible:t,className:e})=>Q.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},Q.createElement("div",{className:"sonner-spinner"},XR.map((n,r)=>Q.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),eO=Q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Q.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),tO=Q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Q.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),nO=Q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Q.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),rO=Q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Q.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),iO=Q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Q.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Q.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),sO=()=>{const[t,e]=Q.useState(document.hidden);return Q.useEffect(()=>{const n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t};let sg=1;class aO{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;const{message:r,...i}=e,s=typeof e?.id=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:sg++,a=this.toasts.find(u=>u.id===s),c=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),a?this.toasts=this.toasts.map(u=>u.id===s?(this.publish({...u,...e,id:s,title:r}),{...u,...e,id:s,dismissible:c,title:r}):u):this.addToast({title:r,...i,dismissible:c,id:s}),s},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:e,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const i=Promise.resolve(e instanceof Function?e():e);let s=r!==void 0,a;const c=i.then(async d=>{if(a=["resolve",d],Q.isValidElement(d))s=!1,this.create({id:r,type:"default",message:d});else if(lO(d)&&!d.ok){s=!1;const p=typeof n.error=="function"?await n.error(`HTTP error! status: ${d.status}`):n.error,m=typeof n.description=="function"?await n.description(`HTTP error! status: ${d.status}`):n.description,b=typeof p=="object"&&!Q.isValidElement(p)?p:{message:p};this.create({id:r,type:"error",description:m,...b})}else if(d instanceof Error){s=!1;const p=typeof n.error=="function"?await n.error(d):n.error,m=typeof n.description=="function"?await n.description(d):n.description,b=typeof p=="object"&&!Q.isValidElement(p)?p:{message:p};this.create({id:r,type:"error",description:m,...b})}else if(n.success!==void 0){s=!1;const p=typeof n.success=="function"?await n.success(d):n.success,m=typeof n.description=="function"?await n.description(d):n.description,b=typeof p=="object"&&!Q.isValidElement(p)?p:{message:p};this.create({id:r,type:"success",description:m,...b})}}).catch(async d=>{if(a=["reject",d],n.error!==void 0){s=!1;const f=typeof n.error=="function"?await n.error(d):n.error,p=typeof n.description=="function"?await n.description(d):n.description,v=typeof f=="object"&&!Q.isValidElement(f)?f:{message:f};this.create({id:r,type:"error",description:p,...v})}}).finally(()=>{s&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),u=()=>new Promise((d,f)=>c.then(()=>a[0]==="reject"?f(a[1]):d(a[1])).catch(f));return typeof r!="string"&&typeof r!="number"?{unwrap:u}:Object.assign(r,{unwrap:u})},this.custom=(e,n)=>{const r=n?.id||sg++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Zn=new aO,oO=(t,e)=>{const n=e?.id||sg++;return Zn.addToast({title:t,...e,id:n}),n},lO=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",cO=oO,uO=()=>Zn.toasts,dO=()=>Zn.getActiveToasts();Object.assign(cO,{success:Zn.success,info:Zn.info,warning:Zn.warning,error:Zn.error,custom:Zn.custom,message:Zn.message,promise:Zn.promise,dismiss:Zn.dismiss,loading:Zn.loading},{getHistory:uO,getToasts:dO});KR("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function mu(t){return t.label!==void 0}const fO=3,hO="24px",pO="16px",f0=4e3,gO=356,mO=14,vO=45,yO=200;function Yr(...t){return t.filter(Boolean).join(" ")}function bO(t){const[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}const _O=t=>{var e,n,r,i,s,a,c,u,d;const{invert:f,toast:p,unstyled:m,interacting:v,setHeights:b,visibleToasts:_,heights:w,index:x,toasts:C,expanded:k,removeToast:R,defaultRichColors:A,closeButton:M,style:P,cancelButtonStyle:O,actionButtonStyle:H,className:B="",descriptionClassName:$="",duration:ee,position:re,gap:he,expandByDefault:pe,classNames:ie,icons:oe,closeButtonAriaLabel:K="Close toast"}=t,[q,Y]=Q.useState(null),[F,G]=Q.useState(null),[ne,le]=Q.useState(!1),[ue,ce]=Q.useState(!1),[Ee,se]=Q.useState(!1),[Me,He]=Q.useState(!1),[jt,Bt]=Q.useState(!1),[jn,ge]=Q.useState(0),[Pe,Ke]=Q.useState(0),_t=Q.useRef(p.duration||ee||f0),Zt=Q.useRef(null),We=Q.useRef(null),xe=x===0,ot=x+1<=_,Le=p.type,Z=p.dismissible!==!1,ye=p.className||"",Fe=p.descriptionClassName||"",Ne=Q.useMemo(()=>w.findIndex(de=>de.toastId===p.id)||0,[w,p.id]),be=Q.useMemo(()=>{var de;return(de=p.closeButton)!=null?de:M},[p.closeButton,M]),Se=Q.useMemo(()=>p.duration||ee||f0,[p.duration,ee]),Re=Q.useRef(0),ze=Q.useRef(0),Ue=Q.useRef(0),tt=Q.useRef(null),[ut,ur]=re.split("-"),gt=Q.useMemo(()=>w.reduce((de,Ie,Ge)=>Ge>=Ne?de:de+Ie.height,0),[w,Ne]),nt=sO(),Wt=p.invert||f,Be=Le==="loading";ze.current=Q.useMemo(()=>Ne*he+gt,[Ne,gt]),Q.useEffect(()=>{_t.current=Se},[Se]),Q.useEffect(()=>{le(!0)},[]),Q.useEffect(()=>{const de=We.current;if(de){const Ie=de.getBoundingClientRect().height;return Ke(Ie),b(Ge=>[{toastId:p.id,height:Ie,position:p.position},...Ge]),()=>b(Ge=>Ge.filter(Xe=>Xe.toastId!==p.id))}},[b,p.id]),Q.useLayoutEffect(()=>{if(!ne)return;const de=We.current,Ie=de.style.height;de.style.height="auto";const Ge=de.getBoundingClientRect().height;de.style.height=Ie,Ke(Ge),b(Xe=>Xe.find(lt=>lt.toastId===p.id)?Xe.map(lt=>lt.toastId===p.id?{...lt,height:Ge}:lt):[{toastId:p.id,height:Ge,position:p.position},...Xe])},[ne,p.title,p.description,b,p.id,p.jsx,p.action,p.cancel]);const qe=Q.useCallback(()=>{ce(!0),ge(ze.current),b(de=>de.filter(Ie=>Ie.toastId!==p.id)),setTimeout(()=>{R(p)},yO)},[p,R,b,ze]);Q.useEffect(()=>{if(p.promise&&Le==="loading"||p.duration===1/0||p.type==="loading")return;let de;return k||v||nt?(()=>{if(Ue.current<Re.current){const Xe=new Date().getTime()-Re.current;_t.current=_t.current-Xe}Ue.current=new Date().getTime()})():(()=>{_t.current!==1/0&&(Re.current=new Date().getTime(),de=setTimeout(()=>{p.onAutoClose==null||p.onAutoClose.call(p,p),qe()},_t.current))})(),()=>clearTimeout(de)},[k,v,p,Le,nt,qe]),Q.useEffect(()=>{p.delete&&(qe(),p.onDismiss==null||p.onDismiss.call(p,p))},[qe,p.delete]);function Hn(){var de;if(oe?.loading){var Ie;return Q.createElement("div",{className:Yr(ie?.loader,p==null||(Ie=p.classNames)==null?void 0:Ie.loader,"sonner-loader"),"data-visible":Le==="loading"},oe.loading)}return Q.createElement(JR,{className:Yr(ie?.loader,p==null||(de=p.classNames)==null?void 0:de.loader),visible:Le==="loading"})}const gn=p.icon||oe?.[Le]||ZR(Le);var Ze,Vt;return Q.createElement("li",{tabIndex:0,ref:We,className:Yr(B,ye,ie?.toast,p==null||(e=p.classNames)==null?void 0:e.toast,ie?.default,ie?.[Le],p==null||(n=p.classNames)==null?void 0:n[Le]),"data-sonner-toast":"","data-rich-colors":(Ze=p.richColors)!=null?Ze:A,"data-styled":!(p.jsx||p.unstyled||m),"data-mounted":ne,"data-promise":!!p.promise,"data-swiped":jt,"data-removed":ue,"data-visible":ot,"data-y-position":ut,"data-x-position":ur,"data-index":x,"data-front":xe,"data-swiping":Ee,"data-dismissible":Z,"data-type":Le,"data-invert":Wt,"data-swipe-out":Me,"data-swipe-direction":F,"data-expanded":!!(k||pe&&ne),"data-testid":p.testId,style:{"--index":x,"--toasts-before":x,"--z-index":C.length-x,"--offset":`${ue?jn:ze.current}px`,"--initial-height":pe?"auto":`${Pe}px`,...P,...p.style},onDragEnd:()=>{se(!1),Y(null),tt.current=null},onPointerDown:de=>{de.button!==2&&(Be||!Z||(Zt.current=new Date,ge(ze.current),de.target.setPointerCapture(de.pointerId),de.target.tagName!=="BUTTON"&&(se(!0),tt.current={x:de.clientX,y:de.clientY})))},onPointerUp:()=>{var de,Ie,Ge;if(Me||!Z)return;tt.current=null;const Xe=Number(((de=We.current)==null?void 0:de.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Ht=Number(((Ie=We.current)==null?void 0:Ie.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),lt=new Date().getTime()-((Ge=Zt.current)==null?void 0:Ge.getTime()),Oe=q==="x"?Xe:Ht,$t=Math.abs(Oe)/lt;if(Math.abs(Oe)>=vO||$t>.11){ge(ze.current),p.onDismiss==null||p.onDismiss.call(p,p),G(q==="x"?Xe>0?"right":"left":Ht>0?"down":"up"),qe(),He(!0);return}else{var mt,Ot;(mt=We.current)==null||mt.style.setProperty("--swipe-amount-x","0px"),(Ot=We.current)==null||Ot.style.setProperty("--swipe-amount-y","0px")}Bt(!1),se(!1),Y(null)},onPointerMove:de=>{var Ie,Ge,Xe;if(!tt.current||!Z||((Ie=window.getSelection())==null?void 0:Ie.toString().length)>0)return;const lt=de.clientY-tt.current.y,Oe=de.clientX-tt.current.x;var $t;const mt=($t=t.swipeDirections)!=null?$t:bO(re);!q&&(Math.abs(Oe)>1||Math.abs(lt)>1)&&Y(Math.abs(Oe)>Math.abs(lt)?"x":"y");let Ot={x:0,y:0};const zn=ln=>1/(1.5+Math.abs(ln)/20);if(q==="y"){if(mt.includes("top")||mt.includes("bottom"))if(mt.includes("top")&&lt<0||mt.includes("bottom")&&lt>0)Ot.y=lt;else{const ln=lt*zn(lt);Ot.y=Math.abs(ln)<Math.abs(lt)?ln:lt}}else if(q==="x"&&(mt.includes("left")||mt.includes("right")))if(mt.includes("left")&&Oe<0||mt.includes("right")&&Oe>0)Ot.x=Oe;else{const ln=Oe*zn(Oe);Ot.x=Math.abs(ln)<Math.abs(Oe)?ln:Oe}(Math.abs(Ot.x)>0||Math.abs(Ot.y)>0)&&Bt(!0),(Ge=We.current)==null||Ge.style.setProperty("--swipe-amount-x",`${Ot.x}px`),(Xe=We.current)==null||Xe.style.setProperty("--swipe-amount-y",`${Ot.y}px`)}},be&&!p.jsx&&Le!=="loading"?Q.createElement("button",{"aria-label":K,"data-disabled":Be,"data-close-button":!0,onClick:Be||!Z?()=>{}:()=>{qe(),p.onDismiss==null||p.onDismiss.call(p,p)},className:Yr(ie?.closeButton,p==null||(r=p.classNames)==null?void 0:r.closeButton)},(Vt=oe?.close)!=null?Vt:iO):null,(Le||p.icon||p.promise)&&p.icon!==null&&(oe?.[Le]!==null||p.icon)?Q.createElement("div",{"data-icon":"",className:Yr(ie?.icon,p==null||(i=p.classNames)==null?void 0:i.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||Hn():null,p.type!=="loading"?gn:null):null,Q.createElement("div",{"data-content":"",className:Yr(ie?.content,p==null||(s=p.classNames)==null?void 0:s.content)},Q.createElement("div",{"data-title":"",className:Yr(ie?.title,p==null||(a=p.classNames)==null?void 0:a.title)},p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title),p.description?Q.createElement("div",{"data-description":"",className:Yr($,Fe,ie?.description,p==null||(c=p.classNames)==null?void 0:c.description)},typeof p.description=="function"?p.description():p.description):null),Q.isValidElement(p.cancel)?p.cancel:p.cancel&&mu(p.cancel)?Q.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||O,onClick:de=>{mu(p.cancel)&&Z&&(p.cancel.onClick==null||p.cancel.onClick.call(p.cancel,de),qe())},className:Yr(ie?.cancelButton,p==null||(u=p.classNames)==null?void 0:u.cancelButton)},p.cancel.label):null,Q.isValidElement(p.action)?p.action:p.action&&mu(p.action)?Q.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||H,onClick:de=>{mu(p.action)&&(p.action.onClick==null||p.action.onClick.call(p.action,de),!de.defaultPrevented&&qe())},className:Yr(ie?.actionButton,p==null||(d=p.classNames)==null?void 0:d.actionButton)},p.action.label):null)};function h0(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function SO(t,e){const n={};return[t,e].forEach((r,i)=>{const s=i===1,a=s?"--mobile-offset":"--offset",c=s?pO:hO;function u(d){["top","right","bottom","left"].forEach(f=>{n[`${a}-${f}`]=typeof d=="number"?`${d}px`:d})}typeof r=="number"||typeof r=="string"?u(r):typeof r=="object"?["top","right","bottom","left"].forEach(d=>{r[d]===void 0?n[`${a}-${d}`]=c:n[`${a}-${d}`]=typeof r[d]=="number"?`${r[d]}px`:r[d]}):u(c)}),n}const wO=Q.forwardRef(function(e,n){const{id:r,invert:i,position:s="bottom-right",hotkey:a=["altKey","KeyT"],expand:c,closeButton:u,className:d,offset:f,mobileOffset:p,theme:m="light",richColors:v,duration:b,style:_,visibleToasts:w=fO,toastOptions:x,dir:C=h0(),gap:k=mO,icons:R,containerAriaLabel:A="Notifications"}=e,[M,P]=Q.useState([]),O=Q.useMemo(()=>r?M.filter(ne=>ne.toasterId===r):M.filter(ne=>!ne.toasterId),[M,r]),H=Q.useMemo(()=>Array.from(new Set([s].concat(O.filter(ne=>ne.position).map(ne=>ne.position)))),[O,s]),[B,$]=Q.useState([]),[ee,re]=Q.useState(!1),[he,pe]=Q.useState(!1),[ie,oe]=Q.useState(m!=="system"?m:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),K=Q.useRef(null),q=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),Y=Q.useRef(null),F=Q.useRef(!1),G=Q.useCallback(ne=>{P(le=>{var ue;return(ue=le.find(ce=>ce.id===ne.id))!=null&&ue.delete||Zn.dismiss(ne.id),le.filter(({id:ce})=>ce!==ne.id)})},[]);return Q.useEffect(()=>Zn.subscribe(ne=>{if(ne.dismiss){requestAnimationFrame(()=>{P(le=>le.map(ue=>ue.id===ne.id?{...ue,delete:!0}:ue))});return}setTimeout(()=>{pR.flushSync(()=>{P(le=>{const ue=le.findIndex(ce=>ce.id===ne.id);return ue!==-1?[...le.slice(0,ue),{...le[ue],...ne},...le.slice(ue+1)]:[ne,...le]})})})}),[M]),Q.useEffect(()=>{if(m!=="system"){oe(m);return}if(m==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?oe("dark"):oe("light")),typeof window>"u")return;const ne=window.matchMedia("(prefers-color-scheme: dark)");try{ne.addEventListener("change",({matches:le})=>{oe(le?"dark":"light")})}catch{ne.addListener(({matches:ue})=>{try{oe(ue?"dark":"light")}catch(ce){console.error(ce)}})}},[m]),Q.useEffect(()=>{M.length<=1&&re(!1)},[M]),Q.useEffect(()=>{const ne=le=>{var ue;if(a.every(se=>le[se]||le.code===se)){var Ee;re(!0),(Ee=K.current)==null||Ee.focus()}le.code==="Escape"&&(document.activeElement===K.current||(ue=K.current)!=null&&ue.contains(document.activeElement))&&re(!1)};return document.addEventListener("keydown",ne),()=>document.removeEventListener("keydown",ne)},[a]),Q.useEffect(()=>{if(K.current)return()=>{Y.current&&(Y.current.focus({preventScroll:!0}),Y.current=null,F.current=!1)}},[K.current]),Q.createElement("section",{ref:n,"aria-label":`${A} ${q}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},H.map((ne,le)=>{var ue;const[ce,Ee]=ne.split("-");return O.length?Q.createElement("ol",{key:ne,dir:C==="auto"?h0():C,tabIndex:-1,ref:K,className:d,"data-sonner-toaster":!0,"data-sonner-theme":ie,"data-y-position":ce,"data-x-position":Ee,style:{"--front-toast-height":`${((ue=B[0])==null?void 0:ue.height)||0}px`,"--width":`${gO}px`,"--gap":`${k}px`,..._,...SO(f,p)},onBlur:se=>{F.current&&!se.currentTarget.contains(se.relatedTarget)&&(F.current=!1,Y.current&&(Y.current.focus({preventScroll:!0}),Y.current=null))},onFocus:se=>{se.target instanceof HTMLElement&&se.target.dataset.dismissible==="false"||F.current||(F.current=!0,Y.current=se.relatedTarget)},onMouseEnter:()=>re(!0),onMouseMove:()=>re(!0),onMouseLeave:()=>{he||re(!1)},onDragEnd:()=>re(!1),onPointerDown:se=>{se.target instanceof HTMLElement&&se.target.dataset.dismissible==="false"||pe(!0)},onPointerUp:()=>pe(!1)},O.filter(se=>!se.position&&le===0||se.position===ne).map((se,Me)=>{var He,jt;return Q.createElement(_O,{key:se.id,icons:R,index:Me,toast:se,defaultRichColors:v,duration:(He=x?.duration)!=null?He:b,className:x?.className,descriptionClassName:x?.descriptionClassName,invert:i,visibleToasts:w,closeButton:(jt=x?.closeButton)!=null?jt:u,interacting:he,position:ne,style:x?.style,unstyled:x?.unstyled,classNames:x?.classNames,cancelButtonStyle:x?.cancelButtonStyle,actionButtonStyle:x?.actionButtonStyle,closeButtonAriaLabel:x?.closeButtonAriaLabel,removeToast:G,toasts:O.filter(Bt=>Bt.position==se.position),heights:B.filter(Bt=>Bt.position==se.position),setHeights:$,expandByDefault:c,gap:k,expanded:ee,swipeDirections:e.swipeDirections})})):null}))}),Ci=t=>{console.error("Error:",t),alert(`Error: ${t}`)},ha=t=>{console.log("Success:",t),alert(`Success: ${t}`)},dl=t=>{console.warn("Warning:",t),alert(`Warning: ${t}`)},xO=(t,e="info")=>{console.log(`${e.toUpperCase()}:`,t),alert(`${e.toUpperCase()}: ${t}`)},EO=t=>{console.error("Validation Error:",t),alert(`Validation Error: ${t}`)},Ks=t=>{console.error("API Error:",t);const e=t?.message||"An API error occurred";return Ci(e),{error:e}},Oi=({children:t,className:e="",disabled:n=!1,type:r="button",onClick:i,variant:s="default",size:a="default",...c})=>E.jsx("button",{type:r,disabled:n,onClick:i,className:`px-4 py-2 rounded bg-blue-500 text-white hover:bg-blue-600 disabled:opacity-50 ${e}`,...c,children:t}),ni=({className:t="",type:e="text",...n})=>E.jsx("input",{type:e,className:`flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${t}`,...n}),ri=({className:t="",...e})=>E.jsx("label",{className:`text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 ${t}`,...e}),vr=({className:t="",...e})=>E.jsx("div",{className:`rounded-lg border bg-card text-card-foreground shadow-sm ${t}`,...e}),yr=({className:t="",...e})=>E.jsx("div",{className:`flex flex-col space-y-1.5 p-6 ${t}`,...e}),br=({className:t="",...e})=>E.jsx("h3",{className:`text-2xl font-semibold leading-none tracking-tight ${t}`,...e}),_r=({className:t="",...e})=>E.jsx("div",{className:`p-6 pt-0 ${t}`,...e}),em=({data:t=[],columns:e=[],...n})=>E.jsx("div",{className:"rounded-md border",children:E.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"DataTable component not available - shared package removed"})}),pa=t=>({handleAsync:async(e,n={})=>{try{return await e()}catch(r){throw console.error(`Error in ${t}:`,r),n.onFinally&&n.onFinally(),r}}}),CO=()=>({isOpen:!1,toggle:()=>{},open:()=>{},close:()=>{}}),TO=({children:t,...e})=>E.jsx("div",{...e,children:t}),DO=()=>E.jsx("div",{className:"text-sm text-muted-foreground",children:"Theme Switch"});class kO extends Q.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,n){console.error("ErrorBoundary caught an error:",e,n)}render(){return this.state.hasError?E.jsx("div",{className:"flex items-center justify-center min-h-screen",children:E.jsxs("div",{className:"text-center",children:[E.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Something went wrong"}),E.jsx("p",{className:"text-muted-foreground",children:"Please refresh the page or contact support."})]})}):this.props.children}}const AO=({title:t,...e})=>E.jsx("header",{className:"border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:E.jsx("div",{className:"container flex h-14 items-center",children:E.jsx("h1",{className:"text-lg font-semibold",children:t||"Application"})})}),$d=({children:t,...e})=>E.jsxs("form",{className:"space-y-4",...e,children:[E.jsx("div",{className:"p-4 text-center text-muted-foreground border rounded",children:"GenericForm component not available - shared package removed"}),t]}),qd=t=>({items:[],loading:!1,error:null,fetchItems:()=>Promise.resolve([]),addItem:()=>Promise.resolve(),updateItem:()=>Promise.resolve(),deleteItem:()=>Promise.resolve()}),RO=()=>({theme:"light",sidebarOpen:!1,toggleSidebar:()=>{}});class OO{constructor(e){this.tableName=e}async getAll(){return[]}async getById(e){return null}async create(e){return e}async update(e,n){return n}async delete(e){return!0}}class K$ extends OO{}const Z$=t=>({useGetAll:()=>({data:[],loading:!1,error:null}),useGetById:()=>({data:null,loading:!1,error:null}),useCreate:()=>({mutate:()=>{},loading:!1}),useUpdate:()=>({mutate:()=>{},loading:!1}),useDelete:()=>({mutate:()=>{},loading:!1})}),MO=()=>({from:()=>({select:()=>({data:[],error:null}),insert:()=>({data:[],error:null}),update:()=>({data:[],error:null}),delete:()=>({data:[],error:null})})}),NO=t=>(console.error("Supabase error:",t),t),IO=({children:t,supabaseClient:e,...n})=>E.jsx("div",{...n,children:t}),PO=()=>({user:null,signIn:()=>Promise.resolve({error:null}),signUp:()=>Promise.resolve({error:null}),signOut:()=>Promise.resolve(),loading:!1,error:null}),It={},Je={ZANICA:"Zanica",BUSTO_GAROLFO:"Busto Garolfo",BOTH:"Both Centers"},Ti={MAINTENANCE:"maintenance"},Ba={},Wa={},p0={},X$=t=>{if(!t)return"";try{return new Date(t).toLocaleDateString()}catch{return t.toString()}},Ut=MO(),en=NO,LO=({children:t})=>E.jsx(IO,{supabaseClient:Ut,children:t}),Gd=PO;function FO(){const t=ji(),[e,n]=D.useState({backlog:t.pathname.startsWith("/backlog"),machinery:t.pathname.startsWith("/machinery"),phases:t.pathname.startsWith("/phases"),scheduler:t.pathname.startsWith("/scheduler")});return E.jsxs("nav",{className:"w-64 bg-secondary shadow-sm border-r border-border h-screen flex flex-col",children:[E.jsx("div",{className:"p-4 border-b border-border",children:E.jsx(or,{to:"/login",className:"flex items-center justify-center",children:E.jsx("span",{className:"text-xl font-bold text-primary",children:"SCHEDULER"})})}),E.jsxs("div",{className:"flex-1 p-4",children:[E.jsx("h3",{className:"text-xs font-semibold text-secondary-foreground uppercase tracking-wider mb-4",children:"NAVIGATION"}),E.jsxs("div",{className:"space-y-2",children:[E.jsx(or,{to:"/login",className:"flex items-center space-x-3 px-3 py-2 rounded-lg text-muted-foreground hover:text-foreground hover:bg-accent transition-colors",children:E.jsx("span",{className:"font-medium",children:"Accedi"})}),E.jsx(or,{to:"/signup",className:"flex items-center space-x-3 px-3 py-2 rounded-lg text-muted-foreground hover:text-foreground hover:bg-accent transition-colors",children:E.jsx("span",{className:"font-medium",children:"Registrati"})})]})]})]})}function jO(){const{user:t,signOut:e}=Gd(),{toggle:n}=CO();return E.jsx(AO,{title:"Scheduler Demo",user:{name:"User",email:t?.email,avatar:t?.avatar_url},onLogout:()=>e(),onRefresh:()=>window.location.reload(),onToggleSidebar:n,rightContent:E.jsx(DO,{})})}const tm=qd(),cd=qd(),HO=qd(),bn=RO(),xs=qd(),zO="modulepreload",UO=function(t){return"/scheduler_demo/"+t},g0={},Ol=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let u=function(d){return Promise.all(d.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=a?.nonce||a?.getAttribute("nonce");i=u(n.map(d=>{if(d=UO(d),d in g0)return;g0[d]=!0;const f=d.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${p}`))return;const m=document.createElement("link");if(m.rel=f?"stylesheet":zO,f||(m.as="script"),m.crossOrigin="",m.href=d,c&&m.setAttribute("nonce",c),document.head.appendChild(m),f)return new Promise((v,b)=>{m.addEventListener("load",v),m.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${d}`)))})}))}function s(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return i.then(a=>{for(const c of a||[])c.status==="rejected"&&s(c.reason);return e().catch(s)})},m0=t=>{let e;const n=new Set,r=(d,f)=>{const p=typeof d=="function"?d(e):d;if(!Object.is(p,e)){const m=e;e=f??(typeof p!="object"||p===null)?p:Object.assign({},e,p),n.forEach(v=>v(e,m))}},i=()=>e,c={setState:r,getState:i,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d))},u=e=t(r,i,c);return c},BO=(t=>t?m0(t):m0),WO=t=>t;function VO(t,e=WO){const n=Q.useSyncExternalStore(t.subscribe,Q.useCallback(()=>e(t.getState()),[t,e]),Q.useCallback(()=>e(t.getInitialState()),[t,e]));return Q.useDebugValue(n),n}const v0=t=>{const e=BO(t),n=r=>VO(e,r);return Object.assign(n,e),n},Ql=(t=>t?v0(t):v0),$O={APP:{FIRST_DAY_OF_WEEK:1}},qO=Object.prototype.toString;function GO(t,e){return qO.call(t)===`[object ${e}]`}function tx(t){return GO(t,"Object")}function nm(t){return!!(t&&t.then&&typeof t.then=="function")}function YO(t){return typeof t=="number"&&t!==t}function vu(t){return t&&t.Math==Math?t:void 0}const yn=typeof globalThis=="object"&&vu(globalThis)||typeof window=="object"&&vu(window)||typeof self=="object"&&vu(self)||typeof global=="object"&&vu(global)||(function(){return this})()||{};function nx(t,e,n){const r=n||yn,i=r.__SENTRY__=r.__SENTRY__||{};return i[t]||(i[t]=e())}const rx=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,QO="Sentry Logger ",y0=["debug","info","warn","error","log","assert","trace"],b0={};function ix(t){if(!("console"in yn))return t();const e=yn.console,n={},r=Object.keys(b0);r.forEach(i=>{const s=b0[i];n[i]=e[i],e[i]=s});try{return t()}finally{r.forEach(i=>{e[i]=n[i]})}}function KO(){let t=!1;const e={enable:()=>{t=!0},disable:()=>{t=!1},isEnabled:()=>t};return rx?y0.forEach(n=>{e[n]=(...r)=>{t&&ix(()=>{yn.console[n](`${QO}[${n}]:`,...r)})}}):y0.forEach(n=>{e[n]=()=>{}}),e}const Lt=KO();function Lr(t){return ag(t,new Map)}function ag(t,e){if(ZO(t)){const n=e.get(t);if(n!==void 0)return n;const r={};e.set(t,r);for(const i of Object.keys(t))typeof t[i]<"u"&&(r[i]=ag(t[i],e));return r}if(Array.isArray(t)){const n=e.get(t);if(n!==void 0)return n;const r=[];return e.set(t,r),t.forEach(i=>{r.push(ag(i,e))}),r}return t}function ZO(t){if(!tx(t))return!1;try{const e=Object.getPrototypeOf(t).constructor.name;return!e||e==="Object"}catch{return!0}}const fp="<anonymous>";function XO(t){try{return!t||typeof t!="function"?fp:t.name||fp}catch{return fp}}const Gu={},_0={};function sx(t,e){Gu[t]=Gu[t]||[],Gu[t].push(e)}function ax(t,e){_0[t]||(e(),_0[t]=!0)}function ox(t,e){const n=t&&Gu[t];if(n)for(const r of n)try{r(e)}catch(i){rx&&Lt.error(`Error while triggering instrumentation handler.
Type: ${t}
Name: ${XO(r)}
Error:`,i)}}function er(){const t=yn,e=t.crypto||t.msCrypto;let n=()=>Math.random()*16;try{if(e&&e.randomUUID)return e.randomUUID().replace(/-/g,"");e&&e.getRandomValues&&(n=()=>{const r=new Uint8Array(1);return e.getRandomValues(r),r[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,r=>(r^(n()&15)>>r/4).toString(16))}function JO(t){return Array.isArray(t)?t:[t]}let yu=null;function eM(t){const e="error";sx(e,t),ax(e,tM)}function tM(){yu=yn.onerror,yn.onerror=function(t,e,n,r,i){return ox("error",{column:r,error:i,line:n,msg:t,url:e}),yu&&!yu.__SENTRY_LOADER__?yu.apply(this,arguments):!1},yn.onerror.__SENTRY_INSTRUMENTED__=!0}let bu=null;function nM(t){const e="unhandledrejection";sx(e,t),ax(e,rM)}function rM(){bu=yn.onunhandledrejection,yn.onunhandledrejection=function(t){return ox("unhandledrejection",t),bu&&!bu.__SENTRY_LOADER__?bu.apply(this,arguments):!0},yn.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}function iM(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function sM(){return!iM()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function Js(t,e){return t.require(e)}function aM(t){let e;try{e=Js(module,t)}catch{}try{const{cwd:n}=Js(module,"process");e=Js(module,`${n()}/node_modules/${t}`)}catch{}return e}var wi;(function(t){t[t.PENDING=0]="PENDING";const n=1;t[t.RESOLVED=n]="RESOLVED";const r=2;t[t.REJECTED=r]="REJECTED"})(wi||(wi={}));class ls{constructor(e){ls.prototype.__init.call(this),ls.prototype.__init2.call(this),ls.prototype.__init3.call(this),ls.prototype.__init4.call(this),this._state=wi.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(n){this._reject(n)}}then(e,n){return new ls((r,i)=>{this._handlers.push([!1,s=>{if(!e)r(s);else try{r(e(s))}catch(a){i(a)}},s=>{if(!n)i(s);else try{r(n(s))}catch(a){i(a)}}]),this._executeHandlers()})}catch(e){return this.then(n=>n,e)}finally(e){return new ls((n,r)=>{let i,s;return this.then(a=>{s=!1,i=a,e&&e()},a=>{s=!0,i=a,e&&e()}).then(()=>{if(s){r(i);return}n(i)})})}__init(){this._resolve=e=>{this._setResult(wi.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(wi.REJECTED,e)}}__init3(){this._setResult=(e,n)=>{if(this._state===wi.PENDING){if(nm(n)){n.then(this._resolve,this._reject);return}this._state=e,this._value=n,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===wi.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach(n=>{n[0]||(this._state===wi.RESOLVED&&n[1](this._value),this._state===wi.REJECTED&&n[2](this._value),n[0]=!0)})}}}const lx=1e3;function rm(){return Date.now()/lx}function oM(){const{performance:t}=yn;if(!t||!t.now)return rm;const e=Date.now()-t.now(),n=t.timeOrigin==null?e:t.timeOrigin;return()=>(n+t.now())/lx}const Yd=oM();(()=>{const{performance:t}=yn;if(!t||!t.now)return;const e=3600*1e3,n=t.now(),r=Date.now(),i=t.timeOrigin?Math.abs(t.timeOrigin+n-r):e,s=i<e,a=t.timing&&t.timing.navigationStart,u=typeof a=="number"?Math.abs(a+n-r):e,d=u<e;return s||d?i<=u?t.timeOrigin:a:r})();function lM(t=er(),e=er().substring(16),n){let r="";return n!==void 0&&(r=n?"-1":"-0"),`${t}-${e}${r}`}const hn=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,cx="production";function cM(){return nx("globalEventProcessors",()=>[])}function og(t,e,n,r=0){return new ls((i,s)=>{const a=t[r];if(e===null||typeof a!="function")i(e);else{const c=a({...e},n);hn&&a.id&&c===null&&Lt.log(`Event processor "${a.id}" dropped event`),nm(c)?c.then(u=>og(t,u,n,r+1).then(i)).then(null,s):og(t,c,n,r+1).then(i).then(null,s)}})}function uM(t){const e=Yd(),n={sid:er(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>fM(n)};return t&&Qd(n,t),n}function Qd(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),!t.did&&!e.did&&(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||Yd(),e.abnormal_mechanism&&(t.abnormal_mechanism=e.abnormal_mechanism),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=e.sid.length===32?e.sid:er()),e.init!==void 0&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),typeof e.started=="number"&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if(typeof e.duration=="number")t.duration=e.duration;else{const n=t.timestamp-t.started;t.duration=n>=0?n:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),typeof e.errors=="number"&&(t.errors=e.errors),e.status&&(t.status=e.status)}function dM(t,e){let n={};t.status==="ok"&&(n={status:"exited"}),Qd(t,n)}function fM(t){return Lr({sid:`${t.sid}`,init:t.init,started:new Date(t.started*1e3).toISOString(),timestamp:new Date(t.timestamp*1e3).toISOString(),status:t.status,errors:t.errors,did:typeof t.did=="number"||typeof t.did=="string"?`${t.did}`:void 0,duration:t.duration,abnormal_mechanism:t.abnormal_mechanism,attrs:{release:t.release,environment:t.environment,ip_address:t.ipAddress,user_agent:t.userAgent}})}const hM=0,ux=1;function im(t){const{spanId:e,traceId:n}=t.spanContext(),{data:r,op:i,parent_span_id:s,status:a,tags:c,origin:u}=ys(t);return Lr({data:r,op:i,parent_span_id:s,span_id:e,status:a,tags:c,trace_id:n,origin:u})}function dx(t){const{traceId:e,spanId:n}=t.spanContext(),r=hx(t);return lM(e,n,r)}function fx(t){return typeof t=="number"?S0(t):Array.isArray(t)?t[0]+t[1]/1e9:t instanceof Date?S0(t.getTime()):Yd()}function S0(t){return t>9999999999?t/1e3:t}function ys(t){return pM(t)?t.getSpanJSON():typeof t.toJSON=="function"?t.toJSON():{}}function pM(t){return typeof t.getSpanJSON=="function"}function hx(t){const{traceFlags:e}=t.spanContext();return!!(e&ux)}function px(){return Kd().getClient()}function gM(){return Kd().getScope()}function ud(t){return t.transaction}function mM(t,e,n){const r=e.getOptions(),{publicKey:i}=e.getDsn()||{},{segment:s}=n&&n.getUser()||{},a=Lr({environment:r.environment||cx,release:r.release,user_segment:s,public_key:i,trace_id:t});return e.emit&&e.emit("createDsc",a),a}function lg(t){const e=px();if(!e)return{};const n=mM(ys(t).trace_id||"",e,gM()),r=ud(t);if(!r)return n;const i=r&&r._frozenDynamicSamplingContext;if(i)return i;const{sampleRate:s,source:a}=r.metadata;s!=null&&(n.sample_rate=`${s}`);const c=ys(r);return a&&a!=="url"&&(n.transaction=c.description),n.sampled=String(hx(r)),e.emit&&e.emit("createDsc",n),n}function vM(t,e){const{fingerprint:n,span:r,breadcrumbs:i,sdkProcessingMetadata:s}=e;yM(t,e),r&&SM(t,r),wM(t,n),bM(t,i),_M(t,s)}function yM(t,e){const{extra:n,tags:r,user:i,contexts:s,level:a,transactionName:c}=e,u=Lr(n);u&&Object.keys(u).length&&(t.extra={...u,...t.extra});const d=Lr(r);d&&Object.keys(d).length&&(t.tags={...d,...t.tags});const f=Lr(i);f&&Object.keys(f).length&&(t.user={...f,...t.user});const p=Lr(s);p&&Object.keys(p).length&&(t.contexts={...p,...t.contexts}),a&&(t.level=a),c&&(t.transaction=c)}function bM(t,e){const n=[...t.breadcrumbs||[],...e];t.breadcrumbs=n.length?n:void 0}function _M(t,e){t.sdkProcessingMetadata={...t.sdkProcessingMetadata,...e}}function SM(t,e){t.contexts={trace:im(e),...t.contexts};const n=ud(e);if(n){t.sdkProcessingMetadata={dynamicSamplingContext:lg(e),...t.sdkProcessingMetadata};const r=ys(n).description;r&&(t.tags={transaction:r,...t.tags})}}function wM(t,e){t.fingerprint=t.fingerprint?JO(t.fingerprint):[],e&&(t.fingerprint=t.fingerprint.concat(e)),t.fingerprint&&!t.fingerprint.length&&delete t.fingerprint}const xM=100;class Xa{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=w0()}static clone(e){return e?e.clone():new Xa}clone(){const e=new Xa;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},e._user=this._user,e._level=this._level,e._span=this._span,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e}setClient(e){this._client=e}getClient(){return this._client}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&Qd(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,n){return this._tags={...this._tags,[e]:n},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,n){return this._extra={...this._extra,[e]:n},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,n){return n===null?delete this._contexts[e]:this._contexts[e]=n,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this._span;return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const n=typeof e=="function"?e(this):e;if(n instanceof Xa){const r=n.getScopeData();this._tags={...this._tags,...r.tags},this._extra={...this._extra,...r.extra},this._contexts={...this._contexts,...r.contexts},r.user&&Object.keys(r.user).length&&(this._user=r.user),r.level&&(this._level=r.level),r.fingerprint.length&&(this._fingerprint=r.fingerprint),n.getRequestSession()&&(this._requestSession=n.getRequestSession()),r.propagationContext&&(this._propagationContext=r.propagationContext)}else if(tx(n)){const r=e;this._tags={...this._tags,...r.tags},this._extra={...this._extra,...r.extra},this._contexts={...this._contexts,...r.contexts},r.user&&(this._user=r.user),r.level&&(this._level=r.level),r.fingerprint&&(this._fingerprint=r.fingerprint),r.requestSession&&(this._requestSession=r.requestSession),r.propagationContext&&(this._propagationContext=r.propagationContext)}return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=w0(),this}addBreadcrumb(e,n){const r=typeof n=="number"?n:xM;if(r<=0)return this;const i={timestamp:rm(),...e},s=this._breadcrumbs;return s.push(i),this._breadcrumbs=s.length>r?s.slice(-r):s,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){const{_breadcrumbs:e,_attachments:n,_contexts:r,_tags:i,_extra:s,_user:a,_level:c,_fingerprint:u,_eventProcessors:d,_propagationContext:f,_sdkProcessingMetadata:p,_transactionName:m,_span:v}=this;return{breadcrumbs:e,attachments:n,contexts:r,tags:i,extra:s,user:a,level:c,fingerprint:u||[],eventProcessors:d,propagationContext:f,sdkProcessingMetadata:p,transactionName:m,span:v}}applyToEvent(e,n={},r=[]){vM(e,this.getScopeData());const i=[...r,...cM(),...this._eventProcessors];return og(i,e,n)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,n){const r=n&&n.event_id?n.event_id:er();if(!this._client)return Lt.warn("No client configured on scope - will not capture exception!"),r;const i=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:i,...n,event_id:r},this),r}captureMessage(e,n,r){const i=r&&r.event_id?r.event_id:er();if(!this._client)return Lt.warn("No client configured on scope - will not capture message!"),i;const s=new Error(e);return this._client.captureMessage(e,n,{originalException:e,syntheticException:s,...r,event_id:i},this),i}captureEvent(e,n){const r=n&&n.event_id?n.event_id:er();return this._client?(this._client.captureEvent(e,{...n,event_id:r},this),r):(Lt.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}function w0(){return{traceId:er(),spanId:er().substring(16)}}const EM="7.120.4",gx=parseFloat(EM),CM=100;class mx{constructor(e,n,r,i=gx){this._version=i;let s;n?s=n:(s=new Xa,s.setClient(e));let a;r?a=r:(a=new Xa,a.setClient(e)),this._stack=[{scope:s}],e&&this.bindClient(e),this._isolationScope=a}isOlderThan(e){return this._version<e}bindClient(e){const n=this.getStackTop();n.client=e,n.scope.setClient(e),e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return this.getStack().length<=1?!1:!!this.getStack().pop()}withScope(e){const n=this.pushScope();let r;try{r=e(n)}catch(i){throw this.popScope(),i}return nm(r)?r.then(i=>(this.popScope(),i),i=>{throw this.popScope(),i}):(this.popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,n){const r=this._lastEventId=n&&n.event_id?n.event_id:er(),i=new Error("Sentry syntheticException");return this.getScope().captureException(e,{originalException:e,syntheticException:i,...n,event_id:r}),r}captureMessage(e,n,r){const i=this._lastEventId=r&&r.event_id?r.event_id:er(),s=new Error(e);return this.getScope().captureMessage(e,n,{originalException:e,syntheticException:s,...r,event_id:i}),i}captureEvent(e,n){const r=n&&n.event_id?n.event_id:er();return e.type||(this._lastEventId=r),this.getScope().captureEvent(e,{...n,event_id:r}),r}lastEventId(){return this._lastEventId}addBreadcrumb(e,n){const{scope:r,client:i}=this.getStackTop();if(!i)return;const{beforeBreadcrumb:s=null,maxBreadcrumbs:a=CM}=i.getOptions&&i.getOptions()||{};if(a<=0)return;const u={timestamp:rm(),...e},d=s?ix(()=>s(u,n)):u;d!==null&&(i.emit&&i.emit("beforeAddBreadcrumb",d,n),r.addBreadcrumb(d,a))}setUser(e){this.getScope().setUser(e),this.getIsolationScope().setUser(e)}setTags(e){this.getScope().setTags(e),this.getIsolationScope().setTags(e)}setExtras(e){this.getScope().setExtras(e),this.getIsolationScope().setExtras(e)}setTag(e,n){this.getScope().setTag(e,n),this.getIsolationScope().setTag(e,n)}setExtra(e,n){this.getScope().setExtra(e,n),this.getIsolationScope().setExtra(e,n)}setContext(e,n){this.getScope().setContext(e,n),this.getIsolationScope().setContext(e,n)}configureScope(e){const{scope:n,client:r}=this.getStackTop();r&&e(n)}run(e){const n=x0(this);try{e(this)}finally{x0(n)}}getIntegration(e){const n=this.getClient();if(!n)return null;try{return n.getIntegration(e)}catch{return hn&&Lt.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,n){const r=this._callExtensionMethod("startTransaction",e,n);return hn&&!r&&(this.getClient()?Lt.warn(`Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':
Sentry.addTracingExtensions();
Sentry.init({...});
`):Lt.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")),r}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){const n=this.getStackTop().scope,r=n.getSession();r&&dM(r),this._sendSessionUpdate(),n.setSession()}startSession(e){const{scope:n,client:r}=this.getStackTop(),{release:i,environment:s=cx}=r&&r.getOptions()||{},{userAgent:a}=yn.navigator||{},c=uM({release:i,environment:s,user:n.getUser(),...a&&{userAgent:a},...e}),u=n.getSession&&n.getSession();return u&&u.status==="ok"&&Qd(u,{status:"exited"}),this.endSession(),n.setSession(c),c}shouldSendDefaultPii(){const e=this.getClient(),n=e&&e.getOptions();return!!(n&&n.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:n}=this.getStackTop(),r=e.getSession();r&&n&&n.captureSession&&n.captureSession(r)}_callExtensionMethod(e,...n){const i=mo().__SENTRY__;if(i&&i.extensions&&typeof i.extensions[e]=="function")return i.extensions[e].apply(this,n);hn&&Lt.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function mo(){return yn.__SENTRY__=yn.__SENTRY__||{extensions:{},hub:void 0},yn}function x0(t){const e=mo(),n=cg(e);return vx(e,t),n}function Kd(){const t=mo();if(t.__SENTRY__&&t.__SENTRY__.acs){const e=t.__SENTRY__.acs.getCurrentHub();if(e)return e}return TM(t)}function TM(t=mo()){return(!DM(t)||cg(t).isOlderThan(gx))&&vx(t,new mx),cg(t)}function DM(t){return!!(t&&t.__SENTRY__&&t.__SENTRY__.hub)}function cg(t){return nx("hub",()=>new mx,t)}function vx(t,e){if(!t)return!1;const n=t.__SENTRY__=t.__SENTRY__||{};return n.hub=e,!0}function kM(t){return(t||Kd()).getScope().getTransaction()}let E0=!1;function AM(){E0||(E0=!0,eM(ug),nM(ug))}function ug(){const t=kM();if(t){const e="internal_error";hn&&Lt.log(`[Tracing] Transaction: ${e} -> Global error occured`),t.setStatus(e)}}ug.tag="sentry_tracingErrorCallback";var C0;(function(t){t.Ok="ok";const n="deadline_exceeded";t.DeadlineExceeded=n;const r="unauthenticated";t.Unauthenticated=r;const i="permission_denied";t.PermissionDenied=i;const s="not_found";t.NotFound=s;const a="resource_exhausted";t.ResourceExhausted=a;const c="invalid_argument";t.InvalidArgument=c;const u="unimplemented";t.Unimplemented=u;const d="unavailable";t.Unavailable=d;const f="internal_error";t.InternalError=f;const p="unknown_error";t.UnknownError=p;const m="cancelled";t.Cancelled=m;const v="already_exists";t.AlreadyExists=v;const b="failed_precondition";t.FailedPrecondition=b;const _="aborted";t.Aborted=_;const w="out_of_range";t.OutOfRange=w;const x="data_loss";t.DataLoss=x})(C0||(C0={}));function RM(t){if(t<400&&t>=100)return"ok";if(t>=400&&t<500)switch(t){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(t>=500&&t<600)switch(t){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}function OM(t,e){t.setTag("http.status_code",String(e)),t.setData("http.response.status_code",e);const n=RM(e);n!=="unknown_error"&&t.setStatus(n)}function MM(t){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const e=px(),n=t||e&&e.getOptions();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}const NM="_sentryScope",IM="_sentryIsolationScope";function PM(t){return{scope:t[NM],isolationScope:t[IM]}}const hp="sentry.source",Qa="sentry.sample_rate",_u="sentry.op",Su="sentry.origin",LM="profile_id";class FM{constructor(e=1e3){this._maxlen=e,this.spans=[]}add(e){this.spans.length>this._maxlen?e.spanRecorder=void 0:this.spans.push(e)}}class sm{constructor(e={}){this._traceId=e.traceId||er(),this._spanId=e.spanId||er().substring(16),this._startTime=e.startTimestamp||Yd(),this.tags=e.tags?{...e.tags}:{},this.data=e.data?{...e.data}:{},this.instrumenter=e.instrumenter||"sentry",this._attributes={},this.setAttributes({[Su]:e.origin||"manual",[_u]:e.op,...e.attributes}),this._name=e.name||e.description,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.status&&(this._status=e.status),e.endTimestamp&&(this._endTime=e.endTimestamp),e.exclusiveTime!==void 0&&(this._exclusiveTime=e.exclusiveTime),this._measurements=e.measurements?{...e.measurements}:{}}get name(){return this._name||""}set name(e){this.updateName(e)}get description(){return this._name}set description(e){this._name=e}get traceId(){return this._traceId}set traceId(e){this._traceId=e}get spanId(){return this._spanId}set spanId(e){this._spanId=e}set parentSpanId(e){this._parentSpanId=e}get parentSpanId(){return this._parentSpanId}get sampled(){return this._sampled}set sampled(e){this._sampled=e}get attributes(){return this._attributes}set attributes(e){this._attributes=e}get startTimestamp(){return this._startTime}set startTimestamp(e){this._startTime=e}get endTimestamp(){return this._endTime}set endTimestamp(e){this._endTime=e}get status(){return this._status}set status(e){this._status=e}get op(){return this._attributes[_u]}set op(e){this.setAttribute(_u,e)}get origin(){return this._attributes[Su]}set origin(e){this.setAttribute(Su,e)}spanContext(){const{_spanId:e,_traceId:n,_sampled:r}=this;return{spanId:e,traceId:n,traceFlags:r?ux:hM}}startChild(e){const n=new sm({...e,parentSpanId:this._spanId,sampled:this._sampled,traceId:this._traceId});n.spanRecorder=this.spanRecorder,n.spanRecorder&&n.spanRecorder.add(n);const r=ud(this);if(n.transaction=r,hn&&r){const i=e&&e.op||"< unknown op >",s=ys(n).description||"< unknown name >",a=r.spanContext().spanId,c=`[Tracing] Starting '${i}' span on transaction '${s}' (${a}).`;Lt.log(c),this._logMessage=c}return n}setTag(e,n){return this.tags={...this.tags,[e]:n},this}setData(e,n){return this.data={...this.data,[e]:n},this}setAttribute(e,n){n===void 0?delete this._attributes[e]:this._attributes[e]=n}setAttributes(e){Object.keys(e).forEach(n=>this.setAttribute(n,e[n]))}setStatus(e){return this._status=e,this}setHttpStatus(e){return OM(this,e),this}setName(e){this.updateName(e)}updateName(e){return this._name=e,this}isSuccess(){return this._status==="ok"}finish(e){return this.end(e)}end(e){if(this._endTime)return;const n=ud(this);if(hn&&n&&n.spanContext().spanId!==this._spanId){const r=this._logMessage;r&&Lt.log(r.replace("Starting","Finishing"))}this._endTime=fx(e)}toTraceparent(){return dx(this)}toContext(){return Lr({data:this._getData(),description:this._name,endTimestamp:this._endTime,op:this.op,parentSpanId:this._parentSpanId,sampled:this._sampled,spanId:this._spanId,startTimestamp:this._startTime,status:this._status,tags:this.tags,traceId:this._traceId})}updateWithContext(e){return this.data=e.data||{},this._name=e.name||e.description,this._endTime=e.endTimestamp,this.op=e.op,this._parentSpanId=e.parentSpanId,this._sampled=e.sampled,this._spanId=e.spanId||this._spanId,this._startTime=e.startTimestamp||this._startTime,this._status=e.status,this.tags=e.tags||{},this._traceId=e.traceId||this._traceId,this}getTraceContext(){return im(this)}getSpanJSON(){return Lr({data:this._getData(),description:this._name,op:this._attributes[_u],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:this._status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[Su],_metrics_summary:void 0,profile_id:this._attributes[LM],exclusive_time:this._exclusiveTime,measurements:Object.keys(this._measurements).length>0?this._measurements:void 0})}isRecording(){return!this._endTime&&!!this._sampled}toJSON(){return this.getSpanJSON()}_getData(){const{data:e,_attributes:n}=this,r=Object.keys(e).length>0,i=Object.keys(n).length>0;if(!(!r&&!i))return r&&i?{...e,...n}:r?e:n}}class jM extends sm{constructor(e,n){super(e),this._contexts={},this._hub=n||Kd(),this._name=e.name||"",this._metadata={...e.metadata},this._trimEnd=e.trimEnd,this.transaction=this;const r=this._metadata.dynamicSamplingContext;r&&(this._frozenDynamicSamplingContext={...r})}get name(){return this._name}set name(e){this.setName(e)}get metadata(){return{source:"custom",spanMetadata:{},...this._metadata,...this._attributes[hp]&&{source:this._attributes[hp]},...this._attributes[Qa]&&{sampleRate:this._attributes[Qa]}}}set metadata(e){this._metadata=e}setName(e,n="custom"){this._name=e,this.setAttribute(hp,n)}updateName(e){return this._name=e,this}initSpanRecorder(e=1e3){this.spanRecorder||(this.spanRecorder=new FM(e)),this.spanRecorder.add(this)}setContext(e,n){n===null?delete this._contexts[e]:this._contexts[e]=n}setMeasurement(e,n,r=""){this._measurements[e]={value:n,unit:r}}setMetadata(e){this._metadata={...this._metadata,...e}}end(e){const n=fx(e),r=this._finishTransaction(n);if(r)return this._hub.captureEvent(r)}toContext(){const e=super.toContext();return Lr({...e,name:this._name,trimEnd:this._trimEnd})}updateWithContext(e){return super.updateWithContext(e),this._name=e.name||"",this._trimEnd=e.trimEnd,this}getDynamicSamplingContext(){return lg(this)}setHub(e){this._hub=e}getProfileId(){if(this._contexts!==void 0&&this._contexts.profile!==void 0)return this._contexts.profile.profile_id}_finishTransaction(e){if(this._endTime!==void 0)return;this._name||(hn&&Lt.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>"),super.end(e);const n=this._hub.getClient();if(n&&n.emit&&n.emit("finishTransaction",this),this._sampled!==!0){hn&&Lt.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),n&&n.recordDroppedEvent("sample_rate","transaction");return}const r=this.spanRecorder?this.spanRecorder.spans.filter(f=>f!==this&&ys(f).timestamp):[];if(this._trimEnd&&r.length>0){const f=r.map(p=>ys(p).timestamp).filter(Boolean);this._endTime=f.reduce((p,m)=>p>m?p:m)}const{scope:i,isolationScope:s}=PM(this),{metadata:a}=this,{source:c}=a,u={contexts:{...this._contexts,trace:im(this)},spans:r,start_timestamp:this._startTime,tags:this.tags,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{...a,capturedSpanScope:i,capturedSpanIsolationScope:s,...Lr({dynamicSamplingContext:lg(this)})},_metrics_summary:void 0,...c&&{transaction_info:{source:c}}};return Object.keys(this._measurements).length>0&&(hn&&Lt.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),u.measurements=this._measurements),hn&&Lt.log(`[Tracing] Finishing ${this.op} transaction: ${this._name}.`),u}}function HM(t,e,n){if(!MM(e))return t.sampled=!1,t;if(t.sampled!==void 0)return t.setAttribute(Qa,Number(t.sampled)),t;let r;return typeof e.tracesSampler=="function"?(r=e.tracesSampler(n),t.setAttribute(Qa,Number(r))):n.parentSampled!==void 0?r=n.parentSampled:typeof e.tracesSampleRate<"u"?(r=e.tracesSampleRate,t.setAttribute(Qa,Number(r))):(r=1,t.setAttribute(Qa,r)),zM(r)?r?(t.sampled=Math.random()<r,t.sampled?(hn&&Lt.log(`[Tracing] starting ${t.op} transaction - ${ys(t).description}`),t):(hn&&Lt.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(r)})`),t)):(hn&&Lt.log(`[Tracing] Discarding transaction because ${typeof e.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),t.sampled=!1,t):(hn&&Lt.warn("[Tracing] Discarding transaction because of invalid sample rate."),t.sampled=!1,t)}function zM(t){return YO(t)||!(typeof t=="number"||typeof t=="boolean")?(hn&&Lt.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(t)} of type ${JSON.stringify(typeof t)}.`),!1):t<0||t>1?(hn&&Lt.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${t}.`),!1):!0}function UM(){const e=this.getScope().getSpan();return e?{"sentry-trace":dx(e)}:{}}function BM(t,e){const n=this.getClient(),r=n&&n.getOptions()||{},i=r.instrumenter||"sentry",s=t.instrumenter||"sentry";i!==s&&(hn&&Lt.error(`A transaction was started with instrumenter=\`${s}\`, but the SDK is configured with the \`${i}\` instrumenter.
The transaction will not be sampled. Please use the ${i} instrumentation to start transactions.`),t.sampled=!1);let a=new jM(t,this);return a=HM(a,r,{name:t.name,parentSampled:t.parentSampled,transactionContext:t,attributes:{...t.data,...t.attributes},...e}),a.isRecording()&&a.initSpanRecorder(r._experiments&&r._experiments.maxSpans),n&&n.emit&&n.emit("startTransaction",a),a}function WM(){const t=mo();t.__SENTRY__&&(t.__SENTRY__.extensions=t.__SENTRY__.extensions||{},t.__SENTRY__.extensions.startTransaction||(t.__SENTRY__.extensions.startTransaction=BM),t.__SENTRY__.extensions.traceHeaders||(t.__SENTRY__.extensions.traceHeaders=UM),AM())}function VM(){const t=mo();if(!t.__SENTRY__)return;const e={mongodb(){const r=Js(module,"./node/integrations/mongo");return new r.Mongo},mongoose(){const r=Js(module,"./node/integrations/mongo");return new r.Mongo},mysql(){const r=Js(module,"./node/integrations/mysql");return new r.Mysql},pg(){const r=Js(module,"./node/integrations/postgres");return new r.Postgres}},n=Object.keys(e).filter(r=>!!aM(r)).map(r=>{try{return e[r]()}catch{return}}).filter(r=>r);n.length>0&&(t.__SENTRY__.integrations=[...t.__SENTRY__.integrations||[],...n])}function $M(){WM(),sM()&&VM()}(typeof __SENTRY_TRACING__>"u"||__SENTRY_TRACING__)&&$M();const je={VALIDATION_ERROR:"VALIDATION_ERROR",NETWORK_ERROR:"NETWORK_ERROR",AUTHENTICATION_ERROR:"AUTHENTICATION_ERROR",AUTHORIZATION_ERROR:"AUTHORIZATION_ERROR",NOT_FOUND_ERROR:"NOT_FOUND_ERROR",SERVER_ERROR:"SERVER_ERROR",BUSINESS_LOGIC_ERROR:"BUSINESS_LOGIC_ERROR",UNKNOWN_ERROR:"UNKNOWN_ERROR"},T0={[je.VALIDATION_ERROR]:"I dati inseriti non sono validi. Controlla i campi evidenziati.",[je.NETWORK_ERROR]:"Errore di connessione. Verifica la tua connessione internet.",[je.AUTHENTICATION_ERROR]:"Sessione scaduta. Effettua nuovamente l'accesso.",[je.AUTHORIZATION_ERROR]:"Non hai i permessi per eseguire questa operazione.",[je.NOT_FOUND_ERROR]:"La risorsa richiesta non  stata trovata.",[je.SERVER_ERROR]:"Errore del server. Riprova pi tardi.",[je.BUSINESS_LOGIC_ERROR]:"Operazione non consentita dalle regole di business.",[je.UNKNOWN_ERROR]:"Si  verificato un errore imprevisto."};class it extends Error{constructor(e,n=je.UNKNOWN_ERROR,r=500,i={}){super(e),this.name="AppError",this.type=n,this.statusCode=r,this.context=i,this.timestamp=new Date().toISOString(),this.userMessage=T0[n]||T0[je.UNKNOWN_ERROR]}toJSON(){return{message:this.message,type:this.type,statusCode:this.statusCode,context:this.context,timestamp:this.timestamp,userMessage:this.userMessage}}}const yx=6048e5,qM=864e5,GM=36e5,D0=Symbol.for("constructDateFrom");function si(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&D0 in t?t[D0](e):t instanceof Date?new t.constructor(e):new Date(e)}function _n(t,e){return si(e||t,t)}function Kl(t,e,n){const r=_n(t,n?.in);return isNaN(e)?si(t,NaN):(e&&r.setDate(r.getDate()+e),r)}function YM(t,e,n){return si(t,+_n(t)+e)}function k0(t,e,n){return YM(t,e*GM)}let QM={};function Zd(){return QM}function la(t,e){const n=Zd(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,i=_n(t,e?.in),s=i.getDay(),a=(s<r?7:0)+s-r;return i.setDate(i.getDate()-a),i.setHours(0,0,0,0),i}function dd(t,e){return la(t,{...e,weekStartsOn:1})}function bx(t,e){const n=_n(t,e?.in),r=n.getFullYear(),i=si(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const s=dd(i),a=si(n,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const c=dd(a);return n.getTime()>=s.getTime()?r+1:n.getTime()>=c.getTime()?r:r-1}function A0(t){const e=_n(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function KM(t,...e){const n=si.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function R0(t,e){const n=_n(t,e?.in);return n.setHours(0,0,0,0),n}function ZM(t,e,n){const[r,i]=KM(n?.in,t,e),s=R0(r),a=R0(i),c=+s-A0(s),u=+a-A0(a);return Math.round((c-u)/qM)}function XM(t,e){const n=bx(t,e),r=si(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),dd(r)}function _x(t,e,n){return Kl(t,e*7,n)}function JM(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function e1(t){return!(!JM(t)&&typeof t!="number"||isNaN(+_n(t)))}function t1(t,e){const n=_n(t,e?.in),r=n.getFullYear();return n.setFullYear(r+1,0,0),n.setHours(23,59,59,999),n}function Sx(t,e){const n=_n(t,e?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const n1={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},r1=(t,e,n)=>{let r;const i=n1[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function pp(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const i1={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},s1={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},a1={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},o1={date:pp({formats:i1,defaultWidth:"full"}),time:pp({formats:s1,defaultWidth:"full"}),dateTime:pp({formats:a1,defaultWidth:"full"})},l1={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},c1=(t,e,n,r)=>l1[t];function rl(t){return(e,n)=>{const r=n?.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,c=n?.width?String(n.width):a;i=t.formattingValues[c]||t.formattingValues[a]}else{const a=t.defaultWidth,c=n?.width?String(n.width):t.defaultWidth;i=t.values[c]||t.values[a]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const u1={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},d1={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},f1={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},h1={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},p1={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},g1={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},m1=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},v1={ordinalNumber:m1,era:rl({values:u1,defaultWidth:"wide"}),quarter:rl({values:d1,defaultWidth:"wide",argumentCallback:t=>t-1}),month:rl({values:f1,defaultWidth:"wide"}),day:rl({values:h1,defaultWidth:"wide"}),dayPeriod:rl({values:p1,defaultWidth:"wide",formattingValues:g1,defaultFormattingWidth:"wide"})};function il(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const a=s[0],c=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(c)?b1(c,p=>p.test(a)):y1(c,p=>p.test(a));let d;d=t.valueCallback?t.valueCallback(u):u,d=n.valueCallback?n.valueCallback(d):d;const f=e.slice(a.length);return{value:d,rest:f}}}function y1(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function b1(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function _1(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],s=e.match(t.parsePattern);if(!s)return null;let a=t.valueCallback?t.valueCallback(s[0]):s[0];a=n.valueCallback?n.valueCallback(a):a;const c=e.slice(i.length);return{value:a,rest:c}}}const S1=/^(\d+)(th|st|nd|rd)?/i,w1=/\d+/i,x1={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},E1={any:[/^b/i,/^(a|c)/i]},C1={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},T1={any:[/1/i,/2/i,/3/i,/4/i]},D1={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},k1={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},A1={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},R1={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},O1={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},M1={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},N1={ordinalNumber:_1({matchPattern:S1,parsePattern:w1,valueCallback:t=>parseInt(t,10)}),era:il({matchPatterns:x1,defaultMatchWidth:"wide",parsePatterns:E1,defaultParseWidth:"any"}),quarter:il({matchPatterns:C1,defaultMatchWidth:"wide",parsePatterns:T1,defaultParseWidth:"any",valueCallback:t=>t+1}),month:il({matchPatterns:D1,defaultMatchWidth:"wide",parsePatterns:k1,defaultParseWidth:"any"}),day:il({matchPatterns:A1,defaultMatchWidth:"wide",parsePatterns:R1,defaultParseWidth:"any"}),dayPeriod:il({matchPatterns:O1,defaultMatchWidth:"any",parsePatterns:M1,defaultParseWidth:"any"})},I1={code:"en-US",formatDistance:r1,formatLong:o1,formatRelative:c1,localize:v1,match:N1,options:{weekStartsOn:0,firstWeekContainsDate:1}};function P1(t,e){const n=_n(t,e?.in);return ZM(n,Sx(n))+1}function L1(t,e){const n=_n(t,e?.in),r=+dd(n)-+XM(n);return Math.round(r/yx)+1}function wx(t,e){const n=_n(t,e?.in),r=n.getFullYear(),i=Zd(),s=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,a=si(e?.in||t,0);a.setFullYear(r+1,0,s),a.setHours(0,0,0,0);const c=la(a,e),u=si(e?.in||t,0);u.setFullYear(r,0,s),u.setHours(0,0,0,0);const d=la(u,e);return+n>=+c?r+1:+n>=+d?r:r-1}function F1(t,e){const n=Zd(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,i=wx(t,e),s=si(e?.in||t,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),la(s,e)}function j1(t,e){const n=_n(t,e?.in),r=+la(n,e)-+F1(n,e);return Math.round(r/yx)+1}function ft(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const as={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return ft(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):ft(n+1,2)},d(t,e){return ft(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return ft(t.getHours()%12||12,e.length)},H(t,e){return ft(t.getHours(),e.length)},m(t,e){return ft(t.getMinutes(),e.length)},s(t,e){return ft(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return ft(i,e.length)}},Va={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},O0={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return as.y(t,e)},Y:function(t,e,n,r){const i=wx(t,r),s=i>0?i:1-i;if(e==="YY"){const a=s%100;return ft(a,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):ft(s,e.length)},R:function(t,e){const n=bx(t);return ft(n,e.length)},u:function(t,e){const n=t.getFullYear();return ft(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return ft(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return ft(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return as.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return ft(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=j1(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):ft(i,e.length)},I:function(t,e,n){const r=L1(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):ft(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):as.d(t,e)},D:function(t,e,n){const r=P1(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):ft(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return ft(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return ft(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return ft(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=Va.noon:r===0?i=Va.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=Va.evening:r>=12?i=Va.afternoon:r>=4?i=Va.morning:i=Va.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return as.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):as.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):ft(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):ft(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):as.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):as.s(t,e)},S:function(t,e){return as.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return N0(r);case"XXXX":case"XX":return $s(r);case"XXXXX":case"XXX":default:return $s(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return N0(r);case"xxxx":case"xx":return $s(r);case"xxxxx":case"xxx":default:return $s(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+M0(r,":");case"OOOO":default:return"GMT"+$s(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+M0(r,":");case"zzzz":default:return"GMT"+$s(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return ft(r,e.length)},T:function(t,e,n){return ft(+t,e.length)}};function M0(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+e+ft(s,2)}function N0(t,e){return t%60===0?(t>0?"-":"+")+ft(Math.abs(t)/60,2):$s(t,e)}function $s(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=ft(Math.trunc(r/60),2),s=ft(r%60,2);return n+i+e+s}const I0=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},xx=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},H1=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return I0(t,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",I0(r,e)).replace("{{time}}",xx(i,e))},z1={p:xx,P:H1},U1=/^D+$/,B1=/^Y+$/,W1=["D","DD","YY","YYYY"];function V1(t){return U1.test(t)}function $1(t){return B1.test(t)}function q1(t,e,n){const r=G1(t,e,n);if(console.warn(r),W1.includes(t))throw new RangeError(r)}function G1(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Y1=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Q1=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,K1=/^'([^]*?)'?$/,Z1=/''/g,X1=/[a-zA-Z]/;function pn(t,e,n){const r=Zd(),i=r.locale??I1,s=r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,a=r.weekStartsOn??r.locale?.options?.weekStartsOn??0,c=_n(t,n?.in);if(!e1(c))throw new RangeError("Invalid time value");let u=e.match(Q1).map(f=>{const p=f[0];if(p==="p"||p==="P"){const m=z1[p];return m(f,i.formatLong)}return f}).join("").match(Y1).map(f=>{if(f==="''")return{isToken:!1,value:"'"};const p=f[0];if(p==="'")return{isToken:!1,value:J1(f)};if(O0[p])return{isToken:!0,value:f};if(p.match(X1))throw new RangeError("Format string contains an unescaped latin alphabet character `"+p+"`");return{isToken:!1,value:f}});i.localize.preprocessor&&(u=i.localize.preprocessor(c,u));const d={firstWeekContainsDate:s,weekStartsOn:a,locale:i};return u.map(f=>{if(!f.isToken)return f.value;const p=f.value;($1(p)||V1(p))&&q1(p,e,String(t));const m=O0[p[0]];return m(c,p,i.localize,d)}).join("")}function J1(t){const e=t.match(K1);return e?e[1].replace(Z1,"'"):t}function eN(t,e){return _n(t,e?.in).getDay()}function tN(t,e){return+_n(t)>+_n(e)}function nN(t,e,n){return _x(t,-1,n)}class rN{async init(){try{const{error:e}=await Ut.from("machines").select("count").limit(1);if(e)throw new it(`API initialization failed: ${e.message}`,je.SERVER_ERROR,500,e,"API.init");return!0}catch(e){throw e instanceof it?e:new it(`API initialization failed: ${e.message}`,je.SERVER_ERROR,500,e,"API.init")}}async getMachines(){try{const{data:e,error:n}=await Ut.from("machines").select("*").order("machine_name");if(n)throw n;return e||[]}catch(e){throw new it(`Failed to get machines: ${e.message}`,je.SERVER_ERROR,500,e,"API.getMachines")}}async addMachine(e){try{const{data:n,error:r}=await Ut.from("machines").insert([e]).select().single();if(r)throw r;return n}catch(n){throw new it(`Failed to add machine: ${en(n)}`,je.SERVER_ERROR,500,n,"API.addMachine")}}async updateMachine(e,n){try{const{data:r,error:i}=await Ut.from("machines").update(n).eq("id",e).select().single();if(i)throw i;return r}catch(r){throw new it(`Failed to update machine: ${en(r)}`,je.SERVER_ERROR,500,r,"API.updateMachine")}}async removeMachine(e){try{const{error:n}=await Ut.from("machines").delete().eq("id",e);if(n)throw n;return!0}catch(n){throw new it(`Failed to remove machine: ${en(n)}`,je.SERVER_ERROR,500,n,"API.removeMachine")}}async getOdpOrders(){try{const{data:e,error:n}=await Ut.from("odp_orders").select("*").order("created_at",{ascending:!1});if(n)throw n;return e||[]}catch(e){throw new it(`Failed to fetch ODP orders: ${en(e)}`,je.SERVER_ERROR,500,e,"API.getOdpOrders")}}async getOdpOrder(e){try{const{data:n,error:r}=await Ut.from("odp_orders").select("*").eq("id",e).single();if(r)throw r;return n}catch(n){throw new it(`Failed to fetch ODP order: ${en(n)}`,je.SERVER_ERROR,500,n,"API.getOdpOrder")}}async addOdpOrder(e){try{const{data:n,error:r}=await Ut.from("odp_orders").insert([e]).select().single();if(r)throw r;return n}catch(n){throw new it(`Failed to add ODP order: ${en(n)}`,je.SERVER_ERROR,500,n,"API.addOdpOrder")}}async updateOdpOrder(e,n){try{const{data:r,error:i}=await Ut.from("odp_orders").update(n).eq("id",e).select().single();if(i)throw i;return r}catch(r){throw new it(`Failed to update ODP order: ${en(r)}`,je.SERVER_ERROR,500,r,"API.updateOdpOrder")}}async removeOdpOrder(e){try{const{error:n}=await Ut.from("odp_orders").delete().eq("id",e);if(n)throw n;return!0}catch(n){throw new it(`Failed to remove ODP order: ${en(n)}`,je.SERVER_ERROR,500,n,"API.removeOdpOrder")}}async getPhases(){try{const{data:e,error:n}=await Ut.from("phases").select("*").order("name");if(n)throw n;return e||[]}catch(e){throw new it(`Failed to fetch phases: ${en(e)}`,je.SERVER_ERROR,500,e,"API.getPhases")}}async addPhase(e){try{const{data:n,error:r}=await Ut.from("phases").insert([e]).select().single();if(r)throw r;return n}catch(n){throw new it(`Failed to add phase: ${en(n)}`,je.SERVER_ERROR,500,n,"API.addPhase")}}async updatePhase(e,n){try{const{data:r,error:i}=await Ut.from("phases").update(n).eq("id",e).select().single();if(i)throw i;return r}catch(r){throw new it(`Failed to update phase: ${en(r)}`,je.SERVER_ERROR,500,r,"API.updatePhase")}}async removePhase(e){try{const{error:n}=await Ut.from("phases").delete().eq("id",e);if(n)throw n;return!0}catch(n){throw new it(`Failed to remove phase: ${en(n)}`,je.SERVER_ERROR,500,n,"API.removePhase")}}async getMachineAvailabilityForDateRange(e,n,r){try{const{data:i,error:s}=await Ut.from("machine_availability").select("*").eq("machine_id",e).gte("date",n).lte("date",r).order("date");if(s)throw s;return i||[]}catch(i){throw new it(`Failed to fetch machine availability for date range: ${en(i)}`,je.SERVER_ERROR,500,i,"API.getMachineAvailabilityForDateRange")}}async getMachineAvailabilityForDate(e,n){try{const{data:r,error:i}=await Ut.from("machine_availability").select("*").eq("machine_id",e).eq("date",n).maybeSingle();if(i)throw i;return r||null}catch(r){throw new it(`Failed to fetch machine availability: ${en(r)}`,je.SERVER_ERROR,500,r,"API.getMachineAvailabilityForDate")}}async getMachineAvailability(e,n){try{return(await this.getMachineAvailabilityForDate(e,n))?.unavailable_hours||[]}catch{return[]}}async setMachineAvailability(e,n,r){try{const{data:i,error:s}=await Ut.from("machine_availability").upsert([{machine_id:e,date:n,unavailable_hours:r}],{onConflict:"machine_id,date"}).select().single();if(s)throw s;return i}catch(i){throw new it(`Failed to set machine availability: ${en(i)}`,je.SERVER_ERROR,500,i,"API.setMachineAvailability")}}async getMachineAvailabilityForDateAllMachines(e){try{const{data:n,error:r}=await Ut.from("machine_availability").select("*").eq("date",e);if(r)throw r;return n||[]}catch(n){throw new it(`Failed to fetch machine availability for all machines: ${en(n)}`,je.SERVER_ERROR,500,n,"API.getMachineAvailabilityForDateAllMachines")}}async getEventsByDate(e){try{const{data:n,error:r}=await Ut.from("machine_availability").select("*").eq("date",e);if(r)throw r;return n||[]}catch(n){throw new it(`Failed to fetch events by date: ${en(n)}`,je.SERVER_ERROR,500,n,"API.getEventsByDate")}}async setUnavailableHoursForRange(e,n,r,i,s){try{const a=parseInt(i.split(":")[0]),c=parseInt(s.split(":")[0]),u=[];for(let v=a;v<c;v++)u.push(v.toString());const d=new Date(n),f=new Date(r);let p=new Date(d);const m=[];for(;p<=f;){const v=pn(p,"yyyy-MM-dd"),_=(await this.getMachineAvailabilityForDate(e,v))?.unavailable_hours||[],w=[...new Set([..._,...u])].sort((C,k)=>parseInt(C)-parseInt(k)),x=await this.setMachineAvailability(e,v,w);m.push(x),p=Kl(p,1)}return m}catch(a){throw new it(`Failed to set unavailable hours for range: ${en(a)}`,je.SERVER_ERROR,500,a,"API.setUnavailableHoursForRange")}}async bulkUpsertMachineAvailability(e){try{const{error:n}=await Ut.from("machine_availability").upsert(e,{onConflict:"machine_id,date"});if(n)throw n;return{success:!0}}catch(n){throw new it(`Failed to bulk set machine availability: ${en(n)}`,je.SERVER_ERROR,500,n,"API.bulkUpsertMachineAvailability")}}setupRealtimeSubscriptions(e,n,r){return Ut.channel("table-db-changes").on("postgres_changes",{event:"*",schema:"public",table:"odp_orders"},e).on("postgres_changes",{event:"*",schema:"public",table:"machines"},n).on("postgres_changes",{event:"*",schema:"public",table:"phases"},r).subscribe(s=>{})}cleanupRealtimeSubscriptions(e){if(e)try{e.unsubscribe()}catch{}}}const ct=new rN,dg=Object.freeze(Object.defineProperty({__proto__:null,apiService:ct},Symbol.toStringTag,{value:"Module"})),In=Ql((t,e)=>({odpOrders:[],getOdpOrders:()=>e().odpOrders,getOrderById:n=>e().odpOrders.find(r=>r.id===n),getScheduledOrders:()=>e().odpOrders.filter(n=>n.status==="SCHEDULED"),getUnscheduledOrders:()=>e().odpOrders.filter(n=>n.status==="NOT SCHEDULED"),getOdpOrdersByWorkCenter:n=>n==="BOTH"?e().odpOrders:e().odpOrders.filter(r=>r.work_center===n),setOdpOrders:n=>t({odpOrders:n||[]}),cleanupDuplicateOrders:()=>{const n=e(),r=[],i=new Set;n.odpOrders.forEach(s=>{i.has(s.id)||(i.add(s.id),r.push(s))}),t({odpOrders:r})},reset:()=>t({odpOrders:[]})})),gl=Ql((t,e)=>({machines:[],getMachines:()=>e().machines,getMachineById:n=>e().machines.find(r=>r.id===n),getMachinesByWorkCenter:n=>n==="BOTH"?e().machines:e().machines.filter(r=>r.work_center===n),setMachines:n=>t({machines:n||[]}),cleanupDuplicateMachines:()=>{const n=e(),r=[],i=new Set;n.machines.forEach(s=>{i.has(s.id)||(i.add(s.id),r.push(s))}),t({machines:r})},reset:()=>t({machines:[]})})),Tt={MACHINE:{DEPARTMENT:"STAMPA",WORK_CENTER:"ZANICA",MIN_WEB_WIDTH:"100",MAX_WEB_WIDTH:"1000",MIN_BAG_HEIGHT:"50",MAX_BAG_HEIGHT:"500",SETUP_TIME_STANDARD:"0.5",CHANGEOVER_COLOR:"0.25",CHANGEOVER_MATERIAL:"0.75",ACTIVE_SHIFTS:["T1"],STATUS:"ACTIVE"},PHASE:{DEPARTMENT:"STAMPA",NUMERO_PERSONE:1,WORK_CENTER:"ZANICA",V_STAMPA:6e3,T_SETUP_STAMPA:.5,COSTO_H_STAMPA:50,V_CONF:1e3,T_SETUP_CONF:.25,COSTO_H_CONF:40},ORDER:{SEAL_SIDES:3,QUANTITY_COMPLETED:0},OFF_TIME:{START_TIME:"09:00",END_TIME:"17:00"}},iN={MAX_TASK_SEGMENTS:50},wu={MINUTES_PER_HOUR:60,MILLISECONDS_PER_MINUTE:60*1e3},ii=Ql((t,e)=>({isLoading:!1,isInitialized:!1,selectedWorkCenter:localStorage.getItem("selectedWorkCenter")||Je.BOTH,isEditMode:!1,schedulingLoading:{isScheduling:!1,isRescheduling:!1,isShunting:!1,isNavigating:!1,operationType:null,taskId:null},confirmDialog:{isOpen:!1,title:"",message:"",onConfirm:null,type:"danger"},conflictDialog:{isOpen:!1,details:null},dragPreview:{isActive:!1,startSlot:null,durationSlots:0,machineId:null},getLoadingState:()=>e().isLoading,getInitializationState:()=>e().isInitialized,getSelectedWorkCenter:()=>e().selectedWorkCenter,getEditMode:()=>e().isEditMode,getConfirmDialog:()=>e().confirmDialog,getConflictDialog:()=>e().conflictDialog,getSchedulingLoading:()=>e().schedulingLoading,getDragPreview:()=>e().dragPreview,setLoading:n=>t({isLoading:n}),setInitialized:n=>t({isInitialized:n}),setSelectedWorkCenter:n=>{localStorage.setItem("selectedWorkCenter",n),t({selectedWorkCenter:n})},toggleEditMode:()=>t(n=>({isEditMode:!n.isEditMode})),setEditMode:n=>t({isEditMode:n}),setSchedulingLoading:n=>t({schedulingLoading:n}),startSchedulingOperation:(n,r=null)=>t({schedulingLoading:{isScheduling:n==="schedule",isRescheduling:n==="reschedule",isShunting:n==="shunt",isNavigating:n==="navigate",operationType:n,taskId:r}}),stopSchedulingOperation:()=>t({schedulingLoading:{isScheduling:!1,isRescheduling:!1,isShunting:!1,isNavigating:!1,operationType:null,taskId:null}}),showConfirmDialog:(n,r,i,s="danger")=>t({confirmDialog:{isOpen:!0,title:n,message:r,onConfirm:i,type:s}}),hideConfirmDialog:()=>t({confirmDialog:{isOpen:!1,title:"",message:"",onConfirm:null,type:"danger"}}),showConflictDialog:n=>t({conflictDialog:{isOpen:!0,details:n}}),hideConflictDialog:()=>t({conflictDialog:{isOpen:!1,details:null}}),setDragPreview:n=>t({dragPreview:n}),clearDragPreview:()=>t({dragPreview:{isActive:!1,startSlot:null,durationSlots:0,machineId:null}}),showAlert:(n,r="info")=>{xO(n,r)},reset:()=>t({isLoading:!1,isInitialized:!1,selectedWorkCenter:Je.BOTH,isEditMode:!1,schedulingLoading:{isScheduling:!1,isRescheduling:!1,isShunting:!1,isNavigating:!1,operationType:null,taskId:null},confirmDialog:{isOpen:!1,title:"",message:"",onConfirm:null,type:"danger"},conflictDialog:{isOpen:!1,details:null},dragPreview:{isActive:!1,startSlot:null,durationSlots:0,machineId:null}})}));class sN{constructor(e,n){this.get=e,this.set=n}setSplitTaskInfo=(e,n)=>{this.set(r=>({splitTasksInfo:{...r.splitTasksInfo,[e]:n}}))};getSplitTaskInfo=e=>{const n=this.get().splitTasksInfo[e];if(n&&n.segments)return n;const{getOrderById:r}=In.getState(),i=r(e);if(i&&i.description&&i.status==="SCHEDULED")try{const s=JSON.parse(i.description);if(s.segments&&Array.isArray(s.segments))return setTimeout(()=>{this.setSplitTaskInfo(e,s)},0),s}catch{}return null};clearSplitTaskInfo=e=>{this.set(n=>{const r={...n.splitTasksInfo};return delete r[e],{splitTasksInfo:r}})};updateTaskWithSplitInfo=async(e,n,r=null,i=null,s=null)=>{const{apiService:a}=await Ol(async()=>{const{apiService:c}=await Promise.resolve().then(()=>dg);return{apiService:c}},[]);if(n){this.setSplitTaskInfo(e,n);const u={description:JSON.stringify(n),status:"SCHEDULED"};if(r&&(u.scheduled_start_time=r.toISOString()),i&&(u.scheduled_end_time=i.toISOString()),s&&(u.scheduled_machine_id=s),!(u.scheduled_start_time&&u.scheduled_end_time&&u.scheduled_machine_id))if(!u.scheduled_start_time&&!u.scheduled_end_time&&!u.scheduled_machine_id)delete u.scheduled_start_time,delete u.scheduled_end_time,delete u.scheduled_machine_id,u.status="NOT SCHEDULED";else{const{getOrderById:f}=In.getState(),p=f(e);p&&(u.scheduled_start_time||(u.scheduled_start_time=p.scheduled_start_time),u.scheduled_end_time||(u.scheduled_end_time=p.scheduled_end_time),u.scheduled_machine_id||(u.scheduled_machine_id=p.scheduled_machine_id))}const d=await a.updateOdpOrder(e,u);this.updateSplitTaskInfo(e,d)}else{this.clearSplitTaskInfo(e);const c=await a.updateOdpOrder(e,{description:""});this.updateSplitTaskInfo(e,c)}};updateSplitTaskInfo=(e,n)=>{if(this.clearSplitTaskInfo(e),n.description&&n.status==="SCHEDULED")try{const r=JSON.parse(n.description);r.segments&&Array.isArray(r.segments)?this.validateSegments(r.segments.map(s=>({start:new Date(s.start),end:new Date(s.end),duration:s.duration}))).isValid?this.setSplitTaskInfo(e,r):this.clearSplitTaskInfo(e):this.clearSplitTaskInfo(e)}catch{this.clearSplitTaskInfo(e)}else this.clearSplitTaskInfo(e)};restoreSplitTaskInfo=()=>{const{getOdpOrders:e}=In.getState(),n=e(),r={};let i=0;n.forEach(s=>{if(s.description&&s.status==="SCHEDULED")try{const a=JSON.parse(s.description);a.segments&&Array.isArray(a.segments)&&(r[s.id]=a,i++)}catch{}}),this.set({splitTasksInfo:r})};validateSegments=e=>{if(!Array.isArray(e)||e.length===0)return{isValid:!1,error:"Segments must be a non-empty array"};for(let n=0;n<e.length;n++){const r=e[n];if(!r.start||!r.end||r.duration===void 0)return{isValid:!1,error:`Segment ${n} missing required properties (start, end, duration)`};const i=new Date(r.start),s=new Date(r.end);if(isNaN(i.getTime())||isNaN(s.getTime()))return{isValid:!1,error:`Segment ${n} has invalid date values`};if(s<=i)return{isValid:!1,error:`Segment ${n} end time must be after start time`};if(r.duration<=0)return{isValid:!1,error:`Segment ${n} duration must be positive`};if(n>0){const a=e[n-1],c=new Date(a.end);if(i<c)return{isValid:!1,error:`Segment ${n} overlaps with previous segment`}}}return{isValid:!0}};createSegmentInfo=(e,n)=>{const r=this.validateSegments(e);if(!r.isValid)throw new Error(`Invalid segments: ${r.error}`);return{totalSegments:e.length,segments:e.map(i=>({start:i.start.toISOString(),end:i.end.toISOString(),duration:i.duration})),originalDuration:n,wasSplit:e.length>1}};getTaskOccupiedSegments=e=>{const n=this.getSplitTaskInfo(e.id);if(n&&n.segments)return n.segments.map(r=>({start:new Date(r.start),end:new Date(r.end),duration:r.duration}));if(e.description)try{const r=JSON.parse(e.description);if(r.segments&&Array.isArray(r.segments))return r.segments.map(i=>({start:new Date(i.start),end:new Date(i.end),duration:i.duration}))}catch{}if(e.scheduled_start_time){const r=new Date(e.scheduled_start_time),i=e.time_remaining||e.duration||1,s=new Date(r.getTime()+i*60*60*1e3);return[{start:r,end:s,duration:i}]}return[]};doTimeRangesOverlap=(e,n,r,i)=>e<i&&n>r;checkTaskOverlap=(e,n,r)=>{const i=this.getTaskOccupiedSegments(r);for(const s of i)if(this.doTimeRangesOverlap(e,n,s.start,s.end))return{hasOverlap:!0,conflictingSegment:s,existingTask:r};return{hasOverlap:!1}};checkMachineOverlaps=(e,n,r,i=null,s=[])=>{const{getOdpOrders:a}=In.getState(),c=[i,...s].filter(f=>f),d=a().filter(f=>f.scheduled_machine_id===r&&f.status==="SCHEDULED"&&!c.includes(f.id)&&f.scheduled_start_time&&f.scheduled_end_time&&f.scheduled_machine_id).sort((f,p)=>{const m=this.getTaskOccupiedSegments(f),v=this.getTaskOccupiedSegments(p),b=m.length>0?m[0].start:new Date(f.scheduled_start_time),_=v.length>0?v[0].start:new Date(p.scheduled_start_time);return b.getTime()-_.getTime()});for(const f of d){const p=this.checkTaskOverlap(e,n,f);if(p.hasOverlap)return{hasOverlap:!0,conflictingTask:f,conflictingSegment:p.conflictingSegment}}return{hasOverlap:!1}};migrateExistingTasksToSegmentFormat=async()=>{const{getOdpOrders:e}=In.getState(),n=e();for(const r of n)if(r.status==="SCHEDULED"&&r.scheduled_start_time){const i=this.getSplitTaskInfo(r.id);if(i&&i.segments)continue;if(r.description)try{const f=JSON.parse(r.description);if(f.segments&&Array.isArray(f.segments)){this.setSplitTaskInfo(r.id,f);continue}}catch{}const s=new Date(r.scheduled_start_time),a=r.time_remaining||r.duration||1,c=new Date(s.getTime()+a*60*60*1e3),u=[{start:s,end:c,duration:a}],d=this.createSegmentInfo(u,a);await this.updateTaskWithSplitInfo(r.id,d)}};verifyAllTasksHaveSegmentInfo=()=>{const{getOdpOrders:e}=In.getState(),r=e().filter(s=>s.status==="SCHEDULED"),i=[];for(const s of r){const a=this.getSplitTaskInfo(s.id);(!a||!a.segments)&&i.push({id:s.id,odp_number:s.odp_number,description:s.description})}return{totalScheduledTasks:r.length,tasksWithSegments:r.length-i.length,tasksWithoutSegments:i}}}class aN{constructor(e,n,r,i){this.get=e,this.set=n,this.splitTaskManager=r,this.machineAvailabilityManager=i}createAbsoluteDate=(e,n,r,i=0,s=0)=>new Date(Date.UTC(e,n-1,r,i,s,0,0));splitTaskAcrossAvailableSlots=(e,n,r,i)=>{try{const s=[];let a=new Date(e),c=n,u=!0;for(;u;){u=!1;for(const d of i)if(a>=d.start&&a<d.end){a=new Date(d.end),u=!0;break}}for(;c>0;){let d=null,f=null,p=null;for(const m of i){const v=new Date(m.start),b=new Date(m.end);v>=a&&(!d||v<f)&&(d=m,f=v,p=b)}if(d){const m=(f.getTime()-a.getTime())/36e5;if(m>0){const b=Math.min(m,c),_=new Date(a.getTime()+b*60*60*1e3);s.push({start:new Date(a),end:_,duration:b}),c-=b}a=new Date(p);let v=!0;for(;v;){v=!1;for(const b of i)if(a>=b.start&&a<b.end){a=new Date(b.end),v=!0;break}}}else{const m=new Date(a.getTime()+c*60*60*1e3);s.push({start:new Date(a),end:m,duration:c}),c=0}if(s.length>iN.MAX_TASK_SEGMENTS){console.warn("Task splitting exceeded maximum segments limit");break}}return s}catch(s){return console.error("Error in splitTaskAcrossAvailableSlots:",s),[]}};splitTaskAcrossAvailableSlotsBackward=(e,n,r,i)=>{try{const s=[];let a=new Date(e),c=n,u=!0;for(;u;){u=!1;for(const f of i)if(a>f.start&&a<=f.end){a=new Date(f.start),u=!0;break}}for(;c>0;){let f=null,p=null,m=null;for(const C of i){const k=new Date(C.start),R=new Date(C.end);R<=a&&(!f||R>m)&&(f=C,p=k,m=R)}let v;f?v=new Date(m):v=new Date(a.getTime()-c*60*60*1e3);let b=!0;for(;b;){b=!1;for(const C of i)if(v<C.end&&v>=C.start){v=new Date(C.end),b=!0;break}}const _=(a.getTime()-v.getTime())/(1e3*60*60);if(_<=0){a=f?new Date(p):new Date(a.getTime()-3600*1e3);continue}const w=Math.min(_,c),x=new Date(a.getTime()-w*60*60*1e3);s.push({start:x,end:new Date(a),duration:w}),c-=w,a=new Date(x)}return s.reverse()}catch(s){return console.error("Error in splitTaskAcrossAvailableSlotsBackward:",s),[]}};collectUnavailableSlots=(e,n,r)=>{const i=[],s=this.createAbsoluteDate(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate()),a=this.createAbsoluteDate(n.getUTCFullYear(),n.getUTCMonth()+1,n.getUTCDate()),c=new Date(a);c.setUTCDate(c.getUTCDate()+7);let u=new Date(s);for(;u<=c;){const d=pn(u,"yyyy-MM-dd"),f=this.get().machineAvailability[d];if(f&&Array.isArray(f)){const p=f.find(m=>m.machine_id===r);if(p&&p.unavailable_hours&&Array.isArray(p.unavailable_hours)){const[m,v,b]=d.split("-").map(Number);for(const _ of p.unavailable_hours){const w=this.createAbsoluteDate(m,v,b,parseInt(_),0),x=new Date(w.getTime()+3600*1e3);i.push({start:w,end:x,hour:parseInt(_),date:d})}}}u.setUTCDate(u.getUTCDate()+1)}return i.sort((d,f)=>d.start.getTime()-f.start.getTime())};loadMachineAvailabilityForExtendedRange=async(e,n,r)=>{const i=this.createAbsoluteDate(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate()),s=new Date(e.getTime()+n*60*60*1e3),a=this.createAbsoluteDate(s.getUTCFullYear(),s.getUTCMonth()+1,s.getUTCDate()),c=new Date(a);c.setUTCDate(c.getUTCDate()+7);let u=new Date(i);for(;u<=c;){const d=pn(u,"yyyy-MM-dd");await this.machineAvailabilityManager.loadMachineAvailabilityForDate(d),u.setUTCDate(u.getUTCDate()+1)}return c};loadMachineAvailabilityForBackwardRange=async(e,n,r)=>{const i=this.createAbsoluteDate(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate()),s=new Date(e.getTime()-n*60*60*1e3),a=this.createAbsoluteDate(s.getUTCFullYear(),s.getUTCMonth()+1,s.getUTCDate()),c=new Date(a);c.setUTCDate(c.getUTCDate()-7);let u=new Date(c);for(;u<=i;){const d=pn(u,"yyyy-MM-dd");await this.machineAvailabilityManager.loadMachineAvailabilityForDate(d),u.setUTCDate(u.getUTCDate()+1)}return{taskStartDateWithBuffer:c,taskEndDate:i}};checkSegmentsForOverlaps=(e,n,r,i=[])=>{[r,...i].filter(s=>s);for(const s of e){const a=this.splitTaskManager.checkMachineOverlaps(s.start,s.end,n,r,i);if(a.hasOverlap)return{hasOverlap:!0,conflictingSegment:s,conflictingTask:a.conflictingTask,conflictingExistingSegment:a.conflictingSegment}}return{hasOverlap:!1}};scheduleTaskWithSplitting=async(e,n,r,i,s=[])=>{const a=await this.loadMachineAvailabilityForExtendedRange(n,r,i),c=this.collectUnavailableSlots(n,a,i),u=new Date(n.getTime()+r*60*60*1e3);if(c.some(f=>n<f.end&&u>f.start)){const f=this.splitTaskAcrossAvailableSlots(n,r,i,c);if(f.length>0){const p=this.checkSegmentsForOverlaps(f,i,e,s);if(p.hasOverlap)return{conflict:!0,conflictingTask:p.conflictingTask,conflictingSegment:p.conflictingExistingSegment,proposedSegments:f};const m=f[0],v=f[f.length-1];if(!m?.start||!v?.end)return console.error("Invalid segments returned from splitTaskAcrossAvailableSlots:",f),null;const b=this.splitTaskManager.createSegmentInfo(f,r);return await this.splitTaskManager.updateTaskWithSplitInfo(e,b,m.start,v.end,i),{startTime:m.start,endTime:v.end,wasSplit:!0,segments:f,originalDuration:r}}}else{const f=[{start:n,end:u,duration:r}],p=this.checkSegmentsForOverlaps(f,i,e,s);if(p.hasOverlap)return{conflict:!0,conflictingTask:p.conflictingTask,conflictingSegment:p.conflictingExistingSegment,proposedSegments:f};const m=this.splitTaskManager.createSegmentInfo(f,r);return await this.splitTaskManager.updateTaskWithSplitInfo(e,m,n,u,i),{startTime:n,endTime:u,wasSplit:!1,segments:f,originalDuration:r}}return null};scheduleTaskEndingAtWithSplitting=async(e,n,r,i,s=[])=>{const{taskStartDateWithBuffer:a,taskEndDate:c}=await this.loadMachineAvailabilityForBackwardRange(n,r,i),u=this.collectUnavailableSlots(a,c,i),d=this.splitTaskAcrossAvailableSlotsBackward(n,r,i,u);if(d.length===0)return null;const f=this.checkSegmentsForOverlaps(d,i,e,s);if(f.hasOverlap)return{conflict:!0,conflictingTask:f.conflictingTask,conflictingSegment:f.conflictingExistingSegment,proposedSegments:d};const p=this.splitTaskManager.createSegmentInfo(d,r),m=d[0],v=d[d.length-1];return!m?.start||!v?.end?(console.error("Invalid segments returned from splitTaskAcrossAvailableSlotsBackward:",d),null):(await this.splitTaskManager.updateTaskWithSplitInfo(e,p,m.start,v.end,i),{startTime:m.start,endTime:v.end,wasSplit:d.length>1,segments:d,originalDuration:r})};handleTaskDurationShrinking=async(e,n,r,i={})=>{try{console.log(" DURATION SHRINKING: Starting cascading rescheduling for task",e),console.log(" DURATION SHRINKING: New duration:",n,"hours");const{getOrderById:s,getOdpOrders:a}=In.getState(),{getMachineById:c}=gl.getState(),u=s(e),d=c(r),f=a();if(!u||!d)return{success:!1,error:"Task or machine not found"};if(!u.scheduled_start_time||!u.scheduled_end_time)return{success:!1,error:"Task is not scheduled"};const p=new Date(u.scheduled_start_time),m=u.duration,v=new Date(p.getTime()+m*60*60*1e3);console.log(" DURATION SHRINKING: Original end time (pre-shrinking):",v.toISOString()),console.log(" DURATION SHRINKING: Original duration:",m,"New duration:",n);const b=this.findCascadingChain(e,v,r,f);console.log(" DURATION SHRINKING: Found cascading chain of",b.length,"tasks to reschedule"),console.log(" DURATION SHRINKING: Chain tasks:",b.map(O=>O.odp_number));const _=u.quantity_completed/u.quantity||0,w=n*(1-_);console.log(" DURATION SHRINKING: Calculated time_remaining:",w,"from new duration:",n,"and progress:",_),console.log(" DURATION SHRINKING: Progress calculation:",u.quantity_completed,"/",u.quantity,"=",_),console.log(" DURATION SHRINKING: Rescheduling original task with new time_remaining");const x=await this.scheduleTaskWithSplitting(e,p,w,r,[]);if(!x)return console.error(" DURATION SHRINKING: Failed to reschedule original task"),{success:!1,error:"Failed to reschedule original task. Not enough space available.",rescheduledTasks:[]};if(x.conflict)return console.error(" DURATION SHRINKING: Conflict detected while rescheduling original task"),{success:!1,error:"Conflict detected while rescheduling original task. Consider using conflict resolution.",rescheduledTasks:[]};await this.splitTaskManager.updateTaskWithSplitInfo(e,x.segments?{segments:x.segments,totalSegments:x.segments.length,originalDuration:x.originalDuration||w,wasSplit:x.wasSplit||!1}:null,x.startTime,x.endTime,r);const C={duration:n,time_remaining:w,...i};console.log(" DURATION SHRINKING: Final update data:",C),await ct.updateOdpOrder(e,C);const k=[{id:e,odp_number:u.odp_number,new_start_time:x.startTime.toISOString(),new_end_time:x.endTime.toISOString(),was_split:x.wasSplit}];let R=new Date(x.endTime);const A=R.getUTCMinutes(),M=Math.ceil(A/15)*15;M===60?R.setUTCHours(R.getUTCHours()+1,0,0,0):R.setUTCMinutes(M,0,0);for(const O of b){console.log(" DURATION SHRINKING: Rescheduling task",O.odp_number,"to start at",R.toISOString());const H=await this.scheduleTaskWithSplitting(O.id,R,O.time_remaining||O.duration||1,r,[e]);if(!H)return console.error(" DURATION SHRINKING: Failed to reschedule task",O.odp_number),{success:!1,error:`Failed to reschedule task ${O.odp_number}. Not enough space available.`,rescheduledTasks:k};if(H.conflict)return console.error(" DURATION SHRINKING: Conflict detected while rescheduling task",O.odp_number),{success:!1,error:`Conflict detected while rescheduling task ${O.odp_number}. Consider using conflict resolution.`,rescheduledTasks:k};await this.splitTaskManager.updateTaskWithSplitInfo(O.id,H.segments?{segments:H.segments,totalSegments:H.segments.length,originalDuration:H.originalDuration||O.time_remaining||O.duration||1,wasSplit:H.wasSplit||!1}:null,H.startTime,H.endTime,r),k.push({id:O.id,odp_number:O.odp_number,new_start_time:H.startTime.toISOString(),new_end_time:H.endTime.toISOString(),was_split:H.wasSplit}),R=new Date(H.endTime);const B=R.getUTCMinutes(),$=Math.ceil(B/15)*15;$===60?R.setUTCHours(R.getUTCHours()+1,0,0,0):R.setUTCMinutes($,0,0)}console.log(" DURATION SHRINKING: Successfully rescheduled",k.length,"tasks");const P=s(e);return{success:!0,message:`Successfully rescheduled ${k.length} tasks due to duration reduction`,rescheduledTasks:k,updatedTask:P}}catch(s){return console.error(" DURATION SHRINKING ERROR:",s),{success:!1,error:s.message||"Unknown error during duration shrinking",rescheduledTasks:[]}}};findCascadingChain=(e,n,r,i)=>{const s=[],a=new Set,c=i.filter(f=>f.scheduled_machine_id===r&&f.status==="SCHEDULED"&&f.id!==e&&f.scheduled_start_time).sort((f,p)=>new Date(f.scheduled_start_time)-new Date(p.scheduled_start_time)),u=c.filter(f=>{const m=(new Date(f.scheduled_start_time).getTime()-n.getTime())/(1e3*60);return m>=0&&m<=15});console.log(" DURATION SHRINKING: Initial candidates within 15 minutes:",u.map(f=>f.odp_number));const d=f=>{for(const p of c){if(a.has(p.id))continue;const m=new Date(p.scheduled_start_time),v=(m.getTime()-f.getTime())/(1e3*60);if(v>=0&&v<=15){a.add(p.id),s.push(p);const b=p.time_remaining||p.duration||1,_=new Date(m.getTime()+b*60*60*1e3);console.log(" DURATION SHRINKING: Added to chain:",p.odp_number,"ends at",_.toISOString()),d(_)}}};return d(n),console.log(" DURATION SHRINKING: Complete chain found:",s.map(f=>f.odp_number)),s}}class oN{constructor(e,n,r,i){this.get=e,this.set=n,this.schedulingLogic=r,this.splitTaskManager=i}getTaskDurationMinutes=e=>Math.round((e.time_remaining||e.duration||1)*wu.MINUTES_PER_HOUR);getTaskEndTime=e=>{const n=new Date(e.scheduled_start_time),r=this.getTaskDurationMinutes(e);return new Date(n.getTime()+r*wu.MILLISECONDS_PER_MINUTE)};addMinutesToDate=(e,n)=>new Date(e.getTime()+n*wu.MILLISECONDS_PER_MINUTE);roundUpToNext15MinSlot=e=>{const n=e.getUTCMinutes(),r=e.getUTCHours(),i=Math.ceil(n/15)*15,s=new Date(e);return i===wu.MINUTES_PER_HOUR?s.setUTCHours(r+1,0,0,0):s.setUTCMinutes(i,0,0),s};scheduleTaskWithSplittingForShunt=async(e,n,r)=>await this.scheduleTaskWithSplittingForShuntExcluding(e,n,r,[e.id]);scheduleTaskWithSplittingForShuntExcluding=async(e,n,r,i,s=3)=>{const a=this.getTaskDurationMinutes(e)/60,c=i.filter(d=>d!==e.id),u=await this.schedulingLogic.scheduleTaskWithSplitting(e.id,n,a,r.id,c);return u&&!u.conflict?{startTime:u.startTime,endTime:u.endTime,wasSplit:u.wasSplit}:u&&u.conflict?(console.log(` CASCADING SHUNT: Task ${e.odp_number} conflicts with ${u.conflictingTask?.odp_number}, attempting cascading resolution`),s>0?await this.handleCascadingConflict(e,n,r,i,u,s-1):(console.warn(` CASCADING SHUNT: Max depth reached for task ${e.odp_number}, returning conflict info`),{conflict:!0,conflictingTask:u.conflictingTask,conflictingSegment:u.conflictingSegment,proposedSegments:u.proposedSegments})):u?{startTime:n,endTime:this.addMinutesToDate(n,this.getTaskDurationMinutes(e)),wasSplit:!1}:null};handleCascadingConflict=async(e,n,r,i,s,a)=>{const c=s.conflictingTask,u=s.conflictingSegment;console.log(` CASCADING SHUNT: Attempting to shunt conflicting task ${c?.odp_number} to resolve conflict with ${e.odp_number}`);const d=new Date(n.getTime()+this.getTaskDurationMinutes(e)*60*1e3),f=this.roundUpToNext15MinSlot(d),p=[...i,c.id];try{const m=await this.scheduleTaskWithSplittingForShuntExcluding(c,f,r,p,a);if(m&&!m.conflict){console.log(` CASCADING SHUNT: Successfully shunted conflicting task ${c.odp_number}`),await this.updateTaskSchedule(c.id,m.startTime,m.endTime);const v=await this.scheduleTaskWithSplittingForShuntExcluding(e,n,r,p,a);return v&&!v.conflict?(console.log(` CASCADING SHUNT: Successfully scheduled original task ${e.odp_number} after resolving conflicts`),v):(console.warn(` CASCADING SHUNT: Original task ${e.odp_number} still conflicts after shunting conflicting task`),v||{conflict:!0,conflictingTask:c,conflictingSegment:u,proposedSegments:s.proposedSegments})}else return console.warn(` CASCADING SHUNT: Could not shunt conflicting task ${c?.odp_number}`),m||{conflict:!0,conflictingTask:c,conflictingSegment:u,proposedSegments:s.proposedSegments}}catch(m){return console.error(" CASCADING SHUNT: Error during cascading conflict resolution:",m),{conflict:!0,conflictingTask:c,conflictingSegment:u,proposedSegments:s.proposedSegments}}};updateTaskSchedule=async(e,n,r)=>{try{const{updateOrder:i}=In.getState();await i(e,{scheduled_start_time:n.toISOString(),scheduled_end_time:r.toISOString()})}catch(i){console.error(` CASCADING SHUNT: Failed to update task ${e} schedule:`,i)}};checkShuntingOverlaps=(e,n,r,i=[])=>{const s=r.filter(a=>a.scheduled_machine_id===n&&a.status==="SCHEDULED"&&!i.includes(a.id));for(const a of e)for(const c of s){const u=this.splitTaskManager.checkTaskOverlap(a.start,a.end,c);if(u.hasOverlap)return{hasOverlap:!0,conflictingTask:c,conflictingSegment:u.conflictingSegment,newTaskSegment:a}}return{hasOverlap:!1}};resolveConflictByShunting=async(e,n,r,i)=>{try{const{conflictingTask:s,proposedStartTime:a,machine:c}=e,u=new Date(a),d=r.filter(A=>A.scheduled_machine_id===c.id&&A.status==="SCHEDULED"&&A.id!==i.id).sort((A,M)=>{const P=this.splitTaskManager.getTaskOccupiedSegments(A),O=this.splitTaskManager.getTaskOccupiedSegments(M),H=P.length>0?P[0].start:new Date(A.scheduled_start_time),B=O.length>0?O[0].start:new Date(M.scheduled_start_time);return H-B}),f=d.findIndex(A=>A.id===s.id);if(f===-1)throw new it("Conflicting task not found",je.BUSINESS_LOGIC_ERROR,400,null,"ConflictResolution.resolveConflictByShunting");const p=this.getTaskDurationMinutes(i),m=[];let v=!1;if(n==="right")for(let A=f;A<d.length&&!v;A++){const M=d[A];if(m.push(M),A<d.length-1){const P=d[A+1],O=this.splitTaskManager.getTaskOccupiedSegments(M),H=this.splitTaskManager.getTaskOccupiedSegments(P);if(O.length>0&&H.length>0){const B=Math.max(...O.map(re=>re.end.getTime())),$=Math.min(...H.map(re=>re.start.getTime()));Math.floor(($-B)/(60*1e3))>=p&&(v=!0)}}else v=!0}else for(let A=f;A>=0&&!v;A--){const M=d[A];if(m.unshift(M),A>0){const P=d[A-1],O=this.splitTaskManager.getTaskOccupiedSegments(P),H=this.splitTaskManager.getTaskOccupiedSegments(M);if(O.length>0&&H.length>0){const B=Math.max(...O.map(re=>re.end.getTime())),$=Math.min(...H.map(re=>re.start.getTime()));Math.floor(($-B)/(60*1e3))>=p&&(v=!0)}}else{const P=this.splitTaskManager.getTaskOccupiedSegments(M);if(P.length>0){const O=Math.min(...P.map($=>$.start.getTime())),H=new Date(O);if(H.setUTCHours(6,0,0,0),Math.floor((O-H.getTime())/(60*1e3))>=p)v=!0;else{const $=new Date(O),ee=new Date($);ee.setUTCHours(6,0,0,0),$.getTime()>ee.getTime()&&(v=!0)}}}}const b=new Set,_=new Set;for(const A of m)b.add(A.id),_.add(A.id);_.add(i.id);let w=0;const x=10;for(;w<x;){w++;let A=!1;const M=Array.from(b);for(const P of M){const O=d.find(re=>re.id===P)||i;if(!O)continue;let H;if(n==="right"){const re=new Date(u.getTime()+p*60*1e3);if(H=this.roundUpToNext15MinSlot(re),O.id!==i.id){const he=Array.from(b).indexOf(P);if(he>0){const pe=Array.from(b)[he-1],ie=d.find(q=>q.id===pe)||i,oe=this.getTaskDurationMinutes(ie),K=new Date(H.getTime()+oe*60*1e3);H=this.roundUpToNext15MinSlot(K)}}}else{const re=u,he=this.getTaskDurationMinutes(O);H=this.roundUpToNext15MinSlot(this.addMinutesToDate(re,-he))}const B=this.getTaskDurationMinutes(O)/60,$=this.schedulingLogic.collectUnavailableSlots(H,new Date(H.getTime()+B*60*60*1e3),c.id);if($.some(re=>H<re.end&&new Date(H.getTime()+B*60*60*1e3)>re.start)){const re=this.schedulingLogic.splitTaskAcrossAvailableSlots(H,B,c.id,$);for(const he of re)for(const pe of d)!_.has(pe.id)&&pe.id!==O.id&&this.splitTaskManager.checkTaskOverlap(he.start,he.end,pe).hasOverlap&&(_.add(pe.id),b.add(pe.id),A=!0)}else{const re=new Date(H.getTime()+B*60*60*1e3);for(const he of d)!_.has(he.id)&&he.id!==O.id&&this.splitTaskManager.checkTaskOverlap(H,re,he).hasOverlap&&(_.add(he.id),b.add(he.id),A=!0)}}if(!A)break}if(w>=x)throw console.error(` SHUNTING ERROR: Maximum iterations (${x}) reached, possible infinite loop`),new it("Too many conflicts detected during shunting",je.BUSINESS_LOGIC_ERROR,400,null,"ConflictResolution.resolveConflictByShunting");const C=d.filter(A=>b.has(A.id));if(m.length=0,m.push(...C),!v&&m.length===d.length){const A=this.getTaskDurationMinutes(i),M=m.length,P=c.machine_name||"Unknown Machine";console.warn(` SHUNTING WARNING: No gap found for ${A} minutes on machine ${P}`),console.warn(` All ${M} tasks on machine would need to be moved`),console.warn(" Attempting to schedule at earliest possible time...");const O=d[0],H=this.splitTaskManager.getTaskOccupiedSegments(O);if(H.length>0){const B=Math.min(...H.map(ee=>ee.start.getTime())),$=new Date(B);if($.setUTCHours(6,0,0,0),$.getTime()<B)v=!0;else throw console.error(` SHUNTING FAILED: No space even at 6 AM on machine ${P}`),console.error(" Consider: 1) Moving to different machine, 2) Reducing task duration, 3) Scheduling on different day"),new it(`Non c' spazio sufficiente per spostare i lavori. Il task ${i.odp_number} (${A} minuti) richiederebbe di spostare tutti i ${M} lavori sulla macchina ${P}. Prova a: 1) Spostare su una macchina diversa, 2) Ridurre la durata del task, 3) Programmare in un giorno diverso.`,je.BUSINESS_LOGIC_ERROR,400,null,"ConflictResolution.resolveConflictByShunting")}else throw new it(`Non c' spazio sufficiente per spostare i lavori. Il task ${i.odp_number} (${A} minuti) richiederebbe di spostare tutti i ${M} lavori sulla macchina ${P}. Prova a: 1) Spostare su una macchina diversa, 2) Ridurre la durata del task, 3) Programmare in un giorno diverso.`,je.BUSINESS_LOGIC_ERROR,400,null,"ConflictResolution.resolveConflictByShunting")}const k=[];let R=null;if(n==="right"){const A=new Date(u),M=[...Array.from(_)];if(R=await this.scheduleTaskWithSplittingForShuntExcluding(i,A,c,M),R&&R.conflict)return console.warn(` CASCADING SHUNT: Dragged task ${i.odp_number} still has conflicts after cascading resolution`),{error:`Impossibile programmare il task ${i.odp_number} alla posizione richiesta. Conflitti non risolvibili automaticamente.`,conflict:R.conflict,conflictingTask:R.conflictingTask,conflictingSegment:R.conflictingSegment};let P=R.endTime?this.roundUpToNext15MinSlot(R.endTime):new Date;for(const O of m){const H=[...Array.from(_)],B=await this.scheduleTaskWithSplittingForShuntExcluding(O,P,c,H);if(!B)throw console.error(` Failed to schedule task ${O.odp_number} at ${P.toISOString()}`),new it(`Impossibile programmare il task ${O.odp_number} alla posizione richiesta. Non c' spazio sufficiente.`,je.BUSINESS_LOGIC_ERROR,400,null,"ConflictResolution.resolveConflictByShunting");if(B&&B.conflict){console.warn(` CASCADING SHUNT: Task ${O.odp_number} still has conflicts after cascading resolution`);continue}k.push({id:O.id,scheduled_start_time:B.startTime?.toISOString(),scheduled_end_time:B.endTime?.toISOString()}),B.endTime&&(P=this.roundUpToNext15MinSlot(B.endTime))}}else{const A=new Date(u);let M=this.roundUpToNext15MinSlot(this.addMinutesToDate(A,-1));for(let P=m.length-1;P>=0;P--){const O=m[P],H=[...Array.from(_)],B=await this.schedulingLogic.scheduleTaskEndingAtWithSplitting(O.id,M,this.getTaskDurationMinutes(O)/60,c.id,H);if(!B)throw console.error(` Failed to schedule task ${O.odp_number} ending at ${M.toISOString()}`),new it(`Impossibile programmare il task ${O.odp_number} alla posizione richiesta. Non c' spazio sufficiente.`,je.BUSINESS_LOGIC_ERROR,400,null,"ConflictResolution.resolveConflictByShunting");if(B&&B.conflict){console.warn(` CASCADING SHUNT: Task ${O.odp_number} still has conflicts after cascading resolution (LEFT direction)`);continue}k.push({id:O.id,scheduled_start_time:B.startTime?.toISOString(),scheduled_end_time:B.endTime?.toISOString()}),B.startTime&&(M=this.roundUpToNext15MinSlot(this.addMinutesToDate(B.startTime,-1)))}}if(!R){const A=new Date(u),M=[...Array.from(_)];R=await this.scheduleTaskWithSplittingForShuntExcluding(i,A,c,M)}if(!R)throw console.error(` Failed to schedule dragged task ${i.odp_number} at ${proposedStart.toISOString()}`),new it(`Impossibile programmare il task ${i.odp_number} alla posizione richiesta. Non c' spazio sufficiente.`,je.BUSINESS_LOGIC_ERROR,400,null,"ConflictResolution.resolveConflictByShunting");k.push({id:i.id,scheduled_machine_id:c.id,scheduled_start_time:R.startTime?.toISOString(),scheduled_end_time:R.endTime?.toISOString(),status:"SCHEDULED"});for(const A of k)await ct.updateOdpOrder(A.id,A);return ii.getState().hideConflictDialog(),ii.getState().showAlert("Lavori riprogrammati con successo","success"),{success:!0}}catch(s){return console.error(" SHUNTING ERROR:",s),{error:(s instanceof it?s:new it(s.message||"Errore durante la riprogrammazione",je.BUSINESS_LOGIC_ERROR,400,s,"ConflictResolution.resolveConflictByShunting")).message}}}}class lN{constructor(e,n){this.get=e,this.set=n,this.updateLocks=new Map}getLockKey=(e,n)=>`${e}-${n}`;acquireLock=async(e,n)=>{const r=this.getLockKey(e,n);this.updateLocks.has(r)&&await this.updateLocks.get(r);let i;const s=new Promise(a=>{i=a});return this.updateLocks.set(r,s),i};releaseLock=(e,n)=>{const r=this.getLockKey(e,n);this.updateLocks.delete(r)};loadMachineAvailabilityForDate=async e=>{const{machineAvailability:n}=this.get();if(!n[e]?._loading&&!(n[e]&&n[e].length>=0)){this.set(r=>({machineAvailability:{...r.machineAvailability,[e]:{_loading:!0}}}));try{const r=await ct.getMachineAvailabilityForDateAllMachines(e);this.set(i=>({machineAvailability:{...i.machineAvailability,[e]:r||[]}}))}catch(r){throw this.set(i=>{const s={...i.machineAvailability};return s[e]&&delete s[e]._loading,{machineAvailability:s}}),r}}};loadMachineAvailabilityForDateRange=async(e,n,r)=>{const i=n instanceof Date?pn(n,"yyyy-MM-dd"):n,s=r instanceof Date?pn(r,"yyyy-MM-dd"):r;try{const a=await ct.getMachineAvailabilityForDateRange(e,i,s);return this.set(c=>{const u={...c.machineAvailability};return Array.isArray(a)&&a.forEach(d=>{if(d.date&&d.unavailable_hours){const f=d.date;u[f]||(u[f]=[]);const p=u[f].find(m=>m.machine_id===e);p?p.unavailable_hours=d.unavailable_hours:u[f].push({machine_id:e,date:f,unavailable_hours:d.unavailable_hours})}}),{machineAvailability:u}}),a}catch(a){throw a}};getMachineAvailability=async(e,n)=>{try{const r=this.get().machineAvailability[n];if(r&&Array.isArray(r)){const s=r.find(a=>a.machine_id===e);if(s)return s.unavailable_hours||[]}const i=await ct.getMachineAvailabilityForDate(e,n);if(i){const s=(i.unavailable_hours||[]).map(a=>a.toString());return this.set(a=>{const c={...a.machineAvailability};c[n]||(c[n]=[]);const u=c[n].find(d=>d.machine_id===e);return u?u.unavailable_hours=s:c[n].push({machine_id:e,date:n,unavailable_hours:s}),{machineAvailability:c}}),s}return[]}catch{return[]}};loadMachineAvailabilityForMachine=async(e,n,r)=>{const i={};try{try{await ct.getMachineAvailabilityForDate("test","2025-01-01")}catch{return{}}let s=new Date(n);for(;s<=r;){const a=pn(s,"yyyy-MM-dd");this.get().machineAvailability[a]||await this.loadMachineAvailabilityForDate(a);const u=this.get().machineAvailability[a];if(Array.isArray(u)){const d=u.find(f=>f.machine_id===e);d&&(i[a]=d.unavailable_hours||[])}s=Kl(s,1)}return i}catch{return{}}};isTimeSlotUnavailable=async(e,n,r)=>(await this.getMachineAvailability(e,n)).includes(r.toString());setMachineAvailability=async(e,n,r)=>{const i=await this.acquireLock(e,n);try{const{getOdpOrders:s}=In.getState(),a=s().filter(m=>m.scheduled_machine_id===e&&m.status==="SCHEDULED"&&m.scheduled_start_time&&m.scheduled_end_time),[c,u,d]=n.split("-").map(Number),f=new Date(Date.UTC(c,u-1,d)),p=new Date(f.getTime()+1440*60*1e3);for(const m of a){const v=new Date(m.scheduled_start_time),b=new Date(m.scheduled_end_time);if(v<p&&b>f)for(const _ of r){const w=new Date(f.getTime()+parseInt(_)*60*60*1e3),x=new Date(w.getTime()+3600*1e3);if(w<b&&x>v)throw new it(`Cannot set machine unavailable during scheduled task: ${m.odp_number}`,je.BUSINESS_LOGIC_ERROR,400,null,"MachineAvailabilityManager.setMachineUnavailability")}}return await ct.setMachineAvailability(e,n,r),this.set(m=>{const v={...m.machineAvailability};v[n]||(v[n]=[]);const b=v[n].find(_=>_.machine_id===e);return b?b.unavailable_hours=r:v[n].push({machine_id:e,date:n,unavailable_hours:r}),{machineAvailability:v}}),ii.getState().showAlert(`Machine availability updated successfully for ${n}`,"success"),!0}catch(s){const a=Ks(s);throw ii.getState().showAlert(a.message,"error"),a}finally{i(),this.releaseLock(e,n)}};toggleMachineHourAvailability=async(e,n,r)=>{const i=await this.acquireLock(e,n);try{const s=await this.getMachineAvailability(e,n),a=r.toString();let c;return s.includes(a)?c=s.filter(u=>u!==a):c=[...s,a].sort((u,d)=>parseInt(u)-parseInt(d)),await ct.setMachineAvailability(e,n,c),this.set(u=>{const d={...u.machineAvailability};d[n]||(d[n]=[]);const f=d[n].find(p=>p.machine_id===e);return f?f.unavailable_hours=c:d[n].push({machine_id:e,date:n,unavailable_hours:c}),{machineAvailability:d}}),ii.getState().showAlert(`Time slot ${a}:00 updated successfully`,"success"),!0}catch(s){const a=Ks(s);throw ii.getState().showAlert(a.message,"error"),a}finally{i(),this.releaseLock(e,n)}};setMachineUnavailability=async(e,n,r,i,s)=>{try{const a=await ct.setUnavailableHoursForRange(e,n,r,i,s),c=new Date(n),u=new Date(r),d=await this.loadMachineAvailabilityForDateRange(e,c,u);return d&&Array.isArray(d)&&this.set(f=>{const p={...f.machineAvailability};return d.forEach(m=>{if(m.date&&m.unavailable_hours){const v=pn(new Date(m.date),"yyyy-MM-dd");p[v]||(p[v]=[]);const b=p[v].find(_=>_.machine_id===e);b?b.unavailable_hours=m.unavailable_hours:p[v].push({machine_id:e,date:v,unavailable_hours:m.unavailable_hours})}}),{machineAvailability:p}}),a}catch(a){throw a}};isMachineAvailabilityAccessible=async()=>{try{return await ct.getMachineAvailabilityForDateAllMachines("2025-01-01"),!0}catch{return!1}};getMachineAvailabilityStatus=async()=>{try{const e=await this.isMachineAvailabilityAccessible();return{accessible:e,message:e?"Table is accessible":"Table is not accessible - check permissions or table existence"}}catch(e){return{accessible:!1,message:`Error checking table: ${e.message}`}}};initializeEmptyMachineAvailability=()=>{const{machineAvailability:e}=this.get(),n={...e};this.set({machineAvailability:n})}}const Zl=Ql((t,e)=>{const n=new sN(e,t),r=new lN(e,t),i=new aN(e,t,n,r),s=new oN(e,t,i,n);return{machineAvailability:{},shuntPreview:null,splitTasksInfo:{},getMachineAvailabilityState:()=>e().machineAvailability,getSplitTaskInfo:a=>n.getSplitTaskInfo(a),setMachineAvailabilityState:a=>t({machineAvailability:a}),setShuntPreview:a=>t({shuntPreview:a}),clearShuntPreview:()=>t({shuntPreview:null}),setSplitTaskInfo:n.setSplitTaskInfo,clearSplitTaskInfo:n.clearSplitTaskInfo,updateSplitTaskInfo:n.updateSplitTaskInfo,restoreSplitTaskInfo:n.restoreSplitTaskInfo,updateTaskWithSplitInfo:n.updateTaskWithSplitInfo,getTaskOccupiedSegments:n.getTaskOccupiedSegments,checkTaskOverlap:n.checkTaskOverlap,checkMachineOverlaps:n.checkMachineOverlaps,migrateExistingTasksToSegmentFormat:n.migrateExistingTasksToSegmentFormat,verifyAllTasksHaveSegmentInfo:n.verifyAllTasksHaveSegmentInfo,createAbsoluteDate:i.createAbsoluteDate,splitTaskAcrossAvailableSlots:i.splitTaskAcrossAvailableSlots,collectUnavailableSlots:i.collectUnavailableSlots,scheduleTaskWithSplitting:i.scheduleTaskWithSplitting,findAdjacentTasksChain:i.findAdjacentTasksChain,handleTaskDurationShrinking:i.handleTaskDurationShrinking,scheduleTaskFromSlot:async(a,c,u,d,f,p=null,m=null)=>{const{startSchedulingOperation:v,stopSchedulingOperation:b}=ii.getState();try{v("schedule",a);const{getOrderById:_,getOdpOrders:w}=In.getState(),{getMachineById:x}=gl.getState(),C=_(a),k=x(c.id),R=w();if(!C||!k)return{error:"Task or machine not found"};const A=u.getUTCFullYear(),M=u.getUTCMonth()+1,P=u.getUTCDate(),O=i.createAbsoluteDate(A,M,P,d,f),H=p||C.time_remaining||C.duration||1;console.log(" SCHEDULER: Using duration:",H,"overrideDuration:",p);const B={machine:c.id,start_time:O.toISOString(),end_time:k0(O,H).toISOString()};console.log(" SCHEDULER: Calling scheduleTask with:",{taskId:a,scheduleData:B,overrideDuration:p});const $=await e().scheduleTask(a,B,R,p,m);return console.log(" SCHEDULER: scheduleTask result:",$),$}catch(_){return{error:Ks(_).message}}finally{b()}},rescheduleTaskToSlot:async(a,c,u,d,f,p=null)=>{const{startSchedulingOperation:m,stopSchedulingOperation:v}=ii.getState();try{m("reschedule",a);const{getOrderById:b,getOdpOrders:_}=In.getState(),{getMachineById:w}=gl.getState(),x=b(a),C=w(c.id),k=_();if(!x||!C)return{error:"Event or machine not found"};const R=u.getUTCFullYear(),A=u.getUTCMonth()+1,M=u.getUTCDate(),P=i.createAbsoluteDate(R,A,M,d,f),O=x.time_remaining||x.duration||1,H={machine:c.id,start_time:P.toISOString(),end_time:k0(P,O).toISOString()};return await e().scheduleTask(a,H,k,null,p)}catch(b){return{error:Ks(b).message}}finally{v()}},scheduleTask:async(a,c,u=null,d=null,f=null)=>{try{console.log(" SCHEDULER: scheduleTask called with:",{taskId:a,eventData:c,overrideDuration:d});const{getOrderById:p,getOdpOrders:m}=In.getState(),{getMachineById:v}=gl.getState(),b=p(a),_=v(c.machine),w=u||m();if(console.log(" SCHEDULER: Task found:",b?.odp_number,"Machine found:",_?.name),b&&_&&b.work_center&&_.work_center&&b.work_center!==_.work_center)return{error:`Work center mismatch: task requires '${b.work_center}' but machine is '${_.work_center}'`};const x=new Date(c.start_time),C=d||b.time_remaining||b.duration||1;console.log(" SCHEDULER: scheduleTask using duration:",C,"overrideDuration:",d),console.log(" SCHEDULER: Calling scheduleTaskWithSplitting with:",{taskId:a,newStart:x.toISOString(),timeRemainingHours:C,machineId:c.machine});const k=await i.scheduleTaskWithSplitting(a,x,C,c.machine);if(console.log(" SCHEDULER: scheduleTaskWithSplitting result:",k),!k)return{error:"No available time slots found for this task"};if(k.conflict)return{conflict:!0,conflictingTask:k.conflictingTask,draggedTask:b,proposedStartTime:c.start_time,proposedEndTime:c.end_time,machine:_,conflictingSegment:k.conflictingSegment,proposedSegments:k.proposedSegments,tasks:w};c.start_time=k.startTime.toISOString(),c.end_time=k.endTime.toISOString();const R={scheduled_machine_id:c.machine,scheduled_start_time:c.start_time,scheduled_end_time:c.end_time,status:"SCHEDULED"};if(k.segments){const P={segments:k.segments,totalSegments:k.segments.length,originalDuration:k.originalDuration||b.time_remaining||b.duration||1,wasSplit:k.wasSplit||!1};R.description=JSON.stringify(P)}const{apiService:A}=await Ol(async()=>{const{apiService:P}=await Promise.resolve().then(()=>dg);return{apiService:P}},void 0),M=await A.updateOdpOrder(a,R);if(k.segments){const P={segments:k.segments,totalSegments:k.segments.length,originalDuration:k.originalDuration||b.time_remaining||b.duration||1,wasSplit:k.wasSplit||!1};n.setSplitTaskInfo(a,P)}return f&&(f.invalidateQueries({queryKey:["orders"]}),f.invalidateQueries({queryKey:["orders",a]})),{success:!0,updatedTask:M,schedulingResult:k}}catch(p){return{error:Ks(p).message}}},unscheduleTask:async(a,c=null)=>{const{startSchedulingOperation:u,stopSchedulingOperation:d}=ii.getState();try{u("unschedule",a),n.clearSplitTaskInfo(a);const f={scheduled_machine_id:null,scheduled_start_time:null,scheduled_end_time:null,status:"NOT SCHEDULED",description:""},{apiService:p}=await Ol(async()=>{const{apiService:m}=await Promise.resolve().then(()=>dg);return{apiService:m}},void 0);return await p.updateOdpOrder(a,f),c&&(c.invalidateQueries({queryKey:["orders"]}),c.invalidateQueries({queryKey:["orders",a]})),{success:!0}}catch(f){return{error:Ks(f).message}}finally{d()}},loadMachineAvailabilityForDate:r.loadMachineAvailabilityForDate,loadMachineAvailabilityForDateRange:r.loadMachineAvailabilityForDateRange,getMachineAvailability:r.getMachineAvailability,loadMachineAvailabilityForMachine:r.loadMachineAvailabilityForMachine,isTimeSlotUnavailable:r.isTimeSlotUnavailable,setMachineAvailability:r.setMachineAvailability,toggleMachineHourAvailability:r.toggleMachineHourAvailability,setMachineUnavailability:r.setMachineUnavailability,isMachineAvailabilityAccessible:r.isMachineAvailabilityAccessible,getMachineAvailabilityStatus:r.getMachineAvailabilityStatus,initializeEmptyMachineAvailability:r.initializeEmptyMachineAvailability,resolveConflictByShunting:async(a,c,u=null)=>{const{startSchedulingOperation:d,stopSchedulingOperation:f}=ii.getState();try{d("shunt",a.draggedTask?.id);const{getOdpOrders:p}=In.getState(),m=p(),v=await s.resolveConflictByShunting(a,c,m,a.draggedTask);if(v&&!v.error&&u){console.log(" SHUNTING: Invalidating React Query cache to refresh UI");const b=[u.invalidateQueries({queryKey:["orders"]}),u.invalidateQueries({queryKey:["machines"]})];a.draggedTask?.id&&b.push(u.invalidateQueries({queryKey:["orders",a.draggedTask.id]})),await Promise.all(b)}return v}catch(p){return console.error(" SHUNTING ERROR in scheduler store:",p),{error:p.message||"Errore durante lo spostamento del task"}}finally{f()}},validateSlotAvailability:async(a,c,u,d)=>{try{const f=pn(c,"yyyy-MM-dd");if(await e().isTimeSlotUnavailable(a.id,f,u))return{error:"Cannot schedule task on unavailable time slot"};const{getOdpOrders:m}=In.getState(),v=new Date(c);v.setUTCHours(u,d,0,0);const b=new Date(v.getTime()+3600*1e3),_=m().filter(w=>w.scheduled_machine_id===a.id&&w.status==="SCHEDULED"&&w.scheduled_start_time);for(const w of _){const x=new Date(w.scheduled_start_time),C=w.time_remaining||w.duration||1,k=new Date(x.getTime()+C*60*60*1e3);if(v<k&&b>x)return{error:"Cannot schedule task on occupied time slot"}}return{success:!0}}catch(f){return{error:Ks(f).message}}},getEventsByDate:async a=>{try{return await ct.getEventsByDate(a)}catch{return[]}},reset:()=>t({machineAvailability:{},shuntPreview:null,splitTasksInfo:{}})}}),Ex=()=>{const t=D.useCallback(d=>{if(!d||!d.department)return{isValid:!1,error:"Invalid phase data"};const{department:f}=d;if(f==="STAMPA"){const p=parseFloat(d.v_stampa);if(isNaN(p)||p<=0)return{isValid:!1,error:"Velocit di stampa non valida. Inserisci un valore maggiore di zero."}}else if(f==="CONFEZIONAMENTO"){const p=parseFloat(d.v_conf);if(isNaN(p)||p<=0)return{isValid:!1,error:"Velocit di confezionamento non valida. Inserisci un valore maggiore di zero."}}else return{isValid:!1,error:"Reparto non riconosciuto"};return{isValid:!0}},[]),e=D.useCallback((d,f,p)=>{if(!d||!f||d.department==="STAMPA"&&!p||!t(d).isValid)return null;try{const{department:v}=d;if(v==="STAMPA"){const b=parseFloat(d.v_stampa),_=parseFloat(d.t_setup_stampa)||0,w=parseFloat(d.costo_h_stampa)||0;if(isNaN(b)||b<=0)return null;const C=p*f/1e3/b,k=C+_,R=k*w;return{totals:{duration:k,cost:R},breakdown:{print:{time:C,cost:C*w},setup:{time:_,cost:_*w}}}}else if(v==="CONFEZIONAMENTO"){const b=parseFloat(d.v_conf),_=parseFloat(d.t_setup_conf)||0,w=parseFloat(d.costo_h_conf)||0;if(isNaN(b)||b<=0)return null;const x=f/b,C=_,k=x+C,R=k*w;return{totals:{duration:k,cost:R},breakdown:{package:{time:x,cost:x*w},setup:{time:C,cost:C*w}}}}return null}catch{return null}},[t]),n=D.useCallback(d=>d&&(d.startsWith("P05")||d.startsWith("ISP05"))?"BUSTO_GAROLFO":"ZANICA",[]),r=D.useCallback(d=>d&&d.startsWith("P0")?"CONFEZIONAMENTO":"STAMPA",[]),i=D.useCallback(d=>({STAMPA:["DIGITAL_PRINT","FLEXO_PRINT","ROTOGRAVURE"],CONFEZIONAMENTO:["DOYPACK","PLURI_PIU","MONO_PIU","CONFEZIONAMENTO_TRADIZIONALE","CONFEZIONAMENTO_POLVERI"]})[d]||[],[]),s=D.useCallback((d,f)=>{const m={DIGITAL_PRINT:"DIGI",FLEXO_PRINT:"FLEX",ROTOGRAVURE:"ROTO",DOYPACK:"DOYP",PLURI_PIU:"PLUR",MONO_PIU:"MONO",CONFEZIONAMENTO_TRADIZIONALE:"CONFTRAD",CONFEZIONAMENTO_POLVERI:"CONFPOL"}[d]||"MACH",v=f==="BUSTO_GAROLFO"?"BGF":"ZAN",b=Date.now().toString(36);return`${m}_${v}_${b}`},[]),a=D.useCallback((d,f)=>!(f<0||f>d),[]),c=D.useCallback((d,f)=>!d||d===0?0:Math.round(f*100/d),[]),u=D.useCallback((d,f)=>!d||d===0?0:!f||f===0?d:Math.round(d*(1-f/100)*100)/100,[]);return{calculateProductionMetrics:e,validatePhaseParameters:t,autoDetermineWorkCenter:n,autoDetermineDepartment:r,getValidMachineTypes:i,generateMachineId:s,validateQuantityCompleted:a,calculateCompletionRate:c,calculateTimeRemaining:u}};var gp,P0;function cN(){if(P0)return gp;P0=1;function t(x){this._maxSize=x,this.clear()}t.prototype.clear=function(){this._size=0,this._values=Object.create(null)},t.prototype.get=function(x){return this._values[x]},t.prototype.set=function(x,C){return this._size>=this._maxSize&&this.clear(),x in this._values||this._size++,this._values[x]=C};var e=/[^.^\]^[]+|(?=\[\]|\.\.)/g,n=/^\d+$/,r=/^\d/,i=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,s=/^\s*(['"]?)(.*?)(\1)\s*$/,a=512,c=new t(a),u=new t(a),d=new t(a);gp={Cache:t,split:p,normalizePath:f,setter:function(x){var C=f(x);return u.get(x)||u.set(x,function(R,A){for(var M=0,P=C.length,O=R;M<P-1;){var H=C[M];if(H==="__proto__"||H==="constructor"||H==="prototype")return R;O=O[C[M++]]}O[C[M]]=A})},getter:function(x,C){var k=f(x);return d.get(x)||d.set(x,function(A){for(var M=0,P=k.length;M<P;)if(A!=null||!C)A=A[k[M++]];else return;return A})},join:function(x){return x.reduce(function(C,k){return C+(v(k)||n.test(k)?"["+k+"]":(C?".":"")+k)},"")},forEach:function(x,C,k){m(Array.isArray(x)?x:p(x),C,k)}};function f(x){return c.get(x)||c.set(x,p(x).map(function(C){return C.replace(s,"$2")}))}function p(x){return x.match(e)||[""]}function m(x,C,k){var R=x.length,A,M,P,O;for(M=0;M<R;M++)A=x[M],A&&(w(A)&&(A='"'+A+'"'),O=v(A),P=!O&&/^\d+$/.test(A),C.call(k,A,O,P,M,x))}function v(x){return typeof x=="string"&&x&&["'",'"'].indexOf(x.charAt(0))!==-1}function b(x){return x.match(r)&&!x.match(n)}function _(x){return i.test(x)}function w(x){return!v(x)&&(b(x)||_(x))}return gp}var na=cN(),mp,L0;function uN(){if(L0)return mp;L0=1;const t=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,e=f=>f.match(t)||[],n=f=>f[0].toUpperCase()+f.slice(1),r=(f,p)=>e(f).join(p).toLowerCase(),i=f=>e(f).reduce((p,m)=>`${p}${p?m[0].toUpperCase()+m.slice(1).toLowerCase():m.toLowerCase()}`,"");return mp={words:e,upperFirst:n,camelCase:i,pascalCase:f=>n(i(f)),snakeCase:f=>r(f,"_"),kebabCase:f=>r(f,"-"),sentenceCase:f=>n(r(f," ")),titleCase:f=>e(f).map(n).join(" ")},mp}var vp=uN(),xu={exports:{}},F0;function dN(){if(F0)return xu.exports;F0=1,xu.exports=function(i){return t(e(i),i)},xu.exports.array=t;function t(i,s){var a=i.length,c=new Array(a),u={},d=a,f=n(s),p=r(i);for(s.forEach(function(v){if(!p.has(v[0])||!p.has(v[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});d--;)u[d]||m(i[d],d,new Set);return c;function m(v,b,_){if(_.has(v)){var w;try{w=", node was:"+JSON.stringify(v)}catch{w=""}throw new Error("Cyclic dependency"+w)}if(!p.has(v))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(v));if(!u[b]){u[b]=!0;var x=f.get(v)||new Set;if(x=Array.from(x),b=x.length){_.add(v);do{var C=x[--b];m(C,p.get(C),_)}while(b);_.delete(v)}c[--a]=v}}}function e(i){for(var s=new Set,a=0,c=i.length;a<c;a++){var u=i[a];s.add(u[0]),s.add(u[1])}return Array.from(s)}function n(i){for(var s=new Map,a=0,c=i.length;a<c;a++){var u=i[a];s.has(u[0])||s.set(u[0],new Set),s.has(u[1])||s.set(u[1],new Set),s.get(u[0]).add(u[1])}return s}function r(i){for(var s=new Map,a=0,c=i.length;a<c;a++)s.set(i[a],a);return s}return xu.exports}var fN=dN();const hN=Ud(fN),pN=Object.prototype.toString,gN=Error.prototype.toString,mN=RegExp.prototype.toString,vN=typeof Symbol<"u"?Symbol.prototype.toString:()=>"",yN=/^Symbol\((.*)\)(.*)$/;function bN(t){return t!=+t?"NaN":t===0&&1/t<0?"-0":""+t}function j0(t,e=!1){if(t==null||t===!0||t===!1)return""+t;const n=typeof t;if(n==="number")return bN(t);if(n==="string")return e?`"${t}"`:t;if(n==="function")return"[Function "+(t.name||"anonymous")+"]";if(n==="symbol")return vN.call(t).replace(yN,"Symbol($1)");const r=pN.call(t).slice(8,-1);return r==="Date"?isNaN(t.getTime())?""+t:t.toISOString(t):r==="Error"||t instanceof Error?"["+gN.call(t)+"]":r==="RegExp"?mN.call(t):null}function Mi(t,e){let n=j0(t,e);return n!==null?n:JSON.stringify(t,function(r,i){let s=j0(this[r],e);return s!==null?s:i},2)}function Cx(t){return t==null?[]:[].concat(t)}let Tx,Dx,kx,_N=/\$\{\s*(\w+)\s*\}/g;Tx=Symbol.toStringTag;class H0{constructor(e,n,r,i){this.name=void 0,this.message=void 0,this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=void 0,this.inner=void 0,this[Tx]="Error",this.name="ValidationError",this.value=n,this.path=r,this.type=i,this.errors=[],this.inner=[],Cx(e).forEach(s=>{if(Nn.isError(s)){this.errors.push(...s.errors);const a=s.inner.length?s.inner:[s];this.inner.push(...a)}else this.errors.push(s)}),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0]}}Dx=Symbol.hasInstance;kx=Symbol.toStringTag;class Nn extends Error{static formatError(e,n){const r=n.label||n.path||"this";return n=Object.assign({},n,{path:r,originalPath:n.path}),typeof e=="string"?e.replace(_N,(i,s)=>Mi(n[s])):typeof e=="function"?e(n):e}static isError(e){return e&&e.name==="ValidationError"}constructor(e,n,r,i,s){const a=new H0(e,n,r,i);if(s)return a;super(),this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=[],this.inner=[],this[kx]="Error",this.name=a.name,this.message=a.message,this.type=a.type,this.value=a.value,this.path=a.path,this.errors=a.errors,this.inner=a.inner,Error.captureStackTrace&&Error.captureStackTrace(this,Nn)}static[Dx](e){return H0[Symbol.hasInstance](e)||super[Symbol.hasInstance](e)}}let ei={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:t,type:e,value:n,originalValue:r})=>{const i=r!=null&&r!==n?` (cast from the value \`${Mi(r,!0)}\`).`:".";return e!=="mixed"?`${t} must be a \`${e}\` type, but the final value was: \`${Mi(n,!0)}\``+i:`${t} must match the configured type. The validated value was: \`${Mi(n,!0)}\``+i}},Qn={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",datetime:"${path} must be a valid ISO date-time",datetime_precision:"${path} must be a valid ISO date-time with a sub-second precision of exactly ${precision} digits",datetime_offset:'${path} must be a valid ISO date-time with UTC "Z" timezone',trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},os={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},fg={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},SN={isValue:"${path} field must be ${value}"},Yu={noUnknown:"${path} field has unspecified keys: ${unknown}",exact:"${path} object contains unknown properties: ${properties}"},Qu={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},wN={notType:t=>{const{path:e,value:n,spec:r}=t,i=r.types.length;if(Array.isArray(n)){if(n.length<i)return`${e} tuple value has too few items, expected a length of ${i} but got ${n.length} for value: \`${Mi(n,!0)}\``;if(n.length>i)return`${e} tuple value has too many items, expected a length of ${i} but got ${n.length} for value: \`${Mi(n,!0)}\``}return Nn.formatError(ei.notType,t)}};Object.assign(Object.create(null),{mixed:ei,string:Qn,number:os,date:fg,object:Yu,array:Qu,boolean:SN,tuple:wN});const Xd=t=>t&&t.__isYupSchema__;class fd{static fromOptions(e,n){if(!n.then&&!n.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:r,then:i,otherwise:s}=n,a=typeof r=="function"?r:(...c)=>c.every(u=>u===r);return new fd(e,(c,u)=>{var d;let f=a(...c)?i:s;return(d=f?.(u))!=null?d:u})}constructor(e,n){this.fn=void 0,this.refs=e,this.refs=e,this.fn=n}resolve(e,n){let r=this.refs.map(s=>s.getValue(n?.value,n?.parent,n?.context)),i=this.fn(r,e,n);if(i===void 0||i===e)return e;if(!Xd(i))throw new TypeError("conditions must return a schema object");return i.resolve(n)}}const Eu={context:"$",value:"."};class ga{constructor(e,n={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,typeof e!="string")throw new TypeError("ref must be a string, got: "+e);if(this.key=e.trim(),e==="")throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===Eu.context,this.isValue=this.key[0]===Eu.value,this.isSibling=!this.isContext&&!this.isValue;let r=this.isContext?Eu.context:this.isValue?Eu.value:"";this.path=this.key.slice(r.length),this.getter=this.path&&na.getter(this.path,!0),this.map=n.map}getValue(e,n,r){let i=this.isContext?r:this.isValue?e:n;return this.getter&&(i=this.getter(i||{})),this.map&&(i=this.map(i)),i}cast(e,n){return this.getValue(e,n?.parent,n?.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(e){return e&&e.__isYupRef}}ga.prototype.__isYupRef=!0;const Di=t=>t==null;function $a(t){function e({value:n,path:r="",options:i,originalValue:s,schema:a},c,u){const{name:d,test:f,params:p,message:m,skipAbsent:v}=t;let{parent:b,context:_,abortEarly:w=a.spec.abortEarly,disableStackTrace:x=a.spec.disableStackTrace}=i;const C={value:n,parent:b,context:_};function k($={}){const ee=Ax(Object.assign({value:n,originalValue:s,label:a.spec.label,path:$.path||r,spec:a.spec,disableStackTrace:$.disableStackTrace||x},p,$.params),C),re=new Nn(Nn.formatError($.message||m,ee),n,ee.path,$.type||d,ee.disableStackTrace);return re.params=ee,re}const R=w?c:u;let A={path:r,parent:b,type:d,from:i.from,createError:k,resolve($){return Rx($,C)},options:i,originalValue:s,schema:a};const M=$=>{Nn.isError($)?R($):$?u(null):R(k())},P=$=>{Nn.isError($)?R($):c($)};if(v&&Di(n))return M(!0);let H;try{var B;if(H=f.call(A,n,A),typeof((B=H)==null?void 0:B.then)=="function"){if(i.sync)throw new Error(`Validation test of type: "${A.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`);return Promise.resolve(H).then(M,P)}}catch($){P($);return}M(H)}return e.OPTIONS=t,e}function Ax(t,e){if(!t)return t;for(const n of Object.keys(t))t[n]=Rx(t[n],e);return t}function Rx(t,e){return ga.isRef(t)?t.getValue(e.value,e.parent,e.context):t}function xN(t,e,n,r=n){let i,s,a;return e?(na.forEach(e,(c,u,d)=>{let f=u?c.slice(1,c.length-1):c;t=t.resolve({context:r,parent:i,value:n});let p=t.type==="tuple",m=d?parseInt(f,10):0;if(t.innerType||p){if(p&&!d)throw new Error(`Yup.reach cannot implicitly index into a tuple type. the path part "${a}" must contain an index to the tuple element, e.g. "${a}[0]"`);if(n&&m>=n.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${c}, in the path: ${e}. because there is no value at that index. `);i=n,n=n&&n[m],t=p?t.spec.types[m]:t.innerType}if(!d){if(!t.fields||!t.fields[f])throw new Error(`The schema does not contain the path: ${e}. (failed at: ${a} which is a type: "${t.type}")`);i=n,n=n&&n[f],t=t.fields[f]}s=f,a=u?"["+c+"]":"."+c}),{schema:t,parent:i,parentPath:s}):{parent:i,parentPath:e,schema:t}}class hd extends Set{describe(){const e=[];for(const n of this.values())e.push(ga.isRef(n)?n.describe():n);return e}resolveAll(e){let n=[];for(const r of this.values())n.push(e(r));return n}clone(){return new hd(this.values())}merge(e,n){const r=this.clone();return e.forEach(i=>r.add(i)),n.forEach(i=>r.delete(i)),r}}function Ka(t,e=new Map){if(Xd(t)||!t||typeof t!="object")return t;if(e.has(t))return e.get(t);let n;if(t instanceof Date)n=new Date(t.getTime()),e.set(t,n);else if(t instanceof RegExp)n=new RegExp(t),e.set(t,n);else if(Array.isArray(t)){n=new Array(t.length),e.set(t,n);for(let r=0;r<t.length;r++)n[r]=Ka(t[r],e)}else if(t instanceof Map){n=new Map,e.set(t,n);for(const[r,i]of t.entries())n.set(r,Ka(i,e))}else if(t instanceof Set){n=new Set,e.set(t,n);for(const r of t)n.add(Ka(r,e))}else if(t instanceof Object){n={},e.set(t,n);for(const[r,i]of Object.entries(t))n[r]=Ka(i,e)}else throw Error(`Unable to clone ${t}`);return n}function EN(t){if(!(t!=null&&t.length))return;const e=[];let n="",r=!1,i=!1;for(let s=0;s<t.length;s++){const a=t[s];if(a==="["&&!i){n&&(e.push(...n.split(".").filter(Boolean)),n=""),r=!0;continue}if(a==="]"&&!i){n&&(/^\d+$/.test(n)?e.push(n):e.push(n.replace(/^"|"$/g,"")),n=""),r=!1;continue}if(a==='"'){i=!i;continue}if(a==="."&&!r&&!i){n&&(e.push(n),n="");continue}n+=a}return n&&e.push(...n.split(".").filter(Boolean)),e}function CN(t,e){const n=e?`${e}.${t.path}`:t.path;return t.errors.map(r=>({message:r,path:EN(n)}))}function Ox(t,e){var n;if(!((n=t.inner)!=null&&n.length)&&t.errors.length)return CN(t,e);const r=e?`${e}.${t.path}`:t.path;return t.inner.flatMap(i=>Ox(i,r))}class Tr{constructor(e){this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new hd,this._blacklist=new hd,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation(()=>{this.typeError(ei.notType)}),this.type=e.type,this._typeCheck=e.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,disableStackTrace:!1,nullable:!1,optional:!0,coerce:!0},e?.spec),this.withMutation(n=>{n.nonNullable()})}get _type(){return this.type}clone(e){if(this._mutate)return e&&Object.assign(this.spec,e),this;const n=Object.create(Object.getPrototypeOf(this));return n.type=this.type,n._typeCheck=this._typeCheck,n._whitelist=this._whitelist.clone(),n._blacklist=this._blacklist.clone(),n.internalTests=Object.assign({},this.internalTests),n.exclusiveTests=Object.assign({},this.exclusiveTests),n.deps=[...this.deps],n.conditions=[...this.conditions],n.tests=[...this.tests],n.transforms=[...this.transforms],n.spec=Ka(Object.assign({},this.spec,e)),n}label(e){let n=this.clone();return n.spec.label=e,n}meta(...e){if(e.length===0)return this.spec.meta;let n=this.clone();return n.spec.meta=Object.assign(n.spec.meta||{},e[0]),n}withMutation(e){let n=this._mutate;this._mutate=!0;let r=e(this);return this._mutate=n,r}concat(e){if(!e||e===this)return this;if(e.type!==this.type&&this.type!=="mixed")throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${e.type}`);let n=this,r=e.clone();const i=Object.assign({},n.spec,r.spec);return r.spec=i,r.internalTests=Object.assign({},n.internalTests,r.internalTests),r._whitelist=n._whitelist.merge(e._whitelist,e._blacklist),r._blacklist=n._blacklist.merge(e._blacklist,e._whitelist),r.tests=n.tests,r.exclusiveTests=n.exclusiveTests,r.withMutation(s=>{e.tests.forEach(a=>{s.test(a.OPTIONS)})}),r.transforms=[...n.transforms,...r.transforms],r}isType(e){return e==null?!!(this.spec.nullable&&e===null||this.spec.optional&&e===void 0):this._typeCheck(e)}resolve(e){let n=this;if(n.conditions.length){let r=n.conditions;n=n.clone(),n.conditions=[],n=r.reduce((i,s)=>s.resolve(i,e),n),n=n.resolve(e)}return n}resolveOptions(e){var n,r,i,s;return Object.assign({},e,{from:e.from||[],strict:(n=e.strict)!=null?n:this.spec.strict,abortEarly:(r=e.abortEarly)!=null?r:this.spec.abortEarly,recursive:(i=e.recursive)!=null?i:this.spec.recursive,disableStackTrace:(s=e.disableStackTrace)!=null?s:this.spec.disableStackTrace})}cast(e,n={}){let r=this.resolve(Object.assign({},n,{value:e})),i=n.assert==="ignore-optionality",s=r._cast(e,n);if(n.assert!==!1&&!r.isType(s)){if(i&&Di(s))return s;let a=Mi(e),c=Mi(s);throw new TypeError(`The value of ${n.path||"field"} could not be cast to a value that satisfies the schema type: "${r.type}". 

attempted value: ${a} 
`+(c!==a?`result of cast: ${c}`:""))}return s}_cast(e,n){let r=e===void 0?e:this.transforms.reduce((i,s)=>s.call(this,i,e,this,n),e);return r===void 0&&(r=this.getDefault(n)),r}_validate(e,n={},r,i){let{path:s,originalValue:a=e,strict:c=this.spec.strict}=n,u=e;c||(u=this._cast(u,Object.assign({assert:!1},n)));let d=[];for(let f of Object.values(this.internalTests))f&&d.push(f);this.runTests({path:s,value:u,originalValue:a,options:n,tests:d},r,f=>{if(f.length)return i(f,u);this.runTests({path:s,value:u,originalValue:a,options:n,tests:this.tests},r,i)})}runTests(e,n,r){let i=!1,{tests:s,value:a,originalValue:c,path:u,options:d}=e,f=_=>{i||(i=!0,n(_,a))},p=_=>{i||(i=!0,r(_,a))},m=s.length,v=[];if(!m)return p([]);let b={value:a,originalValue:c,path:u,options:d,schema:this};for(let _=0;_<s.length;_++){const w=s[_];w(b,f,function(C){C&&(Array.isArray(C)?v.push(...C):v.push(C)),--m<=0&&p(v)})}}asNestedTest({key:e,index:n,parent:r,parentPath:i,originalParent:s,options:a}){const c=e??n;if(c==null)throw TypeError("Must include `key` or `index` for nested validations");const u=typeof c=="number";let d=r[c];const f=Object.assign({},a,{strict:!0,parent:r,value:d,originalValue:s[c],key:void 0,[u?"index":"key"]:c,path:u||c.includes(".")?`${i||""}[${u?c:`"${c}"`}]`:(i?`${i}.`:"")+e});return(p,m,v)=>this.resolve(f)._validate(d,f,m,v)}validate(e,n){var r;let i=this.resolve(Object.assign({},n,{value:e})),s=(r=n?.disableStackTrace)!=null?r:i.spec.disableStackTrace;return new Promise((a,c)=>i._validate(e,n,(u,d)=>{Nn.isError(u)&&(u.value=d),c(u)},(u,d)=>{u.length?c(new Nn(u,d,void 0,void 0,s)):a(d)}))}validateSync(e,n){var r;let i=this.resolve(Object.assign({},n,{value:e})),s,a=(r=n?.disableStackTrace)!=null?r:i.spec.disableStackTrace;return i._validate(e,Object.assign({},n,{sync:!0}),(c,u)=>{throw Nn.isError(c)&&(c.value=u),c},(c,u)=>{if(c.length)throw new Nn(c,e,void 0,void 0,a);s=u}),s}isValid(e,n){return this.validate(e,n).then(()=>!0,r=>{if(Nn.isError(r))return!1;throw r})}isValidSync(e,n){try{return this.validateSync(e,n),!0}catch(r){if(Nn.isError(r))return!1;throw r}}_getDefault(e){let n=this.spec.default;return n==null?n:typeof n=="function"?n.call(this,e):Ka(n)}getDefault(e){return this.resolve(e||{})._getDefault(e)}default(e){return arguments.length===0?this._getDefault():this.clone({default:e})}strict(e=!0){return this.clone({strict:e})}nullability(e,n){const r=this.clone({nullable:e});return r.internalTests.nullable=$a({message:n,name:"nullable",test(i){return i===null?this.schema.spec.nullable:!0}}),r}optionality(e,n){const r=this.clone({optional:e});return r.internalTests.optionality=$a({message:n,name:"optionality",test(i){return i===void 0?this.schema.spec.optional:!0}}),r}optional(){return this.optionality(!0)}defined(e=ei.defined){return this.optionality(!1,e)}nullable(){return this.nullability(!0)}nonNullable(e=ei.notNull){return this.nullability(!1,e)}required(e=ei.required){return this.clone().withMutation(n=>n.nonNullable(e).defined(e))}notRequired(){return this.clone().withMutation(e=>e.nullable().optional())}transform(e){let n=this.clone();return n.transforms.push(e),n}test(...e){let n;if(e.length===1?typeof e[0]=="function"?n={test:e[0]}:n=e[0]:e.length===2?n={name:e[0],test:e[1]}:n={name:e[0],message:e[1],test:e[2]},n.message===void 0&&(n.message=ei.default),typeof n.test!="function")throw new TypeError("`test` is a required parameters");let r=this.clone(),i=$a(n),s=n.exclusive||n.name&&r.exclusiveTests[n.name]===!0;if(n.exclusive&&!n.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return n.name&&(r.exclusiveTests[n.name]=!!n.exclusive),r.tests=r.tests.filter(a=>!(a.OPTIONS.name===n.name&&(s||a.OPTIONS.test===i.OPTIONS.test))),r.tests.push(i),r}when(e,n){!Array.isArray(e)&&typeof e!="string"&&(n=e,e=".");let r=this.clone(),i=Cx(e).map(s=>new ga(s));return i.forEach(s=>{s.isSibling&&r.deps.push(s.key)}),r.conditions.push(typeof n=="function"?new fd(i,n):fd.fromOptions(i,n)),r}typeError(e){let n=this.clone();return n.internalTests.typeError=$a({message:e,name:"typeError",skipAbsent:!0,test(r){return this.schema._typeCheck(r)?!0:this.createError({params:{type:this.schema.type}})}}),n}oneOf(e,n=ei.oneOf){let r=this.clone();return e.forEach(i=>{r._whitelist.add(i),r._blacklist.delete(i)}),r.internalTests.whiteList=$a({message:n,name:"oneOf",skipAbsent:!0,test(i){let s=this.schema._whitelist,a=s.resolveAll(this.resolve);return a.includes(i)?!0:this.createError({params:{values:Array.from(s).join(", "),resolved:a}})}}),r}notOneOf(e,n=ei.notOneOf){let r=this.clone();return e.forEach(i=>{r._blacklist.add(i),r._whitelist.delete(i)}),r.internalTests.blacklist=$a({message:n,name:"notOneOf",test(i){let s=this.schema._blacklist,a=s.resolveAll(this.resolve);return a.includes(i)?this.createError({params:{values:Array.from(s).join(", "),resolved:a}}):!0}}),r}strip(e=!0){let n=this.clone();return n.spec.strip=e,n}describe(e){const n=(e?this.resolve(e):this).clone(),{label:r,meta:i,optional:s,nullable:a}=n.spec;return{meta:i,label:r,optional:s,nullable:a,default:n.getDefault(e),type:n.type,oneOf:n._whitelist.describe(),notOneOf:n._blacklist.describe(),tests:n.tests.filter((u,d,f)=>f.findIndex(p=>p.OPTIONS.name===u.OPTIONS.name)===d).map(u=>{const d=u.OPTIONS.params&&e?Ax(Object.assign({},u.OPTIONS.params),e):u.OPTIONS.params;return{name:u.OPTIONS.name,params:d}})}}get"~standard"(){const e=this;return{version:1,vendor:"yup",async validate(r){try{return{value:await e.validate(r,{abortEarly:!1})}}catch(i){if(i instanceof Nn)return{issues:Ox(i)};throw i}}}}}Tr.prototype.__isYupSchema__=!0;for(const t of["validate","validateSync"])Tr.prototype[`${t}At`]=function(e,n,r={}){const{parent:i,parentPath:s,schema:a}=xN(this,e,n,r.context);return a[t](i&&i[s],Object.assign({},r,{parent:i,path:e}))};for(const t of["equals","is"])Tr.prototype[t]=Tr.prototype.oneOf;for(const t of["not","nope"])Tr.prototype[t]=Tr.prototype.notOneOf;const TN=/^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,.](\d{1,}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;function DN(t){const e=hg(t);if(!e)return Date.parse?Date.parse(t):Number.NaN;if(e.z===void 0&&e.plusMinus===void 0)return new Date(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond).valueOf();let n=0;return e.z!=="Z"&&e.plusMinus!==void 0&&(n=e.hourOffset*60+e.minuteOffset,e.plusMinus==="+"&&(n=0-n)),Date.UTC(e.year,e.month,e.day,e.hour,e.minute+n,e.second,e.millisecond)}function hg(t){var e,n;const r=TN.exec(t);return r?{year:yi(r[1]),month:yi(r[2],1)-1,day:yi(r[3],1),hour:yi(r[4]),minute:yi(r[5]),second:yi(r[6]),millisecond:r[7]?yi(r[7].substring(0,3)):0,precision:(e=(n=r[7])==null?void 0:n.length)!=null?e:void 0,z:r[8]||void 0,plusMinus:r[9]||void 0,hourOffset:yi(r[10]),minuteOffset:yi(r[11])}:null}function yi(t,e=0){return Number(t)||e}let kN=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,AN=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,RN=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,ON="^\\d{4}-\\d{2}-\\d{2}",MN="\\d{2}:\\d{2}:\\d{2}",NN="(([+-]\\d{2}(:?\\d{2})?)|Z)",IN=new RegExp(`${ON}T${MN}(\\.\\d+)?${NN}$`),PN=t=>Di(t)||t===t.trim(),LN={}.toString();function Kn(){return new Mx}class Mx extends Tr{constructor(){super({type:"string",check(e){return e instanceof String&&(e=e.valueOf()),typeof e=="string"}}),this.withMutation(()=>{this.transform((e,n)=>{if(!this.spec.coerce||this.isType(e)||Array.isArray(e))return e;const r=e!=null&&e.toString?e.toString():e;return r===LN?e:r})})}required(e){return super.required(e).withMutation(n=>n.test({message:e||ei.required,name:"required",skipAbsent:!0,test:r=>!!r.length}))}notRequired(){return super.notRequired().withMutation(e=>(e.tests=e.tests.filter(n=>n.OPTIONS.name!=="required"),e))}length(e,n=Qn.length){return this.test({message:n,name:"length",exclusive:!0,params:{length:e},skipAbsent:!0,test(r){return r.length===this.resolve(e)}})}min(e,n=Qn.min){return this.test({message:n,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(r){return r.length>=this.resolve(e)}})}max(e,n=Qn.max){return this.test({name:"max",exclusive:!0,message:n,params:{max:e},skipAbsent:!0,test(r){return r.length<=this.resolve(e)}})}matches(e,n){let r=!1,i,s;return n&&(typeof n=="object"?{excludeEmptyString:r=!1,message:i,name:s}=n:i=n),this.test({name:s||"matches",message:i||Qn.matches,params:{regex:e},skipAbsent:!0,test:a=>a===""&&r||a.search(e)!==-1})}email(e=Qn.email){return this.matches(kN,{name:"email",message:e,excludeEmptyString:!0})}url(e=Qn.url){return this.matches(AN,{name:"url",message:e,excludeEmptyString:!0})}uuid(e=Qn.uuid){return this.matches(RN,{name:"uuid",message:e,excludeEmptyString:!1})}datetime(e){let n="",r,i;return e&&(typeof e=="object"?{message:n="",allowOffset:r=!1,precision:i=void 0}=e:n=e),this.matches(IN,{name:"datetime",message:n||Qn.datetime,excludeEmptyString:!0}).test({name:"datetime_offset",message:n||Qn.datetime_offset,params:{allowOffset:r},skipAbsent:!0,test:s=>{if(!s||r)return!0;const a=hg(s);return a?!!a.z:!1}}).test({name:"datetime_precision",message:n||Qn.datetime_precision,params:{precision:i},skipAbsent:!0,test:s=>{if(!s||i==null)return!0;const a=hg(s);return a?a.precision===i:!1}})}ensure(){return this.default("").transform(e=>e===null?"":e)}trim(e=Qn.trim){return this.transform(n=>n!=null?n.trim():n).test({message:e,name:"trim",test:PN})}lowercase(e=Qn.lowercase){return this.transform(n=>Di(n)?n:n.toLowerCase()).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:n=>Di(n)||n===n.toLowerCase()})}uppercase(e=Qn.uppercase){return this.transform(n=>Di(n)?n:n.toUpperCase()).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:n=>Di(n)||n===n.toUpperCase()})}}Kn.prototype=Mx.prototype;let FN=t=>t!=+t;function nn(){return new Nx}class Nx extends Tr{constructor(){super({type:"number",check(e){return e instanceof Number&&(e=e.valueOf()),typeof e=="number"&&!FN(e)}}),this.withMutation(()=>{this.transform((e,n)=>{if(!this.spec.coerce)return e;let r=e;if(typeof r=="string"){if(r=r.replace(/\s/g,""),r==="")return NaN;r=+r}return this.isType(r)||r===null?r:parseFloat(r)})})}min(e,n=os.min){return this.test({message:n,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(r){return r>=this.resolve(e)}})}max(e,n=os.max){return this.test({message:n,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(r){return r<=this.resolve(e)}})}lessThan(e,n=os.lessThan){return this.test({message:n,name:"max",exclusive:!0,params:{less:e},skipAbsent:!0,test(r){return r<this.resolve(e)}})}moreThan(e,n=os.moreThan){return this.test({message:n,name:"min",exclusive:!0,params:{more:e},skipAbsent:!0,test(r){return r>this.resolve(e)}})}positive(e=os.positive){return this.moreThan(0,e)}negative(e=os.negative){return this.lessThan(0,e)}integer(e=os.integer){return this.test({name:"integer",message:e,skipAbsent:!0,test:n=>Number.isInteger(n)})}truncate(){return this.transform(e=>Di(e)?e:e|0)}round(e){var n;let r=["ceil","floor","round","trunc"];if(e=((n=e)==null?void 0:n.toLowerCase())||"round",e==="trunc")return this.truncate();if(r.indexOf(e.toLowerCase())===-1)throw new TypeError("Only valid options for round() are: "+r.join(", "));return this.transform(i=>Di(i)?i:Math[e](i))}}nn.prototype=Nx.prototype;let Ix=new Date(""),jN=t=>Object.prototype.toString.call(t)==="[object Date]";function ml(){return new Xl}class Xl extends Tr{constructor(){super({type:"date",check(e){return jN(e)&&!isNaN(e.getTime())}}),this.withMutation(()=>{this.transform((e,n)=>!this.spec.coerce||this.isType(e)||e===null?e:(e=DN(e),isNaN(e)?Xl.INVALID_DATE:new Date(e)))})}prepareParam(e,n){let r;if(ga.isRef(e))r=e;else{let i=this.cast(e);if(!this._typeCheck(i))throw new TypeError(`\`${n}\` must be a Date or a value that can be \`cast()\` to a Date`);r=i}return r}min(e,n=fg.min){let r=this.prepareParam(e,"min");return this.test({message:n,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(i){return i>=this.resolve(r)}})}max(e,n=fg.max){let r=this.prepareParam(e,"max");return this.test({message:n,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(i){return i<=this.resolve(r)}})}}Xl.INVALID_DATE=Ix;ml.prototype=Xl.prototype;ml.INVALID_DATE=Ix;function HN(t,e=[]){let n=[],r=new Set,i=new Set(e.map(([a,c])=>`${a}-${c}`));function s(a,c){let u=na.split(a)[0];r.add(u),i.has(`${c}-${u}`)||n.push([c,u])}for(const a of Object.keys(t)){let c=t[a];r.add(a),ga.isRef(c)&&c.isSibling?s(c.path,a):Xd(c)&&"deps"in c&&c.deps.forEach(u=>s(u,a))}return hN.array(Array.from(r),n).reverse()}function z0(t,e){let n=1/0;return t.some((r,i)=>{var s;if((s=e.path)!=null&&s.includes(r))return n=i,!0}),n}function Px(t){return(e,n)=>z0(t,e)-z0(t,n)}const Lx=(t,e,n)=>{if(typeof t!="string")return t;let r=t;try{r=JSON.parse(t)}catch{}return n.isType(r)?r:t};function Ku(t){if("fields"in t){const e={};for(const[n,r]of Object.entries(t.fields))e[n]=Ku(r);return t.setFields(e)}if(t.type==="array"){const e=t.optional();return e.innerType&&(e.innerType=Ku(e.innerType)),e}return t.type==="tuple"?t.optional().clone({types:t.spec.types.map(Ku)}):"optional"in t?t.optional():t}const zN=(t,e)=>{const n=[...na.normalizePath(e)];if(n.length===1)return n[0]in t;let r=n.pop(),i=na.getter(na.join(n),!0)(t);return!!(i&&r in i)};let U0=t=>Object.prototype.toString.call(t)==="[object Object]";function B0(t,e){let n=Object.keys(t.fields);return Object.keys(e).filter(r=>n.indexOf(r)===-1)}const UN=Px([]);function Es(t){return new Fx(t)}class Fx extends Tr{constructor(e){super({type:"object",check(n){return U0(n)||typeof n=="function"}}),this.fields=Object.create(null),this._sortErrors=UN,this._nodes=[],this._excludedEdges=[],this.withMutation(()=>{e&&this.shape(e)})}_cast(e,n={}){var r;let i=super._cast(e,n);if(i===void 0)return this.getDefault(n);if(!this._typeCheck(i))return i;let s=this.fields,a=(r=n.stripUnknown)!=null?r:this.spec.noUnknown,c=[].concat(this._nodes,Object.keys(i).filter(p=>!this._nodes.includes(p))),u={},d=Object.assign({},n,{parent:u,__validating:n.__validating||!1}),f=!1;for(const p of c){let m=s[p],v=p in i,b=i[p];if(m){let _;d.path=(n.path?`${n.path}.`:"")+p,m=m.resolve({value:b,context:n.context,parent:u});let w=m instanceof Tr?m.spec:void 0,x=w?.strict;if(w!=null&&w.strip){f=f||p in i;continue}_=!n.__validating||!x?m.cast(b,d):b,_!==void 0&&(u[p]=_)}else v&&!a&&(u[p]=b);(v!==p in u||u[p]!==b)&&(f=!0)}return f?u:i}_validate(e,n={},r,i){let{from:s=[],originalValue:a=e,recursive:c=this.spec.recursive}=n;n.from=[{schema:this,value:a},...s],n.__validating=!0,n.originalValue=a,super._validate(e,n,r,(u,d)=>{if(!c||!U0(d)){i(u,d);return}a=a||d;let f=[];for(let p of this._nodes){let m=this.fields[p];!m||ga.isRef(m)||f.push(m.asNestedTest({options:n,key:p,parent:d,parentPath:n.path,originalParent:a}))}this.runTests({tests:f,value:d,originalValue:a,options:n},r,p=>{i(p.sort(this._sortErrors).concat(u),d)})})}clone(e){const n=super.clone(e);return n.fields=Object.assign({},this.fields),n._nodes=this._nodes,n._excludedEdges=this._excludedEdges,n._sortErrors=this._sortErrors,n}concat(e){let n=super.concat(e),r=n.fields;for(let[i,s]of Object.entries(this.fields)){const a=r[i];r[i]=a===void 0?s:a}return n.withMutation(i=>i.setFields(r,[...this._excludedEdges,...e._excludedEdges]))}_getDefault(e){if("default"in this.spec)return super._getDefault(e);if(!this._nodes.length)return;let n={};return this._nodes.forEach(r=>{var i;const s=this.fields[r];let a=e;(i=a)!=null&&i.value&&(a=Object.assign({},a,{parent:a.value,value:a.value[r]})),n[r]=s&&"getDefault"in s?s.getDefault(a):void 0}),n}setFields(e,n){let r=this.clone();return r.fields=e,r._nodes=HN(e,n),r._sortErrors=Px(Object.keys(e)),n&&(r._excludedEdges=n),r}shape(e,n=[]){return this.clone().withMutation(r=>{let i=r._excludedEdges;return n.length&&(Array.isArray(n[0])||(n=[n]),i=[...r._excludedEdges,...n]),r.setFields(Object.assign(r.fields,e),i)})}partial(){const e={};for(const[n,r]of Object.entries(this.fields))e[n]="optional"in r&&r.optional instanceof Function?r.optional():r;return this.setFields(e)}deepPartial(){return Ku(this)}pick(e){const n={};for(const r of e)this.fields[r]&&(n[r]=this.fields[r]);return this.setFields(n,this._excludedEdges.filter(([r,i])=>e.includes(r)&&e.includes(i)))}omit(e){const n=[];for(const r of Object.keys(this.fields))e.includes(r)||n.push(r);return this.pick(n)}from(e,n,r){let i=na.getter(e,!0);return this.transform(s=>{if(!s)return s;let a=s;return zN(s,e)&&(a=Object.assign({},s),r||delete a[e],a[n]=i(s)),a})}json(){return this.transform(Lx)}exact(e){return this.test({name:"exact",exclusive:!0,message:e||Yu.exact,test(n){if(n==null)return!0;const r=B0(this.schema,n);return r.length===0||this.createError({params:{properties:r.join(", ")}})}})}stripUnknown(){return this.clone({noUnknown:!0})}noUnknown(e=!0,n=Yu.noUnknown){typeof e!="boolean"&&(n=e,e=!0);let r=this.test({name:"noUnknown",exclusive:!0,message:n,test(i){if(i==null)return!0;const s=B0(this.schema,i);return!e||s.length===0||this.createError({params:{unknown:s.join(", ")}})}});return r.spec.noUnknown=e,r}unknown(e=!0,n=Yu.noUnknown){return this.noUnknown(!e,n)}transformKeys(e){return this.transform(n=>{if(!n)return n;const r={};for(const i of Object.keys(n))r[e(i)]=n[i];return r})}camelCase(){return this.transformKeys(vp.camelCase)}snakeCase(){return this.transformKeys(vp.snakeCase)}constantCase(){return this.transformKeys(e=>vp.snakeCase(e).toUpperCase())}describe(e){const n=(e?this.resolve(e):this).clone(),r=super.describe(e);r.fields={};for(const[s,a]of Object.entries(n.fields)){var i;let c=e;(i=c)!=null&&i.value&&(c=Object.assign({},c,{parent:c.value,value:c.value[s]})),r.fields[s]=a.describe(c)}return r}}Es.prototype=Fx.prototype;function jx(t){return new Hx(t)}class Hx extends Tr{constructor(e){super({type:"array",spec:{types:e},check(n){return Array.isArray(n)}}),this.innerType=void 0,this.innerType=e}_cast(e,n){const r=super._cast(e,n);if(!this._typeCheck(r)||!this.innerType)return r;let i=!1;const s=r.map((a,c)=>{const u=this.innerType.cast(a,Object.assign({},n,{path:`${n.path||""}[${c}]`,parent:r,originalValue:a,value:a,index:c}));return u!==a&&(i=!0),u});return i?s:r}_validate(e,n={},r,i){var s;let a=this.innerType,c=(s=n.recursive)!=null?s:this.spec.recursive;n.originalValue!=null&&n.originalValue,super._validate(e,n,r,(u,d)=>{var f;if(!c||!a||!this._typeCheck(d)){i(u,d);return}let p=new Array(d.length);for(let v=0;v<d.length;v++){var m;p[v]=a.asNestedTest({options:n,index:v,parent:d,parentPath:n.path,originalParent:(m=n.originalValue)!=null?m:e})}this.runTests({value:d,tests:p,originalValue:(f=n.originalValue)!=null?f:e,options:n},r,v=>i(v.concat(u),d))})}clone(e){const n=super.clone(e);return n.innerType=this.innerType,n}json(){return this.transform(Lx)}concat(e){let n=super.concat(e);return n.innerType=this.innerType,e.innerType&&(n.innerType=n.innerType?n.innerType.concat(e.innerType):e.innerType),n}of(e){let n=this.clone();if(!Xd(e))throw new TypeError("`array.of()` sub-schema must be a valid yup schema not: "+Mi(e));return n.innerType=e,n.spec=Object.assign({},n.spec,{types:e}),n}length(e,n=Qu.length){return this.test({message:n,name:"length",exclusive:!0,params:{length:e},skipAbsent:!0,test(r){return r.length===this.resolve(e)}})}min(e,n){return n=n||Qu.min,this.test({message:n,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(r){return r.length>=this.resolve(e)}})}max(e,n){return n=n||Qu.max,this.test({message:n,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(r){return r.length<=this.resolve(e)}})}ensure(){return this.default(()=>[]).transform((e,n)=>this._typeCheck(e)?e:n==null?[]:[].concat(n))}compact(e){let n=e?(r,i,s)=>!e(r,i,s):r=>!!r;return this.transform(r=>r!=null?r.filter(n):r)}describe(e){const n=(e?this.resolve(e):this).clone(),r=super.describe(e);if(n.innerType){var i;let s=e;(i=s)!=null&&i.value&&(s=Object.assign({},s,{parent:s.value,value:s.value[0]})),r.innerType=n.innerType.describe(s)}return r}}jx.prototype=Hx.prototype;const Pt=Kn().required("This field is required");nn().required("This field is required").min(0,"Value must be at least 0");const Xr=nn().nullable().transform(t=>isNaN(t)?null:t).min(0,"Value must be at least 0"),BN=t=>t.bag_width&&t.bag_step?t.bag_width>=t.bag_step:!0,WN=Es({machine_name:Pt.min(2,"Machine name must be at least 2 characters").max(100,"Machine name must be at most 100 characters").matches(/^[a-zA-Z0-9\s\-_]+$/,"Machine name can only contain letters, numbers, spaces, hyphens, and underscores"),machine_type:Pt,department:Pt.oneOf(["STAMPA","CONFEZIONAMENTO"],"Invalid department"),work_center:Pt.oneOf(["ZANICA","BUSTO_GAROLFO"],"Invalid work center"),status:Pt.oneOf(["ACTIVE","INACTIVE"],"Invalid status"),min_web_width:Xr,max_web_width:Xr,min_bag_height:Xr,max_bag_height:Xr,standard_speed:Xr,setup_time_standard:Xr,changeover_color:Xr,changeover_material:Xr,active_shifts:jx().of(Kn().oneOf(["T1","T2","T3"]))}).test("web-width-logic","Minimum web width cannot exceed maximum web width",function(t){return t.min_web_width&&t.max_web_width?t.min_web_width<=t.max_web_width:!0}).test("bag-height-logic","Minimum bag height cannot exceed maximum bag height",function(t){return t.min_bag_height&&t.max_bag_height?t.min_bag_height<=t.max_bag_height:!0}),VN=Es({name:Pt.min(2,"Phase name must be at least 2 characters").max(100,"Phase name must be at most 100 characters"),department:Pt.oneOf(["STAMPA","CONFEZIONAMENTO"],"Invalid department"),work_center:Pt.oneOf(["ZANICA","BUSTO_GAROLFO"],"Invalid work center"),numero_persone:nn().required("Number of people is required").min(1,"Number of people must be at least 1"),bag_width:Xr,bag_step:Xr,v_stampa:nn().nullable().transform(t=>isNaN(t)?null:t).when("department",{is:"STAMPA",then:t=>t.min(0,"Printing speed must be greater than 0")}),t_setup_stampa:nn().nullable().transform(t=>isNaN(t)?null:t).when("department",{is:"STAMPA",then:t=>t.min(0,"Setup time cannot be negative")}),costo_h_stampa:nn().nullable().transform(t=>isNaN(t)?null:t).when("department",{is:"STAMPA",then:t=>t.min(0,"Hourly cost cannot be negative")}),v_conf:nn().nullable().transform(t=>isNaN(t)?null:t).when("department",{is:"CONFEZIONAMENTO",then:t=>t.min(0,"Packaging speed must be greater than 0")}),t_setup_conf:nn().nullable().transform(t=>isNaN(t)?null:t).when("department",{is:"CONFEZIONAMENTO",then:t=>t.min(0,"Setup time cannot be negative")}),costo_h_conf:nn().nullable().transform(t=>isNaN(t)?null:t).when("department",{is:"CONFEZIONAMENTO",then:t=>t.min(0,"Hourly cost cannot be negative")})}).test("bag-width-step-logic","Bag width cannot be less than bag step",BN),W0=Es({odp_number:Pt.min(1,"Il numero ODP  obbligatorio"),article_code:Pt.min(1,"Il codice articolo  obbligatorio"),work_center:Pt.oneOf(["ZANICA","BUSTO_GAROLFO"],"Seleziona un centro di lavoro valido"),nome_cliente:Pt.min(1,"Il nome del cliente  obbligatorio"),quantity:nn().required("La quantit  obbligatoria").min(0,"La quantit deve essere maggiore o uguale a 0").typeError("La quantit deve essere un numero valido"),delivery_date:ml().required("La data di consegna  obbligatoria").typeError("Inserisci una data di consegna valida"),customer_order_ref:Pt.min(1,"Il riferimento ordine cliente  obbligatorio"),department:Pt.oneOf(["STAMPA","CONFEZIONAMENTO"],"Seleziona un reparto valido"),status:Kn().oneOf(["NOT SCHEDULED","SCHEDULED","IN PROGRESS","COMPLETED","CANCELLED"],"Stato non valido").default("NOT SCHEDULED"),quantity_completed:nn().min(0,"La quantit completata deve essere maggiore o uguale a 0").default(0),production_lot:Kn().nullable(),description:Kn().nullable(),bag_height:nn().nullable().transform(t=>isNaN(t)?null:t).min(0,"L'altezza busta deve essere maggiore o uguale a 0"),bag_width:nn().nullable().transform(t=>isNaN(t)?null:t).min(0,"La larghezza busta deve essere maggiore o uguale a 0"),bag_step:nn().nullable().transform(t=>isNaN(t)?null:t).min(0,"Il passo busta deve essere maggiore o uguale a 0"),seal_sides:nn().nullable().transform(t=>isNaN(t)?null:t).oneOf([3,4],"I lati di sigillatura devono essere 3 o 4"),product_type:Kn().nullable().oneOf(["CREMA","LIQUIDO","POLVERI"],"Seleziona un tipo di prodotto valido"),internal_customer_code:Kn().nullable().test("not-empty-if-provided","Il codice cliente interno non pu essere vuoto",function(t){return!t||t.trim().length>0}),external_customer_code:Kn().nullable().test("not-empty-if-provided","Il codice cliente esterno non pu essere vuoto",function(t){return!t||t.trim().length>0}),fase:Kn().nullable(),duration:nn().nullable().transform(t=>isNaN(t)?null:t).min(0,"La durata deve essere maggiore o uguale a 0"),cost:nn().nullable().transform(t=>isNaN(t)?null:t).min(0,"Il costo deve essere maggiore o uguale a 0"),scheduled_start_time:ml().nullable(),scheduled_end_time:ml().nullable(),scheduled_machine_id:Kn().nullable(),user_notes:Kn().nullable(),asd_notes:Kn().nullable(),material_availability_global:nn().nullable().transform(t=>isNaN(t)?null:t).min(0,"Material availability must be between 0 and 100").max(100,"Material availability must be between 0 and 100")}).test("bag-width-step-logic","La larghezza busta non pu essere minore del passo busta",function(t){return t.bag_width&&t.bag_step?t.bag_width>=t.bag_step:!0}).test("quantity-completed-logic","La quantit completata non pu superare la quantit totale",function(t){return t.quantity&&t.quantity_completed!==void 0?t.quantity_completed<=t.quantity:!0}).test("scheduled-time-order","L'ora di fine programmata deve essere dopo l'ora di inizio",function(t){return t.scheduled_start_time&&t.scheduled_end_time?new Date(t.scheduled_end_time)>new Date(t.scheduled_start_time):!0}).test("scheduling-logic","I campi di programmazione devono essere tutti forniti o tutti nulli",function(t){const e=!!t.scheduled_start_time,n=!!t.scheduled_end_time,r=!!t.scheduled_machine_id;return e&&n&&r||!e&&!n&&!r}),$N=Es({startDate:Pt,startTime:Pt,endDate:Pt,endTime:Pt}).test("date-logic","End date cannot be before start date",function(t){return t.startDate&&t.endDate?new Date(t.startDate)<=new Date(t.endDate):!0}).test("time-logic","End time must be after start time when dates are the same",function(t){return t.startDate&&t.endDate&&t.startDate===t.endDate&&t.startTime&&t.endTime?t.startTime<t.endTime:!0}),qN=Es({email:Pt.email("Please enter a valid email address"),password:Pt.min(6,"Password must be at least 6 characters")}),GN=Es({email:Pt.email("Please enter a valid email address"),password:Pt.min(6,"Password must be at least 6 characters"),confirmPassword:Kn().required("Please confirm your password")}).test("passwords-match","Passwords must match",function(t){return t.password===t.confirmPassword}),YN=Es({email:Pt.email("Please enter a valid email address")}),QN=(t,e)=>{try{return e.validateSync(t,{abortEarly:!1}),{isValid:!0,errors:{}}}catch(n){const r={};return n.inner.forEach(i=>{r[i.path]=i.message}),{isValid:!1,errors:r}}},KN={MACHINE:WN,PHASE:VN,ORDER:W0,BACKLOG:W0,OFF_TIME:$N,LOGIN:qN,SIGNUP:GN,FORGOT_PASSWORD:YN},ZN=()=>{const t=D.useCallback((m,v)=>{const b=KN[v];if(!b)throw new Error(`Unknown schema type: ${v}`);return QN(m,b)},[]),e=D.useCallback(m=>t(m,"MACHINE"),[t]),n=D.useCallback(m=>t(m,"PHASE"),[t]),r=D.useCallback(m=>t(m,"ORDER"),[t]),i=D.useCallback(m=>t(m,"OFF_TIME"),[t]),s=D.useCallback((m,v)=>t(m,v),[t]),a=D.useCallback((m,v)=>{const b={};return v.some(w=>w.scheduled_machine_id===m)&&(b.general="Cannot delete machine with scheduled tasks. Please unschedule all tasks first."),{isValid:Object.keys(b).length===0,errors:b}},[]),c=D.useCallback(m=>{const v={};return m?(m.quantity_completed>0&&(v.general="Cannot delete order that has started production"),m.scheduled_machine_id&&(v.general="Cannot delete scheduled order. Please unschedule first."),{isValid:Object.keys(v).length===0,errors:v}):(v.general="Order is required",{isValid:!1,errors:v})},[]),u=D.useCallback((m,v,b,_)=>{const w={};return m?v?!b||!_?(w.general="Start and end times are required",{isValid:!1,errors:w}):(v.status!=="ACTIVE"&&(w.general=`Machine ${v.machine_name} is not active`),m.scheduled_machine_id&&m.scheduled_machine_id!==v.id&&(w.general="Order is already scheduled on a different machine"),m.fase||(w.general="Order must have a production phase selected"),(!m.quantity||m.quantity<=0)&&(w.general="Order must have a valid quantity"),(!m.duration||m.duration<=0)&&(w.general="Order must have calculated duration"),{isValid:Object.keys(w).length===0,errors:w}):(w.general="Machine is required",{isValid:!1,errors:w}):(w.general="Order is required",{isValid:!1,errors:w})},[]),d=D.useCallback((m,v)=>{const b={};if(!m)return b.general="Please select a production phase",{isValid:!1,errors:b};v.department&&m.department!==v.department&&(b.general=`Selected phase is for ${m.department} department, but order is for ${v.department}`),v.work_center&&m.work_center!==v.work_center&&(b.general=`Selected phase is for ${m.work_center} work center, but order is for ${v.work_center}`);const _=n(m);return _.isValid||Object.assign(b,_.errors),{isValid:Object.keys(b).length===0,errors:b}},[n]),f=D.useCallback((m,v)=>{if(m.status!=="ACTIVE")return!1;const b=m.active_shifts||[];if(b.length===0)return!1;const _=v.getUTCHours();return b.some(x=>{switch(x){case"T1":return _>=6&&_<14;case"T2":return _>=14&&_<22;case"T3":return _>=22||_<6;default:return!1}})},[]),p=D.useCallback(m=>({name:m?.machine_name||"Unknown Machine",type:m?.machine_type||"Unknown Type",department:m?.department||"Unknown Department",workCenter:m?.work_center||"Unknown Work Center",status:m?.status||"UNKNOWN",isActive:m?.status==="ACTIVE"}),[]);return{validate:t,validateMachine:e,validatePhase:n,validateOrder:r,validateOffTime:i,validateAuth:s,validateMachineDeletion:a,validateOrderDeletion:c,validateOrderScheduling:u,validatePhaseSelection:d,isMachineAvailable:f,getMachineDisplayInfo:p}},XN=(t,e,n=null)=>{const{entities:r}=HO(),[i,s]=D.useState(""),[a,c]=D.useState(!1),[u,d]=D.useState(null),[f,p]=D.useState({}),m=D.useRef(null),v=D.useMemo(()=>!r||r.length===0?[]:t||e?r.filter(R=>(!t||R.department===t)&&(!e||R.work_center===e)).filter(R=>R.name.toLowerCase().includes(i.toLowerCase())):[],[i,t,e,r]);D.useEffect(()=>{if(n&&r&&r.length>0&&!u){const k=r.find(R=>R.id===n);k&&(d(k),s(k.name),p({v_stampa:k.v_stampa||null,t_setup_stampa:k.t_setup_stampa||null,costo_h_stampa:k.costo_h_stampa||null,v_conf:k.v_conf||null,t_setup_conf:k.t_setup_conf||null,costo_h_conf:k.costo_h_conf||null}))}},[n,r,u]),D.useEffect(()=>()=>{m.current&&clearTimeout(m.current)},[]);const b=D.useCallback((k,R)=>{const A=R===""?null:parseFloat(R);p(M=>({...M,[k]:A}))},[]),_=D.useCallback((k,R,A)=>{R("fase",k.id),d(k),s(k.name),c(!1),A("fase"),p({v_stampa:k.v_stampa||null,t_setup_stampa:k.t_setup_stampa||null,costo_h_stampa:k.costo_h_stampa||null,v_conf:k.v_conf||null,t_setup_conf:k.t_setup_conf||null,costo_h_conf:k.costo_h_conf||null})},[]),w=D.useCallback(()=>{s(""),d(null),p({})},[]),x=D.useCallback(()=>{m.current&&clearTimeout(m.current),m.current=setTimeout(()=>c(!1),150)},[]);return D.useMemo(()=>({phaseSearch:i,setPhaseSearch:s,isDropdownVisible:a,setIsDropdownVisible:c,selectedPhase:u,setSelectedPhase:d,filteredPhases:v,editablePhaseParams:f,setEditablePhaseParams:p,handlePhaseParamChange:b,handlePhaseSelect:_,resetPhaseData:w,handleBlur:x,blurTimeoutRef:m}),[i,a,u,v,f,p,b,_,w,x])};function JN(t,e){const n=eN(e),r=new Set;if(n===0||n===6){for(let c=0;c<24;c++)r.add(c.toString());return Array.from(r)}for(let c=0;c<24;c++)r.add(c.toString());const{work_center:i,department:s,active_shifts:a=[]}=t;return a.forEach(c=>{if(c==="T3"){r.clear();return}if(c==="T2")for(let u=6;u<22;u++)r.delete(u.toString());if(c==="T1"){if(i===Je.BUSTO_GAROLFO){for(let u=8;u<12;u++)r.delete(u.toString());for(let u=14;u<18;u++)r.delete(u.toString())}else if(i===Je.ZANICA)if(s===It.PACKAGING){for(let u=8;u<12;u++)r.delete(u.toString());for(let u=13;u<17;u++)r.delete(u.toString())}else{for(let u=8;u<12;u++)r.delete(u.toString());for(let u=13;u<17;u++)r.delete(u.toString())}}}),Array.from(r).sort((c,u)=>parseInt(c)-parseInt(u))}function eI(t,e){const n=[],r=Sx(new Date(e,0,1)),i=t1(new Date(e,11,31));for(const s of t){let a=new Date(r);for(;!tN(a,i);){const c=JN(s,a);c.length>0&&n.push({machine_id:s.id,date:pn(a,"yyyy-MM-dd"),unavailable_hours:c}),a=Kl(a,1)}}return n}const et={machines:["machines"],machine:t=>["machines",t],machinesByWorkCenter:t=>["machines","workCenter",t],orders:["orders"],order:t=>["orders",t],phases:["phases"],phase:t=>["phases",t],machineAvailability:(t,e,n)=>["machineAvailability",t,e,n],machineAvailabilityForDate:(t,e)=>["machineAvailability",t,"date",e],machineAvailabilityForDateAllMachines:t=>["machineAvailability","allMachines",t]},Jd=()=>fa({queryKey:et.machines,queryFn:()=>ct.getMachines(),staleTime:120*1e3}),tI=t=>fa({queryKey:et.machinesByWorkCenter(t),queryFn:()=>ct.getMachines().then(e=>t===Je.BOTH?e:e.filter(n=>n.work_center===t)),staleTime:120*1e3}),nI=()=>{const t=tr();return Hi({mutationFn:async e=>{const n=await ct.addMachine(e);try{const r=new Date().getUTCFullYear(),i=eI([n],r);i.length>0&&await ct.bulkUpsertMachineAvailability(i),ha(`Machine "${n?.machine_name||"Unknown"}" added and calendar set successfully`)}catch(r){dl(`Machine added, but failed to set calendar: ${r.message}`)}return n},onSuccess:e=>{t.invalidateQueries({queryKey:et.machines}),t.invalidateQueries({queryKey:et.machinesByWorkCenter()}),t.setQueryData(et.machines,n=>n?[...n,e]:[e])}})},rI=()=>{const t=tr();return Hi({mutationFn:({id:e,updates:n})=>ct.updateMachine(e,n),onSuccess:(e,{id:n})=>{t.invalidateQueries({queryKey:et.machines}),t.invalidateQueries({queryKey:et.machinesByWorkCenter()}),t.setQueryData(et.machines,r=>r?.map(i=>i.id===n?{...i,...e}:i)),t.setQueryData(et.machine(n),e),ha(`Machine "${e?.machine_name||"Unknown"}" updated successfully`)}})},iI=()=>{const t=tr();return Hi({mutationFn:async e=>{const n=await ct.getMachines().then(r=>r.find(i=>i.id===e));return await ct.removeMachine(e),n},onSuccess:e=>{t.invalidateQueries({queryKey:et.machines}),t.invalidateQueries({queryKey:et.machinesByWorkCenter()}),t.setQueryData(et.machines,n=>n?.filter(r=>r.id!==e.id)),t.removeQueries({queryKey:et.machine(e.id)}),ha(`Machine "${e?.machine_name||"Unknown"}" deleted successfully`)}})},ef=()=>fa({queryKey:et.orders,queryFn:()=>ct.getOdpOrders(),staleTime:60*1e3}),sI=t=>fa({queryKey:et.order(t),queryFn:async()=>{try{return await ct.getOdpOrder(t)}catch{const r=(await ct.getOdpOrders()).find(i=>i.id===t);if(!r)throw new Error(`Order with id ${t} not found`);return r}},enabled:!!t,staleTime:60*1e3}),aI=()=>{const t=tr();return Hi({mutationFn:e=>ct.addOdpOrder(e),onSuccess:e=>{t.invalidateQueries({queryKey:et.orders}),t.setQueryData(et.orders,n=>n?[e,...n]:[e])}})},oI=()=>{const t=tr();return Hi({mutationFn:({id:e,updates:n})=>ct.updateOdpOrder(e,n),onSuccess:(e,{id:n})=>{t.invalidateQueries({queryKey:et.orders}),t.setQueryData(et.orders,r=>r?.map(i=>i.id===n?{...i,...e}:i)),t.setQueryData(et.order(n),e)}})},lI=()=>{const t=tr();return Hi({mutationFn:e=>ct.removeOdpOrder(e),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:et.orders}),t.setQueryData(et.orders,r=>r?.filter(i=>i.id!==n)),t.removeQueries({queryKey:et.order(n)})}})},am=()=>fa({queryKey:et.phases,queryFn:()=>ct.getPhases(),staleTime:300*1e3}),cI=t=>fa({queryKey:et.phase(t),queryFn:()=>ct.getPhases().then(e=>e.find(n=>n.id===t)),enabled:!!t,staleTime:300*1e3}),uI=()=>{const t=tr();return Hi({mutationFn:e=>ct.addPhase(e),onSuccess:e=>{t.invalidateQueries({queryKey:et.phases}),t.setQueryData(et.phases,n=>n?[...n,e]:[e])}})},dI=()=>{const t=tr();return Hi({mutationFn:({id:e,updates:n})=>ct.updatePhase(e,n),onSuccess:(e,{id:n})=>{t.invalidateQueries({queryKey:et.phases}),t.setQueryData(et.phases,r=>r?.map(i=>i.id===n?{...i,...e}:i)),t.setQueryData(et.phase(n),e)}})},fI=()=>{const t=tr();return Hi({mutationFn:e=>ct.removePhase(e),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:et.phases}),t.setQueryData(et.phases,r=>r?.filter(i=>i.id!==n)),t.removeQueries({queryKey:et.phase(n)})}})},J$=t=>fa({queryKey:et.machineAvailabilityForDateAllMachines(t),queryFn:()=>ct.getMachineAvailabilityForDateAllMachines(t),enabled:!!t,staleTime:30*1e3}),hI=Ql((t,e)=>({phases:[],getPhases:()=>e().phases,getPhaseById:n=>e().phases.find(r=>r.id===n),setPhases:n=>t({phases:n||[]}),cleanupDuplicatePhases:()=>{const n=e(),r=[],i=new Set;n.phases.forEach(s=>{i.has(s.id)||(i.add(s.id),r.push(s))}),t({phases:r})},reset:()=>t({phases:[]})})),pI=()=>{const{data:t,isLoading:e,error:n}=Jd(),{data:r,isLoading:i,error:s}=ef(),{data:a,isLoading:c,error:u}=am(),{setMachines:d}=gl(),{setOdpOrders:f}=In(),{setPhases:p}=hI();return D.useEffect(()=>{t&&!e&&!n&&d(t)},[t,e,n,d]),D.useEffect(()=>{r&&!i&&!s&&f(r)},[r,i,s,f]),D.useEffect(()=>{a&&!c&&!u&&p(a)},[a,c,u,p]),{isLoading:e||i||c,errors:{machines:n,orders:s,phases:u}}};function gI(){const{selectedWorkCenter:t,showConfirmDialog:e}=bn(),n=oi(),{data:r=[],isLoading:i,error:s}=tI(t),a=iI(),{handleAsync:c}=pa("MachineryListPage");if(s)return E.jsxs("div",{className:"text-center py-2 text-red-600 text-[10px]",children:["Errore nel caricamento delle macchine: ",s.message]});const u=D.useMemo(()=>[{header:"Nome Macchina",accessorKey:"machine_name"},{header:"Centro di Lavoro",accessorKey:"work_center"},{header:"Reparto",accessorKey:"department"},{header:"Stato",accessorKey:"status"},{header:"Larghezza Min (mm)",accessorKey:"min_web_width"},{header:"Larghezza Max (mm)",accessorKey:"max_web_width"},{header:"Altezza Min (mm)",accessorKey:"min_bag_height"},{header:"Altezza Max (mm)",accessorKey:"max_bag_height"},{header:"Velocit Std",accessorKey:"standard_speed"},{header:"Setup (h)",accessorKey:"setup_time_standard"},{header:"Cambio Colore (h)",accessorKey:"changeover_color"},{header:"Cambio Materiale (h)",accessorKey:"changeover_material"},{header:"Turni Attivi",accessorKey:"active_shifts",cell:p=>Array.isArray(p.getValue())?p.getValue().join(", "):""},{header:"Calendario",accessorKey:"id",cell:p=>E.jsx(or,{to:`/machinery/${p.getValue()}/calendar`,className:"inline-flex items-center px-1 py-1 border border-gray-300 rounded shadow-sm text-[10px] font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Visualizza Calendario"})}],[]),d=p=>{n(`/machinery/${p.id}/edit`)},f=async p=>{e("Elimina Macchina",`Sei sicuro di voler eliminare "${p.machine_name}"? Questa azione non pu essere annullata.`,async()=>{await c(async()=>{await a.mutateAsync(p.id)},{context:"Delete Machine",fallbackMessage:"Eliminazione macchina fallita"})},"danger")};return i?E.jsx("div",{children:"Caricamento dati macchine..."}):t?E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("h1",{className:"text-2xl font-semibold text-foreground",children:"Lista Macchine"}),E.jsx(or,{to:"/machinery/new",className:"inline-flex items-center px-4 py-2 border border-border rounded-md text-sm font-medium text-foreground bg-background hover:bg-muted",children:"Aggiungi Macchina"})]}),E.jsx(em,{columns:u,data:r,onEditRow:d,onDeleteRow:f,enableGlobalSearch:!1})]}):E.jsx("div",{className:"text-center py-2 text-red-600 text-[10px]",children:"Seleziona un centro di lavoro per visualizzare i dati delle macchine."})}const Sr={validationSchema:"MACHINE",addButtonText:"Aggiungi Macchina",editButtonText:"Aggiorna Macchina",addLoadingText:"Aggiunta...",editLoadingText:"Aggiornamento...",addContext:"Add Machine",editContext:"Update Machine",addErrorMessage:"Aggiunta macchina fallita",editErrorMessage:"Aggiornamento macchina fallita",sections:[{title:"Identificazione",fields:[{name:"department",label:"Department",type:"select",required:!0,options:[{value:It.PRINTING,label:It.PRINTING},{value:It.PACKAGING,label:It.PACKAGING}],defaultValue:Tt.MACHINE.DEPARTMENT,validation:{required:"Department is required"}},{name:"machine_type",label:"Machine Type",type:"select",required:!0,placeholder:"Seleziona tipo macchina",options:[],conditional:t=>t===It.PRINTING||t===It.PACKAGING,validation:{required:"Machine type is required"}},{name:"machine_name",label:"Machine Name",type:"text",required:!0,placeholder:"Nome descrittivo",validation:{required:"Machine name is required",minLength:{value:2,message:"Machine name must be at least 2 characters"},maxLength:{value:100,message:"Machine name must be at most 100 characters"},pattern:{value:/^[a-zA-Z0-9\s\-_]+$/,message:"Machine name can only contain letters, numbers, spaces, hyphens, and underscores"}}},{name:"work_center",label:"Work Center",type:"select",required:!0,placeholder:"Seleziona un centro di lavoro",options:[{value:Je.ZANICA,label:Je.ZANICA},{value:Je.BUSTO_GAROLFO,label:Je.BUSTO_GAROLFO}],defaultValue:Tt.MACHINE.WORK_CENTER,helpText:"Il centro di lavoro  pre-impostato.",validation:{required:"Work center is required"}}]},{title:"Capacit Tecniche",fields:[{name:"min_web_width",label:"Min Web Width (mm)",type:"number",required:!0,defaultValue:Tt.MACHINE.MIN_WEB_WIDTH,validation:{required:"Min web width is required",min:{value:1,message:"Min web width must be at least 1"}}},{name:"max_web_width",label:"Max Web Width (mm)",type:"number",required:!0,defaultValue:Tt.MACHINE.MAX_WEB_WIDTH,validation:{required:"Max web width is required",min:{value:1,message:"Max web width must be at least 1"}}},{name:"min_bag_height",label:"Min Bag Height (mm)",type:"number",required:!0,defaultValue:Tt.MACHINE.MIN_BAG_HEIGHT,validation:{required:"Min bag height is required",min:{value:1,message:"Min bag height must be at least 1"}}},{name:"max_bag_height",label:"Max Bag Height (mm)",type:"number",required:!0,defaultValue:Tt.MACHINE.MAX_BAG_HEIGHT,validation:{required:"Max bag height is required",min:{value:1,message:"Max bag height must be at least 1"}}}]},{title:"Performance",fields:[{name:"standard_speed",label:"Standard Speed",type:"number",required:!0,placeholder:"pz/h o mt/h",validation:{required:"Standard speed is required",min:{value:1,message:"Standard speed must be at least 1"}}},{name:"setup_time_standard",label:"Setup Time Standard (h)",type:"number",required:!0,defaultValue:Tt.MACHINE.SETUP_TIME_STANDARD,validation:{required:"Setup time is required",min:{value:0,message:"Setup time must be at least 0"}}},{name:"changeover_color",label:"Changeover Color (h)",type:"number",required:!0,defaultValue:Tt.MACHINE.CHANGEOVER_COLOR,conditional:(t,e,n)=>n("department")===It.PRINTING,validation:{required:"Changeover color time is required",min:{value:0,message:"Changeover color time must be at least 0"}}},{name:"changeover_material",label:"Material Changeover (h)",type:"number",required:!0,defaultValue:Tt.MACHINE.CHANGEOVER_MATERIAL,conditional:(t,e,n)=>n("department")===It.PACKAGING,validation:{required:"Changeover material time is required",min:{value:0,message:"Changeover material time must be at least 0"}}}]},{title:"Disponibilit",fields:[{name:"active_shifts",label:"Active Shifts",type:"checkbox",required:!1,defaultValue:Tt.MACHINE.ACTIVE_SHIFTS,options:[{value:Wa.T1,label:Wa.T1},{value:Wa.T2,label:Wa.T2},{value:Wa.T3,label:Wa.T3}]},{name:"status",label:"Status",type:"select",required:!0,defaultValue:Tt.MACHINE.STATUS,options:[{value:Ti.ACTIVE,label:Ti.ACTIVE},{value:Ti.INACTIVE,label:Ti.INACTIVE}],validation:{required:"Status is required"}}]}]},Qr={validationSchema:"PHASE",addButtonText:"Aggiungi Fase",editButtonText:"Aggiorna Fase",addLoadingText:"Aggiunta Fase...",editLoadingText:"Aggiornamento Fase...",addContext:"Add Phase",editContext:"Update Phase",addErrorMessage:"Aggiunta fase fallita",editErrorMessage:"Aggiornamento fase fallita",sections:[{title:"Informazioni Fase",fields:[{name:"name",label:"Nome Fase",type:"text",required:!0,placeholder:"es. Stampa Alta Velocit"},{name:"department",label:"Tipo Fase",type:"select",required:!0,options:[{value:It.PRINTING,label:It.PRINTING},{value:It.PACKAGING,label:It.PACKAGING}],defaultValue:Tt.PHASE.DEPARTMENT},{name:"numero_persone",label:"Numero di Persone Richieste",type:"number",required:!0,defaultValue:Tt.PHASE.NUMERO_PERSONE},{name:"work_center",label:"Centro di Lavoro",type:"select",required:!0,options:[{value:Je.ZANICA,label:Je.ZANICA},{value:Je.BUSTO_GAROLFO,label:Je.BUSTO_GAROLFO}],defaultValue:Tt.PHASE.WORK_CENTER,helpText:"Il centro di lavoro  impostato in base alla tua selezione di accesso"}]},{title:"Parametri Stampa",fields:[{name:"v_stampa",label:"Velocit Stampa (mt/h)",type:"number",required:!0,defaultValue:Tt.PHASE.V_STAMPA,conditional:(t,e,n)=>n("department")===It.PRINTING},{name:"t_setup_stampa",label:"Tempo Setup (ore)",type:"number",required:!0,defaultValue:Tt.PHASE.T_SETUP_STAMPA,conditional:(t,e,n)=>n("department")===It.PRINTING},{name:"costo_h_stampa",label:"Costo Orario (/h)",type:"number",required:!0,defaultValue:Tt.PHASE.COSTO_H_STAMPA,conditional:(t,e,n)=>n("department")===It.PRINTING}]},{title:"Parametri Confezionamento",fields:[{name:"v_conf",label:"Velocit Confezionamento (pz/h)",type:"number",required:!0,defaultValue:Tt.PHASE.V_CONF,conditional:(t,e,n)=>n("department")===It.PACKAGING},{name:"t_setup_conf",label:"Tempo Setup (ore)",type:"number",required:!0,defaultValue:Tt.PHASE.T_SETUP_CONF,conditional:(t,e,n)=>n("department")===It.PACKAGING},{name:"costo_h_conf",label:"Costo Orario (/h)",type:"number",required:!0,defaultValue:Tt.PHASE.COSTO_H_CONF,conditional:(t,e,n)=>n("department")===It.PACKAGING}]},{title:"Descrizione Fase",fields:[{name:"contenuto_fase",label:"Descrizione Contenuto Fase",type:"textarea",required:!0,placeholder:"Descrivi il contenuto della fase e i requisiti...",rows:3}],gridCols:"grid-cols-1"}]},mI={validationSchema:"ORDER",addButtonText:"Aggiungi al Backlog",editButtonText:"Aggiorna Ordine",addLoadingText:"Aggiunta...",editLoadingText:"Aggiornamento...",addContext:"Add Order",editContext:"Update Order",addErrorMessage:"Aggiunta ordine fallita",editErrorMessage:"Aggiornamento ordine fallito",sections:[{title:"Identificazione",fields:[{name:"odp_number",label:"Numero ODP",type:"text",required:!0,placeholder:"Inserisci numero ODP"},{name:"article_code",label:"Codice Articolo",type:"article_code",required:!0,placeholder:"Inserisci codice articolo"},{name:"production_lot",label:"Codice Articolo Esterno",type:"text",required:!0,placeholder:"Inserisci codice articolo esterno"},{name:"work_center",label:"Centro di Lavoro",type:"select",required:!0,placeholder:"Seleziona centro di lavoro",options:[{value:Je.ZANICA,label:Je.ZANICA},{value:Je.BUSTO_GAROLFO,label:Je.BUSTO_GAROLFO}],conditional:(t,e,n)=>!0},{name:"nome_cliente",label:"Nome Cliente",type:"text",required:!0,placeholder:"Inserisci nome cliente"}]},{title:"Specifiche Tecniche",fields:[{name:"bag_height",label:"Altezza Busta (mm)",type:"number",required:!1,placeholder:"Inserisci altezza busta"},{name:"bag_width",label:"Larghezza Busta (mm)",type:"number",required:!1,placeholder:"Inserisci larghezza busta"},{name:"bag_step",label:"Passo Busta (mm)",type:"number",required:!1,placeholder:"Inserisci passo busta"},{name:"seal_sides",label:"Lati Sigillatura",type:"select",required:!1,placeholder:"Seleziona...",options:[{value:"3",label:"3"},{value:"4",label:"4"}],defaultValue:Tt.ORDER.SEAL_SIDES},{name:"product_type",label:"Tipo Prodotto",type:"select",required:!1,placeholder:"Seleziona...",options:[{value:Ba.CREMA,label:Ba.CREMA},{value:Ba.LIQUIDO,label:Ba.LIQUIDO},{value:Ba.POLVERI,label:Ba.POLVERI}]},{name:"quantity",label:"Quantit",type:"number",required:!0,placeholder:"Inserisci quantit"},{name:"quantity_completed",label:"Q.t Completata",type:"number",required:!0,defaultValue:Tt.ORDER.QUANTITY_COMPLETED}]},{title:"Dati Commerciali",fields:[{name:"internal_customer_code",label:"Lotto FLEXI",type:"text",required:!0,placeholder:"Inserisci lotto FLEXI"},{name:"external_customer_code",label:"Lotto Cliente",type:"text",required:!0,placeholder:"Inserisci lotto cliente"},{name:"customer_order_ref",label:"Riferimento Cliente",type:"text",required:!0,placeholder:"Inserisci riferimento cliente"},{name:"user_notes",label:"Note Libere",type:"textarea",required:!1,placeholder:"Inserisci note libere per l'ordine...",rows:3},{name:"asd_notes",label:"Note ASD",type:"textarea",required:!1,placeholder:"Inserisci note ASD per l'ordine...",rows:3}],gridCols:"grid-cols-2 md:grid-cols-3"},{title:"Dati Lavorazione & Pianificazione",fields:[{name:"department",label:"Reparto",type:"text",required:!0,readOnly:!0,className:"bg-gray-50"},{name:"phase_search",label:"Cerca Fase di Produzione",type:"phase_search",required:!0},{name:"delivery_date",label:"Data di Consegna",type:"datetime-local",required:!0}]},{title:"Disponibilit Materiali",fields:[{name:"material_availability_global",label:"Disponibilit Materiale Globale (%)",type:"number",required:!1,placeholder:"Inserisci percentuale disponibilit (0-100)",min:0,max:100}]}],customFields:{phase_parameters:{type:"phase_parameters",label:"Parametri Fase Selezionata"},calculation_results:{type:"calculation_results",label:"Risultati Calcolo Produzione"}},customValidation:t=>{const e={};return{isValid:Object.keys(e).length===0,errors:e}}},yp={validationSchema:"OFF_TIME",addButtonText:"Imposta Non Disponibilit",editButtonText:"Aggiorna Non Disponibilit",addLoadingText:"Impostazione...",editLoadingText:"Aggiornamento...",addContext:"Set Machine Unavailability",editContext:"Update Machine Unavailability",addErrorMessage:"Impostazione indisponibilit macchina fallita",editErrorMessage:"Aggiornamento indisponibilit macchina fallita",sections:[{title:"Periodo di Non Disponibilit",fields:[{name:"startDate",label:"Data Inizio",type:"date",required:!0,defaultValue:""},{name:"startTime",label:"Ora Inizio",type:"time",required:!0,defaultValue:Tt.OFF_TIME.START_TIME},{name:"endDate",label:"Data Fine",type:"date",required:!0,defaultValue:""},{name:"endTime",label:"Ora Fine",type:"time",required:!0,defaultValue:Tt.OFF_TIME.END_TIME}]}],customValidation:t=>{const e={};if(t.startDate&&t.endDate){const n=new Date(t.startDate);new Date(t.endDate)<n&&(e.endDate=p0.END_DATE_BEFORE_START),t.startDate===t.endDate&&t.startTime&&t.endTime&&t.startTime>=t.endTime&&(e.endTime=p0.END_TIME_BEFORE_START)}return{isValid:Object.keys(e).length===0,errors:e}}};function vI({machineToEdit:t,onSuccess:e}){const{selectedWorkCenter:n}=bn(),{getValidMachineTypes:r}=Ex(),i=nI(),s=rI(),a=!!t,c=D.useMemo(()=>{const p={...Sr};return p.sections[0].fields[1].options=[...r("STAMPA").map(m=>({value:m,label:m})),...r("CONFEZIONAMENTO").map(m=>({value:m,label:m}))],p.sections[0].fields[1].placeholder="Seleziona tipo macchina",n!==Je.BOTH&&(p.sections[0].fields[3].disabled=!0,p.sections[0].fields[3].defaultValue=n,p.sections[0].fields[3].helpText="Il centro di lavoro  pre-impostato."),p},[r,n]),u=D.useMemo(()=>({department:t?.department||Sr.sections[0].fields[0].defaultValue,machine_type:t?.machine_type||"",machine_name:t?.machine_name||"",work_center:t?.work_center||(n===Je.BOTH?Sr.sections[0].fields[3].defaultValue:n),min_web_width:t?.min_web_width||Sr.sections[1].fields[0].defaultValue,max_web_width:t?.max_web_width||Sr.sections[1].fields[1].defaultValue,min_bag_height:t?.min_bag_height||Sr.sections[1].fields[2].defaultValue,max_bag_height:t?.max_bag_height||Sr.sections[1].fields[3].defaultValue,standard_speed:t?.standard_speed||"",setup_time_standard:t?.setup_time_standard||Sr.sections[2].fields[1].defaultValue,changeover_color:t?.changeover_color||Sr.sections[2].fields[2].defaultValue,changeover_material:t?.changeover_material||Sr.sections[2].fields[3].defaultValue,active_shifts:t?.active_shifts||Sr.sections[3].fields[0].defaultValue,status:t?.status||Sr.sections[3].fields[1].defaultValue}),[n,t]),d=async p=>{a?await s.mutateAsync({id:t.id,updates:p}):await i.mutateAsync(p),e&&e()},f=i.isPending||s.isPending;return E.jsx($d,{config:c,initialData:u,onSubmit:d,onSuccess:e,isEditMode:a,isLoading:f})}function yI({title:t,children:e}){return E.jsx("div",{className:"sticky top-0 z-10 bg-background border-b border-border px-2 py-3 mb-2",children:E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("div",{className:"flex items-center",children:t&&E.jsx("h2",{className:"text-[10px] font-semibold text-gray-900",children:t})}),e]})})}function V0(){const{id:t}=Wd(),e=oi(),{getMachineById:n}=tm(),{selectedWorkCenter:r}=bn(),{isLoading:i,isInitialized:s,init:a,cleanup:c}=xs(),u=!!t,d=u?n(t):null;return D.useEffect(()=>(s||a(),()=>{c()}),[a,s,c]),D.useEffect(()=>{u&&!i&&!d&&e("/machinery",{replace:!0})},[u,i,d,e]),i?E.jsx("div",{children:"Caricamento..."}):u&&!d?E.jsx("div",{className:"text-center py-2 text-red-600 text-[10px]",children:"Macchina non trovata."}):r?E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("h1",{className:"text-2xl font-semibold text-foreground",children:u?`Modifica Macchina: ${d?.machine_name}`:"Aggiungi Nuova Macchina"}),u&&E.jsx(or,{to:`/machinery/${t}/calendar`,className:"inline-flex items-center px-4 py-2 border border-border rounded-md text-sm font-medium text-foreground bg-background hover:bg-muted",children:"Visualizza Calendario"})]}),E.jsx(vI,{machineToEdit:d})]}):E.jsx("div",{className:"text-center py-2 text-red-600 text-[10px]",children:"Seleziona un centro di lavoro per gestire le macchine."})}function bI({machineId:t,currentDate:e,onSuccess:n}){const{setMachineUnavailability:r}=Zl(),{showAlert:i}=bn(),s=D.useMemo(()=>{const c=new Date,u=Kl(c,1);return{startDate:pn(c,"yyyy-MM-dd"),endDate:pn(u,"yyyy-MM-dd"),startTime:yp.sections[0].fields[1].defaultValue,endTime:yp.sections[0].fields[3].defaultValue}},[e]),a=async c=>{await r(t,c.startDate,c.endDate,c.startTime,c.endTime),i("Indisponibilit macchina impostata con successo!","success"),n&&n()};return E.jsx($d,{config:yp,initialData:s,onSubmit:a,onSuccess:n,className:"p-1 bg-white rounded-lg shadow-sm border"})}var tf,ke,zx,Ux,io,Zs,$0,Bx,Wx,pd={},Vx=[],_I=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function us(t,e){for(var n in e)t[n]=e[n];return t}function $x(t){var e=t.parentNode;e&&e.removeChild(t)}function I(t,e,n){var r,i,s,a={};for(s in e)s=="key"?r=e[s]:s=="ref"?i=e[s]:a[s]=e[s];if(arguments.length>2&&(a.children=arguments.length>3?tf.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(s in t.defaultProps)a[s]===void 0&&(a[s]=t.defaultProps[s]);return Zu(t,a,r,i,null)}function Zu(t,e,n,r,i){var s={type:t,props:e,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:i??++zx};return i==null&&ke.vnode!=null&&ke.vnode(s),s}function Ln(){return{current:null}}function vt(t){return t.children}function SI(t,e,n,r,i){var s;for(s in n)s==="children"||s==="key"||s in e||gd(t,s,null,n[s],r);for(s in e)i&&typeof e[s]!="function"||s==="children"||s==="key"||s==="value"||s==="checked"||n[s]===e[s]||gd(t,s,e[s],n[s],r)}function q0(t,e,n){e[0]==="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||_I.test(e)?n:n+"px"}function gd(t,e,n,r,i){var s;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof r=="string"&&(t.style.cssText=r=""),r)for(e in r)n&&e in n||q0(t.style,e,"");if(n)for(e in n)r&&n[e]===r[e]||q0(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")s=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+s]=n,n?r||t.addEventListener(e,s?Y0:G0,s):t.removeEventListener(e,s?Y0:G0,s);else if(e!=="dangerouslySetInnerHTML"){if(i)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="width"&&e!=="height"&&e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e.indexOf("-")==-1?t.removeAttribute(e):t.setAttribute(e,n))}}function G0(t){io=!0;try{return this.l[t.type+!1](ke.event?ke.event(t):t)}finally{io=!1}}function Y0(t){io=!0;try{return this.l[t.type+!0](ke.event?ke.event(t):t)}finally{io=!1}}function lr(t,e){this.props=t,this.context=e}function Ml(t,e){if(e==null)return t.__?Ml(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?Ml(t):null}function qx(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return qx(t)}}function wI(t){io?setTimeout(t):Bx(t)}function pg(t){(!t.__d&&(t.__d=!0)&&Zs.push(t)&&!md.__r++||$0!==ke.debounceRendering)&&(($0=ke.debounceRendering)||wI)(md)}function md(){var t,e,n,r,i,s,a,c;for(Zs.sort(function(u,d){return u.__v.__b-d.__v.__b});t=Zs.shift();)t.__d&&(e=Zs.length,r=void 0,i=void 0,a=(s=(n=t).__v).__e,(c=n.__P)&&(r=[],(i=us({},s)).__v=s.__v+1,om(c,s,i,n.__n,c.ownerSVGElement!==void 0,s.__h!=null?[a]:null,r,a??Ml(s),s.__h),Zx(r,s),s.__e!=a&&qx(s)),Zs.length>e&&Zs.sort(function(u,d){return u.__v.__b-d.__v.__b}));md.__r=0}function Gx(t,e,n,r,i,s,a,c,u,d){var f,p,m,v,b,_,w,x=r&&r.__k||Vx,C=x.length;for(n.__k=[],f=0;f<e.length;f++)if((v=n.__k[f]=(v=e[f])==null||typeof v=="boolean"?null:typeof v=="string"||typeof v=="number"||typeof v=="bigint"?Zu(null,v,null,null,v):Array.isArray(v)?Zu(vt,{children:v},null,null,null):v.__b>0?Zu(v.type,v.props,v.key,v.ref?v.ref:null,v.__v):v)!=null){if(v.__=n,v.__b=n.__b+1,(m=x[f])===null||m&&v.key==m.key&&v.type===m.type)x[f]=void 0;else for(p=0;p<C;p++){if((m=x[p])&&v.key==m.key&&v.type===m.type){x[p]=void 0;break}m=null}om(t,v,m=m||pd,i,s,a,c,u,d),b=v.__e,(p=v.ref)&&m.ref!=p&&(w||(w=[]),m.ref&&w.push(m.ref,null,v),w.push(p,v.__c||b,v)),b!=null?(_==null&&(_=b),typeof v.type=="function"&&v.__k===m.__k?v.__d=u=Yx(v,u,t):u=Qx(t,v,m,x,b,u),typeof n.type=="function"&&(n.__d=u)):u&&m.__e==u&&u.parentNode!=t&&(u=Ml(m))}for(n.__e=_,f=C;f--;)x[f]!=null&&(typeof n.type=="function"&&x[f].__e!=null&&x[f].__e==n.__d&&(n.__d=Kx(r).nextSibling),Jx(x[f],x[f]));if(w)for(f=0;f<w.length;f++)Xx(w[f],w[++f],w[++f])}function Yx(t,e,n){for(var r,i=t.__k,s=0;i&&s<i.length;s++)(r=i[s])&&(r.__=t,e=typeof r.type=="function"?Yx(r,e,n):Qx(n,r,r,i,r.__e,e));return e}function vd(t,e){return e=e||[],t==null||typeof t=="boolean"||(Array.isArray(t)?t.some(function(n){vd(n,e)}):e.push(t)),e}function Qx(t,e,n,r,i,s){var a,c,u;if(e.__d!==void 0)a=e.__d,e.__d=void 0;else if(n==null||i!=s||i.parentNode==null)e:if(s==null||s.parentNode!==t)t.appendChild(i),a=null;else{for(c=s,u=0;(c=c.nextSibling)&&u<r.length;u+=1)if(c==i)break e;t.insertBefore(i,s),a=s}return a!==void 0?a:i.nextSibling}function Kx(t){var e,n,r;if(t.type==null||typeof t.type=="string")return t.__e;if(t.__k){for(e=t.__k.length-1;e>=0;e--)if((n=t.__k[e])&&(r=Kx(n)))return r}return null}function om(t,e,n,r,i,s,a,c,u){var d,f,p,m,v,b,_,w,x,C,k,R,A,M,P,O=e.type;if(e.constructor!==void 0)return null;n.__h!=null&&(u=n.__h,c=e.__e=n.__e,e.__h=null,s=[c]),(d=ke.__b)&&d(e);try{e:if(typeof O=="function"){if(w=e.props,x=(d=O.contextType)&&r[d.__c],C=d?x?x.props.value:d.__:r,n.__c?_=(f=e.__c=n.__c).__=f.__E:("prototype"in O&&O.prototype.render?e.__c=f=new O(w,C):(e.__c=f=new lr(w,C),f.constructor=O,f.render=EI),x&&x.sub(f),f.props=w,f.state||(f.state={}),f.context=C,f.__n=r,p=f.__d=!0,f.__h=[],f._sb=[]),f.__s==null&&(f.__s=f.state),O.getDerivedStateFromProps!=null&&(f.__s==f.state&&(f.__s=us({},f.__s)),us(f.__s,O.getDerivedStateFromProps(w,f.__s))),m=f.props,v=f.state,f.__v=e,p)O.getDerivedStateFromProps==null&&f.componentWillMount!=null&&f.componentWillMount(),f.componentDidMount!=null&&f.__h.push(f.componentDidMount);else{if(O.getDerivedStateFromProps==null&&w!==m&&f.componentWillReceiveProps!=null&&f.componentWillReceiveProps(w,C),!f.__e&&f.shouldComponentUpdate!=null&&f.shouldComponentUpdate(w,f.__s,C)===!1||e.__v===n.__v){for(e.__v!==n.__v&&(f.props=w,f.state=f.__s,f.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.forEach(function(H){H&&(H.__=e)}),k=0;k<f._sb.length;k++)f.__h.push(f._sb[k]);f._sb=[],f.__h.length&&a.push(f);break e}f.componentWillUpdate!=null&&f.componentWillUpdate(w,f.__s,C),f.componentDidUpdate!=null&&f.__h.push(function(){f.componentDidUpdate(m,v,b)})}if(f.context=C,f.props=w,f.__P=t,R=ke.__r,A=0,"prototype"in O&&O.prototype.render){for(f.state=f.__s,f.__d=!1,R&&R(e),d=f.render(f.props,f.state,f.context),M=0;M<f._sb.length;M++)f.__h.push(f._sb[M]);f._sb=[]}else do f.__d=!1,R&&R(e),d=f.render(f.props,f.state,f.context),f.state=f.__s;while(f.__d&&++A<25);f.state=f.__s,f.getChildContext!=null&&(r=us(us({},r),f.getChildContext())),p||f.getSnapshotBeforeUpdate==null||(b=f.getSnapshotBeforeUpdate(m,v)),P=d!=null&&d.type===vt&&d.key==null?d.props.children:d,Gx(t,Array.isArray(P)?P:[P],e,n,r,i,s,a,c,u),f.base=e.__e,e.__h=null,f.__h.length&&a.push(f),_&&(f.__E=f.__=null),f.__e=!1}else s==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=xI(n.__e,e,n,r,i,s,a,u);(d=ke.diffed)&&d(e)}catch(H){e.__v=null,(u||s!=null)&&(e.__e=c,e.__h=!!u,s[s.indexOf(c)]=null),ke.__e(H,e,n)}}function Zx(t,e){ke.__c&&ke.__c(e,t),t.some(function(n){try{t=n.__h,n.__h=[],t.some(function(r){r.call(n)})}catch(r){ke.__e(r,n.__v)}})}function xI(t,e,n,r,i,s,a,c){var u,d,f,p=n.props,m=e.props,v=e.type,b=0;if(v==="svg"&&(i=!0),s!=null){for(;b<s.length;b++)if((u=s[b])&&"setAttribute"in u==!!v&&(v?u.localName===v:u.nodeType===3)){t=u,s[b]=null;break}}if(t==null){if(v===null)return document.createTextNode(m);t=i?document.createElementNS("http://www.w3.org/2000/svg",v):document.createElement(v,m.is&&m),s=null,c=!1}if(v===null)p===m||c&&t.data===m||(t.data=m);else{if(s=s&&tf.call(t.childNodes),d=(p=n.props||pd).dangerouslySetInnerHTML,f=m.dangerouslySetInnerHTML,!c){if(s!=null)for(p={},b=0;b<t.attributes.length;b++)p[t.attributes[b].name]=t.attributes[b].value;(f||d)&&(f&&(d&&f.__html==d.__html||f.__html===t.innerHTML)||(t.innerHTML=f&&f.__html||""))}if(SI(t,m,p,i,c),f)e.__k=[];else if(b=e.props.children,Gx(t,Array.isArray(b)?b:[b],e,n,r,i&&v!=="foreignObject",s,a,s?s[0]:n.__k&&Ml(n,0),c),s!=null)for(b=s.length;b--;)s[b]!=null&&$x(s[b]);c||("value"in m&&(b=m.value)!==void 0&&(b!==t.value||v==="progress"&&!b||v==="option"&&b!==p.value)&&gd(t,"value",b,p.value,!1),"checked"in m&&(b=m.checked)!==void 0&&b!==t.checked&&gd(t,"checked",b,p.checked,!1))}return t}function Xx(t,e,n){try{typeof t=="function"?t(e):t.current=e}catch(r){ke.__e(r,n)}}function Jx(t,e,n){var r,i;if(ke.unmount&&ke.unmount(t),(r=t.ref)&&(r.current&&r.current!==t.__e||Xx(r,null,e)),(r=t.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(s){ke.__e(s,e)}r.base=r.__P=null,t.__c=void 0}if(r=t.__k)for(i=0;i<r.length;i++)r[i]&&Jx(r[i],e,n||typeof t.type!="function");n||t.__e==null||$x(t.__e),t.__=t.__e=t.__d=void 0}function EI(t,e,n){return this.constructor(t,n)}function Nl(t,e,n){var r,i,s;ke.__&&ke.__(t,e),i=(r=!1)?null:e.__k,s=[],om(e,t=e.__k=I(vt,null,[t]),i||pd,pd,e.ownerSVGElement!==void 0,i?null:e.firstChild?tf.call(e.childNodes):null,s,i?i.__e:e.firstChild,r),Zx(s,t)}function CI(t,e){var n={__c:e="__cC"+Wx++,__:t,Consumer:function(r,i){return r.children(i)},Provider:function(r){var i,s;return this.getChildContext||(i=[],(s={})[e]=this,this.getChildContext=function(){return s},this.shouldComponentUpdate=function(a){this.props.value!==a.value&&i.some(function(c){c.__e=!0,pg(c)})},this.sub=function(a){i.push(a);var c=a.componentWillUnmount;a.componentWillUnmount=function(){i.splice(i.indexOf(a),1),c&&c.call(a)}}),r.children}};return n.Provider.__=n.Consumer.contextType=n}tf=Vx.slice,ke={__e:function(t,e,n,r){for(var i,s,a;e=e.__;)if((i=e.__c)&&!i.__)try{if((s=i.constructor)&&s.getDerivedStateFromError!=null&&(i.setState(s.getDerivedStateFromError(t)),a=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(t,r||{}),a=i.__d),a)return i.__E=i}catch(c){t=c}throw t}},zx=0,Ux=function(t){return t!=null&&t.constructor===void 0},io=!1,lr.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=us({},this.state),typeof t=="function"&&(t=t(us({},n),this.props)),t&&us(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),pg(this))},lr.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),pg(this))},lr.prototype.render=vt,Zs=[],Bx=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,md.__r=0,Wx=0;var ti,bp,Q0,eE=[],_p=[],K0=ke.__b,Z0=ke.__r,X0=ke.diffed,J0=ke.__c,e_=ke.unmount;function TI(){for(var t;t=eE.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(Xu),t.__H.__h.forEach(gg),t.__H.__h=[]}catch(e){t.__H.__h=[],ke.__e(e,t.__v)}}ke.__b=function(t){ti=null,K0&&K0(t)},ke.__r=function(t){Z0&&Z0(t);var e=(ti=t.__c).__H;e&&(bp===ti?(e.__h=[],ti.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=_p,n.__N=n.i=void 0})):(e.__h.forEach(Xu),e.__h.forEach(gg),e.__h=[])),bp=ti},ke.diffed=function(t){X0&&X0(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(eE.push(e)!==1&&Q0===ke.requestAnimationFrame||((Q0=ke.requestAnimationFrame)||DI)(TI)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==_p&&(n.__=n.__V),n.i=void 0,n.__V=_p})),bp=ti=null},ke.__c=function(t,e){e.some(function(n){try{n.__h.forEach(Xu),n.__h=n.__h.filter(function(r){return!r.__||gg(r)})}catch(r){e.some(function(i){i.__h&&(i.__h=[])}),e=[],ke.__e(r,n.__v)}}),J0&&J0(t,e)},ke.unmount=function(t){e_&&e_(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{Xu(r)}catch(i){e=i}}),n.__H=void 0,e&&ke.__e(e,n.__v))};var t_=typeof requestAnimationFrame=="function";function DI(t){var e,n=function(){clearTimeout(r),t_&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(n,100);t_&&(e=requestAnimationFrame(n))}function Xu(t){var e=ti,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),ti=e}function gg(t){var e=ti;t.__c=t.__(),ti=e}function kI(t,e){for(var n in e)t[n]=e[n];return t}function n_(t,e){for(var n in t)if(n!=="__source"&&!(n in e))return!0;for(var r in e)if(r!=="__source"&&t[r]!==e[r])return!0;return!1}function r_(t){this.props=t}(r_.prototype=new lr).isPureReactComponent=!0,r_.prototype.shouldComponentUpdate=function(t,e){return n_(this.props,t)||n_(this.state,e)};var i_=ke.__b;ke.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),i_&&i_(t)};var AI=ke.__e;ke.__e=function(t,e,n,r){if(t.then){for(var i,s=e;s=s.__;)if((i=s.__c)&&i.__c)return e.__e==null&&(e.__e=n.__e,e.__k=n.__k),i.__c(t,e)}AI(t,e,n,r)};var s_=ke.unmount;function tE(t,e,n){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(r){typeof r.__c=="function"&&r.__c()}),t.__c.__H=null),(t=kI({},t)).__c!=null&&(t.__c.__P===n&&(t.__c.__P=e),t.__c=null),t.__k=t.__k&&t.__k.map(function(r){return tE(r,e,n)})),t}function nE(t,e,n){return t&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(r){return nE(r,e,n)}),t.__c&&t.__c.__P===e&&(t.__e&&n.insertBefore(t.__e,t.__d),t.__c.__e=!0,t.__c.__P=n)),t}function Sp(){this.__u=0,this.t=null,this.__b=null}function rE(t){var e=t.__.__c;return e&&e.__a&&e.__a(t)}function Cu(){this.u=null,this.o=null}ke.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&t.__h===!0&&(t.type=null),s_&&s_(t)},(Sp.prototype=new lr).__c=function(t,e){var n=e.__c,r=this;r.t==null&&(r.t=[]),r.t.push(n);var i=rE(r.__v),s=!1,a=function(){s||(s=!0,n.__R=null,i?i(c):c())};n.__R=a;var c=function(){if(!--r.__u){if(r.state.__a){var d=r.state.__a;r.__v.__k[0]=nE(d,d.__c.__P,d.__c.__O)}var f;for(r.setState({__a:r.__b=null});f=r.t.pop();)f.forceUpdate()}},u=e.__h===!0;r.__u++||u||r.setState({__a:r.__b=r.__v.__k[0]}),t.then(a,a)},Sp.prototype.componentWillUnmount=function(){this.t=[]},Sp.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=tE(this.__b,n,r.__O=r.__P)}this.__b=null}var i=e.__a&&I(vt,null,t.fallback);return i&&(i.__h=null),[I(vt,null,e.__a?null:t.children),i]};var a_=function(t,e,n){if(++n[1]===n[0]&&t.o.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.o.size))for(n=t.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.u=n=n[2]}};function RI(t){return this.getChildContext=function(){return t.context},t.children}function OI(t){var e=this,n=t.i;e.componentWillUnmount=function(){Nl(null,e.l),e.l=null,e.i=null},e.i&&e.i!==n&&e.componentWillUnmount(),t.__v?(e.l||(e.i=n,e.l={nodeType:1,parentNode:n,childNodes:[],appendChild:function(r){this.childNodes.push(r),e.i.appendChild(r)},insertBefore:function(r,i){this.childNodes.push(r),e.i.appendChild(r)},removeChild:function(r){this.childNodes.splice(this.childNodes.indexOf(r)>>>1,1),e.i.removeChild(r)}}),Nl(I(RI,{context:e.context},t.__v),e.l)):e.l&&e.componentWillUnmount()}function MI(t,e){var n=I(OI,{__v:t,i:e});return n.containerInfo=e,n}(Cu.prototype=new lr).__a=function(t){var e=this,n=rE(e.__v),r=e.o.get(t);return r[0]++,function(i){var s=function(){e.props.revealOrder?(r.push(i),a_(e,t,r)):i()};n?n(s):s()}},Cu.prototype.render=function(t){this.u=null,this.o=new Map;var e=vd(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var n=e.length;n--;)this.o.set(e[n],this.u=[1,0,this.u]);return t.children},Cu.prototype.componentDidUpdate=Cu.prototype.componentDidMount=function(){var t=this;this.o.forEach(function(e,n){a_(t,n,e)})};var NI=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,II=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,PI=typeof document<"u",LI=function(t){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(t)};lr.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(lr.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});var o_=ke.event;function FI(){}function jI(){return this.cancelBubble}function HI(){return this.defaultPrevented}ke.event=function(t){return o_&&(t=o_(t)),t.persist=FI,t.isPropagationStopped=jI,t.isDefaultPrevented=HI,t.nativeEvent=t};var l_={configurable:!0,get:function(){return this.class}},c_=ke.vnode;ke.vnode=function(t){var e=t.type,n=t.props,r=n;if(typeof e=="string"){var i=e.indexOf("-")===-1;for(var s in r={},n){var a=n[s];PI&&s==="children"&&e==="noscript"||s==="value"&&"defaultValue"in n&&a==null||(s==="defaultValue"&&"value"in n&&n.value==null?s="value":s==="download"&&a===!0?a="":/ondoubleclick/i.test(s)?s="ondblclick":/^onchange(textarea|input)/i.test(s+e)&&!LI(n.type)?s="oninput":/^onfocus$/i.test(s)?s="onfocusin":/^onblur$/i.test(s)?s="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(s)?s=s.toLowerCase():i&&II.test(s)?s=s.replace(/[A-Z0-9]/g,"-$&").toLowerCase():a===null&&(a=void 0),/^oninput$/i.test(s)&&(s=s.toLowerCase(),r[s]&&(s="oninputCapture")),r[s]=a)}e=="select"&&r.multiple&&Array.isArray(r.value)&&(r.value=vd(n.children).forEach(function(c){c.props.selected=r.value.indexOf(c.props.value)!=-1})),e=="select"&&r.defaultValue!=null&&(r.value=vd(n.children).forEach(function(c){c.props.selected=r.multiple?r.defaultValue.indexOf(c.props.value)!=-1:r.defaultValue==c.props.value})),t.props=r,n.class!=n.className&&(l_.enumerable="className"in n,n.className!=null&&(r.class=n.className),Object.defineProperty(r,"className",l_))}t.$$typeof=NI,c_&&c_(t)};var u_=ke.__r;ke.__r=function(t){u_&&u_(t),t.__c};const iE=[],mg=new Map;function nf(t){iE.push(t),mg.forEach(e=>{aE(e,t)})}function zI(t){t.isConnected&&t.getRootNode&&sE(t.getRootNode())}function sE(t){let e=mg.get(t);if(!e||!e.isConnected){if(e=t.querySelector("style[data-fullcalendar]"),!e){e=document.createElement("style"),e.setAttribute("data-fullcalendar","");const n=BI();n&&(e.nonce=n);const r=t===document?document.head:t,i=t===document?r.querySelector("script,link[rel=stylesheet],link[as=style],style"):r.firstChild;r.insertBefore(e,i)}mg.set(t,e),UI(e)}}function UI(t){for(const e of iE)aE(t,e)}function aE(t,e){const{sheet:n}=t,r=n.cssRules.length;e.split("}").forEach((i,s)=>{i=i.trim(),i&&n.insertRule(i+"}",r+s)})}let wp;function BI(){return wp===void 0&&(wp=WI()),wp}function WI(){const t=document.querySelector('meta[name="csp-nonce"]');if(t&&t.hasAttribute("content"))return t.getAttribute("content");const e=document.querySelector("script[nonce]");return e&&e.nonce||""}typeof document<"u"&&sE(document);var VI=':root{--fc-small-font-size:.85em;--fc-page-bg-color:#fff;--fc-neutral-bg-color:hsla(0,0%,82%,.3);--fc-neutral-text-color:grey;--fc-border-color:#ddd;--fc-button-text-color:#fff;--fc-button-bg-color:#2c3e50;--fc-button-border-color:#2c3e50;--fc-button-hover-bg-color:#1e2b37;--fc-button-hover-border-color:#1a252f;--fc-button-active-bg-color:#1a252f;--fc-button-active-border-color:#151e27;--fc-event-bg-color:#3788d8;--fc-event-border-color:#3788d8;--fc-event-text-color:#fff;--fc-event-selected-overlay-color:rgba(0,0,0,.25);--fc-more-link-bg-color:#d0d0d0;--fc-more-link-text-color:inherit;--fc-event-resizer-thickness:8px;--fc-event-resizer-dot-total-width:8px;--fc-event-resizer-dot-border-width:1px;--fc-non-business-color:hsla(0,0%,84%,.3);--fc-bg-event-color:#8fdf82;--fc-bg-event-opacity:0.3;--fc-highlight-color:rgba(188,232,241,.3);--fc-today-bg-color:rgba(255,220,40,.15);--fc-now-indicator-color:red}.fc-not-allowed,.fc-not-allowed .fc-event{cursor:not-allowed}.fc{display:flex;flex-direction:column;font-size:1em}.fc,.fc *,.fc :after,.fc :before{box-sizing:border-box}.fc table{border-collapse:collapse;border-spacing:0;font-size:1em}.fc th{text-align:center}.fc td,.fc th{padding:0;vertical-align:top}.fc a[data-navlink]{cursor:pointer}.fc a[data-navlink]:hover{text-decoration:underline}.fc-direction-ltr{direction:ltr;text-align:left}.fc-direction-rtl{direction:rtl;text-align:right}.fc-theme-standard td,.fc-theme-standard th{border:1px solid var(--fc-border-color)}.fc-liquid-hack td,.fc-liquid-hack th{position:relative}@font-face{font-family:fcicons;font-style:normal;font-weight:400;src:url("data:application/x-font-ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMg8SBfAAAAC8AAAAYGNtYXAXVtKNAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZgYydxIAAAF4AAAFNGhlYWQUJ7cIAAAGrAAAADZoaGVhB20DzAAABuQAAAAkaG10eCIABhQAAAcIAAAALGxvY2ED4AU6AAAHNAAAABhtYXhwAA8AjAAAB0wAAAAgbmFtZXsr690AAAdsAAABhnBvc3QAAwAAAAAI9AAAACAAAwPAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpBgPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6Qb//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAWIAjQKeAskAEwAAJSc3NjQnJiIHAQYUFwEWMjc2NCcCnuLiDQ0MJAz/AA0NAQAMJAwNDcni4gwjDQwM/wANIwz/AA0NDCMNAAAAAQFiAI0CngLJABMAACUBNjQnASYiBwYUHwEHBhQXFjI3AZ4BAA0N/wAMJAwNDeLiDQ0MJAyNAQAMIw0BAAwMDSMM4uINIwwNDQAAAAIA4gC3Ax4CngATACcAACUnNzY0JyYiDwEGFB8BFjI3NjQnISc3NjQnJiIPAQYUHwEWMjc2NCcB87e3DQ0MIw3VDQ3VDSMMDQ0BK7e3DQ0MJAzVDQ3VDCQMDQ3zuLcMJAwNDdUNIwzWDAwNIwy4twwkDA0N1Q0jDNYMDA0jDAAAAgDiALcDHgKeABMAJwAAJTc2NC8BJiIHBhQfAQcGFBcWMjchNzY0LwEmIgcGFB8BBwYUFxYyNwJJ1Q0N1Q0jDA0Nt7cNDQwjDf7V1Q0N1QwkDA0Nt7cNDQwkDLfWDCMN1Q0NDCQMt7gMIw0MDNYMIw3VDQ0MJAy3uAwjDQwMAAADAFUAAAOrA1UAMwBoAHcAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMhMjY1NCYjISIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAAVYRGRkR/qoRGRkRA1UFBAUOCQkVDAsZDf2rDRkLDBUJCA4FBQUFBQUOCQgVDAsZDQJVDRkLDBUJCQ4FBAVVAgECBQMCBwQECAX9qwQJAwQHAwMFAQICAgIBBQMDBwQDCQQCVQUIBAQHAgMFAgEC/oAZEhEZGRESGQAAAAADAFUAAAOrA1UAMwBoAIkAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMzFRQWMzI2PQEzMjY1NCYrATU0JiMiBh0BIyIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAgBkSEhmAERkZEYAZEhIZgBEZGREDVQUEBQ4JCRUMCxkN/asNGQsMFQkIDgUFBQUFBQ4JCBUMCxkNAlUNGQsMFQkJDgUEBVUCAQIFAwIHBAQIBf2rBAkDBAcDAwUBAgICAgEFAwMHBAMJBAJVBQgEBAcCAwUCAQL+gIASGRkSgBkSERmAEhkZEoAZERIZAAABAOIAjQMeAskAIAAAExcHBhQXFjI/ARcWMjc2NC8BNzY0JyYiDwEnJiIHBhQX4uLiDQ0MJAzi4gwkDA0N4uINDQwkDOLiDCQMDQ0CjeLiDSMMDQ3h4Q0NDCMN4uIMIw0MDOLiDAwNIwwAAAABAAAAAQAAa5n0y18PPPUACwQAAAAAANivOVsAAAAA2K85WwAAAAADqwNVAAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAOrAAEAAAAAAAAAAAAAAAAAAAALBAAAAAAAAAAAAAAAAgAAAAQAAWIEAAFiBAAA4gQAAOIEAABVBAAAVQQAAOIAAAAAAAoAFAAeAEQAagCqAOoBngJkApoAAQAAAAsAigADAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApGZjaWNvbnMAZgBjAGkAYwBvAG4Ac1ZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGZjaWNvbnMAZgBjAGkAYwBvAG4Ac2ZjaWNvbnMAZgBjAGkAYwBvAG4Ac1JlZ3VsYXIAUgBlAGcAdQBsAGEAcmZjaWNvbnMAZgBjAGkAYwBvAG4Ac0ZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=") format("truetype")}.fc-icon{speak:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:inline-block;font-family:fcicons!important;font-style:normal;font-variant:normal;font-weight:400;height:1em;line-height:1;text-align:center;text-transform:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:1em}.fc-icon-chevron-left:before{content:"\\e900"}.fc-icon-chevron-right:before{content:"\\e901"}.fc-icon-chevrons-left:before{content:"\\e902"}.fc-icon-chevrons-right:before{content:"\\e903"}.fc-icon-minus-square:before{content:"\\e904"}.fc-icon-plus-square:before{content:"\\e905"}.fc-icon-x:before{content:"\\e906"}.fc .fc-button{border-radius:0;font-family:inherit;font-size:inherit;line-height:inherit;margin:0;overflow:visible;text-transform:none}.fc .fc-button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}.fc .fc-button{-webkit-appearance:button}.fc .fc-button:not(:disabled){cursor:pointer}.fc .fc-button{background-color:transparent;border:1px solid transparent;border-radius:.25em;display:inline-block;font-size:1em;font-weight:400;line-height:1.5;padding:.4em .65em;text-align:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle}.fc .fc-button:hover{text-decoration:none}.fc .fc-button:focus{box-shadow:0 0 0 .2rem rgba(44,62,80,.25);outline:0}.fc .fc-button:disabled{opacity:.65}.fc .fc-button-primary{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:hover{background-color:var(--fc-button-hover-bg-color);border-color:var(--fc-button-hover-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:disabled{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button-primary:not(:disabled).fc-button-active,.fc .fc-button-primary:not(:disabled):active{background-color:var(--fc-button-active-bg-color);border-color:var(--fc-button-active-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:not(:disabled).fc-button-active:focus,.fc .fc-button-primary:not(:disabled):active:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button .fc-icon{font-size:1.5em;vertical-align:middle}.fc .fc-button-group{display:inline-flex;position:relative;vertical-align:middle}.fc .fc-button-group>.fc-button{flex:1 1 auto;position:relative}.fc .fc-button-group>.fc-button.fc-button-active,.fc .fc-button-group>.fc-button:active,.fc .fc-button-group>.fc-button:focus,.fc .fc-button-group>.fc-button:hover{z-index:1}.fc-direction-ltr .fc-button-group>.fc-button:not(:first-child){border-bottom-left-radius:0;border-top-left-radius:0;margin-left:-1px}.fc-direction-ltr .fc-button-group>.fc-button:not(:last-child){border-bottom-right-radius:0;border-top-right-radius:0}.fc-direction-rtl .fc-button-group>.fc-button:not(:first-child){border-bottom-right-radius:0;border-top-right-radius:0;margin-right:-1px}.fc-direction-rtl .fc-button-group>.fc-button:not(:last-child){border-bottom-left-radius:0;border-top-left-radius:0}.fc .fc-toolbar{align-items:center;display:flex;justify-content:space-between}.fc .fc-toolbar.fc-header-toolbar{margin-bottom:1.5em}.fc .fc-toolbar.fc-footer-toolbar{margin-top:1.5em}.fc .fc-toolbar-title{font-size:1.75em;margin:0}.fc-direction-ltr .fc-toolbar>*>:not(:first-child){margin-left:.75em}.fc-direction-rtl .fc-toolbar>*>:not(:first-child){margin-right:.75em}.fc-direction-rtl .fc-toolbar-ltr{flex-direction:row-reverse}.fc .fc-scroller{-webkit-overflow-scrolling:touch;position:relative}.fc .fc-scroller-liquid{height:100%}.fc .fc-scroller-liquid-absolute{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-scroller-harness{direction:ltr;overflow:hidden;position:relative}.fc .fc-scroller-harness-liquid{height:100%}.fc-direction-rtl .fc-scroller-harness>.fc-scroller{direction:rtl}.fc-theme-standard .fc-scrollgrid{border:1px solid var(--fc-border-color)}.fc .fc-scrollgrid,.fc .fc-scrollgrid table{table-layout:fixed;width:100%}.fc .fc-scrollgrid table{border-left-style:hidden;border-right-style:hidden;border-top-style:hidden}.fc .fc-scrollgrid{border-bottom-width:0;border-collapse:separate;border-right-width:0}.fc .fc-scrollgrid-liquid{height:100%}.fc .fc-scrollgrid-section,.fc .fc-scrollgrid-section table,.fc .fc-scrollgrid-section>td{height:1px}.fc .fc-scrollgrid-section-liquid>td{height:100%}.fc .fc-scrollgrid-section>*{border-left-width:0;border-top-width:0}.fc .fc-scrollgrid-section-footer>*,.fc .fc-scrollgrid-section-header>*{border-bottom-width:0}.fc .fc-scrollgrid-section-body table,.fc .fc-scrollgrid-section-footer table{border-bottom-style:hidden}.fc .fc-scrollgrid-section-sticky>*{background:var(--fc-page-bg-color);position:sticky;z-index:3}.fc .fc-scrollgrid-section-header.fc-scrollgrid-section-sticky>*{top:0}.fc .fc-scrollgrid-section-footer.fc-scrollgrid-section-sticky>*{bottom:0}.fc .fc-scrollgrid-sticky-shim{height:1px;margin-bottom:-1px}.fc-sticky{position:sticky}.fc .fc-view-harness{flex-grow:1;position:relative}.fc .fc-view-harness-active>.fc-view{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-col-header-cell-cushion{display:inline-block;padding:2px 4px}.fc .fc-bg-event,.fc .fc-highlight,.fc .fc-non-business{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-non-business{background:var(--fc-non-business-color)}.fc .fc-bg-event{background:var(--fc-bg-event-color);opacity:var(--fc-bg-event-opacity)}.fc .fc-bg-event .fc-event-title{font-size:var(--fc-small-font-size);font-style:italic;margin:.5em}.fc .fc-highlight{background:var(--fc-highlight-color)}.fc .fc-cell-shaded,.fc .fc-day-disabled{background:var(--fc-neutral-bg-color)}a.fc-event,a.fc-event:hover{text-decoration:none}.fc-event.fc-event-draggable,.fc-event[href]{cursor:pointer}.fc-event .fc-event-main{position:relative;z-index:2}.fc-event-dragging:not(.fc-event-selected){opacity:.75}.fc-event-dragging.fc-event-selected{box-shadow:0 2px 7px rgba(0,0,0,.3)}.fc-event .fc-event-resizer{display:none;position:absolute;z-index:4}.fc-event-selected .fc-event-resizer,.fc-event:hover .fc-event-resizer{display:block}.fc-event-selected .fc-event-resizer{background:var(--fc-page-bg-color);border-color:inherit;border-radius:calc(var(--fc-event-resizer-dot-total-width)/2);border-style:solid;border-width:var(--fc-event-resizer-dot-border-width);height:var(--fc-event-resizer-dot-total-width);width:var(--fc-event-resizer-dot-total-width)}.fc-event-selected .fc-event-resizer:before{bottom:-20px;content:"";left:-20px;position:absolute;right:-20px;top:-20px}.fc-event-selected,.fc-event:focus{box-shadow:0 2px 5px rgba(0,0,0,.2)}.fc-event-selected:before,.fc-event:focus:before{bottom:0;content:"";left:0;position:absolute;right:0;top:0;z-index:3}.fc-event-selected:after,.fc-event:focus:after{background:var(--fc-event-selected-overlay-color);bottom:-1px;content:"";left:-1px;position:absolute;right:-1px;top:-1px;z-index:1}.fc-h-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-h-event .fc-event-main{color:var(--fc-event-text-color)}.fc-h-event .fc-event-main-frame{display:flex}.fc-h-event .fc-event-time{max-width:100%;overflow:hidden}.fc-h-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-width:0}.fc-h-event .fc-event-title{display:inline-block;left:0;max-width:100%;overflow:hidden;right:0;vertical-align:top}.fc-h-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-start),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-end){border-bottom-left-radius:0;border-left-width:0;border-top-left-radius:0}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-end),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-start){border-bottom-right-radius:0;border-right-width:0;border-top-right-radius:0}.fc-h-event:not(.fc-event-selected) .fc-event-resizer{bottom:0;top:0;width:var(--fc-event-resizer-thickness)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end{cursor:w-resize;left:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start{cursor:e-resize;right:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-h-event.fc-event-selected .fc-event-resizer{margin-top:calc(var(--fc-event-resizer-dot-total-width)*-.5);top:50%}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-start,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-end{left:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-end,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-start{right:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc .fc-popover{box-shadow:0 2px 6px rgba(0,0,0,.15);position:absolute;z-index:9999}.fc .fc-popover-header{align-items:center;display:flex;flex-direction:row;justify-content:space-between;padding:3px 4px}.fc .fc-popover-title{margin:0 2px}.fc .fc-popover-close{cursor:pointer;font-size:1.1em;opacity:.65}.fc-theme-standard .fc-popover{background:var(--fc-page-bg-color);border:1px solid var(--fc-border-color)}.fc-theme-standard .fc-popover-header{background:var(--fc-neutral-bg-color)}';nf(VI);class lm{constructor(e){this.drainedOption=e,this.isRunning=!1,this.isDirty=!1,this.pauseDepths={},this.timeoutId=0}request(e){this.isDirty=!0,this.isPaused()||(this.clearTimeout(),e==null?this.tryDrain():this.timeoutId=setTimeout(this.tryDrain.bind(this),e))}pause(e=""){let{pauseDepths:n}=this;n[e]=(n[e]||0)+1,this.clearTimeout()}resume(e="",n){let{pauseDepths:r}=this;e in r&&(n?delete r[e]:(r[e]-=1,r[e]<=0&&delete r[e]),this.tryDrain())}isPaused(){return Object.keys(this.pauseDepths).length}tryDrain(){if(!this.isRunning&&!this.isPaused()){for(this.isRunning=!0;this.isDirty;)this.isDirty=!1,this.drained();this.isRunning=!1}}clear(){this.clearTimeout(),this.isDirty=!1,this.pauseDepths={}}clearTimeout(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=0)}drained(){this.drainedOption&&this.drainedOption()}}function cm(t){t.parentNode&&t.parentNode.removeChild(t)}function Tn(t,e){if(t.closest)return t.closest(e);if(!document.documentElement.contains(t))return null;do{if($I(t,e))return t;t=t.parentElement||t.parentNode}while(t!==null&&t.nodeType===1);return null}function $I(t,e){return(t.matches||t.matchesSelector||t.msMatchesSelector).call(t,e)}function qI(t,e){let n=t instanceof HTMLElement?[t]:t,r=[];for(let i=0;i<n.length;i+=1){let s=n[i].querySelectorAll(e);for(let a=0;a<s.length;a+=1)r.push(s[a])}return r}const GI=/(top|left|right|bottom|width|height)$/i;function vl(t,e){for(let n in e)oE(t,n,e[n])}function oE(t,e,n){n==null?t.style[e]="":typeof n=="number"&&GI.test(e)?t.style[e]=`${n}px`:t.style[e]=n}function lE(t){var e,n;return(n=(e=t.composedPath)===null||e===void 0?void 0:e.call(t)[0])!==null&&n!==void 0?n:t.target}let d_=0;function ms(){return d_+=1,"fc-dom-"+d_}function rf(t){t.preventDefault()}function YI(t,e){return n=>{let r=Tn(n.target,t);r&&e.call(r,n,r)}}function cE(t,e,n,r){let i=YI(n,r);return t.addEventListener(e,i),()=>{t.removeEventListener(e,i)}}function QI(t,e,n,r){let i;return cE(t,"mouseover",e,(s,a)=>{if(a!==i){i=a,n(s,a);let c=u=>{i=null,r(u,a),a.removeEventListener("mouseleave",c)};a.addEventListener("mouseleave",c)}})}const f_=["webkitTransitionEnd","otransitionend","oTransitionEnd","msTransitionEnd","transitionend"];function KI(t,e){let n=r=>{e(r),f_.forEach(i=>{t.removeEventListener(i,n)})};f_.forEach(r=>{t.addEventListener(r,n)})}function uE(t){return Object.assign({onClick:t},dE(t))}function dE(t){return{tabIndex:0,onKeyDown(e){(e.key==="Enter"||e.key===" ")&&(t(e),e.preventDefault())}}}let h_=0;function ma(){return h_+=1,String(h_)}function um(){document.body.classList.add("fc-not-allowed")}function dm(){document.body.classList.remove("fc-not-allowed")}function ZI(t){t.style.userSelect="none",t.style.webkitUserSelect="none",t.addEventListener("selectstart",rf)}function XI(t){t.style.userSelect="",t.style.webkitUserSelect="",t.removeEventListener("selectstart",rf)}function JI(t){t.addEventListener("contextmenu",rf)}function eP(t){t.removeEventListener("contextmenu",rf)}function tP(t){let e=[],n=[],r,i;for(typeof t=="string"?n=t.split(/\s*,\s*/):typeof t=="function"?n=[t]:Array.isArray(t)&&(n=t),r=0;r<n.length;r+=1)i=n[r],typeof i=="string"?e.push(i.charAt(0)==="-"?{field:i.substring(1),order:-1}:{field:i,order:1}):typeof i=="function"&&e.push({func:i});return e}function nP(t,e,n){let r,i;for(r=0;r<n.length;r+=1)if(i=rP(t,e,n[r]),i)return i;return 0}function rP(t,e,n){return n.func?n.func(t,e):iP(t[n.field],e[n.field])*(n.order||1)}function iP(t,e){return!t&&!e?0:e==null?-1:t==null?1:typeof t=="string"||typeof e=="string"?String(t).localeCompare(String(e)):t-e}function Ja(t,e){let n=String(t);return"000".substr(0,e-n.length)+n}function yl(t,e,n){return typeof t=="function"?t(...e):typeof t=="string"?e.reduce((r,i,s)=>r.replace("$"+s,i||""),t):n}function sP(t,e){return t-e}function Ju(t){return t%1===0}function aP(t){let e=t.querySelector(".fc-scrollgrid-shrink-frame"),n=t.querySelector(".fc-scrollgrid-shrink-cushion");if(!e)throw new Error("needs fc-scrollgrid-shrink-frame className");if(!n)throw new Error("needs fc-scrollgrid-shrink-cushion className");return t.getBoundingClientRect().width-e.getBoundingClientRect().width+n.getBoundingClientRect().width}const p_=["years","months","days","milliseconds"],oP=/^(-?)(?:(\d+)\.)?(\d+):(\d\d)(?::(\d\d)(?:\.(\d\d\d))?)?/;function Ye(t,e){return typeof t=="string"?lP(t):typeof t=="object"&&t?g_(t):typeof t=="number"?g_({[e||"milliseconds"]:t}):null}function lP(t){let e=oP.exec(t);if(e){let n=e[1]?-1:1;return{years:0,months:0,days:n*(e[2]?parseInt(e[2],10):0),milliseconds:n*((e[3]?parseInt(e[3],10):0)*60*60*1e3+(e[4]?parseInt(e[4],10):0)*60*1e3+(e[5]?parseInt(e[5],10):0)*1e3+(e[6]?parseInt(e[6],10):0))}}return null}function g_(t){let e={years:t.years||t.year||0,months:t.months||t.month||0,days:t.days||t.day||0,milliseconds:(t.hours||t.hour||0)*60*60*1e3+(t.minutes||t.minute||0)*60*1e3+(t.seconds||t.second||0)*1e3+(t.milliseconds||t.millisecond||t.ms||0)},n=t.weeks||t.week;return n&&(e.days+=n*7,e.specifiedWeeks=!0),e}function cP(t,e){return t.years===e.years&&t.months===e.months&&t.days===e.days&&t.milliseconds===e.milliseconds}function vg(t,e){return{years:t.years+e.years,months:t.months+e.months,days:t.days+e.days,milliseconds:t.milliseconds+e.milliseconds}}function uP(t,e){return{years:t.years-e.years,months:t.months-e.months,days:t.days-e.days,milliseconds:t.milliseconds-e.milliseconds}}function dP(t,e){return{years:t.years*e,months:t.months*e,days:t.days*e,milliseconds:t.milliseconds*e}}function fP(t){return eo(t)/365}function hP(t){return eo(t)/30}function eo(t){return Fr(t)/864e5}function Fr(t){return t.years*(365*864e5)+t.months*(30*864e5)+t.days*864e5+t.milliseconds}function fm(t,e){let n=null;for(let r=0;r<p_.length;r+=1){let i=p_[r];if(e[i]){let s=t[i]/e[i];if(!Ju(s)||n!==null&&n!==s)return null;n=s}else if(t[i])return null}return n}function yg(t){let e=t.milliseconds;if(e){if(e%1e3!==0)return{unit:"millisecond",value:e};if(e%(1e3*60)!==0)return{unit:"second",value:e/1e3};if(e%(1e3*60*60)!==0)return{unit:"minute",value:e/(1e3*60)};if(e)return{unit:"hour",value:e/(1e3*60*60)}}return t.days?t.specifiedWeeks&&t.days%7===0?{unit:"week",value:t.days/7}:{unit:"day",value:t.days}:t.months?{unit:"month",value:t.months}:t.years?{unit:"year",value:t.years}:{unit:"millisecond",value:0}}function bs(t,e,n){if(t===e)return!0;let r=t.length,i;if(r!==e.length)return!1;for(i=0;i<r;i+=1)if(!(n?n(t[i],e[i]):t[i]===e[i]))return!1;return!0}const pP=["sun","mon","tue","wed","thu","fri","sat"];function m_(t,e){let n=ds(t);return n[2]+=e*7,Jn(n)}function Kt(t,e){let n=ds(t);return n[2]+=e,Jn(n)}function _s(t,e){let n=ds(t);return n[6]+=e,Jn(n)}function gP(t,e){return Cs(t,e)/7}function Cs(t,e){return(e.valueOf()-t.valueOf())/(1e3*60*60*24)}function mP(t,e){return(e.valueOf()-t.valueOf())/(1e3*60*60)}function vP(t,e){return(e.valueOf()-t.valueOf())/(1e3*60)}function yP(t,e){return(e.valueOf()-t.valueOf())/1e3}function bP(t,e){let n=bt(t),r=bt(e);return{years:0,months:0,days:Math.round(Cs(n,r)),milliseconds:e.valueOf()-r.valueOf()-(t.valueOf()-n.valueOf())}}function _P(t,e){let n=yd(t,e);return n!==null&&n%7===0?n/7:null}function yd(t,e){return fs(t)===fs(e)?Math.round(Cs(t,e)):null}function bt(t){return Jn([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()])}function SP(t){return Jn([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours()])}function wP(t){return Jn([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes()])}function xP(t){return Jn([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds()])}function EP(t,e,n){let r=t.getUTCFullYear(),i=xp(t,r,e,n);if(i<1)return xp(t,r-1,e,n);let s=xp(t,r+1,e,n);return s>=1?Math.min(i,s):i}function xp(t,e,n,r){let i=Jn([e,0,1+CP(e,n,r)]),s=bt(t),a=Math.round(Cs(i,s));return Math.floor(a/7)+1}function CP(t,e,n){let r=7+e-n;return-((7+Jn([t,0,r]).getUTCDay()-e)%7)+r-1}function v_(t){return[t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()]}function y_(t){return new Date(t[0],t[1]||0,t[2]==null?1:t[2],t[3]||0,t[4]||0,t[5]||0)}function ds(t){return[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()]}function Jn(t){return t.length===1&&(t=t.concat([0])),new Date(Date.UTC(...t))}function fE(t){return!isNaN(t.valueOf())}function fs(t){return t.getUTCHours()*1e3*60*60+t.getUTCMinutes()*1e3*60+t.getUTCSeconds()*1e3+t.getUTCMilliseconds()}function hE(t,e,n=!1){let r=t.toISOString();return r=r.replace(".000",""),n&&(r=r.replace("T00:00:00Z","")),r.length>10&&(e==null?r=r.replace("Z",""):e!==0&&(r=r.replace("Z",hm(e,!0)))),r}function Jl(t){return t.toISOString().replace(/T.*$/,"")}function TP(t){return t.toISOString().match(/^\d{4}-\d{2}/)[0]}function DP(t){return Ja(t.getUTCHours(),2)+":"+Ja(t.getUTCMinutes(),2)+":"+Ja(t.getUTCSeconds(),2)}function hm(t,e=!1){let n=t<0?"-":"+",r=Math.abs(t),i=Math.floor(r/60),s=Math.round(r%60);return e?`${n+Ja(i,2)}:${Ja(s,2)}`:`GMT${n}${i}${s?`:${Ja(s,2)}`:""}`}function Ce(t,e,n){let r,i;return function(...s){if(!r)i=t.apply(this,s);else if(!bs(r,s)){let a=t.apply(this,s);(!e||!e(a,i))&&(i=a)}return r=s,i}}function ed(t,e,n){let r,i;return s=>(r?Hr(r,s)||(i=t.call(this,s)):i=t.call(this,s),r=s,i)}const Ep={week:3,separator:9,omitZeroMinute:9,meridiem:9,omitCommas:9},bd={timeZoneName:7,era:6,year:5,month:4,day:2,weekday:2,hour:1,minute:1,second:1},Tu=/\s*([ap])\.?m\.?/i,kP=/,/g,AP=/\s+/g,RP=/\u200e/g,OP=/UTC|GMT/;class MP{constructor(e){let n={},r={},i=9;for(let s in e)s in Ep?(r[s]=e[s],Ep[s]<9&&(i=Math.min(Ep[s],i))):(n[s]=e[s],s in bd&&(i=Math.min(bd[s],i)));this.standardDateProps=n,this.extendedSettings=r,this.smallestUnitNum=i,this.buildFormattingFunc=Ce(b_)}format(e,n){return this.buildFormattingFunc(this.standardDateProps,this.extendedSettings,n)(e)}formatRange(e,n,r,i){let{standardDateProps:s,extendedSettings:a}=this,c=jP(e.marker,n.marker,r.calendarSystem);if(!c)return this.format(e,r);let u=c;u>1&&(s.year==="numeric"||s.year==="2-digit")&&(s.month==="numeric"||s.month==="2-digit")&&(s.day==="numeric"||s.day==="2-digit")&&(u=1);let d=this.format(e,r),f=this.format(n,r);if(d===f)return d;let p=HP(s,u),m=b_(p,a,r),v=m(e),b=m(n),_=zP(d,v,f,b),w=a.separator||i||r.defaultSeparator||"";return _?_.before+v+w+b+_.after:d+w+f}getSmallestUnit(){switch(this.smallestUnitNum){case 7:case 6:case 5:return"year";case 4:return"month";case 3:return"week";case 2:return"day";default:return"time"}}}function b_(t,e,n){let r=Object.keys(t).length;return r===1&&t.timeZoneName==="short"?i=>hm(i.timeZoneOffset):r===0&&e.week?i=>FP(n.computeWeekNumber(i.marker),n.weekText,n.weekTextLong,n.locale,e.week):NP(t,e,n)}function NP(t,e,n){t=Object.assign({},t),e=Object.assign({},e),IP(t,e),t.timeZone="UTC";let r=new Intl.DateTimeFormat(n.locale.codes,t),i;if(e.omitZeroMinute){let s=Object.assign({},t);delete s.minute,i=new Intl.DateTimeFormat(n.locale.codes,s)}return s=>{let{marker:a}=s,c;i&&!a.getUTCMinutes()?c=i:c=r;let u=c.format(a);return PP(u,s,t,e,n)}}function IP(t,e){t.timeZoneName&&(t.hour||(t.hour="2-digit"),t.minute||(t.minute="2-digit")),t.timeZoneName==="long"&&(t.timeZoneName="short"),e.omitZeroMinute&&(t.second||t.millisecond)&&delete e.omitZeroMinute}function PP(t,e,n,r,i){return t=t.replace(RP,""),n.timeZoneName==="short"&&(t=LP(t,i.timeZone==="UTC"||e.timeZoneOffset==null?"UTC":hm(e.timeZoneOffset))),r.omitCommas&&(t=t.replace(kP,"").trim()),r.omitZeroMinute&&(t=t.replace(":00","")),r.meridiem===!1?t=t.replace(Tu,"").trim():r.meridiem==="narrow"?t=t.replace(Tu,(s,a)=>a.toLocaleLowerCase()):r.meridiem==="short"?t=t.replace(Tu,(s,a)=>`${a.toLocaleLowerCase()}m`):r.meridiem==="lowercase"&&(t=t.replace(Tu,s=>s.toLocaleLowerCase())),t=t.replace(AP," "),t=t.trim(),t}function LP(t,e){let n=!1;return t=t.replace(OP,()=>(n=!0,e)),n||(t+=` ${e}`),t}function FP(t,e,n,r,i){let s=[];return i==="long"?s.push(n):(i==="short"||i==="narrow")&&s.push(e),(i==="long"||i==="short")&&s.push(" "),s.push(r.simpleNumberFormat.format(t)),r.options.direction==="rtl"&&s.reverse(),s.join("")}function jP(t,e,n){return n.getMarkerYear(t)!==n.getMarkerYear(e)?5:n.getMarkerMonth(t)!==n.getMarkerMonth(e)?4:n.getMarkerDay(t)!==n.getMarkerDay(e)?2:fs(t)!==fs(e)?1:0}function HP(t,e){let n={};for(let r in t)(!(r in bd)||bd[r]<=e)&&(n[r]=t[r]);return n}function zP(t,e,n,r){let i=0;for(;i<t.length;){let s=t.indexOf(e,i);if(s===-1)break;let a=t.substr(0,s);i=s+e.length;let c=t.substr(i),u=0;for(;u<n.length;){let d=n.indexOf(r,u);if(d===-1)break;let f=n.substr(0,d);u=d+r.length;let p=n.substr(u);if(a===f&&c===p)return{before:a,after:c}}}return null}function __(t,e){let n=e.markerToArray(t.marker);return{marker:t.marker,timeZoneOffset:t.timeZoneOffset,array:n,year:n[0],month:n[1],day:n[2],hour:n[3],minute:n[4],second:n[5],millisecond:n[6]}}function _d(t,e,n,r){let i=__(t,n.calendarSystem),s=e?__(e,n.calendarSystem):null;return{date:i,start:i,end:s,timeZone:n.timeZone,localeCodes:n.locale.codes,defaultSeparator:r||n.defaultSeparator}}class UP{constructor(e){this.cmdStr=e}format(e,n,r){return n.cmdFormatter(this.cmdStr,_d(e,null,n,r))}formatRange(e,n,r,i){return r.cmdFormatter(this.cmdStr,_d(e,n,r,i))}}class BP{constructor(e){this.func=e}format(e,n,r){return this.func(_d(e,null,n,r))}formatRange(e,n,r,i){return this.func(_d(e,n,r,i))}}function Dt(t){return typeof t=="object"&&t?new MP(t):typeof t=="string"?new UP(t):typeof t=="function"?new BP(t):null}const S_={navLinkDayClick:W,navLinkWeekClick:W,duration:Ye,bootstrapFontAwesome:W,buttonIcons:W,customButtons:W,defaultAllDayEventDuration:Ye,defaultTimedEventDuration:Ye,nextDayThreshold:Ye,scrollTime:Ye,scrollTimeReset:Boolean,slotMinTime:Ye,slotMaxTime:Ye,dayPopoverFormat:Dt,slotDuration:Ye,snapDuration:Ye,headerToolbar:W,footerToolbar:W,defaultRangeSeparator:String,titleRangeSeparator:String,forceEventDuration:Boolean,dayHeaders:Boolean,dayHeaderFormat:Dt,dayHeaderClassNames:W,dayHeaderContent:W,dayHeaderDidMount:W,dayHeaderWillUnmount:W,dayCellClassNames:W,dayCellContent:W,dayCellDidMount:W,dayCellWillUnmount:W,initialView:String,aspectRatio:Number,weekends:Boolean,weekNumberCalculation:W,weekNumbers:Boolean,weekNumberClassNames:W,weekNumberContent:W,weekNumberDidMount:W,weekNumberWillUnmount:W,editable:Boolean,viewClassNames:W,viewDidMount:W,viewWillUnmount:W,nowIndicator:Boolean,nowIndicatorSnap:W,nowIndicatorClassNames:W,nowIndicatorContent:W,nowIndicatorDidMount:W,nowIndicatorWillUnmount:W,showNonCurrentDates:Boolean,lazyFetching:Boolean,startParam:String,endParam:String,timeZoneParam:String,timeZone:String,locales:W,locale:W,themeSystem:String,dragRevertDuration:Number,dragScroll:Boolean,allDayMaintainDuration:Boolean,unselectAuto:Boolean,dropAccept:W,eventOrder:tP,eventOrderStrict:Boolean,handleWindowResize:Boolean,windowResizeDelay:Number,longPressDelay:Number,eventDragMinDistance:Number,expandRows:Boolean,height:W,contentHeight:W,direction:String,weekNumberFormat:Dt,eventResizableFromStart:Boolean,displayEventTime:Boolean,displayEventEnd:Boolean,weekText:String,weekTextLong:String,progressiveEventRendering:Boolean,businessHours:W,initialDate:W,now:W,eventDataTransform:W,stickyHeaderDates:W,stickyFooterScrollbar:W,viewHeight:W,defaultAllDay:Boolean,eventSourceFailure:W,eventSourceSuccess:W,eventDisplay:String,eventStartEditable:Boolean,eventDurationEditable:Boolean,eventOverlap:W,eventConstraint:W,eventAllow:W,eventBackgroundColor:String,eventBorderColor:String,eventTextColor:String,eventColor:String,eventClassNames:W,eventContent:W,eventDidMount:W,eventWillUnmount:W,selectConstraint:W,selectOverlap:W,selectAllow:W,droppable:Boolean,unselectCancel:String,slotLabelFormat:W,slotLaneClassNames:W,slotLaneContent:W,slotLaneDidMount:W,slotLaneWillUnmount:W,slotLabelClassNames:W,slotLabelContent:W,slotLabelDidMount:W,slotLabelWillUnmount:W,dayMaxEvents:W,dayMaxEventRows:W,dayMinWidth:Number,slotLabelInterval:Ye,allDayText:String,allDayClassNames:W,allDayContent:W,allDayDidMount:W,allDayWillUnmount:W,slotMinWidth:Number,navLinks:Boolean,eventTimeFormat:Dt,rerenderDelay:Number,moreLinkText:W,moreLinkHint:W,selectMinDistance:Number,selectable:Boolean,selectLongPressDelay:Number,eventLongPressDelay:Number,selectMirror:Boolean,eventMaxStack:Number,eventMinHeight:Number,eventMinWidth:Number,eventShortHeight:Number,slotEventOverlap:Boolean,plugins:W,firstDay:Number,dayCount:Number,dateAlignment:String,dateIncrement:Ye,hiddenDays:W,fixedWeekCount:Boolean,validRange:W,visibleRange:W,titleFormat:W,eventInteractive:Boolean,noEventsText:String,viewHint:W,navLinkHint:W,closeHint:String,timeHint:String,eventHint:String,moreLinkClick:W,moreLinkClassNames:W,moreLinkContent:W,moreLinkDidMount:W,moreLinkWillUnmount:W,monthStartFormat:Dt,handleCustomRendering:W,customRenderingMetaMap:W,customRenderingReplaces:Boolean},bl={eventDisplay:"auto",defaultRangeSeparator:" - ",titleRangeSeparator:"  ",defaultTimedEventDuration:"01:00:00",defaultAllDayEventDuration:{day:1},forceEventDuration:!1,nextDayThreshold:"00:00:00",dayHeaders:!0,initialView:"",aspectRatio:1.35,headerToolbar:{start:"title",center:"",end:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"local",editable:!1,nowIndicator:!1,scrollTime:"06:00:00",scrollTimeReset:!0,slotMinTime:"00:00:00",slotMaxTime:"24:00:00",showNonCurrentDates:!0,lazyFetching:!0,startParam:"start",endParam:"end",timeZoneParam:"timeZone",timeZone:"local",locales:[],locale:"",themeSystem:"standard",dragRevertDuration:500,dragScroll:!0,allDayMaintainDuration:!1,unselectAuto:!0,dropAccept:"*",eventOrder:"start,-duration,allDay,title",dayPopoverFormat:{month:"long",day:"numeric",year:"numeric"},handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1e3,eventDragMinDistance:5,expandRows:!1,navLinks:!1,selectable:!1,eventMinHeight:15,eventMinWidth:30,eventShortHeight:30,monthStartFormat:{month:"long",day:"numeric"},nowIndicatorSnap:"auto"},w_={datesSet:W,eventsSet:W,eventAdd:W,eventChange:W,eventRemove:W,windowResize:W,eventClick:W,eventMouseEnter:W,eventMouseLeave:W,select:W,unselect:W,loading:W,_unmount:W,_beforeprint:W,_afterprint:W,_noEventDrop:W,_noEventResize:W,_resize:W,_scrollRequest:W},x_={buttonText:W,buttonHints:W,views:W,plugins:W,initialEvents:W,events:W,eventSources:W},qs={headerToolbar:Gs,footerToolbar:Gs,buttonText:Gs,buttonHints:Gs,buttonIcons:Gs,dateIncrement:Gs,plugins:Du,events:Du,eventSources:Du,resources:Du};function Gs(t,e){return typeof t=="object"&&typeof e=="object"&&t&&e?Hr(t,e):t===e}function Du(t,e){return Array.isArray(t)&&Array.isArray(e)?bs(t,e):t===e}const WP={type:String,component:W,buttonText:String,buttonTextKey:String,dateProfileGeneratorClass:W,usesMinMaxTime:Boolean,classNames:W,content:W,didMount:W,willUnmount:W};function Cp(t){return gm(t,qs)}function pm(t,e){let n={},r={};for(let i in e)i in t&&(n[i]=e[i](t[i]));for(let i in t)i in e||(r[i]=t[i]);return{refined:n,extra:r}}function W(t){return t}const{hasOwnProperty:Sd}=Object.prototype;function gm(t,e){let n={};if(e){for(let r in e)if(e[r]===Gs){let i=[];for(let s=t.length-1;s>=0;s-=1){let a=t[s][r];if(typeof a=="object"&&a)i.unshift(a);else if(a!==void 0){n[r]=a;break}}i.length&&(n[r]=gm(i))}}for(let r=t.length-1;r>=0;r-=1){let i=t[r];for(let s in i)s in n||(n[s]=i[s])}return n}function ca(t,e){let n={};for(let r in t)e(t[r],r)&&(n[r]=t[r]);return n}function Li(t,e){let n={};for(let r in t)n[r]=e(t[r],r);return n}function pE(t){let e={};for(let n of t)e[n]=!0;return e}function mm(t){let e=[];for(let n in t)e.push(t[n]);return e}function Hr(t,e){if(t===e)return!0;for(let n in t)if(Sd.call(t,n)&&!(n in e))return!1;for(let n in e)if(Sd.call(e,n)&&t[n]!==e[n])return!1;return!0}const VP=/^on[A-Z]/;function $P(t,e){const n=qP(t,e);for(let r of n)if(!VP.test(r))return!1;return!0}function qP(t,e){let n=[];for(let r in t)Sd.call(t,r)&&(r in e||n.push(r));for(let r in e)Sd.call(e,r)&&t[r]!==e[r]&&n.push(r);return n}function Tp(t,e,n={}){if(t===e)return!0;for(let r in e)if(!(r in t&&GP(t[r],e[r],n[r])))return!1;for(let r in t)if(!(r in e))return!1;return!0}function GP(t,e,n){return t===e||n===!0?!0:n?n(t,e):!1}function YP(t,e=0,n,r=1){let i=[];n==null&&(n=Object.keys(t).length);for(let s=e;s<n;s+=r){let a=t[s];a!==void 0&&i.push(a)}return i}let gE={};function QP(t,e){gE[t]=e}function KP(t){return new gE[t]}class ZP{getMarkerYear(e){return e.getUTCFullYear()}getMarkerMonth(e){return e.getUTCMonth()}getMarkerDay(e){return e.getUTCDate()}arrayToMarker(e){return Jn(e)}markerToArray(e){return ds(e)}}QP("gregory",ZP);const XP=/^\s*(\d{4})(-?(\d{2})(-?(\d{2})([T ](\d{2}):?(\d{2})(:?(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/;function JP(t){let e=XP.exec(t);if(e){let n=new Date(Date.UTC(Number(e[1]),e[3]?Number(e[3])-1:0,Number(e[5]||1),Number(e[7]||0),Number(e[8]||0),Number(e[10]||0),e[12]?+`0.${e[12]}`*1e3:0));if(fE(n)){let r=null;return e[13]&&(r=(e[15]==="-"?-1:1)*(Number(e[16]||0)*60+Number(e[18]||0))),{marker:n,isTimeUnspecified:!e[6],timeZoneOffset:r}}}return null}class eL{constructor(e){let n=this.timeZone=e.timeZone,r=n!=="local"&&n!=="UTC";e.namedTimeZoneImpl&&r&&(this.namedTimeZoneImpl=new e.namedTimeZoneImpl(n)),this.canComputeOffset=!!(!r||this.namedTimeZoneImpl),this.calendarSystem=KP(e.calendarSystem),this.locale=e.locale,this.weekDow=e.locale.week.dow,this.weekDoy=e.locale.week.doy,e.weekNumberCalculation==="ISO"&&(this.weekDow=1,this.weekDoy=4),typeof e.firstDay=="number"&&(this.weekDow=e.firstDay),typeof e.weekNumberCalculation=="function"&&(this.weekNumberFunc=e.weekNumberCalculation),this.weekText=e.weekText!=null?e.weekText:e.locale.options.weekText,this.weekTextLong=(e.weekTextLong!=null?e.weekTextLong:e.locale.options.weekTextLong)||this.weekText,this.cmdFormatter=e.cmdFormatter,this.defaultSeparator=e.defaultSeparator}createMarker(e){let n=this.createMarkerMeta(e);return n===null?null:n.marker}createNowMarker(){return this.canComputeOffset?this.timestampToMarker(new Date().valueOf()):Jn(v_(new Date))}createMarkerMeta(e){if(typeof e=="string")return this.parse(e);let n=null;return typeof e=="number"?n=this.timestampToMarker(e):e instanceof Date?(e=e.valueOf(),isNaN(e)||(n=this.timestampToMarker(e))):Array.isArray(e)&&(n=Jn(e)),n===null||!fE(n)?null:{marker:n,isTimeUnspecified:!1,forcedTzo:null}}parse(e){let n=JP(e);if(n===null)return null;let{marker:r}=n,i=null;return n.timeZoneOffset!==null&&(this.canComputeOffset?r=this.timestampToMarker(r.valueOf()-n.timeZoneOffset*60*1e3):i=n.timeZoneOffset),{marker:r,isTimeUnspecified:n.isTimeUnspecified,forcedTzo:i}}getYear(e){return this.calendarSystem.getMarkerYear(e)}getMonth(e){return this.calendarSystem.getMarkerMonth(e)}getDay(e){return this.calendarSystem.getMarkerDay(e)}add(e,n){let r=this.calendarSystem.markerToArray(e);return r[0]+=n.years,r[1]+=n.months,r[2]+=n.days,r[6]+=n.milliseconds,this.calendarSystem.arrayToMarker(r)}subtract(e,n){let r=this.calendarSystem.markerToArray(e);return r[0]-=n.years,r[1]-=n.months,r[2]-=n.days,r[6]-=n.milliseconds,this.calendarSystem.arrayToMarker(r)}addYears(e,n){let r=this.calendarSystem.markerToArray(e);return r[0]+=n,this.calendarSystem.arrayToMarker(r)}addMonths(e,n){let r=this.calendarSystem.markerToArray(e);return r[1]+=n,this.calendarSystem.arrayToMarker(r)}diffWholeYears(e,n){let{calendarSystem:r}=this;return fs(e)===fs(n)&&r.getMarkerDay(e)===r.getMarkerDay(n)&&r.getMarkerMonth(e)===r.getMarkerMonth(n)?r.getMarkerYear(n)-r.getMarkerYear(e):null}diffWholeMonths(e,n){let{calendarSystem:r}=this;return fs(e)===fs(n)&&r.getMarkerDay(e)===r.getMarkerDay(n)?r.getMarkerMonth(n)-r.getMarkerMonth(e)+(r.getMarkerYear(n)-r.getMarkerYear(e))*12:null}greatestWholeUnit(e,n){let r=this.diffWholeYears(e,n);return r!==null?{unit:"year",value:r}:(r=this.diffWholeMonths(e,n),r!==null?{unit:"month",value:r}:(r=_P(e,n),r!==null?{unit:"week",value:r}:(r=yd(e,n),r!==null?{unit:"day",value:r}:(r=mP(e,n),Ju(r)?{unit:"hour",value:r}:(r=vP(e,n),Ju(r)?{unit:"minute",value:r}:(r=yP(e,n),Ju(r)?{unit:"second",value:r}:{unit:"millisecond",value:n.valueOf()-e.valueOf()}))))))}countDurationsBetween(e,n,r){let i;return r.years&&(i=this.diffWholeYears(e,n),i!==null)?i/fP(r):r.months&&(i=this.diffWholeMonths(e,n),i!==null)?i/hP(r):r.days&&(i=yd(e,n),i!==null)?i/eo(r):(n.valueOf()-e.valueOf())/Fr(r)}startOf(e,n){return n==="year"?this.startOfYear(e):n==="month"?this.startOfMonth(e):n==="week"?this.startOfWeek(e):n==="day"?bt(e):n==="hour"?SP(e):n==="minute"?wP(e):n==="second"?xP(e):null}startOfYear(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e)])}startOfMonth(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e)])}startOfWeek(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e),e.getUTCDate()-(e.getUTCDay()-this.weekDow+7)%7])}computeWeekNumber(e){return this.weekNumberFunc?this.weekNumberFunc(this.toDate(e)):EP(e,this.weekDow,this.weekDoy)}format(e,n,r={}){return n.format({marker:e,timeZoneOffset:r.forcedTzo!=null?r.forcedTzo:this.offsetForMarker(e)},this)}formatRange(e,n,r,i={}){return i.isEndExclusive&&(n=_s(n,-1)),r.formatRange({marker:e,timeZoneOffset:i.forcedStartTzo!=null?i.forcedStartTzo:this.offsetForMarker(e)},{marker:n,timeZoneOffset:i.forcedEndTzo!=null?i.forcedEndTzo:this.offsetForMarker(n)},this,i.defaultSeparator)}formatIso(e,n={}){let r=null;return n.omitTimeZoneOffset||(n.forcedTzo!=null?r=n.forcedTzo:r=this.offsetForMarker(e)),hE(e,r,n.omitTime)}timestampToMarker(e){return this.timeZone==="local"?Jn(v_(new Date(e))):this.timeZone==="UTC"||!this.namedTimeZoneImpl?new Date(e):Jn(this.namedTimeZoneImpl.timestampToArray(e))}offsetForMarker(e){return this.timeZone==="local"?-y_(ds(e)).getTimezoneOffset():this.timeZone==="UTC"?0:this.namedTimeZoneImpl?this.namedTimeZoneImpl.offsetForArray(ds(e)):null}toDate(e,n){return this.timeZone==="local"?y_(ds(e)):this.timeZone==="UTC"?new Date(e.valueOf()):this.namedTimeZoneImpl?new Date(e.valueOf()-this.namedTimeZoneImpl.offsetForArray(ds(e))*1e3*60):new Date(e.valueOf()-(n||0))}}class ec{constructor(e){this.iconOverrideOption&&this.setIconOverride(e[this.iconOverrideOption])}setIconOverride(e){let n,r;if(typeof e=="object"&&e){n=Object.assign({},this.iconClasses);for(r in e)n[r]=this.applyIconOverridePrefix(e[r]);this.iconClasses=n}else e===!1&&(this.iconClasses={})}applyIconOverridePrefix(e){let n=this.iconOverridePrefix;return n&&e.indexOf(n)!==0&&(e=n+e),e}getClass(e){return this.classes[e]||""}getIconClass(e,n){let r;return n&&this.rtlIconClasses?r=this.rtlIconClasses[e]||this.iconClasses[e]:r=this.iconClasses[e],r?`${this.baseIconClass} ${r}`:""}getCustomButtonIconClass(e){let n;return this.iconOverrideCustomButtonOption&&(n=e[this.iconOverrideCustomButtonOption],n)?`${this.baseIconClass} ${this.applyIconOverridePrefix(n)}`:""}}ec.prototype.classes={};ec.prototype.iconClasses={};ec.prototype.baseIconClass="";ec.prototype.iconOverridePrefix="";function wd(t){t();let e=ke.debounceRendering,n=[];function r(i){n.push(i)}for(ke.debounceRendering=r,Nl(I(tL,{}),document.createElement("div"));n.length;)n.shift()();ke.debounceRendering=e}class tL extends lr{render(){return I("div",{})}componentDidMount(){this.setState({})}}function mE(t){let e=CI(t),n=e.Provider;return e.Provider=function(){let r=!this.getChildContext,i=n.apply(this,arguments);if(r){let s=[];this.shouldComponentUpdate=a=>{this.props.value!==a.value&&s.forEach(c=>{c.context=a.value,c.forceUpdate()})},this.sub=a=>{s.push(a);let c=a.componentWillUnmount;a.componentWillUnmount=()=>{s.splice(s.indexOf(a),1),c&&c.call(a)}}}return i},e}class nL{constructor(e,n,r,i){this.execFunc=e,this.emitter=n,this.scrollTime=r,this.scrollTimeReset=i,this.handleScrollRequest=s=>{this.queuedRequest=Object.assign({},this.queuedRequest||{},s),this.drain()},n.on("_scrollRequest",this.handleScrollRequest),this.fireInitialScroll()}detach(){this.emitter.off("_scrollRequest",this.handleScrollRequest)}update(e){e&&this.scrollTimeReset?this.fireInitialScroll():this.drain()}fireInitialScroll(){this.handleScrollRequest({time:this.scrollTime})}drain(){this.queuedRequest&&this.execFunc(this.queuedRequest)&&(this.queuedRequest=null)}}const zi=mE({});function rL(t,e,n,r,i,s,a,c,u,d,f,p,m,v){return{dateEnv:i,nowManager:s,options:n,pluginHooks:c,emitter:f,dispatch:u,getCurrentData:d,calendarApi:p,viewSpec:t,viewApi:e,dateProfileGenerator:r,theme:a,isRtl:n.direction==="rtl",addResizeHandler(b){f.on("_resize",b)},removeResizeHandler(b){f.off("_resize",b)},createScrollResponder(b){return new nL(b,f,Ye(n.scrollTime),n.scrollTimeReset)},registerInteractiveComponent:m,unregisterInteractiveComponent:v}}class va extends lr{shouldComponentUpdate(e,n){return!Tp(this.props,e,this.propEquality)||!Tp(this.state,n,this.stateEquality)}safeSetState(e){Tp(this.state,Object.assign(Object.assign({},this.state),e),this.stateEquality)||this.setState(e)}}va.addPropsEquality=iL;va.addStateEquality=sL;va.contextType=zi;va.prototype.propEquality={};va.prototype.stateEquality={};class at extends va{}at.contextType=zi;function iL(t){let e=Object.create(this.prototype.propEquality);Object.assign(e,t),this.prototype.propEquality=e}function sL(t){let e=Object.create(this.prototype.stateEquality);Object.assign(e,t),this.prototype.stateEquality=e}function ai(t,e){typeof t=="function"?t(e):t&&(t.current=e)}class vm extends at{constructor(){super(...arguments),this.id=ma(),this.queuedDomNodes=[],this.currentDomNodes=[],this.handleEl=e=>{const{options:n}=this.context,{generatorName:r}=this.props;(!n.customRenderingReplaces||!bg(r,n))&&this.updateElRef(e)},this.updateElRef=e=>{this.props.elRef&&ai(this.props.elRef,e)}}render(){const{props:e,context:n}=this,{options:r}=n,{customGenerator:i,defaultGenerator:s,renderProps:a}=e,c=vE(e,[],this.handleEl);let u=!1,d,f=[],p;if(i!=null){const m=typeof i=="function"?i(a,I):i;if(m===!0)u=!0;else{const v=m&&typeof m=="object";v&&"html"in m?c.dangerouslySetInnerHTML={__html:m.html}:v&&"domNodes"in m?f=Array.prototype.slice.call(m.domNodes):(v?Ux(m):typeof m!="function")?d=m:p=m}}else u=!bg(e.generatorName,r);return u&&s&&(d=s(a)),this.queuedDomNodes=f,this.currentGeneratorMeta=p,I(e.elTag,c,d)}componentDidMount(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentDidUpdate(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentWillUnmount(){this.triggerCustomRendering(!1)}triggerCustomRendering(e){var n;const{props:r,context:i}=this,{handleCustomRendering:s,customRenderingMetaMap:a}=i.options;if(s){const c=(n=this.currentGeneratorMeta)!==null&&n!==void 0?n:a?.[r.generatorName];c&&s(Object.assign(Object.assign({id:this.id,isActive:e,containerEl:this.base,reportNewContainerEl:this.updateElRef,generatorMeta:c},r),{elClasses:(r.elClasses||[]).filter(aL)}))}}applyQueueudDomNodes(){const{queuedDomNodes:e,currentDomNodes:n}=this,r=this.base;if(!bs(e,n)){n.forEach(cm);for(let i of e)r.appendChild(i);this.currentDomNodes=e}}}vm.addPropsEquality({elClasses:bs,elStyle:Hr,elAttrs:$P,renderProps:Hr});function bg(t,e){var n;return!!(e.handleCustomRendering&&t&&(!((n=e.customRenderingMetaMap)===null||n===void 0)&&n[t]))}function vE(t,e,n){const r=Object.assign(Object.assign({},t.elAttrs),{ref:n});return(t.elClasses||e)&&(r.className=(t.elClasses||[]).concat(e||[]).concat(r.className||[]).filter(Boolean).join(" ")),t.elStyle&&(r.style=t.elStyle),r}function aL(t){return!!t}const yE=mE(0);class An extends lr{constructor(){super(...arguments),this.InnerContent=oL.bind(void 0,this),this.handleEl=e=>{this.el=e,this.props.elRef&&(ai(this.props.elRef,e),e&&this.didMountMisfire&&this.componentDidMount())}}render(){const{props:e}=this,n=lL(e.classNameGenerator,e.renderProps);if(e.children){const r=vE(e,n,this.handleEl),i=e.children(this.InnerContent,e.renderProps,r);return e.elTag?I(e.elTag,r,i):i}else return I(vm,Object.assign(Object.assign({},e),{elRef:this.handleEl,elTag:e.elTag||"div",elClasses:(e.elClasses||[]).concat(n),renderId:this.context}))}componentDidMount(){var e,n;this.el?(n=(e=this.props).didMount)===null||n===void 0||n.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el})):this.didMountMisfire=!0}componentWillUnmount(){var e,n;(n=(e=this.props).willUnmount)===null||n===void 0||n.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el}))}}An.contextType=yE;function oL(t,e){const n=t.props;return I(vm,Object.assign({renderProps:n.renderProps,generatorName:n.generatorName,customGenerator:n.customGenerator,defaultGenerator:n.defaultGenerator,renderId:t.context},e))}function lL(t,e){const n=typeof t=="function"?t(e):t||[];return typeof n=="string"?[n]:n}class Il extends at{render(){let{props:e,context:n}=this,{options:r}=n,i={view:n.viewApi};return I(An,{elRef:e.elRef,elTag:e.elTag||"div",elAttrs:e.elAttrs,elClasses:[...bE(e.viewSpec),...e.elClasses||[]],elStyle:e.elStyle,renderProps:i,classNameGenerator:r.viewClassNames,generatorName:void 0,didMount:r.viewDidMount,willUnmount:r.viewWillUnmount},()=>e.children)}}function bE(t){return[`fc-${t.type}-view`,"fc-view"]}function cL(t,e){let n=null,r=null;return t.start&&(n=e.createMarker(t.start)),t.end&&(r=e.createMarker(t.end)),!n&&!r||n&&r&&r<n?null:{start:n,end:r}}function E_(t,e){let n=[],{start:r}=e,i,s;for(t.sort(uL),i=0;i<t.length;i+=1)s=t[i],s.start>r&&n.push({start:r,end:s.start}),s.end>r&&(r=s.end);return r<e.end&&n.push({start:r,end:e.end}),n}function uL(t,e){return t.start.valueOf()-e.start.valueOf()}function Ss(t,e){let{start:n,end:r}=t,i=null;return e.start!==null&&(n===null?n=e.start:n=new Date(Math.max(n.valueOf(),e.start.valueOf()))),e.end!=null&&(r===null?r=e.end:r=new Date(Math.min(r.valueOf(),e.end.valueOf()))),(n===null||r===null||n<r)&&(i={start:n,end:r}),i}function dL(t,e){return(t.start===null?null:t.start.valueOf())===(e.start===null?null:e.start.valueOf())&&(t.end===null?null:t.end.valueOf())===(e.end===null?null:e.end.valueOf())}function ym(t,e){return(t.end===null||e.start===null||t.end>e.start)&&(t.start===null||e.end===null||t.start<e.end)}function sf(t,e){return(t.start===null||e.start!==null&&e.start>=t.start)&&(t.end===null||e.end!==null&&e.end<=t.end)}function Ni(t,e){return(t.start===null||e>=t.start)&&(t.end===null||e<t.end)}function fL(t,e){return e.start!=null&&t<e.start?e.start:e.end!=null&&t>=e.end?new Date(e.end.valueOf()-1):t}function _E(t){let e=Math.floor(Cs(t.start,t.end))||1,n=bt(t.start),r=Kt(n,e);return{start:n,end:r}}function bm(t,e=Ye(0)){let n=null,r=null;if(t.end){r=bt(t.end);let i=t.end.valueOf()-r.valueOf();i&&i>=Fr(e)&&(r=Kt(r,1))}return t.start&&(n=bt(t.start),r&&r<=n&&(r=Kt(n,1))),{start:n,end:r}}function hL(t){let e=bm(t);return Cs(e.start,e.end)>1}function Za(t,e,n,r){return r==="year"?Ye(n.diffWholeYears(t,e),"year"):r==="month"?Ye(n.diffWholeMonths(t,e),"month"):bP(t,e)}class SE{constructor(e){this.props=e,this.initHiddenDays()}buildPrev(e,n,r){let{dateEnv:i}=this.props,s=i.subtract(i.startOf(n,e.currentRangeUnit),e.dateIncrement);return this.build(s,-1,r)}buildNext(e,n,r){let{dateEnv:i}=this.props,s=i.add(i.startOf(n,e.currentRangeUnit),e.dateIncrement);return this.build(s,1,r)}build(e,n,r=!0){let{props:i}=this,s,a,c,u,d,f;return s=this.buildValidRange(),s=this.trimHiddenDays(s),r&&(e=fL(e,s)),a=this.buildCurrentRangeInfo(e,n),c=/^(year|month|week|day)$/.test(a.unit),u=this.buildRenderRange(this.trimHiddenDays(a.range),a.unit,c),u=this.trimHiddenDays(u),d=u,i.showNonCurrentDates||(d=Ss(d,a.range)),d=this.adjustActiveRange(d),d=Ss(d,s),f=ym(a.range,s),Ni(u,e)||(e=u.start),{currentDate:e,validRange:s,currentRange:a.range,currentRangeUnit:a.unit,isRangeAllDay:c,activeRange:d,renderRange:u,slotMinTime:i.slotMinTime,slotMaxTime:i.slotMaxTime,isValid:f,dateIncrement:this.buildDateIncrement(a.duration)}}buildValidRange(){let e=this.props.validRangeInput,n=typeof e=="function"?e.call(this.props.calendarApi,this.props.dateEnv.toDate(this.props.nowManager.getDateMarker())):e;return this.refineRange(n)||{start:null,end:null}}buildCurrentRangeInfo(e,n){let{props:r}=this,i=null,s=null,a=null,c;return r.duration?(i=r.duration,s=r.durationUnit,a=this.buildRangeFromDuration(e,n,i,s)):(c=this.props.dayCount)?(s="day",a=this.buildRangeFromDayCount(e,n,c)):(a=this.buildCustomVisibleRange(e))?s=r.dateEnv.greatestWholeUnit(a.start,a.end).unit:(i=this.getFallbackDuration(),s=yg(i).unit,a=this.buildRangeFromDuration(e,n,i,s)),{duration:i,unit:s,range:a}}getFallbackDuration(){return Ye({day:1})}adjustActiveRange(e){let{dateEnv:n,usesMinMaxTime:r,slotMinTime:i,slotMaxTime:s}=this.props,{start:a,end:c}=e;return r&&(eo(i)<0&&(a=bt(a),a=n.add(a,i)),eo(s)>1&&(c=bt(c),c=Kt(c,-1),c=n.add(c,s))),{start:a,end:c}}buildRangeFromDuration(e,n,r,i){let{dateEnv:s,dateAlignment:a}=this.props,c,u,d;if(!a){let{dateIncrement:p}=this.props;p&&Fr(p)<Fr(r)?a=yg(p).unit:a=i}eo(r)<=1&&this.isHiddenDay(c)&&(c=this.skipHiddenDays(c,n),c=bt(c));function f(){c=s.startOf(e,a),u=s.add(c,r),d={start:c,end:u}}return f(),this.trimHiddenDays(d)||(e=this.skipHiddenDays(e,n),f()),d}buildRangeFromDayCount(e,n,r){let{dateEnv:i,dateAlignment:s}=this.props,a=0,c=e,u;s&&(c=i.startOf(c,s)),c=bt(c),c=this.skipHiddenDays(c,n),u=c;do u=Kt(u,1),this.isHiddenDay(u)||(a+=1);while(a<r);return{start:c,end:u}}buildCustomVisibleRange(e){let{props:n}=this,r=n.visibleRangeInput,i=typeof r=="function"?r.call(n.calendarApi,n.dateEnv.toDate(e)):r,s=this.refineRange(i);return s&&(s.start==null||s.end==null)?null:s}buildRenderRange(e,n,r){return e}buildDateIncrement(e){let{dateIncrement:n}=this.props,r;return n||((r=this.props.dateAlignment)?Ye(1,r):e||Ye({days:1}))}refineRange(e){if(e){let n=cL(e,this.props.dateEnv);return n&&(n=bm(n)),n}return null}initHiddenDays(){let e=this.props.hiddenDays||[],n=[],r=0,i;for(this.props.weekends===!1&&e.push(0,6),i=0;i<7;i+=1)(n[i]=e.indexOf(i)!==-1)||(r+=1);if(!r)throw new Error("invalid hiddenDays");this.isHiddenDayHash=n}trimHiddenDays(e){let{start:n,end:r}=e;return n&&(n=this.skipHiddenDays(n)),r&&(r=this.skipHiddenDays(r,-1,!0)),n==null||r==null||n<r?{start:n,end:r}:null}isHiddenDay(e){return e instanceof Date&&(e=e.getUTCDay()),this.isHiddenDayHash[e]}skipHiddenDays(e,n=1,r=!1){for(;this.isHiddenDayHash[(e.getUTCDay()+(r?n:0)+7)%7];)e=Kt(e,n);return e}}function _m(t,e,n,r){return{instanceId:ma(),defId:t,range:e,forcedStartTzo:n??null,forcedEndTzo:r??null}}function pL(t,e,n,r){for(let i=0;i<r.length;i+=1){let s=r[i].parse(t,n);if(s){let{allDay:a}=t;return a==null&&(a=e,a==null&&(a=s.allDayGuess,a==null&&(a=!1))),{allDay:a,duration:s.duration,typeData:s.typeData,typeId:i}}}return null}function ua(t,e,n){let{dateEnv:r,pluginHooks:i,options:s}=n,{defs:a,instances:c}=t;c=ca(c,u=>!a[u.defId].recurringDef);for(let u in a){let d=a[u];if(d.recurringDef){let{duration:f}=d.recurringDef;f||(f=d.allDay?s.defaultAllDayEventDuration:s.defaultTimedEventDuration);let p=gL(d,f,e,r,i.recurringTypes);for(let m of p){let v=_m(u,{start:m,end:r.add(m,f)});c[v.instanceId]=v}}}return{defs:a,instances:c}}function gL(t,e,n,r,i){let a=i[t.recurringDef.typeId].expand(t.recurringDef.typeData,{start:r.subtract(n.start,e),end:n.end},r);return t.allDay&&(a=a.map(bt)),a}const td={id:String,groupId:String,title:String,url:String,interactive:Boolean},wE={start:W,end:W,date:W,allDay:Boolean},mL=Object.assign(Object.assign(Object.assign({},td),wE),{extendedProps:W});function xE(t,e,n,r,i=Sm(n),s,a){let{refined:c,extra:u}=EE(t,n,i),d=yL(e,n),f=pL(c,d,n.dateEnv,n.pluginHooks.recurringTypes);if(f){let m=_g(c,u,e?e.sourceId:"",f.allDay,!!f.duration,n,s);return m.recurringDef={typeId:f.typeId,typeData:f.typeData,duration:f.duration},{def:m,instance:null}}let p=vL(c,d,n,r);if(p){let m=_g(c,u,e?e.sourceId:"",p.allDay,p.hasEnd,n,s),v=_m(m.defId,p.range,p.forcedStartTzo,p.forcedEndTzo);return a&&m.publicId&&a[m.publicId]&&(v.instanceId=a[m.publicId]),{def:m,instance:v}}return null}function EE(t,e,n=Sm(e)){return pm(t,n)}function Sm(t){return Object.assign(Object.assign(Object.assign({},xd),mL),t.pluginHooks.eventRefiners)}function _g(t,e,n,r,i,s,a){let c={title:t.title||"",groupId:t.groupId||"",publicId:t.id||"",url:t.url||"",recurringDef:null,defId:(a&&t.id?a[t.id]:"")||ma(),sourceId:n,allDay:r,hasEnd:i,interactive:t.interactive,ui:Ed(t,s),extendedProps:Object.assign(Object.assign({},t.extendedProps||{}),e)};for(let u of s.pluginHooks.eventDefMemberAdders)Object.assign(c,u(t));return Object.freeze(c.ui.classNames),Object.freeze(c.extendedProps),c}function vL(t,e,n,r){let{allDay:i}=t,s,a=null,c=!1,u,d=null,f=t.start!=null?t.start:t.date;if(s=n.dateEnv.createMarkerMeta(f),s)a=s.marker;else if(!r)return null;return t.end!=null&&(u=n.dateEnv.createMarkerMeta(t.end)),i==null&&(e!=null?i=e:i=(!s||s.isTimeUnspecified)&&(!u||u.isTimeUnspecified)),i&&a&&(a=bt(a)),u&&(d=u.marker,i&&(d=bt(d)),a&&d<=a&&(d=null)),d?c=!0:r||(c=n.options.forceEventDuration||!1,d=n.dateEnv.add(a,i?n.options.defaultAllDayEventDuration:n.options.defaultTimedEventDuration)),{allDay:i,hasEnd:c,range:{start:a,end:d},forcedStartTzo:s?s.forcedTzo:null,forcedEndTzo:u?u.forcedTzo:null}}function yL(t,e){let n=null;return t&&(n=t.defaultAllDay),n==null&&(n=e.options.defaultAllDay),n}function Pl(t,e,n,r,i,s){let a=cr(),c=Sm(n);for(let u of t){let d=xE(u,e,n,r,c,i,s);d&&Sg(d,a)}return a}function Sg(t,e=cr()){return e.defs[t.def.defId]=t.def,t.instance&&(e.instances[t.instance.instanceId]=t.instance),e}function wm(t,e){let n=t.instances[e];if(n){let r=t.defs[n.defId],i=af(t,s=>bL(r,s));return i.defs[r.defId]=r,i.instances[n.instanceId]=n,i}return cr()}function bL(t,e){return!!(t.groupId&&t.groupId===e.groupId)}function cr(){return{defs:{},instances:{}}}function xm(t,e){return{defs:Object.assign(Object.assign({},t.defs),e.defs),instances:Object.assign(Object.assign({},t.instances),e.instances)}}function af(t,e){let n=ca(t.defs,e),r=ca(t.instances,i=>n[i.defId]);return{defs:n,instances:r}}function _L(t,e){let{defs:n,instances:r}=t,i={},s={};for(let a in n)e.defs[a]||(i[a]=n[a]);for(let a in r)!e.instances[a]&&i[r[a].defId]&&(s[a]=r[a]);return{defs:i,instances:s}}function SL(t,e){return Array.isArray(t)?Pl(t,null,e,!0):typeof t=="object"&&t?Pl([t],null,e,!0):t!=null?String(t):null}function C_(t){return Array.isArray(t)?t:typeof t=="string"?t.split(/\s+/):[]}const xd={display:String,editable:Boolean,startEditable:Boolean,durationEditable:Boolean,constraint:W,overlap:W,allow:W,className:C_,classNames:C_,color:String,backgroundColor:String,borderColor:String,textColor:String},wL={display:null,startEditable:null,durationEditable:null,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]};function Ed(t,e){let n=SL(t.constraint,e);return{display:t.display||null,startEditable:t.startEditable!=null?t.startEditable:t.editable,durationEditable:t.durationEditable!=null?t.durationEditable:t.editable,constraints:n!=null?[n]:[],overlap:t.overlap!=null?t.overlap:null,allows:t.allow!=null?[t.allow]:[],backgroundColor:t.backgroundColor||t.color||"",borderColor:t.borderColor||t.color||"",textColor:t.textColor||"",classNames:(t.className||[]).concat(t.classNames||[])}}function CE(t){return t.reduce(xL,wL)}function xL(t,e){return{display:e.display!=null?e.display:t.display,startEditable:e.startEditable!=null?e.startEditable:t.startEditable,durationEditable:e.durationEditable!=null?e.durationEditable:t.durationEditable,constraints:t.constraints.concat(e.constraints),overlap:typeof e.overlap=="boolean"?e.overlap:t.overlap,allows:t.allows.concat(e.allows),backgroundColor:e.backgroundColor||t.backgroundColor,borderColor:e.borderColor||t.borderColor,textColor:e.textColor||t.textColor,classNames:t.classNames.concat(e.classNames)}}const EL={id:String,defaultAllDay:Boolean,url:String,format:String,events:W,eventDataTransform:W,success:W,failure:W};function TE(t,e,n=DE(e)){let r;if(typeof t=="string"?r={url:t}:typeof t=="function"||Array.isArray(t)?r={events:t}:typeof t=="object"&&t&&(r=t),r){let{refined:i,extra:s}=pm(r,n),a=CL(i,e);if(a)return{_raw:t,isFetching:!1,latestFetchId:"",fetchRange:null,defaultAllDay:i.defaultAllDay,eventDataTransform:i.eventDataTransform,success:i.success,failure:i.failure,publicId:i.id||"",sourceId:ma(),sourceDefId:a.sourceDefId,meta:a.meta,ui:Ed(i,e),extendedProps:s}}return null}function DE(t){return Object.assign(Object.assign(Object.assign({},xd),EL),t.pluginHooks.eventSourceRefiners)}function CL(t,e){let n=e.pluginHooks.eventSourceDefs;for(let r=n.length-1;r>=0;r-=1){let s=n[r].parseMeta(t);if(s)return{sourceDefId:r,meta:s}}return null}function TL(t,e,n,r,i){switch(e.type){case"RECEIVE_EVENTS":return DL(t,n[e.sourceId],e.fetchId,e.fetchRange,e.rawEvents,i);case"RESET_RAW_EVENTS":return kL(t,n[e.sourceId],e.rawEvents,r.activeRange,i);case"ADD_EVENTS":return AL(t,e.eventStore,r?r.activeRange:null,i);case"RESET_EVENTS":return e.eventStore;case"MERGE_EVENTS":return xm(t,e.eventStore);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return r?ua(t,r.activeRange,i):t;case"REMOVE_EVENTS":return _L(t,e.eventStore);case"REMOVE_EVENT_SOURCE":return AE(t,e.sourceId);case"REMOVE_ALL_EVENT_SOURCES":return af(t,s=>!s.sourceId);case"REMOVE_ALL_EVENTS":return cr();default:return t}}function DL(t,e,n,r,i,s){if(e&&n===e.latestFetchId){let a=Pl(kE(i,e,s),e,s);return r&&(a=ua(a,r,s)),xm(AE(t,e.sourceId),a)}return t}function kL(t,e,n,r,i){const{defIdMap:s,instanceIdMap:a}=OL(t);let c=Pl(kE(n,e,i),e,i,!1,s,a);return ua(c,r,i)}function kE(t,e,n){let r=n.options.eventDataTransform,i=e?e.eventDataTransform:null;return i&&(t=T_(t,i)),r&&(t=T_(t,r)),t}function T_(t,e){let n;if(!e)n=t;else{n=[];for(let r of t){let i=e(r);i?n.push(i):i==null&&n.push(r)}}return n}function AL(t,e,n,r){return n&&(e=ua(e,n,r)),xm(t,e)}function D_(t,e,n){let{defs:r}=t,i=Li(t.instances,s=>r[s.defId].allDay?s:Object.assign(Object.assign({},s),{range:{start:n.createMarker(e.toDate(s.range.start,s.forcedStartTzo)),end:n.createMarker(e.toDate(s.range.end,s.forcedEndTzo))},forcedStartTzo:n.canComputeOffset?null:s.forcedStartTzo,forcedEndTzo:n.canComputeOffset?null:s.forcedEndTzo}));return{defs:r,instances:i}}function AE(t,e){return af(t,n=>n.sourceId!==e)}function RL(t,e){return{defs:t.defs,instances:ca(t.instances,n=>!e[n.instanceId])}}function OL(t){const{defs:e,instances:n}=t,r={},i={};for(let s in e){const a=e[s],{publicId:c}=a;c&&(r[c]=s)}for(let s in n){const a=n[s],c=e[a.defId],{publicId:u}=c;u&&(i[u]=s)}return{defIdMap:r,instanceIdMap:i}}class of{constructor(){this.handlers={},this.thisContext=null}setThisContext(e){this.thisContext=e}setOptions(e){this.options=e}on(e,n){ML(this.handlers,e,n)}off(e,n){NL(this.handlers,e,n)}trigger(e,...n){let r=this.handlers[e]||[],i=this.options&&this.options[e],s=[].concat(i||[],r);for(let a of s)a.apply(this.thisContext,n)}hasHandlers(e){return!!(this.handlers[e]&&this.handlers[e].length||this.options&&this.options[e])}}function ML(t,e,n){(t[e]||(t[e]=[])).push(n)}function NL(t,e,n){n?t[e]&&(t[e]=t[e].filter(r=>r!==n)):delete t[e]}const IL={startTime:"09:00",endTime:"17:00",daysOfWeek:[1,2,3,4,5],display:"inverse-background",classNames:"fc-non-business",groupId:"_businessHours"};function PL(t,e){return Pl(LL(t),null,e)}function LL(t){let e;return t===!0?e=[{}]:Array.isArray(t)?e=t.filter(n=>n.daysOfWeek):typeof t=="object"&&t?e=[t]:e=[],e=e.map(n=>Object.assign(Object.assign({},IL),n)),e}function RE(t,e,n){n.emitter.trigger("select",Object.assign(Object.assign({},Em(t,n)),{jsEvent:e?e.origEvent:null,view:n.viewApi||n.calendarApi.view}))}function FL(t,e){e.emitter.trigger("unselect",{jsEvent:t?t.origEvent:null,view:e.viewApi||e.calendarApi.view})}function Em(t,e){let n={};for(let r of e.pluginHooks.dateSpanTransforms)Object.assign(n,r(t,e));return Object.assign(n,ZL(t,e.dateEnv)),n}function k_(t,e,n){let{dateEnv:r,options:i}=n,s=e;return t?(s=bt(s),s=r.add(s,i.defaultAllDayEventDuration)):s=r.add(s,i.defaultTimedEventDuration),s}function Cm(t,e,n,r){let i=Cd(t.defs,e),s=cr();for(let a in t.defs){let c=t.defs[a];s.defs[a]=jL(c,i[a],n,r)}for(let a in t.instances){let c=t.instances[a],u=s.defs[c.defId];s.instances[a]=HL(c,u,i[c.defId],n,r)}return s}function jL(t,e,n,r){let i=n.standardProps||{};i.hasEnd==null&&e.durationEditable&&(n.startDelta||n.endDelta)&&(i.hasEnd=!0);let s=Object.assign(Object.assign(Object.assign({},t),i),{ui:Object.assign(Object.assign({},t.ui),i.ui)});n.extendedProps&&(s.extendedProps=Object.assign(Object.assign({},s.extendedProps),n.extendedProps));for(let a of r.pluginHooks.eventDefMutationAppliers)a(s,n,r);return!s.hasEnd&&r.options.forceEventDuration&&(s.hasEnd=!0),s}function HL(t,e,n,r,i){let{dateEnv:s}=i,a=r.standardProps&&r.standardProps.allDay===!0,c=r.standardProps&&r.standardProps.hasEnd===!1,u=Object.assign({},t);return a&&(u.range=_E(u.range)),r.datesDelta&&n.startEditable&&(u.range={start:s.add(u.range.start,r.datesDelta),end:s.add(u.range.end,r.datesDelta)}),r.startDelta&&n.durationEditable&&(u.range={start:s.add(u.range.start,r.startDelta),end:u.range.end}),r.endDelta&&n.durationEditable&&(u.range={start:u.range.start,end:s.add(u.range.end,r.endDelta)}),c&&(u.range={start:u.range.start,end:k_(e.allDay,u.range.start,i)}),e.allDay&&(u.range={start:bt(u.range.start),end:bt(u.range.end)}),u.range.end<u.range.start&&(u.range.end=k_(e.allDay,u.range.start,i)),u}class Ya{constructor(e,n){this.context=e,this.internalEventSource=n}remove(){this.context.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:this.internalEventSource.sourceId})}refetch(){this.context.dispatch({type:"FETCH_EVENT_SOURCES",sourceIds:[this.internalEventSource.sourceId],isRefetch:!0})}get id(){return this.internalEventSource.publicId}get url(){return this.internalEventSource.meta.url}get format(){return this.internalEventSource.meta.format}}class At{constructor(e,n,r){this._context=e,this._def=n,this._instance=r||null}setProp(e,n){if(e in wE)console.warn("Could not set date-related prop 'name'. Use one of the date-related methods instead.");else if(e==="id")n=td[e](n),this.mutate({standardProps:{publicId:n}});else if(e in td)n=td[e](n),this.mutate({standardProps:{[e]:n}});else if(e in xd){let r=xd[e](n);e==="color"?r={backgroundColor:n,borderColor:n}:e==="editable"?r={startEditable:n,durationEditable:n}:r={[e]:n},this.mutate({standardProps:{ui:r}})}else console.warn(`Could not set prop '${e}'. Use setExtendedProp instead.`)}setExtendedProp(e,n){this.mutate({extendedProps:{[e]:n}})}setStart(e,n={}){let{dateEnv:r}=this._context,i=r.createMarker(e);if(i&&this._instance){let s=this._instance.range,a=Za(s.start,i,r,n.granularity);n.maintainDuration?this.mutate({datesDelta:a}):this.mutate({startDelta:a})}}setEnd(e,n={}){let{dateEnv:r}=this._context,i;if(!(e!=null&&(i=r.createMarker(e),!i))&&this._instance)if(i){let s=Za(this._instance.range.end,i,r,n.granularity);this.mutate({endDelta:s})}else this.mutate({standardProps:{hasEnd:!1}})}setDates(e,n,r={}){let{dateEnv:i}=this._context,s={allDay:r.allDay},a=i.createMarker(e),c;if(a&&!(n!=null&&(c=i.createMarker(n),!c))&&this._instance){let u=this._instance.range;r.allDay===!0&&(u=_E(u));let d=Za(u.start,a,i,r.granularity);if(c){let f=Za(u.end,c,i,r.granularity);cP(d,f)?this.mutate({datesDelta:d,standardProps:s}):this.mutate({startDelta:d,endDelta:f,standardProps:s})}else s.hasEnd=!1,this.mutate({datesDelta:d,standardProps:s})}}moveStart(e){let n=Ye(e);n&&this.mutate({startDelta:n})}moveEnd(e){let n=Ye(e);n&&this.mutate({endDelta:n})}moveDates(e){let n=Ye(e);n&&this.mutate({datesDelta:n})}setAllDay(e,n={}){let r={allDay:e},{maintainDuration:i}=n;i==null&&(i=this._context.options.allDayMaintainDuration),this._def.allDay!==e&&(r.hasEnd=i),this.mutate({standardProps:r})}formatRange(e){let{dateEnv:n}=this._context,r=this._instance,i=Dt(e);return this._def.hasEnd?n.formatRange(r.range.start,r.range.end,i,{forcedStartTzo:r.forcedStartTzo,forcedEndTzo:r.forcedEndTzo}):n.format(r.range.start,i,{forcedTzo:r.forcedStartTzo})}mutate(e){let n=this._instance;if(n){let r=this._def,i=this._context,{eventStore:s}=i.getCurrentData(),a=wm(s,n.instanceId);a=Cm(a,{"":{display:"",startEditable:!0,durationEditable:!0,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]}},e,i);let u=new At(i,r,n);this._def=a.defs[r.defId],this._instance=a.instances[n.instanceId],i.dispatch({type:"MERGE_EVENTS",eventStore:a}),i.emitter.trigger("eventChange",{oldEvent:u,event:this,relatedEvents:ra(a,i,n),revert(){i.dispatch({type:"RESET_EVENTS",eventStore:s})}})}}remove(){let e=this._context,n=OE(this);e.dispatch({type:"REMOVE_EVENTS",eventStore:n}),e.emitter.trigger("eventRemove",{event:this,relatedEvents:[],revert(){e.dispatch({type:"MERGE_EVENTS",eventStore:n})}})}get source(){let{sourceId:e}=this._def;return e?new Ya(this._context,this._context.getCurrentData().eventSources[e]):null}get start(){return this._instance?this._context.dateEnv.toDate(this._instance.range.start):null}get end(){return this._instance&&this._def.hasEnd?this._context.dateEnv.toDate(this._instance.range.end):null}get startStr(){let e=this._instance;return e?this._context.dateEnv.formatIso(e.range.start,{omitTime:this._def.allDay,forcedTzo:e.forcedStartTzo}):""}get endStr(){let e=this._instance;return e&&this._def.hasEnd?this._context.dateEnv.formatIso(e.range.end,{omitTime:this._def.allDay,forcedTzo:e.forcedEndTzo}):""}get id(){return this._def.publicId}get groupId(){return this._def.groupId}get allDay(){return this._def.allDay}get title(){return this._def.title}get url(){return this._def.url}get display(){return this._def.ui.display||"auto"}get startEditable(){return this._def.ui.startEditable}get durationEditable(){return this._def.ui.durationEditable}get constraint(){return this._def.ui.constraints[0]||null}get overlap(){return this._def.ui.overlap}get allow(){return this._def.ui.allows[0]||null}get backgroundColor(){return this._def.ui.backgroundColor}get borderColor(){return this._def.ui.borderColor}get textColor(){return this._def.ui.textColor}get classNames(){return this._def.ui.classNames}get extendedProps(){return this._def.extendedProps}toPlainObject(e={}){let n=this._def,{ui:r}=n,{startStr:i,endStr:s}=this,a={allDay:n.allDay};return n.title&&(a.title=n.title),i&&(a.start=i),s&&(a.end=s),n.publicId&&(a.id=n.publicId),n.groupId&&(a.groupId=n.groupId),n.url&&(a.url=n.url),r.display&&r.display!=="auto"&&(a.display=r.display),e.collapseColor&&r.backgroundColor&&r.backgroundColor===r.borderColor?a.color=r.backgroundColor:(r.backgroundColor&&(a.backgroundColor=r.backgroundColor),r.borderColor&&(a.borderColor=r.borderColor)),r.textColor&&(a.textColor=r.textColor),r.classNames.length&&(a.classNames=r.classNames),Object.keys(n.extendedProps).length&&(e.collapseExtendedProps?Object.assign(a,n.extendedProps):a.extendedProps=n.extendedProps),a}toJSON(){return this.toPlainObject()}}function OE(t){let e=t._def,n=t._instance;return{defs:{[e.defId]:e},instances:n?{[n.instanceId]:n}:{}}}function ra(t,e,n){let{defs:r,instances:i}=t,s=[],a=n?n.instanceId:"";for(let c in i){let u=i[c],d=r[u.defId];u.instanceId!==a&&s.push(new At(e,d,u))}return s}function wg(t,e,n,r){let i={},s={},a={},c=[],u=[],d=Cd(t.defs,e);for(let f in t.defs){let p=t.defs[f];d[p.defId].display==="inverse-background"&&(p.groupId?(i[p.groupId]=[],a[p.groupId]||(a[p.groupId]=p)):s[f]=[])}for(let f in t.instances){let p=t.instances[f],m=t.defs[p.defId],v=d[m.defId],b=p.range,_=!m.allDay&&r?bm(b,r):b,w=Ss(_,n);w&&(v.display==="inverse-background"?m.groupId?i[m.groupId].push(w):s[p.defId].push(w):v.display!=="none"&&(v.display==="background"?c:u).push({def:m,ui:v,instance:p,range:w,isStart:_.start&&_.start.valueOf()===w.start.valueOf(),isEnd:_.end&&_.end.valueOf()===w.end.valueOf()}))}for(let f in i){let p=i[f],m=E_(p,n);for(let v of m){let b=a[f],_=d[b.defId];c.push({def:b,ui:_,instance:null,range:v,isStart:!1,isEnd:!1})}}for(let f in s){let p=s[f],m=E_(p,n);for(let v of m)c.push({def:t.defs[f],ui:d[f],instance:null,range:v,isStart:!1,isEnd:!1})}return{bg:c,fg:u}}function zL(t){return t.ui.display==="background"||t.ui.display==="inverse-background"}function A_(t,e){t.fcSeg=e}function so(t){return t.fcSeg||t.parentNode.fcSeg||null}function Cd(t,e){return Li(t,n=>ME(n,e))}function ME(t,e){let n=[];return e[""]&&n.push(e[""]),e[t.defId]&&n.push(e[t.defId]),n.push(t.ui),CE(n)}function Tm(t,e){let n=t.map(UL);return n.sort((r,i)=>nP(r,i,e)),n.map(r=>r._seg)}function UL(t){let{eventRange:e}=t,n=e.def,r=e.instance?e.instance.range:e.range,i=r.start?r.start.valueOf():0,s=r.end?r.end.valueOf():0;return Object.assign(Object.assign(Object.assign({},n.extendedProps),n),{id:n.publicId,start:i,end:s,duration:s-i,allDay:Number(n.allDay),_seg:t})}function BL(t,e){let{pluginHooks:n}=e,r=n.isDraggableTransformers,{def:i,ui:s}=t.eventRange,a=s.startEditable;for(let c of r)a=c(a,i,s,e);return a}function WL(t,e){return t.isStart&&t.eventRange.ui.durationEditable&&e.options.eventResizableFromStart}function VL(t,e){return t.isEnd&&t.eventRange.ui.durationEditable}function _l(t,e,n,r,i,s,a){let{dateEnv:c,options:u}=n,{displayEventTime:d,displayEventEnd:f}=u,p=t.eventRange.def,m=t.eventRange.instance;d==null&&(d=r!==!1),f==null&&(f=i!==!1);let v=m.range.start,b=m.range.end,_=s||t.start||t.eventRange.range.start,w=a||t.end||t.eventRange.range.end,x=bt(v).valueOf()===bt(_).valueOf(),C=bt(_s(b,-1)).valueOf()===bt(_s(w,-1)).valueOf();return d&&!p.allDay&&(x||C)?(_=x?v:_,w=C?b:w,f&&p.hasEnd?c.formatRange(_,w,e,{forcedStartTzo:s?null:m.forcedStartTzo,forcedEndTzo:a?null:m.forcedEndTzo}):c.format(_,e,{forcedTzo:s?null:m.forcedStartTzo})):""}function Ii(t,e,n){let r=t.eventRange.range;return{isPast:r.end<=(n||e.start),isFuture:r.start>=(n||e.end),isToday:e&&Ni(e,r.start)}}function $L(t){let e=["fc-event"];return t.isMirror&&e.push("fc-event-mirror"),t.isDraggable&&e.push("fc-event-draggable"),(t.isStartResizable||t.isEndResizable)&&e.push("fc-event-resizable"),t.isDragging&&e.push("fc-event-dragging"),t.isResizing&&e.push("fc-event-resizing"),t.isSelected&&e.push("fc-event-selected"),t.isStart&&e.push("fc-event-start"),t.isEnd&&e.push("fc-event-end"),t.isPast&&e.push("fc-event-past"),t.isToday&&e.push("fc-event-today"),t.isFuture&&e.push("fc-event-future"),e}function NE(t){return t.instance?t.instance.instanceId:`${t.def.defId}:${t.range.start.toISOString()}`}function Dm(t,e){let{def:n,instance:r}=t.eventRange,{url:i}=n;if(i)return{href:i};let{emitter:s,options:a}=e,{eventInteractive:c}=a;return c==null&&(c=n.interactive,c==null&&(c=!!s.hasHandlers("eventClick"))),c?dE(u=>{s.trigger("eventClick",{el:u.target,event:new At(e,n,r),jsEvent:u,view:e.viewApi})}):{}}const qL={start:W,end:W,allDay:Boolean};function GL(t,e,n){let r=YL(t,e),{range:i}=r;if(!i.start)return null;if(!i.end){if(n==null)return null;i.end=e.add(i.start,n)}return r}function YL(t,e){let{refined:n,extra:r}=pm(t,qL),i=n.start?e.createMarkerMeta(n.start):null,s=n.end?e.createMarkerMeta(n.end):null,{allDay:a}=n;return a==null&&(a=i&&i.isTimeUnspecified&&(!s||s.isTimeUnspecified)),Object.assign({range:{start:i?i.marker:null,end:s?s.marker:null},allDay:a},r)}function QL(t,e){return dL(t.range,e.range)&&t.allDay===e.allDay&&KL(t,e)}function KL(t,e){for(let n in e)if(n!=="range"&&n!=="allDay"&&t[n]!==e[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}function ZL(t,e){return Object.assign(Object.assign({},PE(t.range,e,t.allDay)),{allDay:t.allDay})}function IE(t,e,n){return Object.assign(Object.assign({},PE(t,e,n)),{timeZone:e.timeZone})}function PE(t,e,n){return{start:e.toDate(t.start),end:e.toDate(t.end),startStr:e.formatIso(t.start,{omitTime:n}),endStr:e.formatIso(t.end,{omitTime:n})}}function XL(t,e,n){let r=EE({editable:!1},n),i=_g(r.refined,r.extra,"",t.allDay,!0,n);return{def:i,ui:ME(i,e),instance:_m(i.defId,t.range),range:t.range,isStart:!0,isEnd:!0}}function JL(t,e,n){let r=!1,i=function(c){r||(r=!0,e(c))},s=function(c){r||(r=!0,n(c))},a=t(i,s);a&&typeof a.then=="function"&&a.then(i,s)}class R_ extends Error{constructor(e,n){super(e),this.response=n}}function eF(t,e,n){t=t.toUpperCase();const r={method:t};return t==="GET"?e+=(e.indexOf("?")===-1?"?":"&")+new URLSearchParams(n):(r.body=new URLSearchParams(n),r.headers={"Content-Type":"application/x-www-form-urlencoded"}),fetch(e,r).then(i=>{if(i.ok)return i.json().then(s=>[s,i],()=>{throw new R_("Failure parsing JSON",i)});throw new R_("Request failed",i)})}let Dp;function LE(){return Dp==null&&(Dp=tF()),Dp}function tF(){if(typeof document>"u")return!0;let t=document.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.innerHTML="<table><tr><td><div></div></td></tr></table>",t.querySelector("table").style.height="100px",t.querySelector("div").style.height="100%",document.body.appendChild(t);let n=t.querySelector("div").offsetHeight>0;return document.body.removeChild(t),n}class nF extends at{constructor(){super(...arguments),this.state={forPrint:!1},this.handleBeforePrint=()=>{wd(()=>{this.setState({forPrint:!0})})},this.handleAfterPrint=()=>{wd(()=>{this.setState({forPrint:!1})})}}render(){let{props:e}=this,{options:n}=e,{forPrint:r}=this.state,i=r||n.height==="auto"||n.contentHeight==="auto",s=!i&&n.height!=null?n.height:"",a=["fc",r?"fc-media-print":"fc-media-screen",`fc-direction-${n.direction}`,e.theme.getClass("root")];return LE()||a.push("fc-liquid-hack"),e.children(a,s,i,r)}componentDidMount(){let{emitter:e}=this.props;e.on("_beforeprint",this.handleBeforePrint),e.on("_afterprint",this.handleAfterPrint)}componentWillUnmount(){let{emitter:e}=this.props;e.off("_beforeprint",this.handleBeforePrint),e.off("_afterprint",this.handleAfterPrint)}}let vo=class{constructor(e){this.component=e.component,this.isHitComboAllowed=e.isHitComboAllowed||null}destroy(){}};function rF(t,e){return{component:t,el:e.el,useEventCenter:e.useEventCenter!=null?e.useEventCenter:!0,isHitComboAllowed:e.isHitComboAllowed||null}}function km(t){return{[t.component.uid]:t}}const xg={};class ya extends lr{constructor(e,n){super(e,n),this.handleRefresh=()=>{let r=this.computeTiming();r.state.nowDate.valueOf()!==this.state.nowDate.valueOf()&&this.setState(r.state),this.clearTimeout(),this.setTimeout(r.waitMs)},this.handleVisibilityChange=()=>{document.hidden||this.handleRefresh()},this.state=this.computeTiming().state}render(){let{props:e,state:n}=this;return e.children(n.nowDate,n.todayRange)}componentDidMount(){this.setTimeout(),this.context.nowManager.addResetListener(this.handleRefresh),document.addEventListener("visibilitychange",this.handleVisibilityChange)}componentDidUpdate(e){e.unit!==this.props.unit&&(this.clearTimeout(),this.setTimeout())}componentWillUnmount(){this.clearTimeout(),this.context.nowManager.removeResetListener(this.handleRefresh),document.removeEventListener("visibilitychange",this.handleVisibilityChange)}computeTiming(){let{props:e,context:n}=this,r=n.nowManager.getDateMarker(),{nowIndicatorSnap:i}=n.options;i==="auto"&&(i=/year|month|week|day/.test(e.unit)||(e.unitValue||1)===1);let s,a;return i?(s=n.dateEnv.startOf(r,e.unit),a=n.dateEnv.add(s,Ye(1,e.unit)).valueOf()-r.valueOf()):(s=r,a=1e3*60),a=Math.min(1e3*60*60*24,a),{state:{nowDate:s,todayRange:iF(s)},waitMs:a}}setTimeout(e=this.computeTiming().waitMs){this.timeoutId=setTimeout(()=>{const n=this.computeTiming();this.setState(n.state,()=>{this.setTimeout(n.waitMs)})},e)}clearTimeout(){this.timeoutId&&clearTimeout(this.timeoutId)}}ya.contextType=zi;function iF(t){let e=bt(t),n=Kt(e,1);return{start:e,end:n}}class sF{getCurrentData(){return this.currentDataManager.getCurrentData()}dispatch(e){this.currentDataManager.dispatch(e)}get view(){return this.getCurrentData().viewApi}batchRendering(e){e()}updateSize(){this.trigger("_resize",!0)}setOption(e,n){this.dispatch({type:"SET_OPTION",optionName:e,rawOptionValue:n})}getOption(e){return this.currentDataManager.currentCalendarOptionsInput[e]}getAvailableLocaleCodes(){return Object.keys(this.getCurrentData().availableRawLocales)}on(e,n){let{currentDataManager:r}=this;r.currentCalendarOptionsRefiners[e]?r.emitter.on(e,n):console.warn(`Unknown listener name '${e}'`)}off(e,n){this.currentDataManager.emitter.off(e,n)}trigger(e,...n){this.currentDataManager.emitter.trigger(e,...n)}changeView(e,n){this.batchRendering(()=>{if(this.unselect(),n)if(n.start&&n.end)this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e}),this.dispatch({type:"SET_OPTION",optionName:"visibleRange",rawOptionValue:n});else{let{dateEnv:r}=this.getCurrentData();this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e,dateMarker:r.createMarker(n)})}else this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e})})}zoomTo(e,n){let r=this.getCurrentData(),i;n=n||"day",i=r.viewSpecs[n]||this.getUnitViewSpec(n),this.unselect(),i?this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:i.type,dateMarker:e}):this.dispatch({type:"CHANGE_DATE",dateMarker:e})}getUnitViewSpec(e){let{viewSpecs:n,toolbarConfig:r}=this.getCurrentData(),i=[].concat(r.header?r.header.viewsWithButtons:[],r.footer?r.footer.viewsWithButtons:[]),s,a;for(let c in n)i.push(c);for(s=0;s<i.length;s+=1)if(a=n[i[s]],a&&a.singleUnit===e)return a;return null}prev(){this.unselect(),this.dispatch({type:"PREV"})}next(){this.unselect(),this.dispatch({type:"NEXT"})}prevYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,-1)})}nextYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,1)})}today(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.nowManager.getDateMarker()})}gotoDate(e){let n=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:n.dateEnv.createMarker(e)})}incrementDate(e){let n=this.getCurrentData(),r=Ye(e);r&&(this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:n.dateEnv.add(n.currentDate,r)}))}getDate(){let e=this.getCurrentData();return e.dateEnv.toDate(e.currentDate)}formatDate(e,n){let{dateEnv:r}=this.getCurrentData();return r.format(r.createMarker(e),Dt(n))}formatRange(e,n,r){let{dateEnv:i}=this.getCurrentData();return i.formatRange(i.createMarker(e),i.createMarker(n),Dt(r),r)}formatIso(e,n){let{dateEnv:r}=this.getCurrentData();return r.formatIso(r.createMarker(e),{omitTime:n})}select(e,n){let r;n==null?e.start!=null?r=e:r={start:e,end:null}:r={start:e,end:n};let i=this.getCurrentData(),s=GL(r,i.dateEnv,Ye({days:1}));s&&(this.dispatch({type:"SELECT_DATES",selection:s}),RE(s,null,i))}unselect(e){let n=this.getCurrentData();n.dateSelection&&(this.dispatch({type:"UNSELECT_DATES"}),FL(e,n))}addEvent(e,n){if(e instanceof At){let a=e._def,c=e._instance;return this.getCurrentData().eventStore.defs[a.defId]||(this.dispatch({type:"ADD_EVENTS",eventStore:Sg({def:a,instance:c})}),this.triggerEventAdd(e)),e}let r=this.getCurrentData(),i;if(n instanceof Ya)i=n.internalEventSource;else if(typeof n=="boolean")n&&([i]=mm(r.eventSources));else if(n!=null){let a=this.getEventSourceById(n);if(!a)return console.warn(`Could not find an event source with ID "${n}"`),null;i=a.internalEventSource}let s=xE(e,i,r,!1);if(s){let a=new At(r,s.def,s.def.recurringDef?null:s.instance);return this.dispatch({type:"ADD_EVENTS",eventStore:Sg(s)}),this.triggerEventAdd(a),a}return null}triggerEventAdd(e){let{emitter:n}=this.getCurrentData();n.trigger("eventAdd",{event:e,relatedEvents:[],revert:()=>{this.dispatch({type:"REMOVE_EVENTS",eventStore:OE(e)})}})}getEventById(e){let n=this.getCurrentData(),{defs:r,instances:i}=n.eventStore;e=String(e);for(let s in r){let a=r[s];if(a.publicId===e){if(a.recurringDef)return new At(n,a,null);for(let c in i){let u=i[c];if(u.defId===a.defId)return new At(n,a,u)}}}return null}getEvents(){let e=this.getCurrentData();return ra(e.eventStore,e)}removeAllEvents(){this.dispatch({type:"REMOVE_ALL_EVENTS"})}getEventSources(){let e=this.getCurrentData(),n=e.eventSources,r=[];for(let i in n)r.push(new Ya(e,n[i]));return r}getEventSourceById(e){let n=this.getCurrentData(),r=n.eventSources;e=String(e);for(let i in r)if(r[i].publicId===e)return new Ya(n,r[i]);return null}addEventSource(e){let n=this.getCurrentData();if(e instanceof Ya)return n.eventSources[e.internalEventSource.sourceId]||this.dispatch({type:"ADD_EVENT_SOURCES",sources:[e.internalEventSource]}),e;let r=TE(e,n);return r?(this.dispatch({type:"ADD_EVENT_SOURCES",sources:[r]}),new Ya(n,r)):null}removeAllEventSources(){this.dispatch({type:"REMOVE_ALL_EVENT_SOURCES"})}refetchEvents(){this.dispatch({type:"FETCH_EVENT_SOURCES",isRefetch:!0})}scrollToTime(e){let n=Ye(e);n&&this.trigger("_scrollRequest",{time:n})}}function aF(t,e){return t.left>=e.left&&t.left<e.right&&t.top>=e.top&&t.top<e.bottom}function FE(t,e){let n={left:Math.max(t.left,e.left),right:Math.min(t.right,e.right),top:Math.max(t.top,e.top),bottom:Math.min(t.bottom,e.bottom)};return n.left<n.right&&n.top<n.bottom?n:!1}function oF(t,e){return{left:Math.min(Math.max(t.left,e.left),e.right),top:Math.min(Math.max(t.top,e.top),e.bottom)}}function lF(t){return{left:(t.left+t.right)/2,top:(t.top+t.bottom)/2}}function cF(t,e){return{left:t.left-e.left,top:t.top-e.top}}const kp=cr();class uF{constructor(){this.getKeysForEventDefs=Ce(this._getKeysForEventDefs),this.splitDateSelection=Ce(this._splitDateSpan),this.splitEventStore=Ce(this._splitEventStore),this.splitIndividualUi=Ce(this._splitIndividualUi),this.splitEventDrag=Ce(this._splitInteraction),this.splitEventResize=Ce(this._splitInteraction),this.eventUiBuilders={}}splitProps(e){let n=this.getKeyInfo(e),r=this.getKeysForEventDefs(e.eventStore),i=this.splitDateSelection(e.dateSelection),s=this.splitIndividualUi(e.eventUiBases,r),a=this.splitEventStore(e.eventStore,r),c=this.splitEventDrag(e.eventDrag),u=this.splitEventResize(e.eventResize),d={};this.eventUiBuilders=Li(n,(f,p)=>this.eventUiBuilders[p]||Ce(dF));for(let f in n){let p=n[f],m=a[f]||kp,v=this.eventUiBuilders[f];d[f]={businessHours:p.businessHours||e.businessHours,dateSelection:i[f]||null,eventStore:m,eventUiBases:v(e.eventUiBases[""],p.ui,s[f]),eventSelection:m.instances[e.eventSelection]?e.eventSelection:"",eventDrag:c[f]||null,eventResize:u[f]||null}}return d}_splitDateSpan(e){let n={};if(e){let r=this.getKeysForDateSpan(e);for(let i of r)n[i]=e}return n}_getKeysForEventDefs(e){return Li(e.defs,n=>this.getKeysForEventDef(n))}_splitEventStore(e,n){let{defs:r,instances:i}=e,s={};for(let a in r)for(let c of n[a])s[c]||(s[c]=cr()),s[c].defs[a]=r[a];for(let a in i){let c=i[a];for(let u of n[c.defId])s[u]&&(s[u].instances[a]=c)}return s}_splitIndividualUi(e,n){let r={};for(let i in e)if(i)for(let s of n[i])r[s]||(r[s]={}),r[s][i]=e[i];return r}_splitInteraction(e){let n={};if(e){let r=this._splitEventStore(e.affectedEvents,this._getKeysForEventDefs(e.affectedEvents)),i=this._getKeysForEventDefs(e.mutatedEvents),s=this._splitEventStore(e.mutatedEvents,i),a=c=>{n[c]||(n[c]={affectedEvents:r[c]||kp,mutatedEvents:s[c]||kp,isEvent:e.isEvent})};for(let c in r)a(c);for(let c in s)a(c)}return n}}function dF(t,e,n){let r=[];t&&r.push(t),e&&r.push(e);let i={"":CE(r)};return n&&Object.assign(i,n),i}function Am(t,e,n,r){return{dow:t.getUTCDay(),isDisabled:!!(r&&(!r.activeRange||!Ni(r.activeRange,t))),isOther:!!(r&&!Ni(r.currentRange,t)),isToday:!!(e&&Ni(e,t)),isPast:!!(n?t<n:e&&t<e.start),isFuture:!!(n?t>n:e&&t>=e.end)}}function lf(t,e){let n=["fc-day",`fc-day-${pP[t.dow]}`];return t.isDisabled?n.push("fc-day-disabled"):(t.isToday&&(n.push("fc-day-today"),n.push(e.getClass("today"))),t.isPast&&n.push("fc-day-past"),t.isFuture&&n.push("fc-day-future"),t.isOther&&n.push("fc-day-other")),n}const fF=Dt({year:"numeric",month:"long",day:"numeric"}),hF=Dt({week:"long"});function ao(t,e,n="day",r=!0){const{dateEnv:i,options:s,calendarApi:a}=t;let c=i.format(e,n==="week"?hF:fF);if(s.navLinks){let u=i.toDate(e);const d=f=>{let p=n==="day"?s.navLinkDayClick:n==="week"?s.navLinkWeekClick:null;typeof p=="function"?p.call(a,i.toDate(e),f):(typeof p=="string"&&(n=p),a.zoomTo(e,n))};return Object.assign({title:yl(s.navLinkHint,[c,u],c),"data-navlink":""},r?uE(d):{onClick:d})}return{"aria-label":c}}let Ap=null;function pF(){return Ap===null&&(Ap=gF()),Ap}function gF(){let t=document.createElement("div");vl(t,{position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}),t.innerHTML="<div></div>",document.body.appendChild(t);let n=t.firstChild.getBoundingClientRect().left>t.getBoundingClientRect().left;return cm(t),n}let Rp;function mF(){return Rp||(Rp=vF()),Rp}function vF(){let t=document.createElement("div");t.style.overflow="scroll",t.style.position="absolute",t.style.top="-9999px",t.style.left="-9999px",document.body.appendChild(t);let e=jE(t);return document.body.removeChild(t),e}function jE(t){return{x:t.offsetHeight-t.clientHeight,y:t.offsetWidth-t.clientWidth}}function yF(t,e=!1){let n=window.getComputedStyle(t),r=parseInt(n.borderLeftWidth,10)||0,i=parseInt(n.borderRightWidth,10)||0,s=parseInt(n.borderTopWidth,10)||0,a=parseInt(n.borderBottomWidth,10)||0,c=jE(t),u=c.y-r-i,d=c.x-s-a,f={borderLeft:r,borderRight:i,borderTop:s,borderBottom:a,scrollbarBottom:d,scrollbarLeft:0,scrollbarRight:0};return pF()&&n.direction==="rtl"?f.scrollbarLeft=u:f.scrollbarRight=u,e&&(f.paddingLeft=parseInt(n.paddingLeft,10)||0,f.paddingRight=parseInt(n.paddingRight,10)||0,f.paddingTop=parseInt(n.paddingTop,10)||0,f.paddingBottom=parseInt(n.paddingBottom,10)||0),f}function bF(t,e=!1,n){let r=Rm(t),i=yF(t,e),s={left:r.left+i.borderLeft+i.scrollbarLeft,right:r.right-i.borderRight-i.scrollbarRight,top:r.top+i.borderTop,bottom:r.bottom-i.borderBottom-i.scrollbarBottom};return e&&(s.left+=i.paddingLeft,s.right-=i.paddingRight,s.top+=i.paddingTop,s.bottom-=i.paddingBottom),s}function Rm(t){let e=t.getBoundingClientRect();return{left:e.left+window.scrollX,top:e.top+window.scrollY,right:e.right+window.scrollX,bottom:e.bottom+window.scrollY}}function _F(t){let e=HE(t),n=t.getBoundingClientRect();for(let r of e){let i=FE(n,r.getBoundingClientRect());if(i)n=i;else return null}return n}function HE(t){let e=[];for(;t instanceof HTMLElement;){let n=window.getComputedStyle(t);if(n.position==="fixed")break;/(auto|scroll)/.test(n.overflow+n.overflowY+n.overflowX)&&e.push(t),t=t.parentNode}return e}class oo{constructor(e,n,r,i){this.els=n;let s=this.originClientRect=e.getBoundingClientRect();r&&this.buildElHorizontals(s.left),i&&this.buildElVerticals(s.top)}buildElHorizontals(e){let n=[],r=[];for(let i of this.els){let s=i.getBoundingClientRect();n.push(s.left-e),r.push(s.right-e)}this.lefts=n,this.rights=r}buildElVerticals(e){let n=[],r=[];for(let i of this.els){let s=i.getBoundingClientRect();n.push(s.top-e),r.push(s.bottom-e)}this.tops=n,this.bottoms=r}leftToIndex(e){let{lefts:n,rights:r}=this,i=n.length,s;for(s=0;s<i;s+=1)if(e>=n[s]&&e<r[s])return s}topToIndex(e){let{tops:n,bottoms:r}=this,i=n.length,s;for(s=0;s<i;s+=1)if(e>=n[s]&&e<r[s])return s}getWidth(e){return this.rights[e]-this.lefts[e]}getHeight(e){return this.bottoms[e]-this.tops[e]}similarTo(e){return ku(this.tops||[],e.tops||[])&&ku(this.bottoms||[],e.bottoms||[])&&ku(this.lefts||[],e.lefts||[])&&ku(this.rights||[],e.rights||[])}}function ku(t,e){const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(Math.round(t[r])!==Math.round(e[r]))return!1;return!0}class Om{getMaxScrollTop(){return this.getScrollHeight()-this.getClientHeight()}getMaxScrollLeft(){return this.getScrollWidth()-this.getClientWidth()}canScrollVertically(){return this.getMaxScrollTop()>0}canScrollHorizontally(){return this.getMaxScrollLeft()>0}canScrollUp(){return this.getScrollTop()>0}canScrollDown(){return this.getScrollTop()<this.getMaxScrollTop()}canScrollLeft(){return this.getScrollLeft()>0}canScrollRight(){return this.getScrollLeft()<this.getMaxScrollLeft()}}class SF extends Om{constructor(e){super(),this.el=e}getScrollTop(){return this.el.scrollTop}getScrollLeft(){return this.el.scrollLeft}setScrollTop(e){this.el.scrollTop=e}setScrollLeft(e){this.el.scrollLeft=e}getScrollWidth(){return this.el.scrollWidth}getScrollHeight(){return this.el.scrollHeight}getClientHeight(){return this.el.clientHeight}getClientWidth(){return this.el.clientWidth}}class wF extends Om{getScrollTop(){return window.scrollY}getScrollLeft(){return window.scrollX}setScrollTop(e){window.scroll(window.scrollX,e)}setScrollLeft(e){window.scroll(e,window.scrollY)}getScrollWidth(){return document.documentElement.scrollWidth}getScrollHeight(){return document.documentElement.scrollHeight}getClientHeight(){return document.documentElement.clientHeight}getClientWidth(){return document.documentElement.clientWidth}}class Br extends at{constructor(){super(...arguments),this.uid=ma()}prepareHits(){}queryHit(e,n,r,i){return null}isValidSegDownEl(e){return!this.props.eventDrag&&!this.props.eventResize&&!Tn(e,".fc-event-mirror")}isValidDateDownEl(e){return!Tn(e,".fc-event:not(.fc-bg-event)")&&!Tn(e,".fc-more-link")&&!Tn(e,"a[data-navlink]")&&!Tn(e,".fc-popover")}}class zE{constructor(e=n=>n.thickness||1){this.getEntryThickness=e,this.strictOrder=!1,this.allowReslicing=!1,this.maxCoord=-1,this.maxStackCnt=-1,this.levelCoords=[],this.entriesByLevel=[],this.stackCnts={}}addSegs(e){let n=[];for(let r of e)this.insertEntry(r,n);return n}insertEntry(e,n){let r=this.findInsertion(e);this.isInsertionValid(r,e)?this.insertEntryAt(e,r):this.handleInvalidInsertion(r,e,n)}isInsertionValid(e,n){return(this.maxCoord===-1||e.levelCoord+this.getEntryThickness(n)<=this.maxCoord)&&(this.maxStackCnt===-1||e.stackCnt<this.maxStackCnt)}handleInvalidInsertion(e,n,r){if(this.allowReslicing&&e.touchingEntry){const i=Object.assign(Object.assign({},n),{span:Mm(n.span,e.touchingEntry.span)});r.push(i),this.splitEntry(n,e.touchingEntry,r)}else r.push(n)}splitEntry(e,n,r){let i=e.span,s=n.span;i.start<s.start&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:i.start,end:s.start}},r),i.end>s.end&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:s.end,end:i.end}},r)}insertEntryAt(e,n){let{entriesByLevel:r,levelCoords:i}=this;n.lateral===-1?(Op(i,n.level,n.levelCoord),Op(r,n.level,[e])):Op(r[n.level],n.lateral,e),this.stackCnts[ia(e)]=n.stackCnt}findInsertion(e){let{levelCoords:n,entriesByLevel:r,strictOrder:i,stackCnts:s}=this,a=n.length,c=0,u=-1,d=-1,f=null,p=0;for(let b=0;b<a;b+=1){const _=n[b];if(!i&&_>=c+this.getEntryThickness(e))break;let w=r[b],x,C=Cg(w,e.span.start,Eg),k=C[0]+C[1];for(;(x=w[k])&&x.span.start<e.span.end;){let R=_+this.getEntryThickness(x);R>c&&(c=R,f=x,u=b,d=k),R===c&&(p=Math.max(p,s[ia(x)]+1)),k+=1}}let m=0;if(f)for(m=u+1;m<a&&n[m]<c;)m+=1;let v=-1;return m<a&&n[m]===c&&(v=Cg(r[m],e.span.end,Eg)[0]),{touchingLevel:u,touchingLateral:d,touchingEntry:f,stackCnt:p,levelCoord:c,level:m,lateral:v}}toRects(){let{entriesByLevel:e,levelCoords:n}=this,r=e.length,i=[];for(let s=0;s<r;s+=1){let a=e[s],c=n[s];for(let u of a)i.push(Object.assign(Object.assign({},u),{thickness:this.getEntryThickness(u),levelCoord:c}))}return i}}function Eg(t){return t.span.end}function ia(t){return t.index+":"+t.span.start}function xF(t){let e=[];for(let n of t){let r=[],i={span:n.span,entries:[n]};for(let s of e)Mm(s.span,i.span)?i={entries:s.entries.concat(i.entries),span:EF(s.span,i.span)}:r.push(s);r.push(i),e=r}return e}function EF(t,e){return{start:Math.min(t.start,e.start),end:Math.max(t.end,e.end)}}function Mm(t,e){let n=Math.max(t.start,e.start),r=Math.min(t.end,e.end);return n<r?{start:n,end:r}:null}function Op(t,e,n){t.splice(e,0,n)}function Cg(t,e,n){let r=0,i=t.length;if(!i||e<n(t[r]))return[0,0];if(e>n(t[i-1]))return[i,0];for(;r<i;){let s=Math.floor(r+(i-r)/2),a=n(t[s]);if(e<a)i=s;else if(e>a)r=s+1;else return[s,1]}return[r,0]}class CF{constructor(e,n){this.emitter=new of}destroy(){}setMirrorIsVisible(e){}setMirrorNeedsRevert(e){}setAutoScrollEnabled(e){}}const Nm={};function TF(t,e){return!t||e>10?Dt({weekday:"short"}):e>1?Dt({weekday:"short",month:"numeric",day:"numeric",omitCommas:!0}):Dt({weekday:"long"})}const UE="fc-col-header-cell";function BE(t){return t.text}class DF extends at{render(){let{dateEnv:e,options:n,theme:r,viewApi:i}=this.context,{props:s}=this,{date:a,dateProfile:c}=s,u=Am(a,s.todayRange,null,c),d=[UE].concat(lf(u,r)),f=e.format(a,s.dayHeaderFormat),p=!u.isDisabled&&s.colCnt>1?ao(this.context,a):{},m=e.toDate(a);e.namedTimeZoneImpl&&(m=_s(m,36e5));let v=Object.assign(Object.assign(Object.assign({date:m,view:i},s.extraRenderProps),{text:f}),u);return I(An,{elTag:"th",elClasses:d,elAttrs:Object.assign({role:"columnheader",colSpan:s.colSpan,"data-date":u.isDisabled?void 0:Jl(a)},s.extraDataAttrs),renderProps:v,generatorName:"dayHeaderContent",customGenerator:n.dayHeaderContent,defaultGenerator:BE,classNameGenerator:n.dayHeaderClassNames,didMount:n.dayHeaderDidMount,willUnmount:n.dayHeaderWillUnmount},b=>I("div",{className:"fc-scrollgrid-sync-inner"},!u.isDisabled&&I(b,{elTag:"a",elAttrs:p,elClasses:["fc-col-header-cell-cushion",s.isSticky&&"fc-sticky"]})))}}const kF=Dt({weekday:"long"});class AF extends at{render(){let{props:e}=this,{dateEnv:n,theme:r,viewApi:i,options:s}=this.context,a=Kt(new Date(2592e5),e.dow),c={dow:e.dow,isDisabled:!1,isFuture:!1,isPast:!1,isToday:!1,isOther:!1},u=n.format(a,e.dayHeaderFormat),d=Object.assign(Object.assign(Object.assign(Object.assign({date:a},c),{view:i}),e.extraRenderProps),{text:u});return I(An,{elTag:"th",elClasses:[UE,...lf(c,r),...e.extraClassNames||[]],elAttrs:Object.assign({role:"columnheader",colSpan:e.colSpan},e.extraDataAttrs),renderProps:d,generatorName:"dayHeaderContent",customGenerator:s.dayHeaderContent,defaultGenerator:BE,classNameGenerator:s.dayHeaderClassNames,didMount:s.dayHeaderDidMount,willUnmount:s.dayHeaderWillUnmount},f=>I("div",{className:"fc-scrollgrid-sync-inner"},I(f,{elTag:"a",elClasses:["fc-col-header-cell-cushion",e.isSticky&&"fc-sticky"],elAttrs:{"aria-label":n.format(a,kF)}})))}}class WE extends at{constructor(){super(...arguments),this.createDayHeaderFormatter=Ce(RF)}render(){let{context:e}=this,{dates:n,dateProfile:r,datesRepDistinctDays:i,renderIntro:s}=this.props,a=this.createDayHeaderFormatter(e.options.dayHeaderFormat,i,n.length);return I(ya,{unit:"day"},(c,u)=>I("tr",{role:"row"},s&&s("day"),n.map(d=>i?I(DF,{key:d.toISOString(),date:d,dateProfile:r,todayRange:u,colCnt:n.length,dayHeaderFormat:a}):I(AF,{key:d.getUTCDay(),dow:d.getUTCDay(),dayHeaderFormat:a}))))}}function RF(t,e,n){return t||TF(e,n)}class VE{constructor(e,n){let r=e.start,{end:i}=e,s=[],a=[],c=-1;for(;r<i;)n.isHiddenDay(r)?s.push(c+.5):(c+=1,s.push(c),a.push(r)),r=Kt(r,1);this.dates=a,this.indices=s,this.cnt=a.length}sliceRange(e){let n=this.getDateDayIndex(e.start),r=this.getDateDayIndex(Kt(e.end,-1)),i=Math.max(0,n),s=Math.min(this.cnt-1,r);return i=Math.ceil(i),s=Math.floor(s),i<=s?{firstIndex:i,lastIndex:s,isStart:n===i,isEnd:r===s}:null}getDateDayIndex(e){let{indices:n}=this,r=Math.floor(Cs(this.dates[0],e));return r<0?n[0]-1:r>=n.length?n[n.length-1]+1:n[r]}}class $E{constructor(e,n){let{dates:r}=e,i,s,a;if(n){for(s=r[0].getUTCDay(),i=1;i<r.length&&r[i].getUTCDay()!==s;i+=1);a=Math.ceil(r.length/i)}else a=1,i=r.length;this.rowCnt=a,this.colCnt=i,this.daySeries=e,this.cells=this.buildCells(),this.headerDates=this.buildHeaderDates()}buildCells(){let e=[];for(let n=0;n<this.rowCnt;n+=1){let r=[];for(let i=0;i<this.colCnt;i+=1)r.push(this.buildCell(n,i));e.push(r)}return e}buildCell(e,n){let r=this.daySeries.dates[e*this.colCnt+n];return{key:r.toISOString(),date:r}}buildHeaderDates(){let e=[];for(let n=0;n<this.colCnt;n+=1)e.push(this.cells[0][n].date);return e}sliceRange(e){let{colCnt:n}=this,r=this.daySeries.sliceRange(e),i=[];if(r){let{firstIndex:s,lastIndex:a}=r,c=s;for(;c<=a;){let u=Math.floor(c/n),d=Math.min((u+1)*n,a+1);i.push({row:u,firstCol:c%n,lastCol:(d-1)%n,isStart:r.isStart&&c===s,isEnd:r.isEnd&&d-1===a}),c=d}}return i}}class qE{constructor(){this.sliceBusinessHours=Ce(this._sliceBusinessHours),this.sliceDateSelection=Ce(this._sliceDateSpan),this.sliceEventStore=Ce(this._sliceEventStore),this.sliceEventDrag=Ce(this._sliceInteraction),this.sliceEventResize=Ce(this._sliceInteraction),this.forceDayIfListItem=!1}sliceProps(e,n,r,i,...s){let{eventUiBases:a}=e,c=this.sliceEventStore(e.eventStore,a,n,r,...s);return{dateSelectionSegs:this.sliceDateSelection(e.dateSelection,n,r,a,i,...s),businessHourSegs:this.sliceBusinessHours(e.businessHours,n,r,i,...s),fgEventSegs:c.fg,bgEventSegs:c.bg,eventDrag:this.sliceEventDrag(e.eventDrag,a,n,r,...s),eventResize:this.sliceEventResize(e.eventResize,a,n,r,...s),eventSelection:e.eventSelection}}sliceNowDate(e,n,r,i,...s){return this._sliceDateSpan({range:{start:e,end:_s(e,1)},allDay:!1},n,r,{},i,...s)}_sliceBusinessHours(e,n,r,i,...s){return e?this._sliceEventStore(ua(e,Au(n,!!r),i),{},n,r,...s).bg:[]}_sliceEventStore(e,n,r,i,...s){if(e){let a=wg(e,n,Au(r,!!i),i);return{bg:this.sliceEventRanges(a.bg,s),fg:this.sliceEventRanges(a.fg,s)}}return{bg:[],fg:[]}}_sliceInteraction(e,n,r,i,...s){if(!e)return null;let a=wg(e.mutatedEvents,n,Au(r,!!i),i);return{segs:this.sliceEventRanges(a.fg,s),affectedInstances:e.affectedEvents.instances,isEvent:e.isEvent}}_sliceDateSpan(e,n,r,i,s,...a){if(!e)return[];let c=Au(n,!!r),u=Ss(e.range,c);if(u){e=Object.assign(Object.assign({},e),{range:u});let d=XL(e,i,s),f=this.sliceRange(e.range,...a);for(let p of f)p.eventRange=d;return f}return[]}sliceEventRanges(e,n){let r=[];for(let i of e)r.push(...this.sliceEventRange(i,n));return r}sliceEventRange(e,n){let r=e.range;this.forceDayIfListItem&&e.ui.display==="list-item"&&(r={start:r.start,end:Kt(r.start,1)});let i=this.sliceRange(r,...n);for(let s of i)s.eventRange=e,s.isStart=e.isStart&&s.isStart,s.isEnd=e.isEnd&&s.isEnd;return i}}function Au(t,e){let n=t.activeRange;return e?n:{start:_s(n.start,t.slotMinTime.milliseconds),end:_s(n.end,t.slotMaxTime.milliseconds-864e5)}}function GE(t,e,n){let{instances:r}=t.mutatedEvents;for(let i in r)if(!sf(e.validRange,r[i].range))return!1;return YE({eventDrag:t},n)}function OF(t,e,n){return sf(e.validRange,t.range)?YE({dateSelection:t},n):!1}function YE(t,e){let n=e.getCurrentData(),r=Object.assign({businessHours:n.businessHours,dateSelection:"",eventStore:n.eventStore,eventUiBases:n.eventUiBases,eventSelection:"",eventDrag:null,eventResize:null},t);return(e.pluginHooks.isPropsValid||MF)(r,e)}function MF(t,e,n={},r){return!(t.eventDrag&&!NF(t,e,n,r)||t.dateSelection&&!IF(t,e,n,r))}function NF(t,e,n,r){let i=e.getCurrentData(),s=t.eventDrag,a=s.mutatedEvents,c=a.defs,u=a.instances,d=Cd(c,s.isEvent?t.eventUiBases:{"":i.selectionConfig});r&&(d=Li(d,r));let f=RL(t.eventStore,s.affectedEvents.instances),p=f.defs,m=f.instances,v=Cd(p,t.eventUiBases);for(let b in u){let _=u[b],w=_.range,x=d[_.defId],C=c[_.defId];if(!QE(x.constraints,w,f,t.businessHours,e))return!1;let{eventOverlap:k}=e.options,R=typeof k=="function"?k:null;for(let M in m){let P=m[M];if(ym(w,P.range)&&(v[P.defId].overlap===!1&&s.isEvent||x.overlap===!1||R&&!R(new At(e,p[P.defId],P),new At(e,C,_))))return!1}let A=i.eventStore;for(let M of x.allows){let P=Object.assign(Object.assign({},n),{range:_.range,allDay:C.allDay}),O=A.defs[C.defId],H=A.instances[b],B;if(O?B=new At(e,O,H):B=new At(e,C),!M(Em(P,e),B))return!1}}return!0}function IF(t,e,n,r){let i=t.eventStore,s=i.defs,a=i.instances,c=t.dateSelection,u=c.range,{selectionConfig:d}=e.getCurrentData();if(r&&(d=r(d)),!QE(d.constraints,u,i,t.businessHours,e))return!1;let{selectOverlap:f}=e.options,p=typeof f=="function"?f:null;for(let m in a){let v=a[m];if(ym(u,v.range)&&(d.overlap===!1||p&&!p(new At(e,s[v.defId],v),null)))return!1}for(let m of d.allows){let v=Object.assign(Object.assign({},n),c);if(!m(Em(v,e),null))return!1}return!0}function QE(t,e,n,r,i){for(let s of t)if(!LF(PF(s,e,n,r,i),e))return!1;return!0}function PF(t,e,n,r,i){return t==="businessHours"?Mp(ua(r,e,i)):typeof t=="string"?Mp(af(n,s=>s.groupId===t)):typeof t=="object"&&t?Mp(ua(t,e,i)):[]}function Mp(t){let{instances:e}=t,n=[];for(let r in e)n.push(e[r].range);return n}function LF(t,e){for(let n of t)if(sf(n,e))return!0;return!1}const Ru=/^(visible|hidden)$/;class KE extends at{constructor(){super(...arguments),this.handleEl=e=>{this.el=e,ai(this.props.elRef,e)}}render(){let{props:e}=this,{liquid:n,liquidIsAbsolute:r}=e,i=n&&r,s=["fc-scroller"];return n&&(r?s.push("fc-scroller-liquid-absolute"):s.push("fc-scroller-liquid")),I("div",{ref:this.handleEl,className:s.join(" "),style:{overflowX:e.overflowX,overflowY:e.overflowY,left:i&&-(e.overcomeLeft||0)||"",right:i&&-(e.overcomeRight||0)||"",bottom:i&&-(e.overcomeBottom||0)||"",marginLeft:!i&&-(e.overcomeLeft||0)||"",marginRight:!i&&-(e.overcomeRight||0)||"",marginBottom:!i&&-(e.overcomeBottom||0)||"",maxHeight:e.maxHeight||""}},e.children)}needsXScrolling(){if(Ru.test(this.props.overflowX))return!1;let{el:e}=this,n=this.el.getBoundingClientRect().width-this.getYScrollbarWidth(),{children:r}=e;for(let i=0;i<r.length;i+=1)if(r[i].getBoundingClientRect().width>n)return!0;return!1}needsYScrolling(){if(Ru.test(this.props.overflowY))return!1;let{el:e}=this,n=this.el.getBoundingClientRect().height-this.getXScrollbarWidth(),{children:r}=e;for(let i=0;i<r.length;i+=1)if(r[i].getBoundingClientRect().height>n)return!0;return!1}getXScrollbarWidth(){return Ru.test(this.props.overflowX)?0:this.el.offsetHeight-this.el.clientHeight}getYScrollbarWidth(){return Ru.test(this.props.overflowY)?0:this.el.offsetWidth-this.el.clientWidth}}class ki{constructor(e){this.masterCallback=e,this.currentMap={},this.depths={},this.callbackMap={},this.handleValue=(n,r)=>{let{depths:i,currentMap:s}=this,a=!1,c=!1;n!==null?(a=r in s,s[r]=n,i[r]=(i[r]||0)+1,c=!0):(i[r]-=1,i[r]||(delete s[r],delete this.callbackMap[r],a=!0)),this.masterCallback&&(a&&this.masterCallback(null,String(r)),c&&this.masterCallback(n,String(r)))}}createRef(e){let n=this.callbackMap[e];return n||(n=this.callbackMap[e]=r=>{this.handleValue(r,String(e))}),n}collect(e,n,r){return YP(this.currentMap,e,n,r)}getAll(){return mm(this.currentMap)}}function FF(t){let e=qI(t,".fc-scrollgrid-shrink"),n=0;for(let r of e)n=Math.max(n,aP(r));return Math.ceil(n)}function ZE(t,e){return t.liquid&&e.liquid}function jF(t,e){return e.maxHeight!=null||ZE(t,e)}function HF(t,e,n,r){let{expandRows:i}=n;return typeof e.content=="function"?e.content(n):I("table",{role:"presentation",className:[e.tableClassName,t.syncRowHeights?"fc-scrollgrid-sync-table":""].join(" "),style:{minWidth:n.tableMinWidth,width:n.clientWidth,height:i?n.clientHeight:""}},n.tableColGroupNode,I(r?"thead":"tbody",{role:"presentation"},typeof e.rowContent=="function"?e.rowContent(n):e.rowContent))}function zF(t,e){return bs(t,e,Hr)}function UF(t,e){let n=[];for(let r of t){let i=r.span||1;for(let s=0;s<i;s+=1)n.push(I("col",{style:{width:r.width==="shrink"?BF(e):r.width||"",minWidth:r.minWidth||""}}))}return I("colgroup",{},...n)}function BF(t){return t??4}function WF(t){for(let e of t)if(e.width==="shrink")return!0;return!1}function VF(t,e){let n=["fc-scrollgrid",e.theme.getClass("table")];return t&&n.push("fc-scrollgrid-liquid"),n}function $F(t,e){let n=["fc-scrollgrid-section",`fc-scrollgrid-section-${t.type}`,t.className];return e&&t.liquid&&t.maxHeight==null&&n.push("fc-scrollgrid-section-liquid"),t.isSticky&&n.push("fc-scrollgrid-section-sticky"),n}function Tg(t){return I("div",{className:"fc-scrollgrid-sticky-shim",style:{width:t.clientWidth,minWidth:t.tableMinWidth}})}function Td(t){let{stickyHeaderDates:e}=t;return(e==null||e==="auto")&&(e=t.height==="auto"||t.viewHeight==="auto"),e}function XE(t){let{stickyFooterScrollbar:e}=t;return(e==null||e==="auto")&&(e=t.height==="auto"||t.viewHeight==="auto"),e}class Im extends at{constructor(){super(...arguments),this.processCols=Ce(e=>e,zF),this.renderMicroColGroup=Ce(UF),this.scrollerRefs=new ki,this.scrollerElRefs=new ki(this._handleScrollerEl.bind(this)),this.state={shrinkWidth:null,forceYScrollbars:!1,scrollerClientWidths:{},scrollerClientHeights:{}},this.handleSizing=()=>{this.safeSetState(Object.assign({shrinkWidth:this.computeShrinkWidth()},this.computeScrollerDims()))}}render(){let{props:e,state:n,context:r}=this,i=e.sections||[],s=this.processCols(e.cols),a=this.renderMicroColGroup(s,n.shrinkWidth),c=VF(e.liquid,r);e.collapsibleWidth&&c.push("fc-scrollgrid-collapsible");let u=i.length,d=0,f,p=[],m=[],v=[];for(;d<u&&(f=i[d]).type==="header";)p.push(this.renderSection(f,a,!0)),d+=1;for(;d<u&&(f=i[d]).type==="body";)m.push(this.renderSection(f,a,!1)),d+=1;for(;d<u&&(f=i[d]).type==="footer";)v.push(this.renderSection(f,a,!0)),d+=1;let b=!LE();const _={role:"rowgroup"};return I("table",{role:"grid",className:c.join(" "),style:{height:e.height}},!!(!b&&p.length)&&I("thead",_,...p),!!(!b&&m.length)&&I("tbody",_,...m),!!(!b&&v.length)&&I("tfoot",_,...v),b&&I("tbody",_,...p,...m,...v))}renderSection(e,n,r){return"outerContent"in e?I(vt,{key:e.key},e.outerContent):I("tr",{key:e.key,role:"presentation",className:$F(e,this.props.liquid).join(" ")},this.renderChunkTd(e,n,e.chunk,r))}renderChunkTd(e,n,r,i){if("outerContent"in r)return r.outerContent;let{props:s}=this,{forceYScrollbars:a,scrollerClientWidths:c,scrollerClientHeights:u}=this.state,d=jF(s,e),f=ZE(s,e),p=s.liquid?a?"scroll":d?"auto":"hidden":"visible",m=e.key,v=HF(e,r,{tableColGroupNode:n,tableMinWidth:"",clientWidth:!s.collapsibleWidth&&c[m]!==void 0?c[m]:null,clientHeight:u[m]!==void 0?u[m]:null,expandRows:e.expandRows,syncRowHeights:!1,rowSyncHeights:[],reportRowHeightChange:()=>{}},i);return I(i?"th":"td",{ref:r.elRef,role:"presentation"},I("div",{className:`fc-scroller-harness${f?" fc-scroller-harness-liquid":""}`},I(KE,{ref:this.scrollerRefs.createRef(m),elRef:this.scrollerElRefs.createRef(m),overflowY:p,overflowX:s.liquid?"hidden":"visible",maxHeight:e.maxHeight,liquid:f,liquidIsAbsolute:!0},v)))}_handleScrollerEl(e,n){let r=qF(this.props.sections,n);r&&ai(r.chunk.scrollerElRef,e)}componentDidMount(){this.handleSizing(),this.context.addResizeHandler(this.handleSizing)}componentDidUpdate(){this.handleSizing()}componentWillUnmount(){this.context.removeResizeHandler(this.handleSizing)}computeShrinkWidth(){return WF(this.props.cols)?FF(this.scrollerElRefs.getAll()):0}computeScrollerDims(){let e=mF(),{scrollerRefs:n,scrollerElRefs:r}=this,i=!1,s={},a={};for(let c in n.currentMap){let u=n.currentMap[c];if(u&&u.needsYScrolling()){i=!0;break}}for(let c of this.props.sections){let u=c.key,d=r.currentMap[u];if(d){let f=d.parentNode;s[u]=Math.floor(f.getBoundingClientRect().width-(i?e.y:0)),a[u]=Math.floor(f.getBoundingClientRect().height)}}return{forceYScrollbars:i,scrollerClientWidths:s,scrollerClientHeights:a}}}Im.addStateEquality({scrollerClientWidths:Hr,scrollerClientHeights:Hr});function qF(t,e){for(let n of t)if(n.key===e)return n;return null}class cf extends at{constructor(){super(...arguments),this.buildPublicEvent=Ce((e,n,r)=>new At(e,n,r)),this.handleEl=e=>{this.el=e,ai(this.props.elRef,e),e&&A_(e,this.props.seg)}}render(){const{props:e,context:n}=this,{options:r}=n,{seg:i}=e,{eventRange:s}=i,{ui:a}=s,c={event:this.buildPublicEvent(n,s.def,s.instance),view:n.viewApi,timeText:e.timeText,textColor:a.textColor,backgroundColor:a.backgroundColor,borderColor:a.borderColor,isDraggable:!e.disableDragging&&BL(i,n),isStartResizable:!e.disableResizing&&WL(i,n),isEndResizable:!e.disableResizing&&VL(i),isMirror:!!(e.isDragging||e.isResizing||e.isDateSelecting),isStart:!!i.isStart,isEnd:!!i.isEnd,isPast:!!e.isPast,isFuture:!!e.isFuture,isToday:!!e.isToday,isSelected:!!e.isSelected,isDragging:!!e.isDragging,isResizing:!!e.isResizing};return I(An,{elRef:this.handleEl,elTag:e.elTag,elAttrs:e.elAttrs,elClasses:[...$L(c),...i.eventRange.ui.classNames,...e.elClasses||[]],elStyle:e.elStyle,renderProps:c,generatorName:"eventContent",customGenerator:r.eventContent,defaultGenerator:e.defaultGenerator,classNameGenerator:r.eventClassNames,didMount:r.eventDidMount,willUnmount:r.eventWillUnmount},e.children)}componentDidUpdate(e){this.el&&this.props.seg!==e.seg&&A_(this.el,this.props.seg)}}class Pm extends at{render(){let{props:e,context:n}=this,{options:r}=n,{seg:i}=e,{ui:s}=i.eventRange,a=r.eventTimeFormat||e.defaultTimeFormat,c=_l(i,a,n,e.defaultDisplayEventTime,e.defaultDisplayEventEnd);return I(cf,Object.assign({},e,{elTag:"a",elStyle:{borderColor:s.borderColor,backgroundColor:s.backgroundColor},elAttrs:Dm(i,n),defaultGenerator:GF,timeText:c}),(u,d)=>I(vt,null,I(u,{elTag:"div",elClasses:["fc-event-main"],elStyle:{color:d.textColor}}),!!d.isStartResizable&&I("div",{className:"fc-event-resizer fc-event-resizer-start"}),!!d.isEndResizable&&I("div",{className:"fc-event-resizer fc-event-resizer-end"})))}}Pm.addPropsEquality({seg:Hr});function GF(t){return I("div",{className:"fc-event-main-frame"},t.timeText&&I("div",{className:"fc-event-time"},t.timeText),I("div",{className:"fc-event-title-container"},I("div",{className:"fc-event-title fc-sticky"},t.event.title||I(vt,null,""))))}const Lm=t=>I(zi.Consumer,null,e=>{let{options:n}=e,r={isAxis:t.isAxis,date:e.dateEnv.toDate(t.date),view:e.viewApi};return I(An,{elRef:t.elRef,elTag:t.elTag||"div",elAttrs:t.elAttrs,elClasses:t.elClasses,elStyle:t.elStyle,renderProps:r,generatorName:"nowIndicatorContent",customGenerator:n.nowIndicatorContent,classNameGenerator:n.nowIndicatorClassNames,didMount:n.nowIndicatorDidMount,willUnmount:n.nowIndicatorWillUnmount},t.children)}),YF=Dt({day:"numeric"});class Fm extends at{constructor(){super(...arguments),this.refineRenderProps=ed(QF)}render(){let{props:e,context:n}=this,{options:r}=n,i=this.refineRenderProps({date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,isMonthStart:e.isMonthStart||!1,showDayNumber:e.showDayNumber,extraRenderProps:e.extraRenderProps,viewApi:n.viewApi,dateEnv:n.dateEnv,monthStartFormat:r.monthStartFormat});return I(An,{elRef:e.elRef,elTag:e.elTag,elAttrs:Object.assign(Object.assign({},e.elAttrs),i.isDisabled?{}:{"data-date":Jl(e.date)}),elClasses:[...lf(i,n.theme),...e.elClasses||[]],elStyle:e.elStyle,renderProps:i,generatorName:"dayCellContent",customGenerator:r.dayCellContent,defaultGenerator:e.defaultGenerator,classNameGenerator:i.isDisabled?void 0:r.dayCellClassNames,didMount:r.dayCellDidMount,willUnmount:r.dayCellWillUnmount},e.children)}}function jm(t){return!!(t.dayCellContent||bg("dayCellContent",t))}function QF(t){let{date:e,dateEnv:n,dateProfile:r,isMonthStart:i}=t,s=Am(e,t.todayRange,null,r),a=t.showDayNumber?n.format(e,i?t.monthStartFormat:YF):"";return Object.assign(Object.assign(Object.assign({date:n.toDate(e),view:t.viewApi},s),{isMonthStart:i,dayNumberText:a}),t.extraRenderProps)}class JE extends at{render(){let{props:e}=this,{seg:n}=e;return I(cf,{elTag:"div",elClasses:["fc-bg-event"],elStyle:{backgroundColor:n.eventRange.ui.backgroundColor},defaultGenerator:KF,seg:n,timeText:"",isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,isPast:e.isPast,isFuture:e.isFuture,isToday:e.isToday,disableDragging:!0,disableResizing:!0})}}function KF(t){let{title:e}=t.event;return e&&I("div",{className:"fc-event-title"},t.event.title)}function eC(t){return I("div",{className:`fc-${t}`})}const tC=t=>I(zi.Consumer,null,e=>{let{dateEnv:n,options:r}=e,{date:i}=t,s=r.weekNumberFormat||t.defaultFormat,a=n.computeWeekNumber(i),c=n.format(i,s),u={num:a,text:c,date:i};return I(An,{elRef:t.elRef,elTag:t.elTag,elAttrs:t.elAttrs,elClasses:t.elClasses,elStyle:t.elStyle,renderProps:u,generatorName:"weekNumberContent",customGenerator:r.weekNumberContent,defaultGenerator:ZF,classNameGenerator:r.weekNumberClassNames,didMount:r.weekNumberDidMount,willUnmount:r.weekNumberWillUnmount},t.children)});function ZF(t){return t.text}const Np=10;class XF extends at{constructor(){super(...arguments),this.state={titleId:ms()},this.handleRootEl=e=>{this.rootEl=e,this.props.elRef&&ai(this.props.elRef,e)},this.handleDocumentMouseDown=e=>{const n=lE(e);this.rootEl.contains(n)||this.handleCloseClick()},this.handleDocumentKeyDown=e=>{e.key==="Escape"&&this.handleCloseClick()},this.handleCloseClick=()=>{let{onClose:e}=this.props;e&&e()}}render(){let{theme:e,options:n}=this.context,{props:r,state:i}=this,s=["fc-popover",e.getClass("popover")].concat(r.extraClassNames||[]);return MI(I("div",Object.assign({},r.extraAttrs,{id:r.id,className:s.join(" "),"aria-labelledby":i.titleId,ref:this.handleRootEl}),I("div",{className:"fc-popover-header "+e.getClass("popoverHeader")},I("span",{className:"fc-popover-title",id:i.titleId},r.title),I("span",{className:"fc-popover-close "+e.getIconClass("close"),title:n.closeHint,onClick:this.handleCloseClick})),I("div",{className:"fc-popover-body "+e.getClass("popoverContent")},r.children)),r.parentEl)}componentDidMount(){document.addEventListener("mousedown",this.handleDocumentMouseDown),document.addEventListener("keydown",this.handleDocumentKeyDown),this.updateSize()}componentWillUnmount(){document.removeEventListener("mousedown",this.handleDocumentMouseDown),document.removeEventListener("keydown",this.handleDocumentKeyDown)}updateSize(){let{isRtl:e}=this.context,{alignmentEl:n,alignGridTop:r}=this.props,{rootEl:i}=this,s=_F(n);if(s){let a=i.getBoundingClientRect(),c=r?Tn(n,".fc-scrollgrid").getBoundingClientRect().top:s.top,u=e?s.right-a.width:s.left;c=Math.max(c,Np),u=Math.min(u,document.documentElement.clientWidth-Np-a.width),u=Math.max(u,Np);let d=i.offsetParent.getBoundingClientRect();vl(i,{top:c-d.top,left:u-d.left})}}}class JF extends Br{constructor(){super(...arguments),this.handleRootEl=e=>{this.rootEl=e,e?this.context.registerInteractiveComponent(this,{el:e,useEventCenter:!1}):this.context.unregisterInteractiveComponent(this)}}render(){let{options:e,dateEnv:n}=this.context,{props:r}=this,{startDate:i,todayRange:s,dateProfile:a}=r,c=n.format(i,e.dayPopoverFormat);return I(Fm,{elRef:this.handleRootEl,date:i,dateProfile:a,todayRange:s},(u,d,f)=>I(XF,{elRef:f.ref,id:r.id,title:c,extraClassNames:["fc-more-popover"].concat(f.className||[]),extraAttrs:f,parentEl:r.parentEl,alignmentEl:r.alignmentEl,alignGridTop:r.alignGridTop,onClose:r.onClose},jm(e)&&I(u,{elTag:"div",elClasses:["fc-more-popover-misc"]}),r.children))}queryHit(e,n,r,i){let{rootEl:s,props:a}=this;return e>=0&&e<r&&n>=0&&n<i?{dateProfile:a.dateProfile,dateSpan:Object.assign({allDay:!a.forceTimed,range:{start:a.startDate,end:a.endDate}},a.extraDateSpan),dayEl:s,rect:{left:0,top:0,right:r,bottom:i},layer:1}:null}}class nC extends at{constructor(){super(...arguments),this.state={isPopoverOpen:!1,popoverId:ms()},this.handleLinkEl=e=>{this.linkEl=e,this.props.elRef&&ai(this.props.elRef,e)},this.handleClick=e=>{let{props:n,context:r}=this,{moreLinkClick:i}=r.options,s=O_(n).start;function a(c){let{def:u,instance:d,range:f}=c.eventRange;return{event:new At(r,u,d),start:r.dateEnv.toDate(f.start),end:r.dateEnv.toDate(f.end),isStart:c.isStart,isEnd:c.isEnd}}typeof i=="function"&&(i=i({date:s,allDay:!!n.allDayDate,allSegs:n.allSegs.map(a),hiddenSegs:n.hiddenSegs.map(a),jsEvent:e,view:r.viewApi})),!i||i==="popover"?this.setState({isPopoverOpen:!0}):typeof i=="string"&&r.calendarApi.zoomTo(s,i)},this.handlePopoverClose=()=>{this.setState({isPopoverOpen:!1})}}render(){let{props:e,state:n}=this;return I(zi.Consumer,null,r=>{let{viewApi:i,options:s,calendarApi:a}=r,{moreLinkText:c}=s,{moreCnt:u}=e,d=O_(e),f=typeof c=="function"?c.call(a,u):`+${u} ${c}`,p=yl(s.moreLinkHint,[u],f),m={num:u,shortText:`+${u}`,text:f,view:i};return I(vt,null,!!e.moreCnt&&I(An,{elTag:e.elTag||"a",elRef:this.handleLinkEl,elClasses:[...e.elClasses||[],"fc-more-link"],elStyle:e.elStyle,elAttrs:Object.assign(Object.assign(Object.assign({},e.elAttrs),uE(this.handleClick)),{title:p,"aria-expanded":n.isPopoverOpen,"aria-controls":n.isPopoverOpen?n.popoverId:""}),renderProps:m,generatorName:"moreLinkContent",customGenerator:s.moreLinkContent,defaultGenerator:e.defaultGenerator||e2,classNameGenerator:s.moreLinkClassNames,didMount:s.moreLinkDidMount,willUnmount:s.moreLinkWillUnmount},e.children),n.isPopoverOpen&&I(JF,{id:n.popoverId,startDate:d.start,endDate:d.end,dateProfile:e.dateProfile,todayRange:e.todayRange,extraDateSpan:e.extraDateSpan,parentEl:this.parentEl,alignmentEl:e.alignmentElRef?e.alignmentElRef.current:this.linkEl,alignGridTop:e.alignGridTop,forceTimed:e.forceTimed,onClose:this.handlePopoverClose},e.popoverContent()))})}componentDidMount(){this.updateParentEl()}componentDidUpdate(){this.updateParentEl()}updateParentEl(){this.linkEl&&(this.parentEl=Tn(this.linkEl,".fc-view-harness"))}}function e2(t){return t.text}function O_(t){if(t.allDayDate)return{start:t.allDayDate,end:Kt(t.allDayDate,1)};let{hiddenSegs:e}=t;return{start:rC(e),end:n2(e)}}function rC(t){return t.reduce(t2).eventRange.range.start}function t2(t,e){return t.eventRange.range.start<e.eventRange.range.start?t:e}function n2(t){return t.reduce(r2).eventRange.range.end}function r2(t,e){return t.eventRange.range.end>e.eventRange.range.end?t:e}class i2{constructor(){this.handlers=[]}set(e){this.currentValue=e;for(let n of this.handlers)n(e)}subscribe(e){this.handlers.push(e),this.currentValue!==void 0&&e(this.currentValue)}}class s2 extends i2{constructor(){super(...arguments),this.map=new Map}handle(e){const{map:n}=this;let r=!1;e.isActive?(n.set(e.id,e),r=!0):n.has(e.id)&&(n.delete(e.id),r=!0),r&&this.set(n)}}const a2=[],iC={code:"en",week:{dow:0,doy:4},direction:"ltr",buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day",list:"list"},weekText:"W",weekTextLong:"Week",closeHint:"Close",timeHint:"Time",eventHint:"Event",allDayText:"all-day",moreLinkText:"more",noEventsText:"No events to display"},sC=Object.assign(Object.assign({},iC),{buttonHints:{prev:"Previous $0",next:"Next $0",today(t,e){return e==="day"?"Today":`This ${t}`}},viewHint:"$0 view",navLinkHint:"Go to $0",moreLinkHint(t){return`Show ${t} more event${t===1?"":"s"}`}});function o2(t){let e=t.length>0?t[0].code:"en",n=a2.concat(t),r={en:sC};for(let i of n)r[i.code]=i;return{map:r,defaultCode:e}}function aC(t,e){return typeof t=="object"&&!Array.isArray(t)?oC(t.code,[t.code],t):l2(t,e)}function l2(t,e){let n=[].concat(t||[]),r=c2(n,e)||sC;return oC(t,n,r)}function c2(t,e){for(let n=0;n<t.length;n+=1){let r=t[n].toLocaleLowerCase().split("-");for(let i=r.length;i>0;i-=1){let s=r.slice(0,i).join("-");if(e[s])return e[s]}}return null}function oC(t,e,n){let r=gm([iC,n],["buttonText"]);delete r.code;let{week:i}=r;return delete r.week,{codeArg:t,codes:e,week:i,simpleNumberFormat:new Intl.NumberFormat(t),options:r}}function li(t){return{id:ma(),name:t.name,premiumReleaseDate:t.premiumReleaseDate?new Date(t.premiumReleaseDate):void 0,deps:t.deps||[],reducers:t.reducers||[],isLoadingFuncs:t.isLoadingFuncs||[],contextInit:[].concat(t.contextInit||[]),eventRefiners:t.eventRefiners||{},eventDefMemberAdders:t.eventDefMemberAdders||[],eventSourceRefiners:t.eventSourceRefiners||{},isDraggableTransformers:t.isDraggableTransformers||[],eventDragMutationMassagers:t.eventDragMutationMassagers||[],eventDefMutationAppliers:t.eventDefMutationAppliers||[],dateSelectionTransformers:t.dateSelectionTransformers||[],datePointTransforms:t.datePointTransforms||[],dateSpanTransforms:t.dateSpanTransforms||[],views:t.views||{},viewPropsTransformers:t.viewPropsTransformers||[],isPropsValid:t.isPropsValid||null,externalDefTransforms:t.externalDefTransforms||[],viewContainerAppends:t.viewContainerAppends||[],eventDropTransformers:t.eventDropTransformers||[],componentInteractions:t.componentInteractions||[],calendarInteractions:t.calendarInteractions||[],themeClasses:t.themeClasses||{},eventSourceDefs:t.eventSourceDefs||[],cmdFormatter:t.cmdFormatter,recurringTypes:t.recurringTypes||[],namedTimeZonedImpl:t.namedTimeZonedImpl,initialView:t.initialView||"",elementDraggingImpl:t.elementDraggingImpl,optionChangeHandlers:t.optionChangeHandlers||{},scrollGridImpl:t.scrollGridImpl||null,listenerRefiners:t.listenerRefiners||{},optionRefiners:t.optionRefiners||{},propSetHandlers:t.propSetHandlers||{}}}function u2(t,e){let n={},r={premiumReleaseDate:void 0,reducers:[],isLoadingFuncs:[],contextInit:[],eventRefiners:{},eventDefMemberAdders:[],eventSourceRefiners:{},isDraggableTransformers:[],eventDragMutationMassagers:[],eventDefMutationAppliers:[],dateSelectionTransformers:[],datePointTransforms:[],dateSpanTransforms:[],views:{},viewPropsTransformers:[],isPropsValid:null,externalDefTransforms:[],viewContainerAppends:[],eventDropTransformers:[],componentInteractions:[],calendarInteractions:[],themeClasses:{},eventSourceDefs:[],cmdFormatter:null,recurringTypes:[],namedTimeZonedImpl:null,initialView:"",elementDraggingImpl:null,optionChangeHandlers:{},scrollGridImpl:null,listenerRefiners:{},optionRefiners:{},propSetHandlers:{}};function i(s){for(let a of s){const c=a.name,u=n[c];u===void 0?(n[c]=a.id,i(a.deps),r=f2(r,a)):u!==a.id&&console.warn(`Duplicate plugin '${c}'`)}}return t&&i(t),i(e),r}function d2(){let t=[],e=[],n;return(r,i)=>((!n||!bs(r,t)||!bs(i,e))&&(n=u2(r,i)),t=r,e=i,n)}function f2(t,e){return{premiumReleaseDate:h2(t.premiumReleaseDate,e.premiumReleaseDate),reducers:t.reducers.concat(e.reducers),isLoadingFuncs:t.isLoadingFuncs.concat(e.isLoadingFuncs),contextInit:t.contextInit.concat(e.contextInit),eventRefiners:Object.assign(Object.assign({},t.eventRefiners),e.eventRefiners),eventDefMemberAdders:t.eventDefMemberAdders.concat(e.eventDefMemberAdders),eventSourceRefiners:Object.assign(Object.assign({},t.eventSourceRefiners),e.eventSourceRefiners),isDraggableTransformers:t.isDraggableTransformers.concat(e.isDraggableTransformers),eventDragMutationMassagers:t.eventDragMutationMassagers.concat(e.eventDragMutationMassagers),eventDefMutationAppliers:t.eventDefMutationAppliers.concat(e.eventDefMutationAppliers),dateSelectionTransformers:t.dateSelectionTransformers.concat(e.dateSelectionTransformers),datePointTransforms:t.datePointTransforms.concat(e.datePointTransforms),dateSpanTransforms:t.dateSpanTransforms.concat(e.dateSpanTransforms),views:Object.assign(Object.assign({},t.views),e.views),viewPropsTransformers:t.viewPropsTransformers.concat(e.viewPropsTransformers),isPropsValid:e.isPropsValid||t.isPropsValid,externalDefTransforms:t.externalDefTransforms.concat(e.externalDefTransforms),viewContainerAppends:t.viewContainerAppends.concat(e.viewContainerAppends),eventDropTransformers:t.eventDropTransformers.concat(e.eventDropTransformers),calendarInteractions:t.calendarInteractions.concat(e.calendarInteractions),componentInteractions:t.componentInteractions.concat(e.componentInteractions),themeClasses:Object.assign(Object.assign({},t.themeClasses),e.themeClasses),eventSourceDefs:t.eventSourceDefs.concat(e.eventSourceDefs),cmdFormatter:e.cmdFormatter||t.cmdFormatter,recurringTypes:t.recurringTypes.concat(e.recurringTypes),namedTimeZonedImpl:e.namedTimeZonedImpl||t.namedTimeZonedImpl,initialView:t.initialView||e.initialView,elementDraggingImpl:t.elementDraggingImpl||e.elementDraggingImpl,optionChangeHandlers:Object.assign(Object.assign({},t.optionChangeHandlers),e.optionChangeHandlers),scrollGridImpl:e.scrollGridImpl||t.scrollGridImpl,listenerRefiners:Object.assign(Object.assign({},t.listenerRefiners),e.listenerRefiners),optionRefiners:Object.assign(Object.assign({},t.optionRefiners),e.optionRefiners),propSetHandlers:Object.assign(Object.assign({},t.propSetHandlers),e.propSetHandlers)}}function h2(t,e){return t===void 0?e:e===void 0?t:new Date(Math.max(t.valueOf(),e.valueOf()))}class Ts extends ec{}Ts.prototype.classes={root:"fc-theme-standard",tableCellShaded:"fc-cell-shaded",buttonGroup:"fc-button-group",button:"fc-button fc-button-primary",buttonActive:"fc-button-active"};Ts.prototype.baseIconClass="fc-icon";Ts.prototype.iconClasses={close:"fc-icon-x",prev:"fc-icon-chevron-left",next:"fc-icon-chevron-right",prevYear:"fc-icon-chevrons-left",nextYear:"fc-icon-chevrons-right"};Ts.prototype.rtlIconClasses={prev:"fc-icon-chevron-right",next:"fc-icon-chevron-left",prevYear:"fc-icon-chevrons-right",nextYear:"fc-icon-chevrons-left"};Ts.prototype.iconOverrideOption="buttonIcons";Ts.prototype.iconOverrideCustomButtonOption="icon";Ts.prototype.iconOverridePrefix="fc-icon-";function p2(t,e){let n={},r;for(r in t)Dg(r,n,t,e);for(r in e)Dg(r,n,t,e);return n}function Dg(t,e,n,r){if(e[t])return e[t];let i=g2(t,e,n,r);return i&&(e[t]=i),i}function g2(t,e,n,r){let i=n[t],s=r[t],a=f=>i&&i[f]!==null?i[f]:s&&s[f]!==null?s[f]:null,c=a("component"),u=a("superType"),d=null;if(u){if(u===t)throw new Error("Can't have a custom view type that references itself");d=Dg(u,e,n,r)}return!c&&d&&(c=d.component),c?{type:t,component:c,defaults:Object.assign(Object.assign({},d?d.defaults:{}),i?i.rawOptions:{}),overrides:Object.assign(Object.assign({},d?d.overrides:{}),s?s.rawOptions:{})}:null}function M_(t){return Li(t,m2)}function m2(t){let e=typeof t=="function"?{component:t}:t,{component:n}=e;return e.content?n=N_(e):n&&!(n.prototype instanceof at)&&(n=N_(Object.assign(Object.assign({},e),{content:n}))),{superType:e.type,component:n,rawOptions:e}}function N_(t){return e=>I(zi.Consumer,null,n=>I(An,{elTag:"div",elClasses:bE(n.viewSpec),renderProps:Object.assign(Object.assign({},e),{nextDayThreshold:n.options.nextDayThreshold}),generatorName:void 0,customGenerator:t.content,classNameGenerator:t.classNames,didMount:t.didMount,willUnmount:t.willUnmount}))}function v2(t,e,n,r){let i=M_(t),s=M_(e.views),a=p2(i,s);return Li(a,c=>y2(c,s,e,n,r))}function y2(t,e,n,r,i){let s=t.overrides.duration||t.defaults.duration||r.duration||n.duration,a=null,c="",u="",d={};if(s&&(a=b2(s),a)){let m=yg(a);c=m.unit,m.value===1&&(u=c,d=e[c]?e[c].rawOptions:{})}let f=m=>{let v=m.buttonText||{},b=t.defaults.buttonTextKey;return b!=null&&v[b]!=null?v[b]:v[t.type]!=null?v[t.type]:v[u]!=null?v[u]:null},p=m=>{let v=m.buttonHints||{},b=t.defaults.buttonTextKey;return b!=null&&v[b]!=null?v[b]:v[t.type]!=null?v[t.type]:v[u]!=null?v[u]:null};return{type:t.type,component:t.component,duration:a,durationUnit:c,singleUnit:u,optionDefaults:t.defaults,optionOverrides:Object.assign(Object.assign({},d),t.overrides),buttonTextOverride:f(r)||f(n)||t.overrides.buttonText,buttonTextDefault:f(i)||t.defaults.buttonText||f(bl)||t.type,buttonTitleOverride:p(r)||p(n)||t.overrides.buttonHint,buttonTitleDefault:p(i)||t.defaults.buttonHint||p(bl)}}let I_={};function b2(t){let e=JSON.stringify(t),n=I_[e];return n===void 0&&(n=Ye(t),I_[e]=n),n}function _2(t,e){switch(e.type){case"CHANGE_VIEW_TYPE":t=e.viewType}return t}function S2(t,e){switch(e.type){case"CHANGE_DATE":return e.dateMarker;default:return t}}function w2(t,e,n){let r=t.initialDate;return r!=null?e.createMarker(r):n.getDateMarker()}function x2(t,e){switch(e.type){case"SET_OPTION":return Object.assign(Object.assign({},t),{[e.optionName]:e.rawOptionValue});default:return t}}function E2(t,e,n,r){let i;switch(e.type){case"CHANGE_VIEW_TYPE":return r.build(e.dateMarker||n);case"CHANGE_DATE":return r.build(e.dateMarker);case"PREV":if(i=r.buildPrev(t,n),i.isValid)return i;break;case"NEXT":if(i=r.buildNext(t,n),i.isValid)return i;break}return t}function C2(t,e,n){let r=e?e.activeRange:null;return cC({},M2(t,n),r,n)}function T2(t,e,n,r){let i=n?n.activeRange:null;switch(e.type){case"ADD_EVENT_SOURCES":return cC(t,e.sources,i,r);case"REMOVE_EVENT_SOURCE":return k2(t,e.sourceId);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return n?uC(t,i,r):t;case"FETCH_EVENT_SOURCES":return Hm(t,e.sourceIds?pE(e.sourceIds):dC(t,r),i,e.isRefetch||!1,r);case"RECEIVE_EVENTS":case"RECEIVE_EVENT_ERROR":return O2(t,e.sourceId,e.fetchId,e.fetchRange);case"REMOVE_ALL_EVENT_SOURCES":return{};default:return t}}function D2(t,e,n){let r=e?e.activeRange:null;return Hm(t,dC(t,n),r,!0,n)}function lC(t){for(let e in t)if(t[e].isFetching)return!0;return!1}function cC(t,e,n,r){let i={};for(let s of e)i[s.sourceId]=s;return n&&(i=uC(i,n,r)),Object.assign(Object.assign({},t),i)}function k2(t,e){return ca(t,n=>n.sourceId!==e)}function uC(t,e,n){return Hm(t,ca(t,r=>A2(r,e,n)),e,!1,n)}function A2(t,e,n){return fC(t,n)?!n.options.lazyFetching||!t.fetchRange||t.isFetching||e.start<t.fetchRange.start||e.end>t.fetchRange.end:!t.latestFetchId}function Hm(t,e,n,r,i){let s={};for(let a in t){let c=t[a];e[a]?s[a]=R2(c,n,r,i):s[a]=c}return s}function R2(t,e,n,r){let{options:i,calendarApi:s}=r,a=r.pluginHooks.eventSourceDefs[t.sourceDefId],c=ma();return a.fetch({eventSource:t,range:e,isRefetch:n,context:r},u=>{let{rawEvents:d}=u;i.eventSourceSuccess&&(d=i.eventSourceSuccess.call(s,d,u.response)||d),t.success&&(d=t.success.call(s,d,u.response)||d),r.dispatch({type:"RECEIVE_EVENTS",sourceId:t.sourceId,fetchId:c,fetchRange:e,rawEvents:d})},u=>{let d=!1;i.eventSourceFailure&&(i.eventSourceFailure.call(s,u),d=!0),t.failure&&(t.failure(u),d=!0),d||console.warn(u.message,u),r.dispatch({type:"RECEIVE_EVENT_ERROR",sourceId:t.sourceId,fetchId:c,fetchRange:e,error:u})}),Object.assign(Object.assign({},t),{isFetching:!0,latestFetchId:c})}function O2(t,e,n,r){let i=t[e];return i&&n===i.latestFetchId?Object.assign(Object.assign({},t),{[e]:Object.assign(Object.assign({},i),{isFetching:!1,fetchRange:r})}):t}function dC(t,e){return ca(t,n=>fC(n,e))}function M2(t,e){let n=DE(e),r=[].concat(t.eventSources||[]),i=[];t.initialEvents&&r.unshift(t.initialEvents),t.events&&r.unshift(t.events);for(let s of r){let a=TE(s,e,n);a&&i.push(a)}return i}function fC(t,e){return!e.pluginHooks.eventSourceDefs[t.sourceDefId].ignoreRange}function N2(t,e){switch(e.type){case"UNSELECT_DATES":return null;case"SELECT_DATES":return e.selection;default:return t}}function I2(t,e){switch(e.type){case"UNSELECT_EVENT":return"";case"SELECT_EVENT":return e.eventInstanceId;default:return t}}function P2(t,e){let n;switch(e.type){case"UNSET_EVENT_DRAG":return null;case"SET_EVENT_DRAG":return n=e.state,{affectedEvents:n.affectedEvents,mutatedEvents:n.mutatedEvents,isEvent:n.isEvent};default:return t}}function L2(t,e){let n;switch(e.type){case"UNSET_EVENT_RESIZE":return null;case"SET_EVENT_RESIZE":return n=e.state,{affectedEvents:n.affectedEvents,mutatedEvents:n.mutatedEvents,isEvent:n.isEvent};default:return t}}function F2(t,e,n,r,i){let s=t.headerToolbar?P_(t.headerToolbar,t,e,n,r,i):null,a=t.footerToolbar?P_(t.footerToolbar,t,e,n,r,i):null;return{header:s,footer:a}}function P_(t,e,n,r,i,s){let a={},c=[],u=!1;for(let d in t){let f=t[d],p=j2(f,e,n,r,i,s);a[d]=p.widgets,c.push(...p.viewsWithButtons),u=u||p.hasTitle}return{sectionWidgets:a,viewsWithButtons:c,hasTitle:u}}function j2(t,e,n,r,i,s){let a=e.direction==="rtl",c=e.customButtons||{},u=n.buttonText||{},d=e.buttonText||{},f=n.buttonHints||{},p=e.buttonHints||{},m=t?t.split(" "):[],v=[],b=!1;return{widgets:m.map(w=>w.split(",").map(x=>{if(x==="title")return b=!0,{buttonName:x};let C,k,R,A,M,P;if(C=c[x])R=O=>{C.click&&C.click.call(O.target,O,O.target)},(A=r.getCustomButtonIconClass(C))||(A=r.getIconClass(x,a))||(M=C.text),P=C.hint||C.text;else if(k=i[x]){v.push(x),R=()=>{s.changeView(x)},(M=k.buttonTextOverride)||(A=r.getIconClass(x,a))||(M=k.buttonTextDefault);let O=k.buttonTextOverride||k.buttonTextDefault;P=yl(k.buttonTitleOverride||k.buttonTitleDefault||e.viewHint,[O,x],O)}else if(s[x])if(R=()=>{s[x]()},(M=u[x])||(A=r.getIconClass(x,a))||(M=d[x]),x==="prevYear"||x==="nextYear"){let O=x==="prevYear"?"prev":"next";P=yl(f[O]||p[O],[d.year||"year","year"],d[x])}else P=O=>yl(f[x]||p[x],[d[O]||O,O],d[x]);return{buttonName:x,buttonClick:R,buttonIcon:A,buttonText:M,buttonHint:P}})),viewsWithButtons:v,hasTitle:b}}class H2{constructor(e,n,r){this.type=e,this.getCurrentData=n,this.dateEnv=r}get calendar(){return this.getCurrentData().calendarApi}get title(){return this.getCurrentData().viewTitle}get activeStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.start)}get activeEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.end)}get currentStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.start)}get currentEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.end)}getOption(e){return this.getCurrentData().options[e]}}let z2={ignoreRange:!0,parseMeta(t){return Array.isArray(t.events)?t.events:null},fetch(t,e){e({rawEvents:t.eventSource.meta})}};const U2=li({name:"array-event-source",eventSourceDefs:[z2]});let B2={parseMeta(t){return typeof t.events=="function"?t.events:null},fetch(t,e,n){const{dateEnv:r}=t.context,i=t.eventSource.meta;JL(i.bind(null,IE(t.range,r)),s=>e({rawEvents:s}),n)}};const W2=li({name:"func-event-source",eventSourceDefs:[B2]}),V2={method:String,extraParams:W,startParam:String,endParam:String,timeZoneParam:String};let $2={parseMeta(t){return t.url&&(t.format==="json"||!t.format)?{url:t.url,format:"json",method:(t.method||"GET").toUpperCase(),extraParams:t.extraParams,startParam:t.startParam,endParam:t.endParam,timeZoneParam:t.timeZoneParam}:null},fetch(t,e,n){const{meta:r}=t.eventSource,i=G2(r,t.range,t.context);eF(r.method,r.url,i).then(([s,a])=>{e({rawEvents:s,response:a})},n)}};const q2=li({name:"json-event-source",eventSourceRefiners:V2,eventSourceDefs:[$2]});function G2(t,e,n){let{dateEnv:r,options:i}=n,s,a,c,u,d={};return s=t.startParam,s==null&&(s=i.startParam),a=t.endParam,a==null&&(a=i.endParam),c=t.timeZoneParam,c==null&&(c=i.timeZoneParam),typeof t.extraParams=="function"?u=t.extraParams():u=t.extraParams||{},Object.assign(d,u),d[s]=r.formatIso(e.start),d[a]=r.formatIso(e.end),r.timeZone!=="local"&&(d[c]=r.timeZone),d}const Y2={daysOfWeek:W,startTime:Ye,endTime:Ye,duration:Ye,startRecur:W,endRecur:W};let Q2={parse(t,e){if(t.daysOfWeek||t.startTime||t.endTime||t.startRecur||t.endRecur){let n={daysOfWeek:t.daysOfWeek||null,startTime:t.startTime||null,endTime:t.endTime||null,startRecur:t.startRecur?e.createMarker(t.startRecur):null,endRecur:t.endRecur?e.createMarker(t.endRecur):null,dateEnv:e},r;return t.duration&&(r=t.duration),!r&&t.startTime&&t.endTime&&(r=uP(t.endTime,t.startTime)),{allDayGuess:!t.startTime&&!t.endTime,duration:r,typeData:n}}return null},expand(t,e,n){let r=Ss(e,{start:t.startRecur,end:t.endRecur});return r?Z2(t.daysOfWeek,t.startTime,t.dateEnv,n,r):[]}};const K2=li({name:"simple-recurring-event",recurringTypes:[Q2],eventRefiners:Y2});function Z2(t,e,n,r,i){let s=t?pE(t):null,a=bt(i.start),c=i.end,u=[];for(e&&(e.milliseconds<0?c=Kt(c,1):e.milliseconds>=1e3*60*60*24&&(a=Kt(a,-1)));a<c;){let d;(!s||s[a.getUTCDay()])&&(e?d=r.add(a,e):d=a,u.push(r.createMarker(n.toDate(d)))),a=Kt(a,1)}return u}const X2=li({name:"change-handler",optionChangeHandlers:{events(t,e){L_([t],e)},eventSources:L_}});function L_(t,e){let n=mm(e.getCurrentData().eventSources);if(n.length===1&&t.length===1&&Array.isArray(n[0]._raw)&&Array.isArray(t[0])){e.dispatch({type:"RESET_RAW_EVENTS",sourceId:n[0].sourceId,rawEvents:t[0]});return}let r=[];for(let i of t){let s=!1;for(let a=0;a<n.length;a+=1)if(n[a]._raw===i){n.splice(a,1),s=!0;break}s||r.push(i)}for(let i of n)e.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:i.sourceId});for(let i of r)e.calendarApi.addEventSource(i)}function J2(t,e){e.emitter.trigger("datesSet",Object.assign(Object.assign({},IE(t.activeRange,e.dateEnv)),{view:e.viewApi}))}function ej(t,e){let{emitter:n}=e;n.hasHandlers("eventsSet")&&n.trigger("eventsSet",ra(t,e))}const tj=[U2,W2,q2,K2,X2,li({name:"misc",isLoadingFuncs:[t=>lC(t.eventSources)],propSetHandlers:{dateProfile:J2,eventStore:ej}})];class nj{constructor(e,n){this.runTaskOption=e,this.drainedOption=n,this.queue=[],this.delayedRunner=new lm(this.drain.bind(this))}request(e,n){this.queue.push(e),this.delayedRunner.request(n)}pause(e){this.delayedRunner.pause(e)}resume(e,n){this.delayedRunner.resume(e,n)}drain(){let{queue:e}=this;for(;e.length;){let n=[],r;for(;r=e.shift();)this.runTask(r),n.push(r);this.drained(n)}}runTask(e){this.runTaskOption&&this.runTaskOption(e)}drained(e){this.drainedOption&&this.drainedOption(e)}}function rj(t,e,n){let r;return/^(year|month)$/.test(t.currentRangeUnit)?r=t.currentRange:r=t.activeRange,n.formatRange(r.start,r.end,Dt(e.titleFormat||ij(t)),{isEndExclusive:t.isRangeAllDay,defaultSeparator:e.titleRangeSeparator})}function ij(t){let{currentRangeUnit:e}=t;if(e==="year")return{year:"numeric"};if(e==="month")return{year:"numeric",month:"long"};let n=yd(t.currentRange.start,t.currentRange.end);return n!==null&&n>1?{year:"numeric",month:"short",day:"numeric"}:{year:"numeric",month:"long",day:"numeric"}}class F_{constructor(){this.resetListeners=new Set}handleInput(e,n){const r=this.dateEnv;if(e!==r&&(typeof n=="function"?this.nowFn=n:r||(this.nowAnchorDate=e.toDate(n?e.createMarker(n):e.createNowMarker()),this.nowAnchorQueried=Date.now()),this.dateEnv=e,r))for(const i of this.resetListeners.values())i()}getDateMarker(){return this.nowAnchorDate?this.dateEnv.timestampToMarker(this.nowAnchorDate.valueOf()+(Date.now()-this.nowAnchorQueried)):this.dateEnv.createMarker(this.nowFn())}addResetListener(e){this.resetListeners.add(e)}removeResetListener(e){this.resetListeners.delete(e)}}class sj{constructor(e){this.computeCurrentViewData=Ce(this._computeCurrentViewData),this.organizeRawLocales=Ce(o2),this.buildLocale=Ce(aC),this.buildPluginHooks=d2(),this.buildDateEnv=Ce(aj),this.buildTheme=Ce(oj),this.parseToolbars=Ce(F2),this.buildViewSpecs=Ce(v2),this.buildDateProfileGenerator=ed(lj),this.buildViewApi=Ce(cj),this.buildViewUiProps=ed(fj),this.buildEventUiBySource=Ce(uj,Hr),this.buildEventUiBases=Ce(dj),this.parseContextBusinessHours=ed(hj),this.buildTitle=Ce(rj),this.nowManager=new F_,this.emitter=new of,this.actionRunner=new nj(this._handleAction.bind(this),this.updateData.bind(this)),this.currentCalendarOptionsInput={},this.currentCalendarOptionsRefined={},this.currentViewOptionsInput={},this.currentViewOptionsRefined={},this.currentCalendarOptionsRefiners={},this.optionsForRefining=[],this.optionsForHandling=[],this.getCurrentData=()=>this.data,this.dispatch=m=>{this.actionRunner.request(m)},this.props=e,this.actionRunner.pause(),this.nowManager=new F_;let n={},r=this.computeOptionsData(e.optionOverrides,n,e.calendarApi),i=r.calendarOptions.initialView||r.pluginHooks.initialView,s=this.computeCurrentViewData(i,r,e.optionOverrides,n);e.calendarApi.currentDataManager=this,this.emitter.setThisContext(e.calendarApi),this.emitter.setOptions(s.options);let a={nowManager:this.nowManager,dateEnv:r.dateEnv,options:r.calendarOptions,pluginHooks:r.pluginHooks,calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},c=w2(r.calendarOptions,r.dateEnv,this.nowManager),u=s.dateProfileGenerator.build(c);Ni(u.activeRange,c)||(c=u.currentRange.start);for(let m of r.pluginHooks.contextInit)m(a);let d=C2(r.calendarOptions,u,a),f={dynamicOptionOverrides:n,currentViewType:i,currentDate:c,dateProfile:u,businessHours:this.parseContextBusinessHours(a),eventSources:d,eventUiBases:{},eventStore:cr(),renderableEventStore:cr(),dateSelection:null,eventSelection:"",eventDrag:null,eventResize:null,selectionConfig:this.buildViewUiProps(a).selectionConfig},p=Object.assign(Object.assign({},a),f);for(let m of r.pluginHooks.reducers)Object.assign(f,m(null,null,p));Ip(f,a)&&this.emitter.trigger("loading",!0),this.state=f,this.updateData(),this.actionRunner.resume()}resetOptions(e,n){let{props:r}=this;n===void 0?r.optionOverrides=e:(r.optionOverrides=Object.assign(Object.assign({},r.optionOverrides||{}),e),this.optionsForRefining.push(...n)),(n===void 0||n.length)&&this.actionRunner.request({type:"NOTHING"})}_handleAction(e){let{props:n,state:r,emitter:i}=this,s=x2(r.dynamicOptionOverrides,e),a=this.computeOptionsData(n.optionOverrides,s,n.calendarApi),c=_2(r.currentViewType,e),u=this.computeCurrentViewData(c,a,n.optionOverrides,s);n.calendarApi.currentDataManager=this,i.setThisContext(n.calendarApi),i.setOptions(u.options);let d={nowManager:this.nowManager,dateEnv:a.dateEnv,options:a.calendarOptions,pluginHooks:a.pluginHooks,calendarApi:n.calendarApi,dispatch:this.dispatch,emitter:i,getCurrentData:this.getCurrentData},{currentDate:f,dateProfile:p}=r;this.data&&this.data.dateProfileGenerator!==u.dateProfileGenerator&&(p=u.dateProfileGenerator.build(f)),f=S2(f,e),p=E2(p,e,f,u.dateProfileGenerator),(e.type==="PREV"||e.type==="NEXT"||!Ni(p.currentRange,f))&&(f=p.currentRange.start);let m=T2(r.eventSources,e,p,d),v=TL(r.eventStore,e,m,p,d),_=lC(m)&&!u.options.progressiveEventRendering&&r.renderableEventStore||v,{eventUiSingleBase:w,selectionConfig:x}=this.buildViewUiProps(d),C=this.buildEventUiBySource(m),k=this.buildEventUiBases(_.defs,w,C),R={dynamicOptionOverrides:s,currentViewType:c,currentDate:f,dateProfile:p,eventSources:m,eventStore:v,renderableEventStore:_,selectionConfig:x,eventUiBases:k,businessHours:this.parseContextBusinessHours(d),dateSelection:N2(r.dateSelection,e),eventSelection:I2(r.eventSelection,e),eventDrag:P2(r.eventDrag,e),eventResize:L2(r.eventResize,e)},A=Object.assign(Object.assign({},d),R);for(let O of a.pluginHooks.reducers)Object.assign(R,O(r,e,A));let M=Ip(r,d),P=Ip(R,d);!M&&P?i.trigger("loading",!0):M&&!P&&i.trigger("loading",!1),this.state=R,n.onAction&&n.onAction(e)}updateData(){let{props:e,state:n}=this,r=this.data,i=this.computeOptionsData(e.optionOverrides,n.dynamicOptionOverrides,e.calendarApi),s=this.computeCurrentViewData(n.currentViewType,i,e.optionOverrides,n.dynamicOptionOverrides),a=this.data=Object.assign(Object.assign(Object.assign({nowManager:this.nowManager,viewTitle:this.buildTitle(n.dateProfile,s.options,i.dateEnv),calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},i),s),n),c=i.pluginHooks.optionChangeHandlers,u=r&&r.calendarOptions,d=i.calendarOptions;if(u&&u!==d){u.timeZone!==d.timeZone&&(n.eventSources=a.eventSources=D2(a.eventSources,n.dateProfile,a),n.eventStore=a.eventStore=D_(a.eventStore,r.dateEnv,a.dateEnv),n.renderableEventStore=a.renderableEventStore=D_(a.renderableEventStore,r.dateEnv,a.dateEnv));for(let f in c)(this.optionsForHandling.indexOf(f)!==-1||u[f]!==d[f])&&c[f](d[f],a)}this.optionsForHandling=[],e.onData&&e.onData(a)}computeOptionsData(e,n,r){if(!this.optionsForRefining.length&&e===this.stableOptionOverrides&&n===this.stableDynamicOptionOverrides)return this.stableCalendarOptionsData;let{refinedOptions:i,pluginHooks:s,localeDefaults:a,availableLocaleData:c,extra:u}=this.processRawCalendarOptions(e,n);j_(u);let d=this.buildDateEnv(i.timeZone,i.locale,i.weekNumberCalculation,i.firstDay,i.weekText,s,c,i.defaultRangeSeparator),f=this.buildViewSpecs(s.views,this.stableOptionOverrides,this.stableDynamicOptionOverrides,a),p=this.buildTheme(i,s),m=this.parseToolbars(i,this.stableOptionOverrides,p,f,r);return this.stableCalendarOptionsData={calendarOptions:i,pluginHooks:s,dateEnv:d,viewSpecs:f,theme:p,toolbarConfig:m,localeDefaults:a,availableRawLocales:c.map}}processRawCalendarOptions(e,n){let{locales:r,locale:i}=Cp([bl,e,n]),s=this.organizeRawLocales(r),a=s.map,c=this.buildLocale(i||s.defaultCode,a).options,u=this.buildPluginHooks(e.plugins||[],tj),d=this.currentCalendarOptionsRefiners=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},S_),w_),x_),u.listenerRefiners),u.optionRefiners),f={},p=Cp([bl,c,e,n]),m={},v=this.currentCalendarOptionsInput,b=this.currentCalendarOptionsRefined,_=!1;for(let w in p)this.optionsForRefining.indexOf(w)===-1&&(p[w]===v[w]||qs[w]&&w in v&&qs[w](v[w],p[w]))?m[w]=b[w]:d[w]?(m[w]=d[w](p[w]),_=!0):f[w]=v[w];return _&&(this.currentCalendarOptionsInput=p,this.currentCalendarOptionsRefined=m,this.stableOptionOverrides=e,this.stableDynamicOptionOverrides=n),this.optionsForHandling.push(...this.optionsForRefining),this.optionsForRefining=[],{rawOptions:this.currentCalendarOptionsInput,refinedOptions:this.currentCalendarOptionsRefined,pluginHooks:u,availableLocaleData:s,localeDefaults:c,extra:f}}_computeCurrentViewData(e,n,r,i){let s=n.viewSpecs[e];if(!s)throw new Error(`viewType "${e}" is not available. Please make sure you've loaded all neccessary plugins`);let{refinedOptions:a,extra:c}=this.processRawViewOptions(s,n.pluginHooks,n.localeDefaults,r,i);j_(c),this.nowManager.handleInput(n.dateEnv,a.now);let u=this.buildDateProfileGenerator({dateProfileGeneratorClass:s.optionDefaults.dateProfileGeneratorClass,nowManager:this.nowManager,duration:s.duration,durationUnit:s.durationUnit,usesMinMaxTime:s.optionDefaults.usesMinMaxTime,dateEnv:n.dateEnv,calendarApi:this.props.calendarApi,slotMinTime:a.slotMinTime,slotMaxTime:a.slotMaxTime,showNonCurrentDates:a.showNonCurrentDates,dayCount:a.dayCount,dateAlignment:a.dateAlignment,dateIncrement:a.dateIncrement,hiddenDays:a.hiddenDays,weekends:a.weekends,validRangeInput:a.validRange,visibleRangeInput:a.visibleRange,fixedWeekCount:a.fixedWeekCount}),d=this.buildViewApi(e,this.getCurrentData,n.dateEnv);return{viewSpec:s,options:a,dateProfileGenerator:u,viewApi:d}}processRawViewOptions(e,n,r,i,s){let a=Cp([bl,e.optionDefaults,r,i,e.optionOverrides,s]),c=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},S_),w_),x_),WP),n.listenerRefiners),n.optionRefiners),u={},d=this.currentViewOptionsInput,f=this.currentViewOptionsRefined,p=!1,m={};for(let v in a)a[v]===d[v]||qs[v]&&qs[v](a[v],d[v])?u[v]=f[v]:(a[v]===this.currentCalendarOptionsInput[v]||qs[v]&&qs[v](a[v],this.currentCalendarOptionsInput[v])?v in this.currentCalendarOptionsRefined&&(u[v]=this.currentCalendarOptionsRefined[v]):c[v]?u[v]=c[v](a[v]):m[v]=a[v],p=!0);return p&&(this.currentViewOptionsInput=a,this.currentViewOptionsRefined=u),{rawOptions:this.currentViewOptionsInput,refinedOptions:this.currentViewOptionsRefined,extra:m}}}function aj(t,e,n,r,i,s,a,c){let u=aC(e||a.defaultCode,a.map);return new eL({calendarSystem:"gregory",timeZone:t,namedTimeZoneImpl:s.namedTimeZonedImpl,locale:u,weekNumberCalculation:n,firstDay:r,weekText:i,cmdFormatter:s.cmdFormatter,defaultSeparator:c})}function oj(t,e){let n=e.themeClasses[t.themeSystem]||Ts;return new n(t)}function lj(t){let e=t.dateProfileGeneratorClass||SE;return new e(t)}function cj(t,e,n){return new H2(t,e,n)}function uj(t){return Li(t,e=>e.ui)}function dj(t,e,n){let r={"":e};for(let i in t){let s=t[i];s.sourceId&&n[s.sourceId]&&(r[i]=n[s.sourceId])}return r}function fj(t){let{options:e}=t;return{eventUiSingleBase:Ed({display:e.eventDisplay,editable:e.editable,startEditable:e.eventStartEditable,durationEditable:e.eventDurationEditable,constraint:e.eventConstraint,overlap:typeof e.eventOverlap=="boolean"?e.eventOverlap:void 0,allow:e.eventAllow,backgroundColor:e.eventBackgroundColor,borderColor:e.eventBorderColor,textColor:e.eventTextColor,color:e.eventColor},t),selectionConfig:Ed({constraint:e.selectConstraint,overlap:typeof e.selectOverlap=="boolean"?e.selectOverlap:void 0,allow:e.selectAllow},t)}}function Ip(t,e){for(let n of e.pluginHooks.isLoadingFuncs)if(n(t))return!0;return!1}function hj(t){return PL(t.options.businessHours,t)}function j_(t,e){for(let n in t)console.warn(`Unknown option '${n}'`)}class pj extends at{render(){let e=this.props.widgetGroups.map(n=>this.renderWidgetGroup(n));return I("div",{className:"fc-toolbar-chunk"},...e)}renderWidgetGroup(e){let{props:n}=this,{theme:r}=this.context,i=[],s=!0;for(let a of e){let{buttonName:c,buttonClick:u,buttonText:d,buttonIcon:f,buttonHint:p}=a;if(c==="title")s=!1,i.push(I("h2",{className:"fc-toolbar-title",id:n.titleId},n.title));else{let m=c===n.activeButton,v=!n.isTodayEnabled&&c==="today"||!n.isPrevEnabled&&c==="prev"||!n.isNextEnabled&&c==="next",b=[`fc-${c}-button`,r.getClass("button")];m&&b.push(r.getClass("buttonActive")),i.push(I("button",{type:"button",title:typeof p=="function"?p(n.navUnit):p,disabled:v,"aria-pressed":m,className:b.join(" "),onClick:u},d||(f?I("span",{className:f,role:"img"}):"")))}}if(i.length>1){let a=s&&r.getClass("buttonGroup")||"";return I("div",{className:a},...i)}return i[0]}}class H_ extends at{render(){let{model:e,extraClassName:n}=this.props,r=!1,i,s,a=e.sectionWidgets,c=a.center;return a.left?(r=!0,i=a.left):i=a.start,a.right?(r=!0,s=a.right):s=a.end,I("div",{className:[n||"","fc-toolbar",r?"fc-toolbar-ltr":""].join(" ")},this.renderSection("start",i||[]),this.renderSection("center",c||[]),this.renderSection("end",s||[]))}renderSection(e,n){let{props:r}=this;return I(pj,{key:e,widgetGroups:n,title:r.title,navUnit:r.navUnit,activeButton:r.activeButton,isTodayEnabled:r.isTodayEnabled,isPrevEnabled:r.isPrevEnabled,isNextEnabled:r.isNextEnabled,titleId:r.titleId})}}class gj extends at{constructor(){super(...arguments),this.state={availableWidth:null},this.handleEl=e=>{this.el=e,ai(this.props.elRef,e),this.updateAvailableWidth()},this.handleResize=()=>{this.updateAvailableWidth()}}render(){let{props:e,state:n}=this,{aspectRatio:r}=e,i=["fc-view-harness",r||e.liquid||e.height?"fc-view-harness-active":"fc-view-harness-passive"],s="",a="";return r?n.availableWidth!==null?s=n.availableWidth/r:a=`${1/r*100}%`:s=e.height||"",I("div",{"aria-labelledby":e.labeledById,ref:this.handleEl,className:i.join(" "),style:{height:s,paddingBottom:a}},e.children)}componentDidMount(){this.context.addResizeHandler(this.handleResize)}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}updateAvailableWidth(){this.el&&this.props.aspectRatio&&this.setState({availableWidth:this.el.offsetWidth})}}class mj extends vo{constructor(e){super(e),this.handleSegClick=(n,r)=>{let{component:i}=this,{context:s}=i,a=so(r);if(a&&i.isValidSegDownEl(n.target)){let c=Tn(n.target,".fc-event-forced-url"),u=c?c.querySelector("a[href]").href:"";s.emitter.trigger("eventClick",{el:r,event:new At(i.context,a.eventRange.def,a.eventRange.instance),jsEvent:n,view:s.viewApi}),u&&!n.defaultPrevented&&(window.location.href=u)}},this.destroy=cE(e.el,"click",".fc-event",this.handleSegClick)}}class vj extends vo{constructor(e){super(e),this.handleEventElRemove=n=>{n===this.currentSegEl&&this.handleSegLeave(null,this.currentSegEl)},this.handleSegEnter=(n,r)=>{so(r)&&(this.currentSegEl=r,this.triggerEvent("eventMouseEnter",n,r))},this.handleSegLeave=(n,r)=>{this.currentSegEl&&(this.currentSegEl=null,this.triggerEvent("eventMouseLeave",n,r))},this.removeHoverListeners=QI(e.el,".fc-event",this.handleSegEnter,this.handleSegLeave)}destroy(){this.removeHoverListeners()}triggerEvent(e,n,r){let{component:i}=this,{context:s}=i,a=so(r);(!n||i.isValidSegDownEl(n.target))&&s.emitter.trigger(e,{el:r,event:new At(s,a.eventRange.def,a.eventRange.instance),jsEvent:n,view:s.viewApi})}}class yj extends va{constructor(){super(...arguments),this.buildViewContext=Ce(rL),this.buildViewPropTransformers=Ce(_j),this.buildToolbarProps=Ce(bj),this.headerRef=Ln(),this.footerRef=Ln(),this.interactionsStore={},this.state={viewLabelId:ms()},this.registerInteractiveComponent=(e,n)=>{let r=rF(e,n),a=[mj,vj].concat(this.props.pluginHooks.componentInteractions).map(c=>new c(r));this.interactionsStore[e.uid]=a,xg[e.uid]=r},this.unregisterInteractiveComponent=e=>{let n=this.interactionsStore[e.uid];if(n){for(let r of n)r.destroy();delete this.interactionsStore[e.uid]}delete xg[e.uid]},this.resizeRunner=new lm(()=>{this.props.emitter.trigger("_resize",!0),this.props.emitter.trigger("windowResize",{view:this.props.viewApi})}),this.handleWindowResize=e=>{let{options:n}=this.props;n.handleWindowResize&&e.target===window&&this.resizeRunner.request(n.windowResizeDelay)}}render(){let{props:e}=this,{toolbarConfig:n,options:r}=e,i=!1,s="",a;e.isHeightAuto||e.forPrint?s="":r.height!=null?i=!0:r.contentHeight!=null?s=r.contentHeight:a=Math.max(r.aspectRatio,.5);let c=this.buildViewContext(e.viewSpec,e.viewApi,e.options,e.dateProfileGenerator,e.dateEnv,e.nowManager,e.theme,e.pluginHooks,e.dispatch,e.getCurrentData,e.emitter,e.calendarApi,this.registerInteractiveComponent,this.unregisterInteractiveComponent),u=n.header&&n.header.hasTitle?this.state.viewLabelId:void 0;return I(zi.Provider,{value:c},I(ya,{unit:"day"},d=>{let f=this.buildToolbarProps(e.viewSpec,e.dateProfile,e.dateProfileGenerator,e.currentDate,d,e.viewTitle);return I(vt,null,n.header&&I(H_,Object.assign({ref:this.headerRef,extraClassName:"fc-header-toolbar",model:n.header,titleId:u},f)),I(gj,{liquid:i,height:s,aspectRatio:a,labeledById:u},this.renderView(e),this.buildAppendContent()),n.footer&&I(H_,Object.assign({ref:this.footerRef,extraClassName:"fc-footer-toolbar",model:n.footer,titleId:""},f)))}))}componentDidMount(){let{props:e}=this;this.calendarInteractions=e.pluginHooks.calendarInteractions.map(r=>new r(e)),window.addEventListener("resize",this.handleWindowResize);let{propSetHandlers:n}=e.pluginHooks;for(let r in n)n[r](e[r],e)}componentDidUpdate(e){let{props:n}=this,{propSetHandlers:r}=n.pluginHooks;for(let i in r)n[i]!==e[i]&&r[i](n[i],n)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),this.resizeRunner.clear();for(let e of this.calendarInteractions)e.destroy();this.props.emitter.trigger("_unmount")}buildAppendContent(){let{props:e}=this,n=e.pluginHooks.viewContainerAppends.map(r=>r(e));return I(vt,{},...n)}renderView(e){let{pluginHooks:n}=e,{viewSpec:r}=e,i={dateProfile:e.dateProfile,businessHours:e.businessHours,eventStore:e.renderableEventStore,eventUiBases:e.eventUiBases,dateSelection:e.dateSelection,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,isHeightAuto:e.isHeightAuto,forPrint:e.forPrint},s=this.buildViewPropTransformers(n.viewPropsTransformers);for(let c of s)Object.assign(i,c.transform(i,e));let a=r.component;return I(a,Object.assign({},i))}}function bj(t,e,n,r,i,s){let a=n.build(i,void 0,!1),c=n.buildPrev(e,r,!1),u=n.buildNext(e,r,!1);return{title:s,activeButton:t.type,navUnit:t.singleUnit,isTodayEnabled:a.isValid&&!Ni(e.currentRange,i),isPrevEnabled:c.isValid,isNextEnabled:u.isValid}}function _j(t){return t.map(e=>new e)}class Sj extends sF{constructor(e,n={}){super(),this.isRendering=!1,this.isRendered=!1,this.currentClassNames=[],this.customContentRenderId=0,this.handleAction=r=>{switch(r.type){case"SET_EVENT_DRAG":case"SET_EVENT_RESIZE":this.renderRunner.tryDrain()}},this.handleData=r=>{this.currentData=r,this.renderRunner.request(r.calendarOptions.rerenderDelay)},this.handleRenderRequest=()=>{if(this.isRendering){this.isRendered=!0;let{currentData:r}=this;wd(()=>{Nl(I(nF,{options:r.calendarOptions,theme:r.theme,emitter:r.emitter},(i,s,a,c)=>(this.setClassNames(i),this.setHeight(s),I(yE.Provider,{value:this.customContentRenderId},I(yj,Object.assign({isHeightAuto:a,forPrint:c},r))))),this.el)})}else this.isRendered&&(this.isRendered=!1,Nl(null,this.el),this.setClassNames([]),this.setHeight(""))},zI(e),this.el=e,this.renderRunner=new lm(this.handleRenderRequest),new sj({optionOverrides:n,calendarApi:this,onAction:this.handleAction,onData:this.handleData})}render(){let e=this.isRendering;e?this.customContentRenderId+=1:this.isRendering=!0,this.renderRunner.request(),e&&this.updateSize()}destroy(){this.isRendering&&(this.isRendering=!1,this.renderRunner.request())}updateSize(){wd(()=>{super.updateSize()})}batchRendering(e){this.renderRunner.pause("batchRendering"),e(),this.renderRunner.resume("batchRendering")}pauseRendering(){this.renderRunner.pause("pauseRendering")}resumeRendering(){this.renderRunner.resume("pauseRendering",!0)}resetOptions(e,n){this.currentDataManager.resetOptions(e,n)}setClassNames(e){if(!bs(e,this.currentClassNames)){let{classList:n}=this.el;for(let r of this.currentClassNames)n.remove(r);for(let r of e)n.add(r);this.currentClassNames=e}}setHeight(e){oE(this.el,"height",e)}}const wj=parseInt(String(Q.version).split(".")[0]),xj=wj<18;class hC extends D.Component{constructor(){super(...arguments),this.elRef=D.createRef(),this.isUpdating=!1,this.isUnmounting=!1,this.state={customRenderingMap:new Map},this.requestResize=()=>{this.isUnmounting||(this.cancelResize(),this.resizeId=requestAnimationFrame(()=>{this.doResize()}))}}render(){const e=[];for(const n of this.state.customRenderingMap.values())e.push(Q.createElement(Ej,{key:n.id,customRendering:n}));return Q.createElement("div",{ref:this.elRef},e)}componentDidMount(){this.isUnmounting=!1;const e=new s2;this.handleCustomRendering=e.handle.bind(e),this.calendar=new Sj(this.elRef.current,Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.calendar.render(),this.calendar.on("_beforeprint",()=>{Ei.flushSync(()=>{})});let n;e.subscribe(r=>{const i=Date.now(),s=!n;(xj||s||this.isUpdating||this.isUnmounting||i-n<100?pC:Ei.flushSync)(()=>{this.setState({customRenderingMap:r},()=>{n=i,s?this.doResize():this.requestResize()})})})}componentDidUpdate(){this.isUpdating=!0,this.calendar.resetOptions(Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.isUpdating=!1}componentWillUnmount(){this.isUnmounting=!0,this.cancelResize(),this.calendar.destroy()}doResize(){this.calendar.updateSize()}cancelResize(){this.resizeId!==void 0&&(cancelAnimationFrame(this.resizeId),this.resizeId=void 0)}getApi(){return this.calendar}}hC.act=pC;class Ej extends D.PureComponent{render(){const{customRendering:e}=this.props,{generatorMeta:n}=e,r=typeof n=="function"?n(e.renderProps):n;return Ei.createPortal(r,e.containerEl)}}function pC(t){t()}class Cj extends Br{constructor(){super(...arguments),this.headerElRef=Ln()}renderSimpleLayout(e,n){let{props:r,context:i}=this,s=[],a=Td(i.options);return e&&s.push({type:"header",key:"header",isSticky:a,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),s.push({type:"body",key:"body",liquid:!0,chunk:{content:n}}),I(Il,{elClasses:["fc-daygrid"],viewSpec:i.viewSpec},I(Im,{liquid:!r.isHeightAuto&&!r.forPrint,collapsibleWidth:r.forPrint,cols:[],sections:s}))}renderHScrollLayout(e,n,r,i){let s=this.context.pluginHooks.scrollGridImpl;if(!s)throw new Error("No ScrollGrid implementation");let{props:a,context:c}=this,u=!a.forPrint&&Td(c.options),d=!a.forPrint&&XE(c.options),f=[];return e&&f.push({type:"header",key:"header",isSticky:u,chunks:[{key:"main",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),f.push({type:"body",key:"body",liquid:!0,chunks:[{key:"main",content:n}]}),d&&f.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"main",content:Tg}]}),I(Il,{elClasses:["fc-daygrid"],viewSpec:c.viewSpec},I(s,{liquid:!a.isHeightAuto&&!a.forPrint,forPrint:a.forPrint,collapsibleWidth:a.forPrint,colGroups:[{cols:[{span:r,minWidth:i}]}],sections:f}))}}function nd(t,e){let n=[];for(let r=0;r<e;r+=1)n[r]=[];for(let r of t)n[r.row].push(r);return n}function Ou(t,e){let n=[];for(let r=0;r<e;r+=1)n[r]=[];for(let r of t)n[r.firstCol].push(r);return n}function z_(t,e){let n=[];if(t){for(let r=0;r<e;r+=1)n[r]={affectedInstances:t.affectedInstances,isEvent:t.isEvent,segs:[]};for(let r of t.segs)n[r.row].segs.push(r)}else for(let r=0;r<e;r+=1)n[r]=null;return n}const gC=Dt({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});function mC(t){let{display:e}=t.eventRange.ui;return e==="list-item"||e==="auto"&&!t.eventRange.def.allDay&&t.firstCol===t.lastCol&&t.isStart&&t.isEnd}class vC extends at{render(){let{props:e}=this;return I(Pm,Object.assign({},e,{elClasses:["fc-daygrid-event","fc-daygrid-block-event","fc-h-event"],defaultTimeFormat:gC,defaultDisplayEventEnd:e.defaultDisplayEventEnd,disableResizing:!e.seg.eventRange.def.allDay}))}}class yC extends at{render(){let{props:e,context:n}=this,{options:r}=n,{seg:i}=e,s=r.eventTimeFormat||gC,a=_l(i,s,n,!0,e.defaultDisplayEventEnd);return I(cf,Object.assign({},e,{elTag:"a",elClasses:["fc-daygrid-event","fc-daygrid-dot-event"],elAttrs:Dm(e.seg,n),defaultGenerator:Tj,timeText:a,isResizing:!1,isDateSelecting:!1}))}}function Tj(t){return I(vt,null,I("div",{className:"fc-daygrid-event-dot",style:{borderColor:t.borderColor||t.backgroundColor}}),t.timeText&&I("div",{className:"fc-event-time"},t.timeText),I("div",{className:"fc-event-title"},t.event.title||I(vt,null,"")))}class Dj extends at{constructor(){super(...arguments),this.compileSegs=Ce(kj)}render(){let{props:e}=this,{allSegs:n,invisibleSegs:r}=this.compileSegs(e.singlePlacements);return I(nC,{elClasses:["fc-daygrid-more-link"],dateProfile:e.dateProfile,todayRange:e.todayRange,allDayDate:e.allDayDate,moreCnt:e.moreCnt,allSegs:n,hiddenSegs:r,alignmentElRef:e.alignmentElRef,alignGridTop:e.alignGridTop,extraDateSpan:e.extraDateSpan,popoverContent:()=>{let i=(e.eventDrag?e.eventDrag.affectedInstances:null)||(e.eventResize?e.eventResize.affectedInstances:null)||{};return I(vt,null,n.map(s=>{let a=s.eventRange.instance.instanceId;return I("div",{className:"fc-daygrid-event-harness",key:a,style:{visibility:i[a]?"hidden":""}},mC(s)?I(yC,Object.assign({seg:s,isDragging:!1,isSelected:a===e.eventSelection,defaultDisplayEventEnd:!1},Ii(s,e.todayRange))):I(vC,Object.assign({seg:s,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:a===e.eventSelection,defaultDisplayEventEnd:!1},Ii(s,e.todayRange))))}))}})}}function kj(t){let e=[],n=[];for(let r of t)e.push(r.seg),r.isVisible||n.push(r.seg);return{allSegs:e,invisibleSegs:n}}const Aj=Dt({week:"narrow"});class Rj extends Br{constructor(){super(...arguments),this.rootElRef=Ln(),this.state={dayNumberId:ms()},this.handleRootEl=e=>{ai(this.rootElRef,e),ai(this.props.elRef,e)}}render(){let{context:e,props:n,state:r,rootElRef:i}=this,{options:s,dateEnv:a}=e,{date:c,dateProfile:u}=n;const d=n.showDayNumber&&Mj(c,u.currentRange,a);return I(Fm,{elTag:"td",elRef:this.handleRootEl,elClasses:["fc-daygrid-day",...n.extraClassNames||[]],elAttrs:Object.assign(Object.assign(Object.assign({},n.extraDataAttrs),n.showDayNumber?{"aria-labelledby":r.dayNumberId}:{}),{role:"gridcell"}),defaultGenerator:Oj,date:c,dateProfile:u,todayRange:n.todayRange,showDayNumber:n.showDayNumber,isMonthStart:d,extraRenderProps:n.extraRenderProps},(f,p)=>I("div",{ref:n.innerElRef,className:"fc-daygrid-day-frame fc-scrollgrid-sync-inner",style:{minHeight:n.minHeight}},n.showWeekNumber&&I(tC,{elTag:"a",elClasses:["fc-daygrid-week-number"],elAttrs:ao(e,c,"week"),date:c,defaultFormat:Aj}),!p.isDisabled&&(n.showDayNumber||jm(s)||n.forceDayTop)?I("div",{className:"fc-daygrid-day-top"},I(f,{elTag:"a",elClasses:["fc-daygrid-day-number",d&&"fc-daygrid-month-start"],elAttrs:Object.assign(Object.assign({},ao(e,c)),{id:r.dayNumberId})})):n.showDayNumber?I("div",{className:"fc-daygrid-day-top",style:{visibility:"hidden"}},I("a",{className:"fc-daygrid-day-number"},"")):void 0,I("div",{className:"fc-daygrid-day-events",ref:n.fgContentElRef},n.fgContent,I("div",{className:"fc-daygrid-day-bottom",style:{marginTop:n.moreMarginTop}},I(Dj,{allDayDate:c,singlePlacements:n.singlePlacements,moreCnt:n.moreCnt,alignmentElRef:i,alignGridTop:!n.showDayNumber,extraDateSpan:n.extraDateSpan,dateProfile:n.dateProfile,eventSelection:n.eventSelection,eventDrag:n.eventDrag,eventResize:n.eventResize,todayRange:n.todayRange}))),I("div",{className:"fc-daygrid-day-bg"},n.bgContent)))}}function Oj(t){return t.dayNumberText||I(vt,null,"")}function Mj(t,e,n){const{start:r,end:i}=e,s=_s(i,-1),a=n.getYear(r),c=n.getMonth(r),u=n.getYear(s),d=n.getMonth(s);return!(a===u&&c===d)&&(t.valueOf()===r.valueOf()||n.getDay(t)===1&&t.valueOf()<i.valueOf())}function bC(t){return t.eventRange.instance.instanceId+":"+t.firstCol}function _C(t){return bC(t)+":"+t.lastCol}function Nj(t,e,n,r,i,s,a){let c=new Lj(x=>{let C=t[x.index].eventRange.instance.instanceId+":"+x.span.start+":"+(x.span.end-1);return i[C]||1});c.allowReslicing=!0,c.strictOrder=r,e===!0||n===!0?(c.maxCoord=s,c.hiddenConsumes=!0):typeof e=="number"?c.maxStackCnt=e:typeof n=="number"&&(c.maxStackCnt=n,c.hiddenConsumes=!0);let u=[],d=[];for(let x=0;x<t.length;x+=1){let C=t[x],k=_C(C);i[k]!=null?u.push({index:x,span:{start:C.firstCol,end:C.lastCol+1}}):d.push(C)}let f=c.addSegs(u),p=c.toRects(),{singleColPlacements:m,multiColPlacements:v,leftoverMargins:b}=Ij(p,t,a),_=[],w=[];for(let x of d){v[x.firstCol].push({seg:x,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let C=x.firstCol;C<=x.lastCol;C+=1)m[C].push({seg:to(x,C,C+1,a),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let x=0;x<a.length;x+=1)_.push(0);for(let x of f){let C=t[x.index],k=x.span;v[k.start].push({seg:to(C,k.start,k.end,a),isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let R=k.start;R<k.end;R+=1)_[R]+=1,m[R].push({seg:to(C,R,R+1,a),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let x=0;x<a.length;x+=1)w.push(b[x]);return{singleColPlacements:m,multiColPlacements:v,moreCnts:_,moreMarginTops:w}}function Ij(t,e,n){let r=Pj(t,n.length),i=[],s=[],a=[];for(let c=0;c<n.length;c+=1){let u=r[c],d=[],f=0,p=0;for(let v of u){let b=e[v.index];d.push({seg:to(b,c,c+1,n),isVisible:!0,isAbsolute:!1,absoluteTop:v.levelCoord,marginTop:v.levelCoord-f}),f=v.levelCoord+v.thickness}let m=[];f=0,p=0;for(let v of u){let b=e[v.index],_=v.span.end-v.span.start>1,w=v.span.start===c;p+=v.levelCoord-f,f=v.levelCoord+v.thickness,_?(p+=v.thickness,w&&m.push({seg:to(b,v.span.start,v.span.end,n),isVisible:!0,isAbsolute:!0,absoluteTop:v.levelCoord,marginTop:0})):w&&(m.push({seg:to(b,v.span.start,v.span.end,n),isVisible:!0,isAbsolute:!1,absoluteTop:v.levelCoord,marginTop:p}),p=0)}i.push(d),s.push(m),a.push(p)}return{singleColPlacements:i,multiColPlacements:s,leftoverMargins:a}}function Pj(t,e){let n=[];for(let r=0;r<e;r+=1)n.push([]);for(let r of t)for(let i=r.span.start;i<r.span.end;i+=1)n[i].push(r);return n}function to(t,e,n,r){if(t.firstCol===e&&t.lastCol===n-1)return t;let i=t.eventRange,s=i.range,a=Ss(s,{start:r[e].date,end:Kt(r[n-1].date,1)});return Object.assign(Object.assign({},t),{firstCol:e,lastCol:n-1,eventRange:{def:i.def,ui:Object.assign(Object.assign({},i.ui),{durationEditable:!1}),instance:i.instance,range:a},isStart:t.isStart&&a.start.valueOf()===s.start.valueOf(),isEnd:t.isEnd&&a.end.valueOf()===s.end.valueOf()})}class Lj extends zE{constructor(){super(...arguments),this.hiddenConsumes=!1,this.forceHidden={}}addSegs(e){const n=super.addSegs(e),{entriesByLevel:r}=this,i=s=>!this.forceHidden[ia(s)];for(let s=0;s<r.length;s+=1)r[s]=r[s].filter(i);return n}handleInvalidInsertion(e,n,r){const{entriesByLevel:i,forceHidden:s}=this,{touchingEntry:a,touchingLevel:c,touchingLateral:u}=e;if(this.hiddenConsumes&&a){const d=ia(a);if(!s[d])if(this.allowReslicing){const f=Object.assign(Object.assign({},a),{span:Mm(a.span,n.span)}),p=ia(f);s[p]=!0,i[c][u]=f,r.push(f),this.splitEntry(a,n,r)}else s[d]=!0,r.push(a)}super.handleInvalidInsertion(e,n,r)}}class SC extends Br{constructor(){super(...arguments),this.cellElRefs=new ki,this.frameElRefs=new ki,this.fgElRefs=new ki,this.segHarnessRefs=new ki,this.rootElRef=Ln(),this.state={framePositions:null,maxContentHeight:null,segHeights:{}},this.handleResize=e=>{e&&this.updateSizing(!0)}}render(){let{props:e,state:n,context:r}=this,{options:i}=r,s=e.cells.length,a=Ou(e.businessHourSegs,s),c=Ou(e.bgEventSegs,s),u=Ou(this.getHighlightSegs(),s),d=Ou(this.getMirrorSegs(),s),{singleColPlacements:f,multiColPlacements:p,moreCnts:m,moreMarginTops:v}=Nj(Tm(e.fgEventSegs,i.eventOrder),e.dayMaxEvents,e.dayMaxEventRows,i.eventOrderStrict,n.segHeights,n.maxContentHeight,e.cells),b=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{};return I("tr",{ref:this.rootElRef,role:"row"},e.renderIntro&&e.renderIntro(),e.cells.map((_,w)=>{let x=this.renderFgSegs(w,e.forPrint?f[w]:p[w],e.todayRange,b),C=this.renderFgSegs(w,Fj(d[w],p),e.todayRange,{},!!e.eventDrag,!!e.eventResize,!1);return I(Rj,{key:_.key,elRef:this.cellElRefs.createRef(_.key),innerElRef:this.frameElRefs.createRef(_.key),dateProfile:e.dateProfile,date:_.date,showDayNumber:e.showDayNumbers,showWeekNumber:e.showWeekNumbers&&w===0,forceDayTop:e.showWeekNumbers,todayRange:e.todayRange,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,extraRenderProps:_.extraRenderProps,extraDataAttrs:_.extraDataAttrs,extraClassNames:_.extraClassNames,extraDateSpan:_.extraDateSpan,moreCnt:m[w],moreMarginTop:v[w],singlePlacements:f[w],fgContentElRef:this.fgElRefs.createRef(_.key),fgContent:I(vt,null,I(vt,null,x),I(vt,null,C)),bgContent:I(vt,null,this.renderFillSegs(u[w],"highlight"),this.renderFillSegs(a[w],"non-business"),this.renderFillSegs(c[w],"bg-event")),minHeight:e.cellMinHeight})}))}componentDidMount(){this.updateSizing(!0),this.context.addResizeHandler(this.handleResize)}componentDidUpdate(e,n){let r=this.props;this.updateSizing(!Hr(e,r))}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}getHighlightSegs(){let{props:e}=this;return e.eventDrag&&e.eventDrag.segs.length?e.eventDrag.segs:e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:e.dateSelectionSegs}getMirrorSegs(){let{props:e}=this;return e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:[]}renderFgSegs(e,n,r,i,s,a,c){let{context:u}=this,{eventSelection:d}=this.props,{framePositions:f}=this.state,p=this.props.cells.length===1,m=s||a||c,v=[];if(f)for(let b of n){let{seg:_}=b,{instanceId:w}=_.eventRange.instance,x=b.isVisible&&!i[w],C=b.isAbsolute,k="",R="";C&&(u.isRtl?(R=0,k=f.lefts[_.lastCol]-f.lefts[_.firstCol]):(k=0,R=f.rights[_.firstCol]-f.rights[_.lastCol])),v.push(I("div",{className:"fc-daygrid-event-harness"+(C?" fc-daygrid-event-harness-abs":""),key:bC(_),ref:m?null:this.segHarnessRefs.createRef(_C(_)),style:{visibility:x?"":"hidden",marginTop:C?"":b.marginTop,top:C?b.absoluteTop:"",left:k,right:R}},mC(_)?I(yC,Object.assign({seg:_,isDragging:s,isSelected:w===d,defaultDisplayEventEnd:p},Ii(_,r))):I(vC,Object.assign({seg:_,isDragging:s,isResizing:a,isDateSelecting:c,isSelected:w===d,defaultDisplayEventEnd:p},Ii(_,r)))))}return v}renderFillSegs(e,n){let{isRtl:r}=this.context,{todayRange:i}=this.props,{framePositions:s}=this.state,a=[];if(s)for(let c of e){let u=r?{right:0,left:s.lefts[c.lastCol]-s.lefts[c.firstCol]}:{left:0,right:s.rights[c.firstCol]-s.rights[c.lastCol]};a.push(I("div",{key:NE(c.eventRange),className:"fc-daygrid-bg-harness",style:u},n==="bg-event"?I(JE,Object.assign({seg:c},Ii(c,i))):eC(n)))}return I(vt,{},...a)}updateSizing(e){let{props:n,state:r,frameElRefs:i}=this;if(!n.forPrint&&n.clientWidth!==null){if(e){let u=n.cells.map(d=>i.currentMap[d.key]);if(u.length){let d=this.rootElRef.current,f=new oo(d,u,!0,!1);(!r.framePositions||!r.framePositions.similarTo(f))&&this.setState({framePositions:new oo(d,u,!0,!1)})}}const s=this.state.segHeights,a=this.querySegHeights(),c=n.dayMaxEvents===!0||n.dayMaxEventRows===!0;this.safeSetState({segHeights:Object.assign(Object.assign({},s),a),maxContentHeight:c?this.computeMaxContentHeight():null})}}querySegHeights(){let e=this.segHarnessRefs.currentMap,n={};for(let r in e){let i=Math.round(e[r].getBoundingClientRect().height);n[r]=Math.max(n[r]||0,i)}return n}computeMaxContentHeight(){let e=this.props.cells[0].key,n=this.cellElRefs.currentMap[e],r=this.fgElRefs.currentMap[e];return n.getBoundingClientRect().bottom-r.getBoundingClientRect().top}getCellEls(){let e=this.cellElRefs.currentMap;return this.props.cells.map(n=>e[n.key])}}SC.addStateEquality({segHeights:Hr});function Fj(t,e){if(!t.length)return[];let n=jj(e);return t.map(r=>({seg:r,isVisible:!0,isAbsolute:!0,absoluteTop:n[r.eventRange.instance.instanceId],marginTop:0}))}function jj(t){let e={};for(let n of t)for(let r of n)e[r.seg.eventRange.instance.instanceId]=r.absoluteTop;return e}class Hj extends Br{constructor(){super(...arguments),this.splitBusinessHourSegs=Ce(nd),this.splitBgEventSegs=Ce(zj),this.splitFgEventSegs=Ce(nd),this.splitDateSelectionSegs=Ce(nd),this.splitEventDrag=Ce(z_),this.splitEventResize=Ce(z_),this.rowRefs=new ki}render(){let{props:e,context:n}=this,r=e.cells.length,i=this.splitBusinessHourSegs(e.businessHourSegs,r),s=this.splitBgEventSegs(e.bgEventSegs,r),a=this.splitFgEventSegs(e.fgEventSegs,r),c=this.splitDateSelectionSegs(e.dateSelectionSegs,r),u=this.splitEventDrag(e.eventDrag,r),d=this.splitEventResize(e.eventResize,r),f=r>=7&&e.clientWidth?e.clientWidth/n.options.aspectRatio/6:null;return I(ya,{unit:"day"},(p,m)=>I(vt,null,e.cells.map((v,b)=>I(SC,{ref:this.rowRefs.createRef(b),key:v.length?v[0].date.toISOString():b,showDayNumbers:r>1,showWeekNumbers:e.showWeekNumbers,todayRange:m,dateProfile:e.dateProfile,cells:v,renderIntro:e.renderRowIntro,businessHourSegs:i[b],eventSelection:e.eventSelection,bgEventSegs:s[b],fgEventSegs:a[b],dateSelectionSegs:c[b],eventDrag:u[b],eventResize:d[b],dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,clientWidth:e.clientWidth,clientHeight:e.clientHeight,cellMinHeight:f,forPrint:e.forPrint}))))}componentDidMount(){this.registerInteractiveComponent()}componentDidUpdate(){this.registerInteractiveComponent()}registerInteractiveComponent(){if(!this.rootEl){const e=this.rowRefs.currentMap[0].getCellEls()[0],n=e?e.closest(".fc-daygrid-body"):null;n&&(this.rootEl=n,this.context.registerInteractiveComponent(this,{el:n,isHitComboAllowed:this.props.isHitComboAllowed}))}}componentWillUnmount(){this.rootEl&&(this.context.unregisterInteractiveComponent(this),this.rootEl=null)}prepareHits(){this.rowPositions=new oo(this.rootEl,this.rowRefs.collect().map(e=>e.getCellEls()[0]),!1,!0),this.colPositions=new oo(this.rootEl,this.rowRefs.currentMap[0].getCellEls(),!0,!1)}queryHit(e,n){let{colPositions:r,rowPositions:i}=this,s=r.leftToIndex(e),a=i.topToIndex(n);if(a!=null&&s!=null){let c=this.props.cells[a][s];return{dateProfile:this.props.dateProfile,dateSpan:Object.assign({range:this.getCellRange(a,s),allDay:!0},c.extraDateSpan),dayEl:this.getCellEl(a,s),rect:{left:r.lefts[s],right:r.rights[s],top:i.tops[a],bottom:i.bottoms[a]},layer:0}}return null}getCellEl(e,n){return this.rowRefs.currentMap[e].getCellEls()[n]}getCellRange(e,n){let r=this.props.cells[e][n].date,i=Kt(r,1);return{start:r,end:i}}}function zj(t,e){return nd(t.filter(Uj),e)}function Uj(t){return t.eventRange.def.allDay}class Bj extends Br{constructor(){super(...arguments),this.elRef=Ln(),this.needsScrollReset=!1}render(){let{props:e}=this,{dayMaxEventRows:n,dayMaxEvents:r,expandRows:i}=e,s=r===!0||n===!0;s&&!i&&(s=!1,n=null,r=null);let a=["fc-daygrid-body",s?"fc-daygrid-body-balanced":"fc-daygrid-body-unbalanced",i?"":"fc-daygrid-body-natural"];return I("div",{ref:this.elRef,className:a.join(" "),style:{width:e.clientWidth,minWidth:e.tableMinWidth}},I("table",{role:"presentation",className:"fc-scrollgrid-sync-table",style:{width:e.clientWidth,minWidth:e.tableMinWidth,height:i?e.clientHeight:""}},e.colGroupNode,I("tbody",{role:"presentation"},I(Hj,{dateProfile:e.dateProfile,cells:e.cells,renderRowIntro:e.renderRowIntro,showWeekNumbers:e.showWeekNumbers,clientWidth:e.clientWidth,clientHeight:e.clientHeight,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,dayMaxEvents:r,dayMaxEventRows:n,forPrint:e.forPrint,isHitComboAllowed:e.isHitComboAllowed}))))}componentDidMount(){this.requestScrollReset()}componentDidUpdate(e){e.dateProfile!==this.props.dateProfile?this.requestScrollReset():this.flushScrollReset()}requestScrollReset(){this.needsScrollReset=!0,this.flushScrollReset()}flushScrollReset(){if(this.needsScrollReset&&this.props.clientWidth){const e=Wj(this.elRef.current,this.props.dateProfile);if(e){const n=e.closest(".fc-daygrid-body"),r=n.closest(".fc-scroller"),i=e.getBoundingClientRect().top-n.getBoundingClientRect().top;r.scrollTop=i?i+1:0}this.needsScrollReset=!1}}}function Wj(t,e){let n;return e.currentRangeUnit.match(/year|month/)&&(n=t.querySelector(`[data-date="${TP(e.currentDate)}-01"]`)),n||(n=t.querySelector(`[data-date="${Jl(e.currentDate)}"]`)),n}class Vj extends qE{constructor(){super(...arguments),this.forceDayIfListItem=!0}sliceRange(e,n){return n.sliceRange(e)}}class wC extends Br{constructor(){super(...arguments),this.slicer=new Vj,this.tableRef=Ln()}render(){let{props:e,context:n}=this;return I(Bj,Object.assign({ref:this.tableRef},this.slicer.sliceProps(e,e.dateProfile,e.nextDayThreshold,n,e.dayTableModel),{dateProfile:e.dateProfile,cells:e.dayTableModel.cells,colGroupNode:e.colGroupNode,tableMinWidth:e.tableMinWidth,renderRowIntro:e.renderRowIntro,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.showWeekNumbers,expandRows:e.expandRows,headerAlignElRef:e.headerAlignElRef,clientWidth:e.clientWidth,clientHeight:e.clientHeight,forPrint:e.forPrint}))}}class $j extends Cj{constructor(){super(...arguments),this.buildDayTableModel=Ce(qj),this.headerRef=Ln(),this.tableRef=Ln()}render(){let{options:e,dateProfileGenerator:n}=this.context,{props:r}=this,i=this.buildDayTableModel(r.dateProfile,n),s=e.dayHeaders&&I(WE,{ref:this.headerRef,dateProfile:r.dateProfile,dates:i.headerDates,datesRepDistinctDays:i.rowCnt===1}),a=c=>I(wC,{ref:this.tableRef,dateProfile:r.dateProfile,dayTableModel:i,businessHours:r.businessHours,dateSelection:r.dateSelection,eventStore:r.eventStore,eventUiBases:r.eventUiBases,eventSelection:r.eventSelection,eventDrag:r.eventDrag,eventResize:r.eventResize,nextDayThreshold:e.nextDayThreshold,colGroupNode:c.tableColGroupNode,tableMinWidth:c.tableMinWidth,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.weekNumbers,expandRows:!r.isHeightAuto,headerAlignElRef:this.headerElRef,clientWidth:c.clientWidth,clientHeight:c.clientHeight,forPrint:r.forPrint});return e.dayMinWidth?this.renderHScrollLayout(s,a,i.colCnt,e.dayMinWidth):this.renderSimpleLayout(s,a)}}function qj(t,e){let n=new VE(t.renderRange,e);return new $E(n,/year|month|week/.test(t.currentRangeUnit))}class Gj extends SE{buildRenderRange(e,n,r){let i=super.buildRenderRange(e,n,r),{props:s}=this;return Yj({currentRange:i,snapToWeek:/^(year|month)$/.test(n),fixedWeekCount:s.fixedWeekCount,dateEnv:s.dateEnv})}}function Yj(t){let{dateEnv:e,currentRange:n}=t,{start:r,end:i}=n,s;if(t.snapToWeek&&(r=e.startOfWeek(r),s=e.startOfWeek(i),s.valueOf()!==i.valueOf()&&(i=m_(s,1))),t.fixedWeekCount){let a=e.startOfWeek(e.startOfMonth(Kt(n.end,-1))),c=Math.ceil(gP(a,i));i=m_(i,6-c)}return{start:r,end:i}}var Qj=':root{--fc-daygrid-event-dot-width:8px}.fc-daygrid-day-events:after,.fc-daygrid-day-events:before,.fc-daygrid-day-frame:after,.fc-daygrid-day-frame:before,.fc-daygrid-event-harness:after,.fc-daygrid-event-harness:before{clear:both;content:"";display:table}.fc .fc-daygrid-body{position:relative;z-index:1}.fc .fc-daygrid-day.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-daygrid-day-frame{min-height:100%;position:relative}.fc .fc-daygrid-day-top{display:flex;flex-direction:row-reverse}.fc .fc-day-other .fc-daygrid-day-top{opacity:.3}.fc .fc-daygrid-day-number{padding:4px;position:relative;z-index:4}.fc .fc-daygrid-month-start{font-size:1.1em;font-weight:700}.fc .fc-daygrid-day-events{margin-top:1px}.fc .fc-daygrid-body-balanced .fc-daygrid-day-events{left:0;position:absolute;right:0}.fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events{min-height:2em;position:relative}.fc .fc-daygrid-body-natural .fc-daygrid-day-events{margin-bottom:1em}.fc .fc-daygrid-event-harness{position:relative}.fc .fc-daygrid-event-harness-abs{left:0;position:absolute;right:0;top:0}.fc .fc-daygrid-bg-harness{bottom:0;position:absolute;top:0}.fc .fc-daygrid-day-bg .fc-non-business{z-index:1}.fc .fc-daygrid-day-bg .fc-bg-event{z-index:2}.fc .fc-daygrid-day-bg .fc-highlight{z-index:3}.fc .fc-daygrid-event{margin-top:1px;z-index:6}.fc .fc-daygrid-event.fc-event-mirror{z-index:7}.fc .fc-daygrid-day-bottom{font-size:.85em;margin:0 2px}.fc .fc-daygrid-day-bottom:after,.fc .fc-daygrid-day-bottom:before{clear:both;content:"";display:table}.fc .fc-daygrid-more-link{border-radius:3px;cursor:pointer;line-height:1;margin-top:1px;max-width:100%;overflow:hidden;padding:2px;position:relative;white-space:nowrap;z-index:4}.fc .fc-daygrid-more-link:hover{background-color:rgba(0,0,0,.1)}.fc .fc-daygrid-week-number{background-color:var(--fc-neutral-bg-color);color:var(--fc-neutral-text-color);min-width:1.5em;padding:2px;position:absolute;text-align:center;top:0;z-index:5}.fc .fc-more-popover .fc-popover-body{min-width:220px;padding:10px}.fc-direction-ltr .fc-daygrid-event.fc-event-start,.fc-direction-rtl .fc-daygrid-event.fc-event-end{margin-left:2px}.fc-direction-ltr .fc-daygrid-event.fc-event-end,.fc-direction-rtl .fc-daygrid-event.fc-event-start{margin-right:2px}.fc-direction-ltr .fc-daygrid-more-link{float:left}.fc-direction-ltr .fc-daygrid-week-number{border-radius:0 0 3px 0;left:0}.fc-direction-rtl .fc-daygrid-more-link{float:right}.fc-direction-rtl .fc-daygrid-week-number{border-radius:0 0 0 3px;right:0}.fc-liquid-hack .fc-daygrid-day-frame{position:static}.fc-daygrid-event{border-radius:3px;font-size:var(--fc-small-font-size);position:relative;white-space:nowrap}.fc-daygrid-block-event .fc-event-time{font-weight:700}.fc-daygrid-block-event .fc-event-time,.fc-daygrid-block-event .fc-event-title{padding:1px}.fc-daygrid-dot-event{align-items:center;display:flex;padding:2px 0}.fc-daygrid-dot-event .fc-event-title{flex-grow:1;flex-shrink:1;font-weight:700;min-width:0;overflow:hidden}.fc-daygrid-dot-event.fc-event-mirror,.fc-daygrid-dot-event:hover{background:rgba(0,0,0,.1)}.fc-daygrid-dot-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-daygrid-event-dot{border:calc(var(--fc-daygrid-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-daygrid-event-dot-width)/2);box-sizing:content-box;height:0;margin:0 4px;width:0}.fc-direction-ltr .fc-daygrid-event .fc-event-time{margin-right:3px}.fc-direction-rtl .fc-daygrid-event .fc-event-time{margin-left:3px}';nf(Qj);var Kj=li({name:"@fullcalendar/daygrid",initialView:"dayGridMonth",views:{dayGrid:{component:$j,dateProfileGeneratorClass:Gj},dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},fixedWeekCount:!0},dayGridYear:{type:"dayGrid",duration:{years:1}}}});class Zj extends uF{getKeyInfo(){return{allDay:{},timed:{}}}getKeysForDateSpan(e){return e.allDay?["allDay"]:["timed"]}getKeysForEventDef(e){return e.allDay?zL(e)?["timed","allDay"]:["allDay"]:["timed"]}}const Xj=Dt({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"short"});function xC(t){let e=["fc-timegrid-slot","fc-timegrid-slot-label",t.isLabeled?"fc-scrollgrid-shrink":"fc-timegrid-slot-minor"];return I(zi.Consumer,null,n=>{if(!t.isLabeled)return I("td",{className:e.join(" "),"data-time":t.isoTimeStr});let{dateEnv:r,options:i,viewApi:s}=n,a=i.slotLabelFormat==null?Xj:Array.isArray(i.slotLabelFormat)?Dt(i.slotLabelFormat[0]):Dt(i.slotLabelFormat),c={level:0,time:t.time,date:r.toDate(t.date),view:s,text:r.format(t.date,a)};return I(An,{elTag:"td",elClasses:e,elAttrs:{"data-time":t.isoTimeStr},renderProps:c,generatorName:"slotLabelContent",customGenerator:i.slotLabelContent,defaultGenerator:Jj,classNameGenerator:i.slotLabelClassNames,didMount:i.slotLabelDidMount,willUnmount:i.slotLabelWillUnmount},u=>I("div",{className:"fc-timegrid-slot-label-frame fc-scrollgrid-shrink-frame"},I(u,{elTag:"div",elClasses:["fc-timegrid-slot-label-cushion","fc-scrollgrid-shrink-cushion"]})))})}function Jj(t){return t.text}class eH extends at{render(){return this.props.slatMetas.map(e=>I("tr",{key:e.key},I(xC,Object.assign({},e))))}}const tH=Dt({week:"short"}),nH=5;class rH extends Br{constructor(){super(...arguments),this.allDaySplitter=new Zj,this.headerElRef=Ln(),this.rootElRef=Ln(),this.scrollerElRef=Ln(),this.state={slatCoords:null},this.handleScrollTopRequest=e=>{let n=this.scrollerElRef.current;n&&(n.scrollTop=e)},this.renderHeadAxis=(e,n="")=>{let{options:r}=this.context,{dateProfile:i}=this.props,s=i.renderRange,c=Cs(s.start,s.end)===1?ao(this.context,s.start,"week"):{};return r.weekNumbers&&e==="day"?I(tC,{elTag:"th",elClasses:["fc-timegrid-axis","fc-scrollgrid-shrink"],elAttrs:{"aria-hidden":!0},date:s.start,defaultFormat:tH},u=>I("div",{className:["fc-timegrid-axis-frame","fc-scrollgrid-shrink-frame","fc-timegrid-axis-frame-liquid"].join(" "),style:{height:n}},I(u,{elTag:"a",elClasses:["fc-timegrid-axis-cushion","fc-scrollgrid-shrink-cushion","fc-scrollgrid-sync-inner"],elAttrs:c}))):I("th",{"aria-hidden":!0,className:"fc-timegrid-axis"},I("div",{className:"fc-timegrid-axis-frame",style:{height:n}}))},this.renderTableRowAxis=e=>{let{options:n,viewApi:r}=this.context,i={text:n.allDayText,view:r};return I(An,{elTag:"td",elClasses:["fc-timegrid-axis","fc-scrollgrid-shrink"],elAttrs:{"aria-hidden":!0},renderProps:i,generatorName:"allDayContent",customGenerator:n.allDayContent,defaultGenerator:iH,classNameGenerator:n.allDayClassNames,didMount:n.allDayDidMount,willUnmount:n.allDayWillUnmount},s=>I("div",{className:["fc-timegrid-axis-frame","fc-scrollgrid-shrink-frame",e==null?" fc-timegrid-axis-frame-liquid":""].join(" "),style:{height:e}},I(s,{elTag:"span",elClasses:["fc-timegrid-axis-cushion","fc-scrollgrid-shrink-cushion","fc-scrollgrid-sync-inner"]})))},this.handleSlatCoords=e=>{this.setState({slatCoords:e})}}renderSimpleLayout(e,n,r){let{context:i,props:s}=this,a=[],c=Td(i.options);return e&&a.push({type:"header",key:"header",isSticky:c,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),n&&(a.push({type:"body",key:"all-day",chunk:{content:n}}),a.push({type:"body",key:"all-day-divider",outerContent:I("tr",{role:"presentation",className:"fc-scrollgrid-section"},I("td",{className:"fc-timegrid-divider "+i.theme.getClass("tableCellShaded")}))})),a.push({type:"body",key:"body",liquid:!0,expandRows:!!i.options.expandRows,chunk:{scrollerElRef:this.scrollerElRef,content:r}}),I(Il,{elRef:this.rootElRef,elClasses:["fc-timegrid"],viewSpec:i.viewSpec},I(Im,{liquid:!s.isHeightAuto&&!s.forPrint,collapsibleWidth:s.forPrint,cols:[{width:"shrink"}],sections:a}))}renderHScrollLayout(e,n,r,i,s,a,c){let u=this.context.pluginHooks.scrollGridImpl;if(!u)throw new Error("No ScrollGrid implementation");let{context:d,props:f}=this,p=!f.forPrint&&Td(d.options),m=!f.forPrint&&XE(d.options),v=[];e&&v.push({type:"header",key:"header",isSticky:p,syncRowHeights:!0,chunks:[{key:"axis",rowContent:_=>I("tr",{role:"presentation"},this.renderHeadAxis("day",_.rowSyncHeights[0]))},{key:"cols",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),n&&(v.push({type:"body",key:"all-day",syncRowHeights:!0,chunks:[{key:"axis",rowContent:_=>I("tr",{role:"presentation"},this.renderTableRowAxis(_.rowSyncHeights[0]))},{key:"cols",content:n}]}),v.push({key:"all-day-divider",type:"body",outerContent:I("tr",{role:"presentation",className:"fc-scrollgrid-section"},I("td",{colSpan:2,className:"fc-timegrid-divider "+d.theme.getClass("tableCellShaded")}))}));let b=d.options.nowIndicator;return v.push({type:"body",key:"body",liquid:!0,expandRows:!!d.options.expandRows,chunks:[{key:"axis",content:_=>I("div",{className:"fc-timegrid-axis-chunk"},I("table",{"aria-hidden":!0,style:{height:_.expandRows?_.clientHeight:""}},_.tableColGroupNode,I("tbody",null,I(eH,{slatMetas:a}))),I("div",{className:"fc-timegrid-now-indicator-container"},I(ya,{unit:b?"minute":"day"},w=>{let x=b&&c&&c.safeComputeTop(w);return typeof x=="number"?I(Lm,{elClasses:["fc-timegrid-now-indicator-arrow"],elStyle:{top:x},isAxis:!0,date:w}):null})))},{key:"cols",scrollerElRef:this.scrollerElRef,content:r}]}),m&&v.push({key:"footer",type:"footer",isSticky:!0,chunks:[{key:"axis",content:Tg},{key:"cols",content:Tg}]}),I(Il,{elRef:this.rootElRef,elClasses:["fc-timegrid"],viewSpec:d.viewSpec},I(u,{liquid:!f.isHeightAuto&&!f.forPrint,forPrint:f.forPrint,collapsibleWidth:!1,colGroups:[{width:"shrink",cols:[{width:"shrink"}]},{cols:[{span:i,minWidth:s}]}],sections:v}))}getAllDayMaxEventProps(){let{dayMaxEvents:e,dayMaxEventRows:n}=this.context.options;return(e===!0||n===!0)&&(e=void 0,n=nH),{dayMaxEvents:e,dayMaxEventRows:n}}}function iH(t){return t.text}class sH{constructor(e,n,r){this.positions=e,this.dateProfile=n,this.slotDuration=r}safeComputeTop(e){let{dateProfile:n}=this;if(Ni(n.currentRange,e)){let r=bt(e),i=e.valueOf()-r.valueOf();if(i>=Fr(n.slotMinTime)&&i<Fr(n.slotMaxTime))return this.computeTimeTop(Ye(i))}return null}computeDateTop(e,n){return n||(n=bt(e)),this.computeTimeTop(Ye(e.valueOf()-n.valueOf()))}computeTimeTop(e){let{positions:n,dateProfile:r}=this,i=n.els.length,s=(e.milliseconds-Fr(r.slotMinTime))/Fr(this.slotDuration),a,c;return s=Math.max(0,s),s=Math.min(i,s),a=Math.floor(s),a=Math.min(a,i-1),c=s-a,n.tops[a]+n.getHeight(a)*c}}class aH extends at{render(){let{props:e,context:n}=this,{options:r}=n,{slatElRefs:i}=e;return I("tbody",null,e.slatMetas.map((s,a)=>{let c={time:s.time,date:n.dateEnv.toDate(s.date),view:n.viewApi};return I("tr",{key:s.key,ref:i.createRef(s.key)},e.axis&&I(xC,Object.assign({},s)),I(An,{elTag:"td",elClasses:["fc-timegrid-slot","fc-timegrid-slot-lane",!s.isLabeled&&"fc-timegrid-slot-minor"],elAttrs:{"data-time":s.isoTimeStr},renderProps:c,generatorName:"slotLaneContent",customGenerator:r.slotLaneContent,classNameGenerator:r.slotLaneClassNames,didMount:r.slotLaneDidMount,willUnmount:r.slotLaneWillUnmount}))}))}}class oH extends at{constructor(){super(...arguments),this.rootElRef=Ln(),this.slatElRefs=new ki}render(){let{props:e,context:n}=this;return I("div",{ref:this.rootElRef,className:"fc-timegrid-slots"},I("table",{"aria-hidden":!0,className:n.theme.getClass("table"),style:{minWidth:e.tableMinWidth,width:e.clientWidth,height:e.minHeight}},e.tableColGroupNode,I(aH,{slatElRefs:this.slatElRefs,axis:e.axis,slatMetas:e.slatMetas})))}componentDidMount(){this.updateSizing()}componentDidUpdate(){this.updateSizing()}componentWillUnmount(){this.props.onCoords&&this.props.onCoords(null)}updateSizing(){let{context:e,props:n}=this;n.onCoords&&n.clientWidth!==null&&this.rootElRef.current.offsetHeight&&n.onCoords(new sH(new oo(this.rootElRef.current,lH(this.slatElRefs.currentMap,n.slatMetas),!1,!0),this.props.dateProfile,e.options.slotDuration))}}function lH(t,e){return e.map(n=>t[n.key])}function sl(t,e){let n=[],r;for(r=0;r<e;r+=1)n.push([]);if(t)for(r=0;r<t.length;r+=1)n[t[r].col].push(t[r]);return n}function U_(t,e){let n=[];if(t){for(let r=0;r<e;r+=1)n[r]={affectedInstances:t.affectedInstances,isEvent:t.isEvent,segs:[]};for(let r of t.segs)n[r.col].segs.push(r)}else for(let r=0;r<e;r+=1)n[r]=null;return n}class cH extends at{render(){let{props:e}=this;return I(nC,{elClasses:["fc-timegrid-more-link"],elStyle:{top:e.top,bottom:e.bottom},allDayDate:null,moreCnt:e.hiddenSegs.length,allSegs:e.hiddenSegs,hiddenSegs:e.hiddenSegs,extraDateSpan:e.extraDateSpan,dateProfile:e.dateProfile,todayRange:e.todayRange,popoverContent:()=>CC(e.hiddenSegs,e),defaultGenerator:uH,forceTimed:!0},n=>I(n,{elTag:"div",elClasses:["fc-timegrid-more-link-inner","fc-sticky"]}))}}function uH(t){return t.shortText}function dH(t,e,n){let r=new zE;e!=null&&(r.strictOrder=e),n!=null&&(r.maxStackCnt=n);let i=r.addSegs(t),s=xF(i),a=fH(r);return a=mH(a,1),{segRects:vH(a),hiddenGroups:s}}function fH(t){const{entriesByLevel:e}=t,n=zm((r,i)=>r+":"+i,(r,i)=>{let s=gH(t,r,i),a=B_(s,n),c=e[r][i];return[Object.assign(Object.assign({},c),{nextLevelNodes:a[0]}),c.thickness+a[1]]});return B_(e.length?{level:0,lateralStart:0,lateralEnd:e[0].length}:null,n)[0]}function B_(t,e){if(!t)return[[],0];let{level:n,lateralStart:r,lateralEnd:i}=t,s=r,a=[];for(;s<i;)a.push(e(n,s)),s+=1;return a.sort(hH),[a.map(pH),a[0][1]]}function hH(t,e){return e[1]-t[1]}function pH(t){return t[0]}function gH(t,e,n){let{levelCoords:r,entriesByLevel:i}=t,s=i[e][n],a=r[e]+s.thickness,c=r.length,u=e;for(;u<c&&r[u]<a;u+=1);for(;u<c;u+=1){let d=i[u],f,p=Cg(d,s.span.start,Eg),m=p[0]+p[1],v=m;for(;(f=d[v])&&f.span.start<s.span.end;)v+=1;if(m<v)return{level:u,lateralStart:m,lateralEnd:v}}return null}function mH(t,e){const n=zm((r,i,s)=>ia(r),(r,i,s)=>{let{nextLevelNodes:a,thickness:c}=r,u=c+s,d=c/u,f,p=[];if(!a.length)f=e;else for(let v of a)if(f===void 0){let b=n(v,i,u);f=b[0],p.push(b[1])}else{let b=n(v,f,0);p.push(b[1])}let m=(f-i)*d;return[f-m,Object.assign(Object.assign({},r),{thickness:m,nextLevelNodes:p})]});return t.map(r=>n(r,0,0)[1])}function vH(t){let e=[];const n=zm((i,s,a)=>ia(i),(i,s,a)=>{let c=Object.assign(Object.assign({},i),{levelCoord:s,stackDepth:a,stackForward:0});return e.push(c),c.stackForward=r(i.nextLevelNodes,s+i.thickness,a+1)+1});function r(i,s,a){let c=0;for(let u of i)c=Math.max(n(u,s,a),c);return c}return r(t,0,0),e}function zm(t,e){const n={};return(...r)=>{let i=t(...r);return i in n?n[i]:n[i]=e(...r)}}function W_(t,e,n=null,r=0){let i=[];if(n)for(let s=0;s<t.length;s+=1){let a=t[s],c=n.computeDateTop(a.start,e),u=Math.max(c+(r||0),n.computeDateTop(a.end,e));i.push({start:Math.round(c),end:Math.round(u)})}return i}function yH(t,e,n,r){let i=[],s=[];for(let d=0;d<t.length;d+=1){let f=e[d];f?i.push({index:d,thickness:1,span:f}):s.push(t[d])}let{segRects:a,hiddenGroups:c}=dH(i,n,r),u=[];for(let d of a)u.push({seg:t[d.index],rect:d});for(let d of s)u.push({seg:d,rect:null});return{segPlacements:u,hiddenGroups:c}}const bH=Dt({hour:"numeric",minute:"2-digit",meridiem:!1});class EC extends at{render(){return I(Pm,Object.assign({},this.props,{elClasses:["fc-timegrid-event","fc-v-event",this.props.isShort&&"fc-timegrid-event-short"],defaultTimeFormat:bH}))}}class _H extends at{constructor(){super(...arguments),this.sortEventSegs=Ce(Tm)}render(){let{props:e,context:n}=this,{options:r}=n,i=r.selectMirror,s=e.eventDrag&&e.eventDrag.segs||e.eventResize&&e.eventResize.segs||i&&e.dateSelectionSegs||[],a=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{},c=this.sortEventSegs(e.fgEventSegs,r.eventOrder);return I(Fm,{elTag:"td",elRef:e.elRef,elClasses:["fc-timegrid-col",...e.extraClassNames||[]],elAttrs:Object.assign({role:"gridcell"},e.extraDataAttrs),date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,extraRenderProps:e.extraRenderProps},u=>I("div",{className:"fc-timegrid-col-frame"},I("div",{className:"fc-timegrid-col-bg"},this.renderFillSegs(e.businessHourSegs,"non-business"),this.renderFillSegs(e.bgEventSegs,"bg-event"),this.renderFillSegs(e.dateSelectionSegs,"highlight")),I("div",{className:"fc-timegrid-col-events"},this.renderFgSegs(c,a,!1,!1,!1)),I("div",{className:"fc-timegrid-col-events"},this.renderFgSegs(s,{},!!e.eventDrag,!!e.eventResize,!!i,"mirror")),I("div",{className:"fc-timegrid-now-indicator-container"},this.renderNowIndicator(e.nowIndicatorSegs)),jm(r)&&I(u,{elTag:"div",elClasses:["fc-timegrid-col-misc"]})))}renderFgSegs(e,n,r,i,s,a){let{props:c}=this;return c.forPrint?CC(e,c):this.renderPositionedFgSegs(e,n,r,i,s,a)}renderPositionedFgSegs(e,n,r,i,s,a){let{eventMaxStack:c,eventShortHeight:u,eventOrderStrict:d,eventMinHeight:f}=this.context.options,{date:p,slatCoords:m,eventSelection:v,todayRange:b,nowDate:_}=this.props,w=r||i||s,x=W_(e,p,m,f),{segPlacements:C,hiddenGroups:k}=yH(e,x,d,c);return I(vt,null,this.renderHiddenGroups(k,e),C.map(R=>{let{seg:A,rect:M}=R,P=A.eventRange.instance.instanceId,O=w||!!(!n[P]&&M),H=Pp(M&&M.span),B=!w&&M?this.computeSegHStyle(M):{left:0,right:0},$=!!M&&M.stackForward>0,ee=!!M&&M.span.end-M.span.start<u;return I("div",{className:"fc-timegrid-event-harness"+($?" fc-timegrid-event-harness-inset":""),key:a||P,style:Object.assign(Object.assign({visibility:O?"":"hidden"},H),B)},I(EC,Object.assign({seg:A,isDragging:r,isResizing:i,isDateSelecting:s,isSelected:P===v,isShort:ee},Ii(A,b,_))))}))}renderHiddenGroups(e,n){let{extraDateSpan:r,dateProfile:i,todayRange:s,nowDate:a,eventSelection:c,eventDrag:u,eventResize:d}=this.props;return I(vt,null,e.map(f=>{let p=Pp(f.span),m=SH(f.entries,n);return I(cH,{key:hE(rC(m)),hiddenSegs:m,top:p.top,bottom:p.bottom,extraDateSpan:r,dateProfile:i,todayRange:s,nowDate:a,eventSelection:c,eventDrag:u,eventResize:d})}))}renderFillSegs(e,n){let{props:r,context:i}=this,a=W_(e,r.date,r.slatCoords,i.options.eventMinHeight).map((c,u)=>{let d=e[u];return I("div",{key:NE(d.eventRange),className:"fc-timegrid-bg-harness",style:Pp(c)},n==="bg-event"?I(JE,Object.assign({seg:d},Ii(d,r.todayRange,r.nowDate))):eC(n))});return I(vt,null,a)}renderNowIndicator(e){let{slatCoords:n,date:r}=this.props;return n?e.map((i,s)=>I(Lm,{key:s,elClasses:["fc-timegrid-now-indicator-line"],elStyle:{top:n.computeDateTop(i.start,r)},isAxis:!1,date:r})):null}computeSegHStyle(e){let{isRtl:n,options:r}=this.context,i=r.slotEventOverlap,s=e.levelCoord,a=e.levelCoord+e.thickness,c,u;i&&(a=Math.min(1,s+(a-s)*2)),n?(c=1-a,u=s):(c=s,u=1-a);let d={zIndex:e.stackDepth+1,left:c*100+"%",right:u*100+"%"};return i&&!e.stackForward&&(d[n?"marginLeft":"marginRight"]=20),d}}function CC(t,{todayRange:e,nowDate:n,eventSelection:r,eventDrag:i,eventResize:s}){let a=(i?i.affectedInstances:null)||(s?s.affectedInstances:null)||{};return I(vt,null,t.map(c=>{let u=c.eventRange.instance.instanceId;return I("div",{key:u,style:{visibility:a[u]?"hidden":""}},I(EC,Object.assign({seg:c,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:u===r,isShort:!1},Ii(c,e,n))))}))}function Pp(t){return t?{top:t.start,bottom:-t.end}:{top:"",bottom:""}}function SH(t,e){return t.map(n=>e[n.index])}class wH extends at{constructor(){super(...arguments),this.splitFgEventSegs=Ce(sl),this.splitBgEventSegs=Ce(sl),this.splitBusinessHourSegs=Ce(sl),this.splitNowIndicatorSegs=Ce(sl),this.splitDateSelectionSegs=Ce(sl),this.splitEventDrag=Ce(U_),this.splitEventResize=Ce(U_),this.rootElRef=Ln(),this.cellElRefs=new ki}render(){let{props:e,context:n}=this,r=n.options.nowIndicator&&e.slatCoords&&e.slatCoords.safeComputeTop(e.nowDate),i=e.cells.length,s=this.splitFgEventSegs(e.fgEventSegs,i),a=this.splitBgEventSegs(e.bgEventSegs,i),c=this.splitBusinessHourSegs(e.businessHourSegs,i),u=this.splitNowIndicatorSegs(e.nowIndicatorSegs,i),d=this.splitDateSelectionSegs(e.dateSelectionSegs,i),f=this.splitEventDrag(e.eventDrag,i),p=this.splitEventResize(e.eventResize,i);return I("div",{className:"fc-timegrid-cols",ref:this.rootElRef},I("table",{role:"presentation",style:{minWidth:e.tableMinWidth,width:e.clientWidth}},e.tableColGroupNode,I("tbody",{role:"presentation"},I("tr",{role:"row"},e.axis&&I("td",{"aria-hidden":!0,className:"fc-timegrid-col fc-timegrid-axis"},I("div",{className:"fc-timegrid-col-frame"},I("div",{className:"fc-timegrid-now-indicator-container"},typeof r=="number"&&I(Lm,{elClasses:["fc-timegrid-now-indicator-arrow"],elStyle:{top:r},isAxis:!0,date:e.nowDate})))),e.cells.map((m,v)=>I(_H,{key:m.key,elRef:this.cellElRefs.createRef(m.key),dateProfile:e.dateProfile,date:m.date,nowDate:e.nowDate,todayRange:e.todayRange,extraRenderProps:m.extraRenderProps,extraDataAttrs:m.extraDataAttrs,extraClassNames:m.extraClassNames,extraDateSpan:m.extraDateSpan,fgEventSegs:s[v],bgEventSegs:a[v],businessHourSegs:c[v],nowIndicatorSegs:u[v],dateSelectionSegs:d[v],eventDrag:f[v],eventResize:p[v],slatCoords:e.slatCoords,eventSelection:e.eventSelection,forPrint:e.forPrint}))))))}componentDidMount(){this.updateCoords()}componentDidUpdate(){this.updateCoords()}updateCoords(){let{props:e}=this;e.onColCoords&&e.clientWidth!==null&&e.onColCoords(new oo(this.rootElRef.current,xH(this.cellElRefs.currentMap,e.cells),!0,!1))}}function xH(t,e){return e.map(n=>t[n.key])}class EH extends Br{constructor(){super(...arguments),this.processSlotOptions=Ce(CH),this.state={slatCoords:null},this.handleRootEl=e=>{e?this.context.registerInteractiveComponent(this,{el:e,isHitComboAllowed:this.props.isHitComboAllowed}):this.context.unregisterInteractiveComponent(this)},this.handleScrollRequest=e=>{let{onScrollTopRequest:n}=this.props,{slatCoords:r}=this.state;if(n&&r){if(e.time){let i=r.computeTimeTop(e.time);i=Math.ceil(i),i&&(i+=1),n(i)}return!0}return!1},this.handleColCoords=e=>{this.colCoords=e},this.handleSlatCoords=e=>{this.setState({slatCoords:e}),this.props.onSlatCoords&&this.props.onSlatCoords(e)}}render(){let{props:e,state:n}=this;return I("div",{className:"fc-timegrid-body",ref:this.handleRootEl,style:{width:e.clientWidth,minWidth:e.tableMinWidth}},I(oH,{axis:e.axis,dateProfile:e.dateProfile,slatMetas:e.slatMetas,clientWidth:e.clientWidth,minHeight:e.expandRows?e.clientHeight:"",tableMinWidth:e.tableMinWidth,tableColGroupNode:e.axis?e.tableColGroupNode:null,onCoords:this.handleSlatCoords}),I(wH,{cells:e.cells,axis:e.axis,dateProfile:e.dateProfile,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,todayRange:e.todayRange,nowDate:e.nowDate,nowIndicatorSegs:e.nowIndicatorSegs,clientWidth:e.clientWidth,tableMinWidth:e.tableMinWidth,tableColGroupNode:e.tableColGroupNode,slatCoords:n.slatCoords,onColCoords:this.handleColCoords,forPrint:e.forPrint}))}componentDidMount(){this.scrollResponder=this.context.createScrollResponder(this.handleScrollRequest)}componentDidUpdate(e){this.scrollResponder.update(e.dateProfile!==this.props.dateProfile)}componentWillUnmount(){this.scrollResponder.detach()}queryHit(e,n){let{dateEnv:r,options:i}=this.context,{colCoords:s}=this,{dateProfile:a}=this.props,{slatCoords:c}=this.state,{snapDuration:u,snapsPerSlot:d}=this.processSlotOptions(this.props.slotDuration,i.snapDuration),f=s.leftToIndex(e),p=c.positions.topToIndex(n);if(f!=null&&p!=null){let m=this.props.cells[f],v=c.positions.tops[p],b=c.positions.getHeight(p),_=(n-v)/b,w=Math.floor(_*d),x=p*d+w,C=this.props.cells[f].date,k=vg(a.slotMinTime,dP(u,x)),R=r.add(C,k),A=r.add(R,u);return{dateProfile:a,dateSpan:Object.assign({range:{start:R,end:A},allDay:!1},m.extraDateSpan),dayEl:s.els[f],rect:{left:s.lefts[f],right:s.rights[f],top:v,bottom:v+b},layer:0}}return null}}function CH(t,e){let n=e||t,r=fm(t,n);return r===null&&(n=t,r=1),{snapDuration:n,snapsPerSlot:r}}class TH extends qE{sliceRange(e,n){let r=[];for(let i=0;i<n.length;i+=1){let s=Ss(e,n[i]);s&&r.push({start:s.start,end:s.end,isStart:s.start.valueOf()===e.start.valueOf(),isEnd:s.end.valueOf()===e.end.valueOf(),col:i})}return r}}class DH extends Br{constructor(){super(...arguments),this.buildDayRanges=Ce(kH),this.slicer=new TH,this.timeColsRef=Ln()}render(){let{props:e,context:n}=this,{dateProfile:r,dayTableModel:i}=e,{nowIndicator:s,nextDayThreshold:a}=n.options,c=this.buildDayRanges(i,r,n.dateEnv);return I(ya,{unit:s?"minute":"day"},(u,d)=>I(EH,Object.assign({ref:this.timeColsRef},this.slicer.sliceProps(e,r,null,n,c),{forPrint:e.forPrint,axis:e.axis,dateProfile:r,slatMetas:e.slatMetas,slotDuration:e.slotDuration,cells:i.cells[0],tableColGroupNode:e.tableColGroupNode,tableMinWidth:e.tableMinWidth,clientWidth:e.clientWidth,clientHeight:e.clientHeight,expandRows:e.expandRows,nowDate:u,nowIndicatorSegs:s&&this.slicer.sliceNowDate(u,r,a,n,c),todayRange:d,onScrollTopRequest:e.onScrollTopRequest,onSlatCoords:e.onSlatCoords})))}}function kH(t,e,n){let r=[];for(let i of t.headerDates)r.push({start:n.add(i,e.slotMinTime),end:n.add(i,e.slotMaxTime)});return r}const V_=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}];function AH(t,e,n,r,i){let s=new Date(0),a=t,c=Ye(0),u=n||RH(r),d=[];for(;Fr(a)<Fr(e);){let f=i.add(s,a),p=fm(c,u)!==null;d.push({date:f,time:a,key:f.toISOString(),isoTimeStr:DP(f),isLabeled:p}),a=vg(a,r),c=vg(c,r)}return d}function RH(t){let e,n,r;for(e=V_.length-1;e>=0;e-=1)if(n=Ye(V_[e]),r=fm(n,t),r!==null&&r>1)return n;return t}class OH extends rH{constructor(){super(...arguments),this.buildTimeColsModel=Ce(MH),this.buildSlatMetas=Ce(AH)}render(){let{options:e,dateEnv:n,dateProfileGenerator:r}=this.context,{props:i}=this,{dateProfile:s}=i,a=this.buildTimeColsModel(s,r),c=this.allDaySplitter.splitProps(i),u=this.buildSlatMetas(s.slotMinTime,s.slotMaxTime,e.slotLabelInterval,e.slotDuration,n),{dayMinWidth:d}=e,f=!d,p=d,m=e.dayHeaders&&I(WE,{dates:a.headerDates,dateProfile:s,datesRepDistinctDays:!0,renderIntro:f?this.renderHeadAxis:null}),v=e.allDaySlot!==!1&&(_=>I(wC,Object.assign({},c.allDay,{dateProfile:s,dayTableModel:a,nextDayThreshold:e.nextDayThreshold,tableMinWidth:_.tableMinWidth,colGroupNode:_.tableColGroupNode,renderRowIntro:f?this.renderTableRowAxis:null,showWeekNumbers:!1,expandRows:!1,headerAlignElRef:this.headerElRef,clientWidth:_.clientWidth,clientHeight:_.clientHeight,forPrint:i.forPrint},this.getAllDayMaxEventProps()))),b=_=>I(DH,Object.assign({},c.timed,{dayTableModel:a,dateProfile:s,axis:f,slotDuration:e.slotDuration,slatMetas:u,forPrint:i.forPrint,tableColGroupNode:_.tableColGroupNode,tableMinWidth:_.tableMinWidth,clientWidth:_.clientWidth,clientHeight:_.clientHeight,onSlatCoords:this.handleSlatCoords,expandRows:_.expandRows,onScrollTopRequest:this.handleScrollTopRequest}));return p?this.renderHScrollLayout(m,v,b,a.colCnt,d,u,this.state.slatCoords):this.renderSimpleLayout(m,v,b)}}function MH(t,e){let n=new VE(t.renderRange,e);return new $E(n,!1)}var NH='.fc-v-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-v-event .fc-event-main{color:var(--fc-event-text-color);height:100%}.fc-v-event .fc-event-main-frame{display:flex;flex-direction:column;height:100%}.fc-v-event .fc-event-time{flex-grow:0;flex-shrink:0;max-height:100%;overflow:hidden}.fc-v-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-height:0}.fc-v-event .fc-event-title{bottom:0;max-height:100%;overflow:hidden;top:0}.fc-v-event:not(.fc-event-start){border-top-left-radius:0;border-top-right-radius:0;border-top-width:0}.fc-v-event:not(.fc-event-end){border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-width:0}.fc-v-event.fc-event-selected:before{left:-10px;right:-10px}.fc-v-event .fc-event-resizer-start{cursor:n-resize}.fc-v-event .fc-event-resizer-end{cursor:s-resize}.fc-v-event:not(.fc-event-selected) .fc-event-resizer{height:var(--fc-event-resizer-thickness);left:0;right:0}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-start{top:calc(var(--fc-event-resizer-thickness)/-2)}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-end{bottom:calc(var(--fc-event-resizer-thickness)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer{left:50%;margin-left:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer-start{top:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer-end{bottom:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc .fc-timegrid .fc-daygrid-body{z-index:2}.fc .fc-timegrid-divider{padding:0 0 2px}.fc .fc-timegrid-body{min-height:100%;position:relative;z-index:1}.fc .fc-timegrid-axis-chunk{position:relative}.fc .fc-timegrid-axis-chunk>table,.fc .fc-timegrid-slots{position:relative;z-index:1}.fc .fc-timegrid-slot{border-bottom:0;height:1.5em}.fc .fc-timegrid-slot:empty:before{content:"\\00a0"}.fc .fc-timegrid-slot-minor{border-top-style:dotted}.fc .fc-timegrid-slot-label-cushion{display:inline-block;white-space:nowrap}.fc .fc-timegrid-slot-label{vertical-align:middle}.fc .fc-timegrid-axis-cushion,.fc .fc-timegrid-slot-label-cushion{padding:0 4px}.fc .fc-timegrid-axis-frame-liquid{height:100%}.fc .fc-timegrid-axis-frame{align-items:center;display:flex;justify-content:flex-end;overflow:hidden}.fc .fc-timegrid-axis-cushion{flex-shrink:0;max-width:60px}.fc-direction-ltr .fc-timegrid-slot-label-frame{text-align:right}.fc-direction-rtl .fc-timegrid-slot-label-frame{text-align:left}.fc-liquid-hack .fc-timegrid-axis-frame-liquid{bottom:0;height:auto;left:0;position:absolute;right:0;top:0}.fc .fc-timegrid-col.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-timegrid-col-frame{min-height:100%;position:relative}.fc-media-screen.fc-liquid-hack .fc-timegrid-col-frame{bottom:0;height:auto;left:0;position:absolute;right:0;top:0}.fc-media-screen .fc-timegrid-cols{bottom:0;left:0;position:absolute;right:0;top:0}.fc-media-screen .fc-timegrid-cols>table{height:100%}.fc-media-screen .fc-timegrid-col-bg,.fc-media-screen .fc-timegrid-col-events,.fc-media-screen .fc-timegrid-now-indicator-container{left:0;position:absolute;right:0;top:0}.fc .fc-timegrid-col-bg{z-index:2}.fc .fc-timegrid-col-bg .fc-non-business{z-index:1}.fc .fc-timegrid-col-bg .fc-bg-event{z-index:2}.fc .fc-timegrid-col-bg .fc-highlight{z-index:3}.fc .fc-timegrid-bg-harness{left:0;position:absolute;right:0}.fc .fc-timegrid-col-events{z-index:3}.fc .fc-timegrid-now-indicator-container{bottom:0;overflow:hidden}.fc-direction-ltr .fc-timegrid-col-events{margin:0 2.5% 0 2px}.fc-direction-rtl .fc-timegrid-col-events{margin:0 2px 0 2.5%}.fc-timegrid-event-harness{position:absolute}.fc-timegrid-event-harness>.fc-timegrid-event{bottom:0;left:0;position:absolute;right:0;top:0}.fc-timegrid-event-harness-inset .fc-timegrid-event,.fc-timegrid-event.fc-event-mirror,.fc-timegrid-more-link{box-shadow:0 0 0 1px var(--fc-page-bg-color)}.fc-timegrid-event,.fc-timegrid-more-link{border-radius:3px;font-size:var(--fc-small-font-size)}.fc-timegrid-event{margin-bottom:1px}.fc-timegrid-event .fc-event-main{padding:1px 1px 0}.fc-timegrid-event .fc-event-time{font-size:var(--fc-small-font-size);margin-bottom:1px;white-space:nowrap}.fc-timegrid-event-short .fc-event-main-frame{flex-direction:row;overflow:hidden}.fc-timegrid-event-short .fc-event-time:after{content:"\\00a0-\\00a0"}.fc-timegrid-event-short .fc-event-title{font-size:var(--fc-small-font-size)}.fc-timegrid-more-link{background:var(--fc-more-link-bg-color);color:var(--fc-more-link-text-color);cursor:pointer;margin-bottom:1px;position:absolute;z-index:9999}.fc-timegrid-more-link-inner{padding:3px 2px;top:0}.fc-direction-ltr .fc-timegrid-more-link{right:0}.fc-direction-rtl .fc-timegrid-more-link{left:0}.fc .fc-timegrid-now-indicator-arrow,.fc .fc-timegrid-now-indicator-line{pointer-events:none}.fc .fc-timegrid-now-indicator-line{border-color:var(--fc-now-indicator-color);border-style:solid;border-width:1px 0 0;left:0;position:absolute;right:0;z-index:4}.fc .fc-timegrid-now-indicator-arrow{border-color:var(--fc-now-indicator-color);border-style:solid;margin-top:-5px;position:absolute;z-index:4}.fc-direction-ltr .fc-timegrid-now-indicator-arrow{border-bottom-color:transparent;border-top-color:transparent;border-width:5px 0 5px 6px;left:0}.fc-direction-rtl .fc-timegrid-now-indicator-arrow{border-bottom-color:transparent;border-top-color:transparent;border-width:5px 6px 5px 0;right:0}';nf(NH);const IH={allDaySlot:Boolean};var PH=li({name:"@fullcalendar/timegrid",initialView:"timeGridWeek",optionRefiners:IH,views:{timeGrid:{component:OH,usesMinMaxTime:!0,allDaySlot:!0,slotDuration:"00:30:00",slotEventOverlap:!0},timeGridDay:{type:"timeGrid",duration:{days:1}},timeGridWeek:{type:"timeGrid",duration:{weeks:1}}}});class LH extends at{constructor(){super(...arguments),this.state={textId:ms()}}render(){let{theme:e,dateEnv:n,options:r,viewApi:i}=this.context,{cellId:s,dayDate:a,todayRange:c}=this.props,{textId:u}=this.state,d=Am(a,c),f=r.listDayFormat?n.format(a,r.listDayFormat):"",p=r.listDaySideFormat?n.format(a,r.listDaySideFormat):"",m=Object.assign({date:n.toDate(a),view:i,textId:u,text:f,sideText:p,navLinkAttrs:ao(this.context,a),sideNavLinkAttrs:ao(this.context,a,"day",!1)},d);return I(An,{elTag:"tr",elClasses:["fc-list-day",...lf(d,e)],elAttrs:{"data-date":Jl(a)},renderProps:m,generatorName:"dayHeaderContent",customGenerator:r.dayHeaderContent,defaultGenerator:FH,classNameGenerator:r.dayHeaderClassNames,didMount:r.dayHeaderDidMount,willUnmount:r.dayHeaderWillUnmount},v=>I("th",{scope:"colgroup",colSpan:3,id:s,"aria-labelledby":u},I(v,{elTag:"div",elClasses:["fc-list-day-cushion",e.getClass("tableCellShaded")]})))}}function FH(t){return I(vt,null,t.text&&I("a",Object.assign({id:t.textId,className:"fc-list-day-text"},t.navLinkAttrs),t.text),t.sideText&&I("a",Object.assign({"aria-hidden":!0,className:"fc-list-day-side-text"},t.sideNavLinkAttrs),t.sideText))}const jH=Dt({hour:"numeric",minute:"2-digit",meridiem:"short"});class HH extends at{render(){let{props:e,context:n}=this,{options:r}=n,{seg:i,timeHeaderId:s,eventHeaderId:a,dateHeaderId:c}=e,u=r.eventTimeFormat||jH;return I(cf,Object.assign({},e,{elTag:"tr",elClasses:["fc-list-event",i.eventRange.def.url&&"fc-event-forced-url"],defaultGenerator:()=>zH(i,n),seg:i,timeText:"",disableDragging:!0,disableResizing:!0}),(d,f)=>I(vt,null,UH(i,u,n,s,c),I("td",{"aria-hidden":!0,className:"fc-list-event-graphic"},I("span",{className:"fc-list-event-dot",style:{borderColor:f.borderColor||f.backgroundColor}})),I(d,{elTag:"td",elClasses:["fc-list-event-title"],elAttrs:{headers:`${a} ${c}`}})))}}function zH(t,e){let n=Dm(t,e);return I("a",Object.assign({},n),t.eventRange.def.title)}function UH(t,e,n,r,i){let{options:s}=n;if(s.displayEventTime!==!1){let a=t.eventRange.def,c=t.eventRange.instance,u=!1,d;if(a.allDay?u=!0:hL(t.eventRange.range)?t.isStart?d=_l(t,e,n,null,null,c.range.start,t.end):t.isEnd?d=_l(t,e,n,null,null,t.start,c.range.end):u=!0:d=_l(t,e,n),u){let f={text:n.options.allDayText,view:n.viewApi};return I(An,{elTag:"td",elClasses:["fc-list-event-time"],elAttrs:{headers:`${r} ${i}`},renderProps:f,generatorName:"allDayContent",customGenerator:s.allDayContent,defaultGenerator:BH,classNameGenerator:s.allDayClassNames,didMount:s.allDayDidMount,willUnmount:s.allDayWillUnmount})}return I("td",{className:"fc-list-event-time"},d)}return null}function BH(t){return t.text}class WH extends Br{constructor(){super(...arguments),this.computeDateVars=Ce($H),this.eventStoreToSegs=Ce(this._eventStoreToSegs),this.state={timeHeaderId:ms(),eventHeaderId:ms(),dateHeaderIdRoot:ms()},this.setRootEl=e=>{e?this.context.registerInteractiveComponent(this,{el:e}):this.context.unregisterInteractiveComponent(this)}}render(){let{props:e,context:n}=this,{dayDates:r,dayRanges:i}=this.computeDateVars(e.dateProfile),s=this.eventStoreToSegs(e.eventStore,e.eventUiBases,i);return I(Il,{elRef:this.setRootEl,elClasses:["fc-list",n.theme.getClass("table"),n.options.stickyHeaderDates!==!1?"fc-list-sticky":""],viewSpec:n.viewSpec},I(KE,{liquid:!e.isHeightAuto,overflowX:e.isHeightAuto?"visible":"hidden",overflowY:e.isHeightAuto?"visible":"auto"},s.length>0?this.renderSegList(s,r):this.renderEmptyMessage()))}renderEmptyMessage(){let{options:e,viewApi:n}=this.context,r={text:e.noEventsText,view:n};return I(An,{elTag:"div",elClasses:["fc-list-empty"],renderProps:r,generatorName:"noEventsContent",customGenerator:e.noEventsContent,defaultGenerator:VH,classNameGenerator:e.noEventsClassNames,didMount:e.noEventsDidMount,willUnmount:e.noEventsWillUnmount},i=>I(i,{elTag:"div",elClasses:["fc-list-empty-cushion"]}))}renderSegList(e,n){let{theme:r,options:i}=this.context,{timeHeaderId:s,eventHeaderId:a,dateHeaderIdRoot:c}=this.state,u=qH(e);return I(ya,{unit:"day"},(d,f)=>{let p=[];for(let m=0;m<u.length;m+=1){let v=u[m];if(v){let b=Jl(n[m]),_=c+"-"+b;p.push(I(LH,{key:b,cellId:_,dayDate:n[m],todayRange:f})),v=Tm(v,i.eventOrder);for(let w of v)p.push(I(HH,Object.assign({key:b+":"+w.eventRange.instance.instanceId,seg:w,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,timeHeaderId:s,eventHeaderId:a,dateHeaderId:_},Ii(w,f,d))))}}return I("table",{className:"fc-list-table "+r.getClass("table")},I("thead",null,I("tr",null,I("th",{scope:"col",id:s},i.timeHint),I("th",{scope:"col","aria-hidden":!0}),I("th",{scope:"col",id:a},i.eventHint))),I("tbody",null,p))})}_eventStoreToSegs(e,n,r){return this.eventRangesToSegs(wg(e,n,this.props.dateProfile.activeRange,this.context.options.nextDayThreshold).fg,r)}eventRangesToSegs(e,n){let r=[];for(let i of e)r.push(...this.eventRangeToSegs(i,n));return r}eventRangeToSegs(e,n){let{dateEnv:r}=this.context,{nextDayThreshold:i}=this.context.options,s=e.range,a=e.def.allDay,c,u,d,f=[];for(c=0;c<n.length;c+=1)if(u=Ss(s,n[c]),u&&(d={component:this,eventRange:e,start:u.start,end:u.end,isStart:e.isStart&&u.start.valueOf()===s.start.valueOf(),isEnd:e.isEnd&&u.end.valueOf()===s.end.valueOf(),dayIndex:c},f.push(d),!d.isEnd&&!a&&c+1<n.length&&s.end<r.add(n[c+1].start,i))){d.end=s.end,d.isEnd=!0;break}return f}}function VH(t){return t.text}function $H(t){let e=bt(t.renderRange.start),n=t.renderRange.end,r=[],i=[];for(;e<n;)r.push(e),i.push({start:e,end:Kt(e,1)}),e=Kt(e,1);return{dayDates:r,dayRanges:i}}function qH(t){let e=[],n,r;for(n=0;n<t.length;n+=1)r=t[n],(e[r.dayIndex]||(e[r.dayIndex]=[])).push(r);return e}var GH=':root{--fc-list-event-dot-width:10px;--fc-list-event-hover-bg-color:#f5f5f5}.fc-theme-standard .fc-list{border:1px solid var(--fc-border-color)}.fc .fc-list-empty{align-items:center;background-color:var(--fc-neutral-bg-color);display:flex;height:100%;justify-content:center}.fc .fc-list-empty-cushion{margin:5em 0}.fc .fc-list-table{border-style:hidden;width:100%}.fc .fc-list-table tr>*{border-left:0;border-right:0}.fc .fc-list-sticky .fc-list-day>*{background:var(--fc-page-bg-color);position:sticky;top:0}.fc .fc-list-table thead{left:-10000px;position:absolute}.fc .fc-list-table tbody>tr:first-child th{border-top:0}.fc .fc-list-table th{padding:0}.fc .fc-list-day-cushion,.fc .fc-list-table td{padding:8px 14px}.fc .fc-list-day-cushion:after{clear:both;content:"";display:table}.fc-theme-standard .fc-list-day-cushion{background-color:var(--fc-neutral-bg-color)}.fc-direction-ltr .fc-list-day-text,.fc-direction-rtl .fc-list-day-side-text{float:left}.fc-direction-ltr .fc-list-day-side-text,.fc-direction-rtl .fc-list-day-text{float:right}.fc-direction-ltr .fc-list-table .fc-list-event-graphic{padding-right:0}.fc-direction-rtl .fc-list-table .fc-list-event-graphic{padding-left:0}.fc .fc-list-event.fc-event-forced-url{cursor:pointer}.fc .fc-list-event:hover td{background-color:var(--fc-list-event-hover-bg-color)}.fc .fc-list-event-graphic,.fc .fc-list-event-time{white-space:nowrap;width:1px}.fc .fc-list-event-dot{border:calc(var(--fc-list-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-list-event-dot-width)/2);box-sizing:content-box;display:inline-block;height:0;width:0}.fc .fc-list-event-title a{color:inherit;text-decoration:none}.fc .fc-list-event.fc-event-forced-url:hover a{text-decoration:underline}';nf(GH);const YH={listDayFormat:$_,listDaySideFormat:$_,noEventsClassNames:W,noEventsContent:W,noEventsDidMount:W,noEventsWillUnmount:W};function $_(t){return t===!1?null:Dt(t)}var QH=li({name:"@fullcalendar/list",optionRefiners:YH,views:{list:{component:WH,buttonTextKey:"list",listDayFormat:{month:"long",day:"numeric",year:"numeric"}},listDay:{type:"list",duration:{days:1},listDayFormat:{weekday:"long"}},listWeek:{type:"list",duration:{weeks:1},listDayFormat:{weekday:"long"},listDaySideFormat:{month:"long",day:"numeric",year:"numeric"}},listMonth:{type:"list",duration:{month:1},listDaySideFormat:{weekday:"long"}},listYear:{type:"list",duration:{year:1},listDaySideFormat:{weekday:"long"}}}});Nm.touchMouseIgnoreWait=500;let kg=0,Dd=0,Ag=!1;class TC{constructor(e){this.subjectEl=null,this.selector="",this.handleSelector="",this.shouldIgnoreMove=!1,this.shouldWatchScroll=!0,this.isDragging=!1,this.isTouchDragging=!1,this.wasTouchScroll=!1,this.handleMouseDown=n=>{if(!this.shouldIgnoreMouse()&&KH(n)&&this.tryStart(n)){let r=this.createEventFromMouse(n,!0);this.emitter.trigger("pointerdown",r),this.initScrollWatch(r),this.shouldIgnoreMove||document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp)}},this.handleMouseMove=n=>{let r=this.createEventFromMouse(n);this.recordCoords(r),this.emitter.trigger("pointermove",r)},this.handleMouseUp=n=>{document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.emitter.trigger("pointerup",this.createEventFromMouse(n)),this.cleanup()},this.handleTouchStart=n=>{if(this.tryStart(n)){this.isTouchDragging=!0;let r=this.createEventFromTouch(n,!0);this.emitter.trigger("pointerdown",r),this.initScrollWatch(r);let i=n.target;this.shouldIgnoreMove||i.addEventListener("touchmove",this.handleTouchMove),i.addEventListener("touchend",this.handleTouchEnd),i.addEventListener("touchcancel",this.handleTouchEnd),window.addEventListener("scroll",this.handleTouchScroll,!0)}},this.handleTouchMove=n=>{let r=this.createEventFromTouch(n);this.recordCoords(r),this.emitter.trigger("pointermove",r)},this.handleTouchEnd=n=>{if(this.isDragging){let r=n.target;r.removeEventListener("touchmove",this.handleTouchMove),r.removeEventListener("touchend",this.handleTouchEnd),r.removeEventListener("touchcancel",this.handleTouchEnd),window.removeEventListener("scroll",this.handleTouchScroll,!0),this.emitter.trigger("pointerup",this.createEventFromTouch(n)),this.cleanup(),this.isTouchDragging=!1,ZH()}},this.handleTouchScroll=()=>{this.wasTouchScroll=!0},this.handleScroll=n=>{if(!this.shouldIgnoreMove){let r=window.scrollX-this.prevScrollX+this.prevPageX,i=window.scrollY-this.prevScrollY+this.prevPageY;this.emitter.trigger("pointermove",{origEvent:n,isTouch:this.isTouchDragging,subjectEl:this.subjectEl,pageX:r,pageY:i,deltaX:r-this.origPageX,deltaY:i-this.origPageY})}},this.containerEl=e,this.emitter=new of,e.addEventListener("mousedown",this.handleMouseDown),e.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),XH()}destroy(){this.containerEl.removeEventListener("mousedown",this.handleMouseDown),this.containerEl.removeEventListener("touchstart",this.handleTouchStart,{passive:!0}),JH()}tryStart(e){let n=this.querySubjectEl(e),r=e.target;return n&&(!this.handleSelector||Tn(r,this.handleSelector))?(this.subjectEl=n,this.isDragging=!0,this.wasTouchScroll=!1,!0):!1}cleanup(){Ag=!1,this.isDragging=!1,this.subjectEl=null,this.destroyScrollWatch()}querySubjectEl(e){return this.selector?Tn(e.target,this.selector):this.containerEl}shouldIgnoreMouse(){return kg||this.isTouchDragging}cancelTouchScroll(){this.isDragging&&(Ag=!0)}initScrollWatch(e){this.shouldWatchScroll&&(this.recordCoords(e),window.addEventListener("scroll",this.handleScroll,!0))}recordCoords(e){this.shouldWatchScroll&&(this.prevPageX=e.pageX,this.prevPageY=e.pageY,this.prevScrollX=window.scrollX,this.prevScrollY=window.scrollY)}destroyScrollWatch(){this.shouldWatchScroll&&window.removeEventListener("scroll",this.handleScroll,!0)}createEventFromMouse(e,n){let r=0,i=0;return n?(this.origPageX=e.pageX,this.origPageY=e.pageY):(r=e.pageX-this.origPageX,i=e.pageY-this.origPageY),{origEvent:e,isTouch:!1,subjectEl:this.subjectEl,pageX:e.pageX,pageY:e.pageY,deltaX:r,deltaY:i}}createEventFromTouch(e,n){let r=e.touches,i,s,a=0,c=0;return r&&r.length?(i=r[0].pageX,s=r[0].pageY):(i=e.pageX,s=e.pageY),n?(this.origPageX=i,this.origPageY=s):(a=i-this.origPageX,c=s-this.origPageY),{origEvent:e,isTouch:!0,subjectEl:this.subjectEl,pageX:i,pageY:s,deltaX:a,deltaY:c}}}function KH(t){return t.button===0&&!t.ctrlKey}function ZH(){kg+=1,setTimeout(()=>{kg-=1},Nm.touchMouseIgnoreWait)}function XH(){Dd+=1,Dd===1&&window.addEventListener("touchmove",DC,{passive:!1})}function JH(){Dd-=1,Dd||window.removeEventListener("touchmove",DC,{passive:!1})}function DC(t){Ag&&t.preventDefault()}class ez{constructor(){this.isVisible=!1,this.sourceEl=null,this.mirrorEl=null,this.sourceElRect=null,this.parentNode=document.body,this.zIndex=9999,this.revertDuration=0}start(e,n,r){this.sourceEl=e,this.sourceElRect=this.sourceEl.getBoundingClientRect(),this.origScreenX=n-window.scrollX,this.origScreenY=r-window.scrollY,this.deltaX=0,this.deltaY=0,this.updateElPosition()}handleMove(e,n){this.deltaX=e-window.scrollX-this.origScreenX,this.deltaY=n-window.scrollY-this.origScreenY,this.updateElPosition()}setIsVisible(e){e?this.isVisible||(this.mirrorEl&&(this.mirrorEl.style.display=""),this.isVisible=e,this.updateElPosition()):this.isVisible&&(this.mirrorEl&&(this.mirrorEl.style.display="none"),this.isVisible=e)}stop(e,n){let r=()=>{this.cleanup(),n()};e&&this.mirrorEl&&this.isVisible&&this.revertDuration&&(this.deltaX||this.deltaY)?this.doRevertAnimation(r,this.revertDuration):setTimeout(r,0)}doRevertAnimation(e,n){let r=this.mirrorEl,i=this.sourceEl.getBoundingClientRect();r.style.transition="top "+n+"ms,left "+n+"ms",vl(r,{left:i.left,top:i.top}),KI(r,()=>{r.style.transition="",e()})}cleanup(){this.mirrorEl&&(cm(this.mirrorEl),this.mirrorEl=null),this.sourceEl=null}updateElPosition(){this.sourceEl&&this.isVisible&&vl(this.getMirrorEl(),{left:this.sourceElRect.left+this.deltaX,top:this.sourceElRect.top+this.deltaY})}getMirrorEl(){let e=this.sourceElRect,n=this.mirrorEl;return n||(n=this.mirrorEl=this.sourceEl.cloneNode(!0),n.style.userSelect="none",n.style.webkitUserSelect="none",n.style.pointerEvents="none",n.classList.add("fc-event-dragging"),vl(n,{position:"fixed",zIndex:this.zIndex,visibility:"",boxSizing:"border-box",width:e.right-e.left,height:e.bottom-e.top,right:"auto",bottom:"auto",margin:0}),this.parentNode.appendChild(n)),n}}class kC extends Om{constructor(e,n){super(),this.handleScroll=()=>{this.scrollTop=this.scrollController.getScrollTop(),this.scrollLeft=this.scrollController.getScrollLeft(),this.handleScrollChange()},this.scrollController=e,this.doesListening=n,this.scrollTop=this.origScrollTop=e.getScrollTop(),this.scrollLeft=this.origScrollLeft=e.getScrollLeft(),this.scrollWidth=e.getScrollWidth(),this.scrollHeight=e.getScrollHeight(),this.clientWidth=e.getClientWidth(),this.clientHeight=e.getClientHeight(),this.clientRect=this.computeClientRect(),this.doesListening&&this.getEventTarget().addEventListener("scroll",this.handleScroll)}destroy(){this.doesListening&&this.getEventTarget().removeEventListener("scroll",this.handleScroll)}getScrollTop(){return this.scrollTop}getScrollLeft(){return this.scrollLeft}setScrollTop(e){this.scrollController.setScrollTop(e),this.doesListening||(this.scrollTop=Math.max(Math.min(e,this.getMaxScrollTop()),0),this.handleScrollChange())}setScrollLeft(e){this.scrollController.setScrollLeft(e),this.doesListening||(this.scrollLeft=Math.max(Math.min(e,this.getMaxScrollLeft()),0),this.handleScrollChange())}getClientWidth(){return this.clientWidth}getClientHeight(){return this.clientHeight}getScrollWidth(){return this.scrollWidth}getScrollHeight(){return this.scrollHeight}handleScrollChange(){}}class AC extends kC{constructor(e,n){super(new SF(e),n)}getEventTarget(){return this.scrollController.el}computeClientRect(){return bF(this.scrollController.el)}}class tz extends kC{constructor(e){super(new wF,e)}getEventTarget(){return window}computeClientRect(){return{left:this.scrollLeft,right:this.scrollLeft+this.clientWidth,top:this.scrollTop,bottom:this.scrollTop+this.clientHeight}}handleScrollChange(){this.clientRect=this.computeClientRect()}}const q_=typeof performance=="function"?performance.now:Date.now;class nz{constructor(){this.isEnabled=!0,this.scrollQuery=[window,".fc-scroller"],this.edgeThreshold=50,this.maxVelocity=300,this.pointerScreenX=null,this.pointerScreenY=null,this.isAnimating=!1,this.scrollCaches=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.animate=()=>{if(this.isAnimating){let e=this.computeBestEdge(this.pointerScreenX+window.scrollX,this.pointerScreenY+window.scrollY);if(e){let n=q_();this.handleSide(e,(n-this.msSinceRequest)/1e3),this.requestAnimation(n)}else this.isAnimating=!1}}}start(e,n,r){this.isEnabled&&(this.scrollCaches=this.buildCaches(r),this.pointerScreenX=null,this.pointerScreenY=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.handleMove(e,n))}handleMove(e,n){if(this.isEnabled){let r=e-window.scrollX,i=n-window.scrollY,s=this.pointerScreenY===null?0:i-this.pointerScreenY,a=this.pointerScreenX===null?0:r-this.pointerScreenX;s<0?this.everMovedUp=!0:s>0&&(this.everMovedDown=!0),a<0?this.everMovedLeft=!0:a>0&&(this.everMovedRight=!0),this.pointerScreenX=r,this.pointerScreenY=i,this.isAnimating||(this.isAnimating=!0,this.requestAnimation(q_()))}}stop(){if(this.isEnabled){this.isAnimating=!1;for(let e of this.scrollCaches)e.destroy();this.scrollCaches=null}}requestAnimation(e){this.msSinceRequest=e,requestAnimationFrame(this.animate)}handleSide(e,n){let{scrollCache:r}=e,{edgeThreshold:i}=this,s=i-e.distance,a=s*s/(i*i)*this.maxVelocity*n,c=1;switch(e.name){case"left":c=-1;case"right":r.setScrollLeft(r.getScrollLeft()+a*c);break;case"top":c=-1;case"bottom":r.setScrollTop(r.getScrollTop()+a*c);break}}computeBestEdge(e,n){let{edgeThreshold:r}=this,i=null,s=this.scrollCaches||[];for(let a of s){let c=a.clientRect,u=e-c.left,d=c.right-e,f=n-c.top,p=c.bottom-n;u>=0&&d>=0&&f>=0&&p>=0&&(f<=r&&this.everMovedUp&&a.canScrollUp()&&(!i||i.distance>f)&&(i={scrollCache:a,name:"top",distance:f}),p<=r&&this.everMovedDown&&a.canScrollDown()&&(!i||i.distance>p)&&(i={scrollCache:a,name:"bottom",distance:p}),u<=r&&this.everMovedLeft&&a.canScrollLeft()&&(!i||i.distance>u)&&(i={scrollCache:a,name:"left",distance:u}),d<=r&&this.everMovedRight&&a.canScrollRight()&&(!i||i.distance>d)&&(i={scrollCache:a,name:"right",distance:d}))}return i}buildCaches(e){return this.queryScrollEls(e).map(n=>n===window?new tz(!1):new AC(n,!1))}queryScrollEls(e){let n=[];for(let r of this.scrollQuery)typeof r=="object"?n.push(r):n.push(...Array.prototype.slice.call(e.getRootNode().querySelectorAll(r)));return n}}class tc extends CF{constructor(e,n){super(e),this.containerEl=e,this.delay=null,this.minDistance=0,this.touchScrollAllowed=!0,this.mirrorNeedsRevert=!1,this.isInteracting=!1,this.isDragging=!1,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,this.delayTimeoutId=null,this.onPointerDown=i=>{this.isDragging||(this.isInteracting=!0,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,ZI(document.body),JI(document.body),i.isTouch||i.origEvent.preventDefault(),this.emitter.trigger("pointerdown",i),this.isInteracting&&!this.pointer.shouldIgnoreMove&&(this.mirror.setIsVisible(!1),this.mirror.start(i.subjectEl,i.pageX,i.pageY),this.startDelay(i),this.minDistance||this.handleDistanceSurpassed(i)))},this.onPointerMove=i=>{if(this.isInteracting){if(this.emitter.trigger("pointermove",i),!this.isDistanceSurpassed){let s=this.minDistance,a,{deltaX:c,deltaY:u}=i;a=c*c+u*u,a>=s*s&&this.handleDistanceSurpassed(i)}this.isDragging&&(i.origEvent.type!=="scroll"&&(this.mirror.handleMove(i.pageX,i.pageY),this.autoScroller.handleMove(i.pageX,i.pageY)),this.emitter.trigger("dragmove",i))}},this.onPointerUp=i=>{this.isInteracting&&(this.isInteracting=!1,XI(document.body),eP(document.body),this.emitter.trigger("pointerup",i),this.isDragging&&(this.autoScroller.stop(),this.tryStopDrag(i)),this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null))};let r=this.pointer=new TC(e);r.emitter.on("pointerdown",this.onPointerDown),r.emitter.on("pointermove",this.onPointerMove),r.emitter.on("pointerup",this.onPointerUp),n&&(r.selector=n),this.mirror=new ez,this.autoScroller=new nz}destroy(){this.pointer.destroy(),this.onPointerUp({})}startDelay(e){typeof this.delay=="number"?this.delayTimeoutId=setTimeout(()=>{this.delayTimeoutId=null,this.handleDelayEnd(e)},this.delay):this.handleDelayEnd(e)}handleDelayEnd(e){this.isDelayEnded=!0,this.tryStartDrag(e)}handleDistanceSurpassed(e){this.isDistanceSurpassed=!0,this.tryStartDrag(e)}tryStartDrag(e){this.isDelayEnded&&this.isDistanceSurpassed&&(!this.pointer.wasTouchScroll||this.touchScrollAllowed)&&(this.isDragging=!0,this.mirrorNeedsRevert=!1,this.autoScroller.start(e.pageX,e.pageY,this.containerEl),this.emitter.trigger("dragstart",e),this.touchScrollAllowed===!1&&this.pointer.cancelTouchScroll())}tryStopDrag(e){this.mirror.stop(this.mirrorNeedsRevert,this.stopDrag.bind(this,e))}stopDrag(e){this.isDragging=!1,this.emitter.trigger("dragend",e)}setIgnoreMove(e){this.pointer.shouldIgnoreMove=e}setMirrorIsVisible(e){this.mirror.setIsVisible(e)}setMirrorNeedsRevert(e){this.mirrorNeedsRevert=e}setAutoScrollEnabled(e){this.autoScroller.isEnabled=e}}class rz{constructor(e){this.el=e,this.origRect=Rm(e),this.scrollCaches=HE(e).map(n=>new AC(n,!0))}destroy(){for(let e of this.scrollCaches)e.destroy()}computeLeft(){let e=this.origRect.left;for(let n of this.scrollCaches)e+=n.origScrollLeft-n.getScrollLeft();return e}computeTop(){let e=this.origRect.top;for(let n of this.scrollCaches)e+=n.origScrollTop-n.getScrollTop();return e}isWithinClipping(e,n){let r={left:e,top:n};for(let i of this.scrollCaches)if(!iz(i.getEventTarget())&&!aF(r,i.clientRect))return!1;return!0}}function iz(t){let e=t.tagName;return e==="HTML"||e==="BODY"}class uf{constructor(e,n){this.useSubjectCenter=!1,this.requireInitial=!0,this.disablePointCheck=!1,this.initialHit=null,this.movingHit=null,this.finalHit=null,this.handlePointerDown=r=>{let{dragging:i}=this;this.initialHit=null,this.movingHit=null,this.finalHit=null,this.prepareHits(),this.processFirstCoord(r),this.initialHit||!this.requireInitial?(i.setIgnoreMove(!1),this.emitter.trigger("pointerdown",r)):i.setIgnoreMove(!0)},this.handleDragStart=r=>{this.emitter.trigger("dragstart",r),this.handleMove(r,!0)},this.handleDragMove=r=>{this.emitter.trigger("dragmove",r),this.handleMove(r)},this.handlePointerUp=r=>{this.releaseHits(),this.emitter.trigger("pointerup",r)},this.handleDragEnd=r=>{this.movingHit&&this.emitter.trigger("hitupdate",null,!0,r),this.finalHit=this.movingHit,this.movingHit=null,this.emitter.trigger("dragend",r)},this.droppableStore=n,e.emitter.on("pointerdown",this.handlePointerDown),e.emitter.on("dragstart",this.handleDragStart),e.emitter.on("dragmove",this.handleDragMove),e.emitter.on("pointerup",this.handlePointerUp),e.emitter.on("dragend",this.handleDragEnd),this.dragging=e,this.emitter=new of}processFirstCoord(e){let n={left:e.pageX,top:e.pageY},r=n,i=e.subjectEl,s;i instanceof HTMLElement&&(s=Rm(i),r=oF(r,s));let a=this.initialHit=this.queryHitForOffset(r.left,r.top);if(a){if(this.useSubjectCenter&&s){let c=FE(s,a.rect);c&&(r=lF(c))}this.coordAdjust=cF(r,n)}else this.coordAdjust={left:0,top:0}}handleMove(e,n){let r=this.queryHitForOffset(e.pageX+this.coordAdjust.left,e.pageY+this.coordAdjust.top);(n||!df(this.movingHit,r))&&(this.movingHit=r,this.emitter.trigger("hitupdate",r,!1,e))}prepareHits(){this.offsetTrackers=Li(this.droppableStore,e=>(e.component.prepareHits(),new rz(e.el)))}releaseHits(){let{offsetTrackers:e}=this;for(let n in e)e[n].destroy();this.offsetTrackers={}}queryHitForOffset(e,n){let{droppableStore:r,offsetTrackers:i}=this,s=null;for(let a in r){let c=r[a].component,u=i[a];if(u&&u.isWithinClipping(e,n)){let d=u.computeLeft(),f=u.computeTop(),p=e-d,m=n-f,{origRect:v}=u,b=v.right-v.left,_=v.bottom-v.top;if(p>=0&&p<b&&m>=0&&m<_){let w=c.queryHit(p,m,b,_);w&&sf(w.dateProfile.activeRange,w.dateSpan.range)&&(this.disablePointCheck||u.el.contains(u.el.getRootNode().elementFromPoint(p+d-window.scrollX,m+f-window.scrollY)))&&(!s||w.layer>s.layer)&&(w.componentId=a,w.context=c.context,w.rect.left+=d,w.rect.right+=d,w.rect.top+=f,w.rect.bottom+=f,s=w)}}}return s}}function df(t,e){return!t&&!e?!0:!!t!=!!e?!1:QL(t.dateSpan,e.dateSpan)}function RC(t,e){let n={};for(let r of e.pluginHooks.datePointTransforms)Object.assign(n,r(t,e));return Object.assign(n,sz(t,e.dateEnv)),n}function sz(t,e){return{date:e.toDate(t.range.start),dateStr:e.formatIso(t.range.start,{omitTime:t.allDay}),allDay:t.allDay}}class az extends vo{constructor(e){super(e),this.handlePointerDown=r=>{let{dragging:i}=this,s=r.origEvent.target;i.setIgnoreMove(!this.component.isValidDateDownEl(s))},this.handleDragEnd=r=>{let{component:i}=this,{pointer:s}=this.dragging;if(!s.wasTouchScroll){let{initialHit:a,finalHit:c}=this.hitDragging;if(a&&c&&df(a,c)){let{context:u}=i,d=Object.assign(Object.assign({},RC(a.dateSpan,u)),{dayEl:a.dayEl,jsEvent:r.origEvent,view:u.viewApi||u.calendarApi.view});u.emitter.trigger("dateClick",d)}}},this.dragging=new tc(e.el),this.dragging.autoScroller.isEnabled=!1;let n=this.hitDragging=new uf(this.dragging,km(e));n.emitter.on("pointerdown",this.handlePointerDown),n.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}}class oz extends vo{constructor(e){super(e),this.dragSelection=null,this.handlePointerDown=a=>{let{component:c,dragging:u}=this,{options:d}=c.context,f=d.selectable&&c.isValidDateDownEl(a.origEvent.target);u.setIgnoreMove(!f),u.delay=a.isTouch?lz(c):null},this.handleDragStart=a=>{this.component.context.calendarApi.unselect(a)},this.handleHitUpdate=(a,c)=>{let{context:u}=this.component,d=null,f=!1;if(a){let p=this.hitDragging.initialHit;a.componentId===p.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(p,a)||(d=cz(p,a,u.pluginHooks.dateSelectionTransformers)),(!d||!OF(d,a.dateProfile,u))&&(f=!0,d=null)}d?u.dispatch({type:"SELECT_DATES",selection:d}):c||u.dispatch({type:"UNSELECT_DATES"}),f?um():dm(),c||(this.dragSelection=d)},this.handlePointerUp=a=>{this.dragSelection&&(RE(this.dragSelection,a,this.component.context),this.dragSelection=null)};let{component:n}=e,{options:r}=n.context,i=this.dragging=new tc(e.el);i.touchScrollAllowed=!1,i.minDistance=r.selectMinDistance||0,i.autoScroller.isEnabled=r.dragScroll;let s=this.hitDragging=new uf(this.dragging,km(e));s.emitter.on("pointerdown",this.handlePointerDown),s.emitter.on("dragstart",this.handleDragStart),s.emitter.on("hitupdate",this.handleHitUpdate),s.emitter.on("pointerup",this.handlePointerUp)}destroy(){this.dragging.destroy()}}function lz(t){let{options:e}=t.context,n=e.selectLongPressDelay;return n==null&&(n=e.longPressDelay),n}function cz(t,e,n){let r=t.dateSpan,i=e.dateSpan,s=[r.range.start,r.range.end,i.range.start,i.range.end];s.sort(sP);let a={};for(let c of n){let u=c(t,e);if(u===!1)return null;u&&Object.assign(a,u)}return a.range={start:s[0],end:s[3]},a.allDay=r.allDay,a}class nc extends vo{constructor(e){super(e),this.subjectEl=null,this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=a=>{let c=a.origEvent.target,{component:u,dragging:d}=this,{mirror:f}=d,{options:p}=u.context,m=u.context;this.subjectEl=a.subjectEl;let v=this.subjectSeg=so(a.subjectEl),_=(this.eventRange=v.eventRange).instance.instanceId;this.relevantEvents=wm(m.getCurrentData().eventStore,_),d.minDistance=a.isTouch?0:p.eventDragMinDistance,d.delay=a.isTouch&&_!==u.props.eventSelection?dz(u):null,p.fixedMirrorParent?f.parentNode=p.fixedMirrorParent:f.parentNode=Tn(c,".fc"),f.revertDuration=p.dragRevertDuration;let w=u.isValidSegDownEl(c)&&!Tn(c,".fc-event-resizer");d.setIgnoreMove(!w),this.isDragging=w&&a.subjectEl.classList.contains("fc-event-draggable")},this.handleDragStart=a=>{let c=this.component.context,u=this.eventRange,d=u.instance.instanceId;a.isTouch?d!==this.component.props.eventSelection&&c.dispatch({type:"SELECT_EVENT",eventInstanceId:d}):c.dispatch({type:"UNSELECT_EVENT"}),this.isDragging&&(c.calendarApi.unselect(a),c.emitter.trigger("eventDragStart",{el:this.subjectEl,event:new At(c,u.def,u.instance),jsEvent:a.origEvent,view:c.viewApi}))},this.handleHitUpdate=(a,c)=>{if(!this.isDragging)return;let u=this.relevantEvents,d=this.hitDragging.initialHit,f=this.component.context,p=null,m=null,v=null,b=!1,_={affectedEvents:u,mutatedEvents:cr(),isEvent:!0};if(a){p=a.context;let w=p.options;f===p||w.editable&&w.droppable?(m=uz(d,a,this.eventRange.instance.range.start,p.getCurrentData().pluginHooks.eventDragMutationMassagers),m&&(v=Cm(u,p.getCurrentData().eventUiBases,m,p),_.mutatedEvents=v,GE(_,a.dateProfile,p)||(b=!0,m=null,v=null,_.mutatedEvents=cr()))):p=null}this.displayDrag(p,_),b?um():dm(),c||(f===p&&df(d,a)&&(m=null),this.dragging.setMirrorNeedsRevert(!m),this.dragging.setMirrorIsVisible(!a||!this.subjectEl.getRootNode().querySelector(".fc-event-mirror")),this.receivingContext=p,this.validMutation=m,this.mutatedRelevantEvents=v)},this.handlePointerUp=()=>{this.isDragging||this.cleanup()},this.handleDragEnd=a=>{if(this.isDragging){let c=this.component.context,u=c.viewApi,{receivingContext:d,validMutation:f}=this,p=this.eventRange.def,m=this.eventRange.instance,v=new At(c,p,m),b=this.relevantEvents,_=this.mutatedRelevantEvents,{finalHit:w}=this.hitDragging;if(this.clearDrag(),c.emitter.trigger("eventDragStop",{el:this.subjectEl,event:v,jsEvent:a.origEvent,view:u}),f){if(d===c){let x=new At(c,_.defs[p.defId],m?_.instances[m.instanceId]:null);c.dispatch({type:"MERGE_EVENTS",eventStore:_});let C={oldEvent:v,event:x,relatedEvents:ra(_,c,m),revert(){c.dispatch({type:"MERGE_EVENTS",eventStore:b})}},k={};for(let R of c.getCurrentData().pluginHooks.eventDropTransformers)Object.assign(k,R(f,c));c.emitter.trigger("eventDrop",Object.assign(Object.assign(Object.assign({},C),k),{el:a.subjectEl,delta:f.datesDelta,jsEvent:a.origEvent,view:u})),c.emitter.trigger("eventChange",C)}else if(d){let x={event:v,relatedEvents:ra(b,c,m),revert(){c.dispatch({type:"MERGE_EVENTS",eventStore:b})}};c.emitter.trigger("eventLeave",Object.assign(Object.assign({},x),{draggedEl:a.subjectEl,view:u})),c.dispatch({type:"REMOVE_EVENTS",eventStore:b}),c.emitter.trigger("eventRemove",x);let C=_.defs[p.defId],k=_.instances[m.instanceId],R=new At(d,C,k);d.dispatch({type:"MERGE_EVENTS",eventStore:_});let A={event:R,relatedEvents:ra(_,d,k),revert(){d.dispatch({type:"REMOVE_EVENTS",eventStore:_})}};d.emitter.trigger("eventAdd",A),a.isTouch&&d.dispatch({type:"SELECT_EVENT",eventInstanceId:m.instanceId}),d.emitter.trigger("drop",Object.assign(Object.assign({},RC(w.dateSpan,d)),{draggedEl:a.subjectEl,jsEvent:a.origEvent,view:w.context.viewApi})),d.emitter.trigger("eventReceive",Object.assign(Object.assign({},A),{draggedEl:a.subjectEl,view:w.context.viewApi}))}}else c.emitter.trigger("_noEventDrop")}this.cleanup()};let{component:n}=this,{options:r}=n.context,i=this.dragging=new tc(e.el);i.pointer.selector=nc.SELECTOR,i.touchScrollAllowed=!1,i.autoScroller.isEnabled=r.dragScroll;let s=this.hitDragging=new uf(this.dragging,xg);s.useSubjectCenter=e.useEventCenter,s.emitter.on("pointerdown",this.handlePointerDown),s.emitter.on("dragstart",this.handleDragStart),s.emitter.on("hitupdate",this.handleHitUpdate),s.emitter.on("pointerup",this.handlePointerUp),s.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}displayDrag(e,n){let r=this.component.context,i=this.receivingContext;i&&i!==e&&(i===r?i.dispatch({type:"SET_EVENT_DRAG",state:{affectedEvents:n.affectedEvents,mutatedEvents:cr(),isEvent:!0}}):i.dispatch({type:"UNSET_EVENT_DRAG"})),e&&e.dispatch({type:"SET_EVENT_DRAG",state:n})}clearDrag(){let e=this.component.context,{receivingContext:n}=this;n&&n.dispatch({type:"UNSET_EVENT_DRAG"}),e!==n&&e.dispatch({type:"UNSET_EVENT_DRAG"})}cleanup(){this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null}}nc.SELECTOR=".fc-event-draggable, .fc-event-resizable";function uz(t,e,n,r){let i=t.dateSpan,s=e.dateSpan,a=i.range.start,c=s.range.start,u={};i.allDay!==s.allDay&&(u.allDay=s.allDay,u.hasEnd=e.context.options.allDayMaintainDuration,s.allDay?a=bt(n):a=n);let d=Za(a,c,t.context.dateEnv,t.componentId===e.componentId?t.largeUnit:null);d.milliseconds&&(u.allDay=!1);let f={datesDelta:d,standardProps:u};for(let p of r)p(f,t,e);return f}function dz(t){let{options:e}=t.context,n=e.eventLongPressDelay;return n==null&&(n=e.longPressDelay),n}class fz extends vo{constructor(e){super(e),this.draggingSegEl=null,this.draggingSeg=null,this.eventRange=null,this.relevantEvents=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=s=>{let{component:a}=this,c=this.querySegEl(s),u=so(c),d=this.eventRange=u.eventRange;this.dragging.minDistance=a.context.options.eventDragMinDistance,this.dragging.setIgnoreMove(!this.component.isValidSegDownEl(s.origEvent.target)||s.isTouch&&this.component.props.eventSelection!==d.instance.instanceId)},this.handleDragStart=s=>{let{context:a}=this.component,c=this.eventRange;this.relevantEvents=wm(a.getCurrentData().eventStore,this.eventRange.instance.instanceId);let u=this.querySegEl(s);this.draggingSegEl=u,this.draggingSeg=so(u),a.calendarApi.unselect(),a.emitter.trigger("eventResizeStart",{el:u,event:new At(a,c.def,c.instance),jsEvent:s.origEvent,view:a.viewApi})},this.handleHitUpdate=(s,a,c)=>{let{context:u}=this.component,d=this.relevantEvents,f=this.hitDragging.initialHit,p=this.eventRange.instance,m=null,v=null,b=!1,_={affectedEvents:d,mutatedEvents:cr(),isEvent:!0};s&&(s.componentId===f.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(f,s)||(m=hz(f,s,c.subjectEl.classList.contains("fc-event-resizer-start"),p.range))),m&&(v=Cm(d,u.getCurrentData().eventUiBases,m,u),_.mutatedEvents=v,GE(_,s.dateProfile,u)||(b=!0,m=null,v=null,_.mutatedEvents=null)),v?u.dispatch({type:"SET_EVENT_RESIZE",state:_}):u.dispatch({type:"UNSET_EVENT_RESIZE"}),b?um():dm(),a||(m&&df(f,s)&&(m=null),this.validMutation=m,this.mutatedRelevantEvents=v)},this.handleDragEnd=s=>{let{context:a}=this.component,c=this.eventRange.def,u=this.eventRange.instance,d=new At(a,c,u),f=this.relevantEvents,p=this.mutatedRelevantEvents;if(a.emitter.trigger("eventResizeStop",{el:this.draggingSegEl,event:d,jsEvent:s.origEvent,view:a.viewApi}),this.validMutation){let m=new At(a,p.defs[c.defId],u?p.instances[u.instanceId]:null);a.dispatch({type:"MERGE_EVENTS",eventStore:p});let v={oldEvent:d,event:m,relatedEvents:ra(p,a,u),revert(){a.dispatch({type:"MERGE_EVENTS",eventStore:f})}};a.emitter.trigger("eventResize",Object.assign(Object.assign({},v),{el:this.draggingSegEl,startDelta:this.validMutation.startDelta||Ye(0),endDelta:this.validMutation.endDelta||Ye(0),jsEvent:s.origEvent,view:a.viewApi})),a.emitter.trigger("eventChange",v)}else a.emitter.trigger("_noEventResize");this.draggingSeg=null,this.relevantEvents=null,this.validMutation=null};let{component:n}=e,r=this.dragging=new tc(e.el);r.pointer.selector=".fc-event-resizer",r.touchScrollAllowed=!1,r.autoScroller.isEnabled=n.context.options.dragScroll;let i=this.hitDragging=new uf(this.dragging,km(e));i.emitter.on("pointerdown",this.handlePointerDown),i.emitter.on("dragstart",this.handleDragStart),i.emitter.on("hitupdate",this.handleHitUpdate),i.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}querySegEl(e){return Tn(e.subjectEl,".fc-event")}}function hz(t,e,n,r){let i=t.context.dateEnv,s=t.dateSpan.range.start,a=e.dateSpan.range.start,c=Za(s,a,i,t.largeUnit);if(n){if(i.add(r.start,c)<r.end)return{startDelta:c}}else if(i.add(r.end,c)>r.start)return{endDelta:c};return null}class pz{constructor(e){this.context=e,this.isRecentPointerDateSelect=!1,this.matchesCancel=!1,this.matchesEvent=!1,this.onSelect=r=>{r.jsEvent&&(this.isRecentPointerDateSelect=!0)},this.onDocumentPointerDown=r=>{let i=this.context.options.unselectCancel,s=lE(r.origEvent);this.matchesCancel=!!Tn(s,i),this.matchesEvent=!!Tn(s,nc.SELECTOR)},this.onDocumentPointerUp=r=>{let{context:i}=this,{documentPointer:s}=this,a=i.getCurrentData();if(!s.wasTouchScroll){if(a.dateSelection&&!this.isRecentPointerDateSelect){let c=i.options.unselectAuto;c&&(!c||!this.matchesCancel)&&i.calendarApi.unselect(r)}a.eventSelection&&!this.matchesEvent&&i.dispatch({type:"UNSELECT_EVENT"})}this.isRecentPointerDateSelect=!1};let n=this.documentPointer=new TC(document);n.shouldIgnoreMove=!0,n.shouldWatchScroll=!1,n.emitter.on("pointerdown",this.onDocumentPointerDown),n.emitter.on("pointerup",this.onDocumentPointerUp),e.emitter.on("select",this.onSelect)}destroy(){this.context.emitter.off("select",this.onSelect),this.documentPointer.destroy()}}const gz={fixedMirrorParent:W},mz={dateClick:W,eventDragStart:W,eventDragStop:W,eventDrop:W,eventResizeStart:W,eventResizeStop:W,eventResize:W,drop:W,eventReceive:W,eventLeave:W};Nm.dataAttrPrefix="";var vz=li({name:"@fullcalendar/interaction",componentInteractions:[az,oz,nc,fz],calendarInteractions:[pz],elementDraggingImpl:tc,optionRefiners:gz,listenerRefiners:mz});function yz({machineId:t,refreshTrigger:e}){const[n,r]=D.useState(!1),[i,s]=D.useState({}),a=Q.useRef(null),{entities:c}=tm(),{entities:u}=cd(),{machineAvailability:d,loadMachineAvailabilityForDateRange:f,toggleMachineHourAvailability:p,getTaskOccupiedSegments:m}=Zl(),{showAlert:v}=bn(),b=c.find(A=>A.id===t),_=D.useCallback(A=>{try{const M=m(A);return M&&M.length>0?M:A.scheduled_start_time&&A.scheduled_end_time?[{start:new Date(A.scheduled_start_time),end:new Date(A.scheduled_end_time),duration:(new Date(A.scheduled_end_time).getTime()-new Date(A.scheduled_start_time).getTime())/(1e3*60*60)}]:[]}catch(M){return console.warn("Failed to get task segments:",M),[]}},[m]),w=D.useMemo(()=>{if(!b)return[];const A=[];return u.filter(M=>M.status==="SCHEDULED"&&M.scheduled_machine_id===b.id&&M.scheduled_start_time&&M.scheduled_end_time).forEach(M=>{const P=_(M);P.forEach((O,H)=>{const B=P.length>1;A.push({id:`${M.id}-segment-${H}`,title:`${M.odp_number} - ${M.article_code}${B?` (${H+1}/${P.length})`:""}`,start:O.start,end:O.end,backgroundColor:B?"#8b5cf6":"#3b82f6",borderColor:B?"#7c3aed":"#2563eb",textColor:"#ffffff",extendedProps:{taskId:M.id,odpNumber:M.odp_number,articleCode:M.article_code,quantity:M.quantity,status:M.status,segmentIndex:H,totalSegments:P.length,isSplitTask:B}})})}),A},[b,u,_]),x=D.useMemo(()=>{if(!d||!b)return[];const A=[];return Object.entries(d).forEach(([M,P])=>{if(Array.isArray(P)){const O=P.find(H=>H.machine_id===t);O&&O.unavailable_hours&&(Array.isArray(O.unavailable_hours)?O.unavailable_hours:[]).forEach(B=>{const $=parseInt(B);if($<6||$>=22)return;const ee=new Date(M);ee.setUTCHours($,0,0,0);const re=new Date(ee);re.setUTCHours($+1,0,0,0),A.push({id:`availability-${M}-${B}`,title:"Unavailable",start:ee,end:re,backgroundColor:"#ef4444",borderColor:"#dc2626",textColor:"#ffffff",display:"background",extendedProps:{type:"availability",date:M,hour:parseInt(B)}})})}}),A},[d,t,b]);D.useEffect(()=>{(async()=>{if(t){r(!0);try{const M=new Date,P=new Date(Date.UTC(M.getUTCFullYear(),M.getUTCMonth(),1)),O=new Date(Date.UTC(M.getUTCFullYear(),M.getUTCMonth()+1,0));await f(t,pn(P,"yyyy-MM-dd"),pn(O,"yyyy-MM-dd"))}catch(M){console.error("Failed to load machine availability data:",M)}finally{r(!1)}}})()},[t,e]);const C=D.useCallback(async A=>{const M=A.date,P=pn(M,"yyyy-MM-dd"),O=M.getUTCHours();if(w.some($=>{const ee=new Date($.start),re=new Date($.end),he=new Date(M);return he>=ee&&he<re})){v("Cannot mark time slot as unavailable - it has scheduled tasks","error");return}if(!b)return;const B=`${P}-${O}`;s($=>({...$,[B]:!0}));try{await p(b.id,P,O)}catch($){console.error("Failed to toggle machine hour availability:",$),v("An unexpected error occurred.","error")}finally{s($=>({...$,[B]:!1}))}},[w,v,b,p]),k=D.useCallback(A=>{const M=A.event,P=M.extendedProps;P.type==="availability"?console.log("Availability event clicked:",P):console.log("Scheduled task clicked:",{odpNumber:P.odpNumber,articleCode:P.articleCode,quantity:P.quantity,start:M.start,end:M.end})},[]),R=D.useMemo(()=>({plugins:[Kj,PH,QH,vz],initialView:"dayGridMonth",initialDate:new Date,headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},height:"auto",locale:"it",timeZone:"UTC",firstDay:$O.APP.FIRST_DAY_OF_WEEK,slotMinTime:"06:00:00",slotMaxTime:"22:00:00",slotDuration:"01:00:00",slotLabelInterval:"01:00:00",allDaySlot:!1,weekends:!0,editable:!1,selectable:!0,selectMirror:!0,dayMaxEvents:!0,eventDisplay:"block",eventTimeFormat:{hour:"2-digit",minute:"2-digit",meridiem:!1,hour12:!1},dayHeaderFormat:{weekday:"short",day:"numeric"},slotLabelFormat:{hour:"2-digit",minute:"2-digit",meridiem:!1,hour12:!1},buttonText:{today:"Oggi",month:"Mese",week:"Settimana",day:"Giorno"},eventClick:k,dateClick:C,events:[...w,...x]}),[k,C,w,x]);return b?n?E.jsx("div",{className:"loading",children:"Loading calendar data..."}):E.jsx("div",{className:"fullcalendar-container",children:E.jsx(hC,{ref:a,...R})}):E.jsx("div",{className:"loading",children:"Loading machine data..."})}function bz(){const{machineId:t}=Wd(),[e,n]=D.useState(0),{getMachineById:r}=tm(),{isLoading:i,isInitialized:s}=bn(),{init:a,cleanup:c}=xs(),u=r(t);if(D.useEffect(()=>{if(!s){console.log("Initializing main store...");const f=a(),p=new Promise((m,v)=>setTimeout(()=>v(new Error("Initialization timeout")),1e4));Promise.race([f,p]).catch(m=>{console.error("Initialization failed or timed out:",m)})}return()=>{c()}},[a,s,c]),i)return E.jsx("div",{className:"p-1 bg-white rounded shadow-sm border",children:E.jsxs("div",{className:"text-center py-1 text-gray-500 text-[10px]",children:["Caricamento calendario macchina... (Loading: ",i.toString(),", Initialized: ",s.toString(),")"]})});if(!u)return E.jsx("div",{className:"p-1 bg-white rounded shadow-sm border",children:E.jsxs("div",{className:"text-center py-1 text-red-600 text-[10px]",children:["Macchina non trovata (ID: ",t,", Initialized: ",s.toString(),")"]})});const d=()=>{n(f=>f+1)};return E.jsxs("div",{className:"p-1 bg-white rounded shadow-sm border",children:[E.jsx(yI,{title:"Calendario Disponibilit Macchina"}),E.jsx("div",{className:"mb-1",children:E.jsx("h3",{className:"text-[10px] font-semibold text-gray-900",children:u.machine_name})}),!1,E.jsx(bI,{machineId:u.id,currentDate:new Date,onSuccess:d}),E.jsx(yz,{machineId:u.id,refreshTrigger:e})]})}function _z(){const{data:t=[],isLoading:e,error:n}=am(),r=fI(),{selectedWorkCenter:i,isInitialized:s,showConfirmDialog:a}=bn(),{init:c,cleanup:u}=xs(),d=oi(),f=D.useMemo(()=>i?i===Je.BOTH?t:t.filter(b=>b.work_center===i):[],[t,i]);D.useEffect(()=>(s||c(),()=>{u()}),[c,s,u]);const p=D.useMemo(()=>[{header:"Nome Fase",accessorKey:"name"},{header:"Centro di Lavoro",accessorKey:"work_center"},{header:"Reparto",accessorKey:"department"},{header:"Numero Persone",accessorKey:"numero_persone"},{header:"V Stampa",accessorKey:"v_stampa"},{header:"T Setup Stampa (h)",accessorKey:"t_setup_stampa"},{header:"Costo H Stampa",accessorKey:"costo_h_stampa"},{header:"V Conf",accessorKey:"v_conf"},{header:"T Setup Conf (h)",accessorKey:"t_setup_conf"},{header:"Costo H Conf",accessorKey:"costo_h_conf"},{header:"Contenuto Fase",accessorKey:"contenuto_fase"}],[]),m=b=>{d(`/phases/${b.id}/edit`)},v=async b=>{a("Elimina Fase",`Sei sicuro di voler eliminare "${b.name}"? Questa azione non pu essere annullata.`,async()=>{try{await r.mutateAsync(b.id),ha(`Fase "${b.name}" eliminata con successo`)}catch(_){Ci(_.message||"Errore durante l'eliminazione della fase")}},"danger")};return e?E.jsx("div",{children:"Caricamento dati fasi..."}):n?E.jsxs("div",{className:"text-center py-2 text-red-600 text-[10px]",children:["Errore nel caricamento delle fasi: ",n.message]}):i?E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("h1",{className:"text-2xl font-semibold text-foreground",children:"Lista Fasi"}),E.jsx(or,{to:"/phases/new",className:"inline-flex items-center px-4 py-2 border border-border rounded-md text-sm font-medium text-foreground bg-background hover:bg-muted",children:"Aggiungi Fase"})]}),E.jsx(em,{columns:p,data:f,onEditRow:m,onDeleteRow:v,enableGlobalSearch:!1})]}):E.jsx("div",{className:"text-center py-2 text-red-600 text-[10px]",children:"Seleziona un centro di lavoro per visualizzare i dati delle fasi."})}function Sz({phaseToEdit:t,onSuccess:e}){const{selectedWorkCenter:n}=bn(),r=uI(),i=dI(),{handleAsync:s}=pa("PhasesForm"),a=!!t,c=D.useMemo(()=>{const f={...Qr};return n!==Je.BOTH&&(f.sections[0].fields[3].disabled=!0,f.sections[0].fields[3].defaultValue=n,f.sections[0].fields[3].helpText="Il centro di lavoro  impostato in base alla tua selezione di accesso"),f},[n]),u=D.useMemo(()=>({name:t?.name||"",department:t?.department||Qr.sections[0].fields[1].defaultValue,numero_persone:t?.numero_persone||Qr.sections[0].fields[2].defaultValue,work_center:t?.work_center||(n===Je.BOTH?Qr.sections[0].fields[3].defaultValue:n),v_stampa:t?.v_stampa||Qr.sections[1].fields[0].defaultValue,t_setup_stampa:t?.t_setup_stampa||Qr.sections[1].fields[1].defaultValue,costo_h_stampa:t?.costo_h_stampa||Qr.sections[1].fields[2].defaultValue,v_conf:t?.v_conf||Qr.sections[2].fields[0].defaultValue,t_setup_conf:t?.t_setup_conf||Qr.sections[2].fields[1].defaultValue,costo_h_conf:t?.costo_h_conf||Qr.sections[2].fields[2].defaultValue,contenuto_fase:t?.contenuto_fase||""}),[n,t]),d=async f=>{await s(async()=>{a?await i.mutateAsync({id:t.id,updates:f}):await r.mutateAsync(f),e&&e(),ha(a?"Fase aggiornata con successo":"Fase aggiunta con successo")},{context:a?"Update Phase":"Add Phase",fallbackMessage:a?"Aggiornamento fase fallito":"Aggiunta fase fallita"})};return E.jsx($d,{config:c,initialData:u,onSubmit:d,onSuccess:e,isEditMode:a})}function G_(){const{id:t}=Wd(),e=oi(),{selectedWorkCenter:n}=bn(),{isLoading:r,isInitialized:i,init:s,cleanup:a}=xs(),c=!!t,{data:u,isLoading:d,error:f}=cI(t);return D.useEffect(()=>(i||s(),()=>{a()}),[s,i,a]),D.useEffect(()=>{c&&!r&&!d&&!u&&!f&&e("/phases",{replace:!0})},[c,r,d,u,f,e]),r||c&&d?E.jsx("div",{children:"Caricamento..."}):c&&f?E.jsxs("div",{className:"text-center py-2 text-red-600 text-[10px]",children:["Errore nel caricamento della fase: ",f.message]}):c&&!u?E.jsx("div",{className:"text-center py-2 text-red-600 text-[10px]",children:"Fase non trovata."}):n?E.jsxs("div",{className:"space-y-6",children:[E.jsx("div",{className:"flex items-center justify-between",children:E.jsx("h1",{className:"text-2xl font-semibold text-foreground",children:c?`Modifica Fase: ${u?.name}`:"Aggiungi Nuova Fase"})}),E.jsx(Sz,{phaseToEdit:u})]}):E.jsx("div",{className:"text-center py-2 text-red-600 text-[10px]",children:"Seleziona un centro di lavoro per gestire le fasi."})}function wz(){const{selectedWorkCenter:t,showConfirmDialog:e}=bn(),n=oi(),{data:r=[],isLoading:i,error:s}=ef(),{data:a=[],isLoading:c}=Jd(),{data:u=[],isLoading:d}=am(),f=lI(),{handleAsync:p}=pa("BacklogListPage");if(s)return E.jsxs("div",{className:"text-center py-2 text-red-600 text-[10px]",children:["Errore nel caricamento degli ordini: ",s.message]});const m=D.useMemo(()=>{if(!t)return[];let x=r;return t!==Je.BOTH&&(x=r.filter(C=>C.work_center===t)),x.map(C=>({...C,machine_name:C.scheduled_machine_id?a.find(k=>k.id===C.scheduled_machine_id)?.machine_name||"Macchina non trovata":"Non programmato",phase_name:C.fase?u.find(k=>k.id===C.fase)?.name||"Fase non trovata":"Fase non assegnata",progress:C.progress||0,time_remaining:C.time_remaining||C.duration||0}))},[r,t,a,u]),v=i||c||d,b=D.useMemo(()=>[{header:"Numero ODP",accessorKey:"odp_number",cell:x=>{const C=x.row.original.status,k=x.getValue(),R=C==="SCHEDULED";return E.jsx("span",{className:R?"text-green-600 font-medium":"",children:k})}},{header:"Codice Articolo",accessorKey:"article_code"},{header:"Note ASD",accessorKey:"asd_notes",cell:x=>{const C=x.getValue();return C?E.jsx("div",{className:"max-w-[200px] truncate text-[10px]",title:C,children:C}):"N/A"}},{header:"Nome Cliente",accessorKey:"nome_cliente"},{header:"Quantit",accessorKey:"quantity"},{header:"Quantit Completata",accessorKey:"quantity_completed"},{header:"Altezza Busta (mm)",accessorKey:"bag_height"},{header:"Larghezza Busta (mm)",accessorKey:"bag_width"},{header:"Passo Busta (mm)",accessorKey:"bag_step"},{header:"Lotto Produzione",accessorKey:"production_lot"},{header:"Centro di Lavoro",accessorKey:"work_center"},{header:"Reparto",accessorKey:"department"},{header:"Lati Sigillati",accessorKey:"seal_sides"},{header:"Tipo Prodotto",accessorKey:"product_type"},{header:"Data Consegna",accessorKey:"delivery_date",cell:x=>x.getValue()?pn(new Date(x.getValue()),"yyyy-MM-dd"):"Non impostata"},{header:"Inizio Programmato",accessorKey:"scheduled_start_time",cell:x=>x.getValue()?new Date(x.getValue()).toISOString().replace("T"," ").replace(".000Z",""):"Non programmato"},{header:"Fine Programmata",accessorKey:"scheduled_end_time",cell:x=>x.getValue()?new Date(x.getValue()).toISOString().replace("T"," ").replace(".000Z",""):"Non programmato"},{header:"Codice Cliente Interno",accessorKey:"internal_customer_code"},{header:"Codice Cliente Esterno",accessorKey:"external_customer_code"},{header:"Riferimento Ordine Cliente",accessorKey:"customer_order_ref"},{header:"Note Libere",accessorKey:"user_notes"},{header:"Nome Fase",accessorKey:"phase_name"},{header:"Durata (ore)",accessorKey:"duration",cell:x=>{const C=x.getValue();return typeof C=="number"?C.toFixed(1):C}},{header:"Costo ()",accessorKey:"cost",cell:x=>{const C=x.getValue();return typeof C=="number"?C.toFixed(1):C}},{header:"Stato",accessorKey:"status"},{header:"Nome Macchina",accessorKey:"machine_name"},{header:"Progresso (%)",accessorKey:"progress",cell:x=>{const C=x.getValue();return typeof C=="number"?`${C}%`:C}},{header:"Tempo Rimanente (ore)",accessorKey:"time_remaining",cell:x=>{const C=x.getValue();return typeof C=="number"?C.toFixed(1):C}},{header:"Material ISP (%)",accessorKey:"material_availability_isp",cell:x=>{const C=x.getValue();if(typeof C!="number")return C||"N/A";const k=C<=39?"bg-gray-300":C<=69?"bg-yellow-400":"bg-green-400";return E.jsx("div",{className:`inline-flex items-center justify-center w-8 h-8 rounded-full ${k} text-black text-[10px] font-medium`,children:C})}},{header:"Material Lotti (%)",accessorKey:"material_availability_lotti",cell:x=>{const C=x.getValue();if(typeof C!="number")return C||"N/A";const k=C<=39?"bg-gray-300":C<=69?"bg-yellow-400":"bg-green-400";return E.jsx("div",{className:`inline-flex items-center justify-center w-8 h-8 rounded-full ${k} text-black text-[10px] font-medium`,children:C})}},{header:"Material Global (%)",accessorKey:"material_availability_global",cell:x=>{const C=x.getValue();if(typeof C!="number")return C||"N/A";const k=C<=39?"bg-gray-300":C<=69?"bg-yellow-400":"bg-green-400";return E.jsx("div",{className:`inline-flex items-center justify-center w-8 h-8 rounded-full ${k} text-black text-[10px] font-medium`,children:C})}}],[]);D.useMemo(()=>b.map(x=>x.accessorKey),[b]);const _=x=>{n(`/backlog/${x.id}/edit`)},w=async x=>{e("Elimina Ordine",`Sei sicuro di voler eliminare "${x.odp_number}"? Questa azione non pu essere annullata.`,async()=>{await p(async()=>{await f.mutateAsync(x.id)},{context:"Delete Order",fallbackMessage:"Eliminazione ordine fallita"})},"danger")};return v?E.jsx("div",{children:"Caricamento dati backlog..."}):t?E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("h1",{className:"text-2xl font-semibold text-foreground",children:"Lista Ordini"}),E.jsx(or,{to:"/backlog/new",className:"inline-flex items-center px-4 py-2 border border-border rounded-md text-sm font-medium text-foreground bg-background hover:bg-muted",children:"Aggiungi Ordine"})]}),E.jsx(em,{columns:b,data:m,onEditRow:_,onDeleteRow:w,stickyColumns:["odp_number","article_code"],enableGlobalSearch:!1,enableFiltering:!1})]}):E.jsx("div",{className:"text-center py-2 text-red-600 text-[10px]",children:"Seleziona un centro di lavoro per visualizzare i dati del backlog."})}const xz=({onSuccess:t,orderToEdit:e})=>{const{selectedWorkCenter:n,showConflictDialog:r}=bn(),{scheduleTaskFromSlot:i,unscheduleTask:s}=Zl(),{calculateProductionMetrics:a,validatePhaseParameters:c,autoDetermineWorkCenter:u,autoDetermineDepartment:d}=Ex(),{handleAsync:f}=pa("BacklogForm"),{validateOrder:p}=ZN(),m=aI(),v=oI(),b=tr(),[_,w]=D.useState(null),x=!!e,C=D.useMemo(()=>{const ge={...mI};if(n!==Je.BOTH){const Pe=ge.sections[0].fields.find(Ke=>Ke.name==="work_center");Pe&&(Pe.disabled=!0,Pe.defaultValue=n,Pe.helpText="Centro di lavoro pre-impostato.")}return ge},[n]),k=D.useMemo(()=>({odp_number:e?.odp_number||"",article_code:e?.article_code||"",work_center:e?.work_center||(n===Je.BOTH?"":n),nome_cliente:e?.nome_cliente||"",delivery_date:e?.delivery_date?new Date(e.delivery_date).toISOString().slice(0,16):"",quantity:e?.quantity||"",customer_order_ref:e?.customer_order_ref||"",department:e?.department||"",quantity_completed:e?.quantity_completed||Tt.ORDER.QUANTITY_COMPLETED,production_lot:e?.production_lot||null,bag_height:e?.bag_height||null,bag_width:e?.bag_width||null,bag_step:e?.bag_step||null,seal_sides:e?.seal_sides||null,product_type:e?.product_type||null,internal_customer_code:e?.internal_customer_code||null,external_customer_code:e?.external_customer_code||null,user_notes:e?.user_notes||null,asd_notes:e?.asd_notes||null,material_availability_global:e?.material_availability_global||null,fase:e?.fase||null}),[n,e]),[R,A]=D.useState(k.department),[M,P]=D.useState(k.work_center),[O,H]=D.useState(k.quantity),[B,$]=D.useState(k.bag_step),{phaseSearch:ee,setPhaseSearch:re,isDropdownVisible:he,setIsDropdownVisible:pe,selectedPhase:ie,setSelectedPhase:oe,filteredPhases:K,editablePhaseParams:q,setEditablePhaseParams:Y,handlePhaseParamChange:F,handlePhaseSelect:G,handleBlur:ne}=XN(R,M,x?e?.fase:null),le=D.useCallback(()=>{re(""),oe(null),Y({}),w(null)},[re,oe,Y]),ue=D.useCallback((ge,Pe)=>{if(ge){const Ke=d(ge);Pe("department",Ke),n===Je.BOTH&&Pe("work_center",u(ge)),Pe("fase",""),re(""),oe(null),Y({}),w(null)}},[d,u,n,re,oe,Y]),ce=async ge=>{const Pe=p(ge);if(!Pe.isValid){const We=Object.entries(Pe.errors).map(([xe,ot])=>`${{odp_number:"Numero ODP",article_code:"Codice Articolo",work_center:"Centro di Lavoro",nome_cliente:"Nome Cliente",quantity:"Quantit",delivery_date:"Data di Consegna",customer_order_ref:"Riferimento Ordine Cliente",department:"Reparto",bag_height:"Altezza Busta",bag_width:"Larghezza Busta",bag_step:"Passo Busta",seal_sides:"Lati Sigillatura",product_type:"Tipo Prodotto",internal_customer_code:"Codice Cliente Interno",external_customer_code:"Codice Cliente Esterno"}[xe]||xe}: ${ot}`);EO(We);return}const Ke=ge.fase,_t=ie?.department===It.PRINTING;if(Ke&&(!_t||ge.bag_step)&&(!_?.totals||typeof _.totals.duration!="number"||typeof _.totals.cost!="number")){dl("Calcola le metriche di produzione valide prima di procedere.");return}await f(async()=>{const{phase_search:We,...xe}=ge,ot={...xe,fase:xe.fase===""?null:xe.fase,scheduled_machine_id:xe.scheduled_machine_id===""?null:xe.scheduled_machine_id,production_lot:xe.production_lot===""?null:xe.production_lot,internal_customer_code:xe.internal_customer_code===""?null:xe.internal_customer_code,external_customer_code:xe.external_customer_code===""?null:xe.external_customer_code,user_notes:xe.user_notes===""?null:xe.user_notes,asd_notes:xe.asd_notes===""?null:xe.asd_notes,material_availability_global:xe.material_availability_global===""?null:xe.material_availability_global,bag_height:xe.bag_height===""?null:xe.bag_height,bag_width:xe.bag_width===""?null:xe.bag_width,bag_step:xe.bag_step===""?null:xe.bag_step,seal_sides:xe.seal_sides===""?null:xe.seal_sides,product_type:xe.product_type===""?null:xe.product_type};let Le;if(x){const Z=_?.totals?.duration||e.duration,ye=e.quantity_completed/e.quantity||0,Fe=Z*(1-ye);if(e.scheduled_machine_id&&e.scheduled_start_time){console.log(" EDIT FLOW: Starting rescheduling for task",e.id),console.log(" EDIT FLOW: Original duration:",e.duration,"New duration:",Z);const Ne=e.duration,be=Z-Ne;if(Math.abs(be)<.01){console.log(" SCENARIO X: Duration unchanged, skipping rescheduling");const Se={...ot,duration:Z,cost:_?.totals?.cost||null};Le=await v.mutateAsync({id:e.id,updates:Se})}else if(be>0){console.log(" SCENARIO Y: Duration increased, using standard rescheduling");const Se=new Date(e.scheduled_start_time),Re=Se.getUTCHours(),ze=Se.getUTCMinutes(),Ue=new Date(Date.UTC(Se.getUTCFullYear(),Se.getUTCMonth(),Se.getUTCDate()));console.log(" EDIT FLOW: Start date:",Se.toISOString()),console.log(" EDIT FLOW: Hour:",Re,"Minute:",ze),console.log(" EDIT FLOW: Current date:",Ue.toISOString());const tt={duration:Z};console.log(" EDIT FLOW: Updating task with new duration:",tt),await v.mutateAsync({id:e.id,updates:tt}),await new Promise(qe=>setTimeout(qe,100));const{getOrderById:ut}=cd.getState(),ur=ut(e.id);console.log(" EDIT FLOW: Task duration after update:",ur?.duration),console.log(" EDIT FLOW: Unscheduling task first"),await s(e.id,b),await new Promise(qe=>setTimeout(qe,100));const gt={id:e.scheduled_machine_id};console.log(" EDIT FLOW: Calling scheduleTaskFromSlot with:",{taskId:e.id,machine:gt,currentDate:Ue.toISOString(),hour:Re,minute:ze,timeRemaining:Fe});const nt=await i(e.id,gt,Ue,Re,ze,Fe,b);if(console.log(" EDIT FLOW: scheduleTaskFromSlot result:",nt),nt?.conflict){console.log(" EDIT FLOW: Conflict detected, showing dialog");const qe={...nt,schedulingParams:{taskId:e.id,machine:gt,currentDate:Ue,hour:Re,minute:ze,newDuration:Fe,originalConflict:nt}};r(qe);return}else if(nt?.error){console.log(" EDIT FLOW: Error:",nt.error),Ci(nt.error);return}else console.log(" EDIT FLOW: Scheduling successful");const Wt=nt?.updatedTask;console.log(" EDIT FLOW: Updated task from scheduling result:",Wt);const Be={...ot,duration:Z,cost:_?.totals?.cost||null,scheduled_start_time:Wt?.scheduled_start_time||Se.toISOString(),scheduled_end_time:Wt?.scheduled_end_time||new Date(Se.getTime()+Z*36e5).toISOString(),description:Wt?.description||e.description};console.log(" EDIT FLOW: Final order data to save:",Be),Le=await v.mutateAsync({id:e.id,updates:Be}),console.log(" EDIT FLOW: Final update completed:",Le)}else{console.log(" SCENARIO Z: Duration decreased, using adjacent task rescheduling");const Se=await Me(e.id,Z,Fe,ot,_?.totals?.cost||null,b,v,i,s,r);if(Se?.error){console.log(" SCENARIO Z: Error:",Se.error),Ci(Se.error);return}Le=Se.updatedOrder,console.log(" SCENARIO Z: Duration decrease rescheduling completed:",Le)}}else{const Ne={...ot,duration:Z,cost:_?.totals?.cost||null};Le=await v.mutateAsync({id:e.id,updates:Ne})}}else{const Z={...ot,duration:_?.totals?.duration||null,cost:_?.totals?.cost||null,status:"NOT SCHEDULED"};Le=await m.mutateAsync(Z)}t&&t(),le(),ha(x?"Ordine aggiornato con successo":"Ordine aggiunto con successo")},{context:x?"Aggiorna Ordine":"Aggiungi Ordine",fallbackMessage:x?"Aggiornamento ordine fallito":"Aggiunta ordine fallita"})},Ee=()=>{if(!ie){dl("Seleziona una fase prima di calcolare.");return}if(!O){dl("Inserisci la quantit per calcolare.");return}if(ie.department===It.PRINTING&&!B){dl("Inserisci il passo busta per calcolare la stampa.");return}const ge={...ie,...q},Pe=c(ge);if(!Pe.isValid){Ci(Pe.error),w(null);return}const Ke=ie.department===It.PRINTING?B:null,_t=a(ge,O,Ke);if(!_t||typeof _t.totals?.duration!="number"||typeof _t.totals?.cost!="number"){Ci("Errore nel calcolo. Verifica i parametri della fase."),w(null);return}w(_t)},se=ge=>q[ge]??ie[ge]??"",Me=async(ge,Pe,Ke,_t,Zt,We,xe,ot,Le,Z,ye)=>{try{console.log(" SCENARIO Z: Starting duration decrease rescheduling for task",ge);const{getOrderById:Fe,getOdpOrders:Ne}=cd.getState(),be=Fe(ge);if(!be)return{error:"Task not found"};const Se=new Date(be.scheduled_start_time),Re=Se.getUTCHours(),ze=Se.getUTCMinutes(),Ue=new Date(Date.UTC(Se.getUTCFullYear(),Se.getUTCMonth(),Se.getUTCDate())),tt={id:be.scheduled_machine_id};console.log(" SCENARIO Z: Current task start:",Se.toISOString()),console.log(" SCENARIO Z: New time remaining:",Ke);const ut=new Date(be.scheduled_end_time);console.log(" SCENARIO Z: Current end time for task A (from DB):",ut.toISOString());const ur=Ne(),gt=[];let nt=ut;for(console.log(" SCENARIO Z: Starting to find chain of adjacent tasks...");;){const Wt=ur.find(Be=>{if(Be.id===ge||!Be.scheduled_machine_id||!Be.scheduled_start_time||Be.status!=="SCHEDULED"||Be.scheduled_machine_id!==be.scheduled_machine_id||gt.some(gn=>gn.id===Be.id))return!1;const qe=new Date(Be.scheduled_start_time),Hn=Math.abs(qe.getTime()-nt.getTime())/(1e3*60);return console.log(" SCENARIO Z: Checking task",Be.odp_number,"start:",qe.toISOString(),"diff:",Hn,"minutes","against end time:",nt.toISOString()),Hn<=120});if(Wt)console.log(" SCENARIO Z: Found adjacent task in chain:",Wt.odp_number),gt.push(Wt),nt=new Date(Wt.scheduled_end_time),console.log(" SCENARIO Z: Next task end time for chain:",nt.toISOString()),console.log(" SCENARIO Z: Continuing to search for more adjacent tasks...");else{console.log(" SCENARIO Z: No more adjacent tasks found, stopping chain search");break}}if(gt.length>0){console.log(" SCENARIO Z: Found chain of",gt.length,"adjacent tasks:",gt.map(de=>de.odp_number)),console.log(" SCENARIO Z: Step 2 - Rescheduling task A");const Wt={duration:Pe};await xe.mutateAsync({id:ge,updates:Wt}),await new Promise(de=>setTimeout(de,100)),await Le(ge,We),await new Promise(de=>setTimeout(de,100));const Be=await ot(ge,tt,Ue,Re,ze,Ke,We);if(Be?.conflict){console.log(" SCENARIO Z: Conflict detected for task A, showing dialog");const de={...Be,schedulingParams:{taskId:ge,machine:tt,currentDate:Ue,hour:Re,minute:ze,newDuration:Ke,originalConflict:Be}};return Z(de),{error:"Conflict detected for task A"}}else if(Be?.error)return console.log(" SCENARIO Z: Error rescheduling task A:",Be.error),{error:Be.error};console.log(" SCENARIO Z: Task A rescheduled successfully"),console.log(" SCENARIO Z: Step 3 - Rescheduling chain of",gt.length,"tasks");let qe=new Date(Be.schedulingResult.endTime);const Hn=[];for(let de=0;de<gt.length;de++){const Ie=gt[de];console.log(` SCENARIO Z: Rescheduling chain task ${de+1}/${gt.length}:`,Ie.odp_number);const Ge=qe.getUTCHours(),Xe=qe.getUTCMinutes(),Ht=new Date(Date.UTC(qe.getUTCFullYear(),qe.getUTCMonth(),qe.getUTCDate()));console.log(" SCENARIO Z: Chain task new start time:",qe.toISOString()),console.log(" SCENARIO Z: Chain task new hour:",Ge,"minute:",Xe);const lt=Ie.time_remaining||Ie.duration||1;console.log(" SCENARIO Z: Chain task time remaining:",lt),await Le(Ie.id,We),await new Promise($t=>setTimeout($t,100));const Oe=await ot(Ie.id,tt,Ht,Ge,Xe,lt,We);if(Oe?.conflict){console.log(" SCENARIO Z: Conflict detected for chain task",Ie.odp_number,", showing dialog");const $t={...Oe,schedulingParams:{taskId:Ie.id,machine:tt,currentDate:Ht,hour:Ge,minute:Xe,newDuration:lt,originalConflict:Oe}};return Z($t),{error:`Conflict detected for chain task ${Ie.odp_number}`}}else if(Oe?.error)return console.log(" SCENARIO Z: Error rescheduling chain task",Ie.odp_number,":",Oe.error),{error:`Error rescheduling chain task ${Ie.odp_number}: ${Oe.error}`};console.log(" SCENARIO Z: Chain task",Ie.odp_number,"rescheduled successfully"),Hn.push(Oe),qe=new Date(Oe.schedulingResult.endTime),console.log(" SCENARIO Z: Updated end time for next chain task:",qe.toISOString())}console.log(" SCENARIO Z: All",gt.length,"chain tasks rescheduled successfully");const gn=Be?.updatedTask,Ze={..._t,duration:Pe,cost:Zt,scheduled_start_time:gn?.scheduled_start_time||Se.toISOString(),scheduled_end_time:gn?.scheduled_end_time||new Date(Se.getTime()+Pe*36e5).toISOString(),description:gn?.description||be.description},Vt=await xe.mutateAsync({id:ge,updates:Ze});return console.log(" SCENARIO Z: Task A and",gt.length,"chain tasks rescheduled successfully"),{updatedOrder:Vt}}else{console.log(" SCENARIO Z: No adjacent task found, using standard rescheduling");const Wt={duration:Pe};await xe.mutateAsync({id:ge,updates:Wt}),await new Promise(Ze=>setTimeout(Ze,100)),await Le(ge,We),await new Promise(Ze=>setTimeout(Ze,100));const Be=await ot(ge,tt,Ue,Re,ze,Ke,We);if(Be?.conflict){console.log(" SCENARIO Z: Conflict detected, showing dialog");const Ze={...Be,schedulingParams:{taskId:ge,machine:tt,currentDate:Ue,hour:Re,minute:ze,newDuration:Ke,originalConflict:Be}};return Z(Ze),{error:"Conflict detected"}}else if(Be?.error)return console.log(" SCENARIO Z: Error:",Be.error),{error:Be.error};const qe=Be?.updatedTask,Hn={..._t,duration:Pe,cost:Zt,scheduled_start_time:qe?.scheduled_start_time||Se.toISOString(),scheduled_end_time:qe?.scheduled_end_time||new Date(Se.getTime()+Pe*36e5).toISOString(),description:qe?.description||be.description};return{updatedOrder:await xe.mutateAsync({id:ge,updates:Hn})}}}catch(Fe){return console.error(" SCENARIO Z: Error in handleDurationDecreaseRescheduling:",Fe),{error:Fe.message||"Error during duration decrease rescheduling"}}},He=()=>ie?ie.department===It.PRINTING?[{name:"v_stampa",label:"Velocit Stampa:",unit:"mt/h"},{name:"t_setup_stampa",label:"Setup Stampa:",unit:"h"},{name:"costo_h_stampa",label:"Costo Stampa:",unit:"/h"}]:[{name:"v_conf",label:"Velocit Confezionamento:",unit:"pz/h"},{name:"t_setup_conf",label:"Setup Confezionamento:",unit:"h"},{name:"costo_h_conf",label:"Costo Confezionamento:",unit:"/h"}]:[],jt=D.useMemo(()=>({article_code:(ge,{watch:Pe,setValue:Ke,getValues:_t,register:Zt})=>E.jsx(ni,{type:"text",...Zt(ge.name,{...ge.validation,onChange:We=>{ge.validation?.onChange&&ge.validation.onChange(We),ue(We.target.value,Ke)}}),placeholder:ge.placeholder,disabled:ge.disabled,className:ge.className}),phase_search:(ge,{watch:Pe,setValue:Ke,getValues:_t,register:Zt})=>{const We=Pe("department"),xe=Pe("work_center"),ot=Pe("quantity"),Le=Pe("bag_step");return D.useEffect(()=>{We!==R&&A(We),xe!==M&&P(xe),ot!==O&&H(ot),Le!==B&&$(Le)},[We,xe,ot,Le,R,M,O,B]),E.jsxs("div",{className:"relative",children:[E.jsx(ni,{type:"text",value:ee,onChange:Z=>re(Z.target.value),onFocus:()=>pe(!0),onBlur:ne,placeholder:"Cerca fase di produzione..."}),E.jsx("input",{type:"hidden",...Zt("fase")}),he&&K.length>0&&E.jsx("div",{className:"absolute top-full left-0 right-0 bg-white border border-gray-300 rounded-md shadow-lg z-10 max-h-60 overflow-y-auto",children:K.map(Z=>E.jsxs("div",{className:"px-3 py-1 hover:bg-gray-100 cursor-pointer border-b border-gray-100 last:border-b-0",onMouseDown:()=>{G(Z,Ke,()=>{}),w(null)},children:[E.jsx("div",{className:"text-[10px] font-medium",children:Z.name}),E.jsx("div",{className:"text-[10px] text-gray-600",children:Z.contenuto_fase})]},Z.id))})]})},phase_parameters:()=>ie?E.jsxs("div",{className:"space-y-2",children:[E.jsx("h3",{className:"text-[10px] font-semibold text-gray-900 border-b pb-2",children:"Parametri Fase Selezionata"}),E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:He().map(ge=>E.jsxs("div",{className:"space-y-2",children:[E.jsx(ri,{htmlFor:ge.name,children:ge.label}),E.jsxs("div",{className:"flex items-center space-x-2",children:[E.jsx(ni,{type:"number",id:ge.name,value:se(ge.name),onChange:Pe=>F(ge.name,Pe.target.value)}),E.jsx("span",{className:"text-[10px] text-gray-500 whitespace-nowrap",children:ge.unit})]})]},ge.name))})]}):null,calculation_results:()=>_?.totals?E.jsxs("div",{className:"space-y-2",children:[E.jsx("h3",{className:"text-[10px] font-semibold text-gray-900 border-b pb-2",children:"Risultati Calcolo Produzione"}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[E.jsxs("div",{className:"space-y-2",children:[E.jsx(ri,{children:"Durata Totale (ore):"}),E.jsx("div",{className:"text-[10px] font-semibold text-navy-800",children:_.totals.duration.toFixed(2)})]}),E.jsxs("div",{className:"space-y-2",children:[E.jsx(ri,{children:"Costo Totale ():"}),E.jsx("div",{className:"text-[10px] font-semibold text-green-600",children:_.totals.cost.toFixed(2)})]})]})]}):null}),[ee,re,he,pe,K,ne,G,ie,se,F,He,_,ue]),Bt=D.useMemo(()=>E.jsx("div",{className:"flex justify-end space-x-4 pt-6",children:E.jsx(Oi,{type:"button",variant:"outline",onClick:Ee,disabled:!ie,children:"Calcola"})}),[ie,Ee]),jn=m.isPending||v.isPending;return E.jsx($d,{config:C,initialData:k,onSubmit:ce,onSuccess:t,isEditMode:x,isLoading:jn,customActions:Bt,customFieldRenderers:jt})};function Y_(){const{id:t}=Wd(),e=oi(),{data:n,isLoading:r,error:i}=sI(t),{selectedWorkCenter:s}=bn(),{isLoading:a,isInitialized:c,init:u,cleanup:d}=xs(),f=!!t;return D.useEffect(()=>(c||u(),()=>{d()}),[u,c,d]),D.useEffect(()=>{f&&!r&&!n&&i&&e("/backlog",{replace:!0})},[f,r,n,e,i]),r?E.jsx("div",{children:"Caricamento..."}):f&&!n?E.jsx("div",{className:"text-center py-2 text-red-600 text-[10px]",children:"Ordine non trovato."}):s?E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("h1",{className:"text-2xl font-semibold text-foreground",children:f?`Modifica Ordine: ${n?.odp_number}`:"Aggiungi Nuovo Ordine"}),f&&E.jsx(Oi,{variant:"outline",onClick:()=>e("/scheduler"),children:" Torna al Programmatore"})]}),E.jsx(xz,{onSuccess:f?()=>e("/scheduler"):void 0,orderToEdit:n})]}):E.jsx("div",{className:"text-center py-2 text-red-600 text-[10px]",children:"Seleziona un centro di lavoro per gestire gli ordini del backlog."})}const ff=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function yo(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function Um(t){return"nodeType"in t}function Fn(t){var e,n;return t?yo(t)?t:Um(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function Bm(t){const{Document:e}=Fn(t);return t instanceof e}function rc(t){return yo(t)?!1:t instanceof Fn(t).HTMLElement}function OC(t){return t instanceof Fn(t).SVGElement}function bo(t){return t?yo(t)?t.document:Um(t)?Bm(t)?t:rc(t)||OC(t)?t.ownerDocument:document:document:document}const Fi=ff?D.useLayoutEffect:D.useEffect;function hf(t){const e=D.useRef(t);return Fi(()=>{e.current=t}),D.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}function Ez(){const t=D.useRef(null),e=D.useCallback((r,i)=>{t.current=setInterval(r,i)},[]),n=D.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function Ll(t,e){e===void 0&&(e=[t]);const n=D.useRef(t);return Fi(()=>{n.current!==t&&(n.current=t)},e),n}function ic(t,e){const n=D.useRef();return D.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function kd(t){const e=hf(t),n=D.useRef(null),r=D.useCallback(i=>{i!==n.current&&e?.(i,n.current),n.current=i},[]);return[n,r]}function Ad(t){const e=D.useRef();return D.useEffect(()=>{e.current=t},[t]),e.current}let Lp={};function pf(t,e){return D.useMemo(()=>{if(e)return e;const n=Lp[t]==null?0:Lp[t]+1;return Lp[t]=n,t+"-"+n},[t,e])}function MC(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((s,a)=>{const c=Object.entries(a);for(const[u,d]of c){const f=s[u];f!=null&&(s[u]=f+t*d)}return s},{...e})}}const no=MC(1),Rd=MC(-1);function Cz(t){return"clientX"in t&&"clientY"in t}function Wm(t){if(!t)return!1;const{KeyboardEvent:e}=Fn(t.target);return e&&t instanceof e}function Tz(t){if(!t)return!1;const{TouchEvent:e}=Fn(t.target);return e&&t instanceof e}function Od(t){if(Tz(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return Cz(t)?{x:t.clientX,y:t.clientY}:null}const Fl=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Fl.Translate.toString(t),Fl.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),Q_="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Dz(t){return t.matches(Q_)?t:t.querySelector(Q_)}const kz={display:"none"};function Az(t){let{id:e,value:n}=t;return Q.createElement("div",{id:e,style:kz},n)}function Rz(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Q.createElement("div",{id:e,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function Oz(){const[t,e]=D.useState("");return{announce:D.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const NC=D.createContext(null);function Mz(t){const e=D.useContext(NC);D.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function Nz(){const[t]=D.useState(()=>new Set),e=D.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[D.useCallback(r=>{let{type:i,event:s}=r;t.forEach(a=>{var c;return(c=a[i])==null?void 0:c.call(a,s)})},[t]),e]}const Iz={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Pz={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function Lz(t){let{announcements:e=Pz,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=Iz}=t;const{announce:s,announcement:a}=Oz(),c=pf("DndLiveRegion"),[u,d]=D.useState(!1);if(D.useEffect(()=>{d(!0)},[]),Mz(D.useMemo(()=>({onDragStart(p){let{active:m}=p;s(e.onDragStart({active:m}))},onDragMove(p){let{active:m,over:v}=p;e.onDragMove&&s(e.onDragMove({active:m,over:v}))},onDragOver(p){let{active:m,over:v}=p;s(e.onDragOver({active:m,over:v}))},onDragEnd(p){let{active:m,over:v}=p;s(e.onDragEnd({active:m,over:v}))},onDragCancel(p){let{active:m,over:v}=p;s(e.onDragCancel({active:m,over:v}))}}),[s,e])),!u)return null;const f=Q.createElement(Q.Fragment,null,Q.createElement(Az,{id:r,value:i.draggable}),Q.createElement(Rz,{id:c,announcement:a}));return n?Ei.createPortal(f,n):f}var rn;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(rn||(rn={}));function Md(){}function K_(t,e){return D.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function Fz(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return D.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const zr=Object.freeze({x:0,y:0});function jz(t,e){const n=Od(t);if(!n)return"0 0";const r={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return r.x+"% "+r.y+"%"}function Hz(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function zz(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function Uz(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),i=Math.min(e.left+e.width,t.left+t.width),s=Math.min(e.top+e.height,t.top+t.height),a=i-r,c=s-n;if(r<i&&n<s){const u=e.width*e.height,d=t.width*t.height,f=a*c,p=f/(u+d-f);return Number(p.toFixed(4))}return 0}const Bz=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=[];for(const s of r){const{id:a}=s,c=n.get(a);if(c){const u=Uz(c,e);u>0&&i.push({id:a,data:{droppableContainer:s,value:u}})}}return i.sort(Hz)};function Wz(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function IC(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:zr}function Vz(t){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return i.reduce((a,c)=>({...a,top:a.top+t*c.y,bottom:a.bottom+t*c.y,left:a.left+t*c.x,right:a.right+t*c.x}),{...n})}}const $z=Vz(1);function PC(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function qz(t,e,n){const r=PC(e);if(!r)return t;const{scaleX:i,scaleY:s,x:a,y:c}=r,u=t.left-a-(1-i)*parseFloat(n),d=t.top-c-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),f=i?t.width/i:t.width,p=s?t.height/s:t.height;return{width:f,height:p,top:d,right:u+f,bottom:d+p,left:u}}const Gz={ignoreTransform:!1};function sc(t,e){e===void 0&&(e=Gz);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:d,transformOrigin:f}=Fn(t).getComputedStyle(t);d&&(n=qz(n,d,f))}const{top:r,left:i,width:s,height:a,bottom:c,right:u}=n;return{top:r,left:i,width:s,height:a,bottom:c,right:u}}function Z_(t){return sc(t,{ignoreTransform:!0})}function Yz(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function Qz(t,e){return e===void 0&&(e=Fn(t).getComputedStyle(t)),e.position==="fixed"}function Kz(t,e){e===void 0&&(e=Fn(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const s=e[i];return typeof s=="string"?n.test(s):!1})}function Vm(t,e){const n=[];function r(i){if(e!=null&&n.length>=e||!i)return n;if(Bm(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!rc(i)||OC(i)||n.includes(i))return n;const s=Fn(t).getComputedStyle(i);return i!==t&&Kz(i,s)&&n.push(i),Qz(i,s)?n:r(i.parentNode)}return t?r(t):n}function LC(t){const[e]=Vm(t,1);return e??null}function Fp(t){return!ff||!t?null:yo(t)?t:Um(t)?Bm(t)||t===bo(t).scrollingElement?window:rc(t)?t:null:null}function FC(t){return yo(t)?t.scrollX:t.scrollLeft}function jC(t){return yo(t)?t.scrollY:t.scrollTop}function Rg(t){return{x:FC(t),y:jC(t)}}var fn;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(fn||(fn={}));function HC(t){return!ff||!t?!1:t===document.scrollingElement}function zC(t){const e={x:0,y:0},n=HC(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},i=t.scrollTop<=e.y,s=t.scrollLeft<=e.x,a=t.scrollTop>=r.y,c=t.scrollLeft>=r.x;return{isTop:i,isLeft:s,isBottom:a,isRight:c,maxScroll:r,minScroll:e}}const Zz={x:.2,y:.2};function Xz(t,e,n,r,i){let{top:s,left:a,right:c,bottom:u}=n;r===void 0&&(r=10),i===void 0&&(i=Zz);const{isTop:d,isBottom:f,isLeft:p,isRight:m}=zC(t),v={x:0,y:0},b={x:0,y:0},_={height:e.height*i.y,width:e.width*i.x};return!d&&s<=e.top+_.height?(v.y=fn.Backward,b.y=r*Math.abs((e.top+_.height-s)/_.height)):!f&&u>=e.bottom-_.height&&(v.y=fn.Forward,b.y=r*Math.abs((e.bottom-_.height-u)/_.height)),!m&&c>=e.right-_.width?(v.x=fn.Forward,b.x=r*Math.abs((e.right-_.width-c)/_.width)):!p&&a<=e.left+_.width&&(v.x=fn.Backward,b.x=r*Math.abs((e.left+_.width-a)/_.width)),{direction:v,speed:b}}function Jz(t){if(t===document.scrollingElement){const{innerWidth:s,innerHeight:a}=window;return{top:0,left:0,right:s,bottom:a,width:s,height:a}}const{top:e,left:n,right:r,bottom:i}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:i,width:t.clientWidth,height:t.clientHeight}}function UC(t){return t.reduce((e,n)=>no(e,Rg(n)),zr)}function eU(t){return t.reduce((e,n)=>e+FC(n),0)}function tU(t){return t.reduce((e,n)=>e+jC(n),0)}function BC(t,e){if(e===void 0&&(e=sc),!t)return;const{top:n,left:r,bottom:i,right:s}=e(t);LC(t)&&(i<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const nU=[["x",["left","right"],eU],["y",["top","bottom"],tU]];class $m{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Vm(n),i=UC(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[s,a,c]of nU)for(const u of a)Object.defineProperty(this,u,{get:()=>{const d=c(r),f=i[s]-d;return this.rect[u]+f},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Sl{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var i;(i=this.target)==null||i.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function rU(t){const{EventTarget:e}=Fn(t);return t instanceof e?t:bo(t)}function jp(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var Er;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Er||(Er={}));function X_(t){t.preventDefault()}function iU(t){t.stopPropagation()}var yt;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(yt||(yt={}));const WC={start:[yt.Space,yt.Enter],cancel:[yt.Esc],end:[yt.Space,yt.Enter,yt.Tab]},sU=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case yt.Right:return{...n,x:n.x+25};case yt.Left:return{...n,x:n.x-25};case yt.Down:return{...n,y:n.y+25};case yt.Up:return{...n,y:n.y-25}}};class VC{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new Sl(bo(n)),this.windowListeners=new Sl(Fn(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Er.Resize,this.handleCancel),this.windowListeners.add(Er.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Er.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&BC(r),n(zr)}handleKeyDown(e){if(Wm(e)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:s=WC,coordinateGetter:a=sU,scrollBehavior:c="smooth"}=i,{code:u}=e;if(s.end.includes(u)){this.handleEnd(e);return}if(s.cancel.includes(u)){this.handleCancel(e);return}const{collisionRect:d}=r.current,f=d?{x:d.left,y:d.top}:zr;this.referenceCoordinates||(this.referenceCoordinates=f);const p=a(e,{active:n,context:r.current,currentCoordinates:f});if(p){const m=Rd(p,f),v={x:0,y:0},{scrollableAncestors:b}=r.current;for(const _ of b){const w=e.code,{isTop:x,isRight:C,isLeft:k,isBottom:R,maxScroll:A,minScroll:M}=zC(_),P=Jz(_),O={x:Math.min(w===yt.Right?P.right-P.width/2:P.right,Math.max(w===yt.Right?P.left:P.left+P.width/2,p.x)),y:Math.min(w===yt.Down?P.bottom-P.height/2:P.bottom,Math.max(w===yt.Down?P.top:P.top+P.height/2,p.y))},H=w===yt.Right&&!C||w===yt.Left&&!k,B=w===yt.Down&&!R||w===yt.Up&&!x;if(H&&O.x!==p.x){const $=_.scrollLeft+m.x,ee=w===yt.Right&&$<=A.x||w===yt.Left&&$>=M.x;if(ee&&!m.y){_.scrollTo({left:$,behavior:c});return}ee?v.x=_.scrollLeft-$:v.x=w===yt.Right?_.scrollLeft-A.x:_.scrollLeft-M.x,v.x&&_.scrollBy({left:-v.x,behavior:c});break}else if(B&&O.y!==p.y){const $=_.scrollTop+m.y,ee=w===yt.Down&&$<=A.y||w===yt.Up&&$>=M.y;if(ee&&!m.x){_.scrollTo({top:$,behavior:c});return}ee?v.y=_.scrollTop-$:v.y=w===yt.Down?_.scrollTop-A.y:_.scrollTop-M.y,v.y&&_.scrollBy({top:-v.y,behavior:c});break}}this.handleMove(e,no(Rd(p,this.referenceCoordinates),v))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}VC.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=WC,onActivation:i}=e,{active:s}=n;const{code:a}=t.nativeEvent;if(r.start.includes(a)){const c=s.activatorNode.current;return c&&t.target!==c?!1:(t.preventDefault(),i?.({event:t.nativeEvent}),!0)}return!1}}];function J_(t){return!!(t&&"distance"in t)}function eS(t){return!!(t&&"delay"in t)}class qm{constructor(e,n,r){var i;r===void 0&&(r=rU(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:s}=e,{target:a}=s;this.props=e,this.events=n,this.document=bo(a),this.documentListeners=new Sl(this.document),this.listeners=new Sl(r),this.windowListeners=new Sl(Fn(a)),this.initialCoordinates=(i=Od(s))!=null?i:zr,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Er.Resize,this.handleCancel),this.windowListeners.add(Er.DragStart,X_),this.windowListeners.add(Er.VisibilityChange,this.handleCancel),this.windowListeners.add(Er.ContextMenu,X_),this.documentListeners.add(Er.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(eS(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(J_(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:i}=this.props;i(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(Er.Click,iU,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Er.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:i,props:s}=this,{onMove:a,options:{activationConstraint:c}}=s;if(!i)return;const u=(n=Od(e))!=null?n:zr,d=Rd(i,u);if(!r&&c){if(J_(c)){if(c.tolerance!=null&&jp(d,c.tolerance))return this.handleCancel();if(jp(d,c.distance))return this.handleStart()}if(eS(c)&&jp(d,c.tolerance))return this.handleCancel();this.handlePending(c,d);return}e.cancelable&&e.preventDefault(),a(u)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===yt.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const aU={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Gm extends qm{constructor(e){const{event:n}=e,r=bo(n.target);super(e,aU,r)}}Gm.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r?.({event:n}),!0)}}];const oU={move:{name:"mousemove"},end:{name:"mouseup"}};var Og;(function(t){t[t.RightClick=2]="RightClick"})(Og||(Og={}));class $C extends qm{constructor(e){super(e,oU,bo(e.event.target))}}$C.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===Og.RightClick?!1:(r?.({event:n}),!0)}}];const Hp={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class lU extends qm{constructor(e){super(e,Hp)}static setup(){return window.addEventListener(Hp.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Hp.move.name,e)};function e(){}}}lU.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:i}=n;return i.length>1?!1:(r?.({event:n}),!0)}}];var wl;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(wl||(wl={}));var Nd;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Nd||(Nd={}));function cU(t){let{acceleration:e,activator:n=wl.Pointer,canScroll:r,draggingRect:i,enabled:s,interval:a=5,order:c=Nd.TreeOrder,pointerCoordinates:u,scrollableAncestors:d,scrollableAncestorRects:f,delta:p,threshold:m}=t;const v=dU({delta:p,disabled:!s}),[b,_]=Ez(),w=D.useRef({x:0,y:0}),x=D.useRef({x:0,y:0}),C=D.useMemo(()=>{switch(n){case wl.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case wl.DraggableRect:return i}},[n,i,u]),k=D.useRef(null),R=D.useCallback(()=>{const M=k.current;if(!M)return;const P=w.current.x*x.current.x,O=w.current.y*x.current.y;M.scrollBy(P,O)},[]),A=D.useMemo(()=>c===Nd.TreeOrder?[...d].reverse():d,[c,d]);D.useEffect(()=>{if(!s||!d.length||!C){_();return}for(const M of A){if(r?.(M)===!1)continue;const P=d.indexOf(M),O=f[P];if(!O)continue;const{direction:H,speed:B}=Xz(M,O,C,e,m);for(const $ of["x","y"])v[$][H[$]]||(B[$]=0,H[$]=0);if(B.x>0||B.y>0){_(),k.current=M,b(R,a),w.current=B,x.current=H;return}}w.current={x:0,y:0},x.current={x:0,y:0},_()},[e,R,r,_,s,a,JSON.stringify(C),JSON.stringify(v),b,d,A,f,JSON.stringify(m)])}const uU={x:{[fn.Backward]:!1,[fn.Forward]:!1},y:{[fn.Backward]:!1,[fn.Forward]:!1}};function dU(t){let{delta:e,disabled:n}=t;const r=Ad(e);return ic(i=>{if(n||!r||!i)return uU;const s={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[fn.Backward]:i.x[fn.Backward]||s.x===-1,[fn.Forward]:i.x[fn.Forward]||s.x===1},y:{[fn.Backward]:i.y[fn.Backward]||s.y===-1,[fn.Forward]:i.y[fn.Forward]||s.y===1}}},[n,e,r])}function fU(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return ic(i=>{var s;return e==null?null:(s=r??i)!=null?s:null},[r,e])}function hU(t,e){return D.useMemo(()=>t.reduce((n,r)=>{const{sensor:i}=r,s=i.activators.map(a=>({eventName:a.eventName,handler:e(a.handler,r)}));return[...n,...s]},[]),[t,e])}var jl;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(jl||(jl={}));var Mg;(function(t){t.Optimized="optimized"})(Mg||(Mg={}));const tS=new Map;function pU(t,e){let{dragging:n,dependencies:r,config:i}=e;const[s,a]=D.useState(null),{frequency:c,measure:u,strategy:d}=i,f=D.useRef(t),p=w(),m=Ll(p),v=D.useCallback(function(x){x===void 0&&(x=[]),!m.current&&a(C=>C===null?x:C.concat(x.filter(k=>!C.includes(k))))},[m]),b=D.useRef(null),_=ic(x=>{if(p&&!n)return tS;if(!x||x===tS||f.current!==t||s!=null){const C=new Map;for(let k of t){if(!k)continue;if(s&&s.length>0&&!s.includes(k.id)&&k.rect.current){C.set(k.id,k.rect.current);continue}const R=k.node.current,A=R?new $m(u(R),R):null;k.rect.current=A,A&&C.set(k.id,A)}return C}return x},[t,s,n,p,u]);return D.useEffect(()=>{f.current=t},[t]),D.useEffect(()=>{p||v()},[n,p]),D.useEffect(()=>{s&&s.length>0&&a(null)},[JSON.stringify(s)]),D.useEffect(()=>{p||typeof c!="number"||b.current!==null||(b.current=setTimeout(()=>{v(),b.current=null},c))},[c,p,v,...r]),{droppableRects:_,measureDroppableContainers:v,measuringScheduled:s!=null};function w(){switch(d){case jl.Always:return!1;case jl.BeforeDragging:return n;default:return!n}}}function Ym(t,e){return ic(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function gU(t,e){return Ym(t,e)}function mU(t){let{callback:e,disabled:n}=t;const r=hf(e),i=D.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(r)},[r,n]);return D.useEffect(()=>()=>i?.disconnect(),[i]),i}function gf(t){let{callback:e,disabled:n}=t;const r=hf(e),i=D.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(r)},[n]);return D.useEffect(()=>()=>i?.disconnect(),[i]),i}function vU(t){return new $m(sc(t),t)}function nS(t,e,n){e===void 0&&(e=vU);const[r,i]=D.useState(null);function s(){i(u=>{if(!t)return null;if(t.isConnected===!1){var d;return(d=u??n)!=null?d:null}const f=e(t);return JSON.stringify(u)===JSON.stringify(f)?u:f})}const a=mU({callback(u){if(t)for(const d of u){const{type:f,target:p}=d;if(f==="childList"&&p instanceof HTMLElement&&p.contains(t)){s();break}}}}),c=gf({callback:s});return Fi(()=>{s(),t?(c?.observe(t),a?.observe(document.body,{childList:!0,subtree:!0})):(c?.disconnect(),a?.disconnect())},[t]),r}function yU(t){const e=Ym(t);return IC(t,e)}const rS=[];function bU(t){const e=D.useRef(t),n=ic(r=>t?r&&r!==rS&&t&&e.current&&t.parentNode===e.current.parentNode?r:Vm(t):rS,[t]);return D.useEffect(()=>{e.current=t},[t]),n}function _U(t){const[e,n]=D.useState(null),r=D.useRef(t),i=D.useCallback(s=>{const a=Fp(s.target);a&&n(c=>c?(c.set(a,Rg(a)),new Map(c)):null)},[]);return D.useEffect(()=>{const s=r.current;if(t!==s){a(s);const c=t.map(u=>{const d=Fp(u);return d?(d.addEventListener("scroll",i,{passive:!0}),[d,Rg(d)]):null}).filter(u=>u!=null);n(c.length?new Map(c):null),r.current=t}return()=>{a(t),a(s)};function a(c){c.forEach(u=>{const d=Fp(u);d?.removeEventListener("scroll",i)})}},[i,t]),D.useMemo(()=>t.length?e?Array.from(e.values()).reduce((s,a)=>no(s,a),zr):UC(t):zr,[t,e])}function iS(t,e){e===void 0&&(e=[]);const n=D.useRef(null);return D.useEffect(()=>{n.current=null},e),D.useEffect(()=>{const r=t!==zr;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?Rd(t,n.current):zr}function SU(t){D.useEffect(()=>{if(!ff)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n?.()}},t.map(e=>{let{sensor:n}=e;return n}))}function wU(t,e){return D.useMemo(()=>t.reduce((n,r)=>{let{eventName:i,handler:s}=r;return n[i]=a=>{s(a,e)},n},{}),[t,e])}function qC(t){return D.useMemo(()=>t?Yz(t):null,[t])}const sS=[];function xU(t,e){e===void 0&&(e=sc);const[n]=t,r=qC(n?Fn(n):null),[i,s]=D.useState(sS);function a(){s(()=>t.length?t.map(u=>HC(u)?r:new $m(e(u),u)):sS)}const c=gf({callback:a});return Fi(()=>{c?.disconnect(),a(),t.forEach(u=>c?.observe(u))},[t]),i}function GC(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return rc(e)?e:t}function EU(t){let{measure:e}=t;const[n,r]=D.useState(null),i=D.useCallback(d=>{for(const{target:f}of d)if(rc(f)){r(p=>{const m=e(f);return p?{...p,width:m.width,height:m.height}:m});break}},[e]),s=gf({callback:i}),a=D.useCallback(d=>{const f=GC(d);s?.disconnect(),f&&s?.observe(f),r(f?e(f):null)},[e,s]),[c,u]=kd(a);return D.useMemo(()=>({nodeRef:c,rect:n,setRef:u}),[n,c,u])}const CU=[{sensor:Gm,options:{}},{sensor:VC,options:{}}],TU={current:{}},rd={draggable:{measure:Z_},droppable:{measure:Z_,strategy:jl.WhileDragging,frequency:Mg.Optimized},dragOverlay:{measure:sc}};class xl extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const DU={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new xl,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Md},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:rd,measureDroppableContainers:Md,windowRect:null,measuringScheduled:!1},YC={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Md,draggableNodes:new Map,over:null,measureDroppableContainers:Md},ac=D.createContext(YC),QC=D.createContext(DU);function kU(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new xl}}}function AU(t,e){switch(e.type){case rn.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case rn.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case rn.DragEnd:case rn.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case rn.RegisterDroppable:{const{element:n}=e,{id:r}=n,i=new xl(t.droppable.containers);return i.set(r,n),{...t,droppable:{...t.droppable,containers:i}}}case rn.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const a=new xl(t.droppable.containers);return a.set(n,{...s,disabled:i}),{...t,droppable:{...t.droppable,containers:a}}}case rn.UnregisterDroppable:{const{id:n,key:r}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const s=new xl(t.droppable.containers);return s.delete(n),{...t,droppable:{...t.droppable,containers:s}}}default:return t}}function RU(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:i}=D.useContext(ac),s=Ad(r),a=Ad(n?.id);return D.useEffect(()=>{if(!e&&!r&&s&&a!=null){if(!Wm(s)||document.activeElement===s.target)return;const c=i.get(a);if(!c)return;const{activatorNode:u,node:d}=c;if(!u.current&&!d.current)return;requestAnimationFrame(()=>{for(const f of[u.current,d.current]){if(!f)continue;const p=Dz(f);if(p){p.focus();break}}})}},[r,e,i,a,s]),null}function KC(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((i,s)=>s({transform:i,...r}),n):n}function OU(t){return D.useMemo(()=>({draggable:{...rd.draggable,...t?.draggable},droppable:{...rd.droppable,...t?.droppable},dragOverlay:{...rd.dragOverlay,...t?.dragOverlay}}),[t?.draggable,t?.droppable,t?.dragOverlay])}function MU(t){let{activeNode:e,measure:n,initialRect:r,config:i=!0}=t;const s=D.useRef(!1),{x:a,y:c}=typeof i=="boolean"?{x:i,y:i}:i;Fi(()=>{if(!a&&!c||!e){s.current=!1;return}if(s.current||!r)return;const d=e?.node.current;if(!d||d.isConnected===!1)return;const f=n(d),p=IC(f,r);if(a||(p.x=0),c||(p.y=0),s.current=!0,Math.abs(p.x)>0||Math.abs(p.y)>0){const m=LC(d);m&&m.scrollBy({top:p.y,left:p.x})}},[e,a,c,r,n])}const mf=D.createContext({...zr,scaleX:1,scaleY:1});var cs;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(cs||(cs={}));const NU=D.memo(function(e){var n,r,i,s;let{id:a,accessibility:c,autoScroll:u=!0,children:d,sensors:f=CU,collisionDetection:p=Bz,measuring:m,modifiers:v,...b}=e;const _=D.useReducer(AU,void 0,kU),[w,x]=_,[C,k]=Nz(),[R,A]=D.useState(cs.Uninitialized),M=R===cs.Initialized,{draggable:{active:P,nodes:O,translate:H},droppable:{containers:B}}=w,$=P!=null?O.get(P):null,ee=D.useRef({initial:null,translated:null}),re=D.useMemo(()=>{var Ze;return P!=null?{id:P,data:(Ze=$?.data)!=null?Ze:TU,rect:ee}:null},[P,$]),he=D.useRef(null),[pe,ie]=D.useState(null),[oe,K]=D.useState(null),q=Ll(b,Object.values(b)),Y=pf("DndDescribedBy",a),F=D.useMemo(()=>B.getEnabled(),[B]),G=OU(m),{droppableRects:ne,measureDroppableContainers:le,measuringScheduled:ue}=pU(F,{dragging:M,dependencies:[H.x,H.y],config:G.droppable}),ce=fU(O,P),Ee=D.useMemo(()=>oe?Od(oe):null,[oe]),se=gn(),Me=gU(ce,G.draggable.measure);MU({activeNode:P!=null?O.get(P):null,config:se.layoutShiftCompensation,initialRect:Me,measure:G.draggable.measure});const He=nS(ce,G.draggable.measure,Me),jt=nS(ce?ce.parentElement:null),Bt=D.useRef({activatorEvent:null,active:null,activeNode:ce,collisionRect:null,collisions:null,droppableRects:ne,draggableNodes:O,draggingNode:null,draggingNodeRect:null,droppableContainers:B,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),jn=B.getNodeFor((n=Bt.current.over)==null?void 0:n.id),ge=EU({measure:G.dragOverlay.measure}),Pe=(r=ge.nodeRef.current)!=null?r:ce,Ke=M?(i=ge.rect)!=null?i:He:null,_t=!!(ge.nodeRef.current&&ge.rect),Zt=yU(_t?null:He),We=qC(Pe?Fn(Pe):null),xe=bU(M?jn??ce:null),ot=xU(xe),Le=KC(v,{transform:{x:H.x-Zt.x,y:H.y-Zt.y,scaleX:1,scaleY:1},activatorEvent:oe,active:re,activeNodeRect:He,containerNodeRect:jt,draggingNodeRect:Ke,over:Bt.current.over,overlayNodeRect:ge.rect,scrollableAncestors:xe,scrollableAncestorRects:ot,windowRect:We}),Z=Ee?no(Ee,H):null,ye=_U(xe),Fe=iS(ye),Ne=iS(ye,[He]),be=no(Le,Fe),Se=Ke?$z(Ke,Le):null,Re=re&&Se?p({active:re,collisionRect:Se,droppableRects:ne,droppableContainers:F,pointerCoordinates:Z}):null,ze=zz(Re,"id"),[Ue,tt]=D.useState(null),ut=_t?Le:no(Le,Ne),ur=Wz(ut,(s=Ue?.rect)!=null?s:null,He),gt=D.useRef(null),nt=D.useCallback((Ze,Vt)=>{let{sensor:de,options:Ie}=Vt;if(he.current==null)return;const Ge=O.get(he.current);if(!Ge)return;const Xe=Ze.nativeEvent,Ht=new de({active:he.current,activeNode:Ge,event:Xe,options:Ie,context:Bt,onAbort(Oe){if(!O.get(Oe))return;const{onDragAbort:mt}=q.current,Ot={id:Oe};mt?.(Ot),C({type:"onDragAbort",event:Ot})},onPending(Oe,$t,mt,Ot){if(!O.get(Oe))return;const{onDragPending:ln}=q.current,Un={id:Oe,constraint:$t,initialCoordinates:mt,offset:Ot};ln?.(Un),C({type:"onDragPending",event:Un})},onStart(Oe){const $t=he.current;if($t==null)return;const mt=O.get($t);if(!mt)return;const{onDragStart:Ot}=q.current,zn={activatorEvent:Xe,active:{id:$t,data:mt.data,rect:ee}};Ei.unstable_batchedUpdates(()=>{Ot?.(zn),A(cs.Initializing),x({type:rn.DragStart,initialCoordinates:Oe,active:$t}),C({type:"onDragStart",event:zn}),ie(gt.current),K(Xe)})},onMove(Oe){x({type:rn.DragMove,coordinates:Oe})},onEnd:lt(rn.DragEnd),onCancel:lt(rn.DragCancel)});gt.current=Ht;function lt(Oe){return async function(){const{active:mt,collisions:Ot,over:zn,scrollAdjustedTranslate:ln}=Bt.current;let Un=null;if(mt&&ln){const{cancelDrop:ci}=q.current;Un={activatorEvent:Xe,active:mt,collisions:Ot,delta:ln,over:zn},Oe===rn.DragEnd&&typeof ci=="function"&&await Promise.resolve(ci(Un))&&(Oe=rn.DragCancel)}he.current=null,Ei.unstable_batchedUpdates(()=>{x({type:Oe}),A(cs.Uninitialized),tt(null),ie(null),K(null),gt.current=null;const ci=Oe===rn.DragEnd?"onDragEnd":"onDragCancel";if(Un){const So=q.current[ci];So?.(Un),C({type:ci,event:Un})}})}}},[O]),Wt=D.useCallback((Ze,Vt)=>(de,Ie)=>{const Ge=de.nativeEvent,Xe=O.get(Ie);if(he.current!==null||!Xe||Ge.dndKit||Ge.defaultPrevented)return;const Ht={active:Xe};Ze(de,Vt.options,Ht)===!0&&(Ge.dndKit={capturedBy:Vt.sensor},he.current=Ie,nt(de,Vt))},[O,nt]),Be=hU(f,Wt);SU(f),Fi(()=>{He&&R===cs.Initializing&&A(cs.Initialized)},[He,R]),D.useEffect(()=>{const{onDragMove:Ze}=q.current,{active:Vt,activatorEvent:de,collisions:Ie,over:Ge}=Bt.current;if(!Vt||!de)return;const Xe={active:Vt,activatorEvent:de,collisions:Ie,delta:{x:be.x,y:be.y},over:Ge};Ei.unstable_batchedUpdates(()=>{Ze?.(Xe),C({type:"onDragMove",event:Xe})})},[be.x,be.y]),D.useEffect(()=>{const{active:Ze,activatorEvent:Vt,collisions:de,droppableContainers:Ie,scrollAdjustedTranslate:Ge}=Bt.current;if(!Ze||he.current==null||!Vt||!Ge)return;const{onDragOver:Xe}=q.current,Ht=Ie.get(ze),lt=Ht&&Ht.rect.current?{id:Ht.id,rect:Ht.rect.current,data:Ht.data,disabled:Ht.disabled}:null,Oe={active:Ze,activatorEvent:Vt,collisions:de,delta:{x:Ge.x,y:Ge.y},over:lt};Ei.unstable_batchedUpdates(()=>{tt(lt),Xe?.(Oe),C({type:"onDragOver",event:Oe})})},[ze]),Fi(()=>{Bt.current={activatorEvent:oe,active:re,activeNode:ce,collisionRect:Se,collisions:Re,droppableRects:ne,draggableNodes:O,draggingNode:Pe,draggingNodeRect:Ke,droppableContainers:B,over:Ue,scrollableAncestors:xe,scrollAdjustedTranslate:be},ee.current={initial:Ke,translated:Se}},[re,ce,Re,Se,O,Pe,Ke,ne,B,Ue,xe,be]),cU({...se,delta:H,draggingRect:Se,pointerCoordinates:Z,scrollableAncestors:xe,scrollableAncestorRects:ot});const qe=D.useMemo(()=>({active:re,activeNode:ce,activeNodeRect:He,activatorEvent:oe,collisions:Re,containerNodeRect:jt,dragOverlay:ge,draggableNodes:O,droppableContainers:B,droppableRects:ne,over:Ue,measureDroppableContainers:le,scrollableAncestors:xe,scrollableAncestorRects:ot,measuringConfiguration:G,measuringScheduled:ue,windowRect:We}),[re,ce,He,oe,Re,jt,ge,O,B,ne,Ue,le,xe,ot,G,ue,We]),Hn=D.useMemo(()=>({activatorEvent:oe,activators:Be,active:re,activeNodeRect:He,ariaDescribedById:{draggable:Y},dispatch:x,draggableNodes:O,over:Ue,measureDroppableContainers:le}),[oe,Be,re,He,x,Y,O,Ue,le]);return Q.createElement(NC.Provider,{value:k},Q.createElement(ac.Provider,{value:Hn},Q.createElement(QC.Provider,{value:qe},Q.createElement(mf.Provider,{value:ur},d)),Q.createElement(RU,{disabled:c?.restoreFocus===!1})),Q.createElement(Lz,{...c,hiddenTextDescribedById:Y}));function gn(){const Ze=pe?.autoScrollEnabled===!1,Vt=typeof u=="object"?u.enabled===!1:u===!1,de=M&&!Ze&&!Vt;return typeof u=="object"?{...u,enabled:de}:{enabled:de}}}),IU=D.createContext(null),aS="button",PU="Draggable";function t3(t){let{id:e,data:n,disabled:r=!1,attributes:i}=t;const s=pf(PU),{activators:a,activatorEvent:c,active:u,activeNodeRect:d,ariaDescribedById:f,draggableNodes:p,over:m}=D.useContext(ac),{role:v=aS,roleDescription:b="draggable",tabIndex:_=0}=i??{},w=u?.id===e,x=D.useContext(w?mf:IU),[C,k]=kd(),[R,A]=kd(),M=wU(a,e),P=Ll(n);Fi(()=>(p.set(e,{id:e,key:s,node:C,activatorNode:R,data:P}),()=>{const H=p.get(e);H&&H.key===s&&p.delete(e)}),[p,e]);const O=D.useMemo(()=>({role:v,tabIndex:_,"aria-disabled":r,"aria-pressed":w&&v===aS?!0:void 0,"aria-roledescription":b,"aria-describedby":f.draggable}),[r,v,_,w,b,f.draggable]);return{active:u,activatorEvent:c,activeNodeRect:d,attributes:O,isDragging:w,listeners:r?void 0:M,node:C,over:m,setNodeRef:k,setActivatorNodeRef:A,transform:x}}function LU(){return D.useContext(QC)}const FU="Droppable",jU={timeout:25};function n3(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:i}=t;const s=pf(FU),{active:a,dispatch:c,over:u,measureDroppableContainers:d}=D.useContext(ac),f=D.useRef({disabled:n}),p=D.useRef(!1),m=D.useRef(null),v=D.useRef(null),{disabled:b,updateMeasurementsFor:_,timeout:w}={...jU,...i},x=Ll(_??r),C=D.useCallback(()=>{if(!p.current){p.current=!0;return}v.current!=null&&clearTimeout(v.current),v.current=setTimeout(()=>{d(Array.isArray(x.current)?x.current:[x.current]),v.current=null},w)},[w]),k=gf({callback:C,disabled:b||!a}),R=D.useCallback((O,H)=>{k&&(H&&(k.unobserve(H),p.current=!1),O&&k.observe(O))},[k]),[A,M]=kd(R),P=Ll(e);return D.useEffect(()=>{!k||!A.current||(k.disconnect(),p.current=!1,k.observe(A.current))},[A,k]),D.useEffect(()=>(c({type:rn.RegisterDroppable,element:{id:r,key:s,disabled:n,node:A,rect:m,data:P}}),()=>c({type:rn.UnregisterDroppable,key:s,id:r})),[r]),D.useEffect(()=>{n!==f.current.disabled&&(c({type:rn.SetDroppableDisabled,id:r,key:s,disabled:n}),f.current.disabled=n)},[r,s,n,c]),{active:a,rect:m,isOver:u?.id===r,node:A,over:u,setNodeRef:M}}function HU(t){let{animation:e,children:n}=t;const[r,i]=D.useState(null),[s,a]=D.useState(null),c=Ad(n);return!n&&!r&&c&&i(c),Fi(()=>{if(!s)return;const u=r?.key,d=r?.props.id;if(u==null||d==null){i(null);return}Promise.resolve(e(d,s)).then(()=>{i(null)})},[e,r,s]),Q.createElement(Q.Fragment,null,n,r?D.cloneElement(r,{ref:a}):null)}const zU={x:0,y:0,scaleX:1,scaleY:1};function UU(t){let{children:e}=t;return Q.createElement(ac.Provider,{value:YC},Q.createElement(mf.Provider,{value:zU},e))}const BU={position:"fixed",touchAction:"none"},WU=t=>Wm(t)?"transform 250ms ease":void 0,VU=D.forwardRef((t,e)=>{let{as:n,activatorEvent:r,adjustScale:i,children:s,className:a,rect:c,style:u,transform:d,transition:f=WU}=t;if(!c)return null;const p=i?d:{...d,scaleX:1,scaleY:1},m={...BU,width:c.width,height:c.height,top:c.top,left:c.left,transform:Fl.Transform.toString(p),transformOrigin:i&&r?jz(r,c):void 0,transition:typeof f=="function"?f(r):f,...u};return Q.createElement(n,{className:a,style:m,ref:e},s)}),$U=t=>e=>{let{active:n,dragOverlay:r}=e;const i={},{styles:s,className:a}=t;if(s!=null&&s.active)for(const[c,u]of Object.entries(s.active))u!==void 0&&(i[c]=n.node.style.getPropertyValue(c),n.node.style.setProperty(c,u));if(s!=null&&s.dragOverlay)for(const[c,u]of Object.entries(s.dragOverlay))u!==void 0&&r.node.style.setProperty(c,u);return a!=null&&a.active&&n.node.classList.add(a.active),a!=null&&a.dragOverlay&&r.node.classList.add(a.dragOverlay),function(){for(const[u,d]of Object.entries(i))n.node.style.setProperty(u,d);a!=null&&a.active&&n.node.classList.remove(a.active)}},qU=t=>{let{transform:{initial:e,final:n}}=t;return[{transform:Fl.Transform.toString(e)},{transform:Fl.Transform.toString(n)}]},GU={duration:250,easing:"ease",keyframes:qU,sideEffects:$U({styles:{active:{opacity:"0"}}})};function YU(t){let{config:e,draggableNodes:n,droppableContainers:r,measuringConfiguration:i}=t;return hf((s,a)=>{if(e===null)return;const c=n.get(s);if(!c)return;const u=c.node.current;if(!u)return;const d=GC(a);if(!d)return;const{transform:f}=Fn(a).getComputedStyle(a),p=PC(f);if(!p)return;const m=typeof e=="function"?e:QU(e);return BC(u,i.draggable.measure),m({active:{id:s,data:c.data,node:u,rect:i.draggable.measure(u)},draggableNodes:n,dragOverlay:{node:a,rect:i.dragOverlay.measure(d)},droppableContainers:r,measuringConfiguration:i,transform:p})})}function QU(t){const{duration:e,easing:n,sideEffects:r,keyframes:i}={...GU,...t};return s=>{let{active:a,dragOverlay:c,transform:u,...d}=s;if(!e)return;const f={x:c.rect.left-a.rect.left,y:c.rect.top-a.rect.top},p={scaleX:u.scaleX!==1?a.rect.width*u.scaleX/c.rect.width:1,scaleY:u.scaleY!==1?a.rect.height*u.scaleY/c.rect.height:1},m={x:u.x-f.x,y:u.y-f.y,...p},v=i({...d,active:a,dragOverlay:c,transform:{initial:u,final:m}}),[b]=v,_=v[v.length-1];if(JSON.stringify(b)===JSON.stringify(_))return;const w=r?.({active:a,dragOverlay:c,...d}),x=c.node.animate(v,{duration:e,easing:n,fill:"forwards"});return new Promise(C=>{x.onfinish=()=>{w?.(),C()}})}}let oS=0;function KU(t){return D.useMemo(()=>{if(t!=null)return oS++,oS},[t])}const ZU=Q.memo(t=>{let{adjustScale:e=!1,children:n,dropAnimation:r,style:i,transition:s,modifiers:a,wrapperElement:c="div",className:u,zIndex:d=999}=t;const{activatorEvent:f,active:p,activeNodeRect:m,containerNodeRect:v,draggableNodes:b,droppableContainers:_,dragOverlay:w,over:x,measuringConfiguration:C,scrollableAncestors:k,scrollableAncestorRects:R,windowRect:A}=LU(),M=D.useContext(mf),P=KU(p?.id),O=KC(a,{activatorEvent:f,active:p,activeNodeRect:m,containerNodeRect:v,draggingNodeRect:w.rect,over:x,overlayNodeRect:w.rect,scrollableAncestors:k,scrollableAncestorRects:R,transform:M,windowRect:A}),H=Ym(m),B=YU({config:r,draggableNodes:b,droppableContainers:_,measuringConfiguration:C}),$=H?w.setRef:void 0;return Q.createElement(UU,null,Q.createElement(HU,{animation:B},p&&P?Q.createElement(VU,{key:P,id:p.id,ref:$,as:c,activatorEvent:f,adjustScale:e,className:u,transition:s,rect:H,style:{zIndex:d,...i},transform:O},n):null))});function Us({label:t,options:e,selectedOptions:n,onSelectionChange:r,searchPlaceholder:i,id:s,width:a="200px"}){const[c,u]=D.useState(!1),[d,f]=D.useState(""),p=D.useRef(null);D.useEffect(()=>{const C=k=>{p.current&&!p.current.contains(k.target)&&u(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]);const m=e.filter(C=>C.toLowerCase().includes(d.toLowerCase())),v=m.length>0&&m.every(C=>n.includes(C)),b=C=>{if(C.preventDefault(),C.stopPropagation(),v){const k=n.filter(R=>!m.includes(R));r(k)}else{const k=[...new Set([...n,...m])];r(k)}},_=(C,k)=>{if(C.preventDefault(),C.stopPropagation(),n.includes(k)){const R=n.filter(A=>A!==k);r(R)}else{const R=[...n.filter(A=>A!==""),k];r(R)}},w=()=>{u(!0)},x=C=>{f(C.target.value)};return E.jsxs("div",{className:"relative",ref:p,style:{width:a},children:[E.jsxs("div",{className:"space-y-2",children:[E.jsxs(ri,{htmlFor:s,children:[t,":"]}),E.jsx(ni,{type:"text",id:s,value:d,onChange:x,onFocus:w,placeholder:i})]}),c&&e.length>0&&E.jsxs("div",{className:"absolute top-full left-0 right-0 bg-white border border-gray-300 rounded-md shadow-lg z-10 max-h-60 overflow-y-auto",children:[E.jsx("div",{className:`px-3 py-1 hover:bg-gray-100 cursor-pointer border-b border-gray-100 ${v?"bg-navy-50 text-navy-800":""}`,onMouseDown:b,children:E.jsx("div",{className:"text-xs font-bold",children:"Tutti"})}),m.map(C=>E.jsx("div",{className:`px-3 py-1 hover:bg-gray-100 cursor-pointer border-b border-gray-100 last:border-b-0 ${n.includes(C)?"bg-navy-50 text-navy-800":""}`,onMouseDown:k=>_(k,C),children:E.jsx("div",{className:"text-xs font-normal",children:C})},C))]})]})}const XU=D.lazy(()=>Ol(()=>import("./TaskPoolDataTable-CUV4ehZH.js"),[])),JU=D.lazy(()=>Ol(()=>import("./GanttChart-DihpR4Ll.js"),[])),lS=()=>E.jsx("div",{className:"loading",children:"Caricamento componenti scheduler..."}),eB=({schedulingLoading:t})=>{if(!t.isScheduling&&!t.isRescheduling&&!t.isShunting&&!t.isNavigating)return null;const e=()=>t.isScheduling?"Programmazione lavoro...":t.isRescheduling?"Riprogrammazione lavoro...":t.isShunting?"Risoluzione conflitti...":t.isNavigating?"Navigazione...":"Operazione in corso...";return E.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:E.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-lg flex items-center space-x-3",children:[E.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),E.jsx("span",{className:"text-gray-700 font-medium",children:e()})]})})},tB=(t,e)=>{const n=document.querySelector(t);if(!n){Ci("Grafico Gantt non trovato. Assicurati che il grafico sia visibile sullo schermo.");return}const r=Array.from(document.styleSheets);let i="";r.forEach(m=>{try{Array.from(m.cssRules||m.rules||[]).forEach(b=>{i+=b.cssText+`
`})}catch{}});const s=n.cloneNode(!0),a=`
    <!DOCTYPE html>
    <html>
      <head>
        <title>Grafico Gantt - ${e}</title>
        <style>
          ${i}
          body { 
            margin: 0; 
            padding: 20px; 
            font-family: Arial, sans-serif;
          }
          .calendar-section {
            width: 100%;
            overflow-x: auto;
          }
        </style>
      </head>
      <body>
        <div style="text-align: center; margin-bottom: 20px; font-size: 12px; font-weight: bold;">
          Grafico Gantt - ${e}
        </div>
        <div class="calendar-section">
          ${s.outerHTML}
        </div>
      </body>
    </html>
  `,c=new Blob([a],{type:"text/html"}),u=window.URL.createObjectURL(c),d=document.createElement("a");d.href=u;const f=new Date().toISOString().split("T")[0],p=new Date().toISOString().split("T")[1].split(".")[0].replace(/:/g,"-");d.download=`grafico-gantt-${f}-${p}.html`,document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(u)};function nB(){const{data:t=[],isLoading:e,error:n}=ef(),{data:r=[],isLoading:i,error:s}=Jd(),{getOdpOrdersByWorkCenter:a,getScheduledOrders:c}=cd(),{selectedWorkCenter:u,isLoading:d,isInitialized:f,showAlert:p,isEditMode:m,toggleEditMode:v,showConflictDialog:b,schedulingLoading:_,setDragPreview:w,clearDragPreview:x,dragPreview:C}=bn(),{scheduleTask:k,unscheduleTask:R,scheduleTaskFromSlot:A,rescheduleTaskToSlot:M,validateSlotAvailability:P}=Zl(),{init:O,cleanup:H}=xs(),B=tr(),$=Fz(K_(Gm,{activationConstraint:{distance:0}}),K_($C,{activationConstraint:{distance:0}})),[ee,re]=D.useState(()=>{const Z=new Date;return new Date(Date.UTC(Z.getUTCFullYear(),Z.getUTCMonth(),Z.getUTCDate()))}),[he,pe]=D.useState(null),ie=e||i||d,[oe,K]=D.useState(null),[q,Y]=D.useState(""),[F,G]=D.useState(""),[ne,le]=D.useState(""),ue={workCenter:[],department:[],machineType:[],machineName:[]};function ce(Z,ye){switch(ye.type){case"SET_FILTER":return{...Z,[ye.payload.filterName]:ye.payload.value};case"CLEAR_FILTERS":return ue;default:return Z}}const[Ee,se]=D.useReducer(ce,ue);D.useEffect(()=>(f||O(),()=>{H()}),[O,f,H]);const Me=D.useMemo(()=>u?u==="BOTH"?t:t.filter(Z=>Z.work_center===u):[],[u,t]),He=D.useMemo(()=>Me.filter(ye=>ye.status==="SCHEDULED"),[Me,u]),jt=D.useMemo(()=>{if(performance.now(),!r||r.length===0)return{activeMachines:[],workCenters:[],departments:[],machineTypes:[],machineNames:[]};let Z=r;u&&u!==Je.BOTH&&(Z=r.filter(ut=>ut.work_center===u));const ye=Z.filter(ut=>ut.status===Ti.ACTIVE);if(ye.length===0)return{activeMachines:[],workCenters:[],departments:[],machineTypes:[],machineNames:[]};const Fe=new Set,Ne=new Set,be=new Set,Se=new Set;for(const ut of ye)ut.work_center&&Fe.add(ut.work_center),ut.department&&Ne.add(ut.department),ut.machine_type&&be.add(ut.machine_type),ut.machine_name&&Se.add(ut.machine_name);const Re=Array.from(Fe).sort(),ze=Array.from(Ne).sort(),Ue=Array.from(be).sort(),tt=Array.from(Se).sort();return performance.now(),{activeMachines:ye,workCenters:Re,departments:ze,machineTypes:Ue,machineNames:tt}},[r,u]),Bt=D.useMemo(()=>{const{activeMachines:Z}=jt;let ye=Z;return Ee.workCenter.length>0&&(ye=ye.filter(Fe=>Ee.workCenter.includes(Fe.work_center))),Ee.department.length>0&&(ye=ye.filter(Fe=>Ee.department.includes(Fe.department))),Ee.machineType.length>0&&(ye=ye.filter(Fe=>Ee.machineType.includes(Fe.machine_type))),Ee.machineName.length>0&&(ye=ye.filter(Fe=>Ee.machineName.includes(Fe.machine_name))),ye},[jt,Ee]),jn=D.useCallback(async(Z,ye="Daily")=>{const{startSchedulingOperation:Fe,stopSchedulingOperation:Ne}=bn.getState();try{Fe("navigate");let be;re(Se=>{if(Z==="today"){const Re=new Date,ze=Re.getUTCFullYear(),Ue=Re.getUTCMonth(),tt=Re.getUTCDate();return be=new Date(Date.UTC(ze,Ue,tt)),be}else if(Z==="prev"){if(ye==="Weekly")return be=la(nN(Se,1),{weekStartsOn:1}),be;{const Re=new Date(Se);return Re.setUTCDate(Re.getUTCDate()-1),be=Re,be}}else if(Z==="next"){if(ye==="Weekly")return be=la(_x(Se,1),{weekStartsOn:1}),be;{const Re=new Date(Se);return Re.setUTCDate(Re.getUTCDate()+1),be=Re,Re}}return be=Se,Se})}finally{Ne()}},[]),ge=D.useCallback(()=>{const Z=new Date,ye=Z.getUTCFullYear(),Fe=Z.getUTCMonth(),Ne=Z.getUTCDate(),be=new Date(Date.UTC(ye,Fe,Ne));return ee.getTime()===be.getTime()?"Oggi":pn(ee,"yyyy-MM-dd")},[ee]),Pe=D.useCallback(()=>{se({type:"CLEAR_FILTERS"})},[]),Ke=D.useCallback((Z,ye,Fe)=>{if(!Z.trim())return;let Ne=He.find(be=>be[ye]===Z.trim());if(Ne||(Ne=He.find(be=>be[ye]&&be[ye].toLowerCase().includes(Z.trim().toLowerCase()))),!Ne){p(`Lavoro non trovato per ${Fe}: ${Z}`,"warning");return}_t(Ne,ye,Fe,Z)},[He,r,p]),_t=D.useCallback((Z,ye,Fe,Ne)=>{const be=r.find(Re=>Re.id===Z.scheduled_machine_id);if(!be){p("Macchina non trovata per questo lavoro","error");return}if(se({type:"SET_FILTER",payload:{filterName:"machineName",value:[be.machine_name]}}),se({type:"SET_FILTER",payload:{filterName:"workCenter",value:[be.work_center]}}),se({type:"SET_FILTER",payload:{filterName:"department",value:[be.department]}}),se({type:"SET_FILTER",payload:{filterName:"machineType",value:[be.machine_type]}}),Z.scheduled_start_time){const Re=new Date(Z.scheduled_start_time),ze=Re.getUTCFullYear(),Ue=Re.getUTCMonth(),tt=Re.getUTCDate();re(new Date(Date.UTC(ze,Ue,tt)))}ye==="odp_number"?Y(""):ye==="article_code"?G(""):ye==="nome_cliente"&&le("");const Se=Z[ye];p(`Lavoro trovato per ${Fe} "${Se}" su ${be.machine_name}`,"success")},[r,p,Y,G,le,re]),Zt=D.useRef(null),We=D.useRef(!1),xe=D.useCallback(Z=>{const ye=Z.active.data.current;ye&&ye.type==="task"?pe(ye.task):ye&&ye.type==="event"&&pe(ye.event)},[]),ot=D.useCallback(Z=>{const{over:ye}=Z;if(ye&&ye.data.current?.type==="slot"){const{machine:Fe,hour:Ne,minute:be,isUnavailable:Se,hasScheduledTask:Re}=ye.data.current;if(Se||Re){K(null),x();return}const ze=`${Fe.id}-${Ne}-${be}`;if(K(ze),he){const Ue=he.time_remaining||he.duration||1,tt=Math.ceil(Ue*4),ut=(Ne-6)*4+Math.floor(be/15);w({isActive:!0,startSlot:ut,durationSlots:tt,machineId:Fe.id})}}else ye&&ye.data.current?.type==="next-day"?(K("next-day-drop-zone"),x()):ye&&ye.data.current?.type==="previous-day"?(K("previous-day-drop-zone"),x()):(K(null),x())},[he,w,x]),Le=D.useCallback(async Z=>{if(performance.now(),Zt.current&&clearTimeout(Zt.current),We.current)return;pe(null),K(null),x();const{over:ye,active:Fe}=Z;if(!ye)return;const Ne=Fe.data.current,be=ye.data.current;if(!(!Ne||!be)){We.current=!0;try{await new Promise(Se=>{requestAnimationFrame(async()=>{const Re=performance.now();if(Ne.type==="task"&&be.type==="slot"){const ze=Ne.task,{machine:Ue,hour:tt,minute:ut,isUnavailable:ur,hasScheduledTask:gt}=be;if(gt)return p("Impossibile pianificare il lavoro su uno slot temporale occupato","error"),Se();const nt=await A(ze.id,Ue,ee,tt,ut,null,B);nt?.error?p(nt.error,"error"):nt?.conflict&&b(nt)}else if(Ne.type==="event"&&be.type==="slot"){const ze=Ne.event,{machine:Ue,hour:tt,minute:ut,isUnavailable:ur,hasScheduledTask:gt}=be;if(gt)return p("Impossibile riprogrammare il lavoro su uno slot temporale occupato","error"),Se();const nt=await M(ze.id,Ue,ee,tt,ut,B);nt?.error?p(nt.error,"error"):nt?.conflict&&b(nt)}else if(Ne.type==="event"&&be.type==="pool"){const ze=Ne.event;R(ze.id,B)}else(Ne.type==="task"||Ne.type==="event")&&be.type==="next-day"?p("Navigazione al giorno successivo completata","success"):(Ne.type==="task"||Ne.type==="event")&&be.type==="previous-day"&&p("Navigazione al giorno precedente completata","success");Se()})})}catch{p("Si  verificato un errore durante l'operazione di trascinamento","error")}finally{We.current=!1}}},[ee,A,M,R,p,b]);return ie?E.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:E.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-lg flex items-center space-x-3",children:[E.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),E.jsx("span",{className:"text-gray-700 font-medium",children:"Caricamento Scheduler Produzione..."})]})}):n||s?E.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:E.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-lg text-center",children:[E.jsx("div",{className:"text-red-600 mb-4",children:E.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 19.5c-.77.833.192 2.5 1.732 2.5z"})})}),E.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Errore nel caricamento dei dati"}),E.jsx("p",{className:"text-gray-600 mb-4",children:n?.message||s?.message||"Errore sconosciuto"}),E.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Riprova"})]})}):u?E.jsxs(E.Fragment,{children:[E.jsx(eB,{schedulingLoading:_}),E.jsxs(NU,{sensors:$,onDragStart:xe,onDragOver:ot,onDragEnd:Le,children:[E.jsxs("div",{className:`content-section ${m?"edit-mode":""}`,children:[E.jsxs("div",{className:"task-pool-section",children:[E.jsxs("div",{className:"task-pool-header",children:[E.jsx("h2",{className:"text-[10px] font-semibold text-gray-900",children:"Pool Lavori"}),E.jsx(Oi,{variant:m?"destructive":"default",size:"sm",onClick:v,title:m?"Disabilita modalit modifica":"Abilita modalit modifica",children:m?"Disabilita Modalit Modifica":"Abilita Modalit Modifica"})]}),E.jsx(D.Suspense,{fallback:E.jsx(lS,{}),children:E.jsx(XU,{})})]}),E.jsxs("div",{className:"section-controls",children:[E.jsx("div",{className:"task-pool-header",children:E.jsx("h2",{className:"text-[10px] font-semibold text-gray-900",children:"Filtri"})}),E.jsxs("div",{className:"filters-grid",children:[E.jsx("div",{className:"filters-actions-left",children:E.jsx(Oi,{variant:"secondary",size:"sm",onClick:Pe,title:"Clear all filters",children:"Cancella Filtri"})}),E.jsx(Us,{label:"ODP",options:He.map(Z=>Z.odp_number).filter(Boolean),selectedOptions:q?[q]:[],onSelectionChange:Z=>{Z.length>0?(Y(Z[0]),Ke(Z[0],"odp_number","ODP")):Y("")},searchPlaceholder:"Cerca ODP...",id:"odp_filter",width:"150px"}),E.jsx(Us,{label:"Codice Articolo",options:He.map(Z=>Z.article_code).filter(Boolean),selectedOptions:F?[F]:[],onSelectionChange:Z=>{Z.length>0?(G(Z[0]),Ke(Z[0],"article_code","codice articolo")):G("")},searchPlaceholder:"Cerca Articolo...",id:"article_filter",width:"150px"}),E.jsx(Us,{label:"Nome Cliente",options:He.map(Z=>Z.nome_cliente).filter(Boolean),selectedOptions:ne?[ne]:[],onSelectionChange:Z=>{Z.length>0?(le(Z[0]),Ke(Z[0],"nome_cliente","cliente")):le("")},searchPlaceholder:"Cerca Cliente...",id:"customer_filter",width:"150px"}),E.jsx(Us,{label:"Centro di Lavoro",options:jt.workCenters,selectedOptions:Ee.workCenter,onSelectionChange:Z=>se({type:"SET_FILTER",payload:{filterName:"workCenter",value:Z}}),searchPlaceholder:"Cerca Centri di Lavoro",id:"work_center_filter",width:"150px"}),E.jsx(Us,{label:"Reparto",options:jt.departments,selectedOptions:Ee.department,onSelectionChange:Z=>se({type:"SET_FILTER",payload:{filterName:"department",value:Z}}),searchPlaceholder:"Cerca Reparti",id:"department_filter",width:"150px"}),E.jsx(Us,{label:"Tipo Macchina",options:jt.machineTypes,selectedOptions:Ee.machineType,onSelectionChange:Z=>se({type:"SET_FILTER",payload:{filterName:"machineType",value:Z}}),searchPlaceholder:"Cerca Tipi di Macchina",id:"machine_type_filter",width:"150px"}),E.jsx(Us,{label:"Nome Macchina",options:jt.machineNames,selectedOptions:Ee.machineName,onSelectionChange:Z=>se({type:"SET_FILTER",payload:{filterName:"machineName",value:Z}}),searchPlaceholder:"Cerca Nomi Macchine",id:"machine_name_filter",width:"150px"}),E.jsx("div",{className:"filters-actions-right",children:E.jsx(Oi,{variant:"secondary",size:"sm",onClick:()=>tB(".calendar-section .calendar-grid-container",ge()),title:"Download exact Gantt chart as HTML file",children:"Scarica HTML"})})]})]}),E.jsxs("div",{className:"calendar-section relative",children:[E.jsx(D.Suspense,{fallback:E.jsx(lS,{}),children:E.jsx(JU,{machines:Bt,currentDate:ee,dropTargetId:oe,dragPreview:C,onNavigateToNextDay:Z=>jn("next",Z),onNavigateToPreviousDay:Z=>jn("prev",Z)})}),(_.isScheduling||_.isRescheduling||_.isShunting||_.isNavigating)&&E.jsx("div",{className:"absolute inset-0 bg-white z-40"})]})]}),E.jsx(ZU,{children:he?E.jsx("div",{style:{background:"#1e293b",color:"#ffffff",padding:"4px 8px",borderRadius:"4px",fontSize:"10px",fontWeight:"400",zIndex:9999,position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%) rotate(3deg) scale(1.05)",border:"1px solid #2d3a4b",boxShadow:"0 8px 25px rgba(0,0,0,0.3)",pointerEvents:"none",minHeight:"15px",display:"flex",alignItems:"center",justifyContent:"center",userSelect:"none",whiteSpace:"nowrap"},children:he.odp_number}):null})]})]}):E.jsx("div",{className:"p-1 bg-white rounded shadow-sm border",children:E.jsx("div",{className:"text-center py-1 text-red-600 text-[10px]",children:"Seleziona un centro di lavoro per visualizzare i dati dello scheduler."})})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function oc(t){return t+.5|0}const hs=(t,e,n)=>Math.max(Math.min(t,n),e);function fl(t){return hs(oc(t*2.55),0,255)}function vs(t){return hs(oc(t*255),0,255)}function xi(t){return hs(oc(t/2.55)/100,0,1)}function cS(t){return hs(oc(t*100),0,100)}const wr={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Ng=[..."0123456789ABCDEF"],rB=t=>Ng[t&15],iB=t=>Ng[(t&240)>>4]+Ng[t&15],Mu=t=>(t&240)>>4===(t&15),sB=t=>Mu(t.r)&&Mu(t.g)&&Mu(t.b)&&Mu(t.a);function aB(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&wr[t[1]]*17,g:255&wr[t[2]]*17,b:255&wr[t[3]]*17,a:e===5?wr[t[4]]*17:255}:(e===7||e===9)&&(n={r:wr[t[1]]<<4|wr[t[2]],g:wr[t[3]]<<4|wr[t[4]],b:wr[t[5]]<<4|wr[t[6]],a:e===9?wr[t[7]]<<4|wr[t[8]]:255})),n}const oB=(t,e)=>t<255?e(t):"";function lB(t){var e=sB(t)?rB:iB;return t?"#"+e(t.r)+e(t.g)+e(t.b)+oB(t.a,e):void 0}const cB=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function ZC(t,e,n){const r=e*Math.min(n,1-n),i=(s,a=(s+t/30)%12)=>n-r*Math.max(Math.min(a-3,9-a,1),-1);return[i(0),i(8),i(4)]}function uB(t,e,n){const r=(i,s=(i+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function dB(t,e,n){const r=ZC(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function fB(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}function Qm(t){const n=t.r/255,r=t.g/255,i=t.b/255,s=Math.max(n,r,i),a=Math.min(n,r,i),c=(s+a)/2;let u,d,f;return s!==a&&(f=s-a,d=c>.5?f/(2-s-a):f/(s+a),u=fB(n,r,i,f,s),u=u*60+.5),[u|0,d||0,c]}function Km(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(vs)}function Zm(t,e,n){return Km(ZC,t,e,n)}function hB(t,e,n){return Km(dB,t,e,n)}function pB(t,e,n){return Km(uB,t,e,n)}function XC(t){return(t%360+360)%360}function gB(t){const e=cB.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?fl(+e[5]):vs(+e[5]));const i=XC(+e[2]),s=+e[3]/100,a=+e[4]/100;return e[1]==="hwb"?r=hB(i,s,a):e[1]==="hsv"?r=pB(i,s,a):r=Zm(i,s,a),{r:r[0],g:r[1],b:r[2],a:n}}function mB(t,e){var n=Qm(t);n[0]=XC(n[0]+e),n=Zm(n),t.r=n[0],t.g=n[1],t.b=n[2]}function vB(t){if(!t)return;const e=Qm(t),n=e[0],r=cS(e[1]),i=cS(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${xi(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}const uS={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},dS={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function yB(){const t={},e=Object.keys(dS),n=Object.keys(uS);let r,i,s,a,c;for(r=0;r<e.length;r++){for(a=c=e[r],i=0;i<n.length;i++)s=n[i],c=c.replace(s,uS[s]);s=parseInt(dS[a],16),t[c]=[s>>16&255,s>>8&255,s&255]}return t}let Nu;function bB(t){Nu||(Nu=yB(),Nu.transparent=[0,0,0,0]);const e=Nu[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const _B=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function SB(t){const e=_B.exec(t);let n=255,r,i,s;if(e){if(e[7]!==r){const a=+e[7];n=e[8]?fl(a):hs(a*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?fl(r):hs(r,0,255)),i=255&(e[4]?fl(i):hs(i,0,255)),s=255&(e[6]?fl(s):hs(s,0,255)),{r,g:i,b:s,a:n}}}function wB(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${xi(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const zp=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,qa=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function xB(t,e,n){const r=qa(xi(t.r)),i=qa(xi(t.g)),s=qa(xi(t.b));return{r:vs(zp(r+n*(qa(xi(e.r))-r))),g:vs(zp(i+n*(qa(xi(e.g))-i))),b:vs(zp(s+n*(qa(xi(e.b))-s))),a:t.a+n*(e.a-t.a)}}function Iu(t,e,n){if(t){let r=Qm(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=Zm(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function JC(t,e){return t&&Object.assign(e||{},t)}function fS(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=vs(t[3]))):(e=JC(t,{r:0,g:0,b:0,a:1}),e.a=vs(e.a)),e}function EB(t){return t.charAt(0)==="r"?SB(t):gB(t)}class Hl{constructor(e){if(e instanceof Hl)return e;const n=typeof e;let r;n==="object"?r=fS(e):n==="string"&&(r=aB(e)||bB(e)||EB(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=JC(this._rgb);return e&&(e.a=xi(e.a)),e}set rgb(e){this._rgb=fS(e)}rgbString(){return this._valid?wB(this._rgb):void 0}hexString(){return this._valid?lB(this._rgb):void 0}hslString(){return this._valid?vB(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,i=e.rgb;let s;const a=n===s?.5:n,c=2*a-1,u=r.a-i.a,d=((c*u===-1?c:(c+u)/(1+c*u))+1)/2;s=1-d,r.r=255&d*r.r+s*i.r+.5,r.g=255&d*r.g+s*i.g+.5,r.b=255&d*r.b+s*i.b+.5,r.a=a*r.a+(1-a)*i.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=xB(this._rgb,e._rgb,n)),this}clone(){return new Hl(this.rgb)}alpha(e){return this._rgb.a=vs(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=oc(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Iu(this._rgb,2,e),this}darken(e){return Iu(this._rgb,2,-e),this}saturate(e){return Iu(this._rgb,1,e),this}desaturate(e){return Iu(this._rgb,1,-e),this}rotate(e){return mB(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function bi(){}const CB=(()=>{let t=0;return()=>t++})();function wt(t){return t==null}function an(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Qe(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function kn(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Kr(t,e){return kn(t)?t:e}function $e(t,e){return typeof t>"u"?e:t}const TB=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,eT=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Ct(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function ht(t,e,n,r){let i,s,a;if(an(t))for(s=t.length,i=0;i<s;i++)e.call(n,t[i],i);else if(Qe(t))for(a=Object.keys(t),s=a.length,i=0;i<s;i++)e.call(n,t[a[i]],a[i])}function Id(t,e){let n,r,i,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],s=e[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function Pd(t){if(an(t))return t.map(Pd);if(Qe(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=Pd(t[n[i]]);return e}return t}function tT(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function DB(t,e,n,r){if(!tT(t))return;const i=e[t],s=n[t];Qe(i)&&Qe(s)?zl(i,s,r):e[t]=Pd(s)}function zl(t,e,n){const r=an(e)?e:[e],i=r.length;if(!Qe(t))return t;n=n||{};const s=n.merger||DB;let a;for(let c=0;c<i;++c){if(a=r[c],!Qe(a))continue;const u=Object.keys(a);for(let d=0,f=u.length;d<f;++d)s(u[d],t,a,n)}return t}function El(t,e){return zl(t,e,{merger:kB})}function kB(t,e,n){if(!tT(t))return;const r=e[t],i=n[t];Qe(r)&&Qe(i)?El(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Pd(i))}const hS={"":t=>t,x:t=>t.x,y:t=>t.y};function AB(t){const e=t.split("."),n=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function RB(t){const e=AB(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function Ul(t,e){return(hS[e]||(hS[e]=RB(e)))(t)}function Xm(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Ld=t=>typeof t<"u",ws=t=>typeof t=="function",pS=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function OB(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const pt=Math.PI,Ft=2*pt,MB=Ft+pt,Fd=Number.POSITIVE_INFINITY,NB=pt/180,on=pt/2,Bs=pt/4,gS=pt*2/3,nT=Math.log10,lo=Math.sign;function Cl(t,e,n){return Math.abs(t-e)<n}function mS(t){const e=Math.round(t);t=Cl(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(nT(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function IB(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((i,s)=>i-s).pop(),e}function PB(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Bl(t){return!PB(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function LB(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function FB(t,e,n){let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Ai(t){return t*(pt/180)}function jB(t){return t*(180/pt)}function vS(t){if(!kn(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function rT(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*pt&&(s+=Ft),{angle:s,distance:i}}function Ig(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function HB(t,e){return(t-e+MB)%Ft-pt}function ar(t){return(t%Ft+Ft)%Ft}function Wl(t,e,n,r){const i=ar(t),s=ar(e),a=ar(n),c=ar(s-i),u=ar(a-i),d=ar(i-s),f=ar(i-a);return i===s||i===a||r&&s===a||c>u&&d<f}function Pn(t,e,n){return Math.max(e,Math.min(n,t))}function zB(t){return Pn(t,-32768,32767)}function ea(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function Jm(t,e,n){n=n||(a=>t[a]<e);let r=t.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,n(s)?i=s:r=s;return{lo:i,hi:r}}const ta=(t,e,n,r)=>Jm(t,n,r?i=>{const s=t[i][e];return s<n||s===n&&t[i+1][e]===n}:i=>t[i][e]<n),UB=(t,e,n)=>Jm(t,n,r=>t[r][e]>=n);function BB(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}const iT=["push","pop","shift","splice","unshift"];function WB(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),iT.forEach(n=>{const r="_onData"+Xm(n),i=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const a=i.apply(this,s);return t._chartjs.listeners.forEach(c=>{typeof c[r]=="function"&&c[r](...s)}),a}})})}function yS(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(iT.forEach(s=>{delete t[s]}),delete t._chartjs)}function VB(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const sT=(function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame})();function aT(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,sT.call(window,()=>{r=!1,t.apply(e,n)}))}}function $B(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const ev=t=>t==="start"?"left":t==="end"?"right":"center",Cn=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,qB=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function GB(t,e,n){const r=e.length;let i=0,s=r;if(t._sorted){const{iScale:a,vScale:c,_parsed:u}=t,d=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,f=a.axis,{min:p,max:m,minDefined:v,maxDefined:b}=a.getUserBounds();if(v){if(i=Math.min(ta(u,f,p).lo,n?r:ta(e,f,a.getPixelForValue(p)).lo),d){const _=u.slice(0,i+1).reverse().findIndex(w=>!wt(w[c.axis]));i-=Math.max(0,_)}i=Pn(i,0,r-1)}if(b){let _=Math.max(ta(u,a.axis,m,!0).hi+1,n?0:ta(e,f,a.getPixelForValue(m),!0).hi+1);if(d){const w=u.slice(_-1).findIndex(x=>!wt(x[c.axis]));_+=Math.max(0,w)}s=Pn(_,i,r)-i}else s=r-i}return{start:i,count:s}}function YB(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const Pu=t=>t===0||t===1,bS=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Ft/n)),_S=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Ft/n)+1,Tl={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*on)+1,easeOutSine:t=>Math.sin(t*on),easeInOutSine:t=>-.5*(Math.cos(pt*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Pu(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Pu(t)?t:bS(t,.075,.3),easeOutElastic:t=>Pu(t)?t:_S(t,.075,.3),easeInOutElastic(t){return Pu(t)?t:t<.5?.5*bS(t*2,.1125,.45):.5+.5*_S(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Tl.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Tl.easeInBounce(t*2)*.5:Tl.easeOutBounce(t*2-1)*.5+.5};function tv(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function SS(t){return tv(t)?t:new Hl(t)}function Up(t){return tv(t)?t:new Hl(t).saturate(.5).darken(.1).hexString()}const QB=["x","y","borderWidth","radius","tension"],KB=["color","borderColor","backgroundColor"];function ZB(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:KB},numbers:{type:"number",properties:QB}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function XB(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const wS=new Map;function JB(t,e){e=e||{};const n=t+JSON.stringify(e);let r=wS.get(n);return r||(r=new Intl.NumberFormat(t,e),wS.set(n,r)),r}function nv(t,e,n){return JB(e,n).format(t)}const eW={values(t){return an(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let i,s=t;if(n.length>1){const d=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(d<1e-4||d>1e15)&&(i="scientific"),s=tW(t,n)}const a=nT(Math.abs(s)),c=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),u={notation:i,minimumFractionDigits:c,maximumFractionDigits:c};return Object.assign(u,this.options.ticks.format),nv(t,r,u)}};function tW(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var oT={formatters:eW};function nW(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:oT.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const da=Object.create(null),Pg=Object.create(null);function Dl(t,e){if(!e)return t;const n=e.split(".");for(let r=0,i=n.length;r<i;++r){const s=n[r];t=t[s]||(t[s]=Object.create(null))}return t}function Bp(t,e,n){return typeof e=="string"?zl(Dl(t,e),n):zl(Dl(t,""),e)}class rW{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>Up(i.backgroundColor),this.hoverBorderColor=(r,i)=>Up(i.borderColor),this.hoverColor=(r,i)=>Up(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return Bp(this,e,n)}get(e){return Dl(this,e)}describe(e,n){return Bp(Pg,e,n)}override(e,n){return Bp(da,e,n)}route(e,n,r,i){const s=Dl(this,e),a=Dl(this,r),c="_"+n;Object.defineProperties(s,{[c]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const u=this[c],d=a[i];return Qe(u)?Object.assign({},d,u):$e(u,d)},set(u){this[c]=u}}})}apply(e){e.forEach(n=>n(this))}}var Yt=new rW({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[ZB,XB,nW]);function iW(t){return!t||wt(t.size)||wt(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function xS(t,e,n,r,i){let s=e[i];return s||(s=e[i]=t.measureText(i).width,n.push(i)),s>r&&(r=s),r}function Ws(t,e,n){const r=t.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function ES(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Lg(t,e,n,r){lT(t,e,n,r,null)}function lT(t,e,n,r,i){let s,a,c,u,d,f,p,m;const v=e.pointStyle,b=e.rotation,_=e.radius;let w=(b||0)*NB;if(v&&typeof v=="object"&&(s=v.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(w),t.drawImage(v,-v.width/2,-v.height/2,v.width,v.height),t.restore();return}if(!(isNaN(_)||_<=0)){switch(t.beginPath(),v){default:i?t.ellipse(n,r,i/2,_,0,0,Ft):t.arc(n,r,_,0,Ft),t.closePath();break;case"triangle":f=i?i/2:_,t.moveTo(n+Math.sin(w)*f,r-Math.cos(w)*_),w+=gS,t.lineTo(n+Math.sin(w)*f,r-Math.cos(w)*_),w+=gS,t.lineTo(n+Math.sin(w)*f,r-Math.cos(w)*_),t.closePath();break;case"rectRounded":d=_*.516,u=_-d,a=Math.cos(w+Bs)*u,p=Math.cos(w+Bs)*(i?i/2-d:u),c=Math.sin(w+Bs)*u,m=Math.sin(w+Bs)*(i?i/2-d:u),t.arc(n-p,r-c,d,w-pt,w-on),t.arc(n+m,r-a,d,w-on,w),t.arc(n+p,r+c,d,w,w+on),t.arc(n-m,r+a,d,w+on,w+pt),t.closePath();break;case"rect":if(!b){u=Math.SQRT1_2*_,f=i?i/2:u,t.rect(n-f,r-u,2*f,2*u);break}w+=Bs;case"rectRot":p=Math.cos(w)*(i?i/2:_),a=Math.cos(w)*_,c=Math.sin(w)*_,m=Math.sin(w)*(i?i/2:_),t.moveTo(n-p,r-c),t.lineTo(n+m,r-a),t.lineTo(n+p,r+c),t.lineTo(n-m,r+a),t.closePath();break;case"crossRot":w+=Bs;case"cross":p=Math.cos(w)*(i?i/2:_),a=Math.cos(w)*_,c=Math.sin(w)*_,m=Math.sin(w)*(i?i/2:_),t.moveTo(n-p,r-c),t.lineTo(n+p,r+c),t.moveTo(n+m,r-a),t.lineTo(n-m,r+a);break;case"star":p=Math.cos(w)*(i?i/2:_),a=Math.cos(w)*_,c=Math.sin(w)*_,m=Math.sin(w)*(i?i/2:_),t.moveTo(n-p,r-c),t.lineTo(n+p,r+c),t.moveTo(n+m,r-a),t.lineTo(n-m,r+a),w+=Bs,p=Math.cos(w)*(i?i/2:_),a=Math.cos(w)*_,c=Math.sin(w)*_,m=Math.sin(w)*(i?i/2:_),t.moveTo(n-p,r-c),t.lineTo(n+p,r+c),t.moveTo(n+m,r-a),t.lineTo(n-m,r+a);break;case"line":a=i?i/2:Math.cos(w)*_,c=Math.sin(w)*_,t.moveTo(n-a,r-c),t.lineTo(n+a,r+c);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(w)*(i?i/2:_),r+Math.sin(w)*_);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Vl(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function vf(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function yf(t){t.restore()}function sW(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if(i==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else i==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function aW(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function oW(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),wt(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function lW(t,e,n,r,i){if(i.strikethrough||i.underline){const s=t.measureText(r),a=e-s.actualBoundingBoxLeft,c=e+s.actualBoundingBoxRight,u=n-s.actualBoundingBoxAscent,d=n+s.actualBoundingBoxDescent,f=i.strikethrough?(u+d)/2:d;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(a,f),t.lineTo(c,f),t.stroke()}}function cW(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function $l(t,e,n,r,i,s={}){const a=an(e)?e:[e],c=s.strokeWidth>0&&s.strokeColor!=="";let u,d;for(t.save(),t.font=i.string,oW(t,s),u=0;u<a.length;++u)d=a[u],s.backdrop&&cW(t,s.backdrop),c&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),wt(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(d,n,r,s.maxWidth)),t.fillText(d,n,r,s.maxWidth),lW(t,n,r,d,s),r+=Number(i.lineHeight);t.restore()}function Fg(t,e){const{x:n,y:r,w:i,h:s,radius:a}=e;t.arc(n+a.topLeft,r+a.topLeft,a.topLeft,1.5*pt,pt,!0),t.lineTo(n,r+s-a.bottomLeft),t.arc(n+a.bottomLeft,r+s-a.bottomLeft,a.bottomLeft,pt,on,!0),t.lineTo(n+i-a.bottomRight,r+s),t.arc(n+i-a.bottomRight,r+s-a.bottomRight,a.bottomRight,on,0,!0),t.lineTo(n+i,r+a.topRight),t.arc(n+i-a.topRight,r+a.topRight,a.topRight,0,-on,!0),t.lineTo(n+a.topLeft,r)}const uW=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,dW=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function fW(t,e){const n=(""+t).match(uW);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const hW=t=>+t||0;function rv(t,e){const n={},r=Qe(e),i=r?Object.keys(e):e,s=Qe(t)?r?a=>$e(t[a],t[e[a]]):a=>t[a]:()=>t;for(const a of i)n[a]=hW(s(a));return n}function pW(t){return rv(t,{top:"y",right:"x",bottom:"y",left:"x"})}function kl(t){return rv(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Dr(t){const e=pW(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Dn(t,e){t=t||{},e=e||Yt.font;let n=$e(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=$e(t.style,e.style);r&&!(""+r).match(dW)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:$e(t.family,e.family),lineHeight:fW($e(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:$e(t.weight,e.weight),string:""};return i.string=iW(i),i}function Lu(t,e,n,r){let i,s,a;for(i=0,s=t.length;i<s;++i)if(a=t[i],a!==void 0&&a!==void 0)return a}function gW(t,e,n){const{min:r,max:i}=t,s=eT(e,(i-r)/2),a=(c,u)=>n&&c===0?0:c+u;return{min:a(r,-Math.abs(s)),max:a(i,s)}}function ba(t,e){return Object.assign(Object.create(t),e)}function iv(t,e=[""],n,r,i=()=>t[0]){const s=n||t;typeof r>"u"&&(r=fT("_fallback",t));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:r,_getTarget:i,override:c=>iv([c,...t],e,s,r)};return new Proxy(a,{deleteProperty(c,u){return delete c[u],delete c._keys,delete t[0][u],!0},get(c,u){return uT(c,u,()=>xW(u,e,t,c))},getOwnPropertyDescriptor(c,u){return Reflect.getOwnPropertyDescriptor(c._scopes[0],u)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(c,u){return TS(c).includes(u)},ownKeys(c){return TS(c)},set(c,u,d){const f=c._storage||(c._storage=i());return c[u]=f[u]=d,delete c._keys,!0}})}function co(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:cT(t,r),setContext:s=>co(t,s,n,r),override:s=>co(t.override(s),e,n,r)};return new Proxy(i,{deleteProperty(s,a){return delete s[a],delete t[a],!0},get(s,a,c){return uT(s,a,()=>vW(s,a,c))},getOwnPropertyDescriptor(s,a){return s._descriptors.allKeys?Reflect.has(t,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,a)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,a){return Reflect.has(t,a)},ownKeys(){return Reflect.ownKeys(t)},set(s,a,c){return t[a]=c,delete s[a],!0}})}function cT(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:ws(n)?n:()=>n,isIndexable:ws(r)?r:()=>r}}const mW=(t,e)=>t?t+Xm(e):e,sv=(t,e)=>Qe(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function uT(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function vW(t,e,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:a}=t;let c=r[e];return ws(c)&&a.isScriptable(e)&&(c=yW(e,c,t,n)),an(c)&&c.length&&(c=bW(e,c,t,a.isIndexable)),sv(e,c)&&(c=co(c,i,s&&s[e],a)),c}function yW(t,e,n,r){const{_proxy:i,_context:s,_subProxy:a,_stack:c}=n;if(c.has(t))throw new Error("Recursion detected: "+Array.from(c).join("->")+"->"+t);c.add(t);let u=e(s,a||r);return c.delete(t),sv(t,u)&&(u=av(i._scopes,i,t,u)),u}function bW(t,e,n,r){const{_proxy:i,_context:s,_subProxy:a,_descriptors:c}=n;if(typeof s.index<"u"&&r(t))return e[s.index%e.length];if(Qe(e[0])){const u=e,d=i._scopes.filter(f=>f!==u);e=[];for(const f of u){const p=av(d,i,t,f);e.push(co(p,s,a&&a[t],c))}}return e}function dT(t,e,n){return ws(t)?t(e,n):t}const _W=(t,e)=>t===!0?e:typeof t=="string"?Ul(e,t):void 0;function SW(t,e,n,r,i){for(const s of e){const a=_W(n,s);if(a){t.add(a);const c=dT(a._fallback,n,i);if(typeof c<"u"&&c!==n&&c!==r)return c}else if(a===!1&&typeof r<"u"&&n!==r)return null}return!1}function av(t,e,n,r){const i=e._rootScopes,s=dT(e._fallback,n,r),a=[...t,...i],c=new Set;c.add(r);let u=CS(c,a,n,s||n,r);return u===null||typeof s<"u"&&s!==n&&(u=CS(c,a,s,u,r),u===null)?!1:iv(Array.from(c),[""],i,s,()=>wW(e,n,r))}function CS(t,e,n,r,i){for(;n;)n=SW(t,e,n,r,i);return n}function wW(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];return an(i)&&Qe(n)?n:i||{}}function xW(t,e,n,r){let i;for(const s of e)if(i=fT(mW(s,t),n),typeof i<"u")return sv(t,i)?av(n,r,t,i):i}function fT(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function TS(t){let e=t._keys;return e||(e=t._keys=EW(t._scopes)),e}function EW(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}const CW=Number.EPSILON||1e-14,uo=(t,e)=>e<t.length&&!t[e].skip&&t[e],hT=t=>t==="x"?"y":"x";function TW(t,e,n,r){const i=t.skip?e:t,s=e,a=n.skip?e:n,c=Ig(s,i),u=Ig(a,s);let d=c/(c+u),f=u/(c+u);d=isNaN(d)?0:d,f=isNaN(f)?0:f;const p=r*d,m=r*f;return{previous:{x:s.x-p*(a.x-i.x),y:s.y-p*(a.y-i.y)},next:{x:s.x+m*(a.x-i.x),y:s.y+m*(a.y-i.y)}}}function DW(t,e,n){const r=t.length;let i,s,a,c,u,d=uo(t,0);for(let f=0;f<r-1;++f)if(u=d,d=uo(t,f+1),!(!u||!d)){if(Cl(e[f],0,CW)){n[f]=n[f+1]=0;continue}i=n[f]/e[f],s=n[f+1]/e[f],c=Math.pow(i,2)+Math.pow(s,2),!(c<=9)&&(a=3/Math.sqrt(c),n[f]=i*a*e[f],n[f+1]=s*a*e[f])}}function kW(t,e,n="x"){const r=hT(n),i=t.length;let s,a,c,u=uo(t,0);for(let d=0;d<i;++d){if(a=c,c=u,u=uo(t,d+1),!c)continue;const f=c[n],p=c[r];a&&(s=(f-a[n])/3,c[`cp1${n}`]=f-s,c[`cp1${r}`]=p-s*e[d]),u&&(s=(u[n]-f)/3,c[`cp2${n}`]=f+s,c[`cp2${r}`]=p+s*e[d])}}function AW(t,e="x"){const n=hT(e),r=t.length,i=Array(r).fill(0),s=Array(r);let a,c,u,d=uo(t,0);for(a=0;a<r;++a)if(c=u,u=d,d=uo(t,a+1),!!u){if(d){const f=d[e]-u[e];i[a]=f!==0?(d[n]-u[n])/f:0}s[a]=c?d?lo(i[a-1])!==lo(i[a])?0:(i[a-1]+i[a])/2:i[a-1]:i[a]}DW(t,i,s),kW(t,s,e)}function Fu(t,e,n){return Math.max(Math.min(t,n),e)}function RW(t,e){let n,r,i,s,a,c=Vl(t[0],e);for(n=0,r=t.length;n<r;++n)a=s,s=c,c=n<r-1&&Vl(t[n+1],e),s&&(i=t[n],a&&(i.cp1x=Fu(i.cp1x,e.left,e.right),i.cp1y=Fu(i.cp1y,e.top,e.bottom)),c&&(i.cp2x=Fu(i.cp2x,e.left,e.right),i.cp2y=Fu(i.cp2y,e.top,e.bottom)))}function OW(t,e,n,r,i){let s,a,c,u;if(e.spanGaps&&(t=t.filter(d=>!d.skip)),e.cubicInterpolationMode==="monotone")AW(t,i);else{let d=r?t[t.length-1]:t[0];for(s=0,a=t.length;s<a;++s)c=t[s],u=TW(d,c,t[Math.min(s+1,a-(r?0:1))%a],e.tension),c.cp1x=u.previous.x,c.cp1y=u.previous.y,c.cp2x=u.next.x,c.cp2y=u.next.y,d=c}e.capBezierPoints&&RW(t,n)}function ov(){return typeof window<"u"&&typeof document<"u"}function lv(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function jd(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const bf=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function MW(t,e){return bf(t).getPropertyValue(e)}const NW=["top","right","bottom","left"];function sa(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=NW[i];r[s]=parseFloat(t[e+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const IW=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function PW(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:s}=r;let a=!1,c,u;if(IW(i,s,t.target))c=i,u=s;else{const d=e.getBoundingClientRect();c=r.clientX-d.left,u=r.clientY-d.top,a=!0}return{x:c,y:u,box:a}}function Ys(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=bf(n),s=i.boxSizing==="border-box",a=sa(i,"padding"),c=sa(i,"border","width"),{x:u,y:d,box:f}=PW(t,n),p=a.left+(f&&c.left),m=a.top+(f&&c.top);let{width:v,height:b}=e;return s&&(v-=a.width+c.width,b-=a.height+c.height),{x:Math.round((u-p)/v*n.width/r),y:Math.round((d-m)/b*n.height/r)}}function LW(t,e,n){let r,i;if(e===void 0||n===void 0){const s=t&&lv(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const a=s.getBoundingClientRect(),c=bf(s),u=sa(c,"border","width"),d=sa(c,"padding");e=a.width-d.width-u.width,n=a.height-d.height-u.height,r=jd(c.maxWidth,s,"clientWidth"),i=jd(c.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:r||Fd,maxHeight:i||Fd}}const ps=t=>Math.round(t*10)/10;function FW(t,e,n,r){const i=bf(t),s=sa(i,"margin"),a=jd(i.maxWidth,t,"clientWidth")||Fd,c=jd(i.maxHeight,t,"clientHeight")||Fd,u=LW(t,e,n);let{width:d,height:f}=u;if(i.boxSizing==="content-box"){const m=sa(i,"border","width"),v=sa(i,"padding");d-=v.width+m.width,f-=v.height+m.height}return d=Math.max(0,d-s.width),f=Math.max(0,r?d/r:f-s.height),d=ps(Math.min(d,a,u.maxWidth)),f=ps(Math.min(f,c,u.maxHeight)),d&&!f&&(f=ps(d/2)),(e!==void 0||n!==void 0)&&r&&u.height&&f>u.height&&(f=u.height,d=ps(Math.floor(f*r))),{width:d,height:f}}function DS(t,e,n){const r=e||1,i=ps(t.height*r),s=ps(t.width*r);t.height=ps(t.height),t.width=ps(t.width);const a=t.canvas;return a.style&&(n||!a.style.height&&!a.style.width)&&(a.style.height=`${t.height}px`,a.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||a.height!==i||a.width!==s?(t.currentDevicePixelRatio=r,a.height=i,a.width=s,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const jW=(function(){let t=!1;try{const e={get passive(){return t=!0,!1}};ov()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t})();function kS(t,e){const n=MW(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Qs(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function HW(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function zW(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},a=Qs(t,i,n),c=Qs(i,s,n),u=Qs(s,e,n),d=Qs(a,c,n),f=Qs(c,u,n);return Qs(d,f,n)}const UW=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},BW=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function ro(t,e,n){return t?UW(e,n):BW()}function pT(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function gT(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function mT(t){return t==="angle"?{between:Wl,compare:HB,normalize:ar}:{between:ea,compare:(e,n)=>e-n,normalize:e=>e}}function AS({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:i}}function WW(t,e,n){const{property:r,start:i,end:s}=n,{between:a,normalize:c}=mT(r),u=e.length;let{start:d,end:f,loop:p}=t,m,v;if(p){for(d+=u,f+=u,m=0,v=u;m<v&&a(c(e[d%u][r]),i,s);++m)d--,f--;d%=u,f%=u}return f<d&&(f+=u),{start:d,end:f,loop:p,style:t.style}}function vT(t,e,n){if(!n)return[t];const{property:r,start:i,end:s}=n,a=e.length,{compare:c,between:u,normalize:d}=mT(r),{start:f,end:p,loop:m,style:v}=WW(t,e,n),b=[];let _=!1,w=null,x,C,k;const R=()=>u(i,k,x)&&c(i,k)!==0,A=()=>c(s,x)===0||u(s,k,x),M=()=>_||R(),P=()=>!_||A();for(let O=f,H=f;O<=p;++O)C=e[O%a],!C.skip&&(x=d(C[r]),x!==k&&(_=u(x,i,s),w===null&&M()&&(w=c(x,i)===0?O:H),w!==null&&P()&&(b.push(AS({start:w,end:O,loop:m,count:a,style:v})),w=null),H=O,k=x));return w!==null&&b.push(AS({start:w,end:p,loop:m,count:a,style:v})),b}function yT(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const s=vT(r[i],t.points,e);s.length&&n.push(...s)}return n}function VW(t,e,n,r){let i=0,s=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(s+=i);s>i&&t[s%e].skip;)s--;return s%=e,{start:i,end:s}}function $W(t,e,n,r){const i=t.length,s=[];let a=e,c=t[e],u;for(u=e+1;u<=n;++u){const d=t[u%i];d.skip||d.stop?c.skip||(r=!1,s.push({start:e%i,end:(u-1)%i,loop:r}),e=a=d.stop?u:null):(a=u,c.skip&&(e=u)),c=d}return a!==null&&s.push({start:e%i,end:a%i,loop:r}),s}function qW(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const s=!!t._loop,{start:a,end:c}=VW(n,i,s,r);if(r===!0)return RS(t,[{start:a,end:c,loop:s}],n,e);const u=c<a?c+i:c,d=!!t._fullLoop&&a===0&&c===i-1;return RS(t,$W(n,a,u,d),n,e)}function RS(t,e,n,r){return!r||!r.setContext||!n?e:GW(t,e,n,r)}function GW(t,e,n,r){const i=t._chart.getContext(),s=OS(t.options),{_datasetIndex:a,options:{spanGaps:c}}=t,u=n.length,d=[];let f=s,p=e[0].start,m=p;function v(b,_,w,x){const C=c?-1:1;if(b!==_){for(b+=u;n[b%u].skip;)b-=C;for(;n[_%u].skip;)_+=C;b%u!==_%u&&(d.push({start:b%u,end:_%u,loop:w,style:x}),f=x,p=_%u)}}for(const b of e){p=c?p:b.start;let _=n[p%u],w;for(m=p+1;m<=b.end;m++){const x=n[m%u];w=OS(r.setContext(ba(i,{type:"segment",p0:_,p1:x,p0DataIndex:(m-1)%u,p1DataIndex:m%u,datasetIndex:a}))),YW(w,f)&&v(p,m-1,b.loop,f),_=x,f=w}p<m-1&&v(p,m-1,b.loop,f)}return d}function OS(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function YW(t,e){if(!e)return!1;const n=[],r=function(i,s){return tv(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function ju(t,e,n){return t.options.clip?t[n]:e[n]}function QW(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:ju(n,e,"left"),right:ju(n,e,"right"),top:ju(r,e,"top"),bottom:ju(r,e,"bottom")}:e}function bT(t,e){const n=e._clip;if(n.disabled)return!1;const r=QW(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class KW{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,i){const s=n.listeners[i],a=n.duration;s.forEach(c=>c({chart:e,initial:n.initial,numSteps:a,currentStep:Math.min(r-n.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=sT.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let a=s.length-1,c=!1,u;for(;a>=0;--a)u=s[a],u._active?(u._total>r.duration&&(r.duration=u._total),u.tick(e),c=!0):(s[a]=s[s.length-1],s.pop());c&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var _i=new KW;const MS="transparent",ZW={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=SS(t||MS),i=r.valid&&SS(e||MS);return i&&i.valid?i.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class XW{constructor(e,n,r,i){const s=n[r];i=Lu([e.to,i,s,e.from]);const a=Lu([e.from,s,i]);this._active=!0,this._fn=e.fn||ZW[e.type||typeof a],this._easing=Tl[e.easing]||Tl.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=a,this._to=i,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,a=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(a,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Lu([e.to,n,i,e.from]),this._from=Lu([e.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,i=this._prop,s=this._from,a=this._loop,c=this._to;let u;if(this._active=s!==c&&(a||n<r),!this._active){this._target[i]=c,this._notify(!0);return}if(n<0){this._target[i]=s;return}u=n/r%2,u=a&&u>1?2-u:u,u=this._easing(Math.min(1,Math.max(0,u))),this._target[i]=this._fn(s,c,u)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][n]()}}class _T{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Qe(e))return;const n=Object.keys(Yt.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!Qe(s))return;const a={};for(const c of n)a[c]=s[c];(an(s.properties)&&s.properties||[i]).forEach(c=>{(c===i||!r.has(c))&&r.set(c,a)})})}_animateOptions(e,n){const r=n.options,i=eV(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&JW(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,n){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),a=Object.keys(n),c=Date.now();let u;for(u=a.length-1;u>=0;--u){const d=a[u];if(d.charAt(0)==="$")continue;if(d==="options"){i.push(...this._animateOptions(e,n));continue}const f=n[d];let p=s[d];const m=r.get(d);if(p)if(m&&p.active()){p.update(m,f,c);continue}else p.cancel();if(!m||!m.duration){e[d]=f;continue}s[d]=p=new XW(m,e,d,f),i.push(p)}return i}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return _i.add(this._chart,r),!0}}function JW(t,e){const n=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=t[r[i]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function eV(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function NS(t,e){const n=t&&t.options||{},r=n.reverse,i=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function tV(t,e,n){if(n===!1)return!1;const r=NS(t,n),i=NS(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function nV(t){let e,n,r,i;return Qe(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:t===!1}}function ST(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function IS(t,e,n,r={}){const i=t.keys,s=r.mode==="single";let a,c,u,d;if(e===null)return;let f=!1;for(a=0,c=i.length;a<c;++a){if(u=+i[a],u===n){if(f=!0,r.all)continue;break}d=t.values[u],kn(d)&&(s||e===0||lo(e)===lo(d))&&(e+=d)}return!f&&!r.all?0:e}function rV(t,e){const{iScale:n,vScale:r}=e,i=n.axis==="x"?"x":"y",s=r.axis==="x"?"x":"y",a=Object.keys(t),c=new Array(a.length);let u,d,f;for(u=0,d=a.length;u<d;++u)f=a[u],c[u]={[i]:f,[s]:t[f]};return c}function Wp(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function iV(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function sV(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function aV(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function PS(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=t[i.index];if(n&&s>0||!n&&s<0)return i.index}return null}function LS(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:s,vScale:a,index:c}=r,u=s.axis,d=a.axis,f=iV(s,a,r),p=e.length;let m;for(let v=0;v<p;++v){const b=e[v],{[u]:_,[d]:w}=b,x=b._stacks||(b._stacks={});m=x[d]=aV(i,f,_),m[c]=w,m._top=PS(m,a,!0,r.type),m._bottom=PS(m,a,!1,r.type);const C=m._visualValues||(m._visualValues={});C[c]=w}}function Vp(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function oV(t,e){return ba(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function lV(t,e,n){return ba(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function al(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const i of e){const s=i._stacks;if(!s||s[r]===void 0||s[r][n]===void 0)return;delete s[r][n],s[r]._visualValues!==void 0&&s[r]._visualValues[n]!==void 0&&delete s[r]._visualValues[n]}}}const $p=t=>t==="reset"||t==="none",FS=(t,e)=>e?t:Object.assign({},t),cV=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:ST(n,!0),values:null};class cv{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Wp(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&al(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),i=(p,m,v,b)=>p==="x"?m:p==="r"?b:v,s=n.xAxisID=$e(r.xAxisID,Vp(e,"x")),a=n.yAxisID=$e(r.yAxisID,Vp(e,"y")),c=n.rAxisID=$e(r.rAxisID,Vp(e,"r")),u=n.indexAxis,d=n.iAxisID=i(u,s,a,c),f=n.vAxisID=i(u,a,s,c);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(a),n.rScale=this.getScaleForId(c),n.iScale=this.getScaleForId(d),n.vScale=this.getScaleForId(f)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&yS(this._data,this),e._stacked&&al(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(Qe(n)){const i=this._cachedMeta;this._data=rV(n,i)}else if(r!==n){if(r){yS(r,this);const i=this._cachedMeta;al(i),i._parsed=[]}n&&Object.isExtensible(n)&&WB(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=n._stacked;n._stacked=Wp(n.vScale,n),n.stack!==r.stack&&(i=!0,al(n),n.stack=r.stack),this._resyncElements(e),(i||s!==n._stacked)&&(LS(this,n._parsed),n._stacked=Wp(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:a}=r,c=s.axis;let u=e===0&&n===i.length?!0:r._sorted,d=e>0&&r._parsed[e-1],f,p,m;if(this._parsing===!1)r._parsed=i,r._sorted=!0,m=i;else{an(i[e])?m=this.parseArrayData(r,i,e,n):Qe(i[e])?m=this.parseObjectData(r,i,e,n):m=this.parsePrimitiveData(r,i,e,n);const v=()=>p[c]===null||d&&p[c]<d[c];for(f=0;f<n;++f)r._parsed[f+e]=p=m[f],u&&(v()&&(u=!1),d=p);r._sorted=u}a&&LS(this,m)}parsePrimitiveData(e,n,r,i){const{iScale:s,vScale:a}=e,c=s.axis,u=a.axis,d=s.getLabels(),f=s===a,p=new Array(i);let m,v,b;for(m=0,v=i;m<v;++m)b=m+r,p[m]={[c]:f||s.parse(d[b],b),[u]:a.parse(n[b],b)};return p}parseArrayData(e,n,r,i){const{xScale:s,yScale:a}=e,c=new Array(i);let u,d,f,p;for(u=0,d=i;u<d;++u)f=u+r,p=n[f],c[u]={x:s.parse(p[0],f),y:a.parse(p[1],f)};return c}parseObjectData(e,n,r,i){const{xScale:s,yScale:a}=e,{xAxisKey:c="x",yAxisKey:u="y"}=this._parsing,d=new Array(i);let f,p,m,v;for(f=0,p=i;f<p;++f)m=f+r,v=n[m],d[f]={x:s.parse(Ul(v,c),m),y:a.parse(Ul(v,u),m)};return d}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const i=this.chart,s=this._cachedMeta,a=n[e.axis],c={keys:ST(i,!0),values:n._stacks[e.axis]._visualValues};return IS(c,a,s.index,{mode:r})}updateRangeFromParsed(e,n,r,i){const s=r[n.axis];let a=s===null?NaN:s;const c=i&&r._stacks[n.axis];i&&c&&(i.values=c,a=IS(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}getMinMax(e,n){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&e===r.iScale,a=i.length,c=this._getOtherScale(e),u=cV(n,r,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:f,max:p}=sV(c);let m,v;function b(){v=i[m];const _=v[c.axis];return!kn(v[e.axis])||f>_||p<_}for(m=0;m<a&&!(!b()&&(this.updateRangeFromParsed(d,e,v,u),s));++m);if(s){for(m=a-1;m>=0;--m)if(!b()){this.updateRangeFromParsed(d,e,v,u);break}}return d}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let i,s,a;for(i=0,s=n.length;i<s;++i)a=n[i][e.axis],kn(a)&&r.push(a);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,i=n.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=nV($e(this.options.clip,tV(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],s=n.chartArea,a=[],c=this._drawStart||0,u=this._drawCount||i.length-c,d=this.options.drawActiveElementsOnTop;let f;for(r.dataset&&r.dataset.draw(e,s,c,u),f=c;f<c+u;++f){const p=i[f];p.hidden||(p.active&&d?a.push(p):p.draw(e,s))}for(f=0;f<a.length;++f)a[f].draw(e,s)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const a=this._cachedMeta.data[e];s=a.$context||(a.$context=lV(this.getContext(),e,a)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=oV(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const i=n==="active",s=this._cachedDataOpts,a=e+"-"+n,c=s[a],u=this.enableOptionSharing&&Ld(r);if(c)return FS(c,u);const d=this.chart.config,f=d.datasetElementScopeKeys(this._type,e),p=i?[`${e}Hover`,"hover",e,""]:[e,""],m=d.getOptionScopes(this.getDataset(),f),v=Object.keys(Yt.elements[e]),b=()=>this.getContext(r,i,n),_=d.resolveNamedOptions(m,v,b,p);return _.$shared&&(_.$shared=u,s[a]=Object.freeze(FS(_,u))),_}_resolveAnimations(e,n,r){const i=this.chart,s=this._cachedDataOpts,a=`animation-${n}`,c=s[a];if(c)return c;let u;if(i.options.animation!==!1){const f=this.chart.config,p=f.datasetAnimationScopeKeys(this._type,n),m=f.getOptionScopes(this.getDataset(),p);u=f.createResolver(m,this.getContext(e,r,n))}const d=new _T(i,u&&u.animations);return u&&u._cacheable&&(s[a]=Object.freeze(d)),d}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||$p(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),i=this._sharedOptions,s=this.getSharedOptions(r),a=this.includeOptions(n,s)||s!==i;return this.updateSharedOptions(s,n,r),{sharedOptions:s,includeOptions:a}}updateElement(e,n,r,i){$p(i)?Object.assign(e,r):this._resolveAnimations(n,i).update(e,r)}updateSharedOptions(e,n,r){e&&!$p(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,i){e.active=i;const s=this.getStyle(n,i);this._resolveAnimations(n,r,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[c,u,d]of this._syncList)this[c](u,d);this._syncList=[];const i=r.length,s=n.length,a=Math.min(s,i);a&&this.parse(0,a),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,n,r=!0){const i=this._cachedMeta,s=i.data,a=e+n;let c;const u=d=>{for(d.length+=n,c=d.length-1;c>=a;c--)d[c]=d[c-n]};for(u(s),c=e;c<a;++c)s[c]=new this.dataElementType;this._parsing&&u(i._parsed),this.parse(e,n),r&&this.updateElements(s,e,n,"reset")}updateElements(e,n,r,i){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,n);r._stacked&&al(r,i)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,i]=e;this[n](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function uV(t,e,n){let r=1,i=1,s=0,a=0;if(e<Ft){const c=t,u=c+e,d=Math.cos(c),f=Math.sin(c),p=Math.cos(u),m=Math.sin(u),v=(k,R,A)=>Wl(k,c,u,!0)?1:Math.max(R,R*n,A,A*n),b=(k,R,A)=>Wl(k,c,u,!0)?-1:Math.min(R,R*n,A,A*n),_=v(0,d,p),w=v(on,f,m),x=b(pt,d,p),C=b(pt+on,f,m);r=(_-x)/2,i=(w-C)/2,s=-(_+x)/2,a=-(w+C)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:a}}class dV extends cv{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data,{labels:{pointStyle:r,textAlign:i,color:s,useBorderRadius:a,borderRadius:c}}=e.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((u,d)=>{const p=e.getDatasetMeta(0).controller.getStyle(d);return{text:u,fillStyle:p.backgroundColor,fontColor:s,hidden:!e.getDataVisibility(d),lineDash:p.borderDash,lineDashOffset:p.borderDashOffset,lineJoin:p.borderJoinStyle,lineWidth:p.borderWidth,strokeStyle:p.borderColor,textAlign:i,pointStyle:r,borderRadius:a&&(c||p.borderRadius),index:d}}):[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}};constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=r;else{let s=u=>+r[u];if(Qe(r[e])){const{key:u="value"}=this._parsing;s=d=>+Ul(r[d],u)}let a,c;for(a=e,c=e+n;a<c;++a)i._parsed[a]=s(a)}}_getRotation(){return Ai(this.options.rotation-90)}_getCircumference(){return Ai(this.options.circumference)}_getRotationExtents(){let e=Ft,n=-Ft;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const i=this.chart.getDatasetMeta(r).controller,s=i._getRotation(),a=i._getCircumference();e=Math.min(e,s),n=Math.max(n,s+a)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,i=this._cachedMeta,s=i.data,a=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,c=Math.max((Math.min(r.width,r.height)-a)/2,0),u=Math.min(TB(this.options.cutout,c),1),d=this._getRingWeight(this.index),{circumference:f,rotation:p}=this._getRotationExtents(),{ratioX:m,ratioY:v,offsetX:b,offsetY:_}=uV(p,f,u),w=(r.width-a)/m,x=(r.height-a)/v,C=Math.max(Math.min(w,x)/2,0),k=eT(this.options.radius,C),R=Math.max(k*u,0),A=(k-R)/this._getVisibleDatasetWeightTotal();this.offsetX=b*k,this.offsetY=_*k,i.total=this.calculateTotal(),this.outerRadius=k-A*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-A*d,0),this.updateElements(s,0,s.length,e)}_circumference(e,n){const r=this.options,i=this._cachedMeta,s=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*s/Ft)}updateElements(e,n,r,i){const s=i==="reset",a=this.chart,c=a.chartArea,d=a.options.animation,f=(c.left+c.right)/2,p=(c.top+c.bottom)/2,m=s&&d.animateScale,v=m?0:this.innerRadius,b=m?0:this.outerRadius,{sharedOptions:_,includeOptions:w}=this._getSharedOptions(n,i);let x=this._getRotation(),C;for(C=0;C<n;++C)x+=this._circumference(C,s);for(C=n;C<n+r;++C){const k=this._circumference(C,s),R=e[C],A={x:f+this.offsetX,y:p+this.offsetY,startAngle:x,endAngle:x+k,circumference:k,outerRadius:b,innerRadius:v};w&&(A.options=_||this.resolveDataElementOptions(C,R.active?"active":i)),x+=k,this.updateElement(R,C,A,i)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let r=0,i;for(i=0;i<n.length;i++){const s=e._parsed[i];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(i)&&!n[i].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?Ft*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=nv(n._parsed[e],r.options.locale);return{label:i[e]||"",value:s}}getMaxBorderWidth(e){let n=0;const r=this.chart;let i,s,a,c,u;if(!e){for(i=0,s=r.data.datasets.length;i<s;++i)if(r.isDatasetVisible(i)){a=r.getDatasetMeta(i),e=a.data,c=a.controller;break}}if(!e)return 0;for(i=0,s=e.length;i<s;++i)u=c.resolveDataElementOptions(i),u.borderAlign!=="inner"&&(n=Math.max(n,u.borderWidth||0,u.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,i=e.length;r<i;++r){const s=this.resolveDataElementOptions(r);n=Math.max(n,s.offset||0,s.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max($e(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class fV extends cv{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=n,a=this.chart._animationsDisabled;let{start:c,count:u}=GB(n,i,a);this._drawStart=c,this._drawCount=u,YB(n)&&(c=0,u=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const d=this.resolveDatasetElementOptions(e);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(r,void 0,{animated:!a,options:d},e),this.updateElements(i,c,u,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:a,vScale:c,_stacked:u,_dataset:d}=this._cachedMeta,{sharedOptions:f,includeOptions:p}=this._getSharedOptions(n,i),m=a.axis,v=c.axis,{spanGaps:b,segment:_}=this.options,w=Bl(b)?b:Number.POSITIVE_INFINITY,x=this.chart._animationsDisabled||s||i==="none",C=n+r,k=e.length;let R=n>0&&this.getParsed(n-1);for(let A=0;A<k;++A){const M=e[A],P=x?M:{};if(A<n||A>=C){P.skip=!0;continue}const O=this.getParsed(A),H=wt(O[v]),B=P[m]=a.getPixelForValue(O[m],A),$=P[v]=s||H?c.getBasePixel():c.getPixelForValue(u?this.applyStack(c,O,u):O[v],A);P.skip=isNaN(B)||isNaN($)||H,P.stop=A>0&&Math.abs(O[m]-R[m])>w,_&&(P.parsed=O,P.raw=d.data[A]),p&&(P.options=f||this.resolveDataElementOptions(A,M.active?"active":i)),x||this.updateElement(M,A,P,i),R=O}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),a=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,a)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}class hV extends dV{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}function Vs(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class uv{static override(e){Object.assign(uv.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Vs()}parse(){return Vs()}format(){return Vs()}add(){return Vs()}diff(){return Vs()}startOf(){return Vs()}endOf(){return Vs()}}var pV={_date:uv};function gV(t,e,n,r){const{controller:i,data:s,_sorted:a}=t,c=i._cachedMeta.iScale,u=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(c&&e===c.axis&&e!=="r"&&a&&s.length){const d=c._reversePixels?UB:ta;if(r){if(i._sharedOptions){const f=s[0],p=typeof f.getRange=="function"&&f.getRange(e);if(p){const m=d(s,e,n-p),v=d(s,e,n+p);return{lo:m.lo,hi:v.hi}}}}else{const f=d(s,e,n);if(u){const{vScale:p}=i._cachedMeta,{_parsed:m}=t,v=m.slice(0,f.lo+1).reverse().findIndex(_=>!wt(_[p.axis]));f.lo-=Math.max(0,v);const b=m.slice(f.hi).findIndex(_=>!wt(_[p.axis]));f.hi+=Math.max(0,b)}return f}}return{lo:0,hi:s.length-1}}function _f(t,e,n,r,i){const s=t.getSortedVisibleDatasetMetas(),a=n[e];for(let c=0,u=s.length;c<u;++c){const{index:d,data:f}=s[c],{lo:p,hi:m}=gV(s[c],e,a,i);for(let v=p;v<=m;++v){const b=f[v];b.skip||r(b,d,v)}}}function mV(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,i){const s=e?Math.abs(r.x-i.x):0,a=n?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(a,2))}}function qp(t,e,n,r,i){const s=[];return!i&&!t.isPointInArea(e)||_f(t,n,e,function(c,u,d){!i&&!Vl(c,t.chartArea,0)||c.inRange(e.x,e.y,r)&&s.push({element:c,datasetIndex:u,index:d})},!0),s}function vV(t,e,n,r){let i=[];function s(a,c,u){const{startAngle:d,endAngle:f}=a.getProps(["startAngle","endAngle"],r),{angle:p}=rT(a,{x:e.x,y:e.y});Wl(p,d,f)&&i.push({element:a,datasetIndex:c,index:u})}return _f(t,n,e,s),i}function yV(t,e,n,r,i,s){let a=[];const c=mV(n);let u=Number.POSITIVE_INFINITY;function d(f,p,m){const v=f.inRange(e.x,e.y,i);if(r&&!v)return;const b=f.getCenterPoint(i);if(!(!!s||t.isPointInArea(b))&&!v)return;const w=c(e,b);w<u?(a=[{element:f,datasetIndex:p,index:m}],u=w):w===u&&a.push({element:f,datasetIndex:p,index:m})}return _f(t,n,e,d),a}function Gp(t,e,n,r,i,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!r?vV(t,e,n,i):yV(t,e,n,r,i,s)}function jS(t,e,n,r,i){const s=[],a=n==="x"?"inXRange":"inYRange";let c=!1;return _f(t,n,e,(u,d,f)=>{u[a]&&u[a](e[n],i)&&(s.push({element:u,datasetIndex:d,index:f}),c=c||u.inRange(e.x,e.y,i))}),r&&!c?[]:s}var bV={modes:{index(t,e,n,r){const i=Ys(e,t),s=n.axis||"x",a=n.includeInvisible||!1,c=n.intersect?qp(t,i,s,r,a):Gp(t,i,s,!1,r,a),u=[];return c.length?(t.getSortedVisibleDatasetMetas().forEach(d=>{const f=c[0].index,p=d.data[f];p&&!p.skip&&u.push({element:p,datasetIndex:d.index,index:f})}),u):[]},dataset(t,e,n,r){const i=Ys(e,t),s=n.axis||"xy",a=n.includeInvisible||!1;let c=n.intersect?qp(t,i,s,r,a):Gp(t,i,s,!1,r,a);if(c.length>0){const u=c[0].datasetIndex,d=t.getDatasetMeta(u).data;c=[];for(let f=0;f<d.length;++f)c.push({element:d[f],datasetIndex:u,index:f})}return c},point(t,e,n,r){const i=Ys(e,t),s=n.axis||"xy",a=n.includeInvisible||!1;return qp(t,i,s,r,a)},nearest(t,e,n,r){const i=Ys(e,t),s=n.axis||"xy",a=n.includeInvisible||!1;return Gp(t,i,s,n.intersect,r,a)},x(t,e,n,r){const i=Ys(e,t);return jS(t,i,"x",n.intersect,r)},y(t,e,n,r){const i=Ys(e,t);return jS(t,i,"y",n.intersect,r)}}};const wT=["left","top","right","bottom"];function ol(t,e){return t.filter(n=>n.pos===e)}function HS(t,e){return t.filter(n=>wT.indexOf(n.pos)===-1&&n.box.axis===e)}function ll(t,e){return t.sort((n,r)=>{const i=e?r:n,s=e?n:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function _V(t){const e=[];let n,r,i,s,a,c;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],{position:s,options:{stack:a,stackWeight:c=1}}=i,e.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:a&&s+a,stackWeight:c});return e}function SV(t){const e={};for(const n of t){const{stack:r,pos:i,stackWeight:s}=n;if(!r||!wT.includes(i))continue;const a=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=s}return e}function wV(t,e){const n=SV(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,a,c;for(s=0,a=t.length;s<a;++s){c=t[s];const{fullSize:u}=c.box,d=n[c.stack],f=d&&c.stackWeight/d.weight;c.horizontal?(c.width=f?f*r:u&&e.availableWidth,c.height=i):(c.width=r,c.height=f?f*i:u&&e.availableHeight)}return n}function xV(t){const e=_V(t),n=ll(e.filter(d=>d.box.fullSize),!0),r=ll(ol(e,"left"),!0),i=ll(ol(e,"right")),s=ll(ol(e,"top"),!0),a=ll(ol(e,"bottom")),c=HS(e,"x"),u=HS(e,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(u).concat(a).concat(c),chartArea:ol(e,"chartArea"),vertical:r.concat(i).concat(u),horizontal:s.concat(a).concat(c)}}function zS(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function xT(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function EV(t,e,n,r){const{pos:i,box:s}=n,a=t.maxPadding;if(!Qe(i)){n.size&&(t[i]-=n.size);const p=r[n.stack]||{size:0,count:1};p.size=Math.max(p.size,n.horizontal?s.height:s.width),n.size=p.size/p.count,t[i]+=n.size}s.getPadding&&xT(a,s.getPadding());const c=Math.max(0,e.outerWidth-zS(a,t,"left","right")),u=Math.max(0,e.outerHeight-zS(a,t,"top","bottom")),d=c!==t.w,f=u!==t.h;return t.w=c,t.h=u,n.horizontal?{same:d,other:f}:{same:f,other:d}}function CV(t){const e=t.maxPadding;function n(r){const i=Math.max(e[r]-t[r],0);return t[r]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function TV(t,e){const n=e.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(a=>{s[a]=Math.max(e[a],n[a])}),s}return r(t?["left","right"]:["top","bottom"])}function hl(t,e,n,r){const i=[];let s,a,c,u,d,f;for(s=0,a=t.length,d=0;s<a;++s){c=t[s],u=c.box,u.update(c.width||e.w,c.height||e.h,TV(c.horizontal,e));const{same:p,other:m}=EV(e,n,c,r);d|=p&&i.length,f=f||m,u.fullSize||i.push(c)}return d&&hl(i,e,n,r)||f}function Hu(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function US(t,e,n,r){const i=n.padding;let{x:s,y:a}=e;for(const c of t){const u=c.box,d=r[c.stack]||{placed:0,weight:1},f=c.stackWeight/d.weight||1;if(c.horizontal){const p=e.w*f,m=d.size||u.height;Ld(d.start)&&(a=d.start),u.fullSize?Hu(u,i.left,a,n.outerWidth-i.right-i.left,m):Hu(u,e.left+d.placed,a,p,m),d.start=a,d.placed+=p,a=u.bottom}else{const p=e.h*f,m=d.size||u.width;Ld(d.start)&&(s=d.start),u.fullSize?Hu(u,s,i.top,m,n.outerHeight-i.bottom-i.top):Hu(u,s,e.top+d.placed,m,p),d.start=s,d.placed+=p,s=u.right}}e.x=s,e.y=a}var Cr={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=Dr(t.options.layout.padding),s=Math.max(e-i.width,0),a=Math.max(n-i.height,0),c=xV(t.boxes),u=c.vertical,d=c.horizontal;ht(t.boxes,_=>{typeof _.beforeLayout=="function"&&_.beforeLayout()});const f=u.reduce((_,w)=>w.box.options&&w.box.options.display===!1?_:_+1,0)||1,p=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:s,availableHeight:a,vBoxMaxWidth:s/2/f,hBoxMaxHeight:a/2}),m=Object.assign({},i);xT(m,Dr(r));const v=Object.assign({maxPadding:m,w:s,h:a,x:i.left,y:i.top},i),b=wV(u.concat(d),p);hl(c.fullSize,v,p,b),hl(u,v,p,b),hl(d,v,p,b)&&hl(u,v,p,b),CV(v),US(c.leftAndTop,v,p,b),v.x+=v.w,v.y+=v.h,US(c.rightAndBottom,v,p,b),t.chartArea={left:v.left,top:v.top,right:v.left+v.w,bottom:v.top+v.h,height:v.h,width:v.w},ht(c.chartArea,_=>{const w=_.box;Object.assign(w,t.chartArea),w.update(v.w,v.h,{left:0,top:0,right:0,bottom:0})})}};class ET{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,i){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,i?Math.floor(n/i):r)}}isAttached(e){return!0}updateConfig(e){}}class DV extends ET{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const id="$chartjs",kV={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},BS=t=>t===null||t==="";function AV(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[id]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",BS(i)){const s=kS(t,"width");s!==void 0&&(t.width=s)}if(BS(r))if(t.style.height==="")t.height=t.width/(e||2);else{const s=kS(t,"height");s!==void 0&&(t.height=s)}return t}const CT=jW?{passive:!0}:!1;function RV(t,e,n){t&&t.addEventListener(e,n,CT)}function OV(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,CT)}function MV(t,e){const n=kV[t.type]||t.type,{x:r,y:i}=Ys(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:i!==void 0?i:null}}function Hd(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function NV(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let a=!1;for(const c of s)a=a||Hd(c.addedNodes,r),a=a&&!Hd(c.removedNodes,r);a&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function IV(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let a=!1;for(const c of s)a=a||Hd(c.removedNodes,r),a=a&&!Hd(c.addedNodes,r);a&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const ql=new Map;let WS=0;function TT(){const t=window.devicePixelRatio;t!==WS&&(WS=t,ql.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function PV(t,e){ql.size||window.addEventListener("resize",TT),ql.set(t,e)}function LV(t){ql.delete(t),ql.size||window.removeEventListener("resize",TT)}function FV(t,e,n){const r=t.canvas,i=r&&lv(r);if(!i)return;const s=aT((c,u)=>{const d=i.clientWidth;n(c,u),d<i.clientWidth&&n()},window),a=new ResizeObserver(c=>{const u=c[0],d=u.contentRect.width,f=u.contentRect.height;d===0&&f===0||s(d,f)});return a.observe(i),PV(t,s),a}function Yp(t,e,n){n&&n.disconnect(),e==="resize"&&LV(t)}function jV(t,e,n){const r=t.canvas,i=aT(s=>{t.ctx!==null&&n(MV(s,t))},t);return RV(r,e,i),i}class HV extends ET{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(AV(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[id])return!1;const r=n[id].initial;["height","width"].forEach(s=>{const a=r[s];wt(a)?n.removeAttribute(s):n.setAttribute(s,a)});const i=r.style||{};return Object.keys(i).forEach(s=>{n.style[s]=i[s]}),n.width=n.width,delete n[id],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const i=e.$proxies||(e.$proxies={}),a={attach:NV,detach:IV,resize:FV}[n]||jV;i[n]=a(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),i=r[n];if(!i)return;({attach:Yp,detach:Yp,resize:Yp}[n]||OV)(e,n,i),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,i){return FW(e,n,r,i)}isAttached(e){const n=e&&lv(e);return!!(n&&n.isConnected)}}function zV(t){return!ov()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?DV:HV}class Ds{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return Bl(this.x)&&Bl(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}}function UV(t,e){const n=t.options.ticks,r=BV(t),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?VV(e):[],a=s.length,c=s[0],u=s[a-1],d=[];if(a>i)return $V(e,d,s,a/i),d;const f=WV(s,e,i);if(a>0){let p,m;const v=a>1?Math.round((u-c)/(a-1)):null;for(zu(e,d,f,wt(v)?0:c-v,c),p=0,m=a-1;p<m;p++)zu(e,d,f,s[p],s[p+1]);return zu(e,d,f,u,wt(v)?e.length:u+v),d}return zu(e,d,f),d}function BV(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}function WV(t,e,n){const r=qV(t),i=e.length/n;if(!r)return Math.max(i,1);const s=IB(r);for(let a=0,c=s.length-1;a<c;a++){const u=s[a];if(u>i)return u}return Math.max(i,1)}function VV(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function $V(t,e,n,r){let i=0,s=n[0],a;for(r=Math.ceil(r),a=0;a<t.length;a++)a===s&&(e.push(t[a]),i++,s=n[i*r])}function zu(t,e,n,r,i){const s=$e(r,0),a=Math.min($e(i,t.length),t.length);let c=0,u,d,f;for(n=Math.ceil(n),i&&(u=i-r,n=u/Math.floor(u/n)),f=s;f<0;)c++,f=Math.round(s+c*n);for(d=Math.max(s,0);d<a;d++)d===f&&(e.push(t[d]),c++,f=Math.round(s+c*n))}function qV(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const GV=t=>t==="left"?"right":t==="right"?"left":t,VS=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,$S=(t,e)=>Math.min(e||t,t);function qS(t,e){const n=[],r=t.length/e,i=t.length;let s=0;for(;s<i;s+=r)n.push(t[Math.floor(s)]);return n}function YV(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),s=t._startPixel,a=t._endPixel,c=1e-6;let u=t.getPixelForTick(i),d;if(!(n&&(r===1?d=Math.max(u-s,a-u):e===0?d=(t.getPixelForTick(1)-u)/2:d=(u-t.getPixelForTick(i-1))/2,u+=i<e?d:-d,u<s-c||u>a+c)))return u}function QV(t,e){ht(t,n=>{const r=n.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete n.data[r[s]];r.splice(0,i)}})}function cl(t){return t.drawTicks?t.tickLength:0}function GS(t,e){if(!t.display)return 0;const n=Dn(t.font,e),r=Dr(t.padding);return(an(t.text)?t.text.length:1)*n.lineHeight+r.height}function KV(t,e){return ba(t,{scale:e,type:"scale"})}function ZV(t,e,n){return ba(t,{tick:n,index:e,type:"tick"})}function XV(t,e,n){let r=ev(t);return(n&&e!=="right"||!n&&e==="right")&&(r=GV(r)),r}function JV(t,e,n,r){const{top:i,left:s,bottom:a,right:c,chart:u}=t,{chartArea:d,scales:f}=u;let p=0,m,v,b;const _=a-i,w=c-s;if(t.isHorizontal()){if(v=Cn(r,s,c),Qe(n)){const x=Object.keys(n)[0],C=n[x];b=f[x].getPixelForValue(C)+_-e}else n==="center"?b=(d.bottom+d.top)/2+_-e:b=VS(t,n,e);m=c-s}else{if(Qe(n)){const x=Object.keys(n)[0],C=n[x];v=f[x].getPixelForValue(C)-w+e}else n==="center"?v=(d.left+d.right)/2-w+e:v=VS(t,n,e);b=Cn(r,a,i),p=n==="left"?-on:on}return{titleX:v,titleY:b,maxWidth:m,rotation:p}}class _o extends Ds{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:i}=this;return e=Kr(e,Number.POSITIVE_INFINITY),n=Kr(n,Number.NEGATIVE_INFINITY),r=Kr(r,Number.POSITIVE_INFINITY),i=Kr(i,Number.NEGATIVE_INFINITY),{min:Kr(e,r),max:Kr(n,i),minDefined:kn(e),maxDefined:kn(n)}}getMinMax(e){let{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),a;if(i&&s)return{min:n,max:r};const c=this.getMatchingVisibleMetas();for(let u=0,d=c.length;u<d;++u)a=c[u].controller.getMinMax(this,e),i||(n=Math.min(n,a.min)),s||(r=Math.max(r,a.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:Kr(n,Kr(r,n)),max:Kr(r,Kr(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ct(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:i,grace:s,ticks:a}=this.options,c=a.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=gW(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const u=c<this.ticks.length;this._convertTicksToLabels(u?qS(this.ticks,c):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=UV(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),u&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ct(this.options.afterUpdate,[this])}beforeSetDimensions(){Ct(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ct(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Ct(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ct(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=Ct(n.callback,[s.value,r,e],this)}afterTickToLabelConversion(){Ct(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ct(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=$S(this.ticks.length,e.ticks.maxTicksLimit),i=n.minRotation||0,s=n.maxRotation;let a=i,c,u,d;if(!this._isVisible()||!n.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const f=this._getLabelSizes(),p=f.widest.width,m=f.highest.height,v=Pn(this.chart.width-p,0,this.maxWidth);c=e.offset?this.maxWidth/r:v/(r-1),p+6>c&&(c=v/(r-(e.offset?.5:1)),u=this.maxHeight-cl(e.grid)-n.padding-GS(e.title,this.chart.options.font),d=Math.sqrt(p*p+m*m),a=jB(Math.min(Math.asin(Pn((f.highest.height+6)/c,-1,1)),Math.asin(Pn(u/d,-1,1))-Math.asin(Pn(m/d,-1,1)))),a=Math.max(i,Math.min(s,a))),this.labelRotation=a}afterCalculateLabelRotation(){Ct(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ct(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:i,grid:s}}=this,a=this._isVisible(),c=this.isHorizontal();if(a){const u=GS(i,n.options.font);if(c?(e.width=this.maxWidth,e.height=cl(s)+u):(e.height=this.maxHeight,e.width=cl(s)+u),r.display&&this.ticks.length){const{first:d,last:f,widest:p,highest:m}=this._getLabelSizes(),v=r.padding*2,b=Ai(this.labelRotation),_=Math.cos(b),w=Math.sin(b);if(c){const x=r.mirror?0:w*p.width+_*m.height;e.height=Math.min(this.maxHeight,e.height+x+v)}else{const x=r.mirror?0:_*p.width+w*m.height;e.width=Math.min(this.maxWidth,e.width+x+v)}this._calculatePadding(d,f,w,_)}}this._handleMargins(),c?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,i){const{ticks:{align:s,padding:a},position:c}=this.options,u=this.labelRotation!==0,d=c!=="top"&&this.axis==="x";if(this.isHorizontal()){const f=this.getPixelForTick(0)-this.left,p=this.right-this.getPixelForTick(this.ticks.length-1);let m=0,v=0;u?d?(m=i*e.width,v=r*n.height):(m=r*e.height,v=i*n.width):s==="start"?v=n.width:s==="end"?m=e.width:s!=="inner"&&(m=e.width/2,v=n.width/2),this.paddingLeft=Math.max((m-f+a)*this.width/(this.width-f),0),this.paddingRight=Math.max((v-p+a)*this.width/(this.width-p),0)}else{let f=n.height/2,p=e.height/2;s==="start"?(f=0,p=e.height):s==="end"&&(f=n.height,p=0),this.paddingTop=f+a,this.paddingBottom=p+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ct(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)wt(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=qS(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:i,_longestTextCache:s}=this,a=[],c=[],u=Math.floor(n/$S(n,r));let d=0,f=0,p,m,v,b,_,w,x,C,k,R,A;for(p=0;p<n;p+=u){if(b=e[p].label,_=this._resolveTickFontOptions(p),i.font=w=_.string,x=s[w]=s[w]||{data:{},gc:[]},C=_.lineHeight,k=R=0,!wt(b)&&!an(b))k=xS(i,x.data,x.gc,k,b),R=C;else if(an(b))for(m=0,v=b.length;m<v;++m)A=b[m],!wt(A)&&!an(A)&&(k=xS(i,x.data,x.gc,k,A),R+=C);a.push(k),c.push(R),d=Math.max(k,d),f=Math.max(R,f)}QV(s,n);const M=a.indexOf(d),P=c.indexOf(f),O=H=>({width:a[H]||0,height:c[H]||0});return{first:O(0),last:O(n-1),widest:O(M),highest:O(P),widths:a,heights:c}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return zB(this._alignToPixels?Ws(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=ZV(this.getContext(),e,r))}return this.$context||(this.$context=KV(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Ai(this.labelRotation),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),s=this._getLabelSizes(),a=e.autoSkipPadding||0,c=s?s.widest.width+a:0,u=s?s.highest.height+a:0;return this.isHorizontal()?u*r>c*i?c/r:u/i:u*i<c*r?u/r:c/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,i=this.options,{grid:s,position:a,border:c}=i,u=s.offset,d=this.isHorizontal(),p=this.ticks.length+(u?1:0),m=cl(s),v=[],b=c.setContext(this.getContext()),_=b.display?b.width:0,w=_/2,x=function(ie){return Ws(r,ie,_)};let C,k,R,A,M,P,O,H,B,$,ee,re;if(a==="top")C=x(this.bottom),P=this.bottom-m,H=C-w,$=x(e.top)+w,re=e.bottom;else if(a==="bottom")C=x(this.top),$=e.top,re=x(e.bottom)-w,P=C+w,H=this.top+m;else if(a==="left")C=x(this.right),M=this.right-m,O=C-w,B=x(e.left)+w,ee=e.right;else if(a==="right")C=x(this.left),B=e.left,ee=x(e.right)-w,M=C+w,O=this.left+m;else if(n==="x"){if(a==="center")C=x((e.top+e.bottom)/2+.5);else if(Qe(a)){const ie=Object.keys(a)[0],oe=a[ie];C=x(this.chart.scales[ie].getPixelForValue(oe))}$=e.top,re=e.bottom,P=C+w,H=P+m}else if(n==="y"){if(a==="center")C=x((e.left+e.right)/2);else if(Qe(a)){const ie=Object.keys(a)[0],oe=a[ie];C=x(this.chart.scales[ie].getPixelForValue(oe))}M=C-w,O=M-m,B=e.left,ee=e.right}const he=$e(i.ticks.maxTicksLimit,p),pe=Math.max(1,Math.ceil(p/he));for(k=0;k<p;k+=pe){const ie=this.getContext(k),oe=s.setContext(ie),K=c.setContext(ie),q=oe.lineWidth,Y=oe.color,F=K.dash||[],G=K.dashOffset,ne=oe.tickWidth,le=oe.tickColor,ue=oe.tickBorderDash||[],ce=oe.tickBorderDashOffset;R=YV(this,k,u),R!==void 0&&(A=Ws(r,R,q),d?M=O=B=ee=A:P=H=$=re=A,v.push({tx1:M,ty1:P,tx2:O,ty2:H,x1:B,y1:$,x2:ee,y2:re,width:q,color:Y,borderDash:F,borderDashOffset:G,tickWidth:ne,tickColor:le,tickBorderDash:ue,tickBorderDashOffset:ce}))}return this._ticksLength=p,this._borderValue=C,v}_computeLabelItems(e){const n=this.axis,r=this.options,{position:i,ticks:s}=r,a=this.isHorizontal(),c=this.ticks,{align:u,crossAlign:d,padding:f,mirror:p}=s,m=cl(r.grid),v=m+f,b=p?-f:v,_=-Ai(this.labelRotation),w=[];let x,C,k,R,A,M,P,O,H,B,$,ee,re="middle";if(i==="top")M=this.bottom-b,P=this._getXAxisLabelAlignment();else if(i==="bottom")M=this.top+b,P=this._getXAxisLabelAlignment();else if(i==="left"){const pe=this._getYAxisLabelAlignment(m);P=pe.textAlign,A=pe.x}else if(i==="right"){const pe=this._getYAxisLabelAlignment(m);P=pe.textAlign,A=pe.x}else if(n==="x"){if(i==="center")M=(e.top+e.bottom)/2+v;else if(Qe(i)){const pe=Object.keys(i)[0],ie=i[pe];M=this.chart.scales[pe].getPixelForValue(ie)+v}P=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")A=(e.left+e.right)/2-v;else if(Qe(i)){const pe=Object.keys(i)[0],ie=i[pe];A=this.chart.scales[pe].getPixelForValue(ie)}P=this._getYAxisLabelAlignment(m).textAlign}n==="y"&&(u==="start"?re="top":u==="end"&&(re="bottom"));const he=this._getLabelSizes();for(x=0,C=c.length;x<C;++x){k=c[x],R=k.label;const pe=s.setContext(this.getContext(x));O=this.getPixelForTick(x)+s.labelOffset,H=this._resolveTickFontOptions(x),B=H.lineHeight,$=an(R)?R.length:1;const ie=$/2,oe=pe.color,K=pe.textStrokeColor,q=pe.textStrokeWidth;let Y=P;a?(A=O,P==="inner"&&(x===C-1?Y=this.options.reverse?"left":"right":x===0?Y=this.options.reverse?"right":"left":Y="center"),i==="top"?d==="near"||_!==0?ee=-$*B+B/2:d==="center"?ee=-he.highest.height/2-ie*B+B:ee=-he.highest.height+B/2:d==="near"||_!==0?ee=B/2:d==="center"?ee=he.highest.height/2-ie*B:ee=he.highest.height-$*B,p&&(ee*=-1),_!==0&&!pe.showLabelBackdrop&&(A+=B/2*Math.sin(_))):(M=O,ee=(1-$)*B/2);let F;if(pe.showLabelBackdrop){const G=Dr(pe.backdropPadding),ne=he.heights[x],le=he.widths[x];let ue=ee-G.top,ce=0-G.left;switch(re){case"middle":ue-=ne/2;break;case"bottom":ue-=ne;break}switch(P){case"center":ce-=le/2;break;case"right":ce-=le;break;case"inner":x===C-1?ce-=le:x>0&&(ce-=le/2);break}F={left:ce,top:ue,width:le+G.width,height:ne+G.height,color:pe.backdropColor}}w.push({label:R,font:H,textOffset:ee,options:{rotation:_,color:oe,strokeColor:K,strokeWidth:q,textAlign:Y,textBaseline:re,translation:[A,M],backdrop:F}})}return w}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Ai(this.labelRotation))return e==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,a=this._getLabelSizes(),c=e+s,u=a.widest.width;let d,f;return n==="left"?i?(f=this.right+s,r==="near"?d="left":r==="center"?(d="center",f+=u/2):(d="right",f+=u)):(f=this.right-c,r==="near"?d="right":r==="center"?(d="center",f-=u/2):(d="left",f=this.left)):n==="right"?i?(f=this.left+s,r==="near"?d="right":r==="center"?(d="center",f-=u/2):(d="left",f-=u)):(f=this.left+c,r==="near"?d="left":r==="center"?(d="center",f+=u/2):(d="right",f=this.right)):d="right",{textAlign:d,x:f}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:i,width:s,height:a}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,i,s,a),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,a;const c=(u,d,f)=>{!f.width||!f.color||(r.save(),r.lineWidth=f.width,r.strokeStyle=f.color,r.setLineDash(f.borderDash||[]),r.lineDashOffset=f.borderDashOffset,r.beginPath(),r.moveTo(u.x,u.y),r.lineTo(d.x,d.y),r.stroke(),r.restore())};if(n.display)for(s=0,a=i.length;s<a;++s){const u=i[s];n.drawOnChartArea&&c({x:u.x1,y:u.y1},{x:u.x2,y:u.y2},u),n.drawTicks&&c({x:u.tx1,y:u.ty1},{x:u.tx2,y:u.ty2},{color:u.tickColor,width:u.tickWidth,borderDash:u.tickBorderDash,borderDashOffset:u.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),a=r.display?s.width:0;if(!a)return;const c=i.setContext(this.getContext(0)).lineWidth,u=this._borderValue;let d,f,p,m;this.isHorizontal()?(d=Ws(e,this.left,a)-a/2,f=Ws(e,this.right,c)+c/2,p=m=u):(p=Ws(e,this.top,a)-a/2,m=Ws(e,this.bottom,c)+c/2,d=f=u),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(d,p),n.lineTo(f,m),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&vf(r,i);const s=this.getLabelItems(e);for(const a of s){const c=a.options,u=a.font,d=a.label,f=a.textOffset;$l(r,d,0,f,u,c)}i&&yf(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:i}}=this;if(!r.display)return;const s=Dn(r.font),a=Dr(r.padding),c=r.align;let u=s.lineHeight/2;n==="bottom"||n==="center"||Qe(n)?(u+=a.bottom,an(r.text)&&(u+=s.lineHeight*(r.text.length-1))):u+=a.top;const{titleX:d,titleY:f,maxWidth:p,rotation:m}=JV(this,u,n,c);$l(e,r.text,0,0,s,{color:r.color,maxWidth:p,rotation:m,textAlign:XV(c,n,i),textBaseline:"middle",translation:[d,f]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=$e(e.grid&&e.grid.z,-1),i=$e(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==_o.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,a;for(s=0,a=n.length;s<a;++s){const c=n[s];c[r]===this.id&&(!e||c.type===e)&&i.push(c)}return i}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Dn(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Uu{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;n5(n)&&(r=this.register(n));const i=this.items,s=e.id,a=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,e5(e,a,r),this.override&&Yt.override(e.id,e.overrides)),a}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,i=this.scope;r in n&&delete n[r],i&&r in Yt[i]&&(delete Yt[i][r],this.override&&delete da[r])}}function e5(t,e,n){const r=zl(Object.create(null),[n?Yt.get(n):{},Yt.get(e),t.defaults]);Yt.set(e,r),t.defaultRoutes&&t5(e,t.defaultRoutes),t.descriptors&&Yt.describe(e,t.descriptors)}function t5(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),i=r.pop(),s=[t].concat(r).join("."),a=e[n].split("."),c=a.pop(),u=a.join(".");Yt.route(s,i,u,c)})}function n5(t){return"id"in t&&"defaults"in t}class r5{constructor(){this.controllers=new Uu(cv,"datasets",!0),this.elements=new Uu(Ds,"elements"),this.plugins=new Uu(Object,"plugins"),this.scales=new Uu(_o,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):ht(i,a=>{const c=r||this._getRegistryForType(a);this._exec(e,c,a)})})}_exec(e,n,r){const i=Xm(e);Ct(r["before"+i],[],r),n[e](r),Ct(r["after"+i],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const i=n.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var Jr=new r5;class i5{constructor(){this._init=void 0}notify(e,n,r,i){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const s=i?this._descriptors(e).filter(i):this._descriptors(e),a=this._notify(s,e,n,r);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),a}_notify(e,n,r,i){i=i||{};for(const s of e){const a=s.plugin,c=a[r],u=[n,i,s.options];if(Ct(c,u,a)===!1&&i.cancelable)return!1}return!0}invalidate(){wt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,i=$e(r.options&&r.options.plugins,{}),s=s5(r);return i===!1&&!n?[]:o5(e,s,i,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,i=(s,a)=>s.filter(c=>!a.some(u=>c.plugin.id===u.plugin.id));this._notify(i(n,r),e,"stop"),this._notify(i(r,n),e,"start")}}function s5(t){const e={},n=[],r=Object.keys(Jr.plugins.items);for(let s=0;s<r.length;s++)n.push(Jr.getPlugin(r[s]));const i=t.plugins||[];for(let s=0;s<i.length;s++){const a=i[s];n.indexOf(a)===-1&&(n.push(a),e[a.id]=!0)}return{plugins:n,localIds:e}}function a5(t,e){return!e&&t===!1?null:t===!0?{}:t}function o5(t,{plugins:e,localIds:n},r,i){const s=[],a=t.getContext();for(const c of e){const u=c.id,d=a5(r[u],i);d!==null&&s.push({plugin:c,options:l5(t.config,{plugin:c,local:n[u]},d,a)})}return s}function l5(t,{plugin:e,local:n},r,i){const s=t.pluginScopeKeys(e),a=t.getOptionScopes(r,s);return n&&e.defaults&&a.push(e.defaults),t.createResolver(a,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function jg(t,e){const n=Yt.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function c5(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function u5(t,e){return t===e?"_index_":"_value_"}function YS(t){if(t==="x"||t==="y"||t==="r")return t}function d5(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Hg(t,...e){if(YS(t))return t;for(const n of e){const r=n.axis||d5(n.position)||t.length>1&&YS(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function QS(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function f5(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return QS(t,"x",n[0])||QS(t,"y",n[0])}return{}}function h5(t,e){const n=da[t.type]||{scales:{}},r=e.scales||{},i=jg(t.type,e),s=Object.create(null);return Object.keys(r).forEach(a=>{const c=r[a];if(!Qe(c))return console.error(`Invalid scale configuration for scale: ${a}`);if(c._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const u=Hg(a,c,f5(a,t),Yt.scales[c.type]),d=u5(u,i),f=n.scales||{};s[a]=El(Object.create(null),[{axis:u},c,f[u],f[d]])}),t.data.datasets.forEach(a=>{const c=a.type||t.type,u=a.indexAxis||jg(c,e),f=(da[c]||{}).scales||{};Object.keys(f).forEach(p=>{const m=c5(p,u),v=a[m+"AxisID"]||m;s[v]=s[v]||Object.create(null),El(s[v],[{axis:m},r[v],f[p]])})}),Object.keys(s).forEach(a=>{const c=s[a];El(c,[Yt.scales[c.type],Yt.scale])}),s}function DT(t){const e=t.options||(t.options={});e.plugins=$e(e.plugins,{}),e.scales=h5(t,e)}function kT(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function p5(t){return t=t||{},t.data=kT(t.data),DT(t),t}const KS=new Map,AT=new Set;function Bu(t,e){let n=KS.get(t);return n||(n=e(),KS.set(t,n),AT.add(n)),n}const ul=(t,e,n)=>{const r=Ul(e,n);r!==void 0&&t.add(r)};class g5{constructor(e){this._config=p5(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=kT(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),DT(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Bu(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Bu(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Bu(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return Bu(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let i=r.get(e);return(!i||n)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,n,r){const{options:i,type:s}=this,a=this._cachedScopes(e,r),c=a.get(n);if(c)return c;const u=new Set;n.forEach(f=>{e&&(u.add(e),f.forEach(p=>ul(u,e,p))),f.forEach(p=>ul(u,i,p)),f.forEach(p=>ul(u,da[s]||{},p)),f.forEach(p=>ul(u,Yt,p)),f.forEach(p=>ul(u,Pg,p))});const d=Array.from(u);return d.length===0&&d.push(Object.create(null)),AT.has(n)&&a.set(n,d),d}chartOptionScopes(){const{options:e,type:n}=this;return[e,da[n]||{},Yt.datasets[n]||{},{type:n},Yt,Pg]}resolveNamedOptions(e,n,r,i=[""]){const s={$shared:!0},{resolver:a,subPrefixes:c}=ZS(this._resolverCache,e,i);let u=a;if(v5(a,n)){s.$shared=!1,r=ws(r)?r():r;const d=this.createResolver(e,r,c);u=co(a,r,d)}for(const d of n)s[d]=u[d];return s}createResolver(e,n,r=[""],i){const{resolver:s}=ZS(this._resolverCache,e,r);return Qe(n)?co(s,n,void 0,i):s}}function ZS(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let s=r.get(i);return s||(s={resolver:iv(e,n),subPrefixes:n.filter(c=>!c.toLowerCase().includes("hover"))},r.set(i,s)),s}const m5=t=>Qe(t)&&Object.getOwnPropertyNames(t).some(e=>ws(t[e]));function v5(t,e){const{isScriptable:n,isIndexable:r}=cT(t);for(const i of e){const s=n(i),a=r(i),c=(a||s)&&t[i];if(s&&(ws(c)||m5(c))||a&&an(c))return!0}return!1}var y5="4.5.1";const b5=["top","bottom","left","right","chartArea"];function XS(t,e){return t==="top"||t==="bottom"||b5.indexOf(t)===-1&&e==="x"}function JS(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function ew(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Ct(n&&n.onComplete,[t],e)}function _5(t){const e=t.chart,n=e.options.animation;Ct(n&&n.onProgress,[t],e)}function RT(t){return ov()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const sd={},tw=t=>{const e=RT(t);return Object.values(sd).filter(n=>n.canvas===e).pop()};function S5(t,e,n){const r=Object.keys(t);for(const i of r){const s=+i;if(s>=e){const a=t[i];delete t[i],(n>0||s>e)&&(t[s+n]=a)}}}function w5(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}let Sf=class{static defaults=Yt;static instances=sd;static overrides=da;static registry=Jr;static version=y5;static getChart=tw;static register(...e){Jr.add(...e),nw()}static unregister(...e){Jr.remove(...e),nw()}constructor(e,n){const r=this.config=new g5(n),i=RT(e),s=tw(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const a=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||zV(i)),this.platform.updateConfig(r);const c=this.platform.acquireContext(i,a.aspectRatio),u=c&&c.canvas,d=u&&u.height,f=u&&u.width;if(this.id=CB(),this.ctx=c,this.canvas=u,this.width=f,this.height=d,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new i5,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=$B(p=>this.update(p),a.resizeDelay||0),this._dataChanges=[],sd[this.id]=this,!c||!u){console.error("Failed to create chart: can't acquire context from the given item");return}_i.listen(this,"complete",ew),_i.listen(this,"progress",_5),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:i,_aspectRatio:s}=this;return wt(e)?n&&s?s:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Jr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():DS(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return ES(this.canvas,this.ctx),this}stop(){return _i.stop(this),this}resize(e,n){_i.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(i,e,n,s),c=r.devicePixelRatio||this.platform.getDevicePixelRatio(),u=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,DS(this,c,!0)&&(this.notifyPlugins("resize",{size:a}),Ct(r.onResize,[this,a],this),this.attached&&this._doResize(u)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};ht(n,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,i=Object.keys(r).reduce((a,c)=>(a[c]=!1,a),{});let s=[];n&&(s=s.concat(Object.keys(n).map(a=>{const c=n[a],u=Hg(a,c),d=u==="r",f=u==="x";return{options:c,dposition:d?"chartArea":f?"bottom":"left",dtype:d?"radialLinear":f?"category":"linear"}}))),ht(s,a=>{const c=a.options,u=c.id,d=Hg(u,c),f=$e(c.type,a.dtype);(c.position===void 0||XS(c.position,d)!==XS(a.dposition))&&(c.position=a.dposition),i[u]=!0;let p=null;if(u in r&&r[u].type===f)p=r[u];else{const m=Jr.getScale(f);p=new m({id:u,type:f,ctx:this.ctx,chart:this}),r[p.id]=p}p.init(c,e)}),ht(i,(a,c)=>{a||delete r[c]}),ht(r,a=>{Cr.configure(this,a,a.options),Cr.addBox(this,a)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((i,s)=>i.index-s.index),r>n){for(let i=n;i<r;++i)this._destroyDatasetMeta(i);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(JS("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,i)=>{n.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=n.length;r<i;r++){const s=n[r];let a=this.getDatasetMeta(r);const c=s.type||this.config.type;if(a.type&&a.type!==c&&(this._destroyDatasetMeta(r),a=this.getDatasetMeta(r)),a.type=c,a.indexAxis=s.indexAxis||jg(c,this.options),a.order=s.order||0,a.index=r,a.label=""+s.label,a.visible=this.isDatasetVisible(r),a.controller)a.controller.updateIndex(r),a.controller.linkScales();else{const u=Jr.getController(c),{datasetElementType:d,dataElementType:f}=Yt.datasets[c];Object.assign(u,{dataElementType:Jr.getElement(f),datasetElementType:d&&Jr.getElement(d)}),a.controller=new u(this,r),e.push(a.controller)}}return this._updateMetasets(),e}_resetElements(){ht(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let d=0,f=this.data.datasets.length;d<f;d++){const{controller:p}=this.getDatasetMeta(d),m=!i&&s.indexOf(p)===-1;p.buildOrUpdateElements(m),a=Math.max(+p.getMaxOverflow(),a)}a=this._minPadding=r.layout.autoPadding?a:0,this._updateLayout(a),i||ht(s,d=>{d.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(JS("z","_idx"));const{_active:c,_lastEvent:u}=this;u?this._eventHandler(u,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){ht(this.scales,e=>{Cr.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!pS(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of n){const a=r==="_removeElements"?-s:s;S5(e,i,a)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=s=>new Set(e.filter(a=>a[0]===s).map((a,c)=>c+","+a.splice(1).join(","))),i=r(0);for(let s=1;s<n;s++)if(!pS(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Cr.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],ht(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,ws(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(_i.has(this)?this.attached&&!_i.running(this)&&_i.start(this):(this.draw(),ew({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let i,s;for(i=0,s=n.length;i<s;++i){const a=n[i];(!e||a.visible)&&r.push(a)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r={meta:e,index:e.index,cancelable:!0},i=bT(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(i&&vf(n,i),e.controller.draw(),i&&yf(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return Vl(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,i){const s=bV.modes[n];return typeof s=="function"?s(this,e,r,i):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let i=r.filter(s=>s&&s._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=ba(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const i=r?"show":"hide",s=this.getDatasetMeta(e),a=s.controller._resolveAnimations(void 0,i);Ld(n)?(s.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),a.update(s,{visible:r}),this.update(c=>c.datasetIndex===e?i:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),_i.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),ES(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete sd[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(s,a)=>{n.addEventListener(this,s,a),e[s]=a},i=(s,a,c)=>{s.offsetX=a,s.offsetY=c,this._eventHandler(s)};ht(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(u,d)=>{n.addEventListener(this,u,d),e[u]=d},i=(u,d)=>{e[u]&&(n.removeEventListener(this,u,d),delete e[u])},s=(u,d)=>{this.canvas&&this.resize(u,d)};let a;const c=()=>{i("attach",c),this.attached=!0,this.resize(),r("resize",s),r("detach",a)};a=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",c)},n.isAttached(this.canvas)?c():a()}unbindEvents(){ht(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},ht(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const i=r?"set":"remove";let s,a,c,u;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),c=0,u=e.length;c<u;++c){a=e[c];const d=a&&this.getDatasetMeta(a.datasetIndex).controller;d&&d[i+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:s,index:a})=>{const c=this.getDatasetMeta(s);if(!c)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:c.data[a],index:a}});!Id(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const i=this.options.hover,s=(u,d)=>u.filter(f=>!d.some(p=>f.datasetIndex===p.datasetIndex&&f.index===p.index)),a=s(n,e),c=r?e:s(e,n);a.length&&this.updateHoverStyle(a,i.mode,!1),c.length&&i.mode&&this.updateHoverStyle(c,i.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},i=a=>(a.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:i=[],options:s}=this,a=n,c=this._getActiveElements(e,i,r,a),u=OB(e),d=w5(e,this._lastEvent,r,u);r&&(this._lastEvent=null,Ct(s.onHover,[e,c,this],this),u&&Ct(s.onClick,[e,c,this],this));const f=!Id(c,i);return(f||n)&&(this._active=c,this._updateHoverStyles(c,i,n)),this._lastEvent=d,f}_getActiveElements(e,n,r,i){if(e.type==="mouseout")return[];if(!r)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}};function nw(){return ht(Sf.instances,t=>t._plugins.invalidate())}function x5(t,e,n){const{startAngle:r,x:i,y:s,outerRadius:a,innerRadius:c,options:u}=e,{borderWidth:d,borderJoinStyle:f}=u,p=Math.min(d/a,ar(r-n));if(t.beginPath(),t.arc(i,s,a-d/2,r+p/2,n-p/2),c>0){const m=Math.min(d/c,ar(r-n));t.arc(i,s,c+d/2,n-m/2,r+m/2,!0)}else{const m=Math.min(d/2,a*ar(r-n));if(f==="round")t.arc(i,s,m,n-pt/2,r+pt/2,!0);else if(f==="bevel"){const v=2*m*m,b=-v*Math.cos(n+pt/2)+i,_=-v*Math.sin(n+pt/2)+s,w=v*Math.cos(r+pt/2)+i,x=v*Math.sin(r+pt/2)+s;t.lineTo(b,_),t.lineTo(w,x)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function E5(t,e,n){const{startAngle:r,pixelMargin:i,x:s,y:a,outerRadius:c,innerRadius:u}=e;let d=i/c;t.beginPath(),t.arc(s,a,c,r-d,n+d),u>i?(d=i/u,t.arc(s,a,u,n+d,r-d,!0)):t.arc(s,a,i,n+on,r-on),t.closePath(),t.clip()}function C5(t){return rv(t,["outerStart","outerEnd","innerStart","innerEnd"])}function T5(t,e,n,r){const i=C5(t.options.borderRadius),s=(n-e)/2,a=Math.min(s,r*e/2),c=u=>{const d=(n-Math.min(s,u))*r/2;return Pn(u,0,Math.min(s,d))};return{outerStart:c(i.outerStart),outerEnd:c(i.outerEnd),innerStart:Pn(i.innerStart,0,a),innerEnd:Pn(i.innerEnd,0,a)}}function Ga(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function zd(t,e,n,r,i,s){const{x:a,y:c,startAngle:u,pixelMargin:d,innerRadius:f}=e,p=Math.max(e.outerRadius+r+n-d,0),m=f>0?f+r+n+d:0;let v=0;const b=i-u;if(r){const pe=f>0?f-r:0,ie=p>0?p-r:0,oe=(pe+ie)/2,K=oe!==0?b*oe/(oe+r):b;v=(b-K)/2}const _=Math.max(.001,b*p-n/pt)/p,w=(b-_)/2,x=u+w+v,C=i-w-v,{outerStart:k,outerEnd:R,innerStart:A,innerEnd:M}=T5(e,m,p,C-x),P=p-k,O=p-R,H=x+k/P,B=C-R/O,$=m+A,ee=m+M,re=x+A/$,he=C-M/ee;if(t.beginPath(),s){const pe=(H+B)/2;if(t.arc(a,c,p,H,pe),t.arc(a,c,p,pe,B),R>0){const q=Ga(O,B,a,c);t.arc(q.x,q.y,R,B,C+on)}const ie=Ga(ee,C,a,c);if(t.lineTo(ie.x,ie.y),M>0){const q=Ga(ee,he,a,c);t.arc(q.x,q.y,M,C+on,he+Math.PI)}const oe=(C-M/m+(x+A/m))/2;if(t.arc(a,c,m,C-M/m,oe,!0),t.arc(a,c,m,oe,x+A/m,!0),A>0){const q=Ga($,re,a,c);t.arc(q.x,q.y,A,re+Math.PI,x-on)}const K=Ga(P,x,a,c);if(t.lineTo(K.x,K.y),k>0){const q=Ga(P,H,a,c);t.arc(q.x,q.y,k,x-on,H)}}else{t.moveTo(a,c);const pe=Math.cos(H)*p+a,ie=Math.sin(H)*p+c;t.lineTo(pe,ie);const oe=Math.cos(B)*p+a,K=Math.sin(B)*p+c;t.lineTo(oe,K)}t.closePath()}function D5(t,e,n,r,i){const{fullCircles:s,startAngle:a,circumference:c}=e;let u=e.endAngle;if(s){zd(t,e,n,r,u,i);for(let d=0;d<s;++d)t.fill();isNaN(c)||(u=a+(c%Ft||Ft))}return zd(t,e,n,r,u,i),t.fill(),u}function k5(t,e,n,r,i){const{fullCircles:s,startAngle:a,circumference:c,options:u}=e,{borderWidth:d,borderJoinStyle:f,borderDash:p,borderDashOffset:m,borderRadius:v}=u,b=u.borderAlign==="inner";if(!d)return;t.setLineDash(p||[]),t.lineDashOffset=m,b?(t.lineWidth=d*2,t.lineJoin=f||"round"):(t.lineWidth=d,t.lineJoin=f||"bevel");let _=e.endAngle;if(s){zd(t,e,n,r,_,i);for(let w=0;w<s;++w)t.stroke();isNaN(c)||(_=a+(c%Ft||Ft))}b&&E5(t,e,_),u.selfJoin&&_-a>=pt&&v===0&&f!=="miter"&&x5(t,e,_),s||(zd(t,e,n,r,_,i),t.stroke())}class A5 extends Ds{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,n,r){const i=this.getProps(["x","y"],r),{angle:s,distance:a}=rT(i,{x:e,y:n}),{startAngle:c,endAngle:u,innerRadius:d,outerRadius:f,circumference:p}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),m=(this.options.spacing+this.options.borderWidth)/2,v=$e(p,u-c),b=Wl(s,c,u)&&c!==u,_=v>=Ft||b,w=ea(a,d+m,f+m);return _&&w}getCenterPoint(e){const{x:n,y:r,startAngle:i,endAngle:s,innerRadius:a,outerRadius:c}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:u,spacing:d}=this.options,f=(i+s)/2,p=(a+c+d+u)/2;return{x:n+Math.cos(f)*p,y:r+Math.sin(f)*p}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:n,circumference:r}=this,i=(n.offset||0)/4,s=(n.spacing||0)/2,a=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=r>Ft?Math.floor(r/Ft):0,r===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const c=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(c)*i,Math.sin(c)*i);const u=1-Math.sin(Math.min(pt,r||0)),d=i*u;e.fillStyle=n.backgroundColor,e.strokeStyle=n.borderColor,D5(e,this,d,s,a),k5(e,this,d,s,a),e.restore()}}function OT(t,e,n=e){t.lineCap=$e(n.borderCapStyle,e.borderCapStyle),t.setLineDash($e(n.borderDash,e.borderDash)),t.lineDashOffset=$e(n.borderDashOffset,e.borderDashOffset),t.lineJoin=$e(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=$e(n.borderWidth,e.borderWidth),t.strokeStyle=$e(n.borderColor,e.borderColor)}function R5(t,e,n){t.lineTo(n.x,n.y)}function O5(t){return t.stepped?sW:t.tension||t.cubicInterpolationMode==="monotone"?aW:R5}function MT(t,e,n={}){const r=t.length,{start:i=0,end:s=r-1}=n,{start:a,end:c}=e,u=Math.max(i,a),d=Math.min(s,c),f=i<a&&s<a||i>c&&s>c;return{count:r,start:u,loop:e.loop,ilen:d<u&&!f?r+d-u:d-u}}function M5(t,e,n,r){const{points:i,options:s}=e,{count:a,start:c,loop:u,ilen:d}=MT(i,n,r),f=O5(s);let{move:p=!0,reverse:m}=r||{},v,b,_;for(v=0;v<=d;++v)b=i[(c+(m?d-v:v))%a],!b.skip&&(p?(t.moveTo(b.x,b.y),p=!1):f(t,_,b,m,s.stepped),_=b);return u&&(b=i[(c+(m?d:0))%a],f(t,_,b,m,s.stepped)),!!u}function N5(t,e,n,r){const i=e.points,{count:s,start:a,ilen:c}=MT(i,n,r),{move:u=!0,reverse:d}=r||{};let f=0,p=0,m,v,b,_,w,x;const C=R=>(a+(d?c-R:R))%s,k=()=>{_!==w&&(t.lineTo(f,w),t.lineTo(f,_),t.lineTo(f,x))};for(u&&(v=i[C(0)],t.moveTo(v.x,v.y)),m=0;m<=c;++m){if(v=i[C(m)],v.skip)continue;const R=v.x,A=v.y,M=R|0;M===b?(A<_?_=A:A>w&&(w=A),f=(p*f+R)/++p):(k(),t.lineTo(R,A),b=M,p=0,_=w=A),x=A}k()}function zg(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?N5:M5}function I5(t){return t.stepped?HW:t.tension||t.cubicInterpolationMode==="monotone"?zW:Qs}function P5(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),OT(t,e.options),t.stroke(i)}function L5(t,e,n,r){const{segments:i,options:s}=e,a=zg(e);for(const c of i)OT(t,s,c.style),t.beginPath(),a(t,e,c,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const F5=typeof Path2D=="function";function j5(t,e,n,r){F5&&!e.options.segment?P5(t,e,n,r):L5(t,e,n,r)}class wf extends Ds{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;OW(this._points,r,e,i,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=qW(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,i=e[n],s=this.points,a=yT(this,{property:n,start:i,end:i});if(!a.length)return;const c=[],u=I5(r);let d,f;for(d=0,f=a.length;d<f;++d){const{start:p,end:m}=a[d],v=s[p],b=s[m];if(v===b){c.push(v);continue}const _=Math.abs((i-v[n])/(b[n]-v[n])),w=u(v,b,_,r.stepped);w[n]=e[n],c.push(w)}return c.length===1?c[0]:c}pathSegment(e,n,r){return zg(this)(e,this,n,r)}path(e,n,r){const i=this.segments,s=zg(this);let a=this._loop;n=n||0,r=r||this.points.length-n;for(const c of i)a&=s(e,this,c,{start:n,end:n+r-1});return!!a}draw(e,n,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),j5(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function rw(t,e,n,r){const i=t.options,{[n]:s}=t.getProps([n],r);return Math.abs(e-s)<i.radius+i.hitRadius}class H5 extends Ds{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,n,r){const i=this.options,{x:s,y:a}=this.getProps(["x","y"],r);return Math.pow(e-s,2)+Math.pow(n-a,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(e,n){return rw(this,e,"x",n)}inYRange(e,n){return rw(this,e,"y",n)}getCenterPoint(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}size(e){e=e||this.options||{};let n=e.radius||0;n=Math.max(n,n&&e.hoverRadius||0);const r=n&&e.borderWidth||0;return(n+r)*2}draw(e,n){const r=this.options;this.skip||r.radius<.1||!Vl(this,n,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,Lg(e,r,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function z5(t,e,n){const r=t.segments,i=t.points,s=e.points,a=[];for(const c of r){let{start:u,end:d}=c;d=xf(u,d,i);const f=Ug(n,i[u],i[d],c.loop);if(!e.segments){a.push({source:c,target:f,start:i[u],end:i[d]});continue}const p=yT(e,f);for(const m of p){const v=Ug(n,s[m.start],s[m.end],m.loop),b=vT(c,i,v);for(const _ of b)a.push({source:_,target:m,start:{[n]:iw(f,v,"start",Math.max)},end:{[n]:iw(f,v,"end",Math.min)}})}}return a}function Ug(t,e,n,r){if(r)return;let i=e[t],s=n[t];return t==="angle"&&(i=ar(i),s=ar(s)),{property:t,start:i,end:s}}function U5(t,e){const{x:n=null,y:r=null}=t||{},i=e.points,s=[];return e.segments.forEach(({start:a,end:c})=>{c=xf(a,c,i);const u=i[a],d=i[c];r!==null?(s.push({x:u.x,y:r}),s.push({x:d.x,y:r})):n!==null&&(s.push({x:n,y:u.y}),s.push({x:n,y:d.y}))}),s}function xf(t,e,n){for(;e>t;e--){const r=n[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function iw(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function NT(t,e){let n=[],r=!1;return an(t)?(r=!0,n=t):n=U5(t,e),n.length?new wf({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function sw(t){return t&&t.fill!==!1}function B5(t,e,n){let i=t[e].fill;const s=[e];let a;if(!n)return i;for(;i!==!1&&s.indexOf(i)===-1;){if(!kn(i))return i;if(a=t[i],!a)return!1;if(a.visible)return i;s.push(i),i=a.fill}return!1}function W5(t,e,n){const r=G5(t);if(Qe(r))return isNaN(r.value)?!1:r;let i=parseFloat(r);return kn(i)&&Math.floor(i)===i?V5(r[0],e,i,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function V5(t,e,n,r){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=r?!1:n}function $5(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:Qe(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function q5(t,e,n){let r;return t==="start"?r=n:t==="end"?r=e.options.reverse?e.min:e.max:Qe(t)?r=t.value:r=e.getBaseValue(),r}function G5(t){const e=t.options,n=e.fill;let r=$e(n&&n.target,n);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function Y5(t){const{scale:e,index:n,line:r}=t,i=[],s=r.segments,a=r.points,c=Q5(e,n);c.push(NT({x:null,y:e.bottom},r));for(let u=0;u<s.length;u++){const d=s[u];for(let f=d.start;f<=d.end;f++)K5(i,a[f],c)}return new wf({points:i,options:{}})}function Q5(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const s=r[i];if(s.index===e)break;s.hidden||n.unshift(s.dataset)}return n}function K5(t,e,n){const r=[];for(let i=0;i<n.length;i++){const s=n[i],{first:a,last:c,point:u}=Z5(s,e,"x");if(!(!u||a&&c)){if(a)r.unshift(u);else if(t.push(u),!c)break}}t.push(...r)}function Z5(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const i=r[n],s=t.segments,a=t.points;let c=!1,u=!1;for(let d=0;d<s.length;d++){const f=s[d],p=a[f.start][n],m=a[f.end][n];if(ea(i,p,m)){c=i===p,u=i===m;break}}return{first:c,last:u,point:r}}class IT{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,r){const{x:i,y:s,radius:a}=this;return n=n||{start:0,end:Ft},e.arc(i,s,a,n.end,n.start,!0),!r.bounds}interpolate(e){const{x:n,y:r,radius:i}=this,s=e.angle;return{x:n+Math.cos(s)*i,y:r+Math.sin(s)*i,angle:s}}}function X5(t){const{chart:e,fill:n,line:r}=t;if(kn(n))return J5(e,n);if(n==="stack")return Y5(t);if(n==="shape")return!0;const i=e$(t);return i instanceof IT?i:NT(i,r)}function J5(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function e$(t){return(t.scale||{}).getPointPositionForValue?n$(t):t$(t)}function t$(t){const{scale:e={},fill:n}=t,r=$5(n,e);if(kn(r)){const i=e.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}function n$(t){const{scale:e,fill:n}=t,r=e.options,i=e.getLabels().length,s=r.reverse?e.max:e.min,a=q5(n,e,s),c=[];if(r.grid.circular){const u=e.getPointPositionForValue(0,s);return new IT({x:u.x,y:u.y,radius:e.getDistanceFromCenterForValue(a)})}for(let u=0;u<i;++u)c.push(e.getPointPositionForValue(u,a));return c}function Qp(t,e,n){const r=X5(e),{chart:i,index:s,line:a,scale:c,axis:u}=e,d=a.options,f=d.fill,p=d.backgroundColor,{above:m=p,below:v=p}=f||{},b=i.getDatasetMeta(s),_=bT(i,b);r&&a.points.length&&(vf(t,n),r$(t,{line:a,target:r,above:m,below:v,area:n,scale:c,axis:u,clip:_}),yf(t))}function r$(t,e){const{line:n,target:r,above:i,below:s,area:a,scale:c,clip:u}=e,d=n._loop?"angle":e.axis;t.save();let f=s;s!==i&&(d==="x"?(aw(t,r,a.top),Kp(t,{line:n,target:r,color:i,scale:c,property:d,clip:u}),t.restore(),t.save(),aw(t,r,a.bottom)):d==="y"&&(ow(t,r,a.left),Kp(t,{line:n,target:r,color:s,scale:c,property:d,clip:u}),t.restore(),t.save(),ow(t,r,a.right),f=i)),Kp(t,{line:n,target:r,color:f,scale:c,property:d,clip:u}),t.restore()}function aw(t,e,n){const{segments:r,points:i}=e;let s=!0,a=!1;t.beginPath();for(const c of r){const{start:u,end:d}=c,f=i[u],p=i[xf(u,d,i)];s?(t.moveTo(f.x,f.y),s=!1):(t.lineTo(f.x,n),t.lineTo(f.x,f.y)),a=!!e.pathSegment(t,c,{move:a}),a?t.closePath():t.lineTo(p.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function ow(t,e,n){const{segments:r,points:i}=e;let s=!0,a=!1;t.beginPath();for(const c of r){const{start:u,end:d}=c,f=i[u],p=i[xf(u,d,i)];s?(t.moveTo(f.x,f.y),s=!1):(t.lineTo(n,f.y),t.lineTo(f.x,f.y)),a=!!e.pathSegment(t,c,{move:a}),a?t.closePath():t.lineTo(n,p.y)}t.lineTo(n,e.first().y),t.closePath(),t.clip()}function Kp(t,e){const{line:n,target:r,property:i,color:s,scale:a,clip:c}=e,u=z5(n,r,i);for(const{source:d,target:f,start:p,end:m}of u){const{style:{backgroundColor:v=s}={}}=d,b=r!==!0;t.save(),t.fillStyle=v,i$(t,a,c,b&&Ug(i,p,m)),t.beginPath();const _=!!n.pathSegment(t,d);let w;if(b){_?t.closePath():lw(t,r,m,i);const x=!!r.pathSegment(t,f,{move:_,reverse:!0});w=_&&x,w||lw(t,r,p,i)}t.closePath(),t.fill(w?"evenodd":"nonzero"),t.restore()}}function i$(t,e,n,r){const i=e.chart.chartArea,{property:s,start:a,end:c}=r||{};if(s==="x"||s==="y"){let u,d,f,p;s==="x"?(u=a,d=i.top,f=c,p=i.bottom):(u=i.left,d=a,f=i.right,p=c),t.beginPath(),n&&(u=Math.max(u,n.left),f=Math.min(f,n.right),d=Math.max(d,n.top),p=Math.min(p,n.bottom)),t.rect(u,d,f-u,p-d),t.clip()}}function lw(t,e,n,r){const i=e.interpolate(n,r);i&&t.lineTo(i.x,i.y)}var s$={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,i=[];let s,a,c,u;for(a=0;a<r;++a)s=t.getDatasetMeta(a),c=s.dataset,u=null,c&&c.options&&c instanceof wf&&(u={visible:t.isDatasetVisible(a),index:a,fill:W5(c,a,r),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:c}),s.$filler=u,i.push(u);for(a=0;a<r;++a)u=i[a],!(!u||u.fill===!1)&&(u.fill=B5(i,a,n.propagate))},beforeDraw(t,e,n){const r=n.drawTime==="beforeDraw",i=t.getSortedVisibleDatasetMetas(),s=t.chartArea;for(let a=i.length-1;a>=0;--a){const c=i[a].$filler;c&&(c.line.updateControlPoints(s,c.axis),r&&c.fill&&Qp(t.ctx,c,s))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=t.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const s=r[i].$filler;sw(s)&&Qp(t.ctx,s,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;!sw(r)||n.drawTime!=="beforeDatasetDraw"||Qp(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const cw=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},a$=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class uw extends Ds{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Ct(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=Dn(r.font),s=i.size,a=this._computeTitleHeight(),{boxWidth:c,itemHeight:u}=cw(r,s);let d,f;n.font=i.string,this.isHorizontal()?(d=this.maxWidth,f=this._fitRows(a,s,c,u)+10):(f=this.maxHeight,d=this._fitCols(a,i,c,u)+10),this.width=Math.min(d,e.maxWidth||this.maxWidth),this.height=Math.min(f,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,i){const{ctx:s,maxWidth:a,options:{labels:{padding:c}}}=this,u=this.legendHitBoxes=[],d=this.lineWidths=[0],f=i+c;let p=e;s.textAlign="left",s.textBaseline="middle";let m=-1,v=-f;return this.legendItems.forEach((b,_)=>{const w=r+n/2+s.measureText(b.text).width;(_===0||d[d.length-1]+w+2*c>a)&&(p+=f,d[d.length-(_>0?0:1)]=0,v+=f,m++),u[_]={left:0,top:v,row:m,width:w,height:i},d[d.length-1]+=w+c}),p}_fitCols(e,n,r,i){const{ctx:s,maxHeight:a,options:{labels:{padding:c}}}=this,u=this.legendHitBoxes=[],d=this.columnSizes=[],f=a-e;let p=c,m=0,v=0,b=0,_=0;return this.legendItems.forEach((w,x)=>{const{itemWidth:C,itemHeight:k}=o$(r,n,s,w,i);x>0&&v+k+2*c>f&&(p+=m+c,d.push({width:m,height:v}),b+=m+c,_++,m=v=0),u[x]={left:b,top:v,col:_,width:C,height:k},m=Math.max(m,C),v+=k+c}),p+=m,d.push({width:m,height:v}),p}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:i},rtl:s}}=this,a=ro(s,this.left,this.width);if(this.isHorizontal()){let c=0,u=Cn(r,this.left+i,this.right-this.lineWidths[c]);for(const d of n)c!==d.row&&(c=d.row,u=Cn(r,this.left+i,this.right-this.lineWidths[c])),d.top+=this.top+e+i,d.left=a.leftForLtr(a.x(u),d.width),u+=d.width+i}else{let c=0,u=Cn(r,this.top+e+i,this.bottom-this.columnSizes[c].height);for(const d of n)d.col!==c&&(c=d.col,u=Cn(r,this.top+e+i,this.bottom-this.columnSizes[c].height)),d.top=u,d.left+=this.left+i,d.left=a.leftForLtr(a.x(d.left),d.width),u+=d.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;vf(e,this),this._draw(),yf(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:i}=this,{align:s,labels:a}=e,c=Yt.color,u=ro(e.rtl,this.left,this.width),d=Dn(a.font),{padding:f}=a,p=d.size,m=p/2;let v;this.drawTitle(),i.textAlign=u.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=d.string;const{boxWidth:b,boxHeight:_,itemHeight:w}=cw(a,p),x=function(M,P,O){if(isNaN(b)||b<=0||isNaN(_)||_<0)return;i.save();const H=$e(O.lineWidth,1);if(i.fillStyle=$e(O.fillStyle,c),i.lineCap=$e(O.lineCap,"butt"),i.lineDashOffset=$e(O.lineDashOffset,0),i.lineJoin=$e(O.lineJoin,"miter"),i.lineWidth=H,i.strokeStyle=$e(O.strokeStyle,c),i.setLineDash($e(O.lineDash,[])),a.usePointStyle){const B={radius:_*Math.SQRT2/2,pointStyle:O.pointStyle,rotation:O.rotation,borderWidth:H},$=u.xPlus(M,b/2),ee=P+m;lT(i,B,$,ee,a.pointStyleWidth&&b)}else{const B=P+Math.max((p-_)/2,0),$=u.leftForLtr(M,b),ee=kl(O.borderRadius);i.beginPath(),Object.values(ee).some(re=>re!==0)?Fg(i,{x:$,y:B,w:b,h:_,radius:ee}):i.rect($,B,b,_),i.fill(),H!==0&&i.stroke()}i.restore()},C=function(M,P,O){$l(i,O.text,M,P+w/2,d,{strikethrough:O.hidden,textAlign:u.textAlign(O.textAlign)})},k=this.isHorizontal(),R=this._computeTitleHeight();k?v={x:Cn(s,this.left+f,this.right-r[0]),y:this.top+f+R,line:0}:v={x:this.left+f,y:Cn(s,this.top+R+f,this.bottom-n[0].height),line:0},pT(this.ctx,e.textDirection);const A=w+f;this.legendItems.forEach((M,P)=>{i.strokeStyle=M.fontColor,i.fillStyle=M.fontColor;const O=i.measureText(M.text).width,H=u.textAlign(M.textAlign||(M.textAlign=a.textAlign)),B=b+m+O;let $=v.x,ee=v.y;u.setWidth(this.width),k?P>0&&$+B+f>this.right&&(ee=v.y+=A,v.line++,$=v.x=Cn(s,this.left+f,this.right-r[v.line])):P>0&&ee+A>this.bottom&&($=v.x=$+n[v.line].width+f,v.line++,ee=v.y=Cn(s,this.top+R+f,this.bottom-n[v.line].height));const re=u.x($);if(x(re,ee,M),$=qB(H,$+b+m,k?$+B:this.right,e.rtl),C(u.x($),ee,M),k)v.x+=B+f;else if(typeof M.text!="string"){const he=d.lineHeight;v.y+=PT(M,he)+f}else v.y+=A}),gT(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=Dn(n.font),i=Dr(n.padding);if(!n.display)return;const s=ro(e.rtl,this.left,this.width),a=this.ctx,c=n.position,u=r.size/2,d=i.top+u;let f,p=this.left,m=this.width;if(this.isHorizontal())m=Math.max(...this.lineWidths),f=this.top+d,p=Cn(e.align,p,this.right-m);else{const b=this.columnSizes.reduce((_,w)=>Math.max(_,w.height),0);f=d+Cn(e.align,this.top,this.bottom-b-e.labels.padding-this._computeTitleHeight())}const v=Cn(c,p,p+m);a.textAlign=s.textAlign(ev(c)),a.textBaseline="middle",a.strokeStyle=n.color,a.fillStyle=n.color,a.font=r.string,$l(a,n.text,v,f,r)}_computeTitleHeight(){const e=this.options.title,n=Dn(e.font),r=Dr(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,i,s;if(ea(e,this.left,this.right)&&ea(n,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],ea(e,i.left,i.left+i.width)&&ea(n,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!u$(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,s=a$(i,r);i&&!s&&Ct(n.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&Ct(n.onHover,[e,r,this],this)}else r&&Ct(n.onClick,[e,r,this],this)}}function o$(t,e,n,r,i){const s=l$(r,t,e,n),a=c$(i,r,e.lineHeight);return{itemWidth:s,itemHeight:a}}function l$(t,e,n,r){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((s,a)=>s.length>a.length?s:a)),e+n.size/2+r.measureText(i).width}function c$(t,e,n){let r=t;return typeof e.text!="string"&&(r=PT(e,n)),r}function PT(t,e){const n=t.text?t.text.length:0;return e*n}function u$(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var d$={id:"legend",_element:uw,start(t,e,n){const r=t.legend=new uw({ctx:t.ctx,options:n,chart:t});Cr.configure(t,r,n),Cr.addBox(t,r)},stop(t){Cr.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;Cr.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:a,borderRadius:c}}=t.legend.options;return t._getSortedDatasetMetas().map(u=>{const d=u.controller.getStyle(n?0:void 0),f=Dr(d.borderWidth);return{text:e[u.index].label,fillStyle:d.backgroundColor,fontColor:s,hidden:!u.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(f.width+f.height)/4,strokeStyle:d.borderColor,pointStyle:r||d.pointStyle,rotation:d.rotation,textAlign:i||d.textAlign,borderRadius:a&&(c||d.borderRadius),datasetIndex:u.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class LT extends Ds{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const i=an(r.text)?r.text.length:1;this._padding=Dr(r.padding);const s=i*Dn(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:i,right:s,options:a}=this,c=a.align;let u=0,d,f,p;return this.isHorizontal()?(f=Cn(c,r,s),p=n+e,d=s-r):(a.position==="left"?(f=r+e,p=Cn(c,i,n),u=pt*-.5):(f=s-e,p=Cn(c,n,i),u=pt*.5),d=i-n),{titleX:f,titleY:p,maxWidth:d,rotation:u}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=Dn(n.font),s=r.lineHeight/2+this._padding.top,{titleX:a,titleY:c,maxWidth:u,rotation:d}=this._drawArgs(s);$l(e,n.text,0,0,r,{color:n.color,maxWidth:u,rotation:d,textAlign:ev(n.align),textBaseline:"middle",translation:[a,c]})}}function f$(t,e){const n=new LT({ctx:t.ctx,options:e,chart:t});Cr.configure(t,n,e),Cr.addBox(t,n),t.titleBlock=n}var h$={id:"title",_element:LT,start(t,e,n){f$(t,n)},stop(t){const e=t.titleBlock;Cr.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;Cr.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const pl={average(t){if(!t.length)return!1;let e,n,r=new Set,i=0,s=0;for(e=0,n=t.length;e<n;++e){const c=t[e].element;if(c&&c.hasValue()){const u=c.tooltipPosition();r.add(u.x),i+=u.y,++s}}return s===0||r.size===0?!1:{x:[...r].reduce((c,u)=>c+u)/r.size,y:i/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,a,c;for(s=0,a=t.length;s<a;++s){const u=t[s].element;if(u&&u.hasValue()){const d=u.getCenterPoint(),f=Ig(e,d);f<i&&(i=f,c=u)}}if(c){const u=c.tooltipPosition();n=u.x,r=u.y}return{x:n,y:r}}};function Zr(t,e){return e&&(an(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Si(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function p$(t,e){const{element:n,datasetIndex:r,index:i}=e,s=t.getDatasetMeta(r).controller,{label:a,value:c}=s.getLabelAndValue(i);return{chart:t,label:a,parsed:s.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:c,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function dw(t,e){const n=t.chart.ctx,{body:r,footer:i,title:s}=t,{boxWidth:a,boxHeight:c}=e,u=Dn(e.bodyFont),d=Dn(e.titleFont),f=Dn(e.footerFont),p=s.length,m=i.length,v=r.length,b=Dr(e.padding);let _=b.height,w=0,x=r.reduce((R,A)=>R+A.before.length+A.lines.length+A.after.length,0);if(x+=t.beforeBody.length+t.afterBody.length,p&&(_+=p*d.lineHeight+(p-1)*e.titleSpacing+e.titleMarginBottom),x){const R=e.displayColors?Math.max(c,u.lineHeight):u.lineHeight;_+=v*R+(x-v)*u.lineHeight+(x-1)*e.bodySpacing}m&&(_+=e.footerMarginTop+m*f.lineHeight+(m-1)*e.footerSpacing);let C=0;const k=function(R){w=Math.max(w,n.measureText(R).width+C)};return n.save(),n.font=d.string,ht(t.title,k),n.font=u.string,ht(t.beforeBody.concat(t.afterBody),k),C=e.displayColors?a+2+e.boxPadding:0,ht(r,R=>{ht(R.before,k),ht(R.lines,k),ht(R.after,k)}),C=0,n.font=f.string,ht(t.footer,k),n.restore(),w+=b.width,{width:w,height:_}}function g$(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function m$(t,e,n,r){const{x:i,width:s}=r,a=n.caretSize+n.caretPadding;if(t==="left"&&i+s+a>e.width||t==="right"&&i-s-a<0)return!0}function v$(t,e,n,r){const{x:i,width:s}=n,{width:a,chartArea:{left:c,right:u}}=t;let d="center";return r==="center"?d=i<=(c+u)/2?"left":"right":i<=s/2?d="left":i>=a-s/2&&(d="right"),m$(d,t,e,n)&&(d="center"),d}function fw(t,e,n){const r=n.yAlign||e.yAlign||g$(t,n);return{xAlign:n.xAlign||e.xAlign||v$(t,e,n,r),yAlign:r}}function y$(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function b$(t,e,n){let{y:r,height:i}=t;return e==="top"?r+=n:e==="bottom"?r-=i+n:r-=i/2,r}function hw(t,e,n,r){const{caretSize:i,caretPadding:s,cornerRadius:a}=t,{xAlign:c,yAlign:u}=n,d=i+s,{topLeft:f,topRight:p,bottomLeft:m,bottomRight:v}=kl(a);let b=y$(e,c);const _=b$(e,u,d);return u==="center"?c==="left"?b+=d:c==="right"&&(b-=d):c==="left"?b-=Math.max(f,m)+i:c==="right"&&(b+=Math.max(p,v)+i),{x:Pn(b,0,r.width-e.width),y:Pn(_,0,r.height-e.height)}}function Wu(t,e,n){const r=Dr(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function pw(t){return Zr([],Si(t))}function _$(t,e,n){return ba(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function gw(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const FT={beforeTitle:bi,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:bi,beforeBody:bi,beforeLabel:bi,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return wt(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:bi,afterBody:bi,beforeFooter:bi,footer:bi,afterFooter:bi};function Yn(t,e,n,r){const i=t[e].call(n,r);return typeof i>"u"?FT[e].call(n,r):i}class mw extends Ds{static positioners=pl;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&n.options.animation&&r.animations,s=new _T(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=_$(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,i=Yn(r,"beforeTitle",this,e),s=Yn(r,"title",this,e),a=Yn(r,"afterTitle",this,e);let c=[];return c=Zr(c,Si(i)),c=Zr(c,Si(s)),c=Zr(c,Si(a)),c}getBeforeBody(e,n){return pw(Yn(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,i=[];return ht(e,s=>{const a={before:[],lines:[],after:[]},c=gw(r,s);Zr(a.before,Si(Yn(c,"beforeLabel",this,s))),Zr(a.lines,Yn(c,"label",this,s)),Zr(a.after,Si(Yn(c,"afterLabel",this,s))),i.push(a)}),i}getAfterBody(e,n){return pw(Yn(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,i=Yn(r,"beforeFooter",this,e),s=Yn(r,"footer",this,e),a=Yn(r,"afterFooter",this,e);let c=[];return c=Zr(c,Si(i)),c=Zr(c,Si(s)),c=Zr(c,Si(a)),c}_createItems(e){const n=this._active,r=this.chart.data,i=[],s=[],a=[];let c=[],u,d;for(u=0,d=n.length;u<d;++u)c.push(p$(this.chart,n[u]));return e.filter&&(c=c.filter((f,p,m)=>e.filter(f,p,m,r))),e.itemSort&&(c=c.sort((f,p)=>e.itemSort(f,p,r))),ht(c,f=>{const p=gw(e.callbacks,f);i.push(Yn(p,"labelColor",this,f)),s.push(Yn(p,"labelPointStyle",this,f)),a.push(Yn(p,"labelTextColor",this,f))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=a,this.dataPoints=c,c}update(e,n){const r=this.options.setContext(this.getContext()),i=this._active;let s,a=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const c=pl[r.position].call(this,i,this._eventPosition);a=this._createItems(r),this.title=this.getTitle(a,r),this.beforeBody=this.getBeforeBody(a,r),this.body=this.getBody(a,r),this.afterBody=this.getAfterBody(a,r),this.footer=this.getFooter(a,r);const u=this._size=dw(this,r),d=Object.assign({},c,u),f=fw(this.chart,r,d),p=hw(r,d,f,this.chart);this.xAlign=f.xAlign,this.yAlign=f.yAlign,s={opacity:1,x:p.x,y:p.y,width:u.width,height:u.height,caretX:c.x,caretY:c.y}}this._tooltipItems=a,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,i){const s=this.getCaretPosition(e,r,i);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,r){const{xAlign:i,yAlign:s}=this,{caretSize:a,cornerRadius:c}=r,{topLeft:u,topRight:d,bottomLeft:f,bottomRight:p}=kl(c),{x:m,y:v}=e,{width:b,height:_}=n;let w,x,C,k,R,A;return s==="center"?(R=v+_/2,i==="left"?(w=m,x=w-a,k=R+a,A=R-a):(w=m+b,x=w+a,k=R-a,A=R+a),C=w):(i==="left"?x=m+Math.max(u,f)+a:i==="right"?x=m+b-Math.max(d,p)-a:x=this.caretX,s==="top"?(k=v,R=k-a,w=x-a,C=x+a):(k=v+_,R=k+a,w=x+a,C=x-a),A=k),{x1:w,x2:x,x3:C,y1:k,y2:R,y3:A}}drawTitle(e,n,r){const i=this.title,s=i.length;let a,c,u;if(s){const d=ro(r.rtl,this.x,this.width);for(e.x=Wu(this,r.titleAlign,r),n.textAlign=d.textAlign(r.titleAlign),n.textBaseline="middle",a=Dn(r.titleFont),c=r.titleSpacing,n.fillStyle=r.titleColor,n.font=a.string,u=0;u<s;++u)n.fillText(i[u],d.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+c,u+1===s&&(e.y+=r.titleMarginBottom-c)}}_drawColorBox(e,n,r,i,s){const a=this.labelColors[r],c=this.labelPointStyles[r],{boxHeight:u,boxWidth:d}=s,f=Dn(s.bodyFont),p=Wu(this,"left",s),m=i.x(p),v=u<f.lineHeight?(f.lineHeight-u)/2:0,b=n.y+v;if(s.usePointStyle){const _={radius:Math.min(d,u)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},w=i.leftForLtr(m,d)+d/2,x=b+u/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,Lg(e,_,w,x),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,Lg(e,_,w,x)}else{e.lineWidth=Qe(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;const _=i.leftForLtr(m,d),w=i.leftForLtr(i.xPlus(m,1),d-2),x=kl(a.borderRadius);Object.values(x).some(C=>C!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,Fg(e,{x:_,y:b,w:d,h:u,radius:x}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),Fg(e,{x:w,y:b+1,w:d-2,h:u-2,radius:x}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(_,b,d,u),e.strokeRect(_,b,d,u),e.fillStyle=a.backgroundColor,e.fillRect(w,b+1,d-2,u-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:i}=this,{bodySpacing:s,bodyAlign:a,displayColors:c,boxHeight:u,boxWidth:d,boxPadding:f}=r,p=Dn(r.bodyFont);let m=p.lineHeight,v=0;const b=ro(r.rtl,this.x,this.width),_=function(O){n.fillText(O,b.x(e.x+v),e.y+m/2),e.y+=m+s},w=b.textAlign(a);let x,C,k,R,A,M,P;for(n.textAlign=a,n.textBaseline="middle",n.font=p.string,e.x=Wu(this,w,r),n.fillStyle=r.bodyColor,ht(this.beforeBody,_),v=c&&w!=="right"?a==="center"?d/2+f:d+2+f:0,R=0,M=i.length;R<M;++R){for(x=i[R],C=this.labelTextColors[R],n.fillStyle=C,ht(x.before,_),k=x.lines,c&&k.length&&(this._drawColorBox(n,e,R,b,r),m=Math.max(p.lineHeight,u)),A=0,P=k.length;A<P;++A)_(k[A]),m=p.lineHeight;ht(x.after,_)}v=0,m=p.lineHeight,ht(this.afterBody,_),e.y-=s}drawFooter(e,n,r){const i=this.footer,s=i.length;let a,c;if(s){const u=ro(r.rtl,this.x,this.width);for(e.x=Wu(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=u.textAlign(r.footerAlign),n.textBaseline="middle",a=Dn(r.footerFont),n.fillStyle=r.footerColor,n.font=a.string,c=0;c<s;++c)n.fillText(i[c],u.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+r.footerSpacing}}drawBackground(e,n,r,i){const{xAlign:s,yAlign:a}=this,{x:c,y:u}=e,{width:d,height:f}=r,{topLeft:p,topRight:m,bottomLeft:v,bottomRight:b}=kl(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(c+p,u),a==="top"&&this.drawCaret(e,n,r,i),n.lineTo(c+d-m,u),n.quadraticCurveTo(c+d,u,c+d,u+m),a==="center"&&s==="right"&&this.drawCaret(e,n,r,i),n.lineTo(c+d,u+f-b),n.quadraticCurveTo(c+d,u+f,c+d-b,u+f),a==="bottom"&&this.drawCaret(e,n,r,i),n.lineTo(c+v,u+f),n.quadraticCurveTo(c,u+f,c,u+f-v),a==="center"&&s==="left"&&this.drawCaret(e,n,r,i),n.lineTo(c,u+p),n.quadraticCurveTo(c,u,c+p,u),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const a=pl[e.position].call(this,this._active,this._eventPosition);if(!a)return;const c=this._size=dw(this,e),u=Object.assign({},a,this._size),d=fw(n,e,u),f=hw(e,u,d,n);(i._to!==f.x||s._to!==f.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=c.width,this.height=c.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,f))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const a=Dr(n.padding),c=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&c&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,i,n),pT(e,n.textDirection),s.y+=a.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),gT(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,i=e.map(({datasetIndex:c,index:u})=>{const d=this.chart.getDatasetMeta(c);if(!d)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:d.data[u],index:u}}),s=!Id(r,i),a=this._positionChanged(i,n);(s||a)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],a=this._getActiveElements(e,s,n,r),c=this._positionChanged(a,e),u=n||!Id(a,s)||c;return u&&(this._active=a,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),u}_getActiveElements(e,n,r,i){const s=this.options;if(e.type==="mouseout")return[];if(!i)return n.filter(c=>this.chart.data.datasets[c.datasetIndex]&&this.chart.getDatasetMeta(c.datasetIndex).controller.getParsed(c.index)!==void 0);const a=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&a.reverse(),a}_positionChanged(e,n){const{caretX:r,caretY:i,options:s}=this,a=pl[s.position].call(this,e,n);return a!==!1&&(r!==a.x||i!==a.y)}}var S$={id:"tooltip",_element:mw,positioners:pl,afterInit(t,e,n){n&&(t.tooltip=new mw({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:FT},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const w$=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function x$(t,e,n,r){const i=t.indexOf(e);if(i===-1)return w$(t,e,n,r);const s=t.lastIndexOf(e);return i!==s?n:i}const E$=(t,e)=>t===null?null:Pn(Math.round(t),0,e);function vw(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class C$ extends _o{static id="category";static defaults={ticks:{callback:vw}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:i,label:s}of n)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(wt(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:x$(r,e,$e(n,e),this._addedLabels),E$(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let a=e;a<=n;a++)i.push({value:a});return i}getLabelForValue(e){return vw.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function T$(t,e){const n=[],{bounds:i,step:s,min:a,max:c,precision:u,count:d,maxTicks:f,maxDigits:p,includeBounds:m}=t,v=s||1,b=f-1,{min:_,max:w}=e,x=!wt(a),C=!wt(c),k=!wt(d),R=(w-_)/(p+1);let A=mS((w-_)/b/v)*v,M,P,O,H;if(A<1e-14&&!x&&!C)return[{value:_},{value:w}];H=Math.ceil(w/A)-Math.floor(_/A),H>b&&(A=mS(H*A/b/v)*v),wt(u)||(M=Math.pow(10,u),A=Math.ceil(A*M)/M),i==="ticks"?(P=Math.floor(_/A)*A,O=Math.ceil(w/A)*A):(P=_,O=w),x&&C&&s&&LB((c-a)/s,A/1e3)?(H=Math.round(Math.min((c-a)/A,f)),A=(c-a)/H,P=a,O=c):k?(P=x?a:P,O=C?c:O,H=d-1,A=(O-P)/H):(H=(O-P)/A,Cl(H,Math.round(H),A/1e3)?H=Math.round(H):H=Math.ceil(H));const B=Math.max(vS(A),vS(P));M=Math.pow(10,wt(u)?B:u),P=Math.round(P*M)/M,O=Math.round(O*M)/M;let $=0;for(x&&(m&&P!==a?(n.push({value:a}),P<a&&$++,Cl(Math.round((P+$*A)*M)/M,a,yw(a,R,t))&&$++):P<a&&$++);$<H;++$){const ee=Math.round((P+$*A)*M)/M;if(C&&ee>c)break;n.push({value:ee})}return C&&m&&O!==c?n.length&&Cl(n[n.length-1].value,c,yw(c,R,t))?n[n.length-1].value=c:n.push({value:c}):(!C||O===c)&&n.push({value:O}),n}function yw(t,e,{horizontal:n,minRotation:r}){const i=Ai(r),s=(n?Math.sin(i):Math.cos(i))||.001,a=.75*e*(""+t).length;return Math.min(e/s,a)}class D$ extends _o{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return wt(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const a=u=>i=n?i:u,c=u=>s=r?s:u;if(e){const u=lo(i),d=lo(s);u<0&&d<0?c(0):u>0&&d>0&&a(0)}if(i===s){let u=s===0?1:Math.abs(s*.05);c(s+u),e||a(i-u)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,a=T$(i,s);return e.bounds==="ticks"&&FB(a,this,"value"),e.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-n)/Math.max(e.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return nv(e,this.chart.options.locale,this.options.ticks.format)}}class k$ extends D${static id="linear";static defaults={ticks:{callback:oT.formatters.numeric}};determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=kn(e)?e:0,this.max=kn(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=Ai(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const Ef={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Xn=Object.keys(Ef);function bw(t,e){return t-e}function _w(t,e){if(wt(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:s}=t._parseOpts;let a=e;return typeof r=="function"&&(a=r(a)),kn(a)||(a=typeof r=="string"?n.parse(a,r):n.parse(a)),a===null?null:(i&&(a=i==="week"&&(Bl(s)||s===!0)?n.startOf(a,"isoWeek",s):n.startOf(a,i)),+a)}function Sw(t,e,n,r){const i=Xn.length;for(let s=Xn.indexOf(t);s<i-1;++s){const a=Ef[Xn[s]],c=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((n-e)/(c*a.size))<=r)return Xn[s]}return Xn[i-1]}function A$(t,e,n,r,i){for(let s=Xn.length-1;s>=Xn.indexOf(n);s--){const a=Xn[s];if(Ef[a].common&&t._adapter.diff(i,r,a)>=e-1)return a}return Xn[n?Xn.indexOf(n):0]}function R$(t){for(let e=Xn.indexOf(t)+1,n=Xn.length;e<n;++e)if(Ef[Xn[e]].common)return Xn[e]}function ww(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:i}=Jm(n,e),s=n[r]>=e?n[r]:n[i];t[s]=!0}}function O$(t,e,n,r){const i=t._adapter,s=+i.startOf(e[0].value,r),a=e[e.length-1].value;let c,u;for(c=s;c<=a;c=+i.add(c,1,r))u=n[c],u>=0&&(e[u].major=!0);return e}function xw(t,e,n){const r=[],i={},s=e.length;let a,c;for(a=0;a<s;++a)c=e[a],i[c]=a,r.push({value:c,major:!1});return s===0||!n?r:O$(t,r,i,n)}class Ew extends _o{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),i=this._adapter=new pV._date(e.adapters.date);i.init(n),El(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:_w(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:i,max:s,minDefined:a,maxDefined:c}=this.getUserBounds();function u(d){!a&&!isNaN(d.min)&&(i=Math.min(i,d.min)),!c&&!isNaN(d.max)&&(s=Math.max(s,d.max))}(!a||!c)&&(u(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&u(this.getMinMax(!1))),i=kn(i)&&!isNaN(i)?i:+n.startOf(Date.now(),r),s=kn(s)&&!isNaN(s)?s:+n.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,a=this.max,c=BB(i,s,a);return this._unit=n.unit||(r.autoSkip?Sw(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):A$(this,c.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:R$(this._unit),this.initOffsets(i),e.reverse&&c.reverse(),xw(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,i,s;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?n=1-i:n=(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?r=s:r=(s-this.getDecimalForValue(e[e.length-2]))/2);const a=e.length<3?.5:.25;n=Pn(n,0,a),r=Pn(r,0,a),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,i=this.options,s=i.time,a=s.unit||Sw(s.minUnit,n,r,this._getLabelCapacity(n)),c=$e(i.ticks.stepSize,1),u=a==="week"?s.isoWeekday:!1,d=Bl(u)||u===!0,f={};let p=n,m,v;if(d&&(p=+e.startOf(p,"isoWeek",u)),p=+e.startOf(p,d?"day":a),e.diff(r,n,a)>1e5*c)throw new Error(n+" and "+r+" are too far apart with stepSize of "+c+" "+a);const b=i.ticks.source==="data"&&this.getDataTimestamps();for(m=p,v=0;m<r;m=+e.add(m,c,a),v++)ww(f,m,b);return(m===r||i.bounds==="ticks"||v===1)&&ww(f,m,b),Object.keys(f).sort(bw).map(_=>+_)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const i=this.options.time.displayFormats,s=this._unit,a=n||i[s];return this._adapter.format(e,a)}_tickFormatFunction(e,n,r,i){const s=this.options,a=s.ticks.callback;if(a)return Ct(a,[e,n,r],this);const c=s.time.displayFormats,u=this._unit,d=this._majorUnit,f=u&&c[u],p=d&&c[d],m=r[n],v=d&&p&&m&&m.major;return this._adapter.format(e,i||(v?p:f))}generateTickLabels(e){let n,r,i;for(n=0,r=e.length;n<r;++n)i=e[n],i.label=this._tickFormatFunction(i.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,i=Ai(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(i),a=Math.sin(i),c=this._resolveTickFontOptions(0).size;return{w:r*s+c*a,h:r*a+c*s}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,i=r[n.unit]||r.millisecond,s=this._tickFormatFunction(e,0,xw(this,[e],this._majorUnit),i),a=this._getLabelSize(s),c=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return c>0?c:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,r=i.length;n<r;++n)e=e.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const i=this.getLabels();for(n=0,r=i.length;n<r;++n)e.push(_w(this,i[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return VB(e.sort(bw))}}function Vu(t,e,n){let r=0,i=t.length-1,s,a,c,u;n?(e>=t[r].pos&&e<=t[i].pos&&({lo:r,hi:i}=ta(t,"pos",e)),{pos:s,time:c}=t[r],{pos:a,time:u}=t[i]):(e>=t[r].time&&e<=t[i].time&&({lo:r,hi:i}=ta(t,"time",e)),{time:s,pos:c}=t[r],{time:a,pos:u}=t[i]);const d=a-s;return d?c+(u-c)*(e-s)/d:c}class i3 extends Ew{static id="timeseries";static defaults=Ew.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Vu(n,this.min),this._tableRange=Vu(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,i=[],s=[];let a,c,u,d,f;for(a=0,c=e.length;a<c;++a)d=e[a],d>=n&&d<=r&&i.push(d);if(i.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(a=0,c=i.length;a<c;++a)f=i[a+1],u=i[a-1],d=i[a],Math.round((f+u)/2)!==d&&s.push({time:d,pos:a/(c-1)});return s}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(Vu(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return Vu(this._table,r*this._tableRange+this._minPos,!0)}}const jT="label";function Cw(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function M$(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function HT(t,e){t.labels=e}function zT(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:jT;const r=[];t.datasets=e.map(i=>{const s=t.datasets.find(a=>a[n]===i[n]);return!s||!i.data||r.includes(s)?{...i}:(r.push(s),Object.assign(s,i),s)})}function N$(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:jT;const n={labels:[],datasets:[]};return HT(n,t.labels),zT(n,t.datasets,e),n}function I$(t,e){const{height:n=150,width:r=300,redraw:i=!1,datasetIdKey:s,type:a,data:c,options:u,plugins:d=[],fallbackContent:f,updateMode:p,...m}=t,v=D.useRef(null),b=D.useRef(null),_=()=>{v.current&&(b.current=new Sf(v.current,{type:a,data:N$(c,s),options:u&&{...u},plugins:d}),Cw(e,b.current))},w=()=>{Cw(e,null),b.current&&(b.current.destroy(),b.current=null)};return D.useEffect(()=>{!i&&b.current&&u&&M$(b.current,u)},[i,u]),D.useEffect(()=>{!i&&b.current&&HT(b.current.config.data,c.labels)},[i,c.labels]),D.useEffect(()=>{!i&&b.current&&c.datasets&&zT(b.current.config.data,c.datasets,s)},[i,c.datasets]),D.useEffect(()=>{b.current&&(i?(w(),setTimeout(_)):b.current.update(p))},[i,u,c.labels,c.datasets,p]),D.useEffect(()=>{b.current&&(w(),setTimeout(_))},[a]),D.useEffect(()=>(_(),()=>w()),[]),Q.createElement("canvas",{ref:v,role:"img",height:n,width:r,...m},f)}const P$=D.forwardRef(I$);function UT(t,e){return Sf.register(e),D.forwardRef((n,r)=>Q.createElement(P$,{...n,ref:r,type:t}))}const L$=UT("line",fV),F$=UT("pie",hV);Sf.register(C$,k$,H5,wf,h$,S$,d$,A5,s$);function j$(){const{data:t=[],isLoading:e,error:n}=Jd(),{data:r=[],isLoading:i,error:s}=ef(),{isInitialized:a}=bn(),{init:c,cleanup:u}=xs(),d=e||i;D.useEffect(()=>(a||c(),()=>{u()}),[c,a,u]);const f=D.useMemo(()=>{if(d)return{};const b=t.reduce((q,Y)=>{const F=Y.work_center||"Unknown";return q[F]||(q[F]={[Ti.ACTIVE]:0,[Ti.INACTIVE]:0,[Ti.MAINTENANCE]:0}),q[F][Y.status]=(q[F][Y.status]||0)+1,q},{}),_=new Date,w=new Date(_),x=_.getDay(),C=x===0?6:x-1;w.setUTCDate(_.getUTCDate()-C),w.setUTCHours(0,0,0,0);const k=r.filter(q=>q.completion_date?new Date(q.completion_date)>=w:!1).length,R=r.filter(q=>q.status==="IN PROGRESS"||q.status==="SCHEDULED").length,A=r.filter(q=>q.delivery_date?new Date(q.delivery_date)<_&&(q.quantity_completed||0)<(q.quantity||0):!1).length,M=t.filter(q=>q.status===Ti.ACTIVE).length,P={},O=new Date(_);O.setUTCDate(_.getUTCDate()-7);const H=new Date(_);H.setUTCDate(_.getUTCDate()+7),r.forEach(q=>{if(q.scheduled_start_time){const Y=new Date(q.scheduled_start_time);if(Y>=O&&Y<=H){const F=Y.toISOString().split("T")[0];P[F]=(P[F]||0)+1}}});const B=r.filter(q=>q.scheduled_start_time?new Date(q.scheduled_start_time)>=w:!1),$=B.filter(q=>q.cost&&q.cost>0).map(q=>q.cost),ee=B.filter(q=>q.duration&&q.duration>0).map(q=>q.duration),re=$.length>0?$.reduce((q,Y)=>q+Y,0)/$.length:0,he=ee.length>0?ee.reduce((q,Y)=>q+Y,0)/ee.length:0,pe={},ie={},oe=["STAMPA","CONFEZIONAMENTO"],K=["ZANICA","BUSTO_GAROLFO"];return oe.forEach(q=>{const Y=q.toLowerCase();pe[Y]={},ie[Y]={},K.forEach(F=>{const G=F==="BUSTO_GAROLFO"?"busto_garolfo":F.toLowerCase(),ne=r.filter(se=>!se.work_center||!se.department?!1:se.work_center===F&&se.department===q),le=ne.filter(se=>se.cost&&se.cost>0).map(se=>se.cost),ue=le.length>0?le.reduce((se,Me)=>se+Me,0)/le.length:0,ce=ne.filter(se=>se.duration&&se.duration>0).map(se=>se.duration),Ee=ce.length>0?ce.reduce((se,Me)=>se+Me,0)/ce.length:0;pe[Y][G]=ue,ie[Y][G]=Ee})}),{machinesByWorkCenter:b,completedThisWeek:k,tasksInWip:R,delayedTasks:A,activeMachines:M,totalMachines:t.length,totalOrders:r.length,tasksPerDay:P,avgWeeklyCost:re,avgWeeklyDuration:he,weeklyOrdersCount:B.length,costMatrix:pe,durationMatrix:ie}},[t,r,d]),p=D.useMemo(()=>{if(!f.tasksPerDay)return null;const b=[],_=new Date;for(let w=-7;w<=7;w++){const x=new Date(_);x.setUTCDate(_.getUTCDate()+w);const C=x.toISOString().split("T")[0];b.push(C)}return{labels:b.map(w=>{const x=new Date(w);return pn(new Date(x),"dd/MM")}),datasets:[{label:"Lavori Iniziati",data:b.map(w=>f.tasksPerDay[w]||0),borderColor:"rgb(37, 99, 235)",backgroundColor:"rgba(37, 99, 235, 0.1)",tension:.4,borderWidth:2,pointBackgroundColor:"rgb(37, 99, 235)",pointBorderColor:"rgb(37, 99, 235)",pointRadius:4,pointHoverRadius:6,fill:!0}]}},[f.tasksPerDay]),m={responsive:!0,maintainAspectRatio:!1,interaction:{intersect:!1,mode:"index"},plugins:{legend:{display:!1},title:{display:!1},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"white",bodyColor:"white",borderColor:"rgba(255, 255, 255, 0.1)",borderWidth:1,cornerRadius:8,displayColors:!1}},scales:{y:{beginAtZero:!0,grid:{color:"rgba(156, 163, 175, 0.2)",drawBorder:!1},ticks:{stepSize:1,color:"rgba(156, 163, 175, 0.8)",font:{size:12,family:"Inter, sans-serif"},padding:8}},x:{grid:{color:"rgba(156, 163, 175, 0.2)",drawBorder:!1},ticks:{color:"rgba(156, 163, 175, 0.8)",font:{size:12,family:"Inter, sans-serif"},padding:8}}},elements:{point:{hoverBorderWidth:3}}},v={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{padding:10,usePointStyle:!0,font:{size:10}}}}};return d?E.jsx("div",{className:"p-1 bg-card rounded shadow-sm border",children:E.jsx("div",{className:"text-center py-1 text-muted-foreground text-[10px]",children:"Caricamento dashboard..."})}):n||s?E.jsx("div",{className:"p-1 bg-card rounded shadow-sm border",children:E.jsxs("div",{className:"text-center py-1 text-destructive text-[10px]",children:["Errore nel caricamento dei dati: ",n?.message||s?.message]})}):E.jsxs("div",{className:"space-y-6",children:[E.jsx("div",{className:"flex justify-between items-center",children:E.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Dashboard Produzione"})}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[E.jsxs(vr,{className:"p-6",children:[E.jsx(yr,{className:"pb-2",children:E.jsx(br,{className:"text-sm font-medium text-muted-foreground",children:"Macchine Totali"})}),E.jsxs(_r,{children:[E.jsx("div",{className:"text-3xl font-bold text-foreground",children:f.totalMachines}),E.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Attive: ",f.activeMachines]})]})]}),E.jsxs(vr,{className:"p-6",children:[E.jsx(yr,{className:"pb-2",children:E.jsx(br,{className:"text-sm font-medium text-muted-foreground",children:"Ordini Totali"})}),E.jsxs(_r,{children:[E.jsx("div",{className:"text-3xl font-bold text-foreground",children:f.totalOrders}),E.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Totali nel sistema"})]})]}),E.jsxs(vr,{className:"p-6",children:[E.jsx(yr,{className:"pb-2",children:E.jsx(br,{className:"text-sm font-medium text-muted-foreground",children:"Completati Questa Settimana"})}),E.jsxs(_r,{children:[E.jsx("div",{className:"text-3xl font-bold text-foreground",children:f.completedThisWeek}),E.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Lavori completati"})]})]}),E.jsxs(vr,{className:"p-6",children:[E.jsx(yr,{className:"pb-2",children:E.jsx(br,{className:"text-sm font-medium text-muted-foreground",children:"Lavori in Corso"})}),E.jsxs(_r,{children:[E.jsx("div",{className:"text-3xl font-bold text-foreground",children:f.tasksInWip}),E.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"In progress/scheduled"})]})]}),E.jsxs(vr,{className:"p-6 border-destructive/20 bg-destructive/5",children:[E.jsx(yr,{className:"pb-2",children:E.jsx(br,{className:"text-sm font-medium text-destructive",children:"Lavori Ritardati"})}),E.jsxs(_r,{children:[E.jsx("div",{className:"text-3xl font-bold text-destructive",children:f.delayedTasks}),E.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Oltre la scadenza"})]})]})]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[E.jsxs(vr,{className:"p-6",children:[E.jsx(yr,{className:"pb-2",children:E.jsx(br,{className:"text-sm font-medium text-muted-foreground",children:"Ordini Settimanali"})}),E.jsxs(_r,{children:[E.jsx("div",{className:"text-3xl font-bold text-foreground",children:f.weeklyOrdersCount}),E.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Questa Settimana"})]})]}),E.jsxs(vr,{className:"p-6",children:[E.jsx(yr,{className:"pb-2",children:E.jsx(br,{className:"text-sm font-medium text-muted-foreground",children:"Costo Medio"})}),E.jsxs(_r,{children:[E.jsxs("div",{className:"text-3xl font-bold text-foreground",children:["",f.avgWeeklyCost.toFixed(2)]}),E.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Per Lavoro Questa Settimana"})]})]}),E.jsxs(vr,{className:"p-6",children:[E.jsx(yr,{className:"pb-2",children:E.jsx(br,{className:"text-sm font-medium text-muted-foreground",children:"Durata Media"})}),E.jsxs(_r,{children:[E.jsxs("div",{className:"text-3xl font-bold text-foreground",children:[f.avgWeeklyDuration.toFixed(1),"h"]}),E.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Per Lavoro Questa Settimana"})]})]})]}),E.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[E.jsxs(vr,{children:[E.jsx(yr,{children:E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx(br,{children:"Lavori Iniziati per Giorno (14 giorni)"}),E.jsx("div",{className:"flex items-center gap-3 text-xs",children:E.jsxs("div",{className:"flex items-center gap-1",children:[E.jsx("span",{className:"inline-block w-3 h-1 bg-primary"})," Lavori"]})})]})}),E.jsx(_r,{children:E.jsx("div",{className:"h-64",children:p&&E.jsx(L$,{data:p,options:m,height:256})})})]}),E.jsxs(vr,{children:[E.jsx(yr,{children:E.jsx(br,{children:"Macchine per Centro di Lavoro e Stato"})}),E.jsx(_r,{children:E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(f.machinesByWorkCenter||{}).map(([b,_])=>{const w={labels:Object.keys(_).map(x=>x.charAt(0).toUpperCase()+x.slice(1).toLowerCase()),datasets:[{data:Object.values(_),backgroundColor:["rgba(37, 99, 235, 0.8)","rgba(107, 114, 128, 0.8)","rgba(156, 163, 175, 0.8)"],borderColor:["rgba(37, 99, 235, 1)","rgba(107, 114, 128, 1)","rgba(156, 163, 175, 1)"],borderWidth:2}]};return E.jsxs("div",{className:"text-center",children:[E.jsx("h4",{className:"text-sm font-medium text-foreground mb-2",children:b}),E.jsx("div",{className:"h-32",children:E.jsx(F$,{data:w,options:v,height:150})}),E.jsx("div",{className:"text-xs text-muted-foreground mt-2",children:Object.entries(_).map(([x,C])=>E.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[E.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:x==="ACTIVE"?"rgba(37, 99, 235, 0.8)":x==="INACTIVE"?"rgba(107, 114, 128, 0.8)":"rgba(156, 163, 175, 0.8)"}}),E.jsxs("span",{children:[x,": ",C]})]},x))})]},b)})})})]})]}),E.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[E.jsxs(vr,{children:[E.jsx(yr,{children:E.jsx(br,{children:"Costo Medio per Centro di Lavoro e Reparto"})}),E.jsx(_r,{children:E.jsx("div",{className:"overflow-x-auto",children:E.jsxs("table",{className:"w-full",children:[E.jsx("thead",{children:E.jsxs("tr",{className:"border-b border-border",children:[E.jsx("th",{className:"text-left py-2 px-2 text-sm font-medium text-muted-foreground"}),E.jsx("th",{className:"text-left py-2 px-2 text-sm font-medium text-muted-foreground",children:"ZANICA"}),E.jsx("th",{className:"text-left py-2 px-2 text-sm font-medium text-muted-foreground",children:"BUSTO GAROLFO"})]})}),E.jsxs("tbody",{children:[E.jsxs("tr",{className:"border-b border-border",children:[E.jsx("td",{className:"py-2 px-2 text-sm font-medium text-muted-foreground",children:"STAMPA"}),E.jsxs("td",{className:"py-2 px-2 text-sm text-foreground",children:["",f.costMatrix?.stampa?.zanica?.toFixed(2)||"0.00"]}),E.jsxs("td",{className:"py-2 px-2 text-sm text-foreground",children:["",f.costMatrix?.stampa?.busto_garolfo?.toFixed(2)||"0.00"]})]}),E.jsxs("tr",{children:[E.jsx("td",{className:"py-2 px-2 text-sm font-medium text-muted-foreground",children:"CONFEZIONAMENTO"}),E.jsxs("td",{className:"py-2 px-2 text-sm text-foreground",children:["",f.costMatrix?.confezionamento?.zanica?.toFixed(2)||"0.00"]}),E.jsxs("td",{className:"py-2 px-2 text-sm text-foreground",children:["",f.costMatrix?.confezionamento?.busto_garolfo?.toFixed(2)||"0.00"]})]})]})]})})})]}),E.jsxs(vr,{children:[E.jsx(yr,{children:E.jsx(br,{children:"Durata Media per Centro di Lavoro e Reparto"})}),E.jsx(_r,{children:E.jsx("div",{className:"overflow-x-auto",children:E.jsxs("table",{className:"w-full",children:[E.jsx("thead",{children:E.jsxs("tr",{className:"border-b border-border",children:[E.jsx("th",{className:"text-left py-2 px-2 text-sm font-medium text-muted-foreground"}),E.jsx("th",{className:"text-left py-2 px-2 text-sm font-medium text-muted-foreground",children:"ZANICA"}),E.jsx("th",{className:"text-left py-2 px-2 text-sm font-medium text-muted-foreground",children:"BUSTO GAROLFO"})]})}),E.jsxs("tbody",{children:[E.jsxs("tr",{className:"border-b border-border",children:[E.jsx("td",{className:"py-2 px-2 text-sm font-medium text-muted-foreground",children:"STAMPA"}),E.jsxs("td",{className:"py-2 px-2 text-sm text-foreground",children:[f.durationMatrix?.stampa?.zanica?.toFixed(1)||"0.0","h"]}),E.jsxs("td",{className:"py-2 px-2 text-sm text-foreground",children:[f.durationMatrix?.stampa?.busto_garolfo?.toFixed(1)||"0.0","h"]})]}),E.jsxs("tr",{children:[E.jsx("td",{className:"py-2 px-2 text-sm font-medium text-muted-foreground",children:"CONFEZIONAMENTO"}),E.jsxs("td",{className:"py-2 px-2 text-sm text-foreground",children:[f.durationMatrix?.confezionamento?.zanica?.toFixed(1)||"0.0","h"]}),E.jsxs("td",{className:"py-2 px-2 text-sm text-foreground",children:[f.durationMatrix?.confezionamento?.busto_garolfo?.toFixed(1)||"0.0","h"]})]})]})]})})})]})]})]})}const Tw=({children:t,className:e="",disabled:n=!1,type:r="button",onClick:i,variant:s="default",size:a="default",...c})=>{const u="inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",d={default:"bg-primary text-primary-foreground hover:bg-primary/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground"},f={default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3"};return E.jsx("button",{type:r,disabled:n,onClick:i,className:`${u} ${d[s]} ${f[a]} ${e}`,...c,children:t})},Dw=({className:t="",type:e="text",...n})=>E.jsx("input",{type:e,className:`flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${t}`,...n});function H$({title:t,logo:e,subtitle:n,isLoading:r=!1,error:i,onSubmit:s,onValidate:a,labels:c={signIn:"Sign In",email:"Email",password:"Password",forgotPassword:"Forgot Password?",signUp:"Sign Up",noAccount:"Don't have an account?",signingIn:"Signing in..."},showForgotPassword:u=!1,showSignUp:d=!1,forgotPasswordUrl:f="/forgot-password",signUpUrl:p="/signup",demoCredentials:m,additionalFields:v}){const[b,_]=D.useState({email:"",password:"",...m||{}}),[w,x]=D.useState({}),C=M=>{const{name:P,value:O}=M.target;_(H=>({...H,[P]:O})),w[P]&&x(H=>({...H,[P]:""}))},k=async M=>{M.preventDefault();const P={};if(b.email||(P.email="Email is required"),b.password||(P.password="Password is required"),a){const O=a(b);Object.assign(P,O)}if(Object.keys(P).length>0){x(P);return}try{await s(b)}catch(O){console.error("Login error:",O)}},R=M=>w[M]?E.jsx("p",{className:"text-sm text-red-600 mt-1",children:w[M]}):null;return E.jsx("div",{className:"min-h-screen flex",children:E.jsxs("div",{className:"container relative grid flex-col items-center justify-center sm:max-w-none lg:grid-cols-2 lg:px-0",children:[E.jsxs("div",{className:"relative hidden h-full flex-col bg-muted p-10 text-white dark:border-r lg:flex",style:{background:"#18181b"},children:[E.jsx("div",{className:"absolute inset-0 bg-zinc-900"}),E.jsxs("div",{className:"relative z-20 flex items-center text-lg font-medium",children:[e&&E.jsx("img",{className:"h-6 mr-2",src:e,alt:t}),t]}),n&&E.jsx("div",{className:"relative z-20 mt-auto",children:E.jsx("p",{className:"text-lg",children:n})})]}),E.jsx("div",{className:"lg:p-8",children:E.jsxs("div",{className:"mx-auto flex w-full flex-col justify-center space-y-6 sm:w-[350px]",children:[E.jsxs("div",{className:"flex flex-col space-y-2 text-center lg:hidden",children:[e&&E.jsx("img",{className:"h-8 mx-auto",src:e,alt:t}),E.jsx("h1",{className:"text-xl font-semibold",children:t})]}),E.jsx("div",{className:"flex flex-col space-y-2 text-center",children:E.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:c.signIn})}),E.jsxs("form",{onSubmit:k,className:"space-y-8",children:[E.jsxs("div",{className:"space-y-2",children:[E.jsx("label",{htmlFor:"email",className:"block text-sm font-medium",children:c.email}),E.jsx(Dw,{id:"email",name:"email",type:"email",value:b.email,onChange:C,className:w.email?"border-red-500":"",disabled:r,autoComplete:"email"}),R("email")]}),E.jsxs("div",{className:"space-y-2",children:[E.jsx("label",{htmlFor:"password",className:"block text-sm font-medium",children:c.password}),E.jsx(Dw,{id:"password",name:"password",type:"password",value:b.password,onChange:C,className:w.password?"border-red-500":"",disabled:r,autoComplete:"current-password"}),R("password")]}),v&&E.jsx("div",{className:"space-y-4",children:typeof v=="function"?v({formData:b,handleChange:C,formErrors:w,getFieldError:R,isLoading:r}):Q.cloneElement(v,{formData:b,handleChange:C,formErrors:w,getFieldError:R,isLoading:r})}),i&&E.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:E.jsxs("div",{className:"flex",children:[E.jsx("div",{className:"flex-shrink-0",children:E.jsx("span",{className:"text-red-400",children:""})}),E.jsx("div",{className:"ml-3",children:E.jsx("p",{className:"text-sm text-red-800",children:i})})]})}),E.jsx(Tw,{type:"submit",className:"w-full cursor-pointer",disabled:r,children:r?c.signingIn:c.signIn})]}),u&&E.jsx("a",{href:f,className:"text-sm text-center hover:underline block",children:c.forgotPassword}),d&&E.jsxs("div",{className:"text-center space-y-4",children:[E.jsxs("div",{className:"relative",children:[E.jsx("div",{className:"absolute inset-0 flex items-center",children:E.jsx("div",{className:"w-full border-t border-gray-300"})}),E.jsx("div",{className:"relative flex justify-center text-sm",children:E.jsx("span",{className:"px-2 bg-background text-muted-foreground",children:c.noAccount})})]}),E.jsx("a",{href:p,children:E.jsx(Tw,{variant:"outline",className:"w-full",children:c.signUp})})]}),m&&typeof import.meta<"u"&&!1]})})]})})}function z$(){const[t,e]=D.useState(!1),{signIn:n,error:r}=Gd(),{setSelectedWorkCenter:i}=bn(),s=oi(),{handleAsync:a}=pa("LoginPage"),c=f=>{const p={};return f.workCenter||(p.workCenter="Centro di lavoro richiesto"),p},u=async f=>{e(!0),await a(async()=>{(await n(f.email,f.password)).error||(i(f.workCenter),s("/",{replace:!0}))},{context:"Login",fallbackMessage:"Accesso fallito. Riprova.",onFinally:()=>e(!1)})},d=({formData:f,handleChange:p,formErrors:m,getFieldError:v,isLoading:b})=>E.jsxs("div",{className:"space-y-2",children:[E.jsx("label",{htmlFor:"workCenter",className:"block text-sm font-medium",children:"Centro di Lavoro *"}),E.jsxs("select",{name:"workCenter",value:f.workCenter||"",onChange:p,className:`flex h-9 w-full rounded-md border bg-transparent px-3 py-1 text-sm shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring ${m.workCenter?"border-red-500":"border-input"}`,disabled:b,children:[E.jsx("option",{value:"",children:"Seleziona un centro di lavoro"}),E.jsx("option",{value:Je.ZANICA,children:Je.ZANICA}),E.jsx("option",{value:Je.BUSTO_GAROLFO,children:Je.BUSTO_GAROLFO}),E.jsx("option",{value:Je.BOTH,children:Je.BOTH})]}),v("workCenter")]});return E.jsx(H$,{title:"Scheduler",logo:"/scheduler-logo.png",subtitle:"Sistema di gestione della produzione",isLoading:t,error:r,onSubmit:u,onValidate:c,additionalFields:d,labels:{signIn:"Accedi",email:"Indirizzo Email",password:"Password",forgotPassword:"Password dimenticata?",signUp:"Crea Account",noAccount:"Non hai un account?",signingIn:"Accesso in corso..."},demoCredentials:{email:"demo@example.com",password:"demo123",workCenter:Je.ZANICA}})}function U$(){const[t,e]=D.useState({email:"",password:"",confirmPassword:"",firstName:"",lastName:""}),[n,r]=D.useState(!1),[i,s]=D.useState({}),{signUp:a,error:c}=Gd(),u=oi(),{handleAsync:d}=pa("SignupPage"),f=b=>{const{name:_,value:w}=b.target;e(x=>({...x,[_]:w})),i[_]&&s(x=>({...x,[_]:""}))},p=()=>{const b={};return t.email.trim()?/\S+@\S+\.\S+/.test(t.email)||(b.email="Inserisci un indirizzo email valido"):b.email="Email richiesta",t.password?t.password.length<6&&(b.password="La password deve essere di almeno 6 caratteri"):b.password="Password richiesta",t.confirmPassword?t.password!==t.confirmPassword&&(b.confirmPassword="Le password non coincidono"):b.confirmPassword="Conferma la tua password",t.firstName.trim()||(b.firstName="Nome richiesto"),t.lastName.trim()||(b.lastName="Cognome richiesto"),s(b),Object.keys(b).length===0},m=async b=>{b.preventDefault(),p()&&(r(!0),await d(async()=>{const _={first_name:t.firstName,last_name:t.lastName,full_name:`${t.firstName} ${t.lastName}`};(await a(t.email,t.password,_)).error||u("/",{replace:!0})},{context:"Signup",fallbackMessage:"Creazione account fallita. Riprova.",onFinally:()=>r(!1)}))},v=b=>i[b]?E.jsx("span",{className:"error-message",style:{color:"red",fontSize:"12px",marginTop:"4px"},children:i[b]}):null;return E.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-6 px-2 sm:px-6 lg:px-8",children:E.jsxs("div",{className:"max-w-md w-full space-y-4",children:[E.jsxs("div",{className:"text-center",children:[E.jsx("h1",{className:"text-[10px] font-bold text-gray-900",children:"Crea Account"}),E.jsx("p",{className:"mt-2 text-[10px] text-gray-600",children:"Registrati per iniziare con il tuo account"})]}),E.jsxs("form",{onSubmit:m,className:"mt-4 space-y-4",children:[E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[E.jsxs("div",{className:"space-y-2",children:[E.jsx(ri,{htmlFor:"firstName",children:"Nome"}),E.jsx(ni,{type:"text",id:"firstName",name:"firstName",value:t.firstName,onChange:f,placeholder:"Inserisci il tuo nome",className:i.firstName?"border-red-500":"",disabled:n,autoComplete:"given-name"}),v("firstName")]}),E.jsxs("div",{className:"space-y-2",children:[E.jsx(ri,{htmlFor:"lastName",children:"Cognome"}),E.jsx(ni,{type:"text",id:"lastName",name:"lastName",value:t.lastName,onChange:f,placeholder:"Inserisci il tuo cognome",className:i.lastName?"border-red-500":"",disabled:n,autoComplete:"family-name"}),v("lastName")]})]}),E.jsxs("div",{className:"space-y-2",children:[E.jsx(ri,{htmlFor:"email",children:"Indirizzo Email"}),E.jsx(ni,{type:"email",id:"email",name:"email",value:t.email,onChange:f,placeholder:"Inserisci la tua email",className:i.email?"border-red-500":"",disabled:n,autoComplete:"email"}),v("email")]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[E.jsxs("div",{className:"space-y-2",children:[E.jsx(ri,{htmlFor:"password",children:"Password"}),E.jsx(ni,{type:"password",id:"password",name:"password",value:t.password,onChange:f,placeholder:"Crea una password",className:i.password?"border-red-500":"",disabled:n,autoComplete:"new-password"}),v("password")]}),E.jsxs("div",{className:"space-y-2",children:[E.jsx(ri,{htmlFor:"confirmPassword",children:"Conferma Password"}),E.jsx(ni,{type:"password",id:"confirmPassword",name:"confirmPassword",value:t.confirmPassword,onChange:f,placeholder:"Conferma la tua password",className:i.confirmPassword?"border-red-500":"",disabled:n,autoComplete:"new-password"}),v("confirmPassword")]})]}),c,E.jsx(Oi,{type:"submit",size:"sm",className:"w-full",disabled:n,children:n?"Creazione Account...":"Crea Account"})]}),E.jsxs("div",{className:"text-center space-y-4",children:[E.jsxs("div",{className:"relative",children:[E.jsx("div",{className:"absolute inset-0 flex items-center",children:E.jsx("div",{className:"w-full border-t border-gray-300"})}),E.jsx("div",{className:"relative flex justify-center text-[10px]",children:E.jsx("span",{className:"px-1 bg-gray-50 text-gray-500",children:"Hai gi un account?"})})]}),E.jsx(or,{to:"/login",children:E.jsx(Oi,{variant:"outline",size:"sm",className:"w-full",children:"Accedi"})})]})]})})}function B$(){const[t,e]=D.useState(""),[n,r]=D.useState(!1),[i,s]=D.useState(!1),[a,c]=D.useState(""),{resetPassword:u}=Gd(),{handleAsync:d}=pa("ForgotPasswordPage"),f=async p=>{if(p.preventDefault(),!t.trim()){c("Inserisci il tuo indirizzo email");return}if(!/\S+@\S+\.\S+/.test(t)){c("Inserisci un indirizzo email valido");return}r(!0),c(""),await d(async()=>{const m=await u(t);m.error?c(m.error||"Invio email di reset fallito"):s(!0)},{context:"Password Reset",fallbackMessage:"Invio email di reset fallito. Riprova.",onFinally:()=>r(!1)})};return i?E.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-2 sm:px-6 lg:px-8",children:E.jsxs("div",{className:"max-w-md w-full space-y-4",children:[E.jsxs("div",{className:"text-center",children:[E.jsx("h1",{className:"text-[10px] font-bold text-gray-900",children:"Controlla la Tua Email"}),E.jsxs("p",{className:"mt-2 text-[10px] text-gray-600",children:["Abbiamo inviato un link per il reset della password a ",t]})]}),E.jsx("div",{className:"bg-green-50 border border-green-200 rounded-md p-1",children:E.jsxs("div",{className:"flex",children:[E.jsx("div",{className:"flex-shrink-0",children:E.jsx("span",{className:"text-green-400 text-[10px]",children:""})}),E.jsx("div",{className:"ml-3",children:E.jsx("p",{className:"text-[10px] text-green-800",children:"Se non vedi l'email, controlla la cartella spam."})})]})}),E.jsx("div",{className:"text-center",children:E.jsx(or,{to:"/login",children:E.jsx(Oi,{size:"sm",className:"w-full",children:"Torna all'Accesso"})})})]})}):E.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-6 px-2 sm:px-6 lg:px-8",children:E.jsxs("div",{className:"max-w-md w-full space-y-4",children:[E.jsxs("div",{className:"text-center",children:[E.jsx("h1",{className:"text-[10px] font-bold text-gray-900",children:"Reset Password"}),E.jsx("p",{className:"mt-2 text-[10px] text-gray-600",children:"Inserisci la tua email per ricevere un link per il reset della password"})]}),E.jsxs("form",{onSubmit:f,className:"mt-4 space-y-4",children:[E.jsxs("div",{className:"space-y-2",children:[E.jsx(ri,{htmlFor:"email",children:"Indirizzo Email"}),E.jsx(ni,{type:"email",id:"email",name:"email",value:t,onChange:p=>e(p.target.value),placeholder:"Inserisci la tua email",disabled:n,autoComplete:"email"})]}),a&&E.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-1",children:E.jsxs("div",{className:"flex",children:[E.jsx("div",{className:"flex-shrink-0",children:E.jsx("span",{className:"text-red-400",children:""})}),E.jsx("div",{className:"ml-3",children:E.jsx("p",{className:"text-[10px] text-red-800",children:a})})]})}),E.jsx(Oi,{type:"submit",size:"sm",className:"w-full",disabled:n,children:n?"Invio...":"Invia Link di Reset"})]}),E.jsx("div",{className:"text-center",children:E.jsx(or,{to:"/login",className:"text-[10px] text-navy-800 hover:text-navy-600",children:"Torna all'Accesso"})})]})})}const W$=`
  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }
`;if(typeof document<"u"){const t=document.createElement("style");t.textContent=W$,document.head.appendChild(t)}const V$=()=>E.jsx(jw,{to:"/login",replace:!0}),$$=()=>{const{forms:t,modals:e,hideConfirmDialog:n,conflictDialog:r,hideConflictDialog:i,showConflictDialog:s,schedulingLoading:a,selectedWorkCenter:c}=bn(),u={...t.confirmDialog||{},isOpen:e.confirmDialog||!1},{cleanup:d}=xs(),{resolveConflictByShunting:f,scheduleTaskFromSlot:p}=Zl(),m=tr();return pI(),D.useEffect(()=>()=>{d()},[d]),E.jsxs("div",{className:"flex h-screen bg-background overflow-hidden",children:[E.jsx(FO,{}),E.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[E.jsx(jO,{}),E.jsx("main",{className:"flex-1 overflow-auto bg-background min-w-0",children:E.jsx("div",{className:"p-4",children:E.jsx(NA,{})})})]}),E.jsx(wO,{position:"top-right",richColors:!0,closeButton:!0,duration:4e3}),u.isOpen&&(confirm(`${u.title}

${u.message}`)&&u.onConfirm?.(),n(),null),r.isOpen&&(()=>{const v=r.details?`Il lavoro "${r.details.draggedTask?.odp_number}" si sovrappone con "${r.details.conflictingTask?.odp_number}". Vuoi spostarlo a sinistra?`:"Conflitto rilevato. Vuoi spostare il task?",b=confirm(`${v}

OK = Sposta a Sinistra
Annulla = Sposta a Destra`);return b!==null?(async()=>{if(r.details){try{const _=r.details.schedulingParams?r.details.schedulingParams.originalConflict:r.details;console.log(" CONFLICT: Using resolveConflictByShunting",b?"left":"right");const w=await f(_,b?"left":"right",m);w.error?Ci(w.error):ha("Task spostato con successo")}catch(_){console.error(" SHUNTING ERROR:",_),Ci("Errore durante lo spostamento del task")}i()}})():i(),null})()]})};function q$(){return E.jsx(TO,{children:E.jsx(kO,{children:E.jsxs(PA,{children:[E.jsx(tn,{path:"/login",element:E.jsx(z$,{})}),E.jsx(tn,{path:"/signup",element:E.jsx(U$,{})}),E.jsx(tn,{path:"/forgot-password",element:E.jsx(B$,{})}),E.jsx(tn,{path:"/",element:E.jsx(V$,{}),children:E.jsxs(tn,{element:E.jsx($$,{}),children:[E.jsx(tn,{index:!0,element:E.jsx(j$,{})}),E.jsx(tn,{path:"machinery",element:E.jsx(gI,{})}),E.jsx(tn,{path:"machinery/add",element:E.jsx(V0,{})}),E.jsx(tn,{path:"machinery/:id/edit",element:E.jsx(V0,{})}),E.jsx(tn,{path:"machinery/:machineId/calendar",element:E.jsx(bz,{})}),E.jsx(tn,{path:"phases",element:E.jsx(_z,{})}),E.jsx(tn,{path:"phases/add",element:E.jsx(G_,{})}),E.jsx(tn,{path:"phases/:id/edit",element:E.jsx(G_,{})}),E.jsx(tn,{path:"backlog",element:E.jsx(wz,{})}),E.jsx(tn,{path:"backlog/add",element:E.jsx(Y_,{})}),E.jsx(tn,{path:"backlog/:id/edit",element:E.jsx(Y_,{})}),E.jsx(tn,{path:"scheduler",element:E.jsx(nB,{})})]})}),E.jsx(tn,{path:"*",element:E.jsx(jw,{to:"/",replace:!0})})]})})})}const G$=new FR({defaultOptions:{queries:{staleTime:300*1e3,gcTime:600*1e3,retry:1,refetchOnWindowFocus:!1},mutations:{retry:1}}}),Y$="/scheduler_demo/";Bk.createRoot(document.getElementById("root")).render(E.jsx(Q.StrictMode,{children:E.jsx(jR,{client:G$,children:E.jsx(iR,{basename:Y$,children:E.jsx(LO,{children:E.jsx(q$,{})})})})}));export{$O as A,Oi as B,em as D,Q as R,K$ as S,oi as a,cd as b,Z$ as c,n3 as d,t3 as e,X$ as f,pa as g,R0 as h,Kl as i,E as j,pn as k,tr as l,J$ as m,KM as n,Zl as o,la as p,D as r,Ut as s,_n as t,bn as u};
